!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(t){"use strict";function e(t){u.expect(t).to.has.keys(["navigation","paging","records","uri"])}var r,o,i=n(1),s=n(7),u=n(66),a=n(102),c=new Date;c.setFullYear(c.getFullYear()-1),before(function(){return i["default"].then(function(t){return r=t,o=new s["default"](r.app),o.login(r.user)})}),describe("Account",function(){it("Get Account info",function(){return o.account().get().then(function(t){u.expect(t).to.contain.keys(["id","uri","mainNumber","operator","serviceInfo","setupWizardState","status"])})}),it("Get Account info with id not exists should return 404",function(){return o.account("accountIdNotExist").get()["catch"](function(t){u.expect(t.apiResponse.response().status).to.eq(404),u.expect(t.apiResponse.json().errorCode).to.equal("InvalidParameter")})})}),describe("Extension",function(){var t=["uri","id","extensionNumber","contact","name","type","status","permissions","profileImage"];it("get current extension",function(){return o.account().extension().get().then(function(e){u.expect(e).to.contain.keys(t)})}),it("Get extension list",function(){return o.account().extension().list().then(function(n){e(n),u.expect(n.records[0]).to.has.keys(t)})}),it("Union type parameters, update extension info",function(){return o.account().extension().put({status:"Enabled"}).then(function(e){u.expect(e).to.contain.keys(t)})})}),describe("Binary response",function(){it("Get message content as binary",function(){var t=o.account().extension();return t.messageStore().list({dateFrom:c.toISOString()}).then(function(t){if(t.records.length<=0)throw new Error("No messages found for this extension.");return t.records[0]}).then(function(e){return t.messageStore(e.id).content(e.attachments[0].id).get().then(function(t){})})}),it("Get recording content",function(){var t=o.account().extension();return t.callLog().list({dateFrom:c.toISOString(),withRecording:!0}).then(function(t){if(t.records.length<=0)throw new Error("No recordings found.");return t.records[0].recording}).then(function(t){return o.account().recording(t.id+"").content().get().then(function(t){u.expect(t.headers.get("content-type")).to.has.string("audio/mpeg")})})})});var h=t+"/res/banner_index_logged.png";describe("Binary request",function(){a.createReadStream&&(it("Put profile image, input binary, response is empty.",function(){return o.account().extension().profileImage().put(a.createReadStream(h))}),it("Post profile image, input binary, response is empty.",function(){return o.account().extension().profileImage().post(a.createReadStream(h))}))}),describe("Fax",function(){it("send fax, post form data",function(){var t;return t=a.createReadStream?["Text attentment for test. Followed by a png picture.",a.createReadStream(h)]:["Test fax test sent from browser, "+navigator.userAgent],o.account().extension().fax().post({to:[{phoneNumber:"+16507411615"}]},t)}),it("send fax fail, empty parameter",function(){return o.account().extension().fax().post({},[]).then(function(t){throw new Error("should not send.")},function(t){u.expect(t.apiResponse.json().errorCode).to.eq("InvalidParameter")})})}),describe("Call Log",function(){it("Get call log",function(){return o.account().extension().callLog().list({dateFrom:c.toISOString(),perPage:2}).then(function(t){return e(t),t.records.length<1?console.warn("No call log items"):void u.expect(t.records[0]).to.has.keys(["uri","id","sessionId","startTime","duration","type","direction","action","result","to","from"])})}),it("delete today's call log",function(){return o.account().extension().callLog()["delete"]()})}),describe("post",function(){it("send sms, post plain object",function(){return o.account().extension().sms().post({from:{phoneNumber:r.user.username},text:"test sms text content.",to:[{phoneNumber:"+16507411615"}]}).then(function(t){u.expect(t).to.has.keys(["uri","id","to","from","type","creationTime","readStatus","priority","attachments","direction","availability","subject","messageStatus","smsSendingAttemptsCount","conversationId","conversation","lastModifiedTime"])})}),it("send sms, without from",function(){return o.account().extension().sms().post({text:"test sms text content.",to:[{phoneNumber:"+16507411615"}]}).then(function(t){throw new Error("should fail")})["catch"](function(t){u.expect(t.apiResponse.json().errorCode).to.eq("InvalidParameter")})})})}).call(e,"/")},function(t,e,n){(function(t){"use strict";n(3);var r=n(5),o="/data/rc-auth.json";"undefined"==typeof t||t.browser||(o="http://localhost"+o),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r(o).then(function(t){return t.json()})}).call(e,n(2))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function i(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){y&&l&&(y=!1,l.length?d=l.concat(d):v=-1,d.length&&u())}function u(){if(!y){var t=o(s);y=!0;for(var e=d.length;e;){for(l=d,d=[];++v<e;)l&&l[v].run();v=-1,e=d.length}l=null,y=!1,i(t)}}function a(t,e){this.fun=t,this.array=e}function c(){}var h,f,p=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var l,d=[],y=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new a(t,e)),1!==d.length||y||o(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){(function(e,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   3.3.1
	 */
!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function o(t){return"function"==typeof t}function i(t){W=t}function s(t){X=t}function u(){return function(){return e.nextTick(p)}}function a(){return function(){J(p)}}function c(){var t=0,e=new Q(p),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function h(){var t=new MessageChannel;return t.port1.onmessage=p,function(){return t.port2.postMessage(0)}}function f(){var t=setTimeout;return function(){return t(p,1)}}function p(){for(var t=0;t<V;t+=2){var e=nt[t],n=nt[t+1];e(n),nt[t]=void 0,nt[t+1]=void 0}V=0}function l(){try{var t=n(4);return J=t.runOnLoop||t.runOnContext,a()}catch(e){return f()}}function d(t,e){var n=arguments,r=this,o=new this.constructor(v);void 0===o[ot]&&L(o);var i=r._state;return i?!function(){var t=n[i-1];X(function(){return M(i,o,t,r._result)})}():P(r,o,t,e),o}function y(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(v);return O(n,t),n}function v(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function m(t){try{return t.then}catch(e){return at.error=e,at}}function _(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function w(t,e,n){X(function(t){var r=!1,o=_(n,e,function(n){r||(r=!0,e!==n?O(t,n):k(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function x(t,e){e._state===st?k(t,e._result):e._state===ut?j(t,e._result):P(e,void 0,function(e){return O(t,e)},function(e){return j(t,e)})}function E(t,e,n){e.constructor===t.constructor&&n===d&&e.constructor.resolve===y?x(t,e):n===at?j(t,at.error):void 0===n?k(t,e):o(n)?w(t,e,n):k(t,e)}function O(e,n){e===n?j(e,g()):t(n)?E(e,n,m(n)):k(e,n)}function S(t){t._onerror&&t._onerror(t._result),T(t)}function k(t,e){t._state===it&&(t._result=e,t._state=st,0!==t._subscribers.length&&X(T,t))}function j(t,e){t._state===it&&(t._state=ut,t._result=e,X(S,t))}function P(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+st]=n,o[i+ut]=r,0===i&&t._state&&X(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?M(n,r,o,i):o(i);t._subscribers.length=0}}function R(){this.error=null}function A(t,e){try{return t(e)}catch(n){return ct.error=n,ct}}function M(t,e,n,r){var i=o(n),s=void 0,u=void 0,a=void 0,c=void 0;if(i){if(s=A(n,r),s===ct?(c=!0,u=s.error,s=null):a=!0,e===s)return void j(e,b())}else s=r,a=!0;e._state!==it||(i&&a?O(e,s):c?j(e,u):t===st?k(e,s):t===ut&&j(e,s))}function C(t,e){try{e(function(e){O(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function B(){return ht++}function L(t){t[ot]=ht++,t._state=void 0,t._result=void 0,t._subscribers=[]}function N(t,e){this._instanceConstructor=t,this.promise=new t(v),this.promise[ot]||L(this.promise),Y(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&k(this.promise,this._result))):j(this.promise,U())}function U(){return new Error("Array Methods must be provided an Array")}function q(t){return new N(this,t).promise}function I(t){var e=this;return new e(Y(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function D(t){var e=this,n=new e(v);return j(n,t),n}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(t){this[ot]=B(),this._result=this._state=void 0,this._subscribers=[],v!==t&&("function"!=typeof t&&F(),this instanceof H?C(this,t):z())}function K(){var t=void 0;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var o=null;try{o=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===o&&!n.cast)return}t.Promise=H}var G=void 0;G=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Y=G,V=0,J=void 0,W=void 0,X=function(t,e){nt[V]=t,nt[V+1]=e,V+=2,2===V&&(W?W(p):rt())},$="undefined"!=typeof window?window:void 0,Z=$||{},Q=Z.MutationObserver||Z.WebKitMutationObserver,tt="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,nt=new Array(1e3),rt=void 0;rt=tt?u():Q?c():et?h():void 0===$?l():f();var ot=Math.random().toString(36).substring(16),it=void 0,st=1,ut=2,at=new R,ct=new R,ht=0;return N.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===it&&n<t;n++)this._eachEntry(e[n],n)},N.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===y){var o=m(t);if(o===d&&t._state!==it)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===H){var i=new n(v);E(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},N.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===it&&(this._remaining--,t===ut?j(r,n):this._result[e]=n),0===this._remaining&&k(r,this._result)},N.prototype._willSettleAt=function(t,e){var n=this;P(t,void 0,function(t){return n._settledAt(st,e,t)},function(t){return n._settledAt(ut,e,t)})},H.all=q,H.race=I,H.resolve=y,H.reject=D,H._setScheduler=i,H._setAsap=s,H._asap=X,H.prototype={constructor:H,then:d,"catch":function(t){return this.then(null,t)}},K(),H.polyfill=K,H.Promise=H,H})}).call(e,n(2),function(){return this}())},function(t,e){},function(t,e,n){n(6),t.exports=self.fetch.bind(self)},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return y.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(t){var e=new FileReader;return e.readAsArrayBuffer(t),s(e)}function a(t){var e=new FileReader;return e.readAsText(t),s(e)}function c(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(y.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(y.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob?(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(u)},this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=i(this);return t?t:Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return v.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var n=e.body;if(f.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function l(t){var e=new o,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();e.append(r,o)}),e}function d(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof o?e.headers:new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var y={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};o.prototype.append=function(t,r){t=e(t),r=n(r);var o=this.map[t];o||(o=[],this.map[t]=o),o.push(r)},o.prototype["delete"]=function(t){delete this.map[e(t)]},o.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},o.prototype.getAll=function(t){return this.map[e(t)]||[]},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,r){this.map[e(t)]=[n(r)]},o.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},y.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},c.call(f.prototype),c.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];d.redirect=function(t,e){if(g.indexOf(e)===-1)throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=f,t.Response=d,t.fetch=function(t,e){return new Promise(function(n,r){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var i;i=f.prototype.isPrototypeOf(t)&&!e?t:new f(t,e);var s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:l(s),url:o()},e="response"in s?s.response:s.responseText;n(new d(e,t))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&y.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";var r=n(8),o=n(14),i=n(54),s=n(56),u=n(59),a=function(){function t(t){t instanceof u?this.service=t:(t.server=t.server||c,this.service=new u(t))}return t.prototype.loginUrl=function(t){return this.service.platform().loginUrl(t)},t.prototype.login=function(t){return this.service.platform().login(t)},t.prototype.getAuthCode=function(t){var e=r.parse(t,!0).query,n=e.code;if(n)return n;if(e.error_description){var o=new Error(e.error_description);throw o.name=e.error,o.errors=e.errors,o}},t.prototype.logout=function(){return this.service.platform().logout()},t.prototype.on=function(t,e){this.service.platform().on(t,e)},t.prototype.createSubscription=function(){return this.service.createSubscription()},t.prototype.ensureLoggedIn=function(){return this.service.platform().ensureLoggedIn()},t.prototype.account=function(t){return new o["default"](null,t,this.service.platform())},t.prototype.clientInfo=function(){return new i["default"](null,null,this.service.platform())},t.prototype.numberPool=function(){return new s["default"](null,null,this.service.platform())},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a,e.Client=a;var c="https://platform.ringcentral.com";e.SERVER_PRODUCTION=c;var h="https://platform.devtest.ringcentral.com";e.SERVER_SANDBOX=h;var f="beforeLogin";e.EVENT_LOGIN_START=f;var p="loginSuccess";e.EVENT_LOGIN_SUCCESS=p;var l="loginError";e.EVENT_LOGIN_ERROR=l;var d="beforeRefresh";e.EVENT_REFRESH_START=d;var y="refreshSuccess";e.EVENT_REFRESH_SUCCESS=y;var v="refreshError";e.EVENT_REFRESH_ERROR=v;var g="beforeLogout";e.EVENT_LOGOUT_START=g;var b="logoutSuccess";e.EVENT_LOGOUT_SUCCESS=b;var m="logoutError";e.EVENT_LOGOUT_ERROR=m},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&c(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return a(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return o(t,!1,!0).resolve(e)}function u(t,e){return t?o(t,!1,!0).resolveObject(e):e}function a(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function h(t){return null===t}function f(t){return null==t}var p=n(9);e.parse=o,e.resolve=s,e.resolveObject=u,e.format=i,e.Url=r;var l=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,y=["<",">",'"',"`"," ","\r","\n","\t"],v=["{","}","|","\\","^","`"].concat(y),g=["'"].concat(v),b=["%","/","?",";","#"].concat(g),m=["/","?","#"],_=255,w=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=n(11);r.prototype.parse=function(t,e,n){if(!a(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=l.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||o&&O[o]||(r=r.substr(2),this.slashes=!0)}if(!O[o]&&(s||o&&!S[o])){for(var u=-1,c=0;c<m.length;c++){var h=r.indexOf(m[c]);h!==-1&&(u===-1||h<u)&&(u=h)}var f,d;d=u===-1?r.lastIndexOf("@"):r.lastIndexOf("@",u),d!==-1&&(f=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(f)),u=-1;for(var c=0;c<b.length;c++){var h=r.indexOf(b[c]);h!==-1&&(u===-1||h<u)&&(u=h)}u===-1&&(u=r.length),this.host=r.slice(0,u),r=r.slice(u),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var v=this.hostname.split(/\./),c=0,j=v.length;c<j;c++){var P=v[c];if(P&&!P.match(w)){for(var T="",R=0,A=P.length;R<A;R++)T+=P.charCodeAt(R)>127?"x":P[R];if(!T.match(w)){var M=v.slice(0,c),C=v.slice(c+1),B=P.match(x);B&&(M.push(B[1]),C.unshift(B[2])),C.length&&(r="/"+C.join(".")+r),this.hostname=M.join(".");break}}}if(this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),!y){for(var L=this.hostname.split("."),N=[],c=0;c<L.length;++c){var U=L[c];N.push(U.match(/[^A-Za-z0-9_-]/)?"xn--"+p.encode(U):U)}this.hostname=N.join(".")}var q=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+q,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!E[i])for(var c=0,j=g.length;c<j;c++){var D=g[c],F=encodeURIComponent(D);F===D&&(F=escape(D)),r=r.split(D).join(F)}var z=r.indexOf("#");z!==-1&&(this.hash=r.substr(z),r=r.slice(0,z));var H=r.indexOf("?");if(H!==-1?(this.search=r.substr(H),this.query=r.substr(H+1),e&&(this.query=k.parse(this.query)),r=r.slice(0,H)):e&&(this.search="",this.query={}),r&&(this.pathname=r),S[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",U=this.search||"";this.path=q+U}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=k.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+o+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(a(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!S[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||O[t.protocol])n.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var i=n.pathname||"",s=n.search||"";n.path=i+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var u=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),p=c||u||n.host&&t.pathname,l=p,d=n.pathname&&n.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],y=n.protocol&&!S[n.protocol];if(y&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),p=p&&(""===o[0]||""===d[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),n.search=t.search,n.query=t.query;else if(!f(t.search)){if(y){n.hostname=n.host=d.shift();var v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return n.search=t.search,n.query=t.query,h(n.pathname)&&h(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=d.slice(-1)[0],b=(n.host||t.host)&&("."===g||".."===g)||""===g,m=0,_=d.length;_>=0;_--)g=d[_],"."==g?d.splice(_,1):".."===g?(d.splice(_,1),m++):m&&(d.splice(_,1),m--);if(!p&&!l)for(;m--;m)d.unshift("..");!p||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),b&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(y){n.hostname=n.host=w?"":d.length?d.shift():"";var v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return p=p||n.host&&d.length,p&&!w&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),h(n.pathname)&&h(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var r;(function(t,o){!function(i){function s(t){throw RangeError(M[t])}function u(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function a(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(A,".");var o=t.split("."),i=u(o,e).join(".");return r+i}function c(t){for(var e,n,r=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function h(t){return u(t,function(t){var e="";return t>65535&&(t-=65536,e+=L(t>>>10&1023|55296),t=56320|1023&t),e+=L(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function l(t,e,n){var r=0;for(t=n?B(t/S):t>>1,t+=B(t/e);t>C*E>>1;r+=w)t=B(t/C);return B(r+(C+1)*t/(t+O))}function d(t){var e,n,r,o,i,u,a,c,p,d,y=[],v=t.length,g=0,b=j,m=k;for(n=t.lastIndexOf(P),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&s("not-basic"),y.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<v;){for(i=g,u=1,a=w;o>=v&&s("invalid-input"),c=f(t.charCodeAt(o++)),(c>=w||c>B((_-g)/u))&&s("overflow"),g+=c*u,p=a<=m?x:a>=m+E?E:a-m,!(c<p);a+=w)d=w-p,u>B(_/d)&&s("overflow"),u*=d;e=y.length+1,m=l(g-i,e,0==i),B(g/e)>_-b&&s("overflow"),b+=B(g/e),g%=e,y.splice(g++,0,b)}return h(y)}function y(t){var e,n,r,o,i,u,a,h,f,d,y,v,g,b,m,O=[];for(t=c(t),v=t.length,e=j,n=0,i=k,u=0;u<v;++u)y=t[u],y<128&&O.push(L(y));for(r=o=O.length,o&&O.push(P);r<v;){for(a=_,u=0;u<v;++u)y=t[u],y>=e&&y<a&&(a=y);for(g=r+1,a-e>B((_-n)/g)&&s("overflow"),n+=(a-e)*g,e=a,u=0;u<v;++u)if(y=t[u],y<e&&++n>_&&s("overflow"),y==e){for(h=n,f=w;d=f<=i?x:f>=i+E?E:f-i,!(h<d);f+=w)m=h-d,b=w-d,O.push(L(p(d+m%b,0))),h=B(m/b);O.push(L(p(h,0))),i=l(n,g,r==o),n=0,++r}++n,++e}return O.join("")}function v(t){return a(t,function(t){return T.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return R.test(t)?"xn--"+y(t):t})}var b=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof o&&o);b.global!==b&&b.window!==b&&b.self!==b||(i=b);var m,_=2147483647,w=36,x=1,E=26,O=38,S=700,k=72,j=128,P="-",T=/^xn--/,R=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=w-x,B=Math.floor,L=String.fromCharCode;m={version:"1.3.2",ucs2:{decode:c,encode:h},decode:d,encode:y,toASCII:g,toUnicode:v},r=function(){return m}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(10)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";e.decode=e.parse=n(12),e.encode=e.stringify=n(13)},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var a=t.length;u>0&&a>u&&(a=u);for(var c=0;c<a;++c){var h,f,p,l,d=t[c].replace(s,"%20"),y=d.indexOf(r);y>=0?(h=d.substr(0,y),f=d.substr(y+1)):(h=d,f=""),p=decodeURIComponent(h),l=decodeURIComponent(f),n(i,p)?Array.isArray(i[p])?i[p].push(l):i[p]=[i[p],l]:i[p]=l}return i}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,o){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(t[o])?t[o].map(function(t){return i+encodeURIComponent(n(t))}).join(e):i+encodeURIComponent(n(t[o]))}).join(e):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(t)):""}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(16),s=n(17),u=n(18),a=n(19),c=n(21),h=n(22),f=n(23),p=n(52),l=n(47),d=n(53),y=n(42),v=function(t){function e(e,n,r){t.call(this,"account",n||"~",e,r)}return r(e,t),e.prototype.activeCalls=function(t){return new i["default"](this,t)},e.prototype.businessAddress=function(t){return new s["default"](this,t)},e.prototype.callLog=function(t){return new u["default"](this,t)},e.prototype.department=function(t){return new a["default"](this,t)},e.prototype.device=function(t){return new c["default"](this,t)},e.prototype.dialingPlan=function(t){return new h["default"](this,t)},e.prototype.extension=function(t){return new f["default"](this,t)},e.prototype.order=function(t){return new p["default"](this,t)},e.prototype.phoneNumber=function(t){return new l["default"](this,t)},e.prototype.recording=function(t){return new d["default"](this,t)},e.prototype.serviceInfo=function(t){return new y["default"](this,t)},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=v},function(t,e){"use strict";var n=function(){function t(t,e,n,r){this._service=r,this.name=t,this.value=e||null,this.previous=n}return t.prototype.toString=function(t){void 0===t&&(t=!0);var e="/"+this.name;return t&&this.value&&(e+="/"+this.value),e},t.prototype.getEndpoint=function(t){void 0===t&&(t=!0);var e="";return this.previous&&(e=this.previous.getEndpoint()),e+this.toString(t)},t.prototype.getService=function(){for(var t=this;t;){if(t._service)return t._service;t.previous&&(t=t.previous)}},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"active-calls",n,e,r)}return r(e,t),e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"business-address",n,e,r)}return r(e,t),e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype.put=function(t){return this.getService().send({method:"put",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"call-log",n,e,r)}return r(e,t),e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype["delete"]=function(t){return this.getService().send({method:"delete",url:this.getEndpoint(!0),query:t,body:void 0}).then(function(t){return t.response()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(20),s=function(t){function e(e,n,r){t.call(this,"department",n,e,r)}return r(e,t),e.prototype.members=function(t){return new i["default"](this,t)},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"members",n,e,r)}return r(e,t),e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"device",n,e,r)}return r(e,t),e.prototype.list=function(){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"dialing-plan",n,e,r)}return r(e,t),e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,
new n)},o=n(15),i=n(16),s=n(24),u=n(25),a=n(28),c=n(29),h=n(31),f=n(32),p=n(18),l=n(33),d=n(34),y=n(35),v=n(21),g=n(36),b=n(38),m=n(39),_=n(40),w=n(41),x=n(44),E=n(46),O=n(47),S=n(48),k=n(49),j=n(50),P=n(51),T=function(t){function e(e,n,r){t.call(this,"extension",n||"~",e,r)}return r(e,t),e.prototype.activeCalls=function(t){return new i["default"](this,t)},e.prototype.addressBookSync=function(t){return new s["default"](this,t)},e.prototype.addressBook=function(t){return new u["default"](this,t)},e.prototype.answeringRule=function(t){return new a["default"](this,t)},e.prototype.authzProfile=function(t){return new c["default"](this,t)},e.prototype.blockedNumber=function(t){return new h["default"](this,t)},e.prototype.businessHours=function(t){return new f["default"](this,t)},e.prototype.callLog=function(t){return new p["default"](this,t)},e.prototype.callLogSync=function(t){return new l["default"](this,t)},e.prototype.companyPager=function(t){return new d["default"](this,t)},e.prototype.conferencing=function(t){return new y["default"](this,t)},e.prototype.device=function(t){return new v["default"](this,t)},e.prototype.fax=function(t){return new g["default"](this,t)},e.prototype.forwardingNumber=function(t){return new b["default"](this,t)},e.prototype.grant=function(t){return new m["default"](this,t)},e.prototype.greeting=function(t){return new _["default"](this,t)},e.prototype.meeting=function(t){return new w["default"](this,t)},e.prototype.messageStore=function(t){return new x["default"](this,t)},e.prototype.messageSync=function(t){return new E["default"](this,t)},e.prototype.phoneNumber=function(t){return new O["default"](this,t)},e.prototype.presence=function(t){return new S["default"](this,t)},e.prototype.profileImage=function(t){return new k["default"](this,t)},e.prototype.ringout=function(t){return new j["default"](this,t)},e.prototype.sms=function(t){return new P["default"](this,t)},e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype.put=function(t){return this.getService().send({method:"put",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=T},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"address-book-sync",n,e,r)}return r(e,t),e.prototype.get=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(26),s=n(27),u=function(t){function e(e,n,r){t.call(this,"address-book",n,e,r)}return r(e,t),e.prototype.contact=function(t){return new i["default"](this,t)},e.prototype.group=function(t){return new s["default"](this,t)},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"contact",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e.prototype["delete"]=function(){return this.getService().send({method:"delete",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.response()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype.put=function(t){return this.getService().send({method:"put",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"group",n,e,r)}return r(e,t),e.prototype.list=function(){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"answering-rule",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e.prototype.list=function(){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype["delete"]=function(){return this.getService().send({method:"delete",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.response()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype.put=function(t){return this.getService().send({method:"put",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(30),s=function(t){function e(e,n,r){t.call(this,"authz-profile",n,e,r)}return r(e,t),e.prototype.check=function(t){return new i["default"](this,t)},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"check",n,e,r)}return r(e,t),e.prototype.get=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"blocked-number",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e.prototype.list=function(){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype["delete"]=function(){return this.getService().send({method:"delete",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.response()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype.put=function(t){return this.getService().send({method:"put",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"business-hours",n,e,r)}return r(e,t),e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"call-log-sync",n,e,r)}return r(e,t),e.prototype.get=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"company-pager",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"conferencing",n,e,r)}return r(e,t),e.prototype.get=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:t,body:void 0}).then(function(t){return t.json()})},e.prototype.put=function(t){return this.getService().send({method:"put",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){(function(t){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(37),s=function(e){function n(t,n,r){e.call(this,"fax",n,t,r)}return r(n,e),n.prototype.post=function(e,n){function r(){return"undefined"!=typeof t&&!t.browser}function o(){return"function"==typeof Blob}var s=JSON.stringify(e),u=new i,a="application/json";if(r()){u.append("json",s,{filename:"request.json",contentType:a});for(var c=0;c<n.length;c++){var h=n[c];"string"==typeof h?u.append("attachment",h,{contentType:"text/plain"}):u.append("attachment",h)}}else{if(!o())return Promise.reject("Your're not in node and your environment does not support Blob or File API.");u.append("json",new Blob([s],{type:a}));for(var c=0;c<n.length;c++){var h=n[c];"string"==typeof h?u.append("attachment",new Blob([h],{type:"text/plain"})):u.append("attachment",h)}}return this.getService().post(this.getEndpoint(!1),u).then(function(t){return t.json()})},n}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s}).call(e,n(2))},function(t,e){t.exports=window.FormData},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"forwarding-number",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"grant",n,e,r)}return r(e,t),e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"greeting",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(42),s=n(43),u=function(t){function e(e,n,r){t.call(this,"meeting",n,e,r)}return r(e,t),e.prototype.serviceInfo=function(t){return new i["default"](this,t)},e.prototype.end=function(t){return new s["default"](this,t)},e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e.prototype.list=function(){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype["delete"]=function(){return this.getService().send({method:"delete",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.response()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype.put=function(t){return this.getService().send({method:"put",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"service-info",n,e,r)}return r(e,t),e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"end",n,e,r)}return r(e,t),e.prototype.post=function(){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.response()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(45),s=function(t){function e(e,n,r){t.call(this,"message-store",n,e,r)}return r(e,t),e.prototype.content=function(t){return new i["default"](this,t)},e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e.prototype["delete"]=function(t){return this.getService().send({method:"delete",url:this.getEndpoint(!0),query:t,body:void 0}).then(function(t){return t.response()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e.prototype.put=function(t){return this.getService().send({method:"put",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"content",n,e,r)}return r(e,t),e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.response()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"message-sync",n,e,r)}return r(e,t),e.prototype.get=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"phone-number",n,e,r)}return r(e,t),e.prototype.list=function(t){return this.getService().send({method:"get",url:this.getEndpoint(!1),query:t,body:void 0}).then(function(t){return t.json()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"presence",n,e,r)}return r(e,t),e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(37),s=function(t){function e(e,n,r){t.call(this,"profile-image",n,e,r)}return r(e,t),e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.response()})},e.prototype.put=function(t,e){void 0===e&&(e="image/png");var n=new i;return n.append("image",t,{contentType:e,filename:"profile."+e.split("/").pop()}),this.getService().put(this.getEndpoint(),n).then(function(t){})},e.prototype.post=function(t,e){void 0===e&&(e="image/png");var n=new i;return n.append("image",t,{contentType:e,filename:"profile."+e.split("/").pop()}),this.getService().put(this.getEndpoint(),n).then(function(t){})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"ringout",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e.prototype["delete"]=function(){return this.getService().send({method:"delete",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.response()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"sms",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"order",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(45),s=function(t){function e(e,n,r){t.call(this,"recording",n,e,r)}return r(e,t),e.prototype.content=function(t){return new i["default"](this,t)},e.prototype.get=function(){return this.getService().send({method:"get",url:this.getEndpoint(!0),query:void 0,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(55),s=function(t){function e(e,n,r){t.call(this,"client-info",n,e,r)}return r(e,t),e.prototype.customData=function(t){return new i["default"](this,t)},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"custom-data",n,e,r)}return r(e,t),e.prototype.put=function(t){return this.getService().send({method:"put",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=n(57),s=n(58),u=function(t){function e(e,n,r){t.call(this,"number-pool",n,e,r)}return r(e,t),e.prototype.lookup=function(t){return new i["default"](this,t)},e.prototype.reserve=function(t){return new s["default"](this,t)},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"lookup",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:t,body:void 0}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(15),i=function(t){function e(e,n,r){t.call(this,"reserve",n,e,r)}return r(e,t),e.prototype.post=function(t){return this.getService().send({method:"post",url:this.getEndpoint(!0),query:void 0,body:t}).then(function(t){return t.json()})},e}(o["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){(function(e,r){!function(e,r){t.exports=r(n(3),n(64),n(65))}(this,function(t,n,o){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/build/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n(2);var s=n(3),u=o(s),a=n(11),c=r(a),h=n(4),f=o(h),p=n(12),l=r(p),d=n(13),y=r(d),v=n(14),g=r(v),b=n(15),m=r(b),_=n(17),w=r(_),x=n(16),E=r(x),O=n(18),S=r(O),k=n(19),j=r(k),P=n(21),T=r(P),R=n(23),A=r(R),M=n(24),C=r(M),B=n(20),L=r(B),N=function(){function t(e){var n=e.server,r=e.cachePrefix,o=e.appSecret,s=e.appKey,u=e.appName,a=e.appVersion,h=e.pubnubFactory,p=e.client,l=e.redirectUri;if(i(this,t),!f.fetch)throw new Error("Native Fetch is missing, set RingCentral.SDK.core.Externals.fetch to your favorite alternative");if(!f.Promise)throw new Error("Native Promise is missing, set RingCentral.SDK.core.Externals.Promise to your favorite alternative");this._cache=new c["default"](f.localStorage,r),this._client=p||new y["default"],this._platform=new S["default"]({client:this._client,cache:this._cache,version:t.version,server:n,appKey:s,appSecret:o,appName:u,appVersion:a,redirectUri:l}),this._pubnubFactory=h||f.PUBNUB}return t.prototype.platform=function(){return this._platform},t.prototype.createSubscription=function(){return new A["default"](this._pubnubFactory,this._platform)},t.prototype.createCachedSubscription=function(t){return new C["default"](this._pubnubFactory,this._platform,this._cache,t)},t.prototype.cache=function(){return this._cache},t.handleLoginRedirect=function(t){var e,n=window.location.hash?window.location.hash:window.location.search;window.opener.postMessage((e={},e[L["default"].authResponseProperty]=n,e),t||window.location.origin)},t}();N.version=L["default"].version,N.server={sandbox:"https://platform.devtest.ringcentral.com",production:"https://platform.ringcentral.com"},N.core={Cache:c["default"],EventEmitter:l["default"],Utils:u,Externals:f},N.http={Client:y["default"],ApiResponse:g["default"]},N.platform={Auth:j["default"],Platform:S["default"]},N.subscription={Subscription:A["default"]},N.mocks={Client:m["default"],Registry:E["default"],Mock:w["default"]},N.pubnub={PubnubMockFactory:T["default"]},t.exports=N},function(t,n){(function(n){!function(n){"use strict";function r(t,e,n,r){var o=Object.create((e||i).prototype),s=new d(r||[]);return o._invoke=f(t,n,s),o}function o(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function i(){}function s(){}function u(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){this.arg=t}function h(t){function n(e,n){var r=t[e](n),o=r.value;return o instanceof c?Promise.resolve(o.arg).then(i,s):Promise.resolve(o).then(function(t){return r.value=t,r})}function r(t,e){function r(){return n(t,e)}return o=o?o.then(r,r):new Promise(function(t){t(r())})}"object"==typeof e&&e.domain&&(n=e.domain.bind(n));var o,i=n.bind(t,"next"),s=n.bind(t,"throw");n.bind(t,"return");this._invoke=r}function f(t,e,n){var r=x;return function(i,s){if(r===O)throw new Error("Generator is already running");if(r===S){if("throw"===i)throw s;return v()}for(;;){var u=n.delegate;if(u){if("return"===i||"throw"===i&&u.iterator[i]===g){n.delegate=null;var a=u.iterator["return"];if(a){var c=o(a,u.iterator,s);if("throw"===c.type){i="throw",s=c.arg;continue}}if("return"===i)continue}var c=o(u.iterator[i],u.iterator,s);if("throw"===c.type){n.delegate=null,i="throw",s=c.arg;continue}i="next",s=g;var h=c.arg;if(!h.done)return r=E,h;n[u.resultName]=h.value,n.next=u.nextLoc,n.delegate=null}if("next"===i)n._sent=s,r===E?n.sent=s:n.sent=g;else if("throw"===i){if(r===x)throw r=S,s;n.dispatchException(s)&&(i="next",s=g)}else"return"===i&&n.abrupt("return",s);r=O;var c=o(t,e,n);if("normal"===c.type){r=n.done?S:E;var h={value:c.arg,done:n.done};if(c.arg!==k)return h;n.delegate&&"next"===i&&(s=g)}else"throw"===c.type&&(r=S,i="throw",s=c.arg)}}}function p(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function l(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(p,this),this.reset(!0)}function y(t){if(t){var e=t[m];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function o(){for(;++n<t.length;)if(b.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=g,o.done=!0,o};return r.next=r}}return{next:v}}function v(){return{value:g,done:!0}}var g,b=Object.prototype.hasOwnProperty,m="function"==typeof Symbol&&Symbol.iterator||"@@iterator",_="object"==typeof t,w=n.regeneratorRuntime;if(w)return void(_&&(t.exports=w));w=n.regeneratorRuntime=_?t.exports:{},
w.wrap=r;var x="suspendedStart",E="suspendedYield",O="executing",S="completed",k={},j=u.prototype=i.prototype;s.prototype=j.constructor=u,u.constructor=s,s.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):t.__proto__=u,t.prototype=Object.create(j),t},w.awrap=function(t){return new c(t)},a(h.prototype),w.async=function(t,e,n,o){var i=new h(r(t,e,n,o));return w.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},a(j),j[m]=function(){return this},j.toString=function(){return"[object Generator]"},w.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},w.values=y,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(l),!t)for(var e in this)"t"===e.charAt(0)&&b.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var s=b.call(o,"catchLoc"),u=b.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?this.next=o.finallyLoc:this.complete(i),k},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),l(n),k}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;l(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:y(t),resultName:e,nextLoc:n},k}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}())},function(t,n,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){return b["default"].stringify(t)}function s(t){return b["default"].parse(t)}function u(t){return"function"==typeof t}function a(t){return Array.isArray?Array.isArray(t):"array"==typeof t}function c(t){return null!=t&&"object"===("undefined"==typeof t?"undefined":y(t))&&!a(t)}function h(t){return c(t)===!0&&"[object Object]"===Object.prototype.toString.call(t)}function f(t){var e,n;return h(t)!==!1&&(e=t.constructor,"function"==typeof e&&(n=e.prototype,h(n)!==!1&&n.hasOwnProperty("isPrototypeOf")!==!1))}function p(){return"undefined"!=typeof e}function l(){return"undefined"!=typeof window}function d(t){return new v.Promise(function(e,n){setTimeout(function(){e(null)},t)})}n.__esModule=!0;var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};n.queryStringify=i,n.parseQueryString=s,n.isFunction=u,n.isArray=a,n.isObject=c,n.isObjectObject=h,n.isPlainObject=f,n.isNodeJS=p,n.isBrowser=l,n.delay=d;var v=r(4),g=r(8),b=o(g)},function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.localStorage=e.PUBNUB=e.Headers=e.Response=e.Request=e.fetch=e.Promise=void 0;var o=n(5),i=r(o),s=n(6),u=r(s),a=n(7),c=r(a),h="undefined"!=typeof window&&window||"undefined"!=typeof t&&t||Function("return this;")(),f=i["default"]&&i["default"].Promise||h.Promise,p=u["default"]?(0,u["default"])({Promise:f}):{},l=p.fetch||h.fetch,d=p.Request||h.Request,y=p.Response||h.Response,v=p.Headers||h.Headers,g=c["default"]||h.PUBNUB,b="undefined"!=typeof h.localStorage?h.localStorage:{};e.Promise=f,e.fetch=l,e.Request=d,e.Response=y,e.Headers=v,e.PUBNUB=g,e.localStorage=b}).call(e,function(){return this}())},function(e,n){e.exports=t},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e,n){"use strict";e.decode=e.parse=n(9),e.encode=e.stringify=n(10)},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var a=t.length;u>0&&a>u&&(a=u);for(var c=0;c<a;++c){var h,f,p,l,d=t[c].replace(s,"%20"),y=d.indexOf(r);y>=0?(h=d.substr(0,y),f=d.substr(y+1)):(h=d,f=""),p=decodeURIComponent(h),l=decodeURIComponent(f),n(i,p)?Array.isArray(i[p])?i[p].push(l):i[p]=[i[p],l]:i[p]=l}return i}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,o){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(t[o])?t[o].map(function(t){return i+encodeURIComponent(n(t))}).join(e):i+encodeURIComponent(n(t[o]))}).join(e):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(t)):""}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,r){n(this,t),this.setPrefix(r),this._storage=e}return t.prototype.setPrefix=function(e){return this._prefix=e||t.defaultPrefix,this},t.prototype.setItem=function(t,e){return this._storage[this._prefixKey(t)]=JSON.stringify(e),this},t.prototype.removeItem=function(t){return delete this._storage[this._prefixKey(t)],this},t.prototype.getItem=function(t){var e=this._storage[this._prefixKey(t)];return e?JSON.parse(e):null},t.prototype.clean=function(){for(var t in this._storage)this._storage.hasOwnProperty(t)&&0===t.indexOf(this._prefix)&&delete this._storage[t];return this},t.prototype._prefixKey=function(t){return this._prefix+t},t}();r.defaultPrefix="rc-",e["default"]=r},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,u,a,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(i(n))for(u=Array.prototype.slice.call(arguments,1),c=n.slice(),o=c.length,a=0;a<o;a++)c[a].apply(this,u);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,s,u;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(u=s;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){o=u;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var s=e[o](i),u=s.value}catch(a){return void n(a)}return s.done?void t(u):Promise.resolve(u).then(function(t){return r("next",t)},function(t){return r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){return t=t.toLowerCase(),Object.keys(e).reduce(function(e,n){return e?e:t==n.toLowerCase()?n:e},null)}e.__esModule=!0,e.findHeaderName=a;var c=n(4),h=n(3),f=n(12),p=r(f),l=n(14),d=r(l),y=function(t){function e(){var n,r,o;i(this,e);for(var u=arguments.length,a=Array(u),c=0;c<u;c++)a[c]=arguments[c];return n=r=s(this,t.call.apply(t,[this].concat(a))),r.events={beforeRequest:"beforeRequest",requestSuccess:"requestSuccess",requestError:"requestError"},o=n,s(r,o)}return u(e,t),e.prototype.sendRequest=function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function n(t){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=new d["default"](t),n.prev=1,this.emit(this.events.beforeRequest,e),n.next=5,this._loadResponse(t);case 5:return e._response=n.sent,n.next=8,e._init();case 8:if(e.ok()){n.next=10;break}throw new Error("Response has unsuccessful status");case 10:return this.emit(this.events.requestSuccess,e),n.abrupt("return",e);case 14:throw n.prev=14,n.t0=n["catch"](1),n.t0.apiResponse||(n.t0=this.makeError(n.t0,e)),this.emit(this.events.requestError,n.t0),n.t0;case 19:case"end":return n.stop()}},n,this,[[1,14]])}));return t}(),e.prototype._loadResponse=function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function n(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.fetch.call(null,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},n,this)}));return t}(),e.prototype.makeError=function(t,e){return t.hasOwnProperty("apiResponse")||t.hasOwnProperty("originalMessage")||(t.apiResponse=e,t.originalMessage=t.message,t.message=e&&e.error(!0)||t.originalMessage),t},e.prototype.createRequest=function(t){if(t=t||{},t.headers=t.headers||{},!t.url)throw new Error("Url is not defined");if(t.method||(t.method="GET"),t.method=t.method.toUpperCase(),t.method&&e._allowedMethods.indexOf(t.method)<0)throw new Error("Method has wrong value: "+t.method);if(t.credentials=t.credentials||"include",t.mode=t.mode||"cors",t.query&&(t.url=t.url+(t.url.indexOf("?")>-1?"&":"?")+(0,h.queryStringify)(t.query)),a("Accept",t.headers)||(t.headers.Accept=d["default"]._jsonContentType),(0,h.isPlainObject)(t.body)||!t.body){var n=a(d["default"]._contentType,t.headers);n||(n=d["default"]._contentType,t.headers[n]=d["default"]._jsonContentType);var r=t.headers[n];r.indexOf(d["default"]._jsonContentType)>-1?"GET"!==t.method&&"HEAD"!==t.method||!t.body?t.body=JSON.stringify(t.body):t.body=void 0:r.indexOf(d["default"]._urlencodedContentType)>-1&&(t.body=(0,h.queryStringify)(t.body))}var o=new c.Request(t.url,t);return o.originalBody=t.body,o},e}(p["default"]);y._allowedMethods=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD"],e["default"]=y},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new i.Promise(function(t,n){function r(o,s){try{var u=e[o](s),a=u.value}catch(c){return void n(c)}return u.done?void t(a):i.Promise.resolve(a).then(function(t){return r("next",t)},function(t){return r("throw",t)})}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(4),s=function(){function t(e,n,r){o(this,t),this._request=e,this._response=n,this._text=r,this._json=null,this._multipart=[]}return t.prototype._init=function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isMultipart()&&!this._isJson()){t.next=4;break}return t.next=3,this.response().text();case 3:this._text=t.sent;case 4:return t.abrupt("return",this);case 5:case"end":return t.stop()}},n,this)}));return t}(),t.prototype.response=function(){return this._response},t.prototype.request=function(){return this._request},t.prototype.ok=function(){return this._response&&this._response.ok},t.prototype.text=function(){if(!this._isJson()&&!this._isMultipart())throw new Error("Response is not text");return this._text},t.prototype.json=function(){if(!this._isJson())throw new Error("Response is not JSON");return this._json||(this._json=this._text?JSON.parse(this._text):null),this._json},t.prototype.error=function(t){if(this.ok()&&!t)return null;var e=(this._response&&this._response.status?this._response.status+" ":"")+(this._response&&this._response.statusText?this._response.statusText:"");try{this.json().message&&(e=this.json().message),this.json().error_description&&(e=this.json().error_description),this.json().description&&(e=this.json().description)}catch(n){}return e},t.prototype.multipart=function(){if(!this._isMultipart())throw new Error("Response is not multipart");if(!this._multipart.length){var e=this.text();if(!e)throw new Error("No response body");var n=this._getContentType().match(/boundary=([^;]+)/i)[1];if(!n)throw new Error("Cannot find boundary");var r=e.toString().split(t._boundarySeparator+n);if(""===r[0].trim()&&r.shift(),r[r.length-1].trim()==t._boundarySeparator&&r.pop(),r.length<1)throw new Error("No parts in body");var o=t.create(r.shift(),this._response.status,this._response.statusText).json();this._multipart=r.map(function(e,n){var r=o.response[n].status;return t.create(e,r)})}return this._multipart},t.prototype._isContentType=function(t){return this._getContentType().indexOf(t)>-1},t.prototype._getContentType=function(){return this._response.headers.get(t._contentType)||""},t.prototype._isMultipart=function(){return this._isContentType(t._multipartContentType)},t.prototype._isUrlEncoded=function(){return this._isContentType(t._urlencodedContentType)},t.prototype._isJson=function(){return this._isContentType(t._jsonContentType)},t.create=function(e,n,r){e=e||"",n=n||200,r=r||"OK",e=e.replace(/\r/g,"");var o=new i.Headers,s=e.split(t._bodySeparator),u=s.length>1?s.shift():"";return e=s.length>0?s.join(t._bodySeparator):null,(u||"").split("\n").forEach(function(e){var n=e.trim().split(t._headerSeparator),r=n.shift().trim(),i=n.join(t._headerSeparator).trim();r&&o.append(r,i)}),new t(null,new i.Response(e?e:void 0,{headers:o,status:n,statusText:r}),e)},t}();s._contentType="Content-Type",s._jsonContentType="application/json",s._multipartContentType="multipart/mixed",s._urlencodedContentType="application/x-www-form-urlencoded",s._headerSeparator=":",s._bodySeparator="\n\n",s._boundarySeparator="--",e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var s=e[o](i),u=s.value}catch(a){return void n(a)}return s.done?void t(u):Promise.resolve(u).then(function(t){return r("next",t)},function(t){return r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(16),c=r(a),h=n(13),f=r(h),p=function(t){function e(){i(this,e);var n=s(this,t.call(this));return n._registry=new c["default"],n}return u(e,t),e.prototype.registry=function(){return this._registry},e.prototype._loadResponse=function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function n(t){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=this._registry.find(t),n.next=3,e.getResponse(t);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},n,this)}));return t}(),e}(f["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(17),s=r(i),u=function(){function t(){o(this,t),this._mocks=[]}return t.prototype.add=function(t){return this._mocks.push(t),this},t.prototype.clear=function(){return this._mocks=[],this},t.prototype.find=function(t){var e=this._mocks.shift();if(!e)throw new Error("No mock in registry for request "+t.method+" "+t.url);if(!e.test(t))throw new Error("Wrong request "+t.method+" "+t.url+" for expected mock "+e.method()+" "+e.path());return e},t.prototype.apiCall=function(t,e,n,r,o,i){return this.add(new s["default"](t,e,n,r,o,i)),this},t.prototype.authentication=function(){return this.apiCall("POST","/restapi/oauth/token",{access_token:"ACCESS_TOKEN",token_type:"bearer",expires_in:3600,refresh_token:"REFRESH_TOKEN",refresh_token_expires_in:60480,scope:"SMS RCM Foo Boo",expireTime:(new Date).getTime()+36e5}),this},t.prototype.logout=function(){return this.apiCall("POST","/restapi/oauth/revoke",{}),this},t.prototype.presenceLoad=function(t){return this.apiCall("GET","/restapi/v1.0/account/~/extension/"+t+"/presence",{uri:"https://platform.ringcentral.com/restapi/v1.0/account/123/extension/"+t+"/presence",extension:{uri:"https://platform.ringcentral.com/restapi/v1.0/account/123/extension/"+t,id:t,extensionNumber:"101"},activeCalls:[],presenceStatus:"Available",telephonyStatus:"Ringing",userStatus:"Available",dndStatus:"TakeAllCalls",extensionId:t}),this},t.prototype.subscribeGeneric=function(t){t=t||54e3;var e=new Date;return this.apiCall("POST","/restapi/v1.0/subscription",{eventFilters:["/restapi/v1.0/account/~/extension/~/presence"],expirationTime:new Date(e.getTime()+1e3*t).toISOString(),expiresIn:t,deliveryMode:{transportType:"PubNub",encryption:!1,address:"123_foo",subscriberKey:"sub-c-foo",secretKey:"sec-c-bar"},id:"foo-bar-baz",creationTime:e.toISOString(),status:"Active",uri:"https://platform.ringcentral.com/restapi/v1.0/subscription/foo-bar-baz"}),this},t.prototype.subscribeOnPresence=function(t,e){t=t||"1";var n=new Date;return this.apiCall("POST","/restapi/v1.0/subscription",{eventFilters:["/restapi/v1.0/account/~/extension/"+t+"/presence"+(e?"?detailedTelephonyState=true":"")],expirationTime:new Date(n.getTime()+54e6).toISOString(),deliveryMode:{transportType:"PubNub",encryption:!0,address:"123_foo",subscriberKey:"sub-c-foo",secretKey:"sec-c-bar",encryptionAlgorithm:"AES",encryptionKey:"VQwb6EVNcQPBhE/JgFZ2zw=="},creationTime:n.toISOString(),id:"foo-bar-baz",status:"Active",uri:"https://platform.ringcentral.com/restapi/v1.0/subscription/foo-bar-baz"}),this},t.prototype.tokenRefresh=function(t){return t?this.apiCall("POST","/restapi/oauth/token",{message:"Wrong token",error_description:"Wrong token",description:"Wrong token"},400):this.apiCall("POST","/restapi/oauth/token",{access_token:"ACCESS_TOKEN_FROM_REFRESH",token_type:"bearer",expires_in:3600,refresh_token:"REFRESH_TOKEN_FROM_REFRESH",refresh_token_expires_in:60480,scope:"SMS RCM Foo Boo"}),this},t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){return function(){var e=t.apply(this,arguments);return new s.Promise(function(t,n){function r(o,i){try{var u=e[o](i),a=u.value}catch(c){return void n(c)}return u.done?void t(a):s.Promise.resolve(a).then(function(t){return r("next",t)},function(t){return r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(4),u=n(14),a=r(u),c=n(3),h=function(){function t(e,n,r,o,s,u){i(this,t),this._method=e.toUpperCase(),this._path=n,this._json=r||{},this._delay=u||10,this._status=o||200,this._statusText=s||"OK"}return t.prototype.path=function(){return this._path},t.prototype.method=function(){return this._method},t.prototype.test=function(t){return t.url.indexOf(this._path)>-1&&t.method.toUpperCase()==this._method},t.prototype.getResponse=function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function n(t){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.delay)(this._delay);case 2:return t.abrupt("return",this.createResponse(this._json));case 3:case"end":return t.stop()}},n,this)}));return t}(),t.prototype.createResponse=function(t,e){e=e||{},e.status=e.status||this._status,e.statusText=e.statusText||this._statusText;var n=JSON.stringify(t),r=new s.Response(n,e);return r.headers.set(a["default"]._contentType,a["default"]._jsonContentType),r},t}();e["default"]=h},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){return function(){var e=t.apply(this,arguments);return new c.Promise(function(t,n){function r(o,i){try{var s=e[o](i),u=s.value}catch(a){return void n(a)}return s.done?void t(u):c.Promise.resolve(u).then(function(t){return r("next",t)},function(t){return r("throw",t)})}return r("next")})}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var c=n(4),h=n(12),f=o(h),p=n(19),l=o(p),d=n(3),y=n(20),v=o(y),g=function(t){function e(n){var r=n.client,o=n.cache,i=n.server,a=n.appKey,c=n.appSecret,h=n.appName,f=n.appVersion,p=n.sdkVersion,d=n.redirectUri;s(this,e);var y=u(this,t.call(this));return y.events={beforeLogin:"beforeLogin",loginSuccess:"loginSuccess",loginError:"loginError",beforeRefresh:"beforeRefresh",refreshSuccess:"refreshSuccess",refreshError:"refreshError",beforeLogout:"beforeLogout",logoutSuccess:"logoutSuccess",logoutError:"logoutError"},y._server=i,y._appKey=a,y._appSecret=c,y._cache=o,y._client=r,y._refreshPromise=null,y._auth=new l["default"](y._cache,e._cacheId),y._userAgent=(h?h+(f?"/"+f:"")+" ":"")+"RCJSSDK/"+p,y._redirectUri=d||"",y}return a(e,t),e.prototype.auth=function(){return this._auth},e.prototype.client=function(){return this._client},e.prototype.createUrl=function(t,n){t=t||"",n=n||{};var r="",o=t.indexOf("http://")!=-1||t.indexOf("https://")!=-1;return n.addServer&&!o&&(r+=this._server),t.indexOf(e._urlPrefix)!=-1||o||(r+=e._urlPrefix+"/"+e._apiVersion),r+=t,(n.addMethod||n.addToken)&&(r+=t.indexOf("?")>-1?"&":"?"),n.addMethod&&(r+="_method="+n.addMethod),n.addToken&&(r+=(n.addMethod?"&":"")+"access_token="+this._auth.accessToken()),r},e.prototype.loginUrl=function(t){return t=t||{},this.createUrl(e._authorizeEndpoint+"?"+(0,d.queryStringify)({response_type:t.implicit?"token":"code",redirect_uri:t.redirectUri||this._redirectUri,client_id:this._appKey,state:t.state||"",brand_id:t.brandId||"",display:t.display||"",prompt:t.prompt||""}),{addServer:!0})},e.prototype.parseLoginRedirect=function(t){function e(t,e){return t.split(e).reverse()[0]}var n=0===t.indexOf("#")&&e(t,"#")||0===t.indexOf("?")&&e(t,"?")||null;if(!n)throw new Error("Unable to parse response");var r=(0,d.parseQueryString)(n);if(!r)throw new Error("Unable to parse response");var o=r.error_description||r.error;if(o){var i=new Error(o);throw i.error=r.error,i}return r},e.prototype.loginWindow=function(t){var e=this;return new c.Promise(function(n,r){if(!(0,d.isBrowser)())throw new Error("This method can be used only in browser");if(!t.url)throw new Error("Missing mandatory URL parameter");t=t||{},t.url=t.url||400,t.width=t.width||400,t.height=t.height||600,t.origin=t.origin||window.location.origin,t.property=t.property||v["default"].authResponseProperty,t.target=t.target||"_blank";var o=void 0!=window.screenLeft?window.screenLeft:screen.left,i=void 0!=window.screenTop?window.screenTop:screen.top,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,u=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,a=s/2-t.width/2+o,c=u/2-t.height/2+i,h=window.open(t.url,"_blank","_blank"==t.target?"scrollbars=yes, status=yes, width="+t.width+", height="+t.height+", left="+a+", top="+c:"");window.focus&&h.focus();var f=window.addEventListener?"addEventListener":"attachEvent",p="addEventListener"==f?"removeEventListener":"detachEvent",l="addEventListener"==f?"message":"onmessage",y=function g(o){if(o.origin==t.origin&&o.data&&o.data[t.property]){h.close(),window[p](l,g);try{var i=e.parseLoginRedirect(o.data[t.property]);if(!i.code&&!i.access_token)throw new Error("No authorization code or token");n(i)}catch(o){r(o)}}};window[f](l,y,!1)})},e.prototype.loggedIn=function(){function t(){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.ensureLoggedIn();case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",!1);case 9:case"end":return t.stop()}},n,this,[[0,6]])}));return t}(),e.prototype.login=function(){function t(t){return n.apply(this,arguments)}var n=i(regeneratorRuntime.mark(function r(t){var n,o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=t||{},this.emit(this.events.beforeLogin),n={},t.code?t.code&&(n.grant_type="authorization_code",n.code=t.code,n.redirect_uri=t.redirectUri||this._redirectUri):(n.grant_type="password",n.username=t.username,n.password=t.password,n.extension=t.extension||""),!t.access_token){r.next=9;break}i=t,r.next=16;break;case 9:return t.endpointId&&(n.endpoint_id=t.endpointId),t.accessTokenTtl&&(n.accessTokenTtl=t.accessTokenTtl),t.refreshTokenTtl&&(n.refreshTokenTtl=t.refreshTokenTtl),r.next=14,this._tokenRequest(e._tokenEndpoint,n);case 14:o=r.sent,i=o.json();case 16:return this._auth.setData(i),this.emit(this.events.loginSuccess,o),r.abrupt("return",o);case 21:throw r.prev=21,r.t0=r["catch"](0),this._cache.clean(),this.emit(this.events.loginError,r.t0),r.t0;case 26:case"end":return r.stop()}},r,this,[[0,21]])}));return t}(),e.prototype._refresh=function(){function t(){return n.apply(this,arguments)}var n=i(regeneratorRuntime.mark(function r(){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.emit(this.events.beforeRefresh),r.next=4,(0,d.delay)(e._refreshDelayMs);case 4:if(this._auth.refreshToken()){r.next=6;break}throw new Error("Refresh token is missing");case 6:if(this._auth.refreshTokenValid()){r.next=8;break}throw new Error("Refresh token has expired");case 8:return r.next=10,this._tokenRequest(e._tokenEndpoint,{grant_type:"refresh_token",refresh_token:this._auth.refreshToken(),access_token_ttl:this._auth.data().expires_in+1,refresh_token_ttl:this._auth.data().refresh_token_expires_in+1});case 10:if(t=r.sent,n=t.json(),n.access_token){r.next=14;break}throw this._client.makeError(new Error("Malformed OAuth response"),t);case 14:return this._auth.setData(n),this.emit(this.events.refreshSuccess,t),r.abrupt("return",t);case 19:throw r.prev=19,r.t0=r["catch"](0),r.t0=this._client.makeError(r.t0),e._clearCacheOnRefreshError&&this._cache.clean(),this.emit(this.events.refreshError,r.t0),r.t0;case 25:case"end":return r.stop()}},r,this,[[0,19]])}));return t}(),e.prototype.refresh=function(){function t(){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._refreshPromise){e.next=2;break}return e.abrupt("return",this._refreshPromise);case 2:return e.prev=2,this._refreshPromise=this._refresh().then(function(e){return t._refreshPromise=null,e}),e.abrupt("return",this._refreshPromise);case 7:throw e.prev=7,e.t0=e["catch"](2),this._refreshPromise=null,e.t0;case 11:case"end":return e.stop()}},n,this,[[2,7]])}));return t}(),e.prototype.logout=function(){function t(){return n.apply(this,arguments)}var n=i(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(n){
for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this.emit(this.events.beforeLogout),n.next=4,this._tokenRequest(e._revokeEndpoint,{token:this._auth.accessToken()});case 4:return t=n.sent,this._cache.clean(),this.emit(this.events.logoutSuccess,t),n.abrupt("return",t);case 10:throw n.prev=10,n.t0=n["catch"](0),this.emit(this.events.logoutError,n.t0),n.t0;case 14:case"end":return n.stop()}},r,this,[[0,10]])}));return t}(),e.prototype.inflateRequest=function(){function t(t,n){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(t,e){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=e||{},!e.skipAuthCheck){n.next=3;break}return n.abrupt("return",t);case 3:return n.next=5,this.ensureLoggedIn();case 5:return t.headers.set("X-User-Agent",this._userAgent),t.headers.set("Client-Id",this._appKey),t.headers.set("Authorization",this._authHeader()),n.abrupt("return",t);case 9:case"end":return n.stop()}},n,this)}));return t}(),e.prototype.sendRequest=function(){function t(t,n){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(t,e){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.inflateRequest(t,e);case 3:return t=n.sent,n.next=6,this._client.sendRequest(t);case 6:return n.abrupt("return",n.sent);case 9:if(n.prev=9,n.t0=n["catch"](0),n.t0.apiResponse&&n.t0.apiResponse.response()&&401==n.t0.apiResponse.response().status&&!e.retry){n.next=13;break}throw n.t0;case 13:return this._auth.cancelAccessToken(),e.retry=!0,n.next=17,this.sendRequest(t,e);case 17:return n.abrupt("return",n.sent);case 18:case"end":return n.stop()}},n,this,[[0,9]])}));return t}(),e.prototype.send=function(){function t(t){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.url=this.createUrl(t.url,{addServer:!0}),e.next=3,this.sendRequest(this._client.createRequest(t),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n,this)}));return t}(),e.prototype.get=function(){function t(t,n,r){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(t,e,r){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=r||{},r.method="GET",r.url=t,r.query=e,n.next=6,this.send(r);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},n,this)}));return t}(),e.prototype.post=function(){function t(t,n,r,o){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(t,e,r,o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=o||{},o.method="POST",o.url=t,o.query=r,o.body=e,n.next=7,this.send(o);case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}},n,this)}));return t}(),e.prototype.put=function(){function t(t,n,r,o){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(t,e,r,o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=o||{},o.method="PUT",o.url=t,o.query=r,o.body=e,n.next=7,this.send(o);case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}},n,this)}));return t}(),e.prototype["delete"]=function(){function t(t,n,r){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(t,e,r){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=r||{},r.method="DELETE",r.url=t,r.query=e,n.next=6,this.send(r);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},n,this)}));return t}(),e.prototype._tokenRequest=function(){function t(t,n){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(t,e){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send({url:t,skipAuthCheck:!0,body:e,method:"POST",headers:{Authorization:"Basic "+this._apiKey(),"Content-Type":"application/x-www-form-urlencoded"}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}));return t}(),e.prototype.ensureLoggedIn=function(){function t(){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isAccessTokenValid()){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.refresh();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},n,this)}));return t}(),e.prototype._isAccessTokenValid=function(){return this._auth.accessTokenValid()},e.prototype._apiKey=function(){var t=this._appKey+":"+this._appSecret;return"function"==typeof btoa?btoa(t):new r(t).toString("base64")},e.prototype._authHeader=function(){var t=this._auth.accessToken();return this._auth.tokenType()+(t?" "+t:"")},e}(f["default"]);g._urlPrefix="/restapi",g._apiVersion="v1.0",g._tokenEndpoint="/restapi/oauth/token",g._revokeEndpoint="/restapi/oauth/revoke",g._authorizeEndpoint="/restapi/oauth/authorize",g._refreshDelayMs=100,g._cacheId="platform",g._clearCacheOnRefreshError=!1,e["default"]=g},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,r){n(this,t),this._cache=e,this._cacheId=r}return t.prototype.accessToken=function(){return this.data().access_token},t.prototype.refreshToken=function(){return this.data().refresh_token},t.prototype.tokenType=function(){return this.data().token_type},t.prototype.data=function(){return this._cache.getItem(this._cacheId)||{token_type:"",access_token:"",expires_in:0,refresh_token:"",refresh_token_expires_in:0}},t.prototype.setData=function(t){t=t||{};var e=this.data();return Object.keys(t).forEach(function(n){e[n]=t[n]}),e.expire_time=Date.now()+1e3*e.expires_in,e.refresh_token_expire_time=Date.now()+1e3*e.refresh_token_expires_in,this._cache.setItem(this._cacheId,e),this},t.prototype.accessTokenValid=function(){var e=this.data();return e.token_type===t.forcedTokenType||e.expire_time-t.refreshHandicapMs>Date.now()},t.prototype.refreshTokenValid=function(){return this.data().refresh_token_expire_time>Date.now()},t.prototype.cancelAccessToken=function(){return this.setData({access_token:"",expires_in:0})},t.prototype.forceAuthentication=function(){return this.setData({token_type:t.forcedTokenType,access_token:"",expires_in:0,refresh_token:"",refresh_token_expires_in:0}),this},t}();r.refreshHandicapMs=6e4,r.forcedTokenType="forced",e["default"]=r},function(t,e,n){"use strict";e.__esModule=!0,e["default"]={authResponseProperty:"RCAuthorizationResponse",version:"3.0.0-rc2"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(22),s=r(i),u=n(4),a=function(){function t(){o(this,t),this.crypto_obj=u.PUBNUB.crypto_obj}return t.prototype.init=function(t){return new s["default"](t)},t}();e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(12),a=r(u),c=n(4),h=function(t){function e(n){o(this,e);var r=i(this,t.call(this));return r.options=n,r.crypto_obj=c.PUBNUB.crypto_obj,r}return s(e,t),e.prototype.init=function(t){this.options=t},e.prototype.ready=function(){},e.prototype.subscribe=function(t){this.on("message-"+t.channel,t.message)},e.prototype.unsubscribe=function(t){this.removeAllListeners("message-"+t.channel)},e.prototype.receiveMessage=function(t,e){this.emit("message-"+e,t,"env",e)},e}(a["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var s=e[o](i),u=s.value}catch(a){return void n(a)}return s.done?void t(u):Promise.resolve(u).then(function(t){return r("next",t)},function(t){return r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(12),c=r(a),h=function(t){function e(n,r){i(this,e);var o=s(this,t.call(this));return o.events={notification:"notification",removeSuccess:"removeSuccess",removeError:"removeError",renewSuccess:"renewSuccess",renewError:"renewError",subscribeSuccess:"subscribeSuccess",subscribeError:"subscribeError"},o._pubnubFactory=n,o._platform=r,o._pubnub=null,o._pubnubLastChannel=null,o._timeout=null,o._subscription=null,o}return u(e,t),e.prototype.subscribed=function(){var t=this.subscription();return!!(t.id&&t.deliveryMode&&t.deliveryMode.subscriberKey&&t.deliveryMode.address)},e.prototype.alive=function(){return this.subscribed()&&Date.now()<this.expirationTime()},e.prototype.expired=function(){return!this.subscribed()||(!this.subscribed()||Date.now()>this.subscription().expirationTime)},e.prototype.expirationTime=function(){return new Date(this.subscription().expirationTime||0).getTime()-e._renewHandicapMs},e.prototype.setSubscription=function(t){return t=t||{},this._clearTimeout(),this._setSubscription(t),this._subscribeAtPubnub(),this._setTimeout(),this},e.prototype.subscription=function(){return this._subscription||{}},e.prototype.register=function(){function t(){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.alive()){t.next=6;break}return t.next=3,this.renew();case 3:return t.abrupt("return",t.sent);case 6:return t.next=8,this.subscribe();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}},n,this)}));return t}(),e.prototype.eventFilters=function(){return this.subscription().eventFilters||[]},e.prototype.addEventFilters=function(t){return this.setEventFilters(this.eventFilters().concat(t)),this},e.prototype.setEventFilters=function(t){var e=this.subscription();return e.eventFilters=t,this._setSubscription(e),this},e.prototype.subscribe=function(){function t(){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function n(){var t,e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,this._clearTimeout(),this.eventFilters().length){n.next=4;break}throw new Error("Events are undefined");case 4:return n.next=6,this._platform.post("/subscription",{eventFilters:this._getFullEventFilters(),deliveryMode:{transportType:"PubNub"}});case 6:return t=n.sent,e=t.json(),this.setSubscription(e).emit(this.events.subscribeSuccess,t),n.abrupt("return",t);case 12:throw n.prev=12,n.t0=n["catch"](0),n.t0=this._platform.client().makeError(n.t0),this.reset().emit(this.events.subscribeError,n.t0),n.t0;case 17:case"end":return n.stop()}},n,this,[[0,12]])}));return t}(),e.prototype.renew=function(){function t(){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function n(){var t,e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,this._clearTimeout(),this.subscribed()){n.next=4;break}throw new Error("No subscription");case 4:if(this.eventFilters().length){n.next=6;break}throw new Error("Events are undefined");case 6:return n.next=8,this._platform.put("/subscription/"+this.subscription().id,{eventFilters:this._getFullEventFilters()});case 8:return t=n.sent,e=t.json(),this.setSubscription(e).emit(this.events.renewSuccess,t),n.abrupt("return",t);case 14:throw n.prev=14,n.t0=n["catch"](0),n.t0=this._platform.client().makeError(n.t0),this.reset().emit(this.events.renewError,n.t0),n.t0;case 19:case"end":return n.stop()}},n,this,[[0,14]])}));return t}(),e.prototype.remove=function(){function t(){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.subscribed()){e.next=3;break}throw new Error("No subscription");case 3:return e.next=5,this._platform["delete"]("/subscription/"+this.subscription().id);case 5:return t=e.sent,this.reset().emit(this.events.removeSuccess,t),e.abrupt("return",t);case 10:throw e.prev=10,e.t0=e["catch"](0),e.t0=this._platform.client().makeError(e.t0),this.emit(this.events.removeError,e.t0),e.t0;case 15:case"end":return e.stop()}},n,this,[[0,10]])}));return t}(),e.prototype.resubscribe=function(){var t=this.eventFilters();return this.reset().setEventFilters(t).subscribe()},e.prototype.reset=function(){return this._clearTimeout(),this.subscribed()&&this._pubnub&&this._pubnub.unsubscribe({channel:this.subscription().deliveryMode.address}),this._setSubscription(null),this},e.prototype._setSubscription=function(t){this._subscription=t},e.prototype._getFullEventFilters=function(){var t=this;return this.eventFilters().map(function(e){return t._platform.createUrl(e)})},e.prototype._setTimeout=function(){var t=this;if(this._clearTimeout(),!this.alive())throw new Error("Subscription is not alive");return this._timeout=setInterval(function(){t.alive()||(t.expired()?t.subscribe():t.renew())},e._pollInterval),this},e.prototype._clearTimeout=function(){return clearInterval(this._timeout),this},e.prototype._decrypt=function(t){if(!this.subscribed())throw new Error("No subscription");return this.subscription().deliveryMode.encryptionKey&&(t=this._pubnubFactory.crypto_obj.decrypt(t,this.subscription().deliveryMode.encryptionKey,{encryptKey:!1,keyEncoding:"base64",keyLength:128,mode:"ecb"})),t},e.prototype._notify=function(t){return this.emit(this.events.notification,this._decrypt(t)),this},e.prototype._subscribeAtPubnub=function(){if(!this.alive())throw new Error("Subscription is not alive");var t=this.subscription().deliveryMode;if(this._pubnub){if(this._pubnubLastChannel==t.address)return this;this._pubnubLastChannel&&this._pubnub.unsubscribe({channel:this._pubnubLastChannel}),this._pubnub=this._pubnub.init({ssl:!0,subscribe_key:t.subscriberKey})}else this._pubnub=this._pubnubFactory.init({ssl:!0,subscribe_key:t.subscriberKey}),this._pubnub.ready();return this._pubnubLastChannel=t.address,this._pubnub.subscribe({channel:t.address,message:this._notify.bind(this),connect:function(){}}),this},e}(c["default"]);h._renewHandicapMs=12e4,h._pollInterval=1e4,e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(23),a=r(u),c=function(t){function e(n,r,s,u){o(this,e);var a=i(this,t.call(this,n,r));return a._cache=s,a._cacheKey=u,a}return s(e,t),e.prototype.subscription=function(){return this._cache.getItem(this._cacheKey)||{}},e.prototype._setSubscription=function(t){return this._cache.setItem(this._cacheKey,t)},e.prototype.restore=function(t){return this.eventFilters().length||this.setEventFilters(t),this},e}(a["default"]);e["default"]=c}])})}).call(e,n(2),n(60).Buffer)},function(t,e,n){(function(t,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function o(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function i(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,n){if(i()<n)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n),e.__proto__=t.prototype):(null===e&&(e=new t(n)),e.length=n),e}function t(e,n,r){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,n,r);if("number"==typeof e){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,n,r)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?l(t,e,n,r):"string"==typeof e?f(t,e,n):d(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e,n,r){return a(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}function h(e,n){if(a(n),e=s(e,n<0?0:0|y(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)e[r]=0;return e}function f(e,n,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=0|g(n,r);e=s(e,o);var i=e.write(n,r);return i!==o&&(e=e.slice(0,i)),e}function p(t,e){var n=e.length<0?0:0|y(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function l(e,n,r,o){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(o||0))throw new RangeError("'length' is out of bounds");return n=void 0===r&&void 0===o?new Uint8Array(n):void 0===o?new Uint8Array(n,r):new Uint8Array(n,r,o),t.TYPED_ARRAY_SUPPORT?(e=n,e.__proto__=t.prototype):e=p(e,n),e}function d(e,n){if(t.isBuffer(n)){var r=0|y(n.length);return e=s(e,r),0===e.length?e:(n.copy(e,0,0,r),e)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||X(n.length)?s(e,0):p(e,n);if("Buffer"===n.type&&Q(n.data))return p(e,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function v(e){return+e!=e&&(e=0),t.alloc(+e)}function g(e,n){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(e).length;default:if(o)return G(e).length;n=(""+n).toLowerCase(),o=!0}}function b(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(e,n,r,o,i){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof n&&(n=t.from(n,o)),t.isBuffer(n))return 0===n.length?-1:w(e,n,r,o,i);if("number"==typeof n)return n=255&n,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):w(e,[n],r,o,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,o){function i(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,u=t.length,a=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,n/=2}var c;if(o){var h=-1;for(c=n;c<u;c++)if(i(t,c)===i(e,h===-1?0:c-h)){if(h===-1&&(h=c),c-h+1===a)return h*s}else h!==-1&&(c-=c-h),h=-1}else for(n+a>u&&(n=u-a),c=n;c>=0;c--){for(var f=!0,p=0;p<a;p++)if(i(t,c+p)!==i(e,p)){f=!1;break}if(f)return c}return-1}function x(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))return s;t[n+s]=u}return s}function E(t,e,n,r){return W(G(e,t.length-n),t,n,r)}function O(t,e,n,r){return W(Y(e),t,n,r)}function S(t,e,n,r){return O(t,e,n,r)}function k(t,e,n,r){return W(J(e),t,n,r)}function j(t,e,n,r){return W(V(e,t.length-n),t,n,r)}function P(t,e,n){return 0===e&&n===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i=t[o],s=null,u=i>239?4:i>223?3:i>191?2:1;if(o+u<=n){var a,c,h,f;switch(u){case 1:i<128&&(s=i);break;case 2:a=t[o+1],128===(192&a)&&(f=(31&i)<<6|63&a,f>127&&(s=f));break;case 3:a=t[o+1],c=t[o+2],128===(192&a)&&128===(192&c)&&(f=(15&i)<<12|(63&a)<<6|63&c,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:a=t[o+1],c=t[o+2],h=t[o+3],128===(192&a)&&128===(192&c)&&128===(192&h)&&(f=(15&i)<<18|(63&a)<<12|(63&c)<<6|63&h,f>65535&&f<1114112&&(s=f))}}null===s?(s=65533,u=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=u}return R(r)}function R(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=tt));return n}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=K(t[i]);return o}function B(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function L(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,n,r,o,i,s){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||n<s)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function U(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function q(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function I(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,o){return o||I(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||I(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,r,52,8),n+8}function z(t){if(t=H(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function H(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function K(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Y(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function V(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function J(t){return $.toByteArray(z(t))}function W(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function X(t){return t!==t}var $=n(61),Z=n(62),Q=n(63);e.Buffer=t,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),e.kMaxLength=i(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,n){return u(null,t,e,n)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,n){return c(null,t,e,n)},t.allocUnsafe=function(t){return h(null,t)},t.allocUnsafeSlow=function(t){return h(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,o=n.length,i=0,s=Math.min(r,o);i<s;++i)if(e[i]!==n[i]){r=e[i],o=n[i];break}return r<o?-1:o<r?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var o=t.allocUnsafe(n),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!t.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,i),i+=s.length}return o},t.byteLength=g,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):b.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,n,r,o,i){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),n<0||r>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&n>=r)return 0;if(o>=i)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,o>>>=0,i>>>=0,this===e)return 0;for(var s=i-o,u=r-n,a=Math.min(s,u),c=this.slice(o,i),h=e.slice(n,r),f=0;f<a;++f)if(c[f]!==h[f]){s=c[f],u=h[f];break}return s<u?-1:u<s?1:0},t.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},t.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},t.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return O(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e);var o;if(t.TYPED_ARRAY_SUPPORT)o=this.subarray(e,n),o.__proto__=t.prototype;else{var i=n-e;o=new t(i,(void 0));for(var s=0;s<i;++s)o[s]=this[s+e]}return o},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||L(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||L(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},t.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||L(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||L(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},t.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),Z.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),Z.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),Z.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),Z.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e=0|e,n=0|n,!r){var o=Math.pow(2,8*n)-1;N(this,t,e,n,o,0)}var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e=0|e,n=0|n,!r){var o=Math.pow(2,8*n)-1;N(this,t,e,n,o,0)}var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):U(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):U(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):q(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):q(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);N(this,t,e,n,o-1,-o)}var i=0,s=1,u=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/s>>0)-u&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);N(this,t,e,n,o-1,-o)}var i=n-1,s=1,u=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/s>>0)-u&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):U(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):U(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):q(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n=0|n,r||N(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):q(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var i,s=o-r;if(this===e&&r<n&&n<o)for(i=s-1;i>=0;--i)e[i+n]=this[i+r];else if(s<1e3||!t.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+n]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),n);return s},t.prototype.fill=function(e,n,r,o){if("string"==typeof e){if("string"==typeof n?(o=n,n=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!t.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e=255&e);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=n;s<r;++s)this[s]=e;else{var u=t.isBuffer(e)?e:G(new t(e,o).toString()),a=u.length;for(s=0;s<r-n;++s)this[s+n]=u[s%a]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,n(60).Buffer,function(){return this}())},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-n(t)}function o(t){var e,r,o,i,s,u,a=t.length;s=n(t),u=new h(3*a/4-s),o=s>0?a-4:a;var f=0;for(e=0,r=0;e<o;e+=4,r+=3)i=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],u[f++]=i>>16&255,u[f++]=i>>8&255,u[f++]=255&i;return 2===s?(i=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,u[f++]=255&i):1===s&&(i=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,u[f++]=i>>8&255,u[f++]=255&i),u}function i(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function s(t,e,n){for(var r,o=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(i(r));return o.join("")}function u(t){for(var e,n=t.length,r=n%3,o="",i=[],u=16383,c=0,h=n-r;c<h;c+=u)i.push(s(t,c,c+u>h?h:c+u));return 1===r?(e=t[n-1],o+=a[e>>2],o+=a[e<<4&63],o+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],o+=a[e>>10],o+=a[e>>4&63],o+=a[e<<2&63],o+="="),i.push(o),i.join("")}e.byteLength=r,e.toByteArray=o,e.fromByteArray=u;for(var a=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,l=f.length;p<l;++p)a[p]=f[p],c[f.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,s,u=8*o-r-1,a=(1<<u)-1,c=a>>1,h=-7,f=n?o-1:0,p=n?-1:1,l=t[e+f];for(f+=p,i=l&(1<<-h)-1,l>>=-h,h+=u;h>0;i=256*i+t[e+f],f+=p,h-=8);for(s=i&(1<<-h)-1,i>>=-h,h+=r;h>0;s=256*s+t[e+f],f+=p,h-=8);if(0===i)i=1-c;else{if(i===a)return s?NaN:(l?-1:1)*(1/0);s+=Math.pow(2,r),i-=c}return(l?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,u,a,c=8*i-o-1,h=(1<<c)-1,f=h>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:i-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),e+=s+f>=1?p/a:p*Math.pow(2,1-f),e*a>=2&&(s++,a/=2),s+f>=h?(u=0,s=h):s+f>=1?(u=(e*a-1)*Math.pow(2,o),s+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;t[n+l]=255&u,l+=d,u/=256,o-=8);for(s=s<<o|u,c+=o;c>0;t[n+l]=255&s,l+=d,s/=256,c-=8);t[n+l-d]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r;!function(){"use strict";function o(t){var e=t&&t.Promise||self.Promise,n=t&&t.XMLHttpRequest||self.XMLHttpRequest,r=self;return function(){var t=Object.create(r,{fetch:{value:void 0,writable:!0}});return function(t){function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return g.iterable&&(e[Symbol.iterator]=function(){return e}),e}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){return t.bodyUsed?e.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new e(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function c(t){var e=new FileReader;return e.readAsArrayBuffer(t),a(e)}function h(t){var e=new FileReader;return e.readAsText(t),a(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(g.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(g.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob?(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return e.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return e.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return e.resolve(this._bodyText)}):this.text=function(){var t=u(this);return t?t:e.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t){var e=t.toUpperCase();return b.indexOf(e)>-1?e:t}function l(t,e){e=e||{};var n=e.body;if(l.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=p(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function y(t){var e=new s,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();e.append(r,o)}),e}function v(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var g={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};s.prototype.append=function(t,e){t=r(t),e=o(e);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(e)},s.prototype["delete"]=function(t){delete this.map[r(t)]},s.prototype.get=function(t){var e=this.map[r(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[r(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=[o(e)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)},s.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),i(t)},s.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},s.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),i(t)},g.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this)},f.call(l.prototype),f.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];v.redirect=function(t,e){if(m.indexOf(e)===-1)throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=s,t.Request=l,t.Response=v,t.fetch=function(t,r){return new e(function(e,o){function i(){return"responseURL"in u?u.responseURL:/^X-Request-URL:/m.test(u.getAllResponseHeaders())?u.getResponseHeader("X-Request-URL"):void 0}var s;s=l.prototype.isPrototypeOf(t)&&!r?t:new l(t,r);var u=new n;u.onload=function(){var t={status:u.status,statusText:u.statusText,headers:y(u),url:i()},n="response"in u?u.response:u.responseText;e(new v(n,t))},u.onerror=function(){o(new TypeError("Network request failed"))},u.ontimeout=function(){o(new TypeError("Network request failed"))},u.open(s.method,s.url,!0),"include"===s.credentials&&(u.withCredentials=!0),"responseType"in u&&g.blob&&(u.responseType="blob"),s.headers.forEach(function(t,e){u.setRequestHeader(e,t)}),u.send("undefined"==typeof s._bodyInit?null:s._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof t?t:this),{fetch:t.fetch,Headers:t.Headers,Request:t.Request,Response:t.Response}}()}r=function(){return o}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}()},function(t,e,n){/*! 3.16.3 / modern */
!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function r(t){var e,n,r=0,o=0,i=!0,s=t.timeout||l.DEF_TIMEOUT,u=t.data||{},a=t.fail||function(){},c=t.success||function(){},h=function(t,o){r||(r=1,clearTimeout(n),e&&(e.onerror=e.onload=null,e.abort&&e.abort(),e=null),t&&a(o))},f=function(){if(!o){var t;o=1,clearTimeout(n);try{t=JSON.parse(e.responseText)}catch(r){return h(1)}c(t)}};n=l.timeout(function(){h(1)},s);try{e="undefined"!=typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest,e.onerror=e.onabort=function(){h(1,e.responseText||{error:"Network Connection Error"})},e.onload=e.onloadend=f;var p=l.build_url(t.url,u);e.open("GET",p,i),i&&(e.timeout=s),e.send()}catch(d){h(1,{error:"XHR Failed",stacktrace:d})}return h}function o(t,e,n){l.each(t.split(","),function(t){var r=function(t){t||(t=window.event),n(t)||(t.cancelBubble=!0,t.returnValue=!1,t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation())};e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r})}function i(t){console.error(t)}function s(t,e,n){return n?void t.setAttribute(e,n):t&&t.getAttribute&&t.getAttribute(e)}function u(t){return document.getElementById(t)}function a(t,e){var n=[];return l.each(t.split(/\s+/),function(t){l.each((e||document).getElementsByTagName(t),function(t){n.push(t)})}),n}function c(t,e){for(var n in e)if(e.hasOwnProperty(n))try{t.style[n]=e[n]+("|width|height|top|left|".indexOf(n)>0&&"number"==typeof e[n]?"px":"")}catch(r){return}}function h(t){return document.createElement(t)}function f(t,e){var n=y.HmacSHA256(t,e);return n.toString(y.enc.Base64)}function p(t){t.db=g,t.xdr=r,t.error=t.error||i,t.hmac_SHA256=f,t.crypto_obj=d(),t.WS=v,t.sdk_family="Modern";var e=function(t){return p(t)},n=l.PN_API(t);for(var y in n)n.hasOwnProperty(y)&&(e[y]=n[y]);return e.init=e,e.$=u,e.attr=s,e.search=a,e.bind=o,e.css=c,e.create=h,e.crypto_obj=d(),e.WS=v,e.PNmessage=l.PNmessage,e.supplant=l.supplant,"undefined"!=typeof window&&o("beforeunload",window,function(){return e["each-channel"](function(t){e.LEAVE(t.name,1)}),!0}),e.ready(),t.notest?e:("undefined"!=typeof window&&o("offline",window,e.offline),"undefined"!=typeof document&&o("offline",document,e.offline),e)}var l=n(1),d=n(5),y=n(6),v=n(7),g=function(){var t;try{t="undefined"!=typeof localStorage&&localStorage}catch(e){t={_data:{},setItem:function(t,e){this._data[t]=String(e)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:void 0},removeItem:function(t){return delete this._data[t]},clear:function(){this._data={}}}}return{get:function(e){try{return t?t.getItem(e):document.cookie.indexOf(e)===-1?null:((document.cookie||"").match(RegExp(e+"=([^;]+)"))||[])[1]||null}catch(n){return}},set:function(e,n){try{if(t)return t.setItem(e,n)&&0;document.cookie=e+"="+n+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(r){return}}}}(),b={list:{},unbind:function(t){b.list[t]=[]},bind:function(t,e){(b.list[t]=b.list[t]||[]).push(e)},fire:function(t,e){l.each(b.list[t]||[],function(t){t(e)})}};p.init=p,p.secure=p,p.crypto_obj=d(),p.WS=v,p.db=g,p.PNmessage=l.PNmessage,p.uuid=l.uuid,p.css=c,p.$=u,p.create=u,p.bind=o,p.search=a,p.attr=s,p.events=b,p.map=l.map,p.each=l.each,p.grep=l.grep,p.supplant=l.supplant,p.now=l.now,p.unique=l.unique,p.updater=l.updater,t.exports=p},function(t,e,n){function r(){return"x"+ ++p+ +new Date}function o(t,e){var n=[];return f.each(t,function(t,r){e?t.search("-pnpres")<0&&r.subscribed&&n.push(t):r.subscribed&&n.push(t)}),n.sort()}function i(t,e){var n=[];return f.each(t,function(t,r){e?t.search("-pnpres")<0&&r.subscribed&&n.push(t):r.subscribed&&n.push(t)}),n.sort()}function s(){l||(l=1,f.each(d,function(t){t()}))}function u(t){var e=t||{apns:{}};return e.getPubnubMessage=function(){var t={};if(Object.keys(e.apns).length){t.pn_apns={aps:{alert:e.apns.alert,badge:e.apns.badge,sound:e.apns.sound}};for(var n in e.apns)t.pn_apns[n]=e.apns[n];var r=["badge","alert","sound"];for(var n in r)delete t.pn_apns[r[n]]}e.gcm&&(t.pn_gcm={data:e.gcm});for(var n in e)t[n]=e[n];var o=["apns","gcm","publish","channel","callback","error"];for(var n in o)delete t[o[n]];return t},e.publish=function(){var t=e.getPubnubMessage();e.pubnub&&e.channel&&e.pubnub.publish({message:t,channel:e.channel,callback:e.callback,error:e.error})},e}function a(t){function e(){var t="PubNub-JS-"+Rt;return Tt&&(t+="-"+Tt),t+="/"+E}function n(t){return t||(t={}),f.each(wt,function(e,n){e in t||(t[e]=n)}),t.pnsdk=e(),t}function u(t){var e=[];return f.each(t,function(t,n){e.push(t)}),e}function a(t){return u(t).sort()}function c(t){var e="",n=a(t);for(var r in n){var o=n[r];e+=o+"="+f.pamEncode(t[o]),r!=n.length-1&&(e+="&")}return e}function h(t,e,n){var r=!1;if("undefined"==typeof t)return e;if("number"==typeof t)r=!(t>w||0==t);else{if("boolean"==typeof t)return t?x:0;r=!0}return r?(n&&n("Presence Heartbeat value invalid. Valid range ( x > "+w+" or x = 0). Current Value : "+(e||w)),e||w):t}function p(t,e){return Lt.encrypt(t,e||kt)||t}function g(t,e){return Lt.decrypt(t,e||kt)||Lt.decrypt(t,kt)||t}function S(){return clearTimeout(dt),!vt||vt>=500||vt<1||!o(ft,!0).length&&!i(pt,!0).length?void(gt=!1):(gt=!0,void Nt.presence_heartbeat({callback:function(t){dt=f.timeout(S,vt*_)},error:function(t){xt&&xt("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(t)),dt=f.timeout(S,vt*_)}}))}function k(){!gt&&S()}function j(t){if(bt){if(!nt.length)return}else{if(t&&(nt.sending=0),nt.sending||!nt.length)return;nt.sending=1}M(nt.shift())}function P(t){var e=0;return f.each(i(pt),function(n){var r=pt[n];r&&(e++,(t||function(){})(r))}),e}function T(t){var e=0;return f.each(o(ft),function(n){var r=ft[n];r&&(e++,(t||function(){})(r))}),e}function R(t,e,n){if("object"==typeof t){if(t.error){var r={};return t.message&&(r.message=t.message),t.payload&&(r.payload=t.payload),void(n&&n(r))}if(t.payload)return void(t.next_page?e&&e(t.payload,t.next_page):e&&e(t.payload))}e&&e(t)}function A(t,e){if("object"==typeof t&&t.error){var n={};return t.message&&(n.message=t.message),t.payload&&(n.payload=t.payload),void(e&&e(n))}e&&e(t)}function M(t){var e=t.operation,n=Math.floor((new Date).getTime()/1e3),r=t.data||{};if(W){r.auth||delete r.auth,r.timestamp=n;var o=V+"\n"+Y+"\n";if("PNAccessManagerGrant"===e)o+="grant\n";else if("PNAccessManagerAudit"===e)o+="audit\n";else{var i=t.url.slice();i.shift(),o+="/"+i.join("/")+"\n"}o+=c(r);var s=X(o,W);s=s.replace(/\+/g,"-"),s=s.replace(/\//g,"_"),r.signature=s,t.data=r}return _t(t)}function C(t,e,r,o){var e=t.callback||e,i=t.error||xt,s=Ot();o=o||{},o.auth||(o.auth=t.auth_key||J);var u=[Q,"v1","channel-registration","sub-key",V];u.push.apply(u,r),s&&(o.callback=s),M({callback:s,data:n(o),success:function(t){R(t,e,i)},fail:function(t){A(t,i)},url:u})}function B(){Et()||N(1,{error:"Offline. Please check your network settings."}),I&&clearTimeout(I),I=f.timeout(B,_)}function L(){K&&Nt.time(function(t){q(function(){},t),t||N(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),D&&clearTimeout(D),D=f.timeout(L,H)})}function N(t,e){ut&&ut(t,e),ut=null,clearTimeout(I),clearTimeout(D)}function U(t){var e=f.rnow()-ot;return e-t/1e4}function q(t,e){function n(e){if(e){var n=e/1e4,o=(f.rnow()-r)/2;ot=f.rnow()-(n+o),t&&t(ot)}}var r=f.rnow();e&&n(e)||Nt.time(n)}var I,D,F=+t.windowing||v,z=(+t.timeout||b)*_,H=(+t.keepalive||m)*_,K=t.timecheck||0,G=t.noleave||0,Y=t.publish_key,V=t.subscribe_key,J=t.auth_key||"",W=t.secret_key||"",X=t.hmac_SHA256,$=t.ssl?"s":"",Z="http"+$+"://"+(t.origin||"pubsub.pubnub.com"),Q=O(Z),tt=O(Z),et=function(){},nt=[],rt=!0,ot=0,it=0,st=0,ut=0,at=t.restore||0,ct=0,ht=!1,ft={},pt={},lt={},dt=null,yt=h(t.heartbeat||t.pnexpires||0,t.error),vt=t.heartbeat_interval||yt/2-1,gt=!1,bt=t.no_wait_for_pending,mt=t["compatible_3.5"]||!1,_t=t.xdr,wt=t.params||{},xt=t.error||function(){},Et=t._is_online||function(){return 1},Ot=t.jsonp_cb||function(){return 0},St=t.db||{get:function(){},set:function(){}},kt=t.cipher_key,jt=t.uuid||!t.unique_uuid&&St&&St.get(V+"uuid")||"",Pt=t.instance_id||!1,Tt=t.partner_id,Rt=t.sdk_family,At="",Mt=t.shutdown,Ct="undefined"==typeof t.use_send_beacon||t.use_send_beacon,Bt=Ct?t.sendBeacon:null;2===yt&&(vt=1);var Lt=t.crypto_obj||{encrypt:function(t,e){return t},decrypt:function(t,e){return t}},Nt={LEAVE:function(t,e,r,o,i){var s,u,a={uuid:jt,auth:r||J},c=O(Z),o=o||function(){},h=i||function(){},p=Ot();if(t.indexOf(y)>0)return!0;if(mt){if(!$)return!1;if("0"==p)return!1}if(G)return!1;if("0"!=p&&(a.callback=p),Pt&&(a.instanceid=At),s=[c,"v2","presence","sub_key",V,"channel",f.encode(t),"leave"],u=n(a),Bt){var l=f.buildURL(s,u);if(Bt(l))return o&&o({status:200,action:"leave",message:"OK",service:"Presence"}),!0}return M({blocking:e||$,callback:p,data:u,success:function(t){R(t,o,h)},fail:function(t){A(t,h)},url:s}),!0},LEAVE_GROUP:function(t,e,r,o,i){var s,u,a={uuid:jt,auth:r||J},c=O(Z),o=o||function(){},h=i||function(){},p=Ot();if(t.indexOf(y)>0)return!0;if(mt){if(!$)return!1;if("0"==p)return!1}if(G)return!1;if("0"!=p&&(a.callback=p),t&&t.length>0&&(a["channel-group"]=t),Pt&&(a.instanceid=At),s=[c,"v2","presence","sub_key",V,"channel",f.encode(","),"leave"],u=n(a),Bt){var l=f.buildURL(s,u);if(Bt(l))return o&&o({status:200,action:"leave",message:"OK",service:"Presence"}),!0}return M({blocking:e||$,callback:p,data:u,success:function(t){R(t,o,h)},fail:function(t){A(t,h)},url:s}),!0},set_resumed:function(t){ht=t},get_cipher_key:function(){return kt},set_cipher_key:function(t){kt=t},raw_encrypt:function(t,e){return p(t,e)},raw_decrypt:function(t,e){return g(t,e)},get_heartbeat:function(){return yt},set_heartbeat:function(t,e){yt=h(t,yt,xt),vt=e||yt/2-1,2==yt&&(vt=1),et(),S()},get_heartbeat_interval:function(){return vt},set_heartbeat_interval:function(t){vt=t,S()},get_version:function(){return E},getGcmMessageObject:function(t){return{data:t}},getApnsMessageObject:function(t){var e={aps:{badge:1,alert:""}};for(var n in t)n[e]=t[n];return e},_add_param:function(t,e){wt[t]=e},channel_group:function(t,e){var n,r,o=t.channel_group,e=e||t.callback,i=t.channels||t.channel,s=t.cloak,u=[],a={},c=t.mode||"add";if(o){var h=o.split(":");h.length>1?(n="*"===h[0]?null:h[0],r=h[1]):r=h[0]}n&&u.push("namespace")&&u.push(f.encode(n)),u.push("channel-group"),r&&"*"!==r&&u.push(r),i?(f.isArray(i)&&(i=i.join(",")),a[c]=i,a.cloak=rt?"true":"false"):"remove"===c&&u.push("remove"),"undefined"!=typeof s&&(a.cloak=s?"true":"false"),C(t,e,u,a)},channel_group_list_groups:function(t,e){var n;n=t.namespace||t.ns||t.channel_group||null,n&&(t.channel_group=n+":*"),Nt.channel_group(t,e)},channel_group_list_channels:function(t,e){return t.channel_group?void Nt.channel_group(t,e):xt("Missing Channel Group")},channel_group_remove_channel:function(t,e){return t.channel_group?t.channel||t.channels?(t.mode="remove",void Nt.channel_group(t,e)):xt("Missing Channel"):xt("Missing Channel Group")},channel_group_remove_group:function(t,e){return t.channel_group?t.channel?xt("Use channel_group_remove_channel if you want to remove a channel from a group."):(t.mode="remove",void Nt.channel_group(t,e)):xt("Missing Channel Group")},channel_group_add_channel:function(t,e){return t.channel_group?t.channel||t.channels?void Nt.channel_group(t,e):xt("Missing Channel"):xt("Missing Channel Group")},channel_group_cloak:function(t,e){return"undefined"==typeof t.cloak?void e(rt):(rt=t.cloak,void Nt.channel_group(t,e))},channel_group_list_namespaces:function(t,e){var n=["namespace"];C(t,e,n)},channel_group_remove_namespace:function(t,e){var n=["namespace",t.namespace,"remove"];C(t,e,n)},history:function(t,e){var e=t.callback||e,r=t.count||t.limit||100,o=t.reverse||"false",i=t.error||function(){},s=t.auth_key||J,u=t.cipher_key,a=t.channel,c=t.channel_group,h=t.start,p=t.end,l=t.include_token,d=t.string_message_token||!1,y={},v=Ot();return a||c?e?V?(y.stringtoken="true",y.count=r,y.reverse=o,y.auth=s,c&&(y["channel-group"]=c,a||(a=",")),v&&(y.callback=v),h&&(y.start=h),p&&(y.end=p),l&&(y.include_token="true"),d&&(y.string_message_token="true"),void M({callback:v,data:n(y),success:function(t){if("object"==typeof t&&t.error)return void i({message:t.message,payload:t.payload});for(var n=t[0],r=[],o=0;o<n.length;o++)if(l){var s=g(n[o].message,u),a=n[o].timetoken;try{r.push({message:JSON.parse(s),timetoken:a})}catch(c){r.push({message:s,timetoken:a})}}else{var s=g(n[o],u);try{r.push(JSON.parse(s))}catch(c){r.push(s)}}e([r,t[1],t[2]])},fail:function(t){A(t,i)},url:[Q,"v2","history","sub-key",V,"channel",f.encode(a)]})):xt("Missing Subscribe Key"):xt("Missing Callback"):xt("Missing Channel")},replay:function(t,e){var r,e=e||t.callback||function(){},o=t.auth_key||J,i=t.source,s=t.destination,u=t.error||t.error||function(){},a=t.stop,c=t.start,h=t.end,f=t.reverse,p=t.limit,l=Ot(),d={};return i?s?Y?V?("0"!=l&&(d.callback=l),a&&(d.stop="all"),f&&(d.reverse="true"),c&&(d.start=c),h&&(d.end=h),p&&(d.count=p),d.auth=o,r=[Q,"v1","replay",Y,V,i,s],void M({callback:l,success:function(t){R(t,e,u)},fail:function(){e([0,"Disconnected"])},url:r,data:n(d)})):xt("Missing Subscribe Key"):xt("Missing Publish Key"):xt("Missing Destination Channel"):xt("Missing Source Channel")},auth:function(t){J=t,et()},time:function(t){var e=Ot(),r={uuid:jt,auth:J};Pt&&(r.instanceid=At),M({callback:e,data:n(r),url:[Q,"time",e],success:function(e){t(e[0])},fail:function(){t(0)}})},publish:function(t,e){var r=t.message;if(!r)return xt("Missing Message");var o,i,e=e||t.callback||r.callback||t.success||function(){},s=t.channel||r.channel,u=t.meta||t.metadata,a=t.auth_key||J,c=t.cipher_key,h=t.error||r.error||function(){},l=t.post||!1,d=!("store_in_history"in t)||t.store_in_history,y=!("replicate"in t)||t.replicate,v=Ot(),g="push";return t.prepend&&(g="unshift"),s?Y?V?(r.getPubnubMessage&&(r=r.getPubnubMessage()),r=JSON.stringify(p(r,c)),i=[Q,"publish",Y,V,0,f.encode(s),v,f.encode(r)],o={uuid:jt,auth:a},u&&"object"==typeof u&&(o.meta=JSON.stringify(u)),d||(o.store="0"),y||(o.norep="true"),Pt&&(o.instanceid=At),nt[g]({callback:v,url:i,data:n(o),fail:function(t){A(t,h),j(1)},success:function(t){R(t,e,h),j(1)},mode:l?"POST":"GET"}),void j()):xt("Missing Subscribe Key"):xt("Missing Publish Key"):xt("Missing Channel")},fire:function(t,e){t.store_in_history=!1,t.replicate=!1,Nt.publish(t,e)},unsubscribe:function(t,e){var n=t.channel,r=t.channel_group,o=t.auth_key||J,e=e||t.callback||function(){},i=t.error||function(){};if(!n&&!r)return xt("Missing Channel or Channel Group");if(!V)return xt("Missing Subscribe Key");if(n){var s=f.isArray(n)?n:(""+n).split(","),u=[],a=[];if(f.each(s,function(t){ft[t]&&u.push(t)}),0==u.length)return void e({action:"leave"});f.each(u,function(t){a.push(t+y)}),f.each(u.concat(a),function(t){t in ft&&delete ft[t],t in lt&&delete lt[t]}),0===ft.length&&0===pt.length&&(ct=0);var c=!0;l&&(c=Nt.LEAVE(u.join(","),0,o,e,i)),c||e({action:"leave"})}if(r){var h=f.isArray(r)?r:(""+r).split(","),p=[],d=[];if(f.each(h,function(t){pt[t]&&p.push(t)}),0==p.length)return void e({action:"leave"});f.each(p,function(t){d.push(t+y)}),f.each(p.concat(d),function(t){t in pt&&delete pt[t],t in lt&&delete lt[t]}),0===ft.length&&0===pt.length&&(ct=0);var c=!0;l&&(c=Nt.LEAVE_GROUP(p.join(","),0,o,e,i)),c||e({action:"leave"})}et()},subscribe:function(t,e){function r(t){t?f.timeout(et,j):(Q=O(Z,1),tt=O(Z,1),f.timeout(function(){Nt.time(r)},_)),T(function(e){return t&&e.disconnected?(e.disconnected=0,e.reconnect(e.name)):void(t||e.disconnected||(e.disconnected=1,e.disconnect(e.name)))}),P(function(e){return t&&e.disconnected?(e.disconnected=0,e.reconnect(e.name)):void(t||e.disconnected||(e.disconnected=1,e.disconnect(e.name)))})}function s(){var t=Ot(),e=o(ft).join(","),u=i(pt).join(",");if(e||u){e||(e=","),N();var a=n({uuid:jt,auth:J});u&&(a["channel-group"]=u);var c=JSON.stringify(lt);c.length>2&&(a.state=JSON.stringify(lt)),yt&&(a.heartbeat=yt),Pt&&(a.instanceid=At),k(),ut=M({timeout:S,callback:t,fail:function(t){t&&t.error&&t.service?(A(t,v),r(!1)):Nt.time(function(e){!e&&A(t,v),r(e)})},data:n(a),url:[tt,"subscribe",V,f.encode(e),t,ct],success:function(t){if(!t||"object"==typeof t&&"error"in t&&t.error)return v(t),f.timeout(et,_);if(b(t[1]),ct=!ct&&at&&St.get(V)||t[1],T(function(t){t.connected||(t.connected=1,t.connect(t.name))}),P(function(t){t.connected||(t.connected=1,t.connect(t.name))}),ht&&!at)return ct=0,ht=!1,St.set(V,0),void f.timeout(s,j);x&&(ct=1e4,x=0),St.set(V,t[1]);var e=function(){var e="",n="";t.length>3?(e=t[3],n=t[2]):e=t.length>2?t[2]:f.map(o(ft),function(e){return f.map(Array(t[0].length).join(",").split(","),function(){return e})}).join(",");var r=e.split(","),i=n?n.split(","):[];return function(){var t=r.shift()||st,e=i.shift(),n={},o={callback:function(){}};e?(t&&t.indexOf("-pnpres")>=0&&e.indexOf("-pnpres")<0&&(e+="-pnpres"),n=pt[e]||ft[e]||o):n=ft[t]||o;var s=[n.callback||it,t.split(y)[0]];return e&&s.push(e.split(y)[0]),s}}(),n=U(+t[1]);f.each(t[0],function(r){var o=e(),i=g(r,ft[o[1]]?ft[o[1]].cipher_key:null);o[0]&&o[0](i,t,o[2]||o[1],n,o[1])}),f.timeout(s,j)}})}}var u=t.channel,a=t.channel_group,e=e||t.callback,e=e||t.message,c=t.connect||function(){},h=t.reconnect||function(){},p=t.disconnect||function(){},v=t.error||v||function(){},b=t.idle||function(){},m=t.presence||0,w=t.noheresync||0,x=t.backfill||0,E=t.timetoken||0,S=t.timeout||z,j=t.windowing||F,R=t.state,C=t.heartbeat||t.pnexpires,B=t.heartbeat_interval,L=t.restore||at;return J=t.auth_key||J,at=L,ct=E,u||a?e?V?((C||0===C||B||0===B)&&Nt.set_heartbeat(C,B),u&&f.each((u.join?u.join(","):""+u).split(","),function(r){var o=ft[r]||{};ft[st=r]={name:r,connected:o.connected,disconnected:o.disconnected,subscribed:1,callback:it=e,cipher_key:t.cipher_key,connect:c,disconnect:p,reconnect:h},R&&(r in R?lt[r]=R[r]:lt[r]=R),m&&(Nt.subscribe({channel:r+y,callback:m,restore:L}),o.subscribed||w||Nt.here_now({channel:r,data:n({uuid:jt,auth:J}),callback:function(t){f.each("uuids"in t?t.uuids:[],function(e){m({action:"join",uuid:e,timestamp:Math.floor(f.rnow()/1e3),occupancy:t.occupancy||1},t,r)})}}))}),a&&f.each((a.join?a.join(","):""+a).split(","),function(r){var o=pt[r]||{};pt[r]={name:r,connected:o.connected,disconnected:o.disconnected,subscribed:1,callback:it=e,cipher_key:t.cipher_key,connect:c,disconnect:p,reconnect:h},m&&(Nt.subscribe({channel_group:r+y,callback:m,restore:L,auth_key:J}),o.subscribed||w||Nt.here_now({channel_group:r,data:n({uuid:jt,auth:J}),callback:function(t){f.each("uuids"in t?t.uuids:[],function(e){m({action:"join",uuid:e,timestamp:Math.floor(f.rnow()/1e3),occupancy:t.occupancy||1},t,r)})}}))}),et=function(){N(),f.timeout(s,j)},l?void et():d.push(et)):xt("Missing Subscribe Key"):xt("Missing Callback"):xt("Missing Channel")},here_now:function(t,e){var e=t.callback||e,r=t.debug,o=t.error||function(){},i=t.auth_key||J,s=t.channel,u=t.channel_group,a=Ot(),c=!("uuids"in t)||t.uuids,h=t.state,p={uuid:jt,auth:i};if(c||(p.disable_uuids=1),h&&(p.state=1),!e)return xt("Missing Callback");if(!V)return xt("Missing Subscribe Key");var l=[Q,"v2","presence","sub_key",V];s&&l.push("channel")&&l.push(f.encode(s)),"0"!=a&&(p.callback=a),u&&(p["channel-group"]=u,!s&&l.push("channel")&&l.push(",")),Pt&&(p.instanceid=At),M({callback:a,data:n(p),success:function(t){R(t,e,o)},fail:function(t){A(t,o)},debug:r,url:l})},where_now:function(t,e){var e=t.callback||e,r=t.error||function(){},o=t.auth_key||J,i=Ot(),s=t.uuid||jt,u={auth:o};return e?V?("0"!=i&&(u.callback=i),Pt&&(u.instanceid=At),void M({callback:i,data:n(u),success:function(t){R(t,e,r)},fail:function(t){A(t,r)},url:[Q,"v2","presence","sub_key",V,"uuid",f.encode(s)]})):xt("Missing Subscribe Key"):xt("Missing Callback")},state:function(t,e){var r,e=t.callback||e||function(t){},o=t.error||function(){},i=t.auth_key||J,s=Ot(),u=t.state,a=t.uuid||jt,c=t.channel,h=t.channel_group,p=n({auth:i});return V?a?c||h?("0"!=s&&(p.callback=s),"undefined"!=typeof c&&ft[c]&&ft[c].subscribed&&u&&(lt[c]=u),"undefined"!=typeof h&&pt[h]&&pt[h].subscribed&&(u&&(lt[h]=u),p["channel-group"]=h,c||(c=",")),p.state=JSON.stringify(u),Pt&&(p.instanceid=At),r=u?[Q,"v2","presence","sub-key",V,"channel",c,"uuid",a,"data"]:[Q,"v2","presence","sub-key",V,"channel",c,"uuid",f.encode(a)],void M({callback:s,data:n(p),success:function(t){R(t,e,o)},fail:function(t){A(t,o)},url:r})):xt("Missing Channel"):xt("Missing UUID"):xt("Missing Subscribe Key")},grant:function(t,e){var e=t.callback||e,r=t.error||function(){},o=t.channel||t.channels,i=t.channel_group,s=Ot(),u=t.ttl,a=t.read?"1":"0",c=t.write?"1":"0",h=t.manage?"1":"0",p=t.auth_key||t.auth_keys;if(!e)return xt("Missing Callback");if(!V)return xt("Missing Subscribe Key");if(!Y)return xt("Missing Publish Key");if(!W)return xt("Missing Secret Key");var l={w:c,r:a};t.manage&&(l.m=h),f.isArray(o)&&(o=o.join(",")),f.isArray(p)&&(p=p.join(",")),"undefined"!=typeof o&&null!=o&&o.length>0&&(l.channel=o),"undefined"!=typeof i&&null!=i&&i.length>0&&(l["channel-group"]=i),"0"!=s&&(l.callback=s),(u||0===u)&&(l.ttl=u),p&&(l.auth=p),l=n(l),p||delete l.auth,M({operation:"PNAccessManagerGrant",callback:s,data:l,success:function(t){R(t,e,r)},fail:function(t){A(t,r)},url:[Q,"v1","auth","grant","sub-key",V]})},mobile_gw_provision:function(t){var e,n,r=t.callback||function(){},o=t.auth_key||J,i=t.error||function(){},s=Ot(),u=t.channel,a=t.op,c=t.gw_type,h=t.device_id;return h?c?a?u?V?(n=[Q,"v1/push/sub-key",V,"devices",h],e={uuid:jt,auth:o,type:c},"add"==a?e.add=u:"remove"==a&&(e.remove=u),Pt&&(e.instanceid=At),void M({callback:s,data:e,success:function(t){R(t,r,i)},fail:function(t){A(t,i)},url:n})):xt("Missing Subscribe Key"):xt("Missing gw destination Channel (channel)"):xt("Missing GW Operation (op: add or remove)"):xt("Missing GW Type (gw_type: gcm or apns)"):xt("Missing Device ID (device_id)")},audit:function(t,e){var e=t.callback||e,r=t.error||function(){},o=t.channel,i=t.channel_group,s=t.auth_key,u=Ot();if(!e)return xt("Missing Callback");if(!V)return xt("Missing Subscribe Key");if(!Y)return xt("Missing Publish Key");if(!W)return xt("Missing Secret Key");var a={};"0"!=u&&(a.callback=u),"undefined"!=typeof o&&null!=o&&o.length>0&&(a.channel=o),"undefined"!=typeof i&&null!=i&&i.length>0&&(a["channel-group"]=i),s&&(a.auth=s),a=n(a),s||delete a.auth,M({operation:"PNAccessManagerAudit",callback:u,data:a,success:function(t){R(t,e,r)},fail:function(t){A(t,r)},url:[Q,"v1","auth","audit","sub-key",V]})},revoke:function(t,e){t.read=!1,t.write=!1,Nt.grant(t,e)},set_uuid:function(t){jt=t,et()},get_uuid:function(){return jt},isArray:function(t){return f.isArray(t)},get_subscribed_channels:function(){return o(ft,!0)},presence_heartbeat:function(t){var e=t.callback||function(){},r=t.error||function(){},s=Ot(),u={uuid:jt,auth:J},a=JSON.stringify(lt);a.length>2&&(u.state=JSON.stringify(lt)),yt>0&&yt<320&&(u.heartbeat=yt),"0"!=s&&(u.callback=s);var c=f.encode(o(ft,!0).join(",")),h=i(pt,!0).join(",");c||(c=","),h&&(u["channel-group"]=h),Pt&&(u.instanceid=At),M({callback:s,data:n(u),url:[Q,"v2","presence","sub-key",V,"channel",c,"heartbeat"],success:function(t){R(t,e,r)},fail:function(t){A(t,r)}})},stop_timers:function(){clearTimeout(I),clearTimeout(D),clearTimeout(dt)},shutdown:function(){Nt.stop_timers(),Mt&&Mt()},xdr:_t,ready:s,db:St,uuid:f.generateUUID,map:f.map,each:f.each,"each-channel":T,grep:f.grep,offline:function(){N(1,{message:"Offline. Please check your network settings."})},supplant:f.supplant,now:f.rnow,unique:r,updater:f.updater};return jt||(jt=Nt.uuid()),At||(At=Nt.uuid()),St.set(V+"uuid",jt),I=f.timeout(B,_),D=f.timeout(L,H),dt=f.timeout(k,(vt-3)*_),q(),Nt}var c=n(2),h=n(3),f=n(4),p=1,l=!1,d=[],y="-pnpres",v=10,g=15e3,b=310,m=60,_=1e3,w=5,x=30,E=c.version,O=function(){var t=20,e=Math.floor(Math.random()*t);return function(n,r){return n.indexOf("pubsub.")>0&&n.replace("pubsub","ps"+(r?f.generateUUID().split("-")[0]:++e<t?e:e=1))||n}}();t.exports={PN_API:a,unique:r,PNmessage:u,DEF_TIMEOUT:g,timeout:f.timeout,build_url:f.buildURL,each:f.each,uuid:f.generateUUID,URLBIT:h.URLBIT,grep:f.grep,supplant:f.supplant,now:f.rnow,updater:f.updater,map:f.map}},function(t,e){t.exports={name:"pubnub",preferGlobal:!1,version:"3.16.3",author:"PubNub <support@pubnub.com>",description:"Publish & Subscribe Real-time Messaging with PubNub",contributors:[{name:"Stephen Blum",email:"stephen@pubnub.com"}],bin:{},scripts:{test:"grunt test --force"},main:"./node.js/pubnub.js",browser:"./modern/dist/pubnub.js",repository:{type:"git",url:"git://github.com/pubnub/javascript.git"},keywords:["cloud","publish","subscribe","websockets","comet","bosh","xmpp","real-time","messaging"],dependencies:{agentkeepalive:"~0.2",lodash:"^4.1.0"},noAnalyze:!1,devDependencies:{chai:"^3.5.0",eslint:"2.4.0","eslint-config-airbnb":"^6.0.2","eslint-plugin-flowtype":"^2.1.0","eslint-plugin-mocha":"^2.0.0","eslint-plugin-react":"^4.1.0","flow-bin":"^0.22.0",grunt:"^0.4.5","grunt-contrib-clean":"^1.0.0","grunt-contrib-copy":"^0.8.2","grunt-contrib-uglify":"^0.11.1","grunt-env":"^0.4.4","grunt-eslint":"^18.0.0","grunt-flow":"^1.0.3","grunt-karma":"^0.12.1","grunt-mocha-istanbul":"^3.0.1","grunt-text-replace":"^0.4.0","grunt-webpack":"^1.0.11","imports-loader":"^0.6.5",isparta:"^4.0.0","json-loader":"^0.5.4",karma:"^0.13.21","karma-chai":"^0.1.0","karma-mocha":"^0.2.1","karma-phantomjs-launcher":"^1.0.0","karma-spec-reporter":"0.0.24","load-grunt-tasks":"^3.4.0",mocha:"^2.4.5",nock:"^1.1.0","node-uuid":"^1.4.7",nodeunit:"^0.9.0","phantomjs-prebuilt":"^2.1.4",proxyquire:"^1.7.4",sinon:"^1.17.2","uglify-js":"^2.6.1",underscore:"^1.7.0",webpack:"^1.12.13","webpack-dev-server":"^1.14.1"},bundleDependencies:[],license:"MIT",engine:{node:">=0.8"},files:["core","node.js","modern","CHANGELOG","FUTURE.md","LICENSE","README.md"]}},function(t,e){t.exports={PARAMSBIT:"&",URLBIT:"/"}},function(t,e,n){function r(){return+new Date}function o(t){return!!t&&"string"!=typeof t&&(Array.isArray&&Array.isArray(t)||"number"==typeof t.length)}function i(t,e){if(t&&e)if(o(t))for(var n=0,r=t.length;n<r;)e.call(t[n],t[n],n++);else for(var n in t)t.hasOwnProperty&&t.hasOwnProperty(n)&&e.call(t[n],n,t[n])}function s(t){return encodeURIComponent(t)}function u(t,e){var n=t.join(y.URLBIT),r=[];return e?(i(e,function(t,e){var n="object"==typeof e?JSON.stringify(e):e;"undefined"!=typeof e&&null!==e&&s(n).length>0&&r.push(t+"="+s(n))}),n+="?"+r.join(y.PARAMSBIT)):n}function a(t,e){var n,o=0,i=function(){o+e>r()?(clearTimeout(n),n=setTimeout(i,e)):(o=r(),t())};return i}function c(t,e){var n=[];return i(t||[],function(t){e(t)&&n.push(t)}),n}function h(t,e){return t.replace(v,function(t,n){return e[n]||t})}function f(t,e){if("undefined"!=typeof setTimeout)return setTimeout(t,e)}function p(t){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)});return t&&t(e),e}function l(t,e){var n=[];return i(t||[],function(t,r){n.push(e(t,r))}),n}function d(t){return encodeURIComponent(t).replace(/[!'()*~]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var y=n(3),v=/{([\w\-]+)}/g;t.exports={buildURL:u,encode:s,each:i,updater:a,rnow:r,isArray:o,map:l,pamEncode:d,generateUUID:p,timeout:f,supplant:h,grep:c}},function(t,e,n){function r(){function t(t){return o.SHA256(t).toString(o.enc.Hex)}function e(t){return t=t||{},t.hasOwnProperty("encryptKey")||(t.encryptKey=f.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=f.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=f.keyLength),t.hasOwnProperty("mode")||(t.mode=f.mode),a.indexOf(t.keyEncoding.toLowerCase())==-1&&(t.keyEncoding=f.keyEncoding),c.indexOf(parseInt(t.keyLength,10))==-1&&(t.keyLength=f.keyLength),h.indexOf(t.mode.toLowerCase())==-1&&(t.mode=f.mode),t}function n(t,e){return"base64"===e.keyEncoding?o.enc.Base64.parse(t):"hex"===e.keyEncoding?o.enc.Hex.parse(t):t}function r(e,r){return e=n(e,r),r.encryptKey?o.enc.Utf8.parse(t(e).slice(0,32)):e}function i(t){return"ecb"===t.mode?o.mode.ECB:o.mode.CBC}function s(t){return"cbc"===t.mode?o.enc.Utf8.parse(u):null}var u="0123456789012345",a=["hex","utf8","base64","binary"],c=[128,256],h=["ecb","cbc"],f={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(t,n,u){if(!n)return t;u=e(u);var a=s(u),c=i(u),h=r(n,u),f=JSON.stringify(t),p=o.AES.encrypt(f,h,{iv:a,mode:c}).ciphertext,l=p.toString(o.enc.Base64);return l||t},decrypt:function(t,n,u){if(!n)return t;u=e(u);var a=s(u),c=i(u),h=r(n,u);try{var f=o.enc.Base64.parse(t),p=o.AES.decrypt({ciphertext:f},h,{iv:a,mode:c}).toString(o.enc.Utf8),l=JSON.parse(p);return l}catch(d){return}}}}var o=n(6);t.exports=r},function(t,e){var n=n||function(t,e){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(t){o.prototype=this;var e=new o;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var o=0;o<t;o++)e[r+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((r+o)%4);else if(65535<n.length)for(o=0;o<t;o+=4)e[r+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),u=n.enc={},a=u.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var o=e[r>>>2]>>>24-8*(r%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8);return new s.init(n,e/2)}},c=u.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-8*(r%4);return new s.init(n,e)}},h=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,u=o/(4*i),u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0);if(e=u*i,o=t.min(4*e,o),e){for(var a=0;a<e;a+=i)this._doProcessBlock(r,a);a=r.splice(0,e),n.sigBytes-=o}return new s.init(a,o)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n;
}(Math);!function(t){for(var e=n,r=e.lib,o=r.WordArray,i=r.Hasher,r=e.algo,s=[],u=[],a=function(t){return 4294967296*(t-(0|t))|0},c=2,h=0;64>h;){var f;t:{f=c;for(var p=t.sqrt(f),l=2;l<=p;l++)if(!(f%l)){f=!1;break t}f=!0}f&&(8>h&&(s[h]=a(t.pow(c,.5))),u[h]=a(t.pow(c,1/3)),h++),c++}var d=[],r=r.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],c=n[5],h=n[6],f=n[7],p=0;64>p;p++){if(16>p)d[p]=0|t[e+p];else{var l=d[p-15],y=d[p-2];d[p]=((l<<25|l>>>7)^(l<<14|l>>>18)^l>>>3)+d[p-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+d[p-16]}l=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&h)+u[p]+d[p],y=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&o^r&i^o&i),f=h,h=c,c=a,a=s+l|0,s=i,i=o,o=r,r=l+y|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+c|0,n[6]=n[6]+h|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(r),e.HmacSHA256=i._createHmacHelper(r)}(Math),function(){var t=n,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,o=4*r;n.sigBytes>o&&(n=t.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),s=this._iKey=n.clone(),u=i.words,a=s.words,c=0;c<r;c++)u[c]^=1549556828,a[c]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=n,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var o=0;o<n;o+=3)for(var i=(e[o>>>2]>>>24-8*(o%4)&255)<<16|(e[o+1>>>2]>>>24-8*((o+1)%4)&255)<<8|e[o+2>>>2]>>>24-8*((o+2)%4)&255,s=0;4>s&&o+.75*s<n;s++)t.push(r.charAt(i>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,o=r.charAt(64);o&&(o=t.indexOf(o),-1!=o&&(n=o));for(var o=[],i=0,s=0;s<n;s++)if(s%4){var u=r.indexOf(t.charAt(s-1))<<2*(s%4),a=r.indexOf(t.charAt(s))>>>6-2*(s%4);o[i>>>2]|=(u|a)<<24-8*(i%4),i++}return e.create(o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,r,o,i,s){return t=t+(e&n|~e&r)+o+s,(t<<i|t>>>32-i)+e}function r(t,e,n,r,o,i,s){return t=t+(e&r|n&~r)+o+s,(t<<i|t>>>32-i)+e}function o(t,e,n,r,o,i,s){return t=t+(e^n^r)+o+s,(t<<i|t>>>32-i)+e}function i(t,e,n,r,o,i,s){return t=t+(n^(e|~r))+o+s,(t<<i|t>>>32-i)+e}for(var s=n,u=s.lib,a=u.WordArray,c=u.Hasher,u=s.algo,h=[],f=0;64>f;f++)h[f]=4294967296*t.abs(t.sin(f+1))|0;u=u.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(var s=0;16>s;s++){var u=n+s,a=t[u];t[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var s=this._hash.words,u=t[n+0],a=t[n+1],c=t[n+2],f=t[n+3],p=t[n+4],l=t[n+5],d=t[n+6],y=t[n+7],v=t[n+8],g=t[n+9],b=t[n+10],m=t[n+11],_=t[n+12],w=t[n+13],x=t[n+14],E=t[n+15],O=s[0],S=s[1],k=s[2],j=s[3],O=e(O,S,k,j,u,7,h[0]),j=e(j,O,S,k,a,12,h[1]),k=e(k,j,O,S,c,17,h[2]),S=e(S,k,j,O,f,22,h[3]),O=e(O,S,k,j,p,7,h[4]),j=e(j,O,S,k,l,12,h[5]),k=e(k,j,O,S,d,17,h[6]),S=e(S,k,j,O,y,22,h[7]),O=e(O,S,k,j,v,7,h[8]),j=e(j,O,S,k,g,12,h[9]),k=e(k,j,O,S,b,17,h[10]),S=e(S,k,j,O,m,22,h[11]),O=e(O,S,k,j,_,7,h[12]),j=e(j,O,S,k,w,12,h[13]),k=e(k,j,O,S,x,17,h[14]),S=e(S,k,j,O,E,22,h[15]),O=r(O,S,k,j,a,5,h[16]),j=r(j,O,S,k,d,9,h[17]),k=r(k,j,O,S,m,14,h[18]),S=r(S,k,j,O,u,20,h[19]),O=r(O,S,k,j,l,5,h[20]),j=r(j,O,S,k,b,9,h[21]),k=r(k,j,O,S,E,14,h[22]),S=r(S,k,j,O,p,20,h[23]),O=r(O,S,k,j,g,5,h[24]),j=r(j,O,S,k,x,9,h[25]),k=r(k,j,O,S,f,14,h[26]),S=r(S,k,j,O,v,20,h[27]),O=r(O,S,k,j,w,5,h[28]),j=r(j,O,S,k,c,9,h[29]),k=r(k,j,O,S,y,14,h[30]),S=r(S,k,j,O,_,20,h[31]),O=o(O,S,k,j,l,4,h[32]),j=o(j,O,S,k,v,11,h[33]),k=o(k,j,O,S,m,16,h[34]),S=o(S,k,j,O,x,23,h[35]),O=o(O,S,k,j,a,4,h[36]),j=o(j,O,S,k,p,11,h[37]),k=o(k,j,O,S,y,16,h[38]),S=o(S,k,j,O,b,23,h[39]),O=o(O,S,k,j,w,4,h[40]),j=o(j,O,S,k,u,11,h[41]),k=o(k,j,O,S,f,16,h[42]),S=o(S,k,j,O,d,23,h[43]),O=o(O,S,k,j,g,4,h[44]),j=o(j,O,S,k,_,11,h[45]),k=o(k,j,O,S,E,16,h[46]),S=o(S,k,j,O,c,23,h[47]),O=i(O,S,k,j,u,6,h[48]),j=i(j,O,S,k,y,10,h[49]),k=i(k,j,O,S,x,15,h[50]),S=i(S,k,j,O,l,21,h[51]),O=i(O,S,k,j,_,6,h[52]),j=i(j,O,S,k,f,10,h[53]),k=i(k,j,O,S,b,15,h[54]),S=i(S,k,j,O,a,21,h[55]),O=i(O,S,k,j,v,6,h[56]),j=i(j,O,S,k,E,10,h[57]),k=i(k,j,O,S,d,15,h[58]),S=i(S,k,j,O,w,21,h[59]),O=i(O,S,k,j,p,6,h[60]),j=i(j,O,S,k,m,10,h[61]),k=i(k,j,O,S,c,15,h[62]),S=i(S,k,j,O,g,21,h[63]);s[0]=s[0]+O|0,s[1]=s[1]+S|0,s[2]=s[2]+k|0,s[3]=s[3]+j|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296);for(n[(o+64>>>9<<4)+15]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[(o+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,r=0;4>r;r++)o=n[r],n[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return e},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=c._createHelper(u),s.HmacMD5=c._createHmacHelper(u)}(Math),function(){var t=n,e=t.lib,r=e.Base,o=e.WordArray,e=t.algo,i=e.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=n.hasher.create(),i=o.create(),s=i.words,u=n.keySize,n=n.iterations;s.length<u;){a&&r.update(a);var a=r.update(t).finalize(e);r.reset();for(var c=1;c<n;c++)a=r.finalize(a),r.reset();i.concat(a)}return i.sigBytes=4*u,i}});t.EvpKDF=function(t,e,n){return i.create(n).compute(t,e)}}(),n.lib.Cipher||function(t){var e=n,r=e.lib,o=r.Base,i=r.WordArray,s=r.BufferedBlockAlgorithm,u=e.enc.Base64,a=e.algo.EvpKDF,c=r.Cipher=s.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?y:d).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?y:d).decrypt(t,e,n,r)}}}});r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var h=e.mode={},f=function(e,n,r){var o=this._iv;o?this._iv=t:o=this._prevBlock;for(var i=0;i<r;i++)e[n+i]^=o[i]},p=(r.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();p.Encryptor=p.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;f.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),p.Decryptor=p.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,o=t.slice(e,e+r);n.decryptBlock(t,e),f.call(this,t,e,r),this._prevBlock=o}}),h=h.CBC=p,p=(e.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,n=n-t.sigBytes%n,r=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(r);n=i.create(o,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:h,padding:p}),reset:function(){c.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var l=r.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),h=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(u)},parse:function(t){t=u.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var n=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return l.create({ciphertext:t,salt:n})}},d=r.SerializableCipher=o.extend({cfg:o.extend({format:h}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var o=t.createEncryptor(n,r);return e=o.finalize(e),o=o.cfg,l.create({ciphertext:e,key:n,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),e=(e.kdf={}).OpenSSL={execute:function(t,e,n,r){return r||(r=i.random(8)),t=a.create({keySize:e+n}).compute(t,r),n=i.create(t.words.slice(e),4*n),t.sigBytes=4*e,l.create({key:t,iv:n,salt:r})}},y=r.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:e}),encrypt:function(t,e,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,t=d.encrypt.call(this,t,e,n.key,r),t.mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,d.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=n,e=t.lib.BlockCipher,r=t.algo,o=[],i=[],s=[],u=[],a=[],c=[],h=[],f=[],p=[],l=[],d=[],y=0;256>y;y++)d[y]=128>y?y<<1:y<<1^283;for(var v=0,g=0,y=0;256>y;y++){var b=g^g<<1^g<<2^g<<3^g<<4,b=b>>>8^255&b^99;o[v]=b,i[b]=v;var m=d[v],_=d[m],w=d[_],x=257*d[b]^16843008*b;s[v]=x<<24|x>>>8,u[v]=x<<16|x>>>16,a[v]=x<<8|x>>>24,c[v]=x,x=16843009*w^65537*_^257*m^16843008*v,h[b]=x<<24|x>>>8,f[b]=x<<16|x>>>16,p[b]=x<<8|x>>>24,l[b]=x,v?(v=m^d[d[d[w^m]]],g^=d[d[g]]):v=g=1}var E=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,t=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],i=0;i<t;i++)if(i<n)r[i]=e[i];else{var s=r[i-1];i%n?6<n&&4==i%n&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=s<<8|s>>>24,s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=E[i/n|0]<<24),r[i]=r[i-n]^s}for(e=this._invKeySchedule=[],n=0;n<t;n++)i=t-n,s=n%4?r[i]:r[i-4],e[n]=4>n||4>=i?s:h[o[s>>>24]]^f[o[s>>>16&255]]^p[o[s>>>8&255]]^l[o[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,u,a,c,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,h,f,p,l,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,o,i,s,u){for(var a=this._nRounds,c=t[e]^n[0],h=t[e+1]^n[1],f=t[e+2]^n[2],p=t[e+3]^n[3],l=4,d=1;d<a;d++)var y=r[c>>>24]^o[h>>>16&255]^i[f>>>8&255]^s[255&p]^n[l++],v=r[h>>>24]^o[f>>>16&255]^i[p>>>8&255]^s[255&c]^n[l++],g=r[f>>>24]^o[p>>>16&255]^i[c>>>8&255]^s[255&h]^n[l++],p=r[p>>>24]^o[c>>>16&255]^i[h>>>8&255]^s[255&f]^n[l++],c=y,h=v,f=g;y=(u[c>>>24]<<24|u[h>>>16&255]<<16|u[f>>>8&255]<<8|u[255&p])^n[l++],v=(u[h>>>24]<<24|u[f>>>16&255]<<16|u[p>>>8&255]<<8|u[255&c])^n[l++],g=(u[f>>>24]<<24|u[p>>>16&255]<<16|u[c>>>8&255]<<8|u[255&h])^n[l++],p=(u[p>>>24]<<24|u[c>>>16&255]<<16|u[h>>>8&255]<<8|u[255&f])^n[l++],t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=p},keySize:8});t.AES=e._createHelper(r)}(),n.mode.ECB=function(){var t=n.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),t.Decryptor=t.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),t}(),t.exports=n},function(t,e){var n=function(t,e){if(!(this instanceof n))return new n(t,e);var r=this,t=r.url=t||"",o=(r.protocol=e||"Sec-WebSocket-Protocol",t.split("/")),i={ssl:"wss:"===o[0],origin:o[2],publish_key:o[3],subscribe_key:o[4],channel:o[5]};return r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,t?(r.pubnub=PUBNUB.init(i),r.pubnub.setup=i,r.setup=i,void r.pubnub.subscribe({restore:!1,channel:i.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(t){r.onmessage({data:t})},connect:function(){r.readyState=r.OPEN,r.onopen()}})):(r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r)};n.prototype.send=function(t){var e=this;e.pubnub.publish({channel:e.pubnub.setup.channel,message:t,callback:function(t){e.onsend({data:t})}})},n.prototype.close=function(){var t=this;t.pubnub.unsubscribe({channel:t.pubnub.setup.channel}),t.readyState=t.CLOSED,t.onclose({})},t.exports=n}])})},function(t,e,n){t.exports=n(67)},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=[],e=t.exports={};/*!
	 * Chai version
	 */
e.version="3.5.0",/*!
	 * Assertion Error
	 */
e.AssertionError=n(68);/*!
	 * Utils for plugins (not exported)
	 */
var o=n(69);e.use=function(t){return~r.indexOf(t)||(t(this,o),r.push(t)),this},/*!
	 * Utility Functions
	 */
e.util=o;/*!
	 * Configuration
	 */
var i=n(82);e.config=i;/*!
	 * Primary `Assertion` prototype
	 */
var s=n(97);e.use(s);/*!
	 * Core Assertions
	 */
var u=n(98);e.use(u);/*!
	 * Expect interface
	 */
var a=n(99);e.use(a);/*!
	 * Should interface
	 */
var c=n(100);e.use(c);/*!
	 * Assert interface
	 */
var h=n(101);e.use(h)},function(t,e){/*!
	 * assertion-error
	 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
	 * MIT Licensed
	 */
/*!
	 * Return a function that will copy properties from
	 * one object to another excluding any originally
	 * listed. Returned function will create a new `{}`.
	 *
	 * @param {String} excluded properties ...
	 * @return {Function}
	 */
function n(){function t(t,n){Object.keys(n).forEach(function(r){~e.indexOf(r)||(t[r]=n[r])})}var e=[].slice.call(arguments);return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(t,e,r){var o=n("name","message","stack","constructor","toJSON"),i=o(e||{});this.message=t||"Unspecified AssertionError",this.showDiff=!1;for(var s in i)this[s]=i[s];if(r=r||arguments.callee,r&&Error.captureStackTrace)Error.captureStackTrace(this,r);else try{throw new Error}catch(u){this.stack=u.stack}}/*!
	 * Primary Exports
	 */
t.exports=r,/*!
	 * Inherit from Error.prototype
	 */
r.prototype=Object.create(Error.prototype),/*!
	 * Statically set name
	 */
r.prototype.name="AssertionError",/*!
	 * Ensure correct constructor
	 */
r.prototype.constructor=r,r.prototype.toJSON=function(t){var e=n("constructor","toJSON","stack"),r=e({name:this.name},this);return!1!==t&&this.stack&&(r.stack=this.stack),r}},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Main exports
	 */
var e=t.exports={};/*!
	 * test utility
	 */
e.test=n(70),/*!
	 * type utility
	 */
e.type=n(72),/*!
	 * expectTypes utility
	 */
e.expectTypes=n(74),/*!
	 * message utility
	 */
e.getMessage=n(75),/*!
	 * actual utility
	 */
e.getActual=n(76),/*!
	 * Inspect util
	 */
e.inspect=n(77),/*!
	 * Object Display util
	 */
e.objDisplay=n(81),/*!
	 * Flag utility
	 */
e.flag=n(71),/*!
	 * Flag transferring utility
	 */
e.transferFlags=n(83),/*!
	 * Deep equal utility
	 */
e.eql=n(84),/*!
	 * Deep path value
	 */
e.getPathValue=n(88),/*!
	 * Deep path info
	 */
e.getPathInfo=n(89),/*!
	 * Check if a property exists
	 */
e.hasProperty=n(90),/*!
	 * Function name
	 */
e.getName=n(78),/*!
	 * add Property
	 */
e.addProperty=n(91),/*!
	 * add Method
	 */
e.addMethod=n(92),/*!
	 * overwrite Property
	 */
e.overwriteProperty=n(93),/*!
	 * overwrite Method
	 */
e.overwriteMethod=n(94),/*!
	 * Add a chainable method
	 */
e.addChainableMethod=n(95),/*!
	 * Overwrite chainable method
	 */
e.overwriteChainableMethod=n(96)},function(t,e,n){/*!
	 * Chai - test utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(71);t.exports=function(t,e){var n=r(t,"negate"),o=e[0];return n?!o:o}},function(t,e){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));return 3!==arguments.length?r[e]:void(r[e]=n)}},function(t,e,n){t.exports=n(73)},function(t,e){function n(t){var e=Object.prototype.toString.call(t).match(o)[1].toLowerCase();return"function"==typeof Promise&&t instanceof Promise?"promise":null===t?"null":void 0===t?"undefined":e}function r(){return this instanceof r?void(this.tests={}):new r}/*!
	 * type-detect
	 * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Primary Exports
	 */
var e=t.exports=n,o=/^\[object (.*)\]$/;e.Library=r,r.prototype.of=n,r.prototype.define=function(t,e){return 1===arguments.length?this.tests[t]:(this.tests[t]=e,this)},r.prototype.test=function(t,e){if(e===n(t))return!0;var r=this.tests[e];if(r&&"regexp"===n(r))return r.test(t);if(r&&"function"===n(r))return r(t);throw new ReferenceError('Type test "'+e+'" not defined or invalid.')}},function(t,e,n){/*!
	 * Chai - expectTypes utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(68),o=n(71),i=n(72);t.exports=function(t,e){var t=o(t,"object");e=e.map(function(t){return t.toLowerCase()}),e.sort();var n=e.map(function(t,n){var r=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an":"a",o=e.length>1&&n===e.length-1?"or ":"";return o+r+" "+t}).join(", ");if(!e.some(function(e){return i(t)===e}))throw new r("object tested must be "+n+", but "+i(t)+" given")}},function(t,e,n){/*!
	 * Chai - message composition utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(71),o=n(76),i=(n(77),n(81));t.exports=function(t,e){var n=r(t,"negate"),s=r(t,"object"),u=e[3],a=o(t,e),c=n?e[2]:e[1],h=r(t,"message");return"function"==typeof c&&(c=c()),c=c||"",c=c.replace(/#\{this\}/g,function(){return i(s)}).replace(/#\{act\}/g,function(){return i(a)}).replace(/#\{exp\}/g,function(){return i(u)}),h?h+": "+c:c}},function(t,e){/*!
	 * Chai - getActual utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){return e.length>4?e[4]:t._obj}},function(t,e,n){function r(t,e,n,r){var i={showHidden:e,seen:[],stylize:function(t){return t}};return o(i,t,"undefined"==typeof n?2:n)}function o(t,n,r){if(n&&"function"==typeof n.inspect&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var d=n.inspect(r);return"string"!=typeof d&&(d=o(t,d,r)),d}var m=i(t,n);if(m)return m;if(b(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion){var _=new XMLSerializer;return _.serializeToString(n)}var w="http://www.w3.org/1999/xhtml",x=document.createElementNS(w,"_");return x.appendChild(n.cloneNode(!1)),html=x.innerHTML.replace("><",">"+n.innerHTML+"<"),x.innerHTML="",html}catch(E){}}var O=g(n),S=t.showHidden?v(n):O;if(0===S.length||l(n)&&(1===S.length&&"stack"===S[0]||2===S.length&&"description"===S[0]&&"stack"===S[1])){if("function"==typeof n){var k=y(n),j=k?": "+k:"";return t.stylize("[Function"+j+"]","special")}if(f(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return t.stylize(Date.prototype.toUTCString.call(n),"date");if(l(n))return s(n)}var P="",T=!1,R=["{","}"];if(h(n)&&(T=!0,R=["[","]"]),"function"==typeof n){var k=y(n),j=k?": "+k:"";P=" [Function"+j+"]"}if(f(n)&&(P=" "+RegExp.prototype.toString.call(n)),p(n)&&(P=" "+Date.prototype.toUTCString.call(n)),l(n))return s(n);if(0===S.length&&(!T||0==n.length))return R[0]+P+R[1];if(r<0)return f(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var A;return A=T?u(t,n,r,O,S):S.map(function(e){return a(t,n,r,O,e,T)}),t.seen.pop(),c(A,P,R)}function i(t,e){switch(typeof e){case"undefined":return t.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string");case"number":return 0===e&&1/e===-(1/0)?t.stylize("-0","number"):t.stylize(""+e,"number");case"boolean":return t.stylize(""+e,"boolean")}if(null===e)return t.stylize("null","null")}function s(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,n,r,o){for(var i=[],s=0,u=e.length;s<u;++s)Object.prototype.hasOwnProperty.call(e,String(s))?i.push(a(t,e,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(a(t,e,n,r,o,!0))}),i}function a(t,e,n,r,i,s){var u,a;if(e.__lookupGetter__&&(e.__lookupGetter__(i)?a=e.__lookupSetter__(i)?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):e.__lookupSetter__(i)&&(a=t.stylize("[Setter]","special"))),r.indexOf(i)<0&&(u="["+i+"]"),a||(t.seen.indexOf(e[i])<0?(a=null===n?o(t,e[i],null):o(t,e[i],n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),"undefined"==typeof u){if(s&&i.match(/^\d+$/))return a;u=JSON.stringify(""+i),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function c(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function h(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===d(t)}function f(t){return"object"==typeof t&&"[object RegExp]"===d(t)}function p(t){return"object"==typeof t&&"[object Date]"===d(t)}function l(t){return"object"==typeof t&&"[object Error]"===d(t)}function d(t){return Object.prototype.toString.call(t)}var y=n(78),v=n(79),g=n(80);t.exports=r;var b=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}},function(t,e){/*!
	 * Chai - getName utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){if(t.name)return t.name;var e=/^\s?function ([^(]*)\(/.exec(t);return e&&e[1]?e[1]:""}},function(t,e){/*!
	 * Chai - getProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){function e(t){n.indexOf(t)===-1&&n.push(t)}for(var n=Object.getOwnPropertyNames(t),r=Object.getPrototypeOf(t);null!==r;)Object.getOwnPropertyNames(r).forEach(e),r=Object.getPrototypeOf(r);return n}},function(t,e){/*!
	 * Chai - getEnumerableProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){var e=[];for(var n in t)e.push(n);return e}},function(t,e,n){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(77),o=n(82);t.exports=function(t){var e=r(t),n=Object.prototype.toString.call(t);if(o.truncateThreshold&&e.length>=o.truncateThreshold){if("[object Function]"===n)return t.name&&""!==t.name?"[Function: "+t.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+t.length+") ]";if("[object Object]"===n){var i=Object.keys(t),s=i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", ");return"{ Object ("+s+") }"}return e}return e}},function(t,e){t.exports={includeStack:!1,showDiff:!0,truncateThreshold:40}},function(t,e){/*!
	 * Chai - transferFlags utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),n=3!==arguments.length||n;for(var o in r)(n||"object"!==o&&"ssfi"!==o&&"message"!=o)&&(e.__flags[o]=r[o])}},function(t,e,n){t.exports=n(85)},function(t,e,n){function r(t,e,n){return!!o(t,e)||("date"===y(t)?s(t,e):"regexp"===y(t)?u(t,e):d.isBuffer(t)?f(t,e):"arguments"===y(t)?a(t,e,n):!!i(t,e)&&("object"!==y(t)&&"object"!==y(e)&&"array"!==y(t)&&"array"!==y(e)?o(t,e):l(t,e,n)))}/*!
	 * Strict (egal) equality test. Ensures that NaN always
	 * equals NaN and `-0` does not equal `+0`.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} equal match
	 */
function o(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}/*!
	 * Compare the types of two given objects and
	 * return if they are equal. Note that an Array
	 * has a type of `array` (not `object`) and arguments
	 * have a type of `arguments` (not `array`/`object`).
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function i(t,e){return y(t)===y(e)}/*!
	 * Compare two Date objects by asserting that
	 * the time values are equal using `saveValue`.
	 *
	 * @param {Date} a
	 * @param {Date} b
	 * @return {Boolean} result
	 */
function s(t,e){return"date"===y(e)&&o(t.getTime(),e.getTime())}/*!
	 * Compare two regular expressions by converting them
	 * to string and checking for `sameValue`.
	 *
	 * @param {RegExp} a
	 * @param {RegExp} b
	 * @return {Boolean} result
	 */
function u(t,e){return"regexp"===y(e)&&o(t.toString(),e.toString())}/*!
	 * Assert deep equality of two `arguments` objects.
	 * Unfortunately, these must be sliced to arrays
	 * prior to test to ensure no bad behavior.
	 *
	 * @param {Arguments} a
	 * @param {Arguments} b
	 * @param {Array} memoize (optional)
	 * @return {Boolean} result
	 */
function a(t,e,n){return"arguments"===y(e)&&(t=[].slice.call(t),e=[].slice.call(e),r(t,e,n))}/*!
	 * Get enumerable properties of a given object.
	 *
	 * @param {Object} a
	 * @return {Array} property names
	 */
function c(t){var e=[];for(var n in t)e.push(n);return e}/*!
	 * Simple equality for flat iterable objects
	 * such as Arrays or Node.js buffers.
	 *
	 * @param {Iterable} a
	 * @param {Iterable} b
	 * @return {Boolean} result
	 */
function h(t,e){if(t.length!==e.length)return!1;for(var n=0,r=!0;n<t.length;n++)if(t[n]!==e[n]){r=!1;break}return r}/*!
	 * Extension to `iterableEqual` specifically
	 * for Node.js Buffers.
	 *
	 * @param {Buffer} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function f(t,e){return!!d.isBuffer(e)&&h(t,e)}/*!
	 * Block for `objectEqual` ensuring non-existing
	 * values don't get in.
	 *
	 * @param {Mixed} object
	 * @return {Boolean} result
	 */
function p(t){return null!==t&&void 0!==t}/*!
	 * Recursively check the equality of two objects.
	 * Once basic sameness has been established it will
	 * defer to `deepEqual` for each enumerable key
	 * in the object.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function l(t,e,n){if(!p(t)||!p(e))return!1;if(t.prototype!==e.prototype)return!1;var o;if(n){for(o=0;o<n.length;o++)if(n[o][0]===t&&n[o][1]===e||n[o][0]===e&&n[o][1]===t)return!0}else n=[];try{var i=c(t),s=c(e)}catch(u){return!1}if(i.sort(),s.sort(),!h(i,s))return!1;n.push([t,e]);var a;for(o=i.length-1;o>=0;o--)if(a=i[o],!r(t[a],e[a],n))return!1;return!0}/*!
	 * deep-eql
	 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var d,y=n(86);try{d=n(60).Buffer}catch(v){d={},d.isBuffer=function(){return!1}}/*!
	 * Primary Export
	 */
t.exports=r},function(t,e,n){t.exports=n(87)},function(t,e){function n(t){var e=Object.prototype.toString.call(t);return o[e]?o[e]:null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}function r(){this.tests={}}/*!
	 * type-detect
	 * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Primary Exports
	 */
var e=t.exports=n,o={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};e.Library=r,r.prototype.of=n,r.prototype.define=function(t,e){return 1===arguments.length?this.tests[t]:(this.tests[t]=e,this)},r.prototype.test=function(t,e){if(e===n(t))return!0;var r=this.tests[e];if(r&&"regexp"===n(r))return r.test(t);if(r&&"function"===n(r))return r(t);throw new ReferenceError('Type test "'+e+'" not defined or invalid.')}},function(t,e,n){/*!
	 * Chai - getPathValue utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * @see https://github.com/logicalparadox/filtr
	 * MIT Licensed
	 */
var r=n(89);t.exports=function(t,e){var n=r(t,e);return n.value}},function(t,e,n){/*!
	 * ## parsePath(path)
	 *
	 * Helper function used to parse string object
	 * paths. Use in conjunction with `_getPathValue`.
	 *
	 *      var parsed = parsePath('myobject.property.subprop');
	 *
	 * ### Paths:
	 *
	 * * Can be as near infinitely deep and nested
	 * * Arrays are also valid using the formal `myobject.document[3].property`.
	 * * Literal dots and brackets (not delimiter) must be backslash-escaped.
	 *
	 * @param {String} path
	 * @returns {Object} parsed
	 * @api private
	 */
function r(t){var e=t.replace(/([^\\])\[/g,"$1.["),n=e.match(/(\\\.|[^.]+?)+/g);return n.map(function(t){var e=/^\[(\d+)\]$/,n=e.exec(t);return n?{i:parseFloat(n[1])}:{p:t.replace(/\\([.\[\]])/g,"$1")}})}/*!
	 * ## _getPathValue(parsed, obj)
	 *
	 * Helper companion function for `.parsePath` that returns
	 * the value located at the parsed address.
	 *
	 *      var value = getPathValue(parsed, obj);
	 *
	 * @param {Object} parsed definition from `parsePath`.
	 * @param {Object} object to search against
	 * @param {Number} object to search against
	 * @returns {Object|Undefined} value
	 * @api private
	 */
function o(t,e,n){var r,o=e;n=void 0===n?t.length:n;for(var i=0,s=n;i<s;i++){var u=t[i];o?("undefined"!=typeof u.p?o=o[u.p]:"undefined"!=typeof u.i&&(o=o[u.i]),i==s-1&&(r=o)):r=void 0}return r}/*!
	 * Chai - getPathInfo utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var i=n(90);t.exports=function(t,e){var n=r(t),s=n[n.length-1],u={parent:n.length>1?o(n,e,n.length-1):e,name:s.p||s.i,value:o(n,e)};return u.exists=i(u.name,u.parent),u}},function(t,e,n){/*!
	 * Chai - hasProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(72),o={number:Number,string:String};t.exports=function(t,e){var n=r(e);return"null"!==n&&"undefined"!==n&&(o[n]&&"object"!=typeof e&&(e=new o[n](e)),t in e)}},function(t,e,n){/*!
	 * Chai - addProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(82),o=n(71);t.exports=function(t,e,n){Object.defineProperty(t,e,{get:function i(){var t=o(this,"ssfi");t&&r.includeStack===!1&&o(this,"ssfi",i);var e=n.call(this);return void 0===e?this:e},configurable:!0})}},function(t,e,n){/*!
	 * Chai - addMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(82),o=n(71);t.exports=function(t,e,n){t[e]=function(){var i=o(this,"ssfi");i&&r.includeStack===!1&&o(this,"ssfi",t[e]);var s=n.apply(this,arguments);return void 0===s?this:s}}},function(t,e){/*!
	 * Chai - overwriteProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e),o=function(){};r&&"function"==typeof r.get&&(o=r.get),Object.defineProperty(t,e,{get:function(){var t=n(o).call(this);return void 0===t?this:t},configurable:!0})}},function(t,e){/*!
	 * Chai - overwriteMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t[e],o=function(){return this};r&&"function"==typeof r&&(o=r),t[e]=function(){var t=n(o).apply(this,arguments);return void 0===t?this:t}}},function(t,e,n){/*!
	 * Chai - addChainingMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var r=n(83),o=n(71),i=n(82),s="__proto__"in Object,u=/^(?:length|name|arguments|caller)$/,a=Function.prototype.call,c=Function.prototype.apply;t.exports=function(t,e,n,h){"function"!=typeof h&&(h=function(){});var f={method:n,chainingBehavior:h};t.__methods||(t.__methods={}),t.__methods[e]=f,Object.defineProperty(t,e,{get:function(){f.chainingBehavior.call(this);var e=function p(){var t=o(this,"ssfi");t&&i.includeStack===!1&&o(this,"ssfi",p);var e=f.method.apply(this,arguments);return void 0===e?this:e};if(s){var n=e.__proto__=Object.create(this);n.call=a,n.apply=c}else{var h=Object.getOwnPropertyNames(t);h.forEach(function(n){if(!u.test(n)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r)}})}return r(this,e),e},configurable:!0})}},function(t,e){/*!
	 * Chai - overwriteChainableMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n,r){var o=t.__methods[e],i=o.chainingBehavior;o.chainingBehavior=function(){var t=r(i).call(this);return void 0===t?this:t};var s=o.method;o.method=function(){var t=n(s).apply(this,arguments);return void 0===t?this:t}}},function(t,e,n){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(82);t.exports=function(t,e){/*!
	   * Assertion Constructor
	   *
	   * Creates object for chaining.
	   *
	   * @api private
	   */
function n(t,e,n){i(this,"ssfi",n||arguments.callee),i(this,"object",t),i(this,"message",e)}/*!
	   * Module dependencies.
	   */
var o=t.AssertionError,i=e.flag;/*!
	   * Module export.
	   */
t.Assertion=n,Object.defineProperty(n,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=t}}),Object.defineProperty(n,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=t}}),n.addProperty=function(t,n){e.addProperty(this.prototype,t,n)},n.addMethod=function(t,n){e.addMethod(this.prototype,t,n)},n.addChainableMethod=function(t,n,r){e.addChainableMethod(this.prototype,t,n,r)},n.overwriteProperty=function(t,n){e.overwriteProperty(this.prototype,t,n)},n.overwriteMethod=function(t,n){e.overwriteMethod(this.prototype,t,n)},n.overwriteChainableMethod=function(t,n,r){e.overwriteChainableMethod(this.prototype,t,n,r)},n.prototype.assert=function(t,n,s,u,a,c){var h=e.test(this,arguments);if(!0!==c&&(c=!1),!0!==r.showDiff&&(c=!1),!h){var n=e.getMessage(this,arguments),f=e.getActual(this,arguments);throw new o(n,{actual:f,expected:u,showDiff:c},r.includeStack?this.assert:i(this,"ssfi"))}},/*!
	   * ### ._obj
	   *
	   * Quick reference to stored `actual` value for plugin developers.
	   *
	   * @api private
	   */
Object.defineProperty(n.prototype,"_obj",{get:function(){return i(this,"object")},set:function(t){i(this,"object",t)}})}},function(t,e){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){function n(t,n){n&&T(this,"message",n),t=t.toLowerCase();var r=T(this,"object"),o=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";this.assert(t===e.type(r),"expected #{this} to be "+o+t,"expected #{this} not to be "+o+t)}function r(){T(this,"contains",!0)}function o(t,n){e.expectTypes(this,["array","object","string"]),n&&T(this,"message",n);var r=T(this,"object"),o=!1;if("array"===e.type(r)&&"object"===e.type(t)){for(var i in r)if(e.eql(r[i],t)){o=!0;break}}else if("object"===e.type(t)){if(!T(this,"negate")){for(var s in t)new P(r).property(s,t[s]);return}var u={};for(var s in t)u[s]=r[s];o=e.eql(u,t)}else o=void 0!=r&&~r.indexOf(t);this.assert(o,"expected #{this} to include "+e.inspect(t),"expected #{this} to not include "+e.inspect(t))}function i(){var t=T(this,"object"),e=Object.prototype.toString.call(t);this.assert("[object Arguments]"===e,"expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}function s(t,e){e&&T(this,"message",e);var n=T(this,"object");return T(this,"deep")?this.eql(t):void this.assert(t===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}function u(t,n){n&&T(this,"message",n),this.assert(e.eql(t,T(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}function a(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new P(n,e).to.have.property("length");var r=n.length;this.assert(r>t,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",t,r)}else this.assert(n>t,"expected #{this} to be above "+t,"expected #{this} to be at most "+t)}function c(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new P(n,e).to.have.property("length");var r=n.length;this.assert(r>=t,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",t,r)}else this.assert(n>=t,"expected #{this} to be at least "+t,"expected #{this} to be below "+t)}function h(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new P(n,e).to.have.property("length");var r=n.length;this.assert(r<t,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",t,r)}else this.assert(n<t,"expected #{this} to be below "+t,"expected #{this} to be at least "+t)}function f(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new P(n,e).to.have.property("length");var r=n.length;this.assert(r<=t,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",t,r)}else this.assert(n<=t,"expected #{this} to be at most "+t,"expected #{this} to be above "+t)}function p(t,n){n&&T(this,"message",n);var r=e.getName(t);this.assert(T(this,"object")instanceof t,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function l(t,n){n&&T(this,"message",n);var r=T(this,"object");this.assert(r.hasOwnProperty(t),"expected #{this} to have own property "+e.inspect(t),"expected #{this} to not have own property "+e.inspect(t))}function d(t,n,r){"string"==typeof n&&(r=n,n=null),r&&T(this,"message",r);var o=T(this,"object"),i=Object.getOwnPropertyDescriptor(Object(o),t);i&&n?this.assert(e.eql(n,i),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to match "+e.inspect(n)+", got "+e.inspect(i),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to not match "+e.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+e.inspect(t),"expected #{this} to not have an own property descriptor for "+e.inspect(t)),T(this,"object",i)}function y(){T(this,"doLength",!0)}function v(t,e){e&&T(this,"message",e);var n=T(this,"object");new P(n,e).to.have.property("length");var r=n.length;this.assert(r==t,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",t,r)}function g(t,e){e&&T(this,"message",e);var n=T(this,"object");this.assert(t.exec(n),"expected #{this} to match "+t,"expected #{this} not to match "+t)}function b(t){var n,r=T(this,"object"),o=!0,i="keys must be given single argument of Array|Object|String, or multiple String arguments";switch(e.type(t)){case"array":if(arguments.length>1)throw new Error(i);break;case"object":if(arguments.length>1)throw new Error(i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}if(!t.length)throw new Error("keys required");var s=Object.keys(r),u=t,a=t.length,c=T(this,"any"),h=T(this,"all");if(c||h||(h=!0),c){var f=u.filter(function(t){return~s.indexOf(t)});o=f.length>0}if(h&&(o=t.every(function(t){return~s.indexOf(t)}),T(this,"negate")||T(this,"contains")||(o=o&&t.length==s.length)),a>1){t=t.map(function(t){return e.inspect(t)});var p=t.pop();h&&(n=t.join(", ")+", and "+p),c&&(n=t.join(", ")+", or "+p)}else n=e.inspect(t[0]);n=(a>1?"keys ":"key ")+n,n=(T(this,"contains")?"contain ":"have ")+n,this.assert(o,"expected #{this} to "+n,"expected #{this} to not "+n,u.slice(0).sort(),s.sort(),!0)}function m(t,n,r){r&&T(this,"message",r);var o=T(this,"object");new P(o,r).is.a("function");var i=!1,s=null,u=null,a=null;0===arguments.length?(n=null,t=null):t&&(t instanceof RegExp||"string"==typeof t)?(n=t,t=null):t&&t instanceof Error?(s=t,t=null,n=null):"function"==typeof t?(u=t.prototype.name,(!u||"Error"===u&&t!==Error)&&(u=t.name||(new t).name)):t=null;try{o()}catch(c){if(s)return this.assert(c===s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",s instanceof Error?s.toString():s,c instanceof Error?c.toString():c),T(this,"object",c),this;if(t&&(this.assert(c instanceof t,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",u,c instanceof Error?c.toString():c),!n))return T(this,"object",c),this;var h="error"===e.type(c)&&"message"in c?c.message:""+c;if(null!=h&&n&&n instanceof RegExp)return this.assert(n.exec(h),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",n,h),T(this,"object",c),this;if(null!=h&&n&&"string"==typeof n)return this.assert(~h.indexOf(n),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",n,h),T(this,"object",c),this;i=!0,a=c}var f="",p=null!==u?u:s?"#{exp}":"an error";i&&(f=" but #{act} was thrown"),this.assert(i===!0,"expected #{this} to throw "+p+f,"expected #{this} to not throw "+p+f,s instanceof Error?s.toString():s,a instanceof Error?a.toString():a),T(this,"object",a)}function _(t,n){n&&T(this,"message",n);var r=T(this,"object"),o=T(this,"itself"),i="function"!==e.type(r)||o?r[t]:r.prototype[t];this.assert("function"==typeof i,"expected #{this} to respond to "+e.inspect(t),"expected #{this} to not respond to "+e.inspect(t))}function w(t,n){n&&T(this,"message",n);var r=T(this,"object"),o=t(r);this.assert(o,"expected #{this} to satisfy "+e.objDisplay(t),"expected #{this} to not satisfy"+e.objDisplay(t),!this.negate,o)}function x(t,n,r){r&&T(this,"message",r);var o=T(this,"object");if(new P(o,r).is.a("number"),"number"!==e.type(t)||"number"!==e.type(n))throw new Error("the arguments to closeTo or approximately must be numbers");this.assert(Math.abs(o-t)<=n,"expected #{this} to be close to "+t+" +/- "+n,"expected #{this} not to be close to "+t+" +/- "+n)}function E(t,e,n){return t.every(function(t){return n?e.some(function(e){return n(t,e)}):e.indexOf(t)!==-1})}function O(t,e){e&&T(this,"message",e);var n=T(this,"object");new P(t).to.be.an("array"),this.assert(t.indexOf(n)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,n)}function S(t,e,n){n&&T(this,"message",n);var r=T(this,"object");new P(t,n).to.have.property(e),new P(r).is.a("function");var o=t[e];r(),this.assert(o!==t[e],"expected ."+e+" to change","expected ."+e+" to not change")}function k(t,e,n){n&&T(this,"message",n);var r=T(this,"object");new P(t,n).to.have.property(e),new P(r).is.a("function");var o=t[e];r(),this.assert(t[e]-o>0,"expected ."+e+" to increase","expected ."+e+" to not increase")}function j(t,e,n){n&&T(this,"message",n);var r=T(this,"object");new P(t,n).to.have.property(e),new P(r).is.a("function");var o=t[e];r(),this.assert(t[e]-o<0,"expected ."+e+" to decrease","expected ."+e+" to not decrease")}var P=t.Assertion,T=(Object.prototype.toString,e.flag);["to","be","been","is","and","has","have","with","that","which","at","of","same"].forEach(function(t){P.addProperty(t,function(){return this})}),P.addProperty("not",function(){T(this,"negate",!0)}),P.addProperty("deep",function(){T(this,"deep",!0)}),P.addProperty("any",function(){T(this,"any",!0),T(this,"all",!1)}),P.addProperty("all",function(){T(this,"all",!0),T(this,"any",!1)}),P.addChainableMethod("an",n),P.addChainableMethod("a",n),P.addChainableMethod("include",o,r),P.addChainableMethod("contain",o,r),P.addChainableMethod("contains",o,r),P.addChainableMethod("includes",o,r),P.addProperty("ok",function(){this.assert(T(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),P.addProperty("true",function(){this.assert(!0===T(this,"object"),"expected #{this} to be true","expected #{this} to be false",!this.negate)}),P.addProperty("false",function(){this.assert(!1===T(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!this.negate)}),P.addProperty("null",function(){this.assert(null===T(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),P.addProperty("undefined",function(){this.assert(void 0===T(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),P.addProperty("NaN",function(){this.assert(isNaN(T(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")}),P.addProperty("exist",function(){this.assert(null!=T(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),P.addProperty("empty",function(){var t=T(this,"object"),e=t;Array.isArray(t)||"string"==typeof object?e=t.length:"object"==typeof t&&(e=Object.keys(t).length),this.assert(!e,"expected #{this} to be empty","expected #{this} not to be empty")}),P.addProperty("arguments",i),P.addProperty("Arguments",i),P.addMethod("equal",s),P.addMethod("equals",s),P.addMethod("eq",s),P.addMethod("eql",u),P.addMethod("eqls",u),P.addMethod("above",a),P.addMethod("gt",a),P.addMethod("greaterThan",a),P.addMethod("least",c),P.addMethod("gte",c),P.addMethod("below",h),P.addMethod("lt",h),P.addMethod("lessThan",h),P.addMethod("most",f),P.addMethod("lte",f),P.addMethod("within",function(t,e,n){n&&T(this,"message",n);var r=T(this,"object"),o=t+".."+e;if(T(this,"doLength")){new P(r,n).to.have.property("length");var i=r.length;this.assert(i>=t&&i<=e,"expected #{this} to have a length within "+o,"expected #{this} to not have a length within "+o)}else this.assert(r>=t&&r<=e,"expected #{this} to be within "+o,"expected #{this} to not be within "+o)}),P.addMethod("instanceof",p),P.addMethod("instanceOf",p),P.addMethod("property",function(t,n,r){r&&T(this,"message",r);var o=!!T(this,"deep"),i=o?"deep property ":"property ",s=T(this,"negate"),u=T(this,"object"),a=o?e.getPathInfo(t,u):null,c=o?a.exists:e.hasProperty(t,u),h=o?a.value:u[t];if(s&&arguments.length>1){if(void 0===h)throw r=null!=r?r+": ":"",new Error(r+e.inspect(u)+" has no "+i+e.inspect(t))}else this.assert(c,"expected #{this} to have a "+i+e.inspect(t),"expected #{this} to not have "+i+e.inspect(t));arguments.length>1&&this.assert(n===h,"expected #{this} to have a "+i+e.inspect(t)+" of #{exp}, but got #{act}","expected #{this} to not have a "+i+e.inspect(t)+" of #{act}",n,h),T(this,"object",h)}),P.addMethod("ownProperty",l),P.addMethod("haveOwnProperty",l),P.addMethod("ownPropertyDescriptor",d),P.addMethod("haveOwnPropertyDescriptor",d),P.addChainableMethod("length",v,y),P.addMethod("lengthOf",v),P.addMethod("match",g),P.addMethod("matches",g),P.addMethod("string",function(t,n){n&&T(this,"message",n);var r=T(this,"object");new P(r,n).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+e.inspect(t),"expected #{this} to not contain "+e.inspect(t))}),P.addMethod("keys",b),P.addMethod("key",b),P.addMethod("throw",m),P.addMethod("throws",m),P.addMethod("Throw",m),P.addMethod("respondTo",_),P.addMethod("respondsTo",_),P.addProperty("itself",function(){T(this,"itself",!0)}),P.addMethod("satisfy",w),P.addMethod("satisfies",w),P.addMethod("closeTo",x),P.addMethod("approximately",x),P.addMethod("members",function(t,n){n&&T(this,"message",n);var r=T(this,"object");new P(r).to.be.an("array"),new P(t).to.be.an("array");var o=T(this,"deep")?e.eql:void 0;return T(this,"contains")?this.assert(E(t,r,o),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",r,t):void this.assert(E(r,t,o)&&E(t,r,o),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",r,t)}),P.addMethod("oneOf",O),P.addChainableMethod("change",S),P.addChainableMethod("changes",S),P.addChainableMethod("increase",k),P.addChainableMethod("increases",k),P.addChainableMethod("decrease",j),P.addChainableMethod("decreases",j),P.addProperty("extensible",function(){var t,e=T(this,"object");try{t=Object.isExtensible(e)}catch(n){if(!(n instanceof TypeError))throw n;t=!1}this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")}),P.addProperty("sealed",function(){var t,e=T(this,"object");try{t=Object.isSealed(e)}catch(n){if(!(n instanceof TypeError))throw n;t=!0}this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")}),P.addProperty("frozen",function(){var t,e=T(this,"object");try{t=Object.isFrozen(e)}catch(n){if(!(n instanceof TypeError))throw n;t=!0}this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})}},function(t,e){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){t.expect=function(e,n){return new t.Assertion(e,n)},t.expect.fail=function(e,n,r,o){throw r=r||"expect.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:o},t.expect.fail)}}},function(t,e){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){function n(){function e(){return this instanceof String||this instanceof Number||this instanceof Boolean?new r(this.valueOf(),null,e):new r(this,null,e)}function n(t){Object.defineProperty(this,"should",{value:t,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:n,get:e,configurable:!0});var o={};return o.fail=function(e,n,r,i){throw r=r||"should.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:i},o.fail)},o.equal=function(t,e,n){new r(t,n).to.equal(e)},o.Throw=function(t,e,n,o){new r(t,o).to.Throw(e,n)},o.exist=function(t,e){new r(t,e).to.exist},o.not={},o.not.equal=function(t,e,n){new r(t,n).to.not.equal(e)},o.not.Throw=function(t,e,n,o){new r(t,o).to.not.Throw(e,n)},o.not.exist=function(t,e){new r(t,e).to.not.exist},o["throw"]=o.Throw,o.not["throw"]=o.not.Throw,o}var r=t.Assertion;t.should=n,t.Should=n}},function(t,e){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){/*!
	   * Chai dependencies.
	   */
var n=t.Assertion,r=e.flag,o=t.assert=function(e,r){var o=new n(null,null,t.assert);o.assert(e,r,"[ negation message unavailable ]")};o.fail=function(e,n,r,i){throw r=r||"assert.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:i},o.fail)},o.isOk=function(t,e){new n(t,e).is.ok},o.isNotOk=function(t,e){new n(t,e).is.not.ok},o.equal=function(t,e,i){var s=new n(t,i,o.equal);s.assert(e==r(s,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t)},o.notEqual=function(t,e,i){var s=new n(t,i,o.notEqual);s.assert(e!=r(s,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t)},o.strictEqual=function(t,e,r){new n(t,r).to.equal(e)},o.notStrictEqual=function(t,e,r){new n(t,r).to.not.equal(e)},o.deepEqual=function(t,e,r){new n(t,r).to.eql(e)},o.notDeepEqual=function(t,e,r){new n(t,r).to.not.eql(e)},o.isAbove=function(t,e,r){new n(t,r).to.be.above(e)},o.isAtLeast=function(t,e,r){new n(t,r).to.be.least(e)},o.isBelow=function(t,e,r){new n(t,r).to.be.below(e)},o.isAtMost=function(t,e,r){new n(t,r).to.be.most(e)},o.isTrue=function(t,e){new n(t,e).is["true"]},o.isNotTrue=function(t,e){new n(t,e).to.not.equal(!0)},o.isFalse=function(t,e){new n(t,e).is["false"]},o.isNotFalse=function(t,e){new n(t,e).to.not.equal(!1)},o.isNull=function(t,e){new n(t,e).to.equal(null)},o.isNotNull=function(t,e){new n(t,e).to.not.equal(null)},o.isNaN=function(t,e){new n(t,e).to.be.NaN},o.isNotNaN=function(t,e){new n(t,e).not.to.be.NaN},o.isUndefined=function(t,e){new n(t,e).to.equal(void 0)},o.isDefined=function(t,e){new n(t,e).to.not.equal(void 0)},o.isFunction=function(t,e){new n(t,e).to.be.a("function")},o.isNotFunction=function(t,e){new n(t,e).to.not.be.a("function")},o.isObject=function(t,e){new n(t,e).to.be.a("object")},o.isNotObject=function(t,e){new n(t,e).to.not.be.a("object")},o.isArray=function(t,e){new n(t,e).to.be.an("array")},o.isNotArray=function(t,e){new n(t,e).to.not.be.an("array")},o.isString=function(t,e){new n(t,e).to.be.a("string")},o.isNotString=function(t,e){new n(t,e).to.not.be.a("string")},o.isNumber=function(t,e){new n(t,e).to.be.a("number")},o.isNotNumber=function(t,e){new n(t,e).to.not.be.a("number")},o.isBoolean=function(t,e){new n(t,e).to.be.a("boolean")},o.isNotBoolean=function(t,e){new n(t,e).to.not.be.a("boolean")},o.typeOf=function(t,e,r){new n(t,r).to.be.a(e)},o.notTypeOf=function(t,e,r){new n(t,r).to.not.be.a(e)},o.instanceOf=function(t,e,r){new n(t,r).to.be.instanceOf(e)},o.notInstanceOf=function(t,e,r){new n(t,r).to.not.be.instanceOf(e)},o.include=function(t,e,r){new n(t,r,o.include).include(e)},o.notInclude=function(t,e,r){new n(t,r,o.notInclude).not.include(e)},o.match=function(t,e,r){new n(t,r).to.match(e)},o.notMatch=function(t,e,r){new n(t,r).to.not.match(e)},o.property=function(t,e,r){new n(t,r).to.have.property(e)},o.notProperty=function(t,e,r){new n(t,r).to.not.have.property(e)},o.deepProperty=function(t,e,r){new n(t,r).to.have.deep.property(e)},o.notDeepProperty=function(t,e,r){new n(t,r).to.not.have.deep.property(e)},o.propertyVal=function(t,e,r,o){new n(t,o).to.have.property(e,r)},o.propertyNotVal=function(t,e,r,o){new n(t,o).to.not.have.property(e,r)},o.deepPropertyVal=function(t,e,r,o){new n(t,o).to.have.deep.property(e,r)},o.deepPropertyNotVal=function(t,e,r,o){new n(t,o).to.not.have.deep.property(e,r)},o.lengthOf=function(t,e,r){new n(t,r).to.have.length(e)},o["throws"]=function(t,e,o,i){("string"==typeof e||e instanceof RegExp)&&(o=e,e=null);var s=new n(t,i).to["throw"](e,o);return r(s,"object")},o.doesNotThrow=function(t,e,r){"string"==typeof e&&(r=e,e=null),new n(t,r).to.not.Throw(e)},o.operator=function(t,o,i,s){var u;switch(o){case"==":u=t==i;break;case"===":u=t===i;break;case">":u=t>i;break;case">=":u=t>=i;break;case"<":u=t<i;break;case"<=":u=t<=i;break;case"!=":u=t!=i;break;case"!==":u=t!==i;break;default:throw new Error('Invalid operator "'+o+'"')}var a=new n(u,s);a.assert(!0===r(a,"object"),"expected "+e.inspect(t)+" to be "+o+" "+e.inspect(i),"expected "+e.inspect(t)+" to not be "+o+" "+e.inspect(i))},o.closeTo=function(t,e,r,o){new n(t,o).to.be.closeTo(e,r)},o.approximately=function(t,e,r,o){new n(t,o).to.be.approximately(e,r)},o.sameMembers=function(t,e,r){new n(t,r).to.have.same.members(e)},o.sameDeepMembers=function(t,e,r){new n(t,r).to.have.same.deep.members(e)},o.includeMembers=function(t,e,r){new n(t,r).to.include.members(e)},o.includeDeepMembers=function(t,e,r){new n(t,r).to.include.deep.members(e)},o.oneOf=function(t,e,r){new n(t,r).to.be.oneOf(e)},o.changes=function(t,e,r){new n(t).to.change(e,r)},o.doesNotChange=function(t,e,r){new n(t).to.not.change(e,r)},o.increases=function(t,e,r){new n(t).to.increase(e,r)},o.doesNotIncrease=function(t,e,r){new n(t).to.not.increase(e,r)},o.decreases=function(t,e,r){new n(t).to.decrease(e,r)},o.doesNotDecrease=function(t,e,r){new n(t).to.not.decrease(e,r)},/*!
	   * ### .ifError(object)
	   *
	   * Asserts if value is not a false value, and throws if it is a true value.
	   * This is added to allow for chai to be a drop-in replacement for Node's
	   * assert class.
	   *
	   *     var err = new Error('I am a custom error');
	   *     assert.ifError(err); // Rethrows err!
	   *
	   * @name ifError
	   * @param {Object} object
	   * @namespace Assert
	   * @api public
	   */
o.ifError=function(t){if(t)throw t},o.isExtensible=function(t,e){new n(t,e).to.be.extensible},o.isNotExtensible=function(t,e){new n(t,e).to.not.be.extensible},o.isSealed=function(t,e){new n(t,e).to.be.sealed},o.isNotSealed=function(t,e){new n(t,e).to.not.be.sealed},o.isFrozen=function(t,e){new n(t,e).to.be.frozen},o.isNotFrozen=function(t,e){new n(t,e).to.not.be.frozen},/*!
	   * Aliases.
	   */
function i(t,e){return o[e]=o[t],i}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")}},function(t,e){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdGVzdHMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGM1NzNlMWU1ZDc0OTZhMzE1MWNhIiwid2VicGFjazovLy8uL3NyYy90ZXN0L3Rlc3RzLmpzIiwid2VicGFjazovLy8uL3NyYy90ZXN0L2NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9pc29tb3JwaGljLWZldGNoL2ZldGNoLW5wbS1icm93c2VyaWZ5LmpzIiwid2VicGFjazovLy8uL34vd2hhdHdnLWZldGNoL2ZldGNoLmpzIiwid2VicGFjazovLy8uL3NyYy9DbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi91cmwvdXJsLmpzIiwid2VicGFjazovLy8uL34vdXJsL34vcHVueWNvZGUvcHVueWNvZGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3F1ZXJ5c3RyaW5nL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcXVlcnlzdHJpbmcvZGVjb2RlLmpzIiwid2VicGFjazovLy8uL34vcXVlcnlzdHJpbmcvZW5jb2RlLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0FjY291bnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1VybFNlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQWN0aXZlQ2FsbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQnVzaW5lc3NBZGRyZXNzLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0NhbGxMb2cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvRGVwYXJ0bWVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9NZW1iZXJzLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0RldmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9EaWFsaW5nUGxhbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9FeHRlbnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQWRkcmVzc0Jvb2tTeW5jLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0FkZHJlc3NCb29rLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0NvbnRhY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvR3JvdXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQW5zd2VyaW5nUnVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9BdXRoelByb2ZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQ2hlY2suanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQmxvY2tlZE51bWJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9CdXNpbmVzc0hvdXJzLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0NhbGxMb2dTeW5jLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0NvbXBhbnlQYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9Db25mZXJlbmNpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvRmF4LmpzIiwid2VicGFjazovLy8uL34vZm9ybS1kYXRhL2xpYi9icm93c2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0ZvcndhcmRpbmdOdW1iZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvR3JhbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvR3JlZXRpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvTWVldGluZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9TZXJ2aWNlSW5mby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9FbmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvTWVzc2FnZVN0b3JlLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0NvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvTWVzc2FnZVN5bmMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvUGhvbmVOdW1iZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvUHJlc2VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvUHJvZmlsZUltYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL1JpbmdvdXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvU21zLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL09yZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL1JlY29yZGluZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9DbGllbnRJbmZvLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0N1c3RvbURhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvTnVtYmVyUG9vbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9Mb29rdXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvUmVzZXJ2ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JpbmdjZW50cmFsL2J1aWxkL3JpbmdjZW50cmFsLmpzIiwid2VicGFjazovLy8uL34vYnVmZmVyL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vYmFzZTY0LWpzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vaWVlZTc1NC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2lzYXJyYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9mZXRjaC1wb255ZmlsbC9idWlsZC9mZXRjaC1icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vcHVibnViL21vZGVybi9kaXN0L3B1Ym51Yi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpLmpzIiwid2VicGFjazovLy8uL34vYXNzZXJ0aW9uLWVycm9yL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvdGVzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZmxhZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3R5cGUtZGV0ZWN0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vdHlwZS1kZXRlY3QvbGliL3R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2V4cGVjdFR5cGVzLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXRNZXNzYWdlLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXRBY3R1YWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2luc3BlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2dldE5hbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2dldFByb3BlcnRpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2dldEVudW1lcmFibGVQcm9wZXJ0aWVzLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9vYmpEaXNwbGF5LmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL3RyYW5zZmVyRmxhZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9kZWVwLWVxbC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2RlZXAtZXFsL2xpYi9lcWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9kZWVwLWVxbC9+L3R5cGUtZGV0ZWN0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vZGVlcC1lcWwvfi90eXBlLWRldGVjdC9saWIvdHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZ2V0UGF0aFZhbHVlLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXRQYXRoSW5mby5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvaGFzUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2FkZFByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9hZGRNZXRob2QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL292ZXJ3cml0ZVByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS91dGlscy9vdmVyd3JpdGVNZXRob2QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2FkZENoYWluYWJsZU1ldGhvZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvb3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kLmpzIiwid2VicGFjazovLy8uL34vY2hhaS9saWIvY2hhaS9hc3NlcnRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpL2xpYi9jaGFpL2NvcmUvYXNzZXJ0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvaW50ZXJmYWNlL2V4cGVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvaW50ZXJmYWNlL3Nob3VsZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NoYWkvbGliL2NoYWkvaW50ZXJmYWNlL2Fzc2VydC5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfX2Rpcm5hbWUiLCJzaG91bGRCZVBhZ2luZ1Jlc3VsdCIsImxpc3QiLCJjaGFpXzEiLCJleHBlY3QiLCJ0byIsImhhcyIsImtleXMiLCJjb25maWciLCJjbGllbnQiLCJjb25maWdfMSIsIkNsaWVudF8xIiwiZnNfMSIsImFZZWFyQWdvIiwiRGF0ZSIsInNldEZ1bGxZZWFyIiwiZ2V0RnVsbFllYXIiLCJiZWZvcmUiLCJ0aGVuIiwiY29uZiIsImFwcCIsImxvZ2luIiwidXNlciIsImRlc2NyaWJlIiwiaXQiLCJhY2NvdW50IiwiZ2V0IiwiY29udGFpbiIsImUiLCJhcGlSZXNwb25zZSIsInJlc3BvbnNlIiwic3RhdHVzIiwiZXEiLCJqc29uIiwiZXJyb3JDb2RlIiwiZXF1YWwiLCJleHRlbnNpb25Qcm9wcyIsImV4dGVuc2lvbiIsImV4dCIsImV4dHMiLCJyZWNvcmRzIiwicHV0IiwibWVzc2FnZVN0b3JlIiwiZGF0ZUZyb20iLCJ0b0lTT1N0cmluZyIsIm1zZ3MiLCJsZW5ndGgiLCJFcnJvciIsIm1zZyIsImNvbnRlbnQiLCJhdHRhY2htZW50cyIsImF0Y2giLCJjYWxsTG9nIiwid2l0aFJlY29yZGluZyIsImNhbGxMb2dzIiwicmVjb3JkaW5nIiwiaGVhZGVycyIsInN0cmluZyIsImltZ1BhdGgiLCJjcmVhdGVSZWFkU3RyZWFtIiwicHJvZmlsZUltYWdlIiwicG9zdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImZheCIsInBob25lTnVtYmVyIiwicGVyUGFnZSIsImNvbnNvbGUiLCJ3YXJuIiwic21zIiwiZnJvbSIsInVzZXJuYW1lIiwidGV4dCIsInByb2Nlc3MiLCJmZXRjaCIsImF1dGhEYXRhVXJsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsInJlcyIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidGhpcyIsInJ1bkNsZWFyVGltZW91dCIsIm1hcmtlciIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJjb25jYXQiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJsZW4iLCJydW4iLCJJdGVtIiwiYXJyYXkiLCJub29wIiwibmV4dFRpY2siLCJhcmdzIiwiQXJyYXkiLCJhcmd1bWVudHMiLCJpIiwicHVzaCIsInByb3RvdHlwZSIsImFwcGx5IiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwiYmluZGluZyIsIm5hbWUiLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiZ2xvYmFsIiwiZmFjdG9yeSIsIm9iamVjdE9yRnVuY3Rpb24iLCJ4IiwiaXNGdW5jdGlvbiIsInNldFNjaGVkdWxlciIsInNjaGVkdWxlRm4iLCJjdXN0b21TY2hlZHVsZXJGbiIsInNldEFzYXAiLCJhc2FwRm4iLCJhc2FwIiwidXNlTmV4dFRpY2siLCJmbHVzaCIsInVzZVZlcnR4VGltZXIiLCJ2ZXJ0eE5leHQiLCJ1c2VNdXRhdGlvbk9ic2VydmVyIiwiaXRlcmF0aW9ucyIsIm9ic2VydmVyIiwiQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIiLCJub2RlIiwiZG9jdW1lbnQiLCJjcmVhdGVUZXh0Tm9kZSIsIm9ic2VydmUiLCJjaGFyYWN0ZXJEYXRhIiwiZGF0YSIsInVzZU1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsIk1lc3NhZ2VDaGFubmVsIiwicG9ydDEiLCJvbm1lc3NhZ2UiLCJwb3J0MiIsInBvc3RNZXNzYWdlIiwidXNlU2V0VGltZW91dCIsImdsb2JhbFNldFRpbWVvdXQiLCJjYWxsYmFjayIsImFyZyIsInVuZGVmaW5lZCIsImF0dGVtcHRWZXJ0eCIsInZlcnR4IiwicnVuT25Mb29wIiwicnVuT25Db250ZXh0Iiwib25GdWxmaWxsbWVudCIsIm9uUmVqZWN0aW9uIiwiX2FyZ3VtZW50cyIsInBhcmVudCIsImNoaWxkIiwiY29uc3RydWN0b3IiLCJQUk9NSVNFX0lEIiwibWFrZVByb21pc2UiLCJfc3RhdGUiLCJpbnZva2VDYWxsYmFjayIsIl9yZXN1bHQiLCJzdWJzY3JpYmUiLCJyZXNvbHZlIiwib2JqZWN0IiwiQ29uc3RydWN0b3IiLCJwcm9taXNlIiwiX3Jlc29sdmUiLCJzZWxmRnVsZmlsbG1lbnQiLCJUeXBlRXJyb3IiLCJjYW5ub3RSZXR1cm5Pd24iLCJnZXRUaGVuIiwiZXJyb3IiLCJHRVRfVEhFTl9FUlJPUiIsInRyeVRoZW4iLCJmdWxmaWxsbWVudEhhbmRsZXIiLCJyZWplY3Rpb25IYW5kbGVyIiwiaGFuZGxlRm9yZWlnblRoZW5hYmxlIiwidGhlbmFibGUiLCJzZWFsZWQiLCJmdWxmaWxsIiwicmVhc29uIiwiX3JlamVjdCIsIl9sYWJlbCIsImhhbmRsZU93blRoZW5hYmxlIiwiRlVMRklMTEVEIiwiUkVKRUNURUQiLCJoYW5kbGVNYXliZVRoZW5hYmxlIiwibWF5YmVUaGVuYWJsZSIsInRoZW4kJCIsInB1Ymxpc2hSZWplY3Rpb24iLCJfb25lcnJvciIsInB1Ymxpc2giLCJQRU5ESU5HIiwiX3N1YnNjcmliZXJzIiwic3Vic2NyaWJlcnMiLCJzZXR0bGVkIiwiZGV0YWlsIiwiRXJyb3JPYmplY3QiLCJ0cnlDYXRjaCIsIlRSWV9DQVRDSF9FUlJPUiIsImhhc0NhbGxiYWNrIiwic3VjY2VlZGVkIiwiZmFpbGVkIiwiaW5pdGlhbGl6ZVByb21pc2UiLCJyZXNvbHZlciIsIm5leHRJZCIsIkVudW1lcmF0b3IiLCJpbnB1dCIsIl9pbnN0YW5jZUNvbnN0cnVjdG9yIiwiaXNBcnJheSIsIl9pbnB1dCIsIl9yZW1haW5pbmciLCJfZW51bWVyYXRlIiwidmFsaWRhdGlvbkVycm9yIiwiYWxsIiwiZW50cmllcyIsInJhY2UiLCJyZWplY3QiLCJfIiwibmVlZHNSZXNvbHZlciIsIm5lZWRzTmV3IiwiUHJvbWlzZSIsInBvbHlmaWxsIiwibG9jYWwiLCJzZWxmIiwiRnVuY3Rpb24iLCJQIiwicHJvbWlzZVRvU3RyaW5nIiwidG9TdHJpbmciLCJjYXN0IiwiX2lzQXJyYXkiLCJzY2hlZHVsZUZsdXNoIiwiYnJvd3NlcldpbmRvdyIsIndpbmRvdyIsImJyb3dzZXJHbG9iYWwiLCJNdXRhdGlvbk9ic2VydmVyIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsImlzTm9kZSIsImlzV29ya2VyIiwiVWludDhDbGFtcGVkQXJyYXkiLCJpbXBvcnRTY3JpcHRzIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0cmluZyIsIl9lYWNoRW50cnkiLCJlbnRyeSIsInJlc29sdmUkJCIsIl90aGVuIiwiX3NldHRsZWRBdCIsIl93aWxsU2V0dGxlQXQiLCJzdGF0ZSIsImVudW1lcmF0b3IiLCJfc2V0U2NoZWR1bGVyIiwiX3NldEFzYXAiLCJfYXNhcCIsImNhdGNoIiwiYmluZCIsIm5vcm1hbGl6ZU5hbWUiLCJTdHJpbmciLCJ0ZXN0IiwidG9Mb3dlckNhc2UiLCJub3JtYWxpemVWYWx1ZSIsIml0ZXJhdG9yRm9yIiwiaXRlbXMiLCJpdGVyYXRvciIsIm5leHQiLCJzaGlmdCIsImRvbmUiLCJzdXBwb3J0IiwiaXRlcmFibGUiLCJTeW1ib2wiLCJIZWFkZXJzIiwibWFwIiwiZm9yRWFjaCIsImFwcGVuZCIsImdldE93blByb3BlcnR5TmFtZXMiLCJjb25zdW1lZCIsImJvZHkiLCJib2R5VXNlZCIsImZpbGVSZWFkZXJSZWFkeSIsInJlYWRlciIsIm9ubG9hZCIsInJlc3VsdCIsIm9uZXJyb3IiLCJyZWFkQmxvYkFzQXJyYXlCdWZmZXIiLCJibG9iIiwiRmlsZVJlYWRlciIsInJlYWRBc0FycmF5QnVmZmVyIiwicmVhZEJsb2JBc1RleHQiLCJyZWFkQXNUZXh0IiwiQm9keSIsIl9pbml0Qm9keSIsIl9ib2R5SW5pdCIsIl9ib2R5VGV4dCIsIkJsb2IiLCJpc1Byb3RvdHlwZU9mIiwiX2JvZHlCbG9iIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsIl9ib2R5Rm9ybURhdGEiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJhcnJheUJ1ZmZlciIsIkFycmF5QnVmZmVyIiwic2V0IiwidHlwZSIsInJlamVjdGVkIiwiZGVjb2RlIiwiSlNPTiIsInBhcnNlIiwibm9ybWFsaXplTWV0aG9kIiwibWV0aG9kIiwidXBjYXNlZCIsInRvVXBwZXJDYXNlIiwibWV0aG9kcyIsImluZGV4T2YiLCJSZXF1ZXN0Iiwib3B0aW9ucyIsInVybCIsImNyZWRlbnRpYWxzIiwibW9kZSIsInJlZmVycmVyIiwiZm9ybSIsInRyaW0iLCJzcGxpdCIsImJ5dGVzIiwicmVwbGFjZSIsImpvaW4iLCJkZWNvZGVVUklDb21wb25lbnQiLCJ4aHIiLCJoZWFkIiwicGFpcnMiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJoZWFkZXIiLCJrZXkiLCJSZXNwb25zZSIsImJvZHlJbml0Iiwib2siLCJzdGF0dXNUZXh0IiwidmFsdWVzIiwiZ2V0QWxsIiwiaGFzT3duUHJvcGVydHkiLCJ0aGlzQXJnIiwiY2xvbmUiLCJyZWRpcmVjdFN0YXR1c2VzIiwicmVkaXJlY3QiLCJSYW5nZUVycm9yIiwibG9jYXRpb24iLCJpbml0IiwicmVzcG9uc2VVUkwiLCJnZXRSZXNwb25zZUhlYWRlciIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsInJlc3BvbnNlVGV4dCIsIm9udGltZW91dCIsIm9wZW4iLCJ3aXRoQ3JlZGVudGlhbHMiLCJyZXNwb25zZVR5cGUiLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsInVybF8xIiwiQWNjb3VudF8xIiwiQ2xpZW50SW5mb18xIiwiTnVtYmVyUG9vbF8xIiwiUmluZ2NlbnRyYWwiLCJDbGllbnQiLCJvcHRzIiwic2VydmljZSIsInNlcnZlciIsIlNFUlZFUl9QUk9EVUNUSU9OIiwibG9naW5VcmwiLCJwbGF0Zm9ybSIsImdldEF1dGhDb2RlIiwiY2FsbGJhY2tVcmwiLCJxdWVyeSIsImNvZGUiLCJlcnIiLCJsb2dvdXQiLCJldnROYW1lIiwiaGFuZGxlciIsImNyZWF0ZVN1YnNjcmlwdGlvbiIsImVuc3VyZUxvZ2dlZEluIiwiY2xpZW50SW5mbyIsIm51bWJlclBvb2wiLCJTRVJWRVJfU0FOREJPWCIsIkVWRU5UX0xPR0lOX1NUQVJUIiwiRVZFTlRfTE9HSU5fU1VDQ0VTUyIsIkVWRU5UX0xPR0lOX0VSUk9SIiwiRVZFTlRfUkVGUkVTSF9TVEFSVCIsIkVWRU5UX1JFRlJFU0hfU1VDQ0VTUyIsIkVWRU5UX1JFRlJFU0hfRVJST1IiLCJFVkVOVF9MT0dPVVRfU1RBUlQiLCJFVkVOVF9MT0dPVVRfU1VDQ0VTUyIsIkVWRU5UX0xPR09VVF9FUlJPUiIsIlVybCIsInByb3RvY29sIiwic2xhc2hlcyIsImF1dGgiLCJob3N0IiwicG9ydCIsImhvc3RuYW1lIiwiaGFzaCIsInNlYXJjaCIsInBhdGhuYW1lIiwicGF0aCIsImhyZWYiLCJ1cmxQYXJzZSIsInBhcnNlUXVlcnlTdHJpbmciLCJzbGFzaGVzRGVub3RlSG9zdCIsImlzT2JqZWN0IiwidSIsInVybEZvcm1hdCIsIm9iaiIsImlzU3RyaW5nIiwiZm9ybWF0IiwidXJsUmVzb2x2ZSIsInNvdXJjZSIsInJlbGF0aXZlIiwidXJsUmVzb2x2ZU9iamVjdCIsInJlc29sdmVPYmplY3QiLCJpc051bGwiLCJpc051bGxPclVuZGVmaW5lZCIsInB1bnljb2RlIiwicHJvdG9jb2xQYXR0ZXJuIiwicG9ydFBhdHRlcm4iLCJkZWxpbXMiLCJ1bndpc2UiLCJhdXRvRXNjYXBlIiwibm9uSG9zdENoYXJzIiwiaG9zdEVuZGluZ0NoYXJzIiwiaG9zdG5hbWVNYXhMZW4iLCJob3N0bmFtZVBhcnRQYXR0ZXJuIiwiaG9zdG5hbWVQYXJ0U3RhcnQiLCJ1bnNhZmVQcm90b2NvbCIsImphdmFzY3JpcHQiLCJqYXZhc2NyaXB0OiIsImhvc3RsZXNzUHJvdG9jb2wiLCJzbGFzaGVkUHJvdG9jb2wiLCJodHRwIiwiaHR0cHMiLCJmdHAiLCJnb3BoZXIiLCJmaWxlIiwiaHR0cDoiLCJodHRwczoiLCJmdHA6IiwiZ29waGVyOiIsImZpbGU6IiwicXVlcnlzdHJpbmciLCJyZXN0IiwicHJvdG8iLCJleGVjIiwibG93ZXJQcm90byIsInN1YnN0ciIsIm1hdGNoIiwiaG9zdEVuZCIsImhlYyIsImF0U2lnbiIsImxhc3RJbmRleE9mIiwic2xpY2UiLCJwYXJzZUhvc3QiLCJpcHY2SG9zdG5hbWUiLCJob3N0cGFydHMiLCJsIiwicGFydCIsIm5ld3BhcnQiLCJqIiwiayIsImNoYXJDb2RlQXQiLCJ2YWxpZFBhcnRzIiwibm90SG9zdCIsImJpdCIsInVuc2hpZnQiLCJkb21haW5BcnJheSIsIm5ld091dCIsInMiLCJlbmNvZGUiLCJoIiwiYWUiLCJlc2MiLCJlbmNvZGVVUklDb21wb25lbnQiLCJlc2NhcGUiLCJxbSIsInN0cmluZ2lmeSIsImNoYXJBdCIsInJlbCIsInJlbFBhdGgiLCJpc1NvdXJjZUFicyIsImlzUmVsQWJzIiwibXVzdEVuZEFicyIsInJlbW92ZUFsbERvdHMiLCJzcmNQYXRoIiwicHN5Y2hvdGljIiwicG9wIiwiYXV0aEluSG9zdCIsImxhc3QiLCJoYXNUcmFpbGluZ1NsYXNoIiwidXAiLCJzcGxpY2UiLCJpc0Fic29sdXRlIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18iLCJyb290IiwiZXJyb3JzIiwiZm4iLCJtYXBEb21haW4iLCJwYXJ0cyIsInJlZ2V4U2VwYXJhdG9ycyIsImxhYmVscyIsImVuY29kZWQiLCJ1Y3MyZGVjb2RlIiwiZXh0cmEiLCJvdXRwdXQiLCJjb3VudGVyIiwidWNzMmVuY29kZSIsInN0cmluZ0Zyb21DaGFyQ29kZSIsImJhc2ljVG9EaWdpdCIsImNvZGVQb2ludCIsImJhc2UiLCJkaWdpdFRvQmFzaWMiLCJkaWdpdCIsImZsYWciLCJhZGFwdCIsImRlbHRhIiwibnVtUG9pbnRzIiwiZmlyc3RUaW1lIiwiZmxvb3IiLCJkYW1wIiwiYmFzZU1pbnVzVE1pbiIsInRNYXgiLCJza2V3Iiwib3V0IiwiYmFzaWMiLCJpbmRleCIsIm9sZGkiLCJ3IiwidCIsImJhc2VNaW51c1QiLCJpbnB1dExlbmd0aCIsIm4iLCJpbml0aWFsTiIsImJpYXMiLCJpbml0aWFsQmlhcyIsImRlbGltaXRlciIsIm1heEludCIsInRNaW4iLCJoYW5kbGVkQ1BDb3VudCIsImJhc2ljTGVuZ3RoIiwicSIsImN1cnJlbnRWYWx1ZSIsImhhbmRsZWRDUENvdW50UGx1c09uZSIsInFNaW51c1QiLCJ0b1VuaWNvZGUiLCJyZWdleFB1bnljb2RlIiwidG9BU0NJSSIsInJlZ2V4Tm9uQVNDSUkiLCJmcmVlR2xvYmFsIiwibm9kZVR5cGUiLCJvdmVyZmxvdyIsIm5vdC1iYXNpYyIsImludmFsaWQtaW5wdXQiLCJmcm9tQ2hhckNvZGUiLCJ1Y3MyIiwid2VicGFja1BvbHlmaWxsIiwiZGVwcmVjYXRlIiwicGF0aHMiLCJjaGlsZHJlbiIsInByb3AiLCJxcyIsInNlcCIsInJlZ2V4cCIsIm1heEtleXMiLCJrc3RyIiwidnN0ciIsInYiLCJpZHgiLCJzdHJpbmdpZnlQcmltaXRpdmUiLCJpc0Zpbml0ZSIsImtzIiwiX19leHRlbmRzIiwiZCIsImIiLCJfXyIsImNyZWF0ZSIsIlVybFNlY3Rpb25fMSIsIkFjdGl2ZUNhbGxzXzEiLCJCdXNpbmVzc0FkZHJlc3NfMSIsIkNhbGxMb2dfMSIsIkRlcGFydG1lbnRfMSIsIkRldmljZV8xIiwiRGlhbGluZ1BsYW5fMSIsIkV4dGVuc2lvbl8xIiwiT3JkZXJfMSIsIlBob25lTnVtYmVyXzEiLCJSZWNvcmRpbmdfMSIsIlNlcnZpY2VJbmZvXzEiLCJBY2NvdW50IiwiX3N1cGVyIiwicHJ2IiwiYWN0aXZlQ2FsbHMiLCJidXNpbmVzc0FkZHJlc3MiLCJkZXBhcnRtZW50IiwiZGV2aWNlIiwiZGlhbGluZ1BsYW4iLCJvcmRlciIsInNlcnZpY2VJbmZvIiwiZ2V0U2VydmljZSIsImdldEVuZHBvaW50IiwiVXJsU2VjdGlvbiIsIl9zZXJ2aWNlIiwicHJldmlvdXMiLCJ3aXRoVmFsdWUiLCJzdHIiLCJlbmQiLCJzZWMiLCJBY3RpdmVDYWxscyIsIkJ1c2luZXNzQWRkcmVzcyIsIkNhbGxMb2ciLCJNZW1iZXJzXzEiLCJEZXBhcnRtZW50IiwibWVtYmVycyIsIk1lbWJlcnMiLCJEZXZpY2UiLCJEaWFsaW5nUGxhbiIsIkFkZHJlc3NCb29rU3luY18xIiwiQWRkcmVzc0Jvb2tfMSIsIkFuc3dlcmluZ1J1bGVfMSIsIkF1dGh6UHJvZmlsZV8xIiwiQmxvY2tlZE51bWJlcl8xIiwiQnVzaW5lc3NIb3Vyc18xIiwiQ2FsbExvZ1N5bmNfMSIsIkNvbXBhbnlQYWdlcl8xIiwiQ29uZmVyZW5jaW5nXzEiLCJGYXhfMSIsIkZvcndhcmRpbmdOdW1iZXJfMSIsIkdyYW50XzEiLCJHcmVldGluZ18xIiwiTWVldGluZ18xIiwiTWVzc2FnZVN0b3JlXzEiLCJNZXNzYWdlU3luY18xIiwiUHJlc2VuY2VfMSIsIlByb2ZpbGVJbWFnZV8xIiwiUmluZ291dF8xIiwiU21zXzEiLCJFeHRlbnNpb24iLCJhZGRyZXNzQm9va1N5bmMiLCJhZGRyZXNzQm9vayIsImFuc3dlcmluZ1J1bGUiLCJhdXRoelByb2ZpbGUiLCJibG9ja2VkTnVtYmVyIiwiYnVzaW5lc3NIb3VycyIsImNhbGxMb2dTeW5jIiwiY29tcGFueVBhZ2VyIiwiY29uZmVyZW5jaW5nIiwiZm9yd2FyZGluZ051bWJlciIsImdyYW50IiwiZ3JlZXRpbmciLCJtZWV0aW5nIiwibWVzc2FnZVN5bmMiLCJwcmVzZW5jZSIsInJpbmdvdXQiLCJBZGRyZXNzQm9va1N5bmMiLCJDb250YWN0XzEiLCJHcm91cF8xIiwiQWRkcmVzc0Jvb2siLCJjb250YWN0IiwiZ3JvdXAiLCJDb250YWN0IiwiR3JvdXAiLCJBbnN3ZXJpbmdSdWxlIiwiQ2hlY2tfMSIsIkF1dGh6UHJvZmlsZSIsImNoZWNrIiwiQ2hlY2siLCJCbG9ja2VkTnVtYmVyIiwiQnVzaW5lc3NIb3VycyIsIkNhbGxMb2dTeW5jIiwiQ29tcGFueVBhZ2VyIiwiQ29uZmVyZW5jaW5nIiwiRmF4IiwiaW5Ob2RlIiwiYnJvd3NlclN1cHBvcnRCbG9iIiwibWV0YSIsImpzb25UeXBlIiwiZmlsZW5hbWUiLCJjb250ZW50VHlwZSIsIkZvcndhcmRpbmdOdW1iZXIiLCJHcmFudCIsIkdyZWV0aW5nIiwiRW5kXzEiLCJNZWV0aW5nIiwiU2VydmljZUluZm8iLCJFbmQiLCJDb250ZW50XzEiLCJNZXNzYWdlU3RvcmUiLCJDb250ZW50IiwiTWVzc2FnZVN5bmMiLCJQaG9uZU51bWJlciIsIlByZXNlbmNlIiwiUHJvZmlsZUltYWdlIiwiaW1hZ2VEYXRhIiwiUmluZ291dCIsIlNtcyIsIk9yZGVyIiwiUmVjb3JkaW5nIiwiQ3VzdG9tRGF0YV8xIiwiQ2xpZW50SW5mbyIsImN1c3RvbURhdGEiLCJDdXN0b21EYXRhIiwiTG9va3VwXzEiLCJSZXNlcnZlXzEiLCJOdW1iZXJQb29sIiwibG9va3VwIiwicmVzZXJ2ZSIsIkxvb2t1cCIsIlJlc2VydmUiLCJCdWZmZXIiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83X18iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIm5ld09iaiIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiX1V0aWxzIiwiVXRpbHMiLCJfQ2FjaGUiLCJfQ2FjaGUyIiwiX0V4dGVybmFscyIsIkV4dGVybmFscyIsIl9ldmVudHMiLCJfZXZlbnRzMiIsIl9DbGllbnQiLCJfQ2xpZW50MiIsIl9BcGlSZXNwb25zZSIsIl9BcGlSZXNwb25zZTIiLCJfQ2xpZW50TW9jayIsIl9DbGllbnRNb2NrMiIsIl9Nb2NrIiwiX01vY2syIiwiX1JlZ2lzdHJ5IiwiX1JlZ2lzdHJ5MiIsIl9QbGF0Zm9ybSIsIl9QbGF0Zm9ybTIiLCJfQXV0aCIsIl9BdXRoMiIsIl9QdWJudWJGYWN0b3J5IiwiX1B1Ym51YkZhY3RvcnkyIiwiX1N1YnNjcmlwdGlvbiIsIl9TdWJzY3JpcHRpb24yIiwiX0NhY2hlZFN1YnNjcmlwdGlvbiIsIl9DYWNoZWRTdWJzY3JpcHRpb24yIiwiX0NvbnN0YW50cyIsIl9Db25zdGFudHMyIiwiU0RLIiwiX3JlZiIsImNhY2hlUHJlZml4IiwiYXBwU2VjcmV0IiwiYXBwS2V5IiwiYXBwTmFtZSIsImFwcFZlcnNpb24iLCJwdWJudWJGYWN0b3J5IiwicmVkaXJlY3RVcmkiLCJfY2FjaGUiLCJsb2NhbFN0b3JhZ2UiLCJfY2xpZW50IiwiX3BsYXRmb3JtIiwiY2FjaGUiLCJfcHVibnViRmFjdG9yeSIsIlBVQk5VQiIsImNyZWF0ZUNhY2hlZFN1YnNjcmlwdGlvbiIsImNhY2hlS2V5IiwiaGFuZGxlTG9naW5SZWRpcmVjdCIsIm9yaWdpbiIsIl93aW5kb3ckb3BlbmVyJHBvc3RNZSIsIm9wZW5lciIsImF1dGhSZXNwb25zZVByb3BlcnR5Iiwic2FuZGJveCIsInByb2R1Y3Rpb24iLCJjb3JlIiwiQ2FjaGUiLCJFdmVudEVtaXR0ZXIiLCJBcGlSZXNwb25zZSIsIkF1dGgiLCJQbGF0Zm9ybSIsInN1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbiIsIm1vY2tzIiwiUmVnaXN0cnkiLCJNb2NrIiwicHVibnViIiwiUHVibnViTW9ja0ZhY3RvcnkiLCJ3cmFwIiwiaW5uZXJGbiIsIm91dGVyRm4iLCJ0cnlMb2NzTGlzdCIsImdlbmVyYXRvciIsIkdlbmVyYXRvciIsImNvbnRleHQiLCJDb250ZXh0IiwiX2ludm9rZSIsIm1ha2VJbnZva2VNZXRob2QiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiZGVmaW5lSXRlcmF0b3JNZXRob2RzIiwiQXdhaXRBcmd1bWVudCIsIkFzeW5jSXRlcmF0b3IiLCJpbnZva2UiLCJpbnZva2VOZXh0IiwiaW52b2tlVGhyb3ciLCJ1bndyYXBwZWQiLCJlbnF1ZXVlIiwiY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmciLCJwcmV2aW91c1Byb21pc2UiLCJkb21haW4iLCJHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0IiwiR2VuU3RhdGVFeGVjdXRpbmciLCJHZW5TdGF0ZUNvbXBsZXRlZCIsImRvbmVSZXN1bHQiLCJkZWxlZ2F0ZSIsInJldHVybk1ldGhvZCIsInJlY29yZCIsImluZm8iLCJHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkIiwicmVzdWx0TmFtZSIsIm5leHRMb2MiLCJfc2VudCIsInNlbnQiLCJkaXNwYXRjaEV4Y2VwdGlvbiIsImFicnVwdCIsIkNvbnRpbnVlU2VudGluZWwiLCJwdXNoVHJ5RW50cnkiLCJsb2NzIiwidHJ5TG9jIiwiY2F0Y2hMb2MiLCJmaW5hbGx5TG9jIiwiYWZ0ZXJMb2MiLCJ0cnlFbnRyaWVzIiwicmVzZXRUcnlFbnRyeSIsImNvbXBsZXRpb24iLCJyZXNldCIsIml0ZXJhdG9yTWV0aG9kIiwiaXRlcmF0b3JTeW1ib2wiLCJpc05hTiIsImhhc093biIsImluTW9kdWxlIiwicnVudGltZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsIkdwIiwiZGlzcGxheU5hbWUiLCJpc0dlbmVyYXRvckZ1bmN0aW9uIiwiZ2VuRnVuIiwiY3RvciIsIm1hcmsiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImF3cmFwIiwiYXN5bmMiLCJpdGVyIiwicmV2ZXJzZSIsInNraXBUZW1wUmVzZXQiLCJwcmV2Iiwic3RvcCIsInJvb3RFbnRyeSIsInJvb3RSZWNvcmQiLCJydmFsIiwiZXhjZXB0aW9uIiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiZmluYWxseUVudHJ5IiwiY29tcGxldGUiLCJmaW5pc2giLCJ0aHJvd24iLCJkZWxlZ2F0ZVlpZWxkIiwicXVlcnlTdHJpbmdpZnkiLCJwYXJhbWV0ZXJzIiwiX3F1ZXJ5c3RyaW5nMiIsInF1ZXJ5U3RyaW5nIiwibyIsIl90eXBlb2YiLCJpc09iamVjdE9iamVjdCIsImlzUGxhaW5PYmplY3QiLCJwcm90IiwiaXNOb2RlSlMiLCJpc0Jyb3dzZXIiLCJkZWxheSIsIl9xdWVyeXN0cmluZyIsIl9lczZQcm9taXNlIiwiX2VzNlByb21pc2UyIiwiX2ZldGNoUG9ueWZpbGwiLCJfZmV0Y2hQb255ZmlsbDIiLCJfcHVibnViIiwiX3B1Ym51YjIiLCJmZXRjaFBhcnRzIiwic3RvcmFnZSIsInByZWZpeCIsInNldFByZWZpeCIsIl9zdG9yYWdlIiwiX3ByZWZpeCIsImRlZmF1bHRQcmVmaXgiLCJzZXRJdGVtIiwiX3ByZWZpeEtleSIsInJlbW92ZUl0ZW0iLCJnZXRJdGVtIiwiaXRlbSIsImNsZWFuIiwiX21heExpc3RlbmVycyIsImlzTnVtYmVyIiwiaXNVbmRlZmluZWQiLCJkZWZhdWx0TWF4TGlzdGVuZXJzIiwic2V0TWF4TGlzdGVuZXJzIiwiZXIiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lciIsIm5ld0xpc3RlbmVyIiwid2FybmVkIiwidHJhY2UiLCJnIiwiZmlyZWQiLCJwb3NpdGlvbiIsInJldCIsImxpc3RlbmVyQ291bnQiLCJldmxpc3RlbmVyIiwiZW1pdHRlciIsIl9hc3luY1RvR2VuZXJhdG9yIiwiZ2VuIiwic3RlcCIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJmaW5kSGVhZGVyTmFtZSIsInJlZHVjZSIsIl9FdmVudEVtaXR0ZXIiLCJfdGVtcCIsIl90aGlzIiwiX3JldCIsIl9sZW4iLCJfa2V5IiwiZXZlbnRzIiwiYmVmb3JlUmVxdWVzdCIsInJlcXVlc3RTdWNjZXNzIiwicmVxdWVzdEVycm9yIiwic2VuZFJlcXVlc3QiLCJfeCIsIl9jYWxsZWUiLCJfY29udGV4dCIsIl9sb2FkUmVzcG9uc2UiLCJfcmVzcG9uc2UiLCJfaW5pdCIsInQwIiwibWFrZUVycm9yIiwiX3gyIiwiX3JlZjIiLCJfY2FsbGVlMiIsIl9jb250ZXh0MiIsIm9yaWdpbmFsTWVzc2FnZSIsIm1lc3NhZ2UiLCJjcmVhdGVSZXF1ZXN0IiwiX2FsbG93ZWRNZXRob2RzIiwiX2pzb25Db250ZW50VHlwZSIsImNvbnRlbnRUeXBlSGVhZGVyTmFtZSIsIl9jb250ZW50VHlwZSIsIl91cmxlbmNvZGVkQ29udGVudFR5cGUiLCJyZXEiLCJvcmlnaW5hbEJvZHkiLCJfcmVxdWVzdCIsIl90ZXh0IiwiX2pzb24iLCJfbXVsdGlwYXJ0IiwiX2lzTXVsdGlwYXJ0IiwiX2lzSnNvbiIsInNraXBPS0NoZWNrIiwiZXJyb3JfZGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsIm11bHRpcGFydCIsImJvdW5kYXJ5IiwiX2dldENvbnRlbnRUeXBlIiwiX2JvdW5kYXJ5U2VwYXJhdG9yIiwic3RhdHVzSW5mbyIsIl9pc0NvbnRlbnRUeXBlIiwiX211bHRpcGFydENvbnRlbnRUeXBlIiwiX2lzVXJsRW5jb2RlZCIsImhlYWRlcnNBbmRCb2R5IiwiX2JvZHlTZXBhcmF0b3IiLCJoZWFkZXJzVGV4dCIsIl9oZWFkZXJTZXBhcmF0b3IiLCJfSHR0cENsaWVudCIsIl9yZWdpc3RyeSIsInJlZ2lzdHJ5IiwibW9jayIsImZpbmQiLCJnZXRSZXNwb25zZSIsIl9tb2NrcyIsImFkZCIsImNsZWFyIiwiYXBpQ2FsbCIsImF1dGhlbnRpY2F0aW9uIiwiYWNjZXNzX3Rva2VuIiwidG9rZW5fdHlwZSIsImV4cGlyZXNfaW4iLCJyZWZyZXNoX3Rva2VuIiwicmVmcmVzaF90b2tlbl9leHBpcmVzX2luIiwic2NvcGUiLCJleHBpcmVUaW1lIiwiZ2V0VGltZSIsInByZXNlbmNlTG9hZCIsInVyaSIsImV4dGVuc2lvbk51bWJlciIsInByZXNlbmNlU3RhdHVzIiwidGVsZXBob255U3RhdHVzIiwidXNlclN0YXR1cyIsImRuZFN0YXR1cyIsImV4dGVuc2lvbklkIiwic3Vic2NyaWJlR2VuZXJpYyIsImV4cGlyZXNJbiIsImRhdGUiLCJldmVudEZpbHRlcnMiLCJleHBpcmF0aW9uVGltZSIsImRlbGl2ZXJ5TW9kZSIsInRyYW5zcG9ydFR5cGUiLCJlbmNyeXB0aW9uIiwiYWRkcmVzcyIsInN1YnNjcmliZXJLZXkiLCJzZWNyZXRLZXkiLCJjcmVhdGlvblRpbWUiLCJzdWJzY3JpYmVPblByZXNlbmNlIiwiZGV0YWlsZWQiLCJlbmNyeXB0aW9uQWxnb3JpdGhtIiwiZW5jcnlwdGlvbktleSIsInRva2VuUmVmcmVzaCIsImZhaWx1cmUiLCJfbWV0aG9kIiwiX3BhdGgiLCJfZGVsYXkiLCJfc3RhdHVzIiwiX3N0YXR1c1RleHQiLCJjcmVhdGVSZXNwb25zZSIsInNka1ZlcnNpb24iLCJiZWZvcmVMb2dpbiIsImxvZ2luU3VjY2VzcyIsImxvZ2luRXJyb3IiLCJiZWZvcmVSZWZyZXNoIiwicmVmcmVzaFN1Y2Nlc3MiLCJyZWZyZXNoRXJyb3IiLCJiZWZvcmVMb2dvdXQiLCJsb2dvdXRTdWNjZXNzIiwibG9nb3V0RXJyb3IiLCJfc2VydmVyIiwiX2FwcEtleSIsIl9hcHBTZWNyZXQiLCJfcmVmcmVzaFByb21pc2UiLCJfYXV0aCIsIl9jYWNoZUlkIiwiX3VzZXJBZ2VudCIsIl9yZWRpcmVjdFVyaSIsImNyZWF0ZVVybCIsImJ1aWx0VXJsIiwiaGFzSHR0cCIsImFkZFNlcnZlciIsIl91cmxQcmVmaXgiLCJfYXBpVmVyc2lvbiIsImFkZE1ldGhvZCIsImFkZFRva2VuIiwiYWNjZXNzVG9rZW4iLCJfYXV0aG9yaXplRW5kcG9pbnQiLCJyZXNwb25zZV90eXBlIiwiaW1wbGljaXQiLCJyZWRpcmVjdF91cmkiLCJjbGllbnRfaWQiLCJicmFuZF9pZCIsImJyYW5kSWQiLCJkaXNwbGF5IiwicHJvbXB0IiwicGFyc2VMb2dpblJlZGlyZWN0IiwiZ2V0UGFydHMiLCJzZXBhcmF0b3IiLCJsb2dpbldpbmRvdyIsIl90aGlzMiIsIndpZHRoIiwiaGVpZ2h0IiwicHJvcGVydHkiLCJ0YXJnZXQiLCJkdWFsU2NyZWVuTGVmdCIsInNjcmVlbkxlZnQiLCJzY3JlZW4iLCJsZWZ0IiwiZHVhbFNjcmVlblRvcCIsInNjcmVlblRvcCIsInRvcCIsImlubmVyV2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsImlubmVySGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwid2luIiwiZm9jdXMiLCJldmVudE1ldGhvZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudFJlbW92ZU1ldGhvZCIsIm1lc3NhZ2VFdmVudCIsImV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsImxvZ2luT3B0aW9ucyIsImxvZ2dlZEluIiwiX3JlZjMiLCJncmFudF90eXBlIiwicGFzc3dvcmQiLCJlbmRwb2ludElkIiwiZW5kcG9pbnRfaWQiLCJhY2Nlc3NUb2tlblR0bCIsInJlZnJlc2hUb2tlblR0bCIsIl90b2tlblJlcXVlc3QiLCJfdG9rZW5FbmRwb2ludCIsInNldERhdGEiLCJfcmVmcmVzaCIsIl9yZWY0IiwiX2NhbGxlZTMiLCJfY29udGV4dDMiLCJfcmVmcmVzaERlbGF5TXMiLCJyZWZyZXNoVG9rZW4iLCJyZWZyZXNoVG9rZW5WYWxpZCIsImFjY2Vzc190b2tlbl90dGwiLCJyZWZyZXNoX3Rva2VuX3R0bCIsIl9jbGVhckNhY2hlT25SZWZyZXNoRXJyb3IiLCJyZWZyZXNoIiwiX3JlZjUiLCJfY2FsbGVlNCIsIl90aGlzMyIsIl9jb250ZXh0NCIsIl9yZWY2IiwiX2NhbGxlZTUiLCJfY29udGV4dDUiLCJfcmV2b2tlRW5kcG9pbnQiLCJ0b2tlbiIsImluZmxhdGVSZXF1ZXN0IiwiX3gzIiwiX3JlZjciLCJfY2FsbGVlNiIsIl9jb250ZXh0NiIsInNraXBBdXRoQ2hlY2siLCJfYXV0aEhlYWRlciIsIl94NCIsIl94NSIsIl9yZWY4IiwiX2NhbGxlZTciLCJfY29udGV4dDciLCJyZXRyeSIsImNhbmNlbEFjY2Vzc1Rva2VuIiwiX3g2IiwiX3JlZjkiLCJfY2FsbGVlOCIsIl9jb250ZXh0OCIsIl94OCIsIl94OSIsIl94MTAiLCJfcmVmMTAiLCJfY2FsbGVlOSIsIl9jb250ZXh0OSIsIl94MTEiLCJfeDEyIiwiX3gxMyIsIl94MTQiLCJfcmVmMTEiLCJfY2FsbGVlMTAiLCJfY29udGV4dDEwIiwiX3gxNSIsIl94MTYiLCJfeDE3IiwiX3gxOCIsIl9yZWYxMiIsIl9jYWxsZWUxMSIsIl9jb250ZXh0MTEiLCJfZGVsZXRlIiwiX3gxOSIsIl94MjAiLCJfeDIxIiwiX3JlZjEzIiwiX2NhbGxlZTEyIiwiX2NvbnRleHQxMiIsIl94MjIiLCJfeDIzIiwiX3JlZjE0IiwiX2NhbGxlZTEzIiwiX2NvbnRleHQxMyIsIkF1dGhvcml6YXRpb24iLCJfYXBpS2V5IiwiQ29udGVudC1UeXBlIiwiX3JlZjE1IiwiX2NhbGxlZTE0IiwiX2NvbnRleHQxNCIsIl9pc0FjY2Vzc1Rva2VuVmFsaWQiLCJhY2Nlc3NUb2tlblZhbGlkIiwiYXBpS2V5IiwiYnRvYSIsInRva2VuVHlwZSIsImNhY2hlSWQiLCJuZXdEYXRhIiwiZXhwaXJlX3RpbWUiLCJub3ciLCJyZWZyZXNoX3Rva2VuX2V4cGlyZV90aW1lIiwiYXV0aERhdGEiLCJmb3JjZWRUb2tlblR5cGUiLCJyZWZyZXNoSGFuZGljYXBNcyIsImZvcmNlQXV0aGVudGljYXRpb24iLCJfUHVibnViTW9jayIsIl9QdWJudWJNb2NrMiIsImNyeXB0b19vYmoiLCJQdWJudWJNb2NrIiwicmVhZHkiLCJ1bnN1YnNjcmliZSIsInJlY2VpdmVNZXNzYWdlIiwibm90aWZpY2F0aW9uIiwicmVtb3ZlU3VjY2VzcyIsInJlbW92ZUVycm9yIiwicmVuZXdTdWNjZXNzIiwicmVuZXdFcnJvciIsInN1YnNjcmliZVN1Y2Nlc3MiLCJzdWJzY3JpYmVFcnJvciIsIl9wdWJudWJMYXN0Q2hhbm5lbCIsIl90aW1lb3V0IiwiX3N1YnNjcmlwdGlvbiIsInN1YnNjcmliZWQiLCJhbGl2ZSIsImV4cGlyZWQiLCJfcmVuZXdIYW5kaWNhcE1zIiwic2V0U3Vic2NyaXB0aW9uIiwiX2NsZWFyVGltZW91dCIsIl9zZXRTdWJzY3JpcHRpb24iLCJfc3Vic2NyaWJlQXRQdWJudWIiLCJfc2V0VGltZW91dCIsInJlZ2lzdGVyIiwicmVuZXciLCJhZGRFdmVudEZpbHRlcnMiLCJzZXRFdmVudEZpbHRlcnMiLCJfZ2V0RnVsbEV2ZW50RmlsdGVycyIsInJlbW92ZSIsInJlc3Vic2NyaWJlIiwiZmlsdGVycyIsImV2ZW50Iiwic2V0SW50ZXJ2YWwiLCJfcG9sbEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsIl9kZWNyeXB0IiwiZGVjcnlwdCIsImVuY3J5cHRLZXkiLCJrZXlFbmNvZGluZyIsImtleUxlbmd0aCIsIl9ub3RpZnkiLCJzc2wiLCJzdWJzY3JpYmVfa2V5IiwiY29ubmVjdCIsIl9TdWJzY3JpcHRpb24zIiwiQ2FjaGVkU3Vic2NyaXB0aW9uIiwiX2NhY2hlS2V5IiwicmVzdG9yZSIsInR5cGVkQXJyYXlTdXBwb3J0IiwiYXJyIiwiVWludDhBcnJheSIsImZvbyIsInN1YmFycmF5IiwiYnl0ZUxlbmd0aCIsImtNYXhMZW5ndGgiLCJUWVBFRF9BUlJBWV9TVVBQT1JUIiwiY3JlYXRlQnVmZmVyIiwidGhhdCIsImVuY29kaW5nT3JPZmZzZXQiLCJhbGxvY1Vuc2FmZSIsImZyb21BcnJheUJ1ZmZlciIsImZyb21TdHJpbmciLCJmcm9tT2JqZWN0IiwiYXNzZXJ0U2l6ZSIsInNpemUiLCJhbGxvYyIsImZpbGwiLCJlbmNvZGluZyIsImNoZWNrZWQiLCJpc0VuY29kaW5nIiwiYWN0dWFsIiwid3JpdGUiLCJmcm9tQXJyYXlMaWtlIiwiYnl0ZU9mZnNldCIsImlzQnVmZmVyIiwiY29weSIsImJ1ZmZlciIsImlzbmFuIiwiU2xvd0J1ZmZlciIsImlzVmlldyIsImxvd2VyZWRDYXNlIiwidXRmOFRvQnl0ZXMiLCJiYXNlNjRUb0J5dGVzIiwic2xvd1RvU3RyaW5nIiwic3RhcnQiLCJoZXhTbGljZSIsInV0ZjhTbGljZSIsImFzY2lpU2xpY2UiLCJsYXRpbjFTbGljZSIsImJhc2U2NFNsaWNlIiwidXRmMTZsZVNsaWNlIiwic3dhcCIsImJpZGlyZWN0aW9uYWxJbmRleE9mIiwidmFsIiwiYXJyYXlJbmRleE9mIiwicmVhZCIsImJ1ZiIsImluZGV4U2l6ZSIsInJlYWRVSW50MTZCRSIsImFyckxlbmd0aCIsInZhbExlbmd0aCIsImZvdW5kSW5kZXgiLCJmb3VuZCIsImhleFdyaXRlIiwib2Zmc2V0IiwiTnVtYmVyIiwicmVtYWluaW5nIiwic3RyTGVuIiwicGFyc2VkIiwicGFyc2VJbnQiLCJ1dGY4V3JpdGUiLCJibGl0QnVmZmVyIiwiYXNjaWlXcml0ZSIsImFzY2lpVG9CeXRlcyIsImxhdGluMVdyaXRlIiwiYmFzZTY0V3JpdGUiLCJ1Y3MyV3JpdGUiLCJ1dGYxNmxlVG9CeXRlcyIsImJhc2U2NCIsImZyb21CeXRlQXJyYXkiLCJtaW4iLCJmaXJzdEJ5dGUiLCJieXRlc1BlclNlcXVlbmNlIiwic2Vjb25kQnl0ZSIsInRoaXJkQnl0ZSIsImZvdXJ0aEJ5dGUiLCJ0ZW1wQ29kZVBvaW50IiwiZGVjb2RlQ29kZVBvaW50c0FycmF5IiwiY29kZVBvaW50cyIsIk1BWF9BUkdVTUVOVFNfTEVOR1RIIiwidG9IZXgiLCJjaGVja09mZnNldCIsImNoZWNrSW50IiwibWF4Iiwib2JqZWN0V3JpdGVVSW50MTYiLCJsaXR0bGVFbmRpYW4iLCJvYmplY3RXcml0ZVVJbnQzMiIsImNoZWNrSUVFRTc1NCIsIndyaXRlRmxvYXQiLCJub0Fzc2VydCIsImllZWU3NTQiLCJ3cml0ZURvdWJsZSIsImJhc2U2NGNsZWFuIiwic3RyaW5ndHJpbSIsIklOVkFMSURfQkFTRTY0X1JFIiwidW5pdHMiLCJJbmZpbml0eSIsImxlYWRTdXJyb2dhdGUiLCJieXRlQXJyYXkiLCJoaSIsImxvIiwidG9CeXRlQXJyYXkiLCJzcmMiLCJkc3QiLCJJTlNQRUNUX01BWF9CWVRFUyIsInBvb2xTaXplIiwiX2F1Z21lbnQiLCJzcGVjaWVzIiwiYWxsb2NVbnNhZmVTbG93IiwiX2lzQnVmZmVyIiwiY29tcGFyZSIsImEiLCJ5IiwicG9zIiwic3dhcDE2Iiwic3dhcDMyIiwic3dhcDY0IiwiZXF1YWxzIiwiaW5zcGVjdCIsInRoaXNTdGFydCIsInRoaXNFbmQiLCJ0aGlzQ29weSIsInRhcmdldENvcHkiLCJpbmNsdWRlcyIsInRvSlNPTiIsIl9hcnIiLCJuZXdCdWYiLCJzbGljZUxlbiIsInJlYWRVSW50TEUiLCJtdWwiLCJyZWFkVUludEJFIiwicmVhZFVJbnQ4IiwicmVhZFVJbnQxNkxFIiwicmVhZFVJbnQzMkxFIiwicmVhZFVJbnQzMkJFIiwicmVhZEludExFIiwicG93IiwicmVhZEludEJFIiwicmVhZEludDgiLCJyZWFkSW50MTZMRSIsInJlYWRJbnQxNkJFIiwicmVhZEludDMyTEUiLCJyZWFkSW50MzJCRSIsInJlYWRGbG9hdExFIiwicmVhZEZsb2F0QkUiLCJyZWFkRG91YmxlTEUiLCJyZWFkRG91YmxlQkUiLCJ3cml0ZVVJbnRMRSIsIm1heEJ5dGVzIiwid3JpdGVVSW50QkUiLCJ3cml0ZVVJbnQ4Iiwid3JpdGVVSW50MTZMRSIsIndyaXRlVUludDE2QkUiLCJ3cml0ZVVJbnQzMkxFIiwid3JpdGVVSW50MzJCRSIsIndyaXRlSW50TEUiLCJsaW1pdCIsInN1YiIsIndyaXRlSW50QkUiLCJ3cml0ZUludDgiLCJ3cml0ZUludDE2TEUiLCJ3cml0ZUludDE2QkUiLCJ3cml0ZUludDMyTEUiLCJ3cml0ZUludDMyQkUiLCJ3cml0ZUZsb2F0TEUiLCJ3cml0ZUZsb2F0QkUiLCJ3cml0ZURvdWJsZUxFIiwid3JpdGVEb3VibGVCRSIsInRhcmdldFN0YXJ0IiwicGxhY2VIb2xkZXJzQ291bnQiLCJiNjQiLCJ0bXAiLCJwbGFjZUhvbGRlcnMiLCJBcnIiLCJMIiwicmV2TG9va3VwIiwidHJpcGxldFRvQmFzZTY0IiwibnVtIiwiZW5jb2RlQ2h1bmsiLCJ1aW50OCIsImV4dHJhQnl0ZXMiLCJtYXhDaHVua0xlbmd0aCIsImxlbjIiLCJpc0xFIiwibUxlbiIsIm5CeXRlcyIsImVMZW4iLCJlTWF4IiwiZUJpYXMiLCJuQml0cyIsIk5hTiIsInJ0IiwiYWJzIiwibG9nIiwiTE4yIiwiZmV0Y2hQb255ZmlsbCIsInhkciIsInNldHVwIiwidGltZXIiLCJ4aHJ0bWUiLCJwdWJOdWJDb3JlIiwiREVGX1RJTUVPVVQiLCJmYWlsIiwic3VjY2VzcyIsImFib3J0IiwiZmluaXNoZWQiLCJyIiwiWERvbWFpblJlcXVlc3QiLCJvbmFib3J0Iiwib25sb2FkZW5kIiwiYnVpbGRfdXJsIiwiZWVlIiwic3RhY2t0cmFjZSIsImVsIiwiZWFjaCIsImV0eXBlIiwicmFwZnVuIiwiY2FuY2VsQnViYmxlIiwicmV0dXJuVmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImF0dGFjaEV2ZW50IiwiYXR0ciIsImF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIiQiLCJnZXRFbGVtZW50QnlJZCIsImVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjc3MiLCJlbGVtZW50Iiwic3R5bGVzIiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwiZ2V0X2htYWNfU0hBMjU2IiwiQ3J5cHRvSlMiLCJDUkVBVEVfUFVCTlVCIiwiZGIiLCJobWFjX1NIQTI1NiIsIldTIiwic2RrX2ZhbWlseSIsIlNFTEYiLCJQTiIsIlBOX0FQSSIsIlBObWVzc2FnZSIsInN1cHBsYW50IiwiY2giLCJub3Rlc3QiLCJscyIsIl9kYXRhIiwiY29va2llIiwiUmVnRXhwIiwidW5iaW5kIiwiZmlyZSIsInNlY3VyZSIsInV1aWQiLCJncmVwIiwidW5pcXVlIiwidXBkYXRlciIsIk5PVyIsImdlbmVyYXRlX2NoYW5uZWxfbGlzdCIsImNoYW5uZWxzIiwibm9wcmVzZW5jZSIsInV0aWxzIiwic29ydCIsImdlbmVyYXRlX2NoYW5uZWxfZ3JvdXBfbGlzdCIsImNoYW5uZWxfZ3JvdXBzIiwiY2hhbm5lbF9ncm91cCIsIlJFQURZIiwiUkVBRFlfQlVGRkVSIiwiYXBucyIsImFwcyIsImFsZXJ0IiwiYmFkZ2UiLCJzb3VuZCIsImV4Y2x1ZGUxIiwiZXhjbHVkZSIsImdldFB1Ym51Yk1lc3NhZ2UiLCJfcHJlcGFyZUNsaWVudElkZW50aWZpZXIiLCJTREtfRkFNSUxZIiwiUEFSVE5FUl9JRCIsIlNES19WRVIiLCJfZ2V0X3VybF9wYXJhbXMiLCJwYXJhbXMiLCJwbnNkayIsIl9vYmplY3RfdG9fa2V5X2xpc3QiLCJfb2JqZWN0X3RvX2tleV9saXN0X3NvcnRlZCIsIl9nZXRfcGFtX3NpZ25faW5wdXRfZnJvbV9wYXJhbXMiLCJzaSIsInBhbUVuY29kZSIsInZhbGlkYXRlX3ByZXNlbmNlX2hlYXJ0YmVhdCIsImhlYXJ0YmVhdCIsImN1cl9oZWFydGJlYXQiLCJQUkVTRU5DRV9IQl9USFJFU0hPTEQiLCJQUkVTRU5DRV9IQl9ERUZBVUxUIiwiZW5jcnlwdCIsIkNJUEhFUl9LRVkiLCJfcHJlc2VuY2VfaGVhcnRiZWF0IiwiUFJFU0VOQ0VfSEJfVElNRU9VVCIsIlBSRVNFTkNFX0hCX0lOVEVSVkFMIiwiQ0hBTk5FTFMiLCJDSEFOTkVMX0dST1VQUyIsIlBSRVNFTkNFX0hCX1JVTk5JTkciLCJTRUNPTkQiLCJzdGFydF9wcmVzZW5jZV9oZWFydGJlYXQiLCJOT19XQUlUX0ZPUl9QRU5ESU5HIiwiUFVCX1FVRVVFIiwic2VuZGluZyIsImV4ZWN1dGVSZXF1ZXN0IiwiZWFjaF9jaGFubmVsX2dyb3VwIiwiY291bnQiLCJjaGFuZyIsImVhY2hfY2hhbm5lbCIsImNoYW4iLCJfaW52b2tlX2NhbGxiYWNrIiwiY2FsbGJhY2tfZGF0YSIsIl9pbnZva2VfZXJyb3IiLCJyZXF1ZXN0Q29uZmlnIiwib3BlcmF0aW9uVHlwZSIsInRpbWVzdGFtcCIsInJlcXVlc3REYXRhIiwiU0VDUkVUX0tFWSIsInNpZ25JbnB1dCIsIlNVQlNDUklCRV9LRVkiLCJQVUJMSVNIX0tFWSIsIm5ld1BhdGgiLCJzaWduYXR1cmUiLCJDUiIsInVybDEiLCJqc29ucCIsImpzb25wX2NiIiwiQVVUSF9LRVkiLCJTVERfT1JJR0lOIiwiX3BvbGxfb25saW5lIiwiX2lzX29ubGluZSIsIl9yZXNldF9vZmZsaW5lIiwiX3BvbGxfdGltZXIiLCJfcG9sbF9vbmxpbmUyIiwiVElNRV9DSEVDSyIsImRldGVjdF90aW1lX2RldGxhIiwiX3BvbGxfdGltZXIyIiwiS0VFUEFMSVZFIiwiU1VCX1JFQ0VJVkVSIiwiZGV0ZWN0X2xhdGVuY3kiLCJ0dCIsImFkanVzdGVkX3RpbWUiLCJybm93IiwiVElNRV9EUklGVCIsImNiIiwidGltZSIsImNhbGN1bGF0ZSIsInB0aW1lIiwibGF0ZW5jeSIsInN0aW1lIiwiU1VCX1dJTkRPV0lORyIsIkRFRl9XSU5ET1dJTkciLCJTVUJfVElNRU9VVCIsIkRFRl9TVUJfVElNRU9VVCIsIkRFRl9LRUVQQUxJVkUiLCJOT0xFQVZFIiwiU1NMIiwiT1JJR0lOIiwibmV4dG9yaWdpbiIsIlNVQl9PUklHSU4iLCJDT05ORUNUIiwiQ0xPQUsiLCJTVUJfQ0FMTEJBQ0siLCJTVUJfQ0hBTk5FTCIsIlNVQl9SRVNUT1JFIiwiVElNRVRPS0VOIiwiUkVTVU1FRCIsIlNUQVRFIiwiUFJFU0VOQ0VfSEIiLCJDT01QQVRJQkxFXzM1IiwiVVVJRCIsIlVTRV9JTlNUQU5DRUlEIiwiSU5TVEFOQ0VJRCIsInNodXRkb3duIiwidXNlX3NlbmRfYmVhY29uIiwic2VuZEJlYWNvbiIsIkxFQVZFIiwiYmxvY2tpbmciLCJhdXRoX2tleSIsIlBSRVNFTkNFX1NVRkZJWCIsInVybF9zdHJpbmciLCJidWlsZFVSTCIsImFjdGlvbiIsIkxFQVZFX0dST1VQIiwic2V0X3Jlc3VtZWQiLCJyZXN1bWVkIiwiZ2V0X2NpcGhlcl9rZXkiLCJzZXRfY2lwaGVyX2tleSIsInJhd19lbmNyeXB0IiwicmF3X2RlY3J5cHQiLCJnZXRfaGVhcnRiZWF0Iiwic2V0X2hlYXJ0YmVhdCIsImhlYXJ0YmVhdF9pbnRlcnZhbCIsImdldF9oZWFydGJlYXRfaW50ZXJ2YWwiLCJzZXRfaGVhcnRiZWF0X2ludGVydmFsIiwiZ2V0X3ZlcnNpb24iLCJnZXRHY21NZXNzYWdlT2JqZWN0IiwiZ2V0QXBuc01lc3NhZ2VPYmplY3QiLCJfYWRkX3BhcmFtIiwibmFtZXNwYWNlIiwibnNfY2giLCJjbG9hayIsIm5zX2NoX2EiLCJjaGFubmVsX2dyb3VwX2xpc3RfZ3JvdXBzIiwiY2hhbm5lbF9ncm91cF9saXN0X2NoYW5uZWxzIiwiY2hhbm5lbF9ncm91cF9yZW1vdmVfY2hhbm5lbCIsImNoYW5uZWxfZ3JvdXBfcmVtb3ZlX2dyb3VwIiwiY2hhbm5lbF9ncm91cF9hZGRfY2hhbm5lbCIsImNoYW5uZWxfZ3JvdXBfY2xvYWsiLCJjaGFubmVsX2dyb3VwX2xpc3RfbmFtZXNwYWNlcyIsImNoYW5uZWxfZ3JvdXBfcmVtb3ZlX25hbWVzcGFjZSIsImhpc3RvcnkiLCJjaXBoZXJfa2V5IiwiaW5jbHVkZV90b2tlbiIsInN0cmluZ19tc2dfdG9rZW4iLCJwYXlsb2FkIiwibWVzc2FnZXMiLCJkZWNyeXB0ZWRfbWVzc2FnZXMiLCJuZXdfbWVzc2FnZSIsInRpbWV0b2tlbiIsInJlcGxheSIsImRlc3RpbmF0aW9uIiwic3RvcmUiLCJyZXBsaWNhdGUiLCJhZGRfbXNnIiwic3RvcmVfaW5faGlzdG9yeSIsImNoYW5uZWxBcmciLCJjaGFubmVsR3JvdXBBcmciLCJleGlzdGluZ0NoYW5uZWxzIiwicHJlc2VuY2VDaGFubmVscyIsIkNCX0NBTExFRCIsImNoYW5uZWxHcm91cHMiLCJleGlzdGluZ0NoYW5uZWxHcm91cHMiLCJwcmVzZW5jZUNoYW5uZWxHcm91cHMiLCJjaGFubmVsR3JvdXAiLCJfdGVzdF9jb25uZWN0aW9uIiwid2luZG93aW5nIiwiZGlzY29ubmVjdGVkIiwicmVjb25uZWN0IiwiZGlzY29ubmVjdCIsIl9jb25uZWN0Iiwic3QiLCJzdWJfdGltZW91dCIsIlNVQl9FUlJPUiIsImlkbGVjYiIsImNvbm5lY3RlZCIsImJhY2tmaWxsIiwibmV4dF9jYWxsYmFjayIsImNoYW5uZWxzMiIsImxpc3QyIiwiY2hhbm5lbDIiLCJjaG9iaiIsImRlZmF1bHRfY2hvYmoiLCJkZWNyeXB0ZWRfbXNnIiwibm9oZXJlc3luYyIsInNldHRpbmdzIiwiaGVyZSIsInVpZCIsIm9jY3VwYW5jeSIsImhlcmVfbm93IiwiZGVidWciLCJ1dWlkcyIsIndoZXJlX25vdyIsInR0bCIsIm9wZXJhdGlvbiIsIm1vYmlsZV9nd19wcm92aXNpb24iLCJvcCIsImd3X3R5cGUiLCJkZXZpY2VfaWQiLCJhdWRpdCIsInJldm9rZSIsInNldF91dWlkIiwiZ2V0X3V1aWQiLCJnZXRfc3Vic2NyaWJlZF9jaGFubmVscyIsInByZXNlbmNlX2hlYXJ0YmVhdCIsInN0b3BfdGltZXJzIiwiZ2VuZXJhdGVVVUlEIiwiZWFjaC1jaGFubmVsIiwib2ZmbGluZSIsInBhY2thZ2VKU09OIiwiZGVmYXVsdENvbmZpZ3VyYXRpb24iLCJvcmkiLCJmYWlsb3ZlciIsIlVSTEJJVCIsInByZWZlckdsb2JhbCIsImF1dGhvciIsImNvbnRyaWJ1dG9ycyIsImVtYWlsIiwiYmluIiwic2NyaXB0cyIsIm1haW4iLCJyZXBvc2l0b3J5Iiwia2V5d29yZHMiLCJkZXBlbmRlbmNpZXMiLCJhZ2VudGtlZXBhbGl2ZSIsImxvZGFzaCIsIm5vQW5hbHl6ZSIsImRldkRlcGVuZGVuY2llcyIsImNoYWkiLCJlc2xpbnQiLCJlc2xpbnQtY29uZmlnLWFpcmJuYiIsImVzbGludC1wbHVnaW4tZmxvd3R5cGUiLCJlc2xpbnQtcGx1Z2luLW1vY2hhIiwiZXNsaW50LXBsdWdpbi1yZWFjdCIsImZsb3ctYmluIiwiZ3J1bnQiLCJncnVudC1jb250cmliLWNsZWFuIiwiZ3J1bnQtY29udHJpYi1jb3B5IiwiZ3J1bnQtY29udHJpYi11Z2xpZnkiLCJncnVudC1lbnYiLCJncnVudC1lc2xpbnQiLCJncnVudC1mbG93IiwiZ3J1bnQta2FybWEiLCJncnVudC1tb2NoYS1pc3RhbmJ1bCIsImdydW50LXRleHQtcmVwbGFjZSIsImdydW50LXdlYnBhY2siLCJpbXBvcnRzLWxvYWRlciIsImlzcGFydGEiLCJqc29uLWxvYWRlciIsImthcm1hIiwia2FybWEtY2hhaSIsImthcm1hLW1vY2hhIiwia2FybWEtcGhhbnRvbWpzLWxhdW5jaGVyIiwia2FybWEtc3BlYy1yZXBvcnRlciIsImxvYWQtZ3J1bnQtdGFza3MiLCJtb2NoYSIsIm5vY2siLCJub2RlLXV1aWQiLCJub2RldW5pdCIsInBoYW50b21qcy1wcmVidWlsdCIsInByb3h5cXVpcmUiLCJzaW5vbiIsInVnbGlmeS1qcyIsInVuZGVyc2NvcmUiLCJ3ZWJwYWNrIiwid2VicGFjay1kZXYtc2VydmVyIiwiYnVuZGxlRGVwZW5kZW5jaWVzIiwibGljZW5zZSIsImVuZ2luZSIsImZpbGVzIiwiUEFSQU1TQklUIiwiZiIsInVybENvbXBvbmVudHMiLCJ1cmxQYXJhbXMiLCJ2YWx1ZVN0ciIsInJhdGUiLCJydW5uaXQiLCJmaW4iLCJSRVBMIiwid2FpdCIsIlNIQTI1NiIsInBhcnNlX29wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsImFsbG93ZWRLZXlFbmNvZGluZ3MiLCJhbGxvd2VkS2V5TGVuZ3RocyIsImFsbG93ZWRNb2RlcyIsImRlY29kZV9rZXkiLCJnZXRfcGFkZGVkX2tleSIsImdldF9tb2RlIiwiZ2V0X2l2IiwiaXYiLCJoZXhfbWVzc2FnZSIsImVuY3J5cHRlZEhleEFycmF5IiwiYmFzZV82NF9lbmNyeXB0ZWQiLCJiaW5hcnlfZW5jIiwianNvbl9wbGFpbiIsImNpcGhlcnRleHQiLCJwbGFpbnRleHQiLCJsaWIiLCJCYXNlIiwiZXh0ZW5kIiwibWl4SW4iLCIkc3VwZXIiLCJXb3JkQXJyYXkiLCJ3b3JkcyIsInNpZ0J5dGVzIiwiY2xhbXAiLCJjZWlsIiwiZW5jIiwiSGV4IiwiTGF0aW4xIiwiVXRmOCIsInVuZXNjYXBlIiwiQnVmZmVyZWRCbG9ja0FsZ29yaXRobSIsIl9uRGF0YUJ5dGVzIiwiX2FwcGVuZCIsIl9wcm9jZXNzIiwiYmxvY2tTaXplIiwiX21pbkJ1ZmZlclNpemUiLCJfZG9Qcm9jZXNzQmxvY2siLCJIYXNoZXIiLCJjZmciLCJfZG9SZXNldCIsInVwZGF0ZSIsImZpbmFsaXplIiwiX2RvRmluYWxpemUiLCJfY3JlYXRlSGVscGVyIiwiX2NyZWF0ZUhtYWNIZWxwZXIiLCJITUFDIiwiYWxnbyIsInNxcnQiLCJfaGFzaCIsIkhtYWNTSEEyNTYiLCJfaGFzaGVyIiwiX29LZXkiLCJfaUtleSIsIkJhc2U2NCIsIl9tYXAiLCJzaW4iLCJNRDUiLCJ6IiwiQSIsIkIiLCJDIiwiRCIsIkUiLCJIbWFjTUQ1IiwiRXZwS0RGIiwia2V5U2l6ZSIsImhhc2hlciIsImNvbXB1dGUiLCJDaXBoZXIiLCJjcmVhdGVFbmNyeXB0b3IiLCJfRU5DX1hGT1JNX01PREUiLCJjcmVhdGVEZWNyeXB0b3IiLCJfREVDX1hGT1JNX01PREUiLCJfeGZvcm1Nb2RlIiwiaXZTaXplIiwiU3RyZWFtQ2lwaGVyIiwiX2l2IiwiX3ByZXZCbG9jayIsIkJsb2NrQ2lwaGVyTW9kZSIsIkVuY3J5cHRvciIsIkRlY3J5cHRvciIsIl9jaXBoZXIiLCJwcm9jZXNzQmxvY2siLCJlbmNyeXB0QmxvY2siLCJkZWNyeXB0QmxvY2siLCJDQkMiLCJwYWQiLCJQa2NzNyIsInVucGFkIiwiQmxvY2tDaXBoZXIiLCJwYWRkaW5nIiwiX21vZGUiLCJDaXBoZXJQYXJhbXMiLCJmb3JtYXR0ZXIiLCJPcGVuU1NMIiwic2FsdCIsIlNlcmlhbGl6YWJsZUNpcGhlciIsImFsZ29yaXRobSIsIl9wYXJzZSIsImtkZiIsImV4ZWN1dGUiLCJQYXNzd29yZEJhc2VkQ2lwaGVyIiwiRiIsIkciLCJIIiwiQUVTIiwiX25Sb3VuZHMiLCJfa2V5U2NoZWR1bGUiLCJfaW52S2V5U2NoZWR1bGUiLCJfZG9DcnlwdEJsb2NrIiwiRUNCIiwicHJvdG9jb2xzIiwiYml0cyIsInB1Ymxpc2hfa2V5Iiwid2FzQ2xlYW4iLCJ1c2VkIiwiQXNzZXJ0aW9uRXJyb3IiLCJ1dGlsIiwidXNlIiwiYXNzZXJ0aW9uIiwic2hvdWxkIiwiYXNzZXJ0IiwiZXhjbHVkZVByb3BzIiwiZXhjbHVkZXMiLCJfcHJvcHMiLCJzc2YiLCJwcm9wcyIsInNob3dEaWZmIiwiY2FsbGVlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsImV4cGVjdFR5cGVzIiwiZ2V0TWVzc2FnZSIsImdldEFjdHVhbCIsIm9iakRpc3BsYXkiLCJ0cmFuc2ZlckZsYWdzIiwiZXFsIiwiZ2V0UGF0aFZhbHVlIiwiZ2V0UGF0aEluZm8iLCJoYXNQcm9wZXJ0eSIsImdldE5hbWUiLCJhZGRQcm9wZXJ0eSIsIm92ZXJ3cml0ZVByb3BlcnR5Iiwib3ZlcndyaXRlTWV0aG9kIiwiYWRkQ2hhaW5hYmxlTWV0aG9kIiwib3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kIiwibmVnYXRlIiwiZXhwciIsImZsYWdzIiwiX19mbGFncyIsImdldFR5cGUiLCJvYmplY3RUeXBlUmVnZXhwIiwiTGlicmFyeSIsInRlc3RzIiwib2YiLCJkZWZpbmUiLCJ0eXBlcyIsImFydCIsIm9yIiwic29tZSIsImV4cGVjdGVkIiwiZmxhZ01zZyIsIl9vYmoiLCJzaG93SGlkZGVuIiwiZGVwdGgiLCJjb2xvcnMiLCJjdHgiLCJzZWVuIiwic3R5bGl6ZSIsImZvcm1hdFZhbHVlIiwicmVjdXJzZVRpbWVzIiwicHJpbWl0aXZlIiwiZm9ybWF0UHJpbWl0aXZlIiwiaXNET01FbGVtZW50Iiwib3V0ZXJIVE1MIiwieG1sVmVyc2lvbiIsInhtbFNlcmlhbGl6ZXIiLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJucyIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnROUyIsImFwcGVuZENoaWxkIiwiY2xvbmVOb2RlIiwiaHRtbCIsImlubmVySFRNTCIsInZpc2libGVLZXlzIiwiZ2V0RW51bWVyYWJsZVByb3BlcnRpZXMiLCJnZXRQcm9wZXJ0aWVzIiwiaXNFcnJvciIsIm5hbWVTdWZmaXgiLCJpc1JlZ0V4cCIsImlzRGF0ZSIsInRvVVRDU3RyaW5nIiwiZm9ybWF0RXJyb3IiLCJicmFjZXMiLCJmb3JtYXRBcnJheSIsImZvcm1hdFByb3BlcnR5IiwicmVkdWNlVG9TaW5nbGVTdHJpbmciLCJzaW1wbGUiLCJfX2xvb2t1cEdldHRlcl9fIiwiX19sb29rdXBTZXR0ZXJfXyIsImxpbmUiLCJudW1MaW5lc0VzdCIsImN1ciIsImFyIiwib2JqZWN0VG9TdHJpbmciLCJyZSIsIkhUTUxFbGVtZW50Iiwibm9kZU5hbWUiLCJmdW5jIiwiZ2V0UHJvdG90eXBlT2YiLCJ0cnVuY2F0ZVRocmVzaG9sZCIsImluY2x1ZGVTdGFjayIsImluY2x1ZGVBbGwiLCJkZWVwRXF1YWwiLCJzYW1lVmFsdWUiLCJkYXRlRXF1YWwiLCJyZWdleHBFcXVhbCIsImJ1ZmZlckVxdWFsIiwiYXJndW1lbnRzRXF1YWwiLCJ0eXBlRXF1YWwiLCJvYmplY3RFcXVhbCIsIml0ZXJhYmxlRXF1YWwiLCJpc1ZhbHVlIiwia2EiLCJrYiIsImV4IiwibmF0aXZlcyIsIltvYmplY3QgQXJyYXldIiwiW29iamVjdCBSZWdFeHBdIiwiW29iamVjdCBGdW5jdGlvbl0iLCJbb2JqZWN0IEFyZ3VtZW50c10iLCJbb2JqZWN0IERhdGVdIiwicGFyc2VQYXRoIiwibUFyciIsInBhcnNlRmxvYXQiLCJfZ2V0UGF0aFZhbHVlIiwiZXhpc3RzIiwibGl0ZXJhbHMiLCJudW1iZXIiLCJvdCIsImdldHRlciIsIm9sZF9zc2ZpIiwiX2dldCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImhhc1Byb3RvU3VwcG9ydCIsImV4Y2x1ZGVOYW1lcyIsImNoYWluaW5nQmVoYXZpb3IiLCJjaGFpbmFibGVCZWhhdmlvciIsIl9fbWV0aG9kcyIsImFzc2VydGVyTmFtZXMiLCJhc3NlcnRlck5hbWUiLCJwZCIsIl9jaGFpbmluZ0JlaGF2aW9yIiwiX2NoYWkiLCJBc3NlcnRpb24iLCJuZWdhdGVNc2ciLCJfYWN0dWFsIiwiYW4iLCJhcnRpY2xlIiwiaW5jbHVkZUNoYWluaW5nQmVoYXZpb3IiLCJpbmNsdWRlIiwic3Vic2V0IiwiY2hlY2tBcmd1bWVudHMiLCJhc3NlcnRFcXVhbCIsImFzc2VydEVxbCIsImFzc2VydEFib3ZlIiwiaGF2ZSIsImFzc2VydExlYXN0IiwiYXNzZXJ0QmVsb3ciLCJhc3NlcnRNb3N0IiwiYXNzZXJ0SW5zdGFuY2VPZiIsImFzc2VydE93blByb3BlcnR5IiwiYXNzZXJ0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZGVzY3JpcHRvciIsImFjdHVhbERlc2NyaXB0b3IiLCJhc3NlcnRMZW5ndGhDaGFpbiIsImFzc2VydExlbmd0aCIsImFzc2VydE1hdGNoIiwiYXNzZXJ0S2V5cyIsIm1peGVkQXJnc01zZyIsImFueSIsImludGVyc2VjdGlvbiIsImZpbHRlciIsImV2ZXJ5IiwiYXNzZXJ0VGhyb3dzIiwiZXJyTXNnIiwiaXMiLCJkZXNpcmVkRXJyb3IiLCJ0aHJvd25FcnJvciIsImFjdHVhbGx5R290IiwiZXhwZWN0ZWRUaHJvd24iLCJyZXNwb25kVG8iLCJpdHNlbGYiLCJzYXRpc2Z5IiwibWF0Y2hlciIsImNsb3NlVG8iLCJpc1N1YnNldE9mIiwic3VwZXJzZXQiLCJjbXAiLCJlbGVtIiwiZWxlbTIiLCJvbmVPZiIsImJlIiwiYXNzZXJ0Q2hhbmdlcyIsImluaXRpYWwiLCJhc3NlcnRJbmNyZWFzZXMiLCJhc3NlcnREZWNyZWFzZXMiLCJjaGFpbiIsInJhbmdlIiwiaXNEZWVwIiwicGF0aEluZm8iLCJpc0V4dGVuc2libGUiLCJpc1NlYWxlZCIsImlzRnJvemVuIiwib3BlcmF0b3IiLCJsb2FkU2hvdWxkIiwic2hvdWxkR2V0dGVyIiwiQm9vbGVhbiIsInZhbHVlT2YiLCJzaG91bGRTZXR0ZXIiLCJ2YWwxIiwidmFsMiIsIlRocm93IiwiZXJydCIsImVycnMiLCJleGlzdCIsIm5vdCIsIlNob3VsZCIsImV4cHJlc3MiLCJlcnJtc2ciLCJpc09rIiwiaXNOb3RPayIsImFjdCIsImV4cCIsIm5vdEVxdWFsIiwic3RyaWN0RXF1YWwiLCJub3RTdHJpY3RFcXVhbCIsIm5vdERlZXBFcXVhbCIsImlzQWJvdmUiLCJhYnYiLCJhYm92ZSIsImlzQXRMZWFzdCIsImF0bHN0IiwibGVhc3QiLCJpc0JlbG93IiwiYmx3IiwiYmVsb3ciLCJpc0F0TW9zdCIsImF0bXN0IiwibW9zdCIsImlzVHJ1ZSIsImlzTm90VHJ1ZSIsImlzRmFsc2UiLCJpc05vdEZhbHNlIiwiaXNOb3ROdWxsIiwiaXNOb3ROYU4iLCJpc0RlZmluZWQiLCJpc05vdEZ1bmN0aW9uIiwiaXNOb3RPYmplY3QiLCJpc05vdEFycmF5IiwiaXNOb3RTdHJpbmciLCJpc05vdE51bWJlciIsImlzQm9vbGVhbiIsImlzTm90Qm9vbGVhbiIsInR5cGVPZiIsIm5vdFR5cGVPZiIsImluc3RhbmNlT2YiLCJub3RJbnN0YW5jZU9mIiwiaW5jIiwibm90SW5jbHVkZSIsIm5vdE1hdGNoIiwibm90UHJvcGVydHkiLCJkZWVwUHJvcGVydHkiLCJkZWVwIiwibm90RGVlcFByb3BlcnR5IiwicHJvcGVydHlWYWwiLCJwcm9wZXJ0eU5vdFZhbCIsImRlZXBQcm9wZXJ0eVZhbCIsImRlZXBQcm9wZXJ0eU5vdFZhbCIsImxlbmd0aE9mIiwiYXNzZXJ0RXJyIiwiZG9lc05vdFRocm93IiwiYXBwcm94aW1hdGVseSIsInNhbWVNZW1iZXJzIiwic2V0MSIsInNldDIiLCJzYW1lIiwic2FtZURlZXBNZW1iZXJzIiwiaW5jbHVkZU1lbWJlcnMiLCJpbmNsdWRlRGVlcE1lbWJlcnMiLCJpbkxpc3QiLCJjaGFuZ2VzIiwiY2hhbmdlIiwiZG9lc05vdENoYW5nZSIsImluY3JlYXNlcyIsImluY3JlYXNlIiwiZG9lc05vdEluY3JlYXNlIiwiZGVjcmVhc2VzIiwiZGVjcmVhc2UiLCJkb2VzTm90RGVjcmVhc2UiLCJpZkVycm9yIiwiZXh0ZW5zaWJsZSIsImlzTm90RXh0ZW5zaWJsZSIsImlzTm90U2VhbGVkIiwiZnJvemVuIiwiaXNOb3RGcm96ZW4iLCJhbGlhcyIsImFzIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFTSSxFQUFRRCxFQUFTSCxJRTVDaEMsU0FBQVcsR0FBQSxZQTRJQSxTQUFBQyxHQUFBQyxHQUNBQyxFQUFBQyxPQUFBRixHQUFBRyxHQUFBQyxJQUFBQyxNQUFBLHdDQTVJQSxHQUlBQyxHQUNBQyxFQUxBQyxFQUFBckIsRUFBQSxHQUNBc0IsRUFBQXRCLEVBQUEsR0FDQWMsRUFBQWQsRUFBQSxJQUNBdUIsRUFBQXZCLEVBQUEsS0FHQXdCLEVBQUEsR0FBQUMsS0FDQUQs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LEVBQUFsWSxHQUFBM0MsR0FBQWttRSxHQUFBbUcsWUF3QkExUixFQUFBMlIsZ0JBQUEsU0FBQXp4RCxFQUFBbFksR0FDQSxHQUFBdWdFLEdBQUFyb0QsRUFBQWxZLEdBQUEzQyxHQUFBMG5FLElBQUF4QixHQUFBbUcsWUF1QkExUixFQUFBaU0sU0FBQSxTQUFBL3JELEVBQUFsWSxHQUNBLEdBQUF1Z0UsR0FBQXJvRCxFQUFBbFksR0FBQTNDLEdBQUFrbUUsR0FBQS81RCxRQWtCQXd1RCxFQUFBNFIsWUFBQSxTQUFBMXhELEVBQUFsWSxHQUNBLEdBQUF1Z0UsR0FBQXJvRCxFQUFBbFksR0FBQTNDLEdBQUEwbkUsSUFBQXhCLEdBQUEvNUQsUUFvQkF3dUQsRUFBQWtNLFNBQUEsU0FBQWhzRCxFQUFBbFksR0FDQSxHQUFBdWdFLEdBQUFyb0QsRUFBQWxZLEdBQUEzQyxHQUFBa21FLEdBQUFzRyxRQWtCQTdSLEVBQUE4UixZQUFBLFNBQUE1eEQsRUFBQWxZLEdBQ0EsR0FBQXVnRSxHQUFBcm9ELEVBQUFsWSxHQUFBM0MsR0FBQTBuRSxJQUFBeEIsR0FBQXNHOzs7QUFPQSxRQUFBRSxHQUFBamxFLEVBQUFrbEUsR0FFQSxNQURBaFMsR0FBQWdTLEdBQUFoUyxFQUFBbHpELEdBQ0FpbEUsR0FFQSxhQUNBLG1CQUNBLGtCQUNBLGtCQUNBLDZCQUNBLG1DQUNBLHFCQUNBLDJCQUNBLHFCQUNBLDZCdEdrcm5CTSxTQUFTdHRFLEVBQVFEIiwiZmlsZSI6InRlc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oX19kaXJuYW1lKSB7XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBjb25maWdfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdHZhciBDbGllbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdHZhciBjaGFpXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblx0dmFyIGZzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMik7XG5cdHZhciBjb25maWc7XG5cdHZhciBjbGllbnQ7XG5cdHZhciBhWWVhckFnbyA9IG5ldyBEYXRlKCk7XG5cdGFZZWFyQWdvLnNldEZ1bGxZZWFyKGFZZWFyQWdvLmdldEZ1bGxZZWFyKCkgLSAxKTtcblx0YmVmb3JlKGZ1bmN0aW9uICgpIHtcblx0ICAgIC8vIHJ1bnMgYmVmb3JlIGFsbCB0ZXN0cyBpbiB0aGlzIGJsb2NrXG5cdCAgICByZXR1cm4gY29uZmlnXzEuZGVmYXVsdC50aGVuKGZ1bmN0aW9uIChjb25mKSB7XG5cdCAgICAgICAgY29uZmlnID0gY29uZjtcblx0ICAgICAgICBjbGllbnQgPSBuZXcgQ2xpZW50XzEuZGVmYXVsdChjb25maWcuYXBwKTtcblx0ICAgICAgICByZXR1cm4gY2xpZW50LmxvZ2luKGNvbmZpZy51c2VyKTtcblx0ICAgIH0pO1xuXHR9KTtcblx0ZGVzY3JpYmUoXCJBY2NvdW50XCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGl0KFwiR2V0IEFjY291bnQgaW5mb1wiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZ2V0KCkudGhlbihmdW5jdGlvbiAoYWNjb3VudCkge1xuXHQgICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGFjY291bnQpLnRvLmNvbnRhaW4ua2V5cyhbXCJpZFwiLCBcInVyaVwiLCBcIm1haW5OdW1iZXJcIiwgXCJvcGVyYXRvclwiLCBcInNlcnZpY2VJbmZvXCIsIFwic2V0dXBXaXphcmRTdGF0ZVwiLCBcInN0YXR1c1wiXSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICAgIGl0KFwiR2V0IEFjY291bnQgaW5mbyB3aXRoIGlkIG5vdCBleGlzdHMgc2hvdWxkIHJldHVybiA0MDRcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBjbGllbnQuYWNjb3VudChcImFjY291bnRJZE5vdEV4aXN0XCIpLmdldCgpLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZS5hcGlSZXNwb25zZS5yZXNwb25zZSgpLnN0YXR1cykudG8uZXEoNDA0KTtcblx0ICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChlLmFwaVJlc3BvbnNlLmpzb24oKS5lcnJvckNvZGUpLnRvLmVxdWFsKFwiSW52YWxpZFBhcmFtZXRlclwiKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHR9KTtcblx0ZGVzY3JpYmUoXCJFeHRlbnNpb25cIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGV4dGVuc2lvblByb3BzID0gW1widXJpXCIsIFwiaWRcIiwgXCJleHRlbnNpb25OdW1iZXJcIiwgXCJjb250YWN0XCIsIFwibmFtZVwiLCBcInR5cGVcIiwgXCJzdGF0dXNcIiwgXCJwZXJtaXNzaW9uc1wiLCBcInByb2ZpbGVJbWFnZVwiXTtcblx0ICAgIGl0KFwiZ2V0IGN1cnJlbnQgZXh0ZW5zaW9uXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gY2xpZW50LmFjY291bnQoKS5leHRlbnNpb24oKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChleHQpIHtcblx0ICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChleHQpLnRvLmNvbnRhaW4ua2V5cyhleHRlbnNpb25Qcm9wcyk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICAgIGl0KFwiR2V0IGV4dGVuc2lvbiBsaXN0XCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gY2xpZW50LmFjY291bnQoKS5leHRlbnNpb24oKS5saXN0KCkudGhlbihmdW5jdGlvbiAoZXh0cykge1xuXHQgICAgICAgICAgICBzaG91bGRCZVBhZ2luZ1Jlc3VsdChleHRzKTtcblx0ICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChleHRzLnJlY29yZHNbMF0pLnRvLmhhcy5rZXlzKGV4dGVuc2lvblByb3BzKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgICAgaXQoXCJVbmlvbiB0eXBlIHBhcmFtZXRlcnMsIHVwZGF0ZSBleHRlbnNpb24gaW5mb1wiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCkucHV0KHsgc3RhdHVzOiBcIkVuYWJsZWRcIiB9KS50aGVuKGZ1bmN0aW9uIChleHQpIHtcblx0ICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChleHQpLnRvLmNvbnRhaW4ua2V5cyhleHRlbnNpb25Qcm9wcyk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0fSk7XG5cdGRlc2NyaWJlKFwiQmluYXJ5IHJlc3BvbnNlXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGl0KFwiR2V0IG1lc3NhZ2UgY29udGVudCBhcyBiaW5hcnlcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBleHQgPSBjbGllbnQuYWNjb3VudCgpLmV4dGVuc2lvbigpO1xuXHQgICAgICAgIHJldHVybiBleHQubWVzc2FnZVN0b3JlKCkubGlzdCh7IGRhdGVGcm9tOiBhWWVhckFnby50b0lTT1N0cmluZygpIH0pLnRoZW4oZnVuY3Rpb24gKG1zZ3MpIHtcblx0ICAgICAgICAgICAgaWYgKG1zZ3MucmVjb3Jkcy5sZW5ndGggPD0gMCkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbWVzc2FnZXMgZm91bmQgZm9yIHRoaXMgZXh0ZW5zaW9uLlwiKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gbXNncy5yZWNvcmRzWzBdO1xuXHQgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICAgICAgICByZXR1cm4gZXh0Lm1lc3NhZ2VTdG9yZShtc2cuaWQpLmNvbnRlbnQobXNnLmF0dGFjaG1lbnRzWzBdLmlkKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChhdGNoKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBleHBlY3QoYXRjaC5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKSkudG8uaGFzLnN0cmluZyhcInRleHQvcGxhaW5cIik7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdCAgICBpdChcIkdldCByZWNvcmRpbmcgY29udGVudFwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGV4dCA9IGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCk7XG5cdCAgICAgICAgcmV0dXJuIGV4dC5jYWxsTG9nKCkubGlzdCh7IGRhdGVGcm9tOiBhWWVhckFnby50b0lTT1N0cmluZygpLCB3aXRoUmVjb3JkaW5nOiB0cnVlIH0pLnRoZW4oZnVuY3Rpb24gKGNhbGxMb2dzKSB7XG5cdCAgICAgICAgICAgIGlmIChjYWxsTG9ncy5yZWNvcmRzLmxlbmd0aCA8PSAwKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZWNvcmRpbmdzIGZvdW5kLlwiKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gY2FsbExvZ3MucmVjb3Jkc1swXS5yZWNvcmRpbmc7XG5cdCAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVjb3JkaW5nKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBjbGllbnQuYWNjb3VudCgpLnJlY29yZGluZyhyZWNvcmRpbmcuaWQgKyBcIlwiKS5jb250ZW50KCkuZ2V0KCkudGhlbihmdW5jdGlvbiAoY29udGVudCkge1xuXHQgICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChjb250ZW50LmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpKS50by5oYXMuc3RyaW5nKFwiYXVkaW8vbXBlZ1wiKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0fSk7XG5cdHZhciBpbWdQYXRoID0gX19kaXJuYW1lICsgXCIvcmVzL2Jhbm5lcl9pbmRleF9sb2dnZWQucG5nXCI7XG5cdGRlc2NyaWJlKFwiQmluYXJ5IHJlcXVlc3RcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFmc18xLmNyZWF0ZVJlYWRTdHJlYW0pIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBpdChcIlB1dCBwcm9maWxlIGltYWdlLCBpbnB1dCBiaW5hcnksIHJlc3BvbnNlIGlzIGVtcHR5LlwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCkucHJvZmlsZUltYWdlKCkucHV0KGZzXzEuY3JlYXRlUmVhZFN0cmVhbShpbWdQYXRoKSk7XG5cdCAgICB9KTtcblx0ICAgIGl0KFwiUG9zdCBwcm9maWxlIGltYWdlLCBpbnB1dCBiaW5hcnksIHJlc3BvbnNlIGlzIGVtcHR5LlwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCkucHJvZmlsZUltYWdlKCkucG9zdChmc18xLmNyZWF0ZVJlYWRTdHJlYW0oaW1nUGF0aCkpO1xuXHQgICAgfSk7XG5cdH0pO1xuXHRkZXNjcmliZShcIkZheFwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpdChcInNlbmQgZmF4LCBwb3N0IGZvcm0gZGF0YVwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGF0dGFjaG1lbnRzO1xuXHQgICAgICAgIGlmIChmc18xLmNyZWF0ZVJlYWRTdHJlYW0pIHtcblx0ICAgICAgICAgICAgYXR0YWNobWVudHMgPSBbXCJUZXh0IGF0dGVudG1lbnQgZm9yIHRlc3QuIEZvbGxvd2VkIGJ5IGEgcG5nIHBpY3R1cmUuXCIsIGZzXzEuY3JlYXRlUmVhZFN0cmVhbShpbWdQYXRoKV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBhdHRhY2htZW50cyA9IFtcIlRlc3QgZmF4IHRlc3Qgc2VudCBmcm9tIGJyb3dzZXIsIFwiICsgbmF2aWdhdG9yLnVzZXJBZ2VudF07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBjbGllbnQuYWNjb3VudCgpLmV4dGVuc2lvbigpLmZheCgpLnBvc3QoeyB0bzogW3sgcGhvbmVOdW1iZXI6IFwiKzE2NTA3NDExNjE1XCIgfV0gfSwgYXR0YWNobWVudHMpO1xuXHQgICAgfSk7XG5cdCAgICBpdChcInNlbmQgZmF4IGZhaWwsIGVtcHR5IHBhcmFtZXRlclwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCkuZmF4KCkucG9zdCh7fSwgW10pLnRoZW4oZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzaG91bGQgbm90IHNlbmQuXCIpO1xuXHQgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZS5hcGlSZXNwb25zZS5qc29uKCkuZXJyb3JDb2RlKS50by5lcShcIkludmFsaWRQYXJhbWV0ZXJcIik7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0fSk7XG5cdGRlc2NyaWJlKFwiQ2FsbCBMb2dcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgaXQoXCJHZXQgY2FsbCBsb2dcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBjbGllbnQuYWNjb3VudCgpLmV4dGVuc2lvbigpLmNhbGxMb2coKS5saXN0KHsgZGF0ZUZyb206IGFZZWFyQWdvLnRvSVNPU3RyaW5nKCksIHBlclBhZ2U6IDIgfSkudGhlbihmdW5jdGlvbiAoY2FsbExvZ3MpIHtcblx0ICAgICAgICAgICAgc2hvdWxkQmVQYWdpbmdSZXN1bHQoY2FsbExvZ3MpO1xuXHQgICAgICAgICAgICBpZiAoY2FsbExvZ3MucmVjb3Jkcy5sZW5ndGggPCAxKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKFwiTm8gY2FsbCBsb2cgaXRlbXNcIik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChjYWxsTG9ncy5yZWNvcmRzWzBdKS50by5oYXMua2V5cyhbXCJ1cmlcIiwgXCJpZFwiLCBcInNlc3Npb25JZFwiLCBcInN0YXJ0VGltZVwiLCBcImR1cmF0aW9uXCIsIFwidHlwZVwiLCBcImRpcmVjdGlvblwiLCBcImFjdGlvblwiLCBcInJlc3VsdFwiLCBcInRvXCIsIFwiZnJvbVwiXSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICAgIGl0KFwiZGVsZXRlIHRvZGF5J3MgY2FsbCBsb2dcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBjbGllbnQuYWNjb3VudCgpLmV4dGVuc2lvbigpLmNhbGxMb2coKS5kZWxldGUoKTtcblx0ICAgIH0pO1xuXHR9KTtcblx0ZGVzY3JpYmUoXCJwb3N0XCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGl0KFwic2VuZCBzbXMsIHBvc3QgcGxhaW4gb2JqZWN0XCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gY2xpZW50LmFjY291bnQoKS5leHRlbnNpb24oKS5zbXMoKS5wb3N0KHtcblx0ICAgICAgICAgICAgZnJvbTogeyBwaG9uZU51bWJlcjogY29uZmlnLnVzZXIudXNlcm5hbWUgfSxcblx0ICAgICAgICAgICAgdGV4dDogXCJ0ZXN0IHNtcyB0ZXh0IGNvbnRlbnQuXCIsXG5cdCAgICAgICAgICAgIHRvOiBbeyBwaG9uZU51bWJlcjogXCIrMTY1MDc0MTE2MTVcIiB9XSxcblx0ICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzbXMpIHtcblx0ICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChzbXMpLnRvLmhhcy5rZXlzKFtcInVyaVwiLCBcImlkXCIsIFwidG9cIiwgXCJmcm9tXCIsIFwidHlwZVwiLCBcImNyZWF0aW9uVGltZVwiLCBcInJlYWRTdGF0dXNcIiwgXCJwcmlvcml0eVwiLCBcImF0dGFjaG1lbnRzXCIsIFwiZGlyZWN0aW9uXCIsIFwiYXZhaWxhYmlsaXR5XCIsIFwic3ViamVjdFwiLCBcIm1lc3NhZ2VTdGF0dXNcIiwgXCJzbXNTZW5kaW5nQXR0ZW1wdHNDb3VudFwiLCBcImNvbnZlcnNhdGlvbklkXCIsIFwiY29udmVyc2F0aW9uXCIsIFwibGFzdE1vZGlmaWVkVGltZVwiXSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICAgIGl0KFwic2VuZCBzbXMsIHdpdGhvdXQgZnJvbVwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCkuc21zKCkucG9zdCh7IHRleHQ6IFwidGVzdCBzbXMgdGV4dCBjb250ZW50LlwiLCB0bzogW3sgcGhvbmVOdW1iZXI6IFwiKzE2NTA3NDExNjE1XCIgfV0gfSkudGhlbihmdW5jdGlvbiAoc21zKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInNob3VsZCBmYWlsXCIpO1xuXHQgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZS5hcGlSZXNwb25zZS5qc29uKCkuZXJyb3JDb2RlKS50by5lcShcIkludmFsaWRQYXJhbWV0ZXJcIik7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0fSk7XG5cdGZ1bmN0aW9uIHNob3VsZEJlUGFnaW5nUmVzdWx0KGxpc3QpIHtcblx0ICAgIGNoYWlfMS5leHBlY3QobGlzdCkudG8uaGFzLmtleXMoW1wibmF2aWdhdGlvblwiLCBcInBhZ2luZ1wiLCBcInJlY29yZHNcIiwgXCJ1cmlcIl0pO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgXCIvXCIpKVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHtcInVzZSBzdHJpY3RcIjtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGZldGNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0dmFyIGF1dGhEYXRhVXJsID0gXCIvZGF0YS9yYy1hdXRoLmpzb25cIjtcblx0aWYgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmICFwcm9jZXNzW1wiYnJvd3NlclwiXSkge1xuXHQgICAgYXV0aERhdGFVcmwgPSBcImh0dHA6Ly9sb2NhbGhvc3RcIiArIGF1dGhEYXRhVXJsO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gZmV0Y2goYXV0aERhdGFVcmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcmVzLmpzb24oKTsgfSk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygyKSkpXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHRmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0gKCkpXG5cdGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG5cdCAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9IGNhdGNoKGUpe1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG5cdCAgICAgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3Jcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdFxuXHR9XG5cdGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcblx0ICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpe1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cblx0ICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0XG5cdH1cblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXHRcblx0ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuXHQgICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgfVxuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcblx0ICAgIGlmIChkcmFpbmluZykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZShsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0fVxuXHRcblx0cHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG5cdCAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuXHQgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5cdGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuXHQgICAgdGhpcy5mdW4gPSBmdW47XG5cdCAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdH1cblx0SXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG5cdH07XG5cdHByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5cdHByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5cdHByb2Nlc3MuZW52ID0ge307XG5cdHByb2Nlc3MuYXJndiA9IFtdO1xuXHRwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcblx0cHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHRwcm9jZXNzLm9uID0gbm9vcDtcblx0cHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3Mub25jZSA9IG5vb3A7XG5cdHByb2Nlc3Mub2ZmID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcblx0cHJvY2Vzcy5lbWl0ID0gbm9vcDtcblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xuXHRwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0cHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHJlcXVpcmU7LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIGdsb2JhbCkgey8qIVxuXHQgKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG5cdCAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG5cdCAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2Vcblx0ICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAdmVyc2lvbiAgIDMuMy4xXG5cdCAqL1xuXHRcblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0ICAgICB0cnVlID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHQgICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0ICAgIChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG5cdH0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcblx0ICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG5cdH1cblx0XG5cdHZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDtcblx0aWYgKCFBcnJheS5pc0FycmF5KSB7XG5cdCAgX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0ICB9O1xuXHR9IGVsc2Uge1xuXHQgIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0fVxuXHRcblx0dmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblx0XG5cdHZhciBsZW4gPSAwO1xuXHR2YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkO1xuXHR2YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuXHQgIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcblx0ICBxdWV1ZVtsZW4gKyAxXSA9IGFyZztcblx0ICBsZW4gKz0gMjtcblx0ICBpZiAobGVuID09PSAyKSB7XG5cdCAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG5cdCAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuXHQgICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuXHQgICAgaWYgKGN1c3RvbVNjaGVkdWxlckZuKSB7XG5cdCAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHNjaGVkdWxlRmx1c2goKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuXHQgIGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0QXNhcChhc2FwRm4pIHtcblx0ICBhc2FwID0gYXNhcEZuO1xuXHR9XG5cdFxuXHR2YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xuXHR2YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG5cdHZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG5cdHZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICh7fSkudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXHRcblx0Ly8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcblx0dmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblx0XG5cdC8vIG5vZGVcblx0ZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG5cdCAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG5cdCAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvLyB2ZXJ0eFxuXHRmdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2ZXJ0eE5leHQoZmx1c2gpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG5cdCAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7XG5cdCAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG5cdCAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcblx0ICB9O1xuXHR9XG5cdFxuXHQvLyB3ZWIgd29ya2VyXG5cdGZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuXHQgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHtcblx0ICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcblx0ICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcblx0ICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG5cdGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcblx0ICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldO1xuXHQgICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblx0XG5cdCAgICBjYWxsYmFjayhhcmcpO1xuXHRcblx0ICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuXHQgICAgcXVldWVbaSArIDFdID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0XG5cdCAgbGVuID0gMDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgciA9IHJlcXVpcmU7XG5cdCAgICB2YXIgdmVydHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHQgICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcblx0ICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBzY2hlZHVsZUZsdXNoID0gdW5kZWZpbmVkO1xuXHQvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuXHRpZiAoaXNOb2RlKSB7XG5cdCAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7XG5cdH0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcblx0ICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xuXHR9IGVsc2UgaWYgKGlzV29ya2VyKSB7XG5cdCAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7XG5cdH0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIFwiZnVuY3Rpb25cIiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcblx0fSBlbHNlIHtcblx0ICBzY2hlZHVsZUZsdXNoID0gdXNlU2V0VGltZW91dCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG5cdCAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7XG5cdFxuXHQgIHZhciBwYXJlbnQgPSB0aGlzO1xuXHRcblx0ICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblx0XG5cdCAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcblx0ICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcblx0ICB9XG5cdFxuXHQgIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXHRcblx0ICBpZiAoX3N0YXRlKSB7XG5cdCAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgY2FsbGJhY2sgPSBfYXJndW1lbnRzW19zdGF0ZSAtIDFdO1xuXHQgICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcblx0ICAgICAgfSk7XG5cdCAgICB9KSgpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGNoaWxkO1xuXHR9XG5cdFxuXHQvKipcblx0ICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG5cdCAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgIHJlc29sdmUoMSk7XG5cdCAgfSk7XG5cdFxuXHQgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG5cdCAgICAvLyB2YWx1ZSA9PT0gMVxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cdFxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblx0XG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIHZhbHVlID09PSAxXG5cdCAgfSk7XG5cdCAgYGBgXG5cdFxuXHQgIEBtZXRob2QgcmVzb2x2ZVxuXHQgIEBzdGF0aWNcblx0ICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG5cdCAgYHZhbHVlYFxuXHQqL1xuXHRmdW5jdGlvbiByZXNvbHZlKG9iamVjdCkge1xuXHQgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblx0XG5cdCAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG5cdCAgICByZXR1cm4gb2JqZWN0O1xuXHQgIH1cblx0XG5cdCAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG5cdCAgX3Jlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcblx0ICByZXR1cm4gcHJvbWlzZTtcblx0fVxuXHRcblx0dmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHR2YXIgUEVORElORyA9IHZvaWQgMDtcblx0dmFyIEZVTEZJTExFRCA9IDE7XG5cdHZhciBSRUpFQ1RFRCA9IDI7XG5cdFxuXHR2YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblx0XG5cdGZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHtcblx0ICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcblx0ICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIHByb21pc2UudGhlbjtcblx0ICB9IGNhdGNoIChlcnJvcikge1xuXHQgICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcblx0ICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuXHQgIHRyeSB7XG5cdCAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIGU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcblx0ICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG5cdCAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG5cdCAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgaWYgKHNlYWxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBzZWFsZWQgPSB0cnVlO1xuXHQgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG5cdCAgICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgIGlmIChzZWFsZWQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0XG5cdCAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cdFxuXHQgICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcblx0ICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0ICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XG5cdCAgICB9XG5cdCAgfSwgcHJvbWlzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG5cdCAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG5cdCAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuXHQgIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuXHQgICAgX3JlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICByZXR1cm4gX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCkge1xuXHQgIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJCA9PT0gdGhlbiAmJiBtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUpIHtcblx0ICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAodGhlbiQkID09PSBHRVRfVEhFTl9FUlJPUikge1xuXHQgICAgICBfcmVqZWN0KHByb21pc2UsIEdFVF9USEVOX0VSUk9SLmVycm9yKTtcblx0ICAgIH0gZWxzZSBpZiAodGhlbiQkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQpKSB7XG5cdCAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG5cdCAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICBfcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcblx0ICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG5cdCAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcblx0ICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcblx0ICB9XG5cdFxuXHQgIHB1Ymxpc2gocHJvbWlzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcblx0ICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuXHQgIHByb21pc2UuX3N0YXRlID0gRlVMRklMTEVEO1xuXHRcblx0ICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG5cdCAgICBhc2FwKHB1Ymxpc2gsIHByb21pc2UpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3JlamVjdChwcm9taXNlLCByZWFzb24pIHtcblx0ICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcblx0ICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cdFxuXHQgIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuXHQgIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuXHQgIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoO1xuXHRcblx0ICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXHRcblx0ICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuXHQgIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcblx0ICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cdFxuXHQgIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuXHQgICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG5cdCAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG5cdCAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblx0XG5cdCAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgdmFyIGNoaWxkID0gdW5kZWZpbmVkLFxuXHQgICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCxcblx0ICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG5cdCAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuXHQgICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cdFxuXHQgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBFcnJvck9iamVjdCgpIHtcblx0ICB0aGlzLmVycm9yID0gbnVsbDtcblx0fVxuXHRcblx0dmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXHRcblx0ZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuXHQgICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcblx0ICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcblx0ICAgICAgdmFsdWUgPSB1bmRlZmluZWQsXG5cdCAgICAgIGVycm9yID0gdW5kZWZpbmVkLFxuXHQgICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXG5cdCAgICAgIGZhaWxlZCA9IHVuZGVmaW5lZDtcblx0XG5cdCAgaWYgKGhhc0NhbGxiYWNrKSB7XG5cdCAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXHRcblx0ICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG5cdCAgICAgIGZhaWxlZCA9IHRydWU7XG5cdCAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG5cdCAgICAgIHZhbHVlID0gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICAgIF9yZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhbHVlID0gZGV0YWlsO1xuXHQgICAgc3VjY2VlZGVkID0gdHJ1ZTtcblx0ICB9XG5cdFxuXHQgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuXHQgICAgLy8gbm9vcFxuXHQgIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG5cdCAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG5cdCAgICAgIF9yZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuXHQgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHtcblx0ICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG5cdCAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuXHQgIHRyeSB7XG5cdCAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuXHQgICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuXHQgICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBfcmVqZWN0KHByb21pc2UsIGUpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGlkID0gMDtcblx0ZnVuY3Rpb24gbmV4dElkKCkge1xuXHQgIHJldHVybiBpZCsrO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG5cdCAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XG5cdCAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7XG5cdCAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuXHQgIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG5cdCAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuXHQgIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcblx0XG5cdCAgaWYgKCF0aGlzLnByb21pc2VbUFJPTUlTRV9JRF0pIHtcblx0ICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cdCAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblx0ICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblx0XG5cdCAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXHRcblx0ICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcblx0ICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XG5cdCAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcblx0ICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBfcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xuXHQgIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xuXHR9O1xuXHRcblx0RW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG5cdCAgdmFyIF9pbnB1dCA9IHRoaXMuX2lucHV0O1xuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICB0aGlzLl9lYWNoRW50cnkoX2lucHV0W2ldLCBpKTtcblx0ICB9XG5cdH07XG5cdFxuXHRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG5cdCAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuXHQgIHZhciByZXNvbHZlJCQgPSBjLnJlc29sdmU7XG5cdFxuXHQgIGlmIChyZXNvbHZlJCQgPT09IHJlc29sdmUpIHtcblx0ICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXHRcblx0ICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcblx0ICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblx0ICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG5cdCAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UpIHtcblx0ICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTtcblx0ICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuXHQgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJCkge1xuXHQgICAgICAgIHJldHVybiByZXNvbHZlJCQoZW50cnkpO1xuXHQgICAgICB9KSwgaSk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQoZW50cnkpLCBpKTtcblx0ICB9XG5cdH07XG5cdFxuXHRFbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24gKHN0YXRlLCBpLCB2YWx1ZSkge1xuXHQgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXHRcblx0ICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcblx0ICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXHRcblx0ICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcblx0ICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcblx0ICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICB9XG5cdH07XG5cdFxuXHRFbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gKHByb21pc2UsIGkpIHtcblx0ICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cdFxuXHQgIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcblx0ICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXG5cdCAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuXHQgIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuXHQgIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cblx0XG5cdCAgRXhhbXBsZTpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG5cdCAgbGV0IHByb21pc2UyID0gcmVzb2x2ZSgyKTtcblx0ICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xuXHQgIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXHRcblx0ICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG5cdCAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBhbGxgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2Vcblx0ICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3Ncblx0ICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cdFxuXHQgIEV4YW1wbGU6XG5cdFxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuXHQgIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcblx0ICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKFwiM1wiKSk7XG5cdCAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cdFxuXHQgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcblx0ICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuXHQgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdCAgICAvLyBlcnJvci5tZXNzYWdlID09PSBcIjJcIlxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBAbWV0aG9kIGFsbFxuXHQgIEBzdGF0aWNcblx0ICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzXG5cdCAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG5cdCAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW5cblx0ICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cblx0ICBAc3RhdGljXG5cdCovXG5cdGZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XG5cdCAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGVcblx0ICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cdFxuXHQgIEV4YW1wbGU6XG5cdFxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcblx0ICAgIH0sIDIwMCk7XG5cdCAgfSk7XG5cdFxuXHQgIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuXHQgICAgfSwgMTAwKTtcblx0ICB9KTtcblx0XG5cdCAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdCAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuXHQgICAgLy8gd2FzIHJlc29sdmVkLlxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG5cdCAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuXHQgIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcblx0ICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcblx0ICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXHRcblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG5cdCAgICB9LCAyMDApO1xuXHQgIH0pO1xuXHRcblx0ICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7XG5cdCAgICB9LCAxMDApO1xuXHQgIH0pO1xuXHRcblx0ICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG5cdCAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG5cdCAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxuXHRcblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSlcblx0ICBgYGBcblx0XG5cdCAgQG1ldGhvZCByYWNlXG5cdCAgQHN0YXRpY1xuXHQgIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcblx0ICBwcm9taXNlIHRvIHNldHRsZS5cblx0Ki9cblx0ZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XG5cdCAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXHRcblx0ICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcblx0ICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuXHQgICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG5cdCAgICB9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuXHQgIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblx0XG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblx0ICB9KTtcblx0XG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXHRcblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblx0XG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcblx0ICB9KTtcblx0ICBgYGBcblx0XG5cdCAgQG1ldGhvZCByZWplY3Rcblx0ICBAc3RhdGljXG5cdCAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLlxuXHQqL1xuXHRmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG5cdCAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXHQgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXHQgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICByZXR1cm4gcHJvbWlzZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcblx0ICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5lZWRzTmV3KCkge1xuXHQgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG5cdH1cblx0XG5cdC8qKlxuXHQgIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcblx0ICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuXHQgIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuXHQgIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXHRcblx0ICBUZXJtaW5vbG9neVxuXHQgIC0tLS0tLS0tLS0tXG5cdFxuXHQgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG5cdCAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuXHQgIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cblx0ICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cblx0ICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG5cdCAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cdFxuXHQgIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblx0XG5cdCAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcblx0ICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG5cdCAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cdFxuXHQgIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuXHQgIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3Ncblx0ICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcblx0ICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG5cdCAgaXRzZWxmIGZ1bGZpbGwuXG5cdFxuXHRcblx0ICBCYXNpYyBVc2FnZTpcblx0ICAtLS0tLS0tLS0tLS1cblx0XG5cdCAgYGBganNcblx0ICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgLy8gb24gc3VjY2Vzc1xuXHQgICAgcmVzb2x2ZSh2YWx1ZSk7XG5cdFxuXHQgICAgLy8gb24gZmFpbHVyZVxuXHQgICAgcmVqZWN0KHJlYXNvbik7XG5cdCAgfSk7XG5cdFxuXHQgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgLy8gb24gZnVsZmlsbG1lbnRcblx0ICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgIC8vIG9uIHJlamVjdGlvblxuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBBZHZhbmNlZCBVc2FnZTpcblx0ICAtLS0tLS0tLS0tLS0tLS1cblx0XG5cdCAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuXHQgIGBYTUxIdHRwUmVxdWVzdGBzLlxuXHRcblx0ICBgYGBqc1xuXHQgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcblx0ICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG5cdCAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuXHQgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXHQgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblx0ICAgICAgeGhyLnNlbmQoKTtcblx0XG5cdCAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG5cdCAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuXHQgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG5cdCAgICAvLyBvbiBmdWxmaWxsbWVudFxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgLy8gb24gcmVqZWN0aW9uXG5cdCAgfSk7XG5cdCAgYGBgXG5cdFxuXHQgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cdFxuXHQgIGBgYGpzXG5cdCAgUHJvbWlzZS5hbGwoW1xuXHQgICAgZ2V0SlNPTignL3Bvc3RzJyksXG5cdCAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuXHQgIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcblx0ICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cblx0ICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblx0XG5cdCAgICByZXR1cm4gdmFsdWVzO1xuXHQgIH0pO1xuXHQgIGBgYFxuXHRcblx0ICBAY2xhc3MgUHJvbWlzZVxuXHQgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG5cdCAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgIEBjb25zdHJ1Y3RvclxuXHQqL1xuXHRmdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG5cdCAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuXHQgIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cdFxuXHQgIGlmIChub29wICE9PSByZXNvbHZlcikge1xuXHQgICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcblx0ICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcblx0ICB9XG5cdH1cblx0XG5cdFByb21pc2UuYWxsID0gYWxsO1xuXHRQcm9taXNlLnJhY2UgPSByYWNlO1xuXHRQcm9taXNlLnJlc29sdmUgPSByZXNvbHZlO1xuXHRQcm9taXNlLnJlamVjdCA9IHJlamVjdDtcblx0UHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gc2V0U2NoZWR1bGVyO1xuXHRQcm9taXNlLl9zZXRBc2FwID0gc2V0QXNhcDtcblx0UHJvbWlzZS5fYXNhcCA9IGFzYXA7XG5cdFxuXHRQcm9taXNlLnByb3RvdHlwZSA9IHtcblx0ICBjb25zdHJ1Y3RvcjogUHJvbWlzZSxcblx0XG5cdCAgLyoqXG5cdCAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcblx0ICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG5cdCAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cdCAgXG5cdCAgICBgYGBqc1xuXHQgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuXHQgICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuXHQgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcblx0ICAgIH0pO1xuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBDaGFpbmluZ1xuXHQgICAgLS0tLS0tLS1cblx0ICBcblx0ICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG5cdCAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG5cdCAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblx0ICBcblx0ICAgIGBgYGpzXG5cdCAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgcmV0dXJuIHVzZXIubmFtZTtcblx0ICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuXHQgICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcblx0ICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuXHQgICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2Bcblx0ICAgIH0pO1xuXHQgIFxuXHQgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcblx0ICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG5cdCAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAvLyBuZXZlciByZWFjaGVkXG5cdCAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG5cdCAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuXHQgICAgfSk7XG5cdCAgICBgYGBcblx0ICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuXHQgIFxuXHQgICAgYGBganNcblx0ICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG5cdCAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAvLyBuZXZlciByZWFjaGVkXG5cdCAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAvLyBuZXZlciByZWFjaGVkXG5cdCAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG5cdCAgICB9KTtcblx0ICAgIGBgYFxuXHQgIFxuXHQgICAgQXNzaW1pbGF0aW9uXG5cdCAgICAtLS0tLS0tLS0tLS1cblx0ICBcblx0ICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG5cdCAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG5cdCAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuXHQgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cdCAgXG5cdCAgICBgYGBqc1xuXHQgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcblx0ICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG5cdCAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcblx0ICAgIH0pO1xuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cblx0ICBcblx0ICAgIGBgYGpzXG5cdCAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuXHQgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcblx0ICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuXHQgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG5cdCAgICB9KTtcblx0ICAgIGBgYFxuXHQgIFxuXHQgICAgU2ltcGxlIEV4YW1wbGVcblx0ICAgIC0tLS0tLS0tLS0tLS0tXG5cdCAgXG5cdCAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdCAgXG5cdCAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICBsZXQgcmVzdWx0O1xuXHQgIFxuXHQgICAgdHJ5IHtcblx0ICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuXHQgICAgICAvLyBzdWNjZXNzXG5cdCAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAvLyBmYWlsdXJlXG5cdCAgICB9XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIEVycmJhY2sgRXhhbXBsZVxuXHQgIFxuXHQgICAgYGBganNcblx0ICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuXHQgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIFByb21pc2UgRXhhbXBsZTtcblx0ICBcblx0ICAgIGBgYGphdmFzY3JpcHRcblx0ICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdCAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgIC8vIGZhaWx1cmVcblx0ICAgIH0pO1xuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBBZHZhbmNlZCBFeGFtcGxlXG5cdCAgICAtLS0tLS0tLS0tLS0tLVxuXHQgIFxuXHQgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXHQgIFxuXHQgICAgYGBgamF2YXNjcmlwdFxuXHQgICAgbGV0IGF1dGhvciwgYm9va3M7XG5cdCAgXG5cdCAgICB0cnkge1xuXHQgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG5cdCAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG5cdCAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgIC8vIGZhaWx1cmVcblx0ICAgIH1cblx0ICAgIGBgYFxuXHQgIFxuXHQgICAgRXJyYmFjayBFeGFtcGxlXG5cdCAgXG5cdCAgICBgYGBqc1xuXHQgIFxuXHQgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXHQgIFxuXHQgICAgfVxuXHQgIFxuXHQgICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcblx0ICBcblx0ICAgIH1cblx0ICBcblx0ICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuXHQgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICAgIC8vIGZhaWx1cmVcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuXHQgICAgICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcblx0ICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBjYXRjaChlcnJvcikge1xuXHQgICAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBQcm9taXNlIEV4YW1wbGU7XG5cdCAgXG5cdCAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICBmaW5kQXV0aG9yKCkuXG5cdCAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuXHQgICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcblx0ICAgICAgICAvLyBmb3VuZCBib29rc1xuXHQgICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICAgIH0pO1xuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBAbWV0aG9kIHRoZW5cblx0ICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG5cdCAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG5cdCAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgICBAcmV0dXJuIHtQcm9taXNlfVxuXHQgICovXG5cdCAgdGhlbjogdGhlbixcblx0XG5cdCAgLyoqXG5cdCAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG5cdCAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuXHQgIFxuXHQgICAgYGBganNcblx0ICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG5cdCAgICB9XG5cdCAgXG5cdCAgICAvLyBzeW5jaHJvbm91c1xuXHQgICAgdHJ5IHtcblx0ICAgICAgZmluZEF1dGhvcigpO1xuXHQgICAgfSBjYXRjaChyZWFzb24pIHtcblx0ICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICAgIH1cblx0ICBcblx0ICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcblx0ICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgICAgfSk7XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIEBtZXRob2QgY2F0Y2hcblx0ICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG5cdCAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgICBAcmV0dXJuIHtQcm9taXNlfVxuXHQgICovXG5cdCAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG5cdCAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBwb2x5ZmlsbCgpIHtcblx0ICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICBsb2NhbCA9IGdsb2JhbDtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgbG9jYWwgPSBzZWxmO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cdFxuXHQgICAgaWYgKFApIHtcblx0ICAgICAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBwcm9taXNlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZTtcblx0fVxuXHRcblx0cG9seWZpbGwoKTtcblx0Ly8gU3RyYW5nZSBjb21wYXQuLlxuXHRQcm9taXNlLnBvbHlmaWxsID0gcG9seWZpbGw7XG5cdFByb21pc2UuUHJvbWlzZSA9IFByb21pc2U7XG5cdFxuXHRyZXR1cm4gUHJvbWlzZTtcblx0XG5cdH0pKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygyKSwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiAoaWdub3JlZCkgKi9cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHRoZSB3aGF0d2ctZmV0Y2ggcG9seWZpbGwgaW5zdGFsbHMgdGhlIGZldGNoKCkgZnVuY3Rpb25cblx0Ly8gb24gdGhlIGdsb2JhbCBvYmplY3QgKHdpbmRvdyBvciBzZWxmKVxuXHQvL1xuXHQvLyBSZXR1cm4gdGhhdCBhcyB0aGUgZXhwb3J0IGZvciB1c2UgaW4gV2VicGFjaywgQnJvd3NlcmlmeSBldGMuXG5cdF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdG1vZHVsZS5leHBvcnRzID0gc2VsZi5mZXRjaC5iaW5kKHNlbGYpO1xuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQoZnVuY3Rpb24oc2VsZikge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgaWYgKHNlbGYuZmV0Y2gpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIHN1cHBvcnQgPSB7XG5cdCAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG5cdCAgICBpdGVyYWJsZTogJ1N5bWJvbCcgaW4gc2VsZiAmJiAnaXRlcmF0b3InIGluIFN5bWJvbCxcblx0ICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBuZXcgQmxvYigpXG5cdCAgICAgICAgcmV0dXJuIHRydWVcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgIH1cblx0ICAgIH0pKCksXG5cdCAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuXHQgICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG5cdCAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcblx0ICAgIH1cblx0ICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZScpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWVcblx0ICB9XG5cdFxuXHQgIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG5cdCAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcblx0ICAgIHZhciBpdGVyYXRvciA9IHtcblx0ICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuXHQgICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcblx0ICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBpdGVyYXRvclxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcblx0ICAgIHRoaXMubWFwID0ge31cblx0XG5cdCAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcblx0ICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG5cdCAgICAgIH0sIHRoaXMpXG5cdFxuXHQgICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG5cdCAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG5cdCAgICAgIH0sIHRoaXMpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuXHQgICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcblx0ICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG5cdCAgICB2YXIgbGlzdCA9IHRoaXMubWFwW25hbWVdXG5cdCAgICBpZiAoIWxpc3QpIHtcblx0ICAgICAgbGlzdCA9IFtdXG5cdCAgICAgIHRoaXMubWFwW25hbWVdID0gbGlzdFxuXHQgICAgfVxuXHQgICAgbGlzdC5wdXNoKHZhbHVlKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICB2YXIgdmFsdWVzID0gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cblx0ICAgIHJldHVybiB2YWx1ZXMgPyB2YWx1ZXNbMF0gOiBudWxsXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICByZXR1cm4gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gfHwgW11cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHJldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShub3JtYWxpemVOYW1lKG5hbWUpKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcblx0ICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gW25vcm1hbGl6ZVZhbHVlKHZhbHVlKV1cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuXHQgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5tYXApLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICB0aGlzLm1hcFtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcylcblx0ICAgICAgfSwgdGhpcylcblx0ICAgIH0sIHRoaXMpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgaXRlbXMgPSBbXVxuXHQgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2gobmFtZSkgfSlcblx0ICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkgeyBpdGVtcy5wdXNoKHZhbHVlKSB9KVxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKFtuYW1lLCB2YWx1ZV0pIH0pXG5cdCAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG5cdCAgfVxuXHRcblx0ICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuXHQgICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcblx0ICAgIGlmIChib2R5LmJvZHlVc2VkKSB7XG5cdCAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcblx0ICAgIH1cblx0ICAgIGJvZHkuYm9keVVzZWQgPSB0cnVlXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpXG5cdCAgICAgIH1cblx0ICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZWplY3QocmVhZGVyLmVycm9yKVxuXHQgICAgICB9XG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcblx0ICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG5cdCAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcblx0ICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuXHQgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcblx0ICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG5cdCAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIEJvZHkoKSB7XG5cdCAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2Vcblx0XG5cdCAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcblx0ICAgICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG5cdCAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuXHQgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5XG5cdCAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcblx0ICAgICAgfSBlbHNlIGlmICghYm9keSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgLy8gT25seSBzdXBwb3J0IEFycmF5QnVmZmVycyBmb3IgUE9TVCBtZXRob2QuXG5cdCAgICAgICAgLy8gUmVjZWl2aW5nIEFycmF5QnVmZmVycyBoYXBwZW5zIHZpYSBCbG9icywgaW5zdGVhZC5cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG5cdCAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuXHQgICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcblx0ICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICBpZiAocmVqZWN0ZWQpIHtcblx0ICAgICAgICAgIHJldHVybiByZWplY3RlZFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKVxuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuXHQgICAgICAgIGlmIChyZWplY3RlZCkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcblx0ICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICByZXR1cm4gcmVqZWN0ZWQgPyByZWplY3RlZCA6IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG5cdCAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG5cdCAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuXHQgICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuXHQgICAgcmV0dXJuIChtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSkgPyB1cGNhc2VkIDogbWV0aG9kXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXHQgICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcblx0ICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSkge1xuXHQgICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG5cdCAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuXHQgICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuXHQgICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2Rcblx0ICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuXHQgICAgICBpZiAoIWJvZHkpIHtcblx0ICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG5cdCAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXRcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuXHQgICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG5cdCAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcblx0ICAgIH1cblx0ICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuXHQgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG5cdCAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXHRcblx0ICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuXHQgICAgfVxuXHQgICAgdGhpcy5faW5pdEJvZHkoYm9keSlcblx0ICB9XG5cdFxuXHQgIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG5cdCAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG5cdCAgICBib2R5LnRyaW0oKS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcblx0ICAgICAgaWYgKGJ5dGVzKSB7XG5cdCAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKVxuXHQgICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSlcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICAgIHJldHVybiBmb3JtXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBoZWFkZXJzKHhocikge1xuXHQgICAgdmFyIGhlYWQgPSBuZXcgSGVhZGVycygpXG5cdCAgICB2YXIgcGFpcnMgPSAoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKS50cmltKCkuc3BsaXQoJ1xcbicpXG5cdCAgICBwYWlycy5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlcikge1xuXHQgICAgICB2YXIgc3BsaXQgPSBoZWFkZXIudHJpbSgpLnNwbGl0KCc6Jylcblx0ICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG5cdCAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJzonKS50cmltKClcblx0ICAgICAgaGVhZC5hcHBlbmQoa2V5LCB2YWx1ZSlcblx0ICAgIH0pXG5cdCAgICByZXR1cm4gaGVhZFxuXHQgIH1cblx0XG5cdCAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXHRcblx0ICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuXHQgICAgaWYgKCFvcHRpb25zKSB7XG5cdCAgICAgIG9wdGlvbnMgPSB7fVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuXHQgICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuXHQgICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuXHQgICAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0XG5cdCAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuXHQgICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuXHQgICAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG5cdCAgfVxuXHRcblx0ICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXHRcblx0ICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcblx0ICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcblx0ICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuXHQgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuXHQgICAgICB1cmw6IHRoaXMudXJsXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG5cdCAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuXHQgICAgcmV0dXJuIHJlc3BvbnNlXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblx0XG5cdCAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuXHQgICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuXHQgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG5cdCAgfVxuXHRcblx0ICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzXG5cdCAgc2VsZi5SZXF1ZXN0ID0gUmVxdWVzdFxuXHQgIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZVxuXHRcblx0ICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgdmFyIHJlcXVlc3Rcblx0ICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IGlucHV0XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblx0XG5cdCAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlVVJMKCkge1xuXHQgICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuXHQgICAgICAgICAgcmV0dXJuIHhoci5yZXNwb25zZVVSTFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gQXZvaWQgc2VjdXJpdHkgd2FybmluZ3Mgb24gZ2V0UmVzcG9uc2VIZWFkZXIgd2hlbiBub3QgYWxsb3dlZCBieSBDT1JTXG5cdCAgICAgICAgaWYgKC9eWC1SZXF1ZXN0LVVSTDovbS50ZXN0KHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpIHtcblx0ICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcblx0ICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuXHQgICAgICAgICAgaGVhZGVyczogaGVhZGVycyh4aHIpLFxuXHQgICAgICAgICAgdXJsOiByZXNwb25zZVVSTCgpXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG5cdCAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcblx0ICAgICAgfVxuXHRcblx0ICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblx0XG5cdCAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcblx0ICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoJ3Jlc3BvbnNlVHlwZScgaW4geGhyICYmIHN1cHBvcnQuYmxvYikge1xuXHQgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcblx0ICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcblx0ICAgICAgfSlcblx0XG5cdCAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG5cdCAgICB9KVxuXHQgIH1cblx0ICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxuXHR9KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcyk7XG5cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgdXJsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgQWNjb3VudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciBDbGllbnRJbmZvXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTtcblx0dmFyIE51bWJlclBvb2xfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuXHR2YXIgUmluZ2NlbnRyYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTtcblx0dmFyIENsaWVudCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBDbGllbnQob3B0cykge1xuXHQgICAgICAgIGlmIChvcHRzIGluc3RhbmNlb2YgUmluZ2NlbnRyYWwpIHtcblx0ICAgICAgICAgICAgdGhpcy5zZXJ2aWNlID0gb3B0cztcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIG9wdHMuc2VydmVyID0gb3B0cy5zZXJ2ZXIgfHwgU0VSVkVSX1BST0RVQ1RJT047XG5cdCAgICAgICAgICAgIHRoaXMuc2VydmljZSA9IG5ldyBSaW5nY2VudHJhbChvcHRzKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIEZJWE1FOiBBbGxvdyBhZGRpdGlvbmFsIG9wdGlvbnM6IGJyYW5kX2lkLCBkaXNwbGF5LCBwcm9tcHRlP1xuXHQgICAgICovXG5cdCAgICBDbGllbnQucHJvdG90eXBlLmxvZ2luVXJsID0gZnVuY3Rpb24gKG9wdHMpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLnBsYXRmb3JtKCkubG9naW5Vcmwob3B0cyk7XG5cdCAgICB9O1xuXHQgICAgQ2xpZW50LnByb3RvdHlwZS5sb2dpbiA9IGZ1bmN0aW9uIChvcHRzKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5wbGF0Zm9ybSgpLmxvZ2luKG9wdHMpO1xuXHQgICAgfTtcblx0ICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXV0aENvZGUgPSBmdW5jdGlvbiAoY2FsbGJhY2tVcmwpIHtcblx0ICAgICAgICB2YXIgcmVzID0gdXJsXzEucGFyc2UoY2FsbGJhY2tVcmwsIHRydWUpLnF1ZXJ5O1xuXHQgICAgICAgIHZhciBjb2RlID0gcmVzW1wiY29kZVwiXTtcblx0ICAgICAgICBpZiAoY29kZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gY29kZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAocmVzW1wiZXJyb3JfZGVzY3JpcHRpb25cIl0pIHtcblx0ICAgICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcihyZXNbXCJlcnJvcl9kZXNjcmlwdGlvblwiXSk7XG5cdCAgICAgICAgICAgIGVyci5uYW1lID0gcmVzW1wiZXJyb3JcIl07XG5cdCAgICAgICAgICAgIGVycltcImVycm9yc1wiXSA9IHJlc1tcImVycm9yc1wiXTtcblx0ICAgICAgICAgICAgdGhyb3cgZXJyO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBDbGllbnQucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLnBsYXRmb3JtKCkubG9nb3V0KCk7XG5cdCAgICB9O1xuXHQgICAgQ2xpZW50LnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldnROYW1lLCBoYW5kbGVyKSB7XG5cdCAgICAgICAgdGhpcy5zZXJ2aWNlLnBsYXRmb3JtKCkub24oZXZ0TmFtZSwgaGFuZGxlcik7XG5cdCAgICB9O1xuXHQgICAgQ2xpZW50LnByb3RvdHlwZS5jcmVhdGVTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5jcmVhdGVTdWJzY3JpcHRpb24oKTtcblx0ICAgIH07XG5cdCAgICAvKiogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvdmxlcyBpZiBhY2Nlc3MgdG9rZW4gaXMgdmFsaWQgb3IgcmVmcmVzaCB0b2tlbiBpcyB2YWxpZCwgYW5kIHJlZnJlc2ggdGhlIHRva2VuIGlmIG5lZWRlZC4gKi9cblx0ICAgIENsaWVudC5wcm90b3R5cGUuZW5zdXJlTG9nZ2VkSW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5wbGF0Zm9ybSgpLmVuc3VyZUxvZ2dlZEluKCk7XG5cdCAgICB9O1xuXHQgICAgQ2xpZW50LnByb3RvdHlwZS5hY2NvdW50ID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBBY2NvdW50XzEuZGVmYXVsdChudWxsLCBpZCwgdGhpcy5zZXJ2aWNlLnBsYXRmb3JtKCkpO1xuXHQgICAgfTtcblx0ICAgIENsaWVudC5wcm90b3R5cGUuY2xpZW50SW5mbyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENsaWVudEluZm9fMS5kZWZhdWx0KG51bGwsIG51bGwsIHRoaXMuc2VydmljZS5wbGF0Zm9ybSgpKTtcblx0ICAgIH07XG5cdCAgICBDbGllbnQucHJvdG90eXBlLm51bWJlclBvb2wgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBOdW1iZXJQb29sXzEuZGVmYXVsdChudWxsLCBudWxsLCB0aGlzLnNlcnZpY2UucGxhdGZvcm0oKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENsaWVudDtcblx0fSgpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDbGllbnQ7XG5cdGV4cG9ydHMuQ2xpZW50ID0gQ2xpZW50O1xuXHR2YXIgU0VSVkVSX1BST0RVQ1RJT04gPSBcImh0dHBzOi8vcGxhdGZvcm0ucmluZ2NlbnRyYWwuY29tXCI7XG5cdGV4cG9ydHMuU0VSVkVSX1BST0RVQ1RJT04gPSBTRVJWRVJfUFJPRFVDVElPTjtcblx0dmFyIFNFUlZFUl9TQU5EQk9YID0gXCJodHRwczovL3BsYXRmb3JtLmRldnRlc3QucmluZ2NlbnRyYWwuY29tXCI7XG5cdGV4cG9ydHMuU0VSVkVSX1NBTkRCT1ggPSBTRVJWRVJfU0FOREJPWDtcblx0Ly8gQXV0aCBldmVudHNcblx0dmFyIEVWRU5UX0xPR0lOX1NUQVJUID0gXCJiZWZvcmVMb2dpblwiO1xuXHRleHBvcnRzLkVWRU5UX0xPR0lOX1NUQVJUID0gRVZFTlRfTE9HSU5fU1RBUlQ7XG5cdHZhciBFVkVOVF9MT0dJTl9TVUNDRVNTID0gXCJsb2dpblN1Y2Nlc3NcIjtcblx0ZXhwb3J0cy5FVkVOVF9MT0dJTl9TVUNDRVNTID0gRVZFTlRfTE9HSU5fU1VDQ0VTUztcblx0dmFyIEVWRU5UX0xPR0lOX0VSUk9SID0gXCJsb2dpbkVycm9yXCI7XG5cdGV4cG9ydHMuRVZFTlRfTE9HSU5fRVJST1IgPSBFVkVOVF9MT0dJTl9FUlJPUjtcblx0dmFyIEVWRU5UX1JFRlJFU0hfU1RBUlQgPSBcImJlZm9yZVJlZnJlc2hcIjtcblx0ZXhwb3J0cy5FVkVOVF9SRUZSRVNIX1NUQVJUID0gRVZFTlRfUkVGUkVTSF9TVEFSVDtcblx0dmFyIEVWRU5UX1JFRlJFU0hfU1VDQ0VTUyA9IFwicmVmcmVzaFN1Y2Nlc3NcIjtcblx0ZXhwb3J0cy5FVkVOVF9SRUZSRVNIX1NVQ0NFU1MgPSBFVkVOVF9SRUZSRVNIX1NVQ0NFU1M7XG5cdHZhciBFVkVOVF9SRUZSRVNIX0VSUk9SID0gXCJyZWZyZXNoRXJyb3JcIjtcblx0ZXhwb3J0cy5FVkVOVF9SRUZSRVNIX0VSUk9SID0gRVZFTlRfUkVGUkVTSF9FUlJPUjtcblx0dmFyIEVWRU5UX0xPR09VVF9TVEFSVCA9IFwiYmVmb3JlTG9nb3V0XCI7XG5cdGV4cG9ydHMuRVZFTlRfTE9HT1VUX1NUQVJUID0gRVZFTlRfTE9HT1VUX1NUQVJUO1xuXHR2YXIgRVZFTlRfTE9HT1VUX1NVQ0NFU1MgPSBcImxvZ291dFN1Y2Nlc3NcIjtcblx0ZXhwb3J0cy5FVkVOVF9MT0dPVVRfU1VDQ0VTUyA9IEVWRU5UX0xPR09VVF9TVUNDRVNTO1xuXHR2YXIgRVZFTlRfTE9HT1VUX0VSUk9SID0gXCJsb2dvdXRFcnJvclwiO1xuXHRleHBvcnRzLkVWRU5UX0xPR09VVF9FUlJPUiA9IEVWRU5UX0xPR09VVF9FUlJPUjtcblxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdHZhciBwdW55Y29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHRleHBvcnRzLnBhcnNlID0gdXJsUGFyc2U7XG5cdGV4cG9ydHMucmVzb2x2ZSA9IHVybFJlc29sdmU7XG5cdGV4cG9ydHMucmVzb2x2ZU9iamVjdCA9IHVybFJlc29sdmVPYmplY3Q7XG5cdGV4cG9ydHMuZm9ybWF0ID0gdXJsRm9ybWF0O1xuXHRcblx0ZXhwb3J0cy5VcmwgPSBVcmw7XG5cdFxuXHRmdW5jdGlvbiBVcmwoKSB7XG5cdCAgdGhpcy5wcm90b2NvbCA9IG51bGw7XG5cdCAgdGhpcy5zbGFzaGVzID0gbnVsbDtcblx0ICB0aGlzLmF1dGggPSBudWxsO1xuXHQgIHRoaXMuaG9zdCA9IG51bGw7XG5cdCAgdGhpcy5wb3J0ID0gbnVsbDtcblx0ICB0aGlzLmhvc3RuYW1lID0gbnVsbDtcblx0ICB0aGlzLmhhc2ggPSBudWxsO1xuXHQgIHRoaXMuc2VhcmNoID0gbnVsbDtcblx0ICB0aGlzLnF1ZXJ5ID0gbnVsbDtcblx0ICB0aGlzLnBhdGhuYW1lID0gbnVsbDtcblx0ICB0aGlzLnBhdGggPSBudWxsO1xuXHQgIHRoaXMuaHJlZiA9IG51bGw7XG5cdH1cblx0XG5cdC8vIFJlZmVyZW5jZTogUkZDIDM5ODYsIFJGQyAxODA4LCBSRkMgMjM5NlxuXHRcblx0Ly8gZGVmaW5lIHRoZXNlIGhlcmUgc28gYXQgbGVhc3QgdGhleSBvbmx5IGhhdmUgdG8gYmVcblx0Ly8gY29tcGlsZWQgb25jZSBvbiB0aGUgZmlyc3QgbW9kdWxlIGxvYWQuXG5cdHZhciBwcm90b2NvbFBhdHRlcm4gPSAvXihbYS16MC05ListXSs6KS9pLFxuXHQgICAgcG9ydFBhdHRlcm4gPSAvOlswLTldKiQvLFxuXHRcblx0ICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIHJlc2VydmVkIGZvciBkZWxpbWl0aW5nIFVSTHMuXG5cdCAgICAvLyBXZSBhY3R1YWxseSBqdXN0IGF1dG8tZXNjYXBlIHRoZXNlLlxuXHQgICAgZGVsaW1zID0gWyc8JywgJz4nLCAnXCInLCAnYCcsICcgJywgJ1xccicsICdcXG4nLCAnXFx0J10sXG5cdFxuXHQgICAgLy8gUkZDIDIzOTY6IGNoYXJhY3RlcnMgbm90IGFsbG93ZWQgZm9yIHZhcmlvdXMgcmVhc29ucy5cblx0ICAgIHVud2lzZSA9IFsneycsICd9JywgJ3wnLCAnXFxcXCcsICdeJywgJ2AnXS5jb25jYXQoZGVsaW1zKSxcblx0XG5cdCAgICAvLyBBbGxvd2VkIGJ5IFJGQ3MsIGJ1dCBjYXVzZSBvZiBYU1MgYXR0YWNrcy4gIEFsd2F5cyBlc2NhcGUgdGhlc2UuXG5cdCAgICBhdXRvRXNjYXBlID0gWydcXCcnXS5jb25jYXQodW53aXNlKSxcblx0ICAgIC8vIENoYXJhY3RlcnMgdGhhdCBhcmUgbmV2ZXIgZXZlciBhbGxvd2VkIGluIGEgaG9zdG5hbWUuXG5cdCAgICAvLyBOb3RlIHRoYXQgYW55IGludmFsaWQgY2hhcnMgYXJlIGFsc28gaGFuZGxlZCwgYnV0IHRoZXNlXG5cdCAgICAvLyBhcmUgdGhlIG9uZXMgdGhhdCBhcmUgKmV4cGVjdGVkKiB0byBiZSBzZWVuLCBzbyB3ZSBmYXN0LXBhdGhcblx0ICAgIC8vIHRoZW0uXG5cdCAgICBub25Ib3N0Q2hhcnMgPSBbJyUnLCAnLycsICc/JywgJzsnLCAnIyddLmNvbmNhdChhdXRvRXNjYXBlKSxcblx0ICAgIGhvc3RFbmRpbmdDaGFycyA9IFsnLycsICc/JywgJyMnXSxcblx0ICAgIGhvc3RuYW1lTWF4TGVuID0gMjU1LFxuXHQgICAgaG9zdG5hbWVQYXJ0UGF0dGVybiA9IC9eW2EtejAtOUEtWl8tXXswLDYzfSQvLFxuXHQgICAgaG9zdG5hbWVQYXJ0U3RhcnQgPSAvXihbYS16MC05QS1aXy1dezAsNjN9KSguKikkLyxcblx0ICAgIC8vIHByb3RvY29scyB0aGF0IGNhbiBhbGxvdyBcInVuc2FmZVwiIGFuZCBcInVud2lzZVwiIGNoYXJzLlxuXHQgICAgdW5zYWZlUHJvdG9jb2wgPSB7XG5cdCAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcblx0ICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIC8vIHByb3RvY29scyB0aGF0IG5ldmVyIGhhdmUgYSBob3N0bmFtZS5cblx0ICAgIGhvc3RsZXNzUHJvdG9jb2wgPSB7XG5cdCAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcblx0ICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIC8vIHByb3RvY29scyB0aGF0IGFsd2F5cyBjb250YWluIGEgLy8gYml0LlxuXHQgICAgc2xhc2hlZFByb3RvY29sID0ge1xuXHQgICAgICAnaHR0cCc6IHRydWUsXG5cdCAgICAgICdodHRwcyc6IHRydWUsXG5cdCAgICAgICdmdHAnOiB0cnVlLFxuXHQgICAgICAnZ29waGVyJzogdHJ1ZSxcblx0ICAgICAgJ2ZpbGUnOiB0cnVlLFxuXHQgICAgICAnaHR0cDonOiB0cnVlLFxuXHQgICAgICAnaHR0cHM6JzogdHJ1ZSxcblx0ICAgICAgJ2Z0cDonOiB0cnVlLFxuXHQgICAgICAnZ29waGVyOic6IHRydWUsXG5cdCAgICAgICdmaWxlOic6IHRydWVcblx0ICAgIH0sXG5cdCAgICBxdWVyeXN0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0ZnVuY3Rpb24gdXJsUGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuXHQgIGlmICh1cmwgJiYgaXNPYmplY3QodXJsKSAmJiB1cmwgaW5zdGFuY2VvZiBVcmwpIHJldHVybiB1cmw7XG5cdFxuXHQgIHZhciB1ID0gbmV3IFVybDtcblx0ICB1LnBhcnNlKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpO1xuXHQgIHJldHVybiB1O1xuXHR9XG5cdFxuXHRVcmwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24odXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuXHQgIGlmICghaXNTdHJpbmcodXJsKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlBhcmFtZXRlciAndXJsJyBtdXN0IGJlIGEgc3RyaW5nLCBub3QgXCIgKyB0eXBlb2YgdXJsKTtcblx0ICB9XG5cdFxuXHQgIHZhciByZXN0ID0gdXJsO1xuXHRcblx0ICAvLyB0cmltIGJlZm9yZSBwcm9jZWVkaW5nLlxuXHQgIC8vIFRoaXMgaXMgdG8gc3VwcG9ydCBwYXJzZSBzdHVmZiBsaWtlIFwiICBodHRwOi8vZm9vLmNvbSAgXFxuXCJcblx0ICByZXN0ID0gcmVzdC50cmltKCk7XG5cdFxuXHQgIHZhciBwcm90byA9IHByb3RvY29sUGF0dGVybi5leGVjKHJlc3QpO1xuXHQgIGlmIChwcm90bykge1xuXHQgICAgcHJvdG8gPSBwcm90b1swXTtcblx0ICAgIHZhciBsb3dlclByb3RvID0gcHJvdG8udG9Mb3dlckNhc2UoKTtcblx0ICAgIHRoaXMucHJvdG9jb2wgPSBsb3dlclByb3RvO1xuXHQgICAgcmVzdCA9IHJlc3Quc3Vic3RyKHByb3RvLmxlbmd0aCk7XG5cdCAgfVxuXHRcblx0ICAvLyBmaWd1cmUgb3V0IGlmIGl0J3MgZ290IGEgaG9zdFxuXHQgIC8vIHVzZXJAc2VydmVyIGlzICphbHdheXMqIGludGVycHJldGVkIGFzIGEgaG9zdG5hbWUsIGFuZCB1cmxcblx0ICAvLyByZXNvbHV0aW9uIHdpbGwgdHJlYXQgLy9mb28vYmFyIGFzIGhvc3Q9Zm9vLHBhdGg9YmFyIGJlY2F1c2UgdGhhdCdzXG5cdCAgLy8gaG93IHRoZSBicm93c2VyIHJlc29sdmVzIHJlbGF0aXZlIFVSTHMuXG5cdCAgaWYgKHNsYXNoZXNEZW5vdGVIb3N0IHx8IHByb3RvIHx8IHJlc3QubWF0Y2goL15cXC9cXC9bXkBcXC9dK0BbXkBcXC9dKy8pKSB7XG5cdCAgICB2YXIgc2xhc2hlcyA9IHJlc3Quc3Vic3RyKDAsIDIpID09PSAnLy8nO1xuXHQgICAgaWYgKHNsYXNoZXMgJiYgIShwcm90byAmJiBob3N0bGVzc1Byb3RvY29sW3Byb3RvXSkpIHtcblx0ICAgICAgcmVzdCA9IHJlc3Quc3Vic3RyKDIpO1xuXHQgICAgICB0aGlzLnNsYXNoZXMgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKCFob3N0bGVzc1Byb3RvY29sW3Byb3RvXSAmJlxuXHQgICAgICAoc2xhc2hlcyB8fCAocHJvdG8gJiYgIXNsYXNoZWRQcm90b2NvbFtwcm90b10pKSkge1xuXHRcblx0ICAgIC8vIHRoZXJlJ3MgYSBob3N0bmFtZS5cblx0ICAgIC8vIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiAvLCA/LCA7LCBvciAjIGVuZHMgdGhlIGhvc3QuXG5cdCAgICAvL1xuXHQgICAgLy8gSWYgdGhlcmUgaXMgYW4gQCBpbiB0aGUgaG9zdG5hbWUsIHRoZW4gbm9uLWhvc3QgY2hhcnMgKmFyZSogYWxsb3dlZFxuXHQgICAgLy8gdG8gdGhlIGxlZnQgb2YgdGhlIGxhc3QgQCBzaWduLCB1bmxlc3Mgc29tZSBob3N0LWVuZGluZyBjaGFyYWN0ZXJcblx0ICAgIC8vIGNvbWVzICpiZWZvcmUqIHRoZSBALXNpZ24uXG5cdCAgICAvLyBVUkxzIGFyZSBvYm5veGlvdXMuXG5cdCAgICAvL1xuXHQgICAgLy8gZXg6XG5cdCAgICAvLyBodHRwOi8vYUBiQGMvID0+IHVzZXI6YUBiIGhvc3Q6Y1xuXHQgICAgLy8gaHR0cDovL2FAYj9AYyA9PiB1c2VyOmEgaG9zdDpjIHBhdGg6Lz9AY1xuXHRcblx0ICAgIC8vIHYwLjEyIFRPRE8oaXNhYWNzKTogVGhpcyBpcyBub3QgcXVpdGUgaG93IENocm9tZSBkb2VzIHRoaW5ncy5cblx0ICAgIC8vIFJldmlldyBvdXIgdGVzdCBjYXNlIGFnYWluc3QgYnJvd3NlcnMgbW9yZSBjb21wcmVoZW5zaXZlbHkuXG5cdFxuXHQgICAgLy8gZmluZCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgYW55IGhvc3RFbmRpbmdDaGFyc1xuXHQgICAgdmFyIGhvc3RFbmQgPSAtMTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9zdEVuZGluZ0NoYXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBoZWMgPSByZXN0LmluZGV4T2YoaG9zdEVuZGluZ0NoYXJzW2ldKTtcblx0ICAgICAgaWYgKGhlYyAhPT0gLTEgJiYgKGhvc3RFbmQgPT09IC0xIHx8IGhlYyA8IGhvc3RFbmQpKVxuXHQgICAgICAgIGhvc3RFbmQgPSBoZWM7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYXQgdGhpcyBwb2ludCwgZWl0aGVyIHdlIGhhdmUgYW4gZXhwbGljaXQgcG9pbnQgd2hlcmUgdGhlXG5cdCAgICAvLyBhdXRoIHBvcnRpb24gY2Fubm90IGdvIHBhc3QsIG9yIHRoZSBsYXN0IEAgY2hhciBpcyB0aGUgZGVjaWRlci5cblx0ICAgIHZhciBhdXRoLCBhdFNpZ247XG5cdCAgICBpZiAoaG9zdEVuZCA9PT0gLTEpIHtcblx0ICAgICAgLy8gYXRTaWduIGNhbiBiZSBhbnl3aGVyZS5cblx0ICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gYXRTaWduIG11c3QgYmUgaW4gYXV0aCBwb3J0aW9uLlxuXHQgICAgICAvLyBodHRwOi8vYUBiL2NAZCA9PiBob3N0OmIgYXV0aDphIHBhdGg6L2NAZFxuXHQgICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJywgaG9zdEVuZCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTm93IHdlIGhhdmUgYSBwb3J0aW9uIHdoaWNoIGlzIGRlZmluaXRlbHkgdGhlIGF1dGguXG5cdCAgICAvLyBQdWxsIHRoYXQgb2ZmLlxuXHQgICAgaWYgKGF0U2lnbiAhPT0gLTEpIHtcblx0ICAgICAgYXV0aCA9IHJlc3Quc2xpY2UoMCwgYXRTaWduKTtcblx0ICAgICAgcmVzdCA9IHJlc3Quc2xpY2UoYXRTaWduICsgMSk7XG5cdCAgICAgIHRoaXMuYXV0aCA9IGRlY29kZVVSSUNvbXBvbmVudChhdXRoKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB0aGUgaG9zdCBpcyB0aGUgcmVtYWluaW5nIHRvIHRoZSBsZWZ0IG9mIHRoZSBmaXJzdCBub24taG9zdCBjaGFyXG5cdCAgICBob3N0RW5kID0gLTE7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vbkhvc3RDaGFycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKG5vbkhvc3RDaGFyc1tpXSk7XG5cdCAgICAgIGlmIChoZWMgIT09IC0xICYmIChob3N0RW5kID09PSAtMSB8fCBoZWMgPCBob3N0RW5kKSlcblx0ICAgICAgICBob3N0RW5kID0gaGVjO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgd2Ugc3RpbGwgaGF2ZSBub3QgaGl0IGl0LCB0aGVuIHRoZSBlbnRpcmUgdGhpbmcgaXMgYSBob3N0LlxuXHQgICAgaWYgKGhvc3RFbmQgPT09IC0xKVxuXHQgICAgICBob3N0RW5kID0gcmVzdC5sZW5ndGg7XG5cdFxuXHQgICAgdGhpcy5ob3N0ID0gcmVzdC5zbGljZSgwLCBob3N0RW5kKTtcblx0ICAgIHJlc3QgPSByZXN0LnNsaWNlKGhvc3RFbmQpO1xuXHRcblx0ICAgIC8vIHB1bGwgb3V0IHBvcnQuXG5cdCAgICB0aGlzLnBhcnNlSG9zdCgpO1xuXHRcblx0ICAgIC8vIHdlJ3ZlIGluZGljYXRlZCB0aGF0IHRoZXJlIGlzIGEgaG9zdG5hbWUsXG5cdCAgICAvLyBzbyBldmVuIGlmIGl0J3MgZW1wdHksIGl0IGhhcyB0byBiZSBwcmVzZW50LlxuXHQgICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7XG5cdFxuXHQgICAgLy8gaWYgaG9zdG5hbWUgYmVnaW5zIHdpdGggWyBhbmQgZW5kcyB3aXRoIF1cblx0ICAgIC8vIGFzc3VtZSB0aGF0IGl0J3MgYW4gSVB2NiBhZGRyZXNzLlxuXHQgICAgdmFyIGlwdjZIb3N0bmFtZSA9IHRoaXMuaG9zdG5hbWVbMF0gPT09ICdbJyAmJlxuXHQgICAgICAgIHRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAxXSA9PT0gJ10nO1xuXHRcblx0ICAgIC8vIHZhbGlkYXRlIGEgbGl0dGxlLlxuXHQgICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcblx0ICAgICAgdmFyIGhvc3RwYXJ0cyA9IHRoaXMuaG9zdG5hbWUuc3BsaXQoL1xcLi8pO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGhvc3RwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgcGFydCA9IGhvc3RwYXJ0c1tpXTtcblx0ICAgICAgICBpZiAoIXBhcnQpIGNvbnRpbnVlO1xuXHQgICAgICAgIGlmICghcGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkge1xuXHQgICAgICAgICAgdmFyIG5ld3BhcnQgPSAnJztcblx0ICAgICAgICAgIGZvciAodmFyIGogPSAwLCBrID0gcGFydC5sZW5ndGg7IGogPCBrOyBqKyspIHtcblx0ICAgICAgICAgICAgaWYgKHBhcnQuY2hhckNvZGVBdChqKSA+IDEyNykge1xuXHQgICAgICAgICAgICAgIC8vIHdlIHJlcGxhY2Ugbm9uLUFTQ0lJIGNoYXIgd2l0aCBhIHRlbXBvcmFyeSBwbGFjZWhvbGRlclxuXHQgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhpcyB0byBtYWtlIHN1cmUgc2l6ZSBvZiBob3N0bmFtZSBpcyBub3Rcblx0ICAgICAgICAgICAgICAvLyBicm9rZW4gYnkgcmVwbGFjaW5nIG5vbi1BU0NJSSBieSBub3RoaW5nXG5cdCAgICAgICAgICAgICAgbmV3cGFydCArPSAneCc7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgbmV3cGFydCArPSBwYXJ0W2pdO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyB3ZSB0ZXN0IGFnYWluIHdpdGggQVNDSUkgY2hhciBvbmx5XG5cdCAgICAgICAgICBpZiAoIW5ld3BhcnQubWF0Y2goaG9zdG5hbWVQYXJ0UGF0dGVybikpIHtcblx0ICAgICAgICAgICAgdmFyIHZhbGlkUGFydHMgPSBob3N0cGFydHMuc2xpY2UoMCwgaSk7XG5cdCAgICAgICAgICAgIHZhciBub3RIb3N0ID0gaG9zdHBhcnRzLnNsaWNlKGkgKyAxKTtcblx0ICAgICAgICAgICAgdmFyIGJpdCA9IHBhcnQubWF0Y2goaG9zdG5hbWVQYXJ0U3RhcnQpO1xuXHQgICAgICAgICAgICBpZiAoYml0KSB7XG5cdCAgICAgICAgICAgICAgdmFsaWRQYXJ0cy5wdXNoKGJpdFsxXSk7XG5cdCAgICAgICAgICAgICAgbm90SG9zdC51bnNoaWZ0KGJpdFsyXSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKG5vdEhvc3QubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgICAgcmVzdCA9ICcvJyArIG5vdEhvc3Quam9pbignLicpICsgcmVzdDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLmhvc3RuYW1lID0gdmFsaWRQYXJ0cy5qb2luKCcuJyk7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0aGlzLmhvc3RuYW1lLmxlbmd0aCA+IGhvc3RuYW1lTWF4TGVuKSB7XG5cdCAgICAgIHRoaXMuaG9zdG5hbWUgPSAnJztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIGhvc3RuYW1lcyBhcmUgYWx3YXlzIGxvd2VyIGNhc2UuXG5cdCAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcblx0ICAgICAgLy8gSUROQSBTdXBwb3J0OiBSZXR1cm5zIGEgcHVueSBjb2RlZCByZXByZXNlbnRhdGlvbiBvZiBcImRvbWFpblwiLlxuXHQgICAgICAvLyBJdCBvbmx5IGNvbnZlcnRzIHRoZSBwYXJ0IG9mIHRoZSBkb21haW4gbmFtZSB0aGF0XG5cdCAgICAgIC8vIGhhcyBub24gQVNDSUkgY2hhcmFjdGVycy4gSS5lLiBpdCBkb3NlbnQgbWF0dGVyIGlmXG5cdCAgICAgIC8vIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCBhbHJlYWR5IGlzIGluIEFTQ0lJLlxuXHQgICAgICB2YXIgZG9tYWluQXJyYXkgPSB0aGlzLmhvc3RuYW1lLnNwbGl0KCcuJyk7XG5cdCAgICAgIHZhciBuZXdPdXQgPSBbXTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb21haW5BcnJheS5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgIHZhciBzID0gZG9tYWluQXJyYXlbaV07XG5cdCAgICAgICAgbmV3T3V0LnB1c2gocy5tYXRjaCgvW15BLVphLXowLTlfLV0vKSA/XG5cdCAgICAgICAgICAgICd4bi0tJyArIHB1bnljb2RlLmVuY29kZShzKSA6IHMpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuaG9zdG5hbWUgPSBuZXdPdXQuam9pbignLicpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwID0gdGhpcy5wb3J0ID8gJzonICsgdGhpcy5wb3J0IDogJyc7XG5cdCAgICB2YXIgaCA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7XG5cdCAgICB0aGlzLmhvc3QgPSBoICsgcDtcblx0ICAgIHRoaXMuaHJlZiArPSB0aGlzLmhvc3Q7XG5cdFxuXHQgICAgLy8gc3RyaXAgWyBhbmQgXSBmcm9tIHRoZSBob3N0bmFtZVxuXHQgICAgLy8gdGhlIGhvc3QgZmllbGQgc3RpbGwgcmV0YWlucyB0aGVtLCB0aG91Z2hcblx0ICAgIGlmIChpcHY2SG9zdG5hbWUpIHtcblx0ICAgICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUuc3Vic3RyKDEsIHRoaXMuaG9zdG5hbWUubGVuZ3RoIC0gMik7XG5cdCAgICAgIGlmIChyZXN0WzBdICE9PSAnLycpIHtcblx0ICAgICAgICByZXN0ID0gJy8nICsgcmVzdDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gbm93IHJlc3QgaXMgc2V0IHRvIHRoZSBwb3N0LWhvc3Qgc3R1ZmYuXG5cdCAgLy8gY2hvcCBvZmYgYW55IGRlbGltIGNoYXJzLlxuXHQgIGlmICghdW5zYWZlUHJvdG9jb2xbbG93ZXJQcm90b10pIHtcblx0XG5cdCAgICAvLyBGaXJzdCwgbWFrZSAxMDAlIHN1cmUgdGhhdCBhbnkgXCJhdXRvRXNjYXBlXCIgY2hhcnMgZ2V0XG5cdCAgICAvLyBlc2NhcGVkLCBldmVuIGlmIGVuY29kZVVSSUNvbXBvbmVudCBkb2Vzbid0IHRoaW5rIHRoZXlcblx0ICAgIC8vIG5lZWQgdG8gYmUuXG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF1dG9Fc2NhcGUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBhZSA9IGF1dG9Fc2NhcGVbaV07XG5cdCAgICAgIHZhciBlc2MgPSBlbmNvZGVVUklDb21wb25lbnQoYWUpO1xuXHQgICAgICBpZiAoZXNjID09PSBhZSkge1xuXHQgICAgICAgIGVzYyA9IGVzY2FwZShhZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmVzdCA9IHJlc3Quc3BsaXQoYWUpLmpvaW4oZXNjKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHRcblx0ICAvLyBjaG9wIG9mZiBmcm9tIHRoZSB0YWlsIGZpcnN0LlxuXHQgIHZhciBoYXNoID0gcmVzdC5pbmRleE9mKCcjJyk7XG5cdCAgaWYgKGhhc2ggIT09IC0xKSB7XG5cdCAgICAvLyBnb3QgYSBmcmFnbWVudCBzdHJpbmcuXG5cdCAgICB0aGlzLmhhc2ggPSByZXN0LnN1YnN0cihoYXNoKTtcblx0ICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIGhhc2gpO1xuXHQgIH1cblx0ICB2YXIgcW0gPSByZXN0LmluZGV4T2YoJz8nKTtcblx0ICBpZiAocW0gIT09IC0xKSB7XG5cdCAgICB0aGlzLnNlYXJjaCA9IHJlc3Quc3Vic3RyKHFtKTtcblx0ICAgIHRoaXMucXVlcnkgPSByZXN0LnN1YnN0cihxbSArIDEpO1xuXHQgICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcblx0ICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHRoaXMucXVlcnkpO1xuXHQgICAgfVxuXHQgICAgcmVzdCA9IHJlc3Quc2xpY2UoMCwgcW0pO1xuXHQgIH0gZWxzZSBpZiAocGFyc2VRdWVyeVN0cmluZykge1xuXHQgICAgLy8gbm8gcXVlcnkgc3RyaW5nLCBidXQgcGFyc2VRdWVyeVN0cmluZyBzdGlsbCByZXF1ZXN0ZWRcblx0ICAgIHRoaXMuc2VhcmNoID0gJyc7XG5cdCAgICB0aGlzLnF1ZXJ5ID0ge307XG5cdCAgfVxuXHQgIGlmIChyZXN0KSB0aGlzLnBhdGhuYW1lID0gcmVzdDtcblx0ICBpZiAoc2xhc2hlZFByb3RvY29sW2xvd2VyUHJvdG9dICYmXG5cdCAgICAgIHRoaXMuaG9zdG5hbWUgJiYgIXRoaXMucGF0aG5hbWUpIHtcblx0ICAgIHRoaXMucGF0aG5hbWUgPSAnLyc7XG5cdCAgfVxuXHRcblx0ICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG5cdCAgaWYgKHRoaXMucGF0aG5hbWUgfHwgdGhpcy5zZWFyY2gpIHtcblx0ICAgIHZhciBwID0gdGhpcy5wYXRobmFtZSB8fCAnJztcblx0ICAgIHZhciBzID0gdGhpcy5zZWFyY2ggfHwgJyc7XG5cdCAgICB0aGlzLnBhdGggPSBwICsgcztcblx0ICB9XG5cdFxuXHQgIC8vIGZpbmFsbHksIHJlY29uc3RydWN0IHRoZSBocmVmIGJhc2VkIG9uIHdoYXQgaGFzIGJlZW4gdmFsaWRhdGVkLlxuXHQgIHRoaXMuaHJlZiA9IHRoaXMuZm9ybWF0KCk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHQvLyBmb3JtYXQgYSBwYXJzZWQgb2JqZWN0IGludG8gYSB1cmwgc3RyaW5nXG5cdGZ1bmN0aW9uIHVybEZvcm1hdChvYmopIHtcblx0ICAvLyBlbnN1cmUgaXQncyBhbiBvYmplY3QsIGFuZCBub3QgYSBzdHJpbmcgdXJsLlxuXHQgIC8vIElmIGl0J3MgYW4gb2JqLCB0aGlzIGlzIGEgbm8tb3AuXG5cdCAgLy8gdGhpcyB3YXksIHlvdSBjYW4gY2FsbCB1cmxfZm9ybWF0KCkgb24gc3RyaW5nc1xuXHQgIC8vIHRvIGNsZWFuIHVwIHBvdGVudGlhbGx5IHdvbmt5IHVybHMuXG5cdCAgaWYgKGlzU3RyaW5nKG9iaikpIG9iaiA9IHVybFBhcnNlKG9iaik7XG5cdCAgaWYgKCEob2JqIGluc3RhbmNlb2YgVXJsKSkgcmV0dXJuIFVybC5wcm90b3R5cGUuZm9ybWF0LmNhbGwob2JqKTtcblx0ICByZXR1cm4gb2JqLmZvcm1hdCgpO1xuXHR9XG5cdFxuXHRVcmwucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhdXRoID0gdGhpcy5hdXRoIHx8ICcnO1xuXHQgIGlmIChhdXRoKSB7XG5cdCAgICBhdXRoID0gZW5jb2RlVVJJQ29tcG9uZW50KGF1dGgpO1xuXHQgICAgYXV0aCA9IGF1dGgucmVwbGFjZSgvJTNBL2ksICc6Jyk7XG5cdCAgICBhdXRoICs9ICdAJztcblx0ICB9XG5cdFxuXHQgIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2wgfHwgJycsXG5cdCAgICAgIHBhdGhuYW1lID0gdGhpcy5wYXRobmFtZSB8fCAnJyxcblx0ICAgICAgaGFzaCA9IHRoaXMuaGFzaCB8fCAnJyxcblx0ICAgICAgaG9zdCA9IGZhbHNlLFxuXHQgICAgICBxdWVyeSA9ICcnO1xuXHRcblx0ICBpZiAodGhpcy5ob3N0KSB7XG5cdCAgICBob3N0ID0gYXV0aCArIHRoaXMuaG9zdDtcblx0ICB9IGVsc2UgaWYgKHRoaXMuaG9zdG5hbWUpIHtcblx0ICAgIGhvc3QgPSBhdXRoICsgKHRoaXMuaG9zdG5hbWUuaW5kZXhPZignOicpID09PSAtMSA/XG5cdCAgICAgICAgdGhpcy5ob3N0bmFtZSA6XG5cdCAgICAgICAgJ1snICsgdGhpcy5ob3N0bmFtZSArICddJyk7XG5cdCAgICBpZiAodGhpcy5wb3J0KSB7XG5cdCAgICAgIGhvc3QgKz0gJzonICsgdGhpcy5wb3J0O1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHRoaXMucXVlcnkgJiZcblx0ICAgICAgaXNPYmplY3QodGhpcy5xdWVyeSkgJiZcblx0ICAgICAgT2JqZWN0LmtleXModGhpcy5xdWVyeSkubGVuZ3RoKSB7XG5cdCAgICBxdWVyeSA9IHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeSh0aGlzLnF1ZXJ5KTtcblx0ICB9XG5cdFxuXHQgIHZhciBzZWFyY2ggPSB0aGlzLnNlYXJjaCB8fCAocXVlcnkgJiYgKCc/JyArIHF1ZXJ5KSkgfHwgJyc7XG5cdFxuXHQgIGlmIChwcm90b2NvbCAmJiBwcm90b2NvbC5zdWJzdHIoLTEpICE9PSAnOicpIHByb3RvY29sICs9ICc6Jztcblx0XG5cdCAgLy8gb25seSB0aGUgc2xhc2hlZFByb3RvY29scyBnZXQgdGhlIC8vLiAgTm90IG1haWx0bzosIHhtcHA6LCBldGMuXG5cdCAgLy8gdW5sZXNzIHRoZXkgaGFkIHRoZW0gdG8gYmVnaW4gd2l0aC5cblx0ICBpZiAodGhpcy5zbGFzaGVzIHx8XG5cdCAgICAgICghcHJvdG9jb2wgfHwgc2xhc2hlZFByb3RvY29sW3Byb3RvY29sXSkgJiYgaG9zdCAhPT0gZmFsc2UpIHtcblx0ICAgIGhvc3QgPSAnLy8nICsgKGhvc3QgfHwgJycpO1xuXHQgICAgaWYgKHBhdGhuYW1lICYmIHBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSBwYXRobmFtZSA9ICcvJyArIHBhdGhuYW1lO1xuXHQgIH0gZWxzZSBpZiAoIWhvc3QpIHtcblx0ICAgIGhvc3QgPSAnJztcblx0ICB9XG5cdFxuXHQgIGlmIChoYXNoICYmIGhhc2guY2hhckF0KDApICE9PSAnIycpIGhhc2ggPSAnIycgKyBoYXNoO1xuXHQgIGlmIChzZWFyY2ggJiYgc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBzZWFyY2ggPSAnPycgKyBzZWFyY2g7XG5cdFxuXHQgIHBhdGhuYW1lID0gcGF0aG5hbWUucmVwbGFjZSgvWz8jXS9nLCBmdW5jdGlvbihtYXRjaCkge1xuXHQgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChtYXRjaCk7XG5cdCAgfSk7XG5cdCAgc2VhcmNoID0gc2VhcmNoLnJlcGxhY2UoJyMnLCAnJTIzJyk7XG5cdFxuXHQgIHJldHVybiBwcm90b2NvbCArIGhvc3QgKyBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiB1cmxSZXNvbHZlKHNvdXJjZSwgcmVsYXRpdmUpIHtcblx0ICByZXR1cm4gdXJsUGFyc2Uoc291cmNlLCBmYWxzZSwgdHJ1ZSkucmVzb2x2ZShyZWxhdGl2ZSk7XG5cdH1cblx0XG5cdFVybC5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7XG5cdCAgcmV0dXJuIHRoaXMucmVzb2x2ZU9iamVjdCh1cmxQYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpKS5mb3JtYXQoKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHVybFJlc29sdmVPYmplY3Qoc291cmNlLCByZWxhdGl2ZSkge1xuXHQgIGlmICghc291cmNlKSByZXR1cm4gcmVsYXRpdmU7XG5cdCAgcmV0dXJuIHVybFBhcnNlKHNvdXJjZSwgZmFsc2UsIHRydWUpLnJlc29sdmVPYmplY3QocmVsYXRpdmUpO1xuXHR9XG5cdFxuXHRVcmwucHJvdG90eXBlLnJlc29sdmVPYmplY3QgPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xuXHQgIGlmIChpc1N0cmluZyhyZWxhdGl2ZSkpIHtcblx0ICAgIHZhciByZWwgPSBuZXcgVXJsKCk7XG5cdCAgICByZWwucGFyc2UocmVsYXRpdmUsIGZhbHNlLCB0cnVlKTtcblx0ICAgIHJlbGF0aXZlID0gcmVsO1xuXHQgIH1cblx0XG5cdCAgdmFyIHJlc3VsdCA9IG5ldyBVcmwoKTtcblx0ICBPYmplY3Qua2V5cyh0aGlzKS5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcblx0ICAgIHJlc3VsdFtrXSA9IHRoaXNba107XG5cdCAgfSwgdGhpcyk7XG5cdFxuXHQgIC8vIGhhc2ggaXMgYWx3YXlzIG92ZXJyaWRkZW4sIG5vIG1hdHRlciB3aGF0LlxuXHQgIC8vIGV2ZW4gaHJlZj1cIlwiIHdpbGwgcmVtb3ZlIGl0LlxuXHQgIHJlc3VsdC5oYXNoID0gcmVsYXRpdmUuaGFzaDtcblx0XG5cdCAgLy8gaWYgdGhlIHJlbGF0aXZlIHVybCBpcyBlbXB0eSwgdGhlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBkbyBoZXJlLlxuXHQgIGlmIChyZWxhdGl2ZS5ocmVmID09PSAnJykge1xuXHQgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgLy8gaHJlZnMgbGlrZSAvL2Zvby9iYXIgYWx3YXlzIGN1dCB0byB0aGUgcHJvdG9jb2wuXG5cdCAgaWYgKHJlbGF0aXZlLnNsYXNoZXMgJiYgIXJlbGF0aXZlLnByb3RvY29sKSB7XG5cdCAgICAvLyB0YWtlIGV2ZXJ5dGhpbmcgZXhjZXB0IHRoZSBwcm90b2NvbCBmcm9tIHJlbGF0aXZlXG5cdCAgICBPYmplY3Qua2V5cyhyZWxhdGl2ZSkuZm9yRWFjaChmdW5jdGlvbihrKSB7XG5cdCAgICAgIGlmIChrICE9PSAncHJvdG9jb2wnKVxuXHQgICAgICAgIHJlc3VsdFtrXSA9IHJlbGF0aXZlW2tdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLy91cmxQYXJzZSBhcHBlbmRzIHRyYWlsaW5nIC8gdG8gdXJscyBsaWtlIGh0dHA6Ly93d3cuZXhhbXBsZS5jb21cblx0ICAgIGlmIChzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXSAmJlxuXHQgICAgICAgIHJlc3VsdC5ob3N0bmFtZSAmJiAhcmVzdWx0LnBhdGhuYW1lKSB7XG5cdCAgICAgIHJlc3VsdC5wYXRoID0gcmVzdWx0LnBhdGhuYW1lID0gJy8nO1xuXHQgICAgfVxuXHRcblx0ICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGlmIChyZWxhdGl2ZS5wcm90b2NvbCAmJiByZWxhdGl2ZS5wcm90b2NvbCAhPT0gcmVzdWx0LnByb3RvY29sKSB7XG5cdCAgICAvLyBpZiBpdCdzIGEga25vd24gdXJsIHByb3RvY29sLCB0aGVuIGNoYW5naW5nXG5cdCAgICAvLyB0aGUgcHJvdG9jb2wgZG9lcyB3ZWlyZCB0aGluZ3Ncblx0ICAgIC8vIGZpcnN0LCBpZiBpdCdzIG5vdCBmaWxlOiwgdGhlbiB3ZSBNVVNUIGhhdmUgYSBob3N0LFxuXHQgICAgLy8gYW5kIGlmIHRoZXJlIHdhcyBhIHBhdGhcblx0ICAgIC8vIHRvIGJlZ2luIHdpdGgsIHRoZW4gd2UgTVVTVCBoYXZlIGEgcGF0aC5cblx0ICAgIC8vIGlmIGl0IGlzIGZpbGU6LCB0aGVuIHRoZSBob3N0IGlzIGRyb3BwZWQsXG5cdCAgICAvLyBiZWNhdXNlIHRoYXQncyBrbm93biB0byBiZSBob3N0bGVzcy5cblx0ICAgIC8vIGFueXRoaW5nIGVsc2UgaXMgYXNzdW1lZCB0byBiZSBhYnNvbHV0ZS5cblx0ICAgIGlmICghc2xhc2hlZFByb3RvY29sW3JlbGF0aXZlLnByb3RvY29sXSkge1xuXHQgICAgICBPYmplY3Qua2V5cyhyZWxhdGl2ZSkuZm9yRWFjaChmdW5jdGlvbihrKSB7XG5cdCAgICAgICAgcmVzdWx0W2tdID0gcmVsYXRpdmVba107XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH1cblx0XG5cdCAgICByZXN1bHQucHJvdG9jb2wgPSByZWxhdGl2ZS5wcm90b2NvbDtcblx0ICAgIGlmICghcmVsYXRpdmUuaG9zdCAmJiAhaG9zdGxlc3NQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHtcblx0ICAgICAgdmFyIHJlbFBhdGggPSAocmVsYXRpdmUucGF0aG5hbWUgfHwgJycpLnNwbGl0KCcvJyk7XG5cdCAgICAgIHdoaWxlIChyZWxQYXRoLmxlbmd0aCAmJiAhKHJlbGF0aXZlLmhvc3QgPSByZWxQYXRoLnNoaWZ0KCkpKTtcblx0ICAgICAgaWYgKCFyZWxhdGl2ZS5ob3N0KSByZWxhdGl2ZS5ob3N0ID0gJyc7XG5cdCAgICAgIGlmICghcmVsYXRpdmUuaG9zdG5hbWUpIHJlbGF0aXZlLmhvc3RuYW1lID0gJyc7XG5cdCAgICAgIGlmIChyZWxQYXRoWzBdICE9PSAnJykgcmVsUGF0aC51bnNoaWZ0KCcnKTtcblx0ICAgICAgaWYgKHJlbFBhdGgubGVuZ3RoIDwgMikgcmVsUGF0aC51bnNoaWZ0KCcnKTtcblx0ICAgICAgcmVzdWx0LnBhdGhuYW1lID0gcmVsUGF0aC5qb2luKCcvJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXN1bHQucGF0aG5hbWUgPSByZWxhdGl2ZS5wYXRobmFtZTtcblx0ICAgIH1cblx0ICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG5cdCAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcblx0ICAgIHJlc3VsdC5ob3N0ID0gcmVsYXRpdmUuaG9zdCB8fCAnJztcblx0ICAgIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aDtcblx0ICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3Q7XG5cdCAgICByZXN1bHQucG9ydCA9IHJlbGF0aXZlLnBvcnQ7XG5cdCAgICAvLyB0byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuXHQgICAgaWYgKHJlc3VsdC5wYXRobmFtZSB8fCByZXN1bHQuc2VhcmNoKSB7XG5cdCAgICAgIHZhciBwID0gcmVzdWx0LnBhdGhuYW1lIHx8ICcnO1xuXHQgICAgICB2YXIgcyA9IHJlc3VsdC5zZWFyY2ggfHwgJyc7XG5cdCAgICAgIHJlc3VsdC5wYXRoID0gcCArIHM7XG5cdCAgICB9XG5cdCAgICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7XG5cdCAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgaXNTb3VyY2VBYnMgPSAocmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyksXG5cdCAgICAgIGlzUmVsQWJzID0gKFxuXHQgICAgICAgICAgcmVsYXRpdmUuaG9zdCB8fFxuXHQgICAgICAgICAgcmVsYXRpdmUucGF0aG5hbWUgJiYgcmVsYXRpdmUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLydcblx0ICAgICAgKSxcblx0ICAgICAgbXVzdEVuZEFicyA9IChpc1JlbEFicyB8fCBpc1NvdXJjZUFicyB8fFxuXHQgICAgICAgICAgICAgICAgICAgIChyZXN1bHQuaG9zdCAmJiByZWxhdGl2ZS5wYXRobmFtZSkpLFxuXHQgICAgICByZW1vdmVBbGxEb3RzID0gbXVzdEVuZEFicyxcblx0ICAgICAgc3JjUGF0aCA9IHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuc3BsaXQoJy8nKSB8fCBbXSxcblx0ICAgICAgcmVsUGF0aCA9IHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLnNwbGl0KCcvJykgfHwgW10sXG5cdCAgICAgIHBzeWNob3RpYyA9IHJlc3VsdC5wcm90b2NvbCAmJiAhc2xhc2hlZFByb3RvY29sW3Jlc3VsdC5wcm90b2NvbF07XG5cdFxuXHQgIC8vIGlmIHRoZSB1cmwgaXMgYSBub24tc2xhc2hlZCB1cmwsIHRoZW4gcmVsYXRpdmVcblx0ICAvLyBsaW5rcyBsaWtlIC4uLy4uIHNob3VsZCBiZSBhYmxlXG5cdCAgLy8gdG8gY3Jhd2wgdXAgdG8gdGhlIGhvc3RuYW1lLCBhcyB3ZWxsLiAgVGhpcyBpcyBzdHJhbmdlLlxuXHQgIC8vIHJlc3VsdC5wcm90b2NvbCBoYXMgYWxyZWFkeSBiZWVuIHNldCBieSBub3cuXG5cdCAgLy8gTGF0ZXIgb24sIHB1dCB0aGUgZmlyc3QgcGF0aCBwYXJ0IGludG8gdGhlIGhvc3QgZmllbGQuXG5cdCAgaWYgKHBzeWNob3RpYykge1xuXHQgICAgcmVzdWx0Lmhvc3RuYW1lID0gJyc7XG5cdCAgICByZXN1bHQucG9ydCA9IG51bGw7XG5cdCAgICBpZiAocmVzdWx0Lmhvc3QpIHtcblx0ICAgICAgaWYgKHNyY1BhdGhbMF0gPT09ICcnKSBzcmNQYXRoWzBdID0gcmVzdWx0Lmhvc3Q7XG5cdCAgICAgIGVsc2Ugc3JjUGF0aC51bnNoaWZ0KHJlc3VsdC5ob3N0KTtcblx0ICAgIH1cblx0ICAgIHJlc3VsdC5ob3N0ID0gJyc7XG5cdCAgICBpZiAocmVsYXRpdmUucHJvdG9jb2wpIHtcblx0ICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgPSBudWxsO1xuXHQgICAgICByZWxhdGl2ZS5wb3J0ID0gbnVsbDtcblx0ICAgICAgaWYgKHJlbGF0aXZlLmhvc3QpIHtcblx0ICAgICAgICBpZiAocmVsUGF0aFswXSA9PT0gJycpIHJlbFBhdGhbMF0gPSByZWxhdGl2ZS5ob3N0O1xuXHQgICAgICAgIGVsc2UgcmVsUGF0aC51bnNoaWZ0KHJlbGF0aXZlLmhvc3QpO1xuXHQgICAgICB9XG5cdCAgICAgIHJlbGF0aXZlLmhvc3QgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgbXVzdEVuZEFicyA9IG11c3RFbmRBYnMgJiYgKHJlbFBhdGhbMF0gPT09ICcnIHx8IHNyY1BhdGhbMF0gPT09ICcnKTtcblx0ICB9XG5cdFxuXHQgIGlmIChpc1JlbEFicykge1xuXHQgICAgLy8gaXQncyBhYnNvbHV0ZS5cblx0ICAgIHJlc3VsdC5ob3N0ID0gKHJlbGF0aXZlLmhvc3QgfHwgcmVsYXRpdmUuaG9zdCA9PT0gJycpID9cblx0ICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdCA6IHJlc3VsdC5ob3N0O1xuXHQgICAgcmVzdWx0Lmhvc3RuYW1lID0gKHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3RuYW1lID09PSAnJykgP1xuXHQgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgOiByZXN1bHQuaG9zdG5hbWU7XG5cdCAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuXHQgICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG5cdCAgICBzcmNQYXRoID0gcmVsUGF0aDtcblx0ICAgIC8vIGZhbGwgdGhyb3VnaCB0byB0aGUgZG90LWhhbmRsaW5nIGJlbG93LlxuXHQgIH0gZWxzZSBpZiAocmVsUGF0aC5sZW5ndGgpIHtcblx0ICAgIC8vIGl0J3MgcmVsYXRpdmVcblx0ICAgIC8vIHRocm93IGF3YXkgdGhlIGV4aXN0aW5nIGZpbGUsIGFuZCB0YWtlIHRoZSBuZXcgcGF0aCBpbnN0ZWFkLlxuXHQgICAgaWYgKCFzcmNQYXRoKSBzcmNQYXRoID0gW107XG5cdCAgICBzcmNQYXRoLnBvcCgpO1xuXHQgICAgc3JjUGF0aCA9IHNyY1BhdGguY29uY2F0KHJlbFBhdGgpO1xuXHQgICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcblx0ICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuXHQgIH0gZWxzZSBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHJlbGF0aXZlLnNlYXJjaCkpIHtcblx0ICAgIC8vIGp1c3QgcHVsbCBvdXQgdGhlIHNlYXJjaC5cblx0ICAgIC8vIGxpa2UgaHJlZj0nP2ZvbycuXG5cdCAgICAvLyBQdXQgdGhpcyBhZnRlciB0aGUgb3RoZXIgdHdvIGNhc2VzIGJlY2F1c2UgaXQgc2ltcGxpZmllcyB0aGUgYm9vbGVhbnNcblx0ICAgIGlmIChwc3ljaG90aWMpIHtcblx0ICAgICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBzcmNQYXRoLnNoaWZ0KCk7XG5cdCAgICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3Rcblx0ICAgICAgLy90aGlzIGVzcGVjaWFseSBoYXBwZW5zIGluIGNhc2VzIGxpa2Vcblx0ICAgICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcblx0ICAgICAgdmFyIGF1dGhJbkhvc3QgPSByZXN1bHQuaG9zdCAmJiByZXN1bHQuaG9zdC5pbmRleE9mKCdAJykgPiAwID9cblx0ICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG5cdCAgICAgIGlmIChhdXRoSW5Ib3N0KSB7XG5cdCAgICAgICAgcmVzdWx0LmF1dGggPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG5cdCAgICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG5cdCAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcblx0ICAgIC8vdG8gc3VwcG9ydCBodHRwLnJlcXVlc3Rcblx0ICAgIGlmICghaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIWlzTnVsbChyZXN1bHQuc2VhcmNoKSkge1xuXHQgICAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgK1xuXHQgICAgICAgICAgICAgICAgICAgIChyZXN1bHQuc2VhcmNoID8gcmVzdWx0LnNlYXJjaCA6ICcnKTtcblx0ICAgIH1cblx0ICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGlmICghc3JjUGF0aC5sZW5ndGgpIHtcblx0ICAgIC8vIG5vIHBhdGggYXQgYWxsLiAgZWFzeS5cblx0ICAgIC8vIHdlJ3ZlIGFscmVhZHkgaGFuZGxlZCB0aGUgb3RoZXIgc3R1ZmYgYWJvdmUuXG5cdCAgICByZXN1bHQucGF0aG5hbWUgPSBudWxsO1xuXHQgICAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuXHQgICAgaWYgKHJlc3VsdC5zZWFyY2gpIHtcblx0ICAgICAgcmVzdWx0LnBhdGggPSAnLycgKyByZXN1bHQuc2VhcmNoO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzdWx0LnBhdGggPSBudWxsO1xuXHQgICAgfVxuXHQgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgLy8gaWYgYSB1cmwgRU5EcyBpbiAuIG9yIC4uLCB0aGVuIGl0IG11c3QgZ2V0IGEgdHJhaWxpbmcgc2xhc2guXG5cdCAgLy8gaG93ZXZlciwgaWYgaXQgZW5kcyBpbiBhbnl0aGluZyBlbHNlIG5vbi1zbGFzaHksXG5cdCAgLy8gdGhlbiBpdCBtdXN0IE5PVCBnZXQgYSB0cmFpbGluZyBzbGFzaC5cblx0ICB2YXIgbGFzdCA9IHNyY1BhdGguc2xpY2UoLTEpWzBdO1xuXHQgIHZhciBoYXNUcmFpbGluZ1NsYXNoID0gKFxuXHQgICAgICAocmVzdWx0Lmhvc3QgfHwgcmVsYXRpdmUuaG9zdCkgJiYgKGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nKSB8fFxuXHQgICAgICBsYXN0ID09PSAnJyk7XG5cdFxuXHQgIC8vIHN0cmlwIHNpbmdsZSBkb3RzLCByZXNvbHZlIGRvdWJsZSBkb3RzIHRvIHBhcmVudCBkaXJcblx0ICAvLyBpZiB0aGUgcGF0aCB0cmllcyB0byBnbyBhYm92ZSB0aGUgcm9vdCwgYHVwYCBlbmRzIHVwID4gMFxuXHQgIHZhciB1cCA9IDA7XG5cdCAgZm9yICh2YXIgaSA9IHNyY1BhdGgubGVuZ3RoOyBpID49IDA7IGktLSkge1xuXHQgICAgbGFzdCA9IHNyY1BhdGhbaV07XG5cdCAgICBpZiAobGFzdCA9PSAnLicpIHtcblx0ICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG5cdCAgICB9IGVsc2UgaWYgKGxhc3QgPT09ICcuLicpIHtcblx0ICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG5cdCAgICAgIHVwKys7XG5cdCAgICB9IGVsc2UgaWYgKHVwKSB7XG5cdCAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpO1xuXHQgICAgICB1cC0tO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuXHQgIGlmICghbXVzdEVuZEFicyAmJiAhcmVtb3ZlQWxsRG90cykge1xuXHQgICAgZm9yICg7IHVwLS07IHVwKSB7XG5cdCAgICAgIHNyY1BhdGgudW5zaGlmdCgnLi4nKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmIChtdXN0RW5kQWJzICYmIHNyY1BhdGhbMF0gIT09ICcnICYmXG5cdCAgICAgICghc3JjUGF0aFswXSB8fCBzcmNQYXRoWzBdLmNoYXJBdCgwKSAhPT0gJy8nKSkge1xuXHQgICAgc3JjUGF0aC51bnNoaWZ0KCcnKTtcblx0ICB9XG5cdFxuXHQgIGlmIChoYXNUcmFpbGluZ1NsYXNoICYmIChzcmNQYXRoLmpvaW4oJy8nKS5zdWJzdHIoLTEpICE9PSAnLycpKSB7XG5cdCAgICBzcmNQYXRoLnB1c2goJycpO1xuXHQgIH1cblx0XG5cdCAgdmFyIGlzQWJzb2x1dGUgPSBzcmNQYXRoWzBdID09PSAnJyB8fFxuXHQgICAgICAoc3JjUGF0aFswXSAmJiBzcmNQYXRoWzBdLmNoYXJBdCgwKSA9PT0gJy8nKTtcblx0XG5cdCAgLy8gcHV0IHRoZSBob3N0IGJhY2tcblx0ICBpZiAocHN5Y2hvdGljKSB7XG5cdCAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IGlzQWJzb2x1dGUgPyAnJyA6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY1BhdGgubGVuZ3RoID8gc3JjUGF0aC5zaGlmdCgpIDogJyc7XG5cdCAgICAvL29jY2F0aW9uYWx5IHRoZSBhdXRoIGNhbiBnZXQgc3R1Y2sgb25seSBpbiBob3N0XG5cdCAgICAvL3RoaXMgZXNwZWNpYWx5IGhhcHBlbnMgaW4gY2FzZXMgbGlrZVxuXHQgICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcblx0ICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG5cdCAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ob3N0LnNwbGl0KCdAJykgOiBmYWxzZTtcblx0ICAgIGlmIChhdXRoSW5Ib3N0KSB7XG5cdCAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuXHQgICAgICByZXN1bHQuaG9zdCA9IHJlc3VsdC5ob3N0bmFtZSA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzIHx8IChyZXN1bHQuaG9zdCAmJiBzcmNQYXRoLmxlbmd0aCk7XG5cdFxuXHQgIGlmIChtdXN0RW5kQWJzICYmICFpc0Fic29sdXRlKSB7XG5cdCAgICBzcmNQYXRoLnVuc2hpZnQoJycpO1xuXHQgIH1cblx0XG5cdCAgaWYgKCFzcmNQYXRoLmxlbmd0aCkge1xuXHQgICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDtcblx0ICAgIHJlc3VsdC5wYXRoID0gbnVsbDtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmVzdWx0LnBhdGhuYW1lID0gc3JjUGF0aC5qb2luKCcvJyk7XG5cdCAgfVxuXHRcblx0ICAvL3RvIHN1cHBvcnQgcmVxdWVzdC5odHRwXG5cdCAgaWYgKCFpc051bGwocmVzdWx0LnBhdGhuYW1lKSB8fCAhaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7XG5cdCAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgK1xuXHQgICAgICAgICAgICAgICAgICAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7XG5cdCAgfVxuXHQgIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aCB8fCByZXN1bHQuYXV0aDtcblx0ICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7XG5cdCAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdFVybC5wcm90b3R5cGUucGFyc2VIb3N0ID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGhvc3QgPSB0aGlzLmhvc3Q7XG5cdCAgdmFyIHBvcnQgPSBwb3J0UGF0dGVybi5leGVjKGhvc3QpO1xuXHQgIGlmIChwb3J0KSB7XG5cdCAgICBwb3J0ID0gcG9ydFswXTtcblx0ICAgIGlmIChwb3J0ICE9PSAnOicpIHtcblx0ICAgICAgdGhpcy5wb3J0ID0gcG9ydC5zdWJzdHIoMSk7XG5cdCAgICB9XG5cdCAgICBob3N0ID0gaG9zdC5zdWJzdHIoMCwgaG9zdC5sZW5ndGggLSBwb3J0Lmxlbmd0aCk7XG5cdCAgfVxuXHQgIGlmIChob3N0KSB0aGlzLmhvc3RuYW1lID0gaG9zdDtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc051bGwoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcblx0fVxuXHRmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gIGFyZyA9PSBudWxsO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlLCBnbG9iYWwpIHsvKiEgaHR0cHM6Ly9tdGhzLmJlL3B1bnljb2RlIHYxLjMuMiBieSBAbWF0aGlhcyAqL1xuXHQ7KGZ1bmN0aW9uKHJvb3QpIHtcblx0XG5cdFx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlcyAqL1xuXHRcdHZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiZcblx0XHRcdCFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cdFx0dmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJlxuXHRcdFx0IW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cdFx0dmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDtcblx0XHRpZiAoXG5cdFx0XHRmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fFxuXHRcdFx0ZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRcdGZyZWVHbG9iYWwuc2VsZiA9PT0gZnJlZUdsb2JhbFxuXHRcdCkge1xuXHRcdFx0cm9vdCA9IGZyZWVHbG9iYWw7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBUaGUgYHB1bnljb2RlYCBvYmplY3QuXG5cdFx0ICogQG5hbWUgcHVueWNvZGVcblx0XHQgKiBAdHlwZSBPYmplY3Rcblx0XHQgKi9cblx0XHR2YXIgcHVueWNvZGUsXG5cdFxuXHRcdC8qKiBIaWdoZXN0IHBvc2l0aXZlIHNpZ25lZCAzMi1iaXQgZmxvYXQgdmFsdWUgKi9cblx0XHRtYXhJbnQgPSAyMTQ3NDgzNjQ3LCAvLyBha2EuIDB4N0ZGRkZGRkYgb3IgMl4zMS0xXG5cdFxuXHRcdC8qKiBCb290c3RyaW5nIHBhcmFtZXRlcnMgKi9cblx0XHRiYXNlID0gMzYsXG5cdFx0dE1pbiA9IDEsXG5cdFx0dE1heCA9IDI2LFxuXHRcdHNrZXcgPSAzOCxcblx0XHRkYW1wID0gNzAwLFxuXHRcdGluaXRpYWxCaWFzID0gNzIsXG5cdFx0aW5pdGlhbE4gPSAxMjgsIC8vIDB4ODBcblx0XHRkZWxpbWl0ZXIgPSAnLScsIC8vICdcXHgyRCdcblx0XG5cdFx0LyoqIFJlZ3VsYXIgZXhwcmVzc2lvbnMgKi9cblx0XHRyZWdleFB1bnljb2RlID0gL154bi0tLyxcblx0XHRyZWdleE5vbkFTQ0lJID0gL1teXFx4MjAtXFx4N0VdLywgLy8gdW5wcmludGFibGUgQVNDSUkgY2hhcnMgKyBub24tQVNDSUkgY2hhcnNcblx0XHRyZWdleFNlcGFyYXRvcnMgPSAvW1xceDJFXFx1MzAwMlxcdUZGMEVcXHVGRjYxXS9nLCAvLyBSRkMgMzQ5MCBzZXBhcmF0b3JzXG5cdFxuXHRcdC8qKiBFcnJvciBtZXNzYWdlcyAqL1xuXHRcdGVycm9ycyA9IHtcblx0XHRcdCdvdmVyZmxvdyc6ICdPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcycsXG5cdFx0XHQnbm90LWJhc2ljJzogJ0lsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCknLFxuXHRcdFx0J2ludmFsaWQtaW5wdXQnOiAnSW52YWxpZCBpbnB1dCdcblx0XHR9LFxuXHRcblx0XHQvKiogQ29udmVuaWVuY2Ugc2hvcnRjdXRzICovXG5cdFx0YmFzZU1pbnVzVE1pbiA9IGJhc2UgLSB0TWluLFxuXHRcdGZsb29yID0gTWF0aC5mbG9vcixcblx0XHRzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLFxuXHRcblx0XHQvKiogVGVtcG9yYXJ5IHZhcmlhYmxlICovXG5cdFx0a2V5O1xuXHRcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XG5cdFx0LyoqXG5cdFx0ICogQSBnZW5lcmljIGVycm9yIHV0aWxpdHkgZnVuY3Rpb24uXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgZXJyb3IgdHlwZS5cblx0XHQgKiBAcmV0dXJucyB7RXJyb3J9IFRocm93cyBhIGBSYW5nZUVycm9yYCB3aXRoIHRoZSBhcHBsaWNhYmxlIGVycm9yIG1lc3NhZ2UuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZXJyb3IodHlwZSkge1xuXHRcdFx0dGhyb3cgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogQSBnZW5lcmljIGBBcnJheSNtYXBgIHV0aWxpdHkgZnVuY3Rpb24uXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeSBhcnJheVxuXHRcdCAqIGl0ZW0uXG5cdFx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBhcnJheSBvZiB2YWx1ZXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIG1hcChhcnJheSwgZm4pIHtcblx0XHRcdHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdFx0XHR2YXIgcmVzdWx0ID0gW107XG5cdFx0XHR3aGlsZSAobGVuZ3RoLS0pIHtcblx0XHRcdFx0cmVzdWx0W2xlbmd0aF0gPSBmbihhcnJheVtsZW5ndGhdKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBBIHNpbXBsZSBgQXJyYXkjbWFwYC1saWtlIHdyYXBwZXIgdG8gd29yayB3aXRoIGRvbWFpbiBuYW1lIHN0cmluZ3Mgb3IgZW1haWxcblx0XHQgKiBhZGRyZXNzZXMuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzLlxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeVxuXHRcdCAqIGNoYXJhY3Rlci5cblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9IEEgbmV3IHN0cmluZyBvZiBjaGFyYWN0ZXJzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFja1xuXHRcdCAqIGZ1bmN0aW9uLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIG1hcERvbWFpbihzdHJpbmcsIGZuKSB7XG5cdFx0XHR2YXIgcGFydHMgPSBzdHJpbmcuc3BsaXQoJ0AnKTtcblx0XHRcdHZhciByZXN1bHQgPSAnJztcblx0XHRcdGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdC8vIEluIGVtYWlsIGFkZHJlc3Nlcywgb25seSB0aGUgZG9tYWluIG5hbWUgc2hvdWxkIGJlIHB1bnljb2RlZC4gTGVhdmVcblx0XHRcdFx0Ly8gdGhlIGxvY2FsIHBhcnQgKGkuZS4gZXZlcnl0aGluZyB1cCB0byBgQGApIGludGFjdC5cblx0XHRcdFx0cmVzdWx0ID0gcGFydHNbMF0gKyAnQCc7XG5cdFx0XHRcdHN0cmluZyA9IHBhcnRzWzFdO1xuXHRcdFx0fVxuXHRcdFx0Ly8gQXZvaWQgYHNwbGl0KHJlZ2V4KWAgZm9yIElFOCBjb21wYXRpYmlsaXR5LiBTZWUgIzE3LlxuXHRcdFx0c3RyaW5nID0gc3RyaW5nLnJlcGxhY2UocmVnZXhTZXBhcmF0b3JzLCAnXFx4MkUnKTtcblx0XHRcdHZhciBsYWJlbHMgPSBzdHJpbmcuc3BsaXQoJy4nKTtcblx0XHRcdHZhciBlbmNvZGVkID0gbWFwKGxhYmVscywgZm4pLmpvaW4oJy4nKTtcblx0XHRcdHJldHVybiByZXN1bHQgKyBlbmNvZGVkO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZVxuXHRcdCAqIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nLiBXaGlsZSBKYXZhU2NyaXB0IHVzZXMgVUNTLTIgaW50ZXJuYWxseSxcblx0XHQgKiB0aGlzIGZ1bmN0aW9uIHdpbGwgY29udmVydCBhIHBhaXIgb2Ygc3Vycm9nYXRlIGhhbHZlcyAoZWFjaCBvZiB3aGljaFxuXHRcdCAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LFxuXHRcdCAqIG1hdGNoaW5nIFVURi0xNi5cblx0XHQgKiBAc2VlIGBwdW55Y29kZS51Y3MyLmVuY29kZWBcblx0XHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHRcdCAqIEBuYW1lIGRlY29kZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuXG5cdFx0ICogQHJldHVybnMge0FycmF5fSBUaGUgbmV3IGFycmF5IG9mIGNvZGUgcG9pbnRzLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7XG5cdFx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0XHQgICAgY291bnRlciA9IDAsXG5cdFx0XHQgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcblx0XHRcdCAgICB2YWx1ZSxcblx0XHRcdCAgICBleHRyYTtcblx0XHRcdHdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHRcdHZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdFx0aWYgKHZhbHVlID49IDB4RDgwMCAmJiB2YWx1ZSA8PSAweERCRkYgJiYgY291bnRlciA8IGxlbmd0aCkge1xuXHRcdFx0XHRcdC8vIGhpZ2ggc3Vycm9nYXRlLCBhbmQgdGhlcmUgaXMgYSBuZXh0IGNoYXJhY3RlclxuXHRcdFx0XHRcdGV4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdFx0XHRpZiAoKGV4dHJhICYgMHhGQzAwKSA9PSAweERDMDApIHsgLy8gbG93IHN1cnJvZ2F0ZVxuXHRcdFx0XHRcdFx0b3V0cHV0LnB1c2goKCh2YWx1ZSAmIDB4M0ZGKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNGRikgKyAweDEwMDAwKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gdW5tYXRjaGVkIHN1cnJvZ2F0ZTsgb25seSBhcHBlbmQgdGhpcyBjb2RlIHVuaXQsIGluIGNhc2UgdGhlIG5leHRcblx0XHRcdFx0XHRcdC8vIGNvZGUgdW5pdCBpcyB0aGUgaGlnaCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpclxuXHRcdFx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0XHRcdFx0Y291bnRlci0tO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRvdXRwdXQucHVzaCh2YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBvdXRwdXQ7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBDcmVhdGVzIGEgc3RyaW5nIGJhc2VkIG9uIGFuIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuXG5cdFx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5kZWNvZGVgXG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlLnVjczJcblx0XHQgKiBAbmFtZSBlbmNvZGVcblx0XHQgKiBAcGFyYW0ge0FycmF5fSBjb2RlUG9pbnRzIFRoZSBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLlxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBuZXcgVW5pY29kZSBzdHJpbmcgKFVDUy0yKS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiB1Y3MyZW5jb2RlKGFycmF5KSB7XG5cdFx0XHRyZXR1cm4gbWFwKGFycmF5LCBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0XHR2YXIgb3V0cHV0ID0gJyc7XG5cdFx0XHRcdGlmICh2YWx1ZSA+IDB4RkZGRikge1xuXHRcdFx0XHRcdHZhbHVlIC09IDB4MTAwMDA7XG5cdFx0XHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7XG5cdFx0XHRcdFx0dmFsdWUgPSAweERDMDAgfCB2YWx1ZSAmIDB4M0ZGO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO1xuXHRcdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdFx0fSkuam9pbignJyk7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBDb252ZXJ0cyBhIGJhc2ljIGNvZGUgcG9pbnQgaW50byBhIGRpZ2l0L2ludGVnZXIuXG5cdFx0ICogQHNlZSBgZGlnaXRUb0Jhc2ljKClgXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gY29kZVBvaW50IFRoZSBiYXNpYyBudW1lcmljIGNvZGUgcG9pbnQgdmFsdWUuXG5cdFx0ICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWVyaWMgdmFsdWUgb2YgYSBiYXNpYyBjb2RlIHBvaW50IChmb3IgdXNlIGluXG5cdFx0ICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpbiB0aGUgcmFuZ2UgYDBgIHRvIGBiYXNlIC0gMWAsIG9yIGBiYXNlYCBpZlxuXHRcdCAqIHRoZSBjb2RlIHBvaW50IGRvZXMgbm90IHJlcHJlc2VudCBhIHZhbHVlLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGJhc2ljVG9EaWdpdChjb2RlUG9pbnQpIHtcblx0XHRcdGlmIChjb2RlUG9pbnQgLSA0OCA8IDEwKSB7XG5cdFx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSAyMjtcblx0XHRcdH1cblx0XHRcdGlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7XG5cdFx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA2NTtcblx0XHRcdH1cblx0XHRcdGlmIChjb2RlUG9pbnQgLSA5NyA8IDI2KSB7XG5cdFx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA5Nztcblx0XHRcdH1cblx0XHRcdHJldHVybiBiYXNlO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogQ29udmVydHMgYSBkaWdpdC9pbnRlZ2VyIGludG8gYSBiYXNpYyBjb2RlIHBvaW50LlxuXHRcdCAqIEBzZWUgYGJhc2ljVG9EaWdpdCgpYFxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpZ2l0IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludC5cblx0XHQgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYmFzaWMgY29kZSBwb2ludCB3aG9zZSB2YWx1ZSAod2hlbiB1c2VkIGZvclxuXHRcdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaXMgYGRpZ2l0YCwgd2hpY2ggbmVlZHMgdG8gYmUgaW4gdGhlIHJhbmdlXG5cdFx0ICogYDBgIHRvIGBiYXNlIC0gMWAuIElmIGBmbGFnYCBpcyBub24temVybywgdGhlIHVwcGVyY2FzZSBmb3JtIGlzXG5cdFx0ICogdXNlZDsgZWxzZSwgdGhlIGxvd2VyY2FzZSBmb3JtIGlzIHVzZWQuIFRoZSBiZWhhdmlvciBpcyB1bmRlZmluZWRcblx0XHQgKiBpZiBgZmxhZ2AgaXMgbm9uLXplcm8gYW5kIGBkaWdpdGAgaGFzIG5vIHVwcGVyY2FzZSBmb3JtLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGRpZ2l0VG9CYXNpYyhkaWdpdCwgZmxhZykge1xuXHRcdFx0Ly8gIDAuLjI1IG1hcCB0byBBU0NJSSBhLi56IG9yIEEuLlpcblx0XHRcdC8vIDI2Li4zNSBtYXAgdG8gQVNDSUkgMC4uOVxuXHRcdFx0cmV0dXJuIGRpZ2l0ICsgMjIgKyA3NSAqIChkaWdpdCA8IDI2KSAtICgoZmxhZyAhPSAwKSA8PCA1KTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuXG5cdFx0ICogaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzQ5MiNzZWN0aW9uLTMuNFxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gYWRhcHQoZGVsdGEsIG51bVBvaW50cywgZmlyc3RUaW1lKSB7XG5cdFx0XHR2YXIgayA9IDA7XG5cdFx0XHRkZWx0YSA9IGZpcnN0VGltZSA/IGZsb29yKGRlbHRhIC8gZGFtcCkgOiBkZWx0YSA+PiAxO1xuXHRcdFx0ZGVsdGEgKz0gZmxvb3IoZGVsdGEgLyBudW1Qb2ludHMpO1xuXHRcdFx0Zm9yICgvKiBubyBpbml0aWFsaXphdGlvbiAqLzsgZGVsdGEgPiBiYXNlTWludXNUTWluICogdE1heCA+PiAxOyBrICs9IGJhc2UpIHtcblx0XHRcdFx0ZGVsdGEgPSBmbG9vcihkZWx0YSAvIGJhc2VNaW51c1RNaW4pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZsb29yKGsgKyAoYmFzZU1pbnVzVE1pbiArIDEpICogZGVsdGEgLyAoZGVsdGEgKyBza2V3KSk7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZVxuXHRcdCAqIHN5bWJvbHMuXG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHtcblx0XHRcdC8vIERvbid0IHVzZSBVQ1MtMlxuXHRcdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdFx0ICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxuXHRcdFx0ICAgIG91dCxcblx0XHRcdCAgICBpID0gMCxcblx0XHRcdCAgICBuID0gaW5pdGlhbE4sXG5cdFx0XHQgICAgYmlhcyA9IGluaXRpYWxCaWFzLFxuXHRcdFx0ICAgIGJhc2ljLFxuXHRcdFx0ICAgIGosXG5cdFx0XHQgICAgaW5kZXgsXG5cdFx0XHQgICAgb2xkaSxcblx0XHRcdCAgICB3LFxuXHRcdFx0ICAgIGssXG5cdFx0XHQgICAgZGlnaXQsXG5cdFx0XHQgICAgdCxcblx0XHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHRcdCAgICBiYXNlTWludXNUO1xuXHRcblx0XHRcdC8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHM6IGxldCBgYmFzaWNgIGJlIHRoZSBudW1iZXIgb2YgaW5wdXQgY29kZVxuXHRcdFx0Ly8gcG9pbnRzIGJlZm9yZSB0aGUgbGFzdCBkZWxpbWl0ZXIsIG9yIGAwYCBpZiB0aGVyZSBpcyBub25lLCB0aGVuIGNvcHlcblx0XHRcdC8vIHRoZSBmaXJzdCBiYXNpYyBjb2RlIHBvaW50cyB0byB0aGUgb3V0cHV0LlxuXHRcblx0XHRcdGJhc2ljID0gaW5wdXQubGFzdEluZGV4T2YoZGVsaW1pdGVyKTtcblx0XHRcdGlmIChiYXNpYyA8IDApIHtcblx0XHRcdFx0YmFzaWMgPSAwO1xuXHRcdFx0fVxuXHRcblx0XHRcdGZvciAoaiA9IDA7IGogPCBiYXNpYzsgKytqKSB7XG5cdFx0XHRcdC8vIGlmIGl0J3Mgbm90IGEgYmFzaWMgY29kZSBwb2ludFxuXHRcdFx0XHRpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ25vdC1iYXNpYycpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG91dHB1dC5wdXNoKGlucHV0LmNoYXJDb2RlQXQoaikpO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIE1haW4gZGVjb2RpbmcgbG9vcDogc3RhcnQganVzdCBhZnRlciB0aGUgbGFzdCBkZWxpbWl0ZXIgaWYgYW55IGJhc2ljIGNvZGVcblx0XHRcdC8vIHBvaW50cyB3ZXJlIGNvcGllZDsgc3RhcnQgYXQgdGhlIGJlZ2lubmluZyBvdGhlcndpc2UuXG5cdFxuXHRcdFx0Zm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHtcblx0XG5cdFx0XHRcdC8vIGBpbmRleGAgaXMgdGhlIGluZGV4IG9mIHRoZSBuZXh0IGNoYXJhY3RlciB0byBiZSBjb25zdW1lZC5cblx0XHRcdFx0Ly8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLFxuXHRcdFx0XHQvLyB3aGljaCBnZXRzIGFkZGVkIHRvIGBpYC4gVGhlIG92ZXJmbG93IGNoZWNraW5nIGlzIGVhc2llclxuXHRcdFx0XHQvLyBpZiB3ZSBpbmNyZWFzZSBgaWAgYXMgd2UgZ28sIHRoZW4gc3VidHJhY3Qgb2ZmIGl0cyBzdGFydGluZ1xuXHRcdFx0XHQvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLlxuXHRcdFx0XHRmb3IgKG9sZGkgPSBpLCB3ID0gMSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7XG5cdFxuXHRcdFx0XHRcdGlmIChpbmRleCA+PSBpbnB1dExlbmd0aCkge1xuXHRcdFx0XHRcdFx0ZXJyb3IoJ2ludmFsaWQtaW5wdXQnKTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGRpZ2l0ID0gYmFzaWNUb0RpZ2l0KGlucHV0LmNoYXJDb2RlQXQoaW5kZXgrKykpO1xuXHRcblx0XHRcdFx0XHRpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7XG5cdFx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGkgKz0gZGlnaXQgKiB3O1xuXHRcdFx0XHRcdHQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpO1xuXHRcblx0XHRcdFx0XHRpZiAoZGlnaXQgPCB0KSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGJhc2VNaW51c1QgPSBiYXNlIC0gdDtcblx0XHRcdFx0XHRpZiAodyA+IGZsb29yKG1heEludCAvIGJhc2VNaW51c1QpKSB7XG5cdFx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHcgKj0gYmFzZU1pbnVzVDtcblx0XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdG91dCA9IG91dHB1dC5sZW5ndGggKyAxO1xuXHRcdFx0XHRiaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTtcblx0XG5cdFx0XHRcdC8vIGBpYCB3YXMgc3VwcG9zZWQgdG8gd3JhcCBhcm91bmQgZnJvbSBgb3V0YCB0byBgMGAsXG5cdFx0XHRcdC8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6XG5cdFx0XHRcdGlmIChmbG9vcihpIC8gb3V0KSA+IG1heEludCAtIG4pIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0biArPSBmbG9vcihpIC8gb3V0KTtcblx0XHRcdFx0aSAlPSBvdXQ7XG5cdFxuXHRcdFx0XHQvLyBJbnNlcnQgYG5gIGF0IHBvc2l0aW9uIGBpYCBvZiB0aGUgb3V0cHV0XG5cdFx0XHRcdG91dHB1dC5zcGxpY2UoaSsrLCAwLCBuKTtcblx0XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHVjczJlbmNvZGUob3V0cHV0KTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIENvbnZlcnRzIGEgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scyAoZS5nLiBhIGRvbWFpbiBuYW1lIGxhYmVsKSB0byBhXG5cdFx0ICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdFx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGVuY29kZShpbnB1dCkge1xuXHRcdFx0dmFyIG4sXG5cdFx0XHQgICAgZGVsdGEsXG5cdFx0XHQgICAgaGFuZGxlZENQQ291bnQsXG5cdFx0XHQgICAgYmFzaWNMZW5ndGgsXG5cdFx0XHQgICAgYmlhcyxcblx0XHRcdCAgICBqLFxuXHRcdFx0ICAgIG0sXG5cdFx0XHQgICAgcSxcblx0XHRcdCAgICBrLFxuXHRcdFx0ICAgIHQsXG5cdFx0XHQgICAgY3VycmVudFZhbHVlLFxuXHRcdFx0ICAgIG91dHB1dCA9IFtdLFxuXHRcdFx0ICAgIC8qKiBgaW5wdXRMZW5ndGhgIHdpbGwgaG9sZCB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIGluIGBpbnB1dGAuICovXG5cdFx0XHQgICAgaW5wdXRMZW5ndGgsXG5cdFx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0XHQgICAgaGFuZGxlZENQQ291bnRQbHVzT25lLFxuXHRcdFx0ICAgIGJhc2VNaW51c1QsXG5cdFx0XHQgICAgcU1pbnVzVDtcblx0XG5cdFx0XHQvLyBDb252ZXJ0IHRoZSBpbnB1dCBpbiBVQ1MtMiB0byBVbmljb2RlXG5cdFx0XHRpbnB1dCA9IHVjczJkZWNvZGUoaW5wdXQpO1xuXHRcblx0XHRcdC8vIENhY2hlIHRoZSBsZW5ndGhcblx0XHRcdGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXHRcblx0XHRcdC8vIEluaXRpYWxpemUgdGhlIHN0YXRlXG5cdFx0XHRuID0gaW5pdGlhbE47XG5cdFx0XHRkZWx0YSA9IDA7XG5cdFx0XHRiaWFzID0gaW5pdGlhbEJpYXM7XG5cdFxuXHRcdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50c1xuXHRcdFx0Zm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCAweDgwKSB7XG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGN1cnJlbnRWYWx1ZSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0aGFuZGxlZENQQ291bnQgPSBiYXNpY0xlbmd0aCA9IG91dHB1dC5sZW5ndGg7XG5cdFxuXHRcdFx0Ly8gYGhhbmRsZWRDUENvdW50YCBpcyB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIGhhbmRsZWQ7XG5cdFx0XHQvLyBgYmFzaWNMZW5ndGhgIGlzIHRoZSBudW1iZXIgb2YgYmFzaWMgY29kZSBwb2ludHMuXG5cdFxuXHRcdFx0Ly8gRmluaXNoIHRoZSBiYXNpYyBzdHJpbmcgLSBpZiBpdCBpcyBub3QgZW1wdHkgLSB3aXRoIGEgZGVsaW1pdGVyXG5cdFx0XHRpZiAoYmFzaWNMZW5ndGgpIHtcblx0XHRcdFx0b3V0cHV0LnB1c2goZGVsaW1pdGVyKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBNYWluIGVuY29kaW5nIGxvb3A6XG5cdFx0XHR3aGlsZSAoaGFuZGxlZENQQ291bnQgPCBpbnB1dExlbmd0aCkge1xuXHRcblx0XHRcdFx0Ly8gQWxsIG5vbi1iYXNpYyBjb2RlIHBvaW50cyA8IG4gaGF2ZSBiZWVuIGhhbmRsZWQgYWxyZWFkeS4gRmluZCB0aGUgbmV4dFxuXHRcdFx0XHQvLyBsYXJnZXIgb25lOlxuXHRcdFx0XHRmb3IgKG0gPSBtYXhJbnQsIGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPj0gbiAmJiBjdXJyZW50VmFsdWUgPCBtKSB7XG5cdFx0XHRcdFx0XHRtID0gY3VycmVudFZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LFxuXHRcdFx0XHQvLyBidXQgZ3VhcmQgYWdhaW5zdCBvdmVyZmxvd1xuXHRcdFx0XHRoYW5kbGVkQ1BDb3VudFBsdXNPbmUgPSBoYW5kbGVkQ1BDb3VudCArIDE7XG5cdFx0XHRcdGlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGRlbHRhICs9IChtIC0gbikgKiBoYW5kbGVkQ1BDb3VudFBsdXNPbmU7XG5cdFx0XHRcdG4gPSBtO1xuXHRcblx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA8IG4gJiYgKytkZWx0YSA+IG1heEludCkge1xuXHRcdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID09IG4pIHtcblx0XHRcdFx0XHRcdC8vIFJlcHJlc2VudCBkZWx0YSBhcyBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyXG5cdFx0XHRcdFx0XHRmb3IgKHEgPSBkZWx0YSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7XG5cdFx0XHRcdFx0XHRcdHQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpO1xuXHRcdFx0XHRcdFx0XHRpZiAocSA8IHQpIHtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRxTWludXNUID0gcSAtIHQ7XG5cdFx0XHRcdFx0XHRcdGJhc2VNaW51c1QgPSBiYXNlIC0gdDtcblx0XHRcdFx0XHRcdFx0b3V0cHV0LnB1c2goXG5cdFx0XHRcdFx0XHRcdFx0c3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyh0ICsgcU1pbnVzVCAlIGJhc2VNaW51c1QsIDApKVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRxID0gZmxvb3IocU1pbnVzVCAvIGJhc2VNaW51c1QpO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWMocSwgMCkpKTtcblx0XHRcdFx0XHRcdGJpYXMgPSBhZGFwdChkZWx0YSwgaGFuZGxlZENQQ291bnRQbHVzT25lLCBoYW5kbGVkQ1BDb3VudCA9PSBiYXNpY0xlbmd0aCk7XG5cdFx0XHRcdFx0XHRkZWx0YSA9IDA7XG5cdFx0XHRcdFx0XHQrK2hhbmRsZWRDUENvdW50O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0KytkZWx0YTtcblx0XHRcdFx0KytuO1xuXHRcblx0XHRcdH1cblx0XHRcdHJldHVybiBvdXRwdXQuam9pbignJyk7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzXG5cdFx0ICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLlxuXHRcdCAqIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IG9uIGEgc3RyaW5nIHRoYXQgaGFzIGFscmVhZHkgYmVlblxuXHRcdCAqIGNvbnZlcnRlZCB0byBVbmljb2RlLlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGVkIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG9cblx0XHQgKiBjb252ZXJ0IHRvIFVuaWNvZGUuXG5cdFx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlXG5cdFx0ICogc3RyaW5nLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkge1xuXHRcdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRcdHJldHVybiByZWdleFB1bnljb2RlLnRlc3Qoc3RyaW5nKVxuXHRcdFx0XHRcdD8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKVxuXHRcdFx0XHRcdDogc3RyaW5nO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG9cblx0XHQgKiBQdW55Y29kZS4gT25seSB0aGUgbm9uLUFTQ0lJIHBhcnRzIG9mIHRoZSBkb21haW4gbmFtZSB3aWxsIGJlIGNvbnZlcnRlZCxcblx0XHQgKiBpLmUuIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCdzIGFscmVhZHkgaW5cblx0XHQgKiBBU0NJSS5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG8gY29udmVydCwgYXMgYVxuXHRcdCAqIFVuaWNvZGUgc3RyaW5nLlxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBQdW55Y29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gZG9tYWluIG5hbWUgb3Jcblx0XHQgKiBlbWFpbCBhZGRyZXNzLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHRvQVNDSUkoaW5wdXQpIHtcblx0XHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0XHRyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZylcblx0XHRcdFx0XHQ/ICd4bi0tJyArIGVuY29kZShzdHJpbmcpXG5cdFx0XHRcdFx0OiBzdHJpbmc7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcblx0XHQvKiogRGVmaW5lIHRoZSBwdWJsaWMgQVBJICovXG5cdFx0cHVueWNvZGUgPSB7XG5cdFx0XHQvKipcblx0XHRcdCAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBQdW55Y29kZS5qcyB2ZXJzaW9uIG51bWJlci5cblx0XHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdFx0ICogQHR5cGUgU3RyaW5nXG5cdFx0XHQgKi9cblx0XHRcdCd2ZXJzaW9uJzogJzEuMy4yJyxcblx0XHRcdC8qKlxuXHRcdFx0ICogQW4gb2JqZWN0IG9mIG1ldGhvZHMgdG8gY29udmVydCBmcm9tIEphdmFTY3JpcHQncyBpbnRlcm5hbCBjaGFyYWN0ZXJcblx0XHRcdCAqIHJlcHJlc2VudGF0aW9uIChVQ1MtMikgdG8gVW5pY29kZSBjb2RlIHBvaW50cywgYW5kIGJhY2suXG5cdFx0XHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0XHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdFx0ICogQHR5cGUgT2JqZWN0XG5cdFx0XHQgKi9cblx0XHRcdCd1Y3MyJzoge1xuXHRcdFx0XHQnZGVjb2RlJzogdWNzMmRlY29kZSxcblx0XHRcdFx0J2VuY29kZSc6IHVjczJlbmNvZGVcblx0XHRcdH0sXG5cdFx0XHQnZGVjb2RlJzogZGVjb2RlLFxuXHRcdFx0J2VuY29kZSc6IGVuY29kZSxcblx0XHRcdCd0b0FTQ0lJJzogdG9BU0NJSSxcblx0XHRcdCd0b1VuaWNvZGUnOiB0b1VuaWNvZGVcblx0XHR9O1xuXHRcblx0XHQvKiogRXhwb3NlIGBwdW55Y29kZWAgKi9cblx0XHQvLyBTb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzLCBsaWtlIHIuanMsIGNoZWNrIGZvciBzcGVjaWZpYyBjb25kaXRpb24gcGF0dGVybnNcblx0XHQvLyBsaWtlIHRoZSBmb2xsb3dpbmc6XG5cdFx0aWYgKFxuXHRcdFx0dHJ1ZVxuXHRcdCkge1xuXHRcdFx0IShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gcHVueWNvZGU7XG5cdFx0XHR9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHRcdH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuXHRcdFx0aWYgKG1vZHVsZS5leHBvcnRzID09IGZyZWVFeHBvcnRzKSB7IC8vIGluIE5vZGUuanMgb3IgUmluZ29KUyB2MC44LjArXG5cdFx0XHRcdGZyZWVNb2R1bGUuZXhwb3J0cyA9IHB1bnljb2RlO1xuXHRcdFx0fSBlbHNlIHsgLy8gaW4gTmFyd2hhbCBvciBSaW5nb0pTIHYwLjcuMC1cblx0XHRcdFx0Zm9yIChrZXkgaW4gcHVueWNvZGUpIHtcblx0XHRcdFx0XHRwdW55Y29kZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIChmcmVlRXhwb3J0c1trZXldID0gcHVueWNvZGVba2V5XSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2UgeyAvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyXG5cdFx0XHRyb290LnB1bnljb2RlID0gcHVueWNvZGU7XG5cdFx0fVxuXHRcblx0fSh0aGlzKSk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxMCkobW9kdWxlKSwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcclxuXHRcdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcclxuXHRcdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBtb2R1bGU7XHJcblx0fVxyXG5cblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLmRlY29kZSA9IGV4cG9ydHMucGFyc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0ZXhwb3J0cy5lbmNvZGUgPSBleHBvcnRzLnN0cmluZ2lmeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIElmIG9iai5oYXNPd25Qcm9wZXJ0eSBoYXMgYmVlbiBvdmVycmlkZGVuLCB0aGVuIGNhbGxpbmdcblx0Ly8gb2JqLmhhc093blByb3BlcnR5KHByb3ApIHdpbGwgYnJlYWsuXG5cdC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2lzc3Vlcy8xNzA3XG5cdGZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihxcywgc2VwLCBlcSwgb3B0aW9ucykge1xuXHQgIHNlcCA9IHNlcCB8fCAnJic7XG5cdCAgZXEgPSBlcSB8fCAnPSc7XG5cdCAgdmFyIG9iaiA9IHt9O1xuXHRcblx0ICBpZiAodHlwZW9mIHFzICE9PSAnc3RyaW5nJyB8fCBxcy5sZW5ndGggPT09IDApIHtcblx0ICAgIHJldHVybiBvYmo7XG5cdCAgfVxuXHRcblx0ICB2YXIgcmVnZXhwID0gL1xcKy9nO1xuXHQgIHFzID0gcXMuc3BsaXQoc2VwKTtcblx0XG5cdCAgdmFyIG1heEtleXMgPSAxMDAwO1xuXHQgIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLm1heEtleXMgPT09ICdudW1iZXInKSB7XG5cdCAgICBtYXhLZXlzID0gb3B0aW9ucy5tYXhLZXlzO1xuXHQgIH1cblx0XG5cdCAgdmFyIGxlbiA9IHFzLmxlbmd0aDtcblx0ICAvLyBtYXhLZXlzIDw9IDAgbWVhbnMgdGhhdCB3ZSBzaG91bGQgbm90IGxpbWl0IGtleXMgY291bnRcblx0ICBpZiAobWF4S2V5cyA+IDAgJiYgbGVuID4gbWF4S2V5cykge1xuXHQgICAgbGVuID0gbWF4S2V5cztcblx0ICB9XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcblx0ICAgIHZhciB4ID0gcXNbaV0ucmVwbGFjZShyZWdleHAsICclMjAnKSxcblx0ICAgICAgICBpZHggPSB4LmluZGV4T2YoZXEpLFxuXHQgICAgICAgIGtzdHIsIHZzdHIsIGssIHY7XG5cdFxuXHQgICAgaWYgKGlkeCA+PSAwKSB7XG5cdCAgICAgIGtzdHIgPSB4LnN1YnN0cigwLCBpZHgpO1xuXHQgICAgICB2c3RyID0geC5zdWJzdHIoaWR4ICsgMSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBrc3RyID0geDtcblx0ICAgICAgdnN0ciA9ICcnO1xuXHQgICAgfVxuXHRcblx0ICAgIGsgPSBkZWNvZGVVUklDb21wb25lbnQoa3N0cik7XG5cdCAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZzdHIpO1xuXHRcblx0ICAgIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrKSkge1xuXHQgICAgICBvYmpba10gPSB2O1xuXHQgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9ialtrXSkpIHtcblx0ICAgICAgb2JqW2tdLnB1c2godik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvYmpba10gPSBbb2JqW2tdLCB2XTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBvYmo7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcblx0Ly8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXHQvLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcblx0Ly8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuXHQvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG5cdC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuXHQvLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcblx0Ly9cblx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcblx0Ly8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cdC8vXG5cdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncblx0Ly8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuXHQvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG5cdC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuXHQvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcblx0Ly8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuXHQvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHtcblx0ICBzd2l0Y2ggKHR5cGVvZiB2KSB7XG5cdCAgICBjYXNlICdzdHJpbmcnOlxuXHQgICAgICByZXR1cm4gdjtcblx0XG5cdCAgICBjYXNlICdib29sZWFuJzpcblx0ICAgICAgcmV0dXJuIHYgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXHRcblx0ICAgIGNhc2UgJ251bWJlcic6XG5cdCAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSA/IHYgOiAnJztcblx0XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICByZXR1cm4gJyc7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmosIHNlcCwgZXEsIG5hbWUpIHtcblx0ICBzZXAgPSBzZXAgfHwgJyYnO1xuXHQgIGVxID0gZXEgfHwgJz0nO1xuXHQgIGlmIChvYmogPT09IG51bGwpIHtcblx0ICAgIG9iaiA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uKGspIHtcblx0ICAgICAgdmFyIGtzID0gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShrKSkgKyBlcTtcblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqW2tdKSkge1xuXHQgICAgICAgIHJldHVybiBvYmpba10ubWFwKGZ1bmN0aW9uKHYpIHtcblx0ICAgICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUodikpO1xuXHQgICAgICAgIH0pLmpvaW4oc2VwKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9ialtrXSkpO1xuXHQgICAgICB9XG5cdCAgICB9KS5qb2luKHNlcCk7XG5cdFxuXHQgIH1cblx0XG5cdCAgaWYgKCFuYW1lKSByZXR1cm4gJyc7XG5cdCAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUobmFtZSkpICsgZXEgK1xuXHQgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9iaikpO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgQWN0aXZlQ2FsbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHR2YXIgQnVzaW5lc3NBZGRyZXNzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIENhbGxMb2dfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgRGVwYXJ0bWVudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciBEZXZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgRGlhbGluZ1BsYW5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHR2YXIgRXh0ZW5zaW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0dmFyIE9yZGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTtcblx0dmFyIFBob25lTnVtYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIFJlY29yZGluZ18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdHZhciBTZXJ2aWNlSW5mb18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBBY2NvdW50ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhBY2NvdW50LCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQWNjb3VudChwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJhY2NvdW50XCIsIGlkIHx8IFwiflwiLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKlxuXHQgICAgICovXG5cdCAgICBBY2NvdW50LnByb3RvdHlwZS5hY3RpdmVDYWxscyA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQWN0aXZlQ2FsbHNfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqXG5cdCAgICAgKi9cblx0ICAgIEFjY291bnQucHJvdG90eXBlLmJ1c2luZXNzQWRkcmVzcyA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQnVzaW5lc3NBZGRyZXNzXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGEgY2FsbCBsb2cgcmVjb3JkXG5cdCAgICAgKi9cblx0ICAgIEFjY291bnQucHJvdG90eXBlLmNhbGxMb2cgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENhbGxMb2dfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBEZXBhcnRtZW50IGV4dGVuc2lvbiAoc2FtZSBhcyBleHRlbnNpb25JZCBidXQgb25seSB0aGUgSUQgb2YgYSBkZXBhcnRtZW50IGV4dGVuc2lvbiBpcyB2YWxpZClcblx0ICAgICAqL1xuXHQgICAgQWNjb3VudC5wcm90b3R5cGUuZGVwYXJ0bWVudCA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRGVwYXJ0bWVudF8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIGRldmljZVxuXHQgICAgICovXG5cdCAgICBBY2NvdW50LnByb3RvdHlwZS5kZXZpY2UgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IERldmljZV8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICpcblx0ICAgICAqL1xuXHQgICAgQWNjb3VudC5wcm90b3R5cGUuZGlhbGluZ1BsYW4gPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IERpYWxpbmdQbGFuXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGFuIGV4dGVuc2lvbiBvciB0aWxkZSAofikgdG8gaW5kaWNhdGUgdGhlIGV4dGVuc2lvbiBhc3NpZ25lZCB0byB0aGUgYWNjb3VudCBsb2dnZWQtaW4gd2l0aGluIHRoZSBjdXJyZW50IHNlc3Npb25cblx0ICAgICAqL1xuXHQgICAgQWNjb3VudC5wcm90b3R5cGUuZXh0ZW5zaW9uID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBFeHRlbnNpb25fMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYW4gb3JkZXJcblx0ICAgICAqL1xuXHQgICAgQWNjb3VudC5wcm90b3R5cGUub3JkZXIgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IE9yZGVyXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGEgcGhvbmUgbnVtYmVyXG5cdCAgICAgKi9cblx0ICAgIEFjY291bnQucHJvdG90eXBlLnBob25lTnVtYmVyID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBQaG9uZU51bWJlcl8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiByZWNvcmRpbmcgKHJldHVybmVkIGluIENhbGwgTG9nKVxuXHQgICAgICovXG5cdCAgICBBY2NvdW50LnByb3RvdHlwZS5yZWNvcmRpbmcgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFJlY29yZGluZ18xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICpcblx0ICAgICAqL1xuXHQgICAgQWNjb3VudC5wcm90b3R5cGUuc2VydmljZUluZm8gPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFNlcnZpY2VJbmZvXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgICAgR2V0IEFjY291bnQgSW5mbyBieSBJRFxuXHQgICAgKi9cblx0ICAgIEFjY291bnQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBBY2NvdW50O1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQWNjb3VudDtcblxuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKipcblx0ICogVXJsUGFydHNcblx0ICovXG5cdHZhciBVcmxTZWN0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFVybFNlY3Rpb24obmFtZSwgdmFsdWUsIHBydiwgc2VydmljZSkge1xuXHQgICAgICAgIHRoaXMuX3NlcnZpY2UgPSBzZXJ2aWNlO1xuXHQgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlIHx8IG51bGw7XG5cdCAgICAgICAgdGhpcy5wcmV2aW91cyA9IHBydjtcblx0ICAgIH1cblx0ICAgIFVybFNlY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKHdpdGhWYWx1ZSkge1xuXHQgICAgICAgIGlmICh3aXRoVmFsdWUgPT09IHZvaWQgMCkgeyB3aXRoVmFsdWUgPSB0cnVlOyB9XG5cdCAgICAgICAgdmFyIHN0ciA9IFwiL1wiICsgdGhpcy5uYW1lO1xuXHQgICAgICAgIGlmICh3aXRoVmFsdWUgJiYgdGhpcy52YWx1ZSkge1xuXHQgICAgICAgICAgICBzdHIgKz0gXCIvXCIgKyB0aGlzLnZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gc3RyO1xuXHQgICAgfTtcblx0ICAgIFVybFNlY3Rpb24ucHJvdG90eXBlLmdldEVuZHBvaW50ID0gZnVuY3Rpb24gKHdpdGhWYWx1ZSkge1xuXHQgICAgICAgIGlmICh3aXRoVmFsdWUgPT09IHZvaWQgMCkgeyB3aXRoVmFsdWUgPSB0cnVlOyB9XG5cdCAgICAgICAgdmFyIGVuZCA9IFwiXCI7XG5cdCAgICAgICAgaWYgKHRoaXMucHJldmlvdXMpIHtcblx0ICAgICAgICAgICAgZW5kID0gdGhpcy5wcmV2aW91cy5nZXRFbmRwb2ludCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZW5kICsgdGhpcy50b1N0cmluZyh3aXRoVmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIFVybFNlY3Rpb24ucHJvdG90eXBlLmdldFNlcnZpY2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHNlYyA9IHRoaXM7XG5cdCAgICAgICAgd2hpbGUgKHNlYykge1xuXHQgICAgICAgICAgICBpZiAoc2VjLl9zZXJ2aWNlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gc2VjLl9zZXJ2aWNlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChzZWMucHJldmlvdXMpIHtcblx0ICAgICAgICAgICAgICAgIHNlYyA9IHNlYy5wcmV2aW91cztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gVXJsU2VjdGlvbjtcblx0fSgpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBVcmxTZWN0aW9uO1xuXG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgQWN0aXZlQ2FsbHMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEFjdGl2ZUNhbGxzLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQWN0aXZlQ2FsbHMocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiYWN0aXZlLWNhbGxzXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgR2V0IEFjY291bnQgQWN0aXZlIChSZWNlbnQpIENhbGxzXG5cdCAgICAqL1xuXHQgICAgQWN0aXZlQ2FsbHMucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAocXVlcnkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBBY3RpdmVDYWxscztcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEFjdGl2ZUNhbGxzO1xuXG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgQnVzaW5lc3NBZGRyZXNzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhCdXNpbmVzc0FkZHJlc3MsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBCdXNpbmVzc0FkZHJlc3MocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiYnVzaW5lc3MtYWRkcmVzc1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBDb21wYW55IEJ1c2luZXNzIEFkZHJlc3Ncblx0ICAgICovXG5cdCAgICBCdXNpbmVzc0FkZHJlc3MucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIFVwZGF0ZSBDb21wYW55IEJ1c2luZXNzIEFkZHJlc3Ncblx0ICAgICovXG5cdCAgICBCdXNpbmVzc0FkZHJlc3MucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChib2R5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1c2luZXNzQWRkcmVzcztcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEJ1c2luZXNzQWRkcmVzcztcblxuXG4vKioqLyB9LFxuLyogMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIENhbGxMb2cgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENhbGxMb2csIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDYWxsTG9nKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImNhbGwtbG9nXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgR2V0IEFjY291bnQgQ2FsbCBMb2dcblx0ICAgICovXG5cdCAgICBDYWxsTG9nLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgQWNjb3VudCBDYWxsIExvZyBSZWNvcmQgYnkgSURcblx0ICAgICovXG5cdCAgICBDYWxsTG9nLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBEZWxldGUgRXh0ZW5zaW9uIENhbGwgTG9nXG5cdCAgICAqL1xuXHQgICAgQ2FsbExvZy5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZGVsZXRlXCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2UoKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQ2FsbExvZztcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENhbGxMb2c7XG5cblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBNZW1iZXJzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIERlcGFydG1lbnQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlcGFydG1lbnQsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBEZXBhcnRtZW50KHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImRlcGFydG1lbnRcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqXG5cdCAgICAgKi9cblx0ICAgIERlcGFydG1lbnQucHJvdG90eXBlLm1lbWJlcnMgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IE1lbWJlcnNfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRGVwYXJ0bWVudDtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IERlcGFydG1lbnQ7XG5cblxuLyoqKi8gfSxcbi8qIDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBNZW1iZXJzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhNZW1iZXJzLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTWVtYmVycyhwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJtZW1iZXJzXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgR2V0IERlcGFydG1lbnQgTWVtYmVyc1xuXHQgICAgKi9cblx0ICAgIE1lbWJlcnMucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAocXVlcnkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNZW1iZXJzO1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTWVtYmVycztcblxuXG4vKioqLyB9LFxuLyogMjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIERldmljZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGV2aWNlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGV2aWNlKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImRldmljZVwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBBY2NvdW50IERldmljZSBMaXN0XG5cdCAgICAqL1xuXHQgICAgRGV2aWNlLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBEZXZpY2UgYnkgSURcblx0ICAgICovXG5cdCAgICBEZXZpY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZXZpY2U7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBEZXZpY2U7XG5cblxuLyoqKi8gfSxcbi8qIDIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBEaWFsaW5nUGxhbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGlhbGluZ1BsYW4sIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBEaWFsaW5nUGxhbihwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJkaWFsaW5nLXBsYW5cIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgSUJPIERpYWxpbmcgUGxhbnNcblx0ICAgICovXG5cdCAgICBEaWFsaW5nUGxhbi5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBxdWVyeTogcXVlcnksIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERpYWxpbmdQbGFuO1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRGlhbGluZ1BsYW47XG5cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBBY3RpdmVDYWxsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciBBZGRyZXNzQm9va1N5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHR2YXIgQWRkcmVzc0Jvb2tfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHR2YXIgQW5zd2VyaW5nUnVsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdHZhciBBdXRoelByb2ZpbGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR2YXIgQmxvY2tlZE51bWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdHZhciBCdXNpbmVzc0hvdXJzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0dmFyIENhbGxMb2dfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgQ2FsbExvZ1N5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHR2YXIgQ29tcGFueVBhZ2VyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0dmFyIENvbmZlcmVuY2luZ18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdHZhciBEZXZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgRmF4XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0dmFyIEZvcndhcmRpbmdOdW1iZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXHR2YXIgR3JhbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgR3JlZXRpbmdfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHR2YXIgTWVldGluZ18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBNZXNzYWdlU3RvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXHR2YXIgTWVzc2FnZVN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXHR2YXIgUGhvbmVOdW1iZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHR2YXIgUHJlc2VuY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgUHJvZmlsZUltYWdlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0dmFyIFJpbmdvdXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgU21zXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIEV4dGVuc2lvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRXh0ZW5zaW9uLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRXh0ZW5zaW9uKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImV4dGVuc2lvblwiLCBpZCB8fCBcIn5cIiwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICpcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5hY3RpdmVDYWxscyA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQWN0aXZlQ2FsbHNfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqXG5cdCAgICAgKi9cblx0ICAgIEV4dGVuc2lvbi5wcm90b3R5cGUuYWRkcmVzc0Jvb2tTeW5jID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBBZGRyZXNzQm9va1N5bmNfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqXG5cdCAgICAgKi9cblx0ICAgIEV4dGVuc2lvbi5wcm90b3R5cGUuYWRkcmVzc0Jvb2sgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEFkZHJlc3NCb29rXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGFuIGFuc3dlcmluZyBydWxlLiBUaGUgdmFsdWUgY2FuIGJlIHN0YW5kYXJkIGRpZ2l0YWwgSUQgb3Igc3BlY2lmaWMgSUQgLSBlaXRoZXIgYnVzaW5lc3MtaG91cnMtcnVsZSBvciBhZnRlci1ob3Vycy1ydWxlXG5cdCAgICAgKi9cblx0ICAgIEV4dGVuc2lvbi5wcm90b3R5cGUuYW5zd2VyaW5nUnVsZSA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQW5zd2VyaW5nUnVsZV8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICpcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5hdXRoelByb2ZpbGUgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEF1dGh6UHJvZmlsZV8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIGJsb2NrZWQgbnVtYmVyIGxpc3QgZW50cnlcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5ibG9ja2VkTnVtYmVyID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBCbG9ja2VkTnVtYmVyXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKlxuXHQgICAgICovXG5cdCAgICBFeHRlbnNpb24ucHJvdG90eXBlLmJ1c2luZXNzSG91cnMgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEJ1c2luZXNzSG91cnNfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBjYWxsIGxvZyByZWNvcmRcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5jYWxsTG9nID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBDYWxsTG9nXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKlxuXHQgICAgICovXG5cdCAgICBFeHRlbnNpb24ucHJvdG90eXBlLmNhbGxMb2dTeW5jID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBDYWxsTG9nU3luY18xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICpcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5jb21wYW55UGFnZXIgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENvbXBhbnlQYWdlcl8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICpcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5jb25mZXJlbmNpbmcgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENvbmZlcmVuY2luZ18xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIGRldmljZVxuXHQgICAgICovXG5cdCAgICBFeHRlbnNpb24ucHJvdG90eXBlLmRldmljZSA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRGV2aWNlXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKlxuXHQgICAgICovXG5cdCAgICBFeHRlbnNpb24ucHJvdG90eXBlLmZheCA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRmF4XzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKlxuXHQgICAgICovXG5cdCAgICBFeHRlbnNpb24ucHJvdG90eXBlLmZvcndhcmRpbmdOdW1iZXIgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEZvcndhcmRpbmdOdW1iZXJfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqXG5cdCAgICAgKi9cblx0ICAgIEV4dGVuc2lvbi5wcm90b3R5cGUuZ3JhbnQgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEdyYW50XzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGEgZ3JlZXRpbmdcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5ncmVldGluZyA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgR3JlZXRpbmdfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBtZWV0aW5nXG5cdCAgICAgKi9cblx0ICAgIEV4dGVuc2lvbi5wcm90b3R5cGUubWVldGluZyA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgTWVldGluZ18xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIG1lc3NhZ2Vcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5tZXNzYWdlU3RvcmUgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VTdG9yZV8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICpcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5tZXNzYWdlU3luYyA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgTWVzc2FnZVN5bmNfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBwaG9uZSBudW1iZXJcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5waG9uZU51bWJlciA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgUGhvbmVOdW1iZXJfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqXG5cdCAgICAgKi9cblx0ICAgIEV4dGVuc2lvbi5wcm90b3R5cGUucHJlc2VuY2UgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFByZXNlbmNlXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBEaW1lbnNpb25zIG9mIGEgcHJvZmlsZSBpbWFnZSB3aGljaCB3aWxsIGJlIHJldHVybmVkIGluIHJlc3BvbnNlLlxuXHQgICAgICovXG5cdCAgICBFeHRlbnNpb24ucHJvdG90eXBlLnByb2ZpbGVJbWFnZSA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgUHJvZmlsZUltYWdlXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGEgUmluZ091dCBjYWxsXG5cdCAgICAgKi9cblx0ICAgIEV4dGVuc2lvbi5wcm90b3R5cGUucmluZ291dCA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgUmluZ291dF8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICpcblx0ICAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5zbXMgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFNtc18xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBFeHRlbnNpb24gTGlzdFxuXHQgICAgKi9cblx0ICAgIEV4dGVuc2lvbi5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBxdWVyeTogcXVlcnksIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgICAgR2V0IEV4dGVuc2lvbiBJbmZvIGJ5IElEXG5cdCAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBVcGRhdGUgRXh0ZW5zaW9uIGJ5IElEXG5cdCAgICAqL1xuXHQgICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoYm9keSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInB1dFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBFeHRlbnNpb247XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBFeHRlbnNpb247XG5cblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBBZGRyZXNzQm9va1N5bmMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEFkZHJlc3NCb29rU3luYywgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFkZHJlc3NCb29rU3luYyhwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJhZGRyZXNzLWJvb2stc3luY1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICAgIENvbnRhY3RzIFN5bmNocm9uaXphdGlvblxuXHQgICAgKi9cblx0ICAgIEFkZHJlc3NCb29rU3luYy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBBZGRyZXNzQm9va1N5bmM7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBBZGRyZXNzQm9va1N5bmM7XG5cblxuLyoqKi8gfSxcbi8qIDI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBDb250YWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0dmFyIEdyb3VwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0dmFyIEFkZHJlc3NCb29rID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhBZGRyZXNzQm9vaywgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFkZHJlc3NCb29rKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImFkZHJlc3MtYm9va1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIGNvbnRhY3QgcmVjb3JkIGluIHRoZSBSaW5nQ2VudHJhbCBkYXRhYmFzZVxuXHQgICAgICovXG5cdCAgICBBZGRyZXNzQm9vay5wcm90b3R5cGUuY29udGFjdCA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQ29udGFjdF8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIGdyb3VwIGluIGFuIGFkZHJlc3MgYm9va1xuXHQgICAgICovXG5cdCAgICBBZGRyZXNzQm9vay5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEdyb3VwXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEFkZHJlc3NCb29rO1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQWRkcmVzc0Jvb2s7XG5cblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBDb250YWN0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhDb250YWN0LCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ29udGFjdChwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJjb250YWN0XCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgQ3JlYXRlIE5ldyBDb250YWN0XG5cdCAgICAqL1xuXHQgICAgQ29udGFjdC5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChib2R5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicG9zdFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBDb250YWN0IExpc3Rcblx0ICAgICovXG5cdCAgICBDb250YWN0LnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBEZWxldGUgQ29udGFjdCBieSBJRFxuXHQgICAgKi9cblx0ICAgIENvbnRhY3QucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJkZWxldGVcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2UoKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgQ29udGFjdCBieSBJRFxuXHQgICAgKi9cblx0ICAgIENvbnRhY3QucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIFVwZGF0ZSBDb250YWN0IGJ5IElEXG5cdCAgICAqL1xuXHQgICAgQ29udGFjdC5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGJvZHkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwdXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQ29udGFjdDtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENvbnRhY3Q7XG5cblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBHcm91cCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoR3JvdXAsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBHcm91cChwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJncm91cFwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBDb250YWN0IEdyb3VwIExpc3Rcblx0ICAgICovXG5cdCAgICBHcm91cC5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgQ29udGFjdCBHcm91cCBieSBJRFxuXHQgICAgKi9cblx0ICAgIEdyb3VwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gR3JvdXA7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBHcm91cDtcblxuXG4vKioqLyB9LFxuLyogMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIEFuc3dlcmluZ1J1bGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEFuc3dlcmluZ1J1bGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBbnN3ZXJpbmdSdWxlKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImFuc3dlcmluZy1ydWxlXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgQ3JlYXRlIEN1c3RvbSBBbnN3ZXJpbmcgUnVsZVxuXHQgICAgKi9cblx0ICAgIEFuc3dlcmluZ1J1bGUucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgQW5zd2VyaW5nIFJ1bGVzIExpc3Rcblx0ICAgICovXG5cdCAgICBBbnN3ZXJpbmdSdWxlLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIERlbGV0ZSBBbnN3ZXJpbmcgUnVsZSBieSBJRFxuXHQgICAgKi9cblx0ICAgIEFuc3dlcmluZ1J1bGUucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJkZWxldGVcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2UoKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgQ3VzdG9tIEFuc3dlcmluZyBSdWxlIGJ5IElEXG5cdCAgICAqL1xuXHQgICAgQW5zd2VyaW5nUnVsZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgICAgVXBkYXRlIEFuc3dlcmluZyBSdWxlIGJ5IElEXG5cdCAgICAqL1xuXHQgICAgQW5zd2VyaW5nUnVsZS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGJvZHkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwdXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQW5zd2VyaW5nUnVsZTtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEFuc3dlcmluZ1J1bGU7XG5cblxuLyoqKi8gfSxcbi8qIDI5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBDaGVja18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdHZhciBBdXRoelByb2ZpbGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEF1dGh6UHJvZmlsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEF1dGh6UHJvZmlsZShwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJhdXRoei1wcm9maWxlXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKlxuXHQgICAgICovXG5cdCAgICBBdXRoelByb2ZpbGUucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBDaGVja18xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBVc2VyIFBlcm1pc3Npb25zXG5cdCAgICAqL1xuXHQgICAgQXV0aHpQcm9maWxlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXV0aHpQcm9maWxlO1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQXV0aHpQcm9maWxlO1xuXG5cbi8qKiovIH0sXG4vKiAzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgQ2hlY2sgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENoZWNrLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ2hlY2socHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiY2hlY2tcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBDaGVjayBVc2VyIFBlcm1pc3Npb25zXG5cdCAgICAqL1xuXHQgICAgQ2hlY2sucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQ2hlY2s7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDaGVjaztcblxuXG4vKioqLyB9LFxuLyogMzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIEJsb2NrZWROdW1iZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJsb2NrZWROdW1iZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBCbG9ja2VkTnVtYmVyKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImJsb2NrZWQtbnVtYmVyXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgQWRkIE5ldyBCbG9ja2VkIE51bWJlclxuXHQgICAgKi9cblx0ICAgIEJsb2NrZWROdW1iZXIucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgQmxvY2tlZCBOdW1iZXIgTGlzdFxuXHQgICAgKi9cblx0ICAgIEJsb2NrZWROdW1iZXIucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgICAgRGVsZXRlIEJsb2NrZWQgTnVtYmVyIGJ5IElEXG5cdCAgICAqL1xuXHQgICAgQmxvY2tlZE51bWJlci5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImRlbGV0ZVwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5yZXNwb25zZSgpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBCbG9ja2VkIE51bWJlciBieSBJRFxuXHQgICAgKi9cblx0ICAgIEJsb2NrZWROdW1iZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIFVwZGF0ZSBCbG9ja2VkIE51bWJlciBMYWJlbFxuXHQgICAgKi9cblx0ICAgIEJsb2NrZWROdW1iZXIucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChib2R5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJsb2NrZWROdW1iZXI7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBCbG9ja2VkTnVtYmVyO1xuXG5cbi8qKiovIH0sXG4vKiAzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgQnVzaW5lc3NIb3VycyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQnVzaW5lc3NIb3VycywgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEJ1c2luZXNzSG91cnMocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiYnVzaW5lc3MtaG91cnNcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgVXNlciBIb3VycyBTZXR0aW5nXG5cdCAgICAqL1xuXHQgICAgQnVzaW5lc3NIb3Vycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1c2luZXNzSG91cnM7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBCdXNpbmVzc0hvdXJzO1xuXG5cbi8qKiovIH0sXG4vKiAzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgQ2FsbExvZ1N5bmMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENhbGxMb2dTeW5jLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ2FsbExvZ1N5bmMocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiY2FsbC1sb2ctc3luY1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICAgIENhbGwgTG9nIFN5bmNocm9uaXphdGlvblxuXHQgICAgKi9cblx0ICAgIENhbGxMb2dTeW5jLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocXVlcnkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogcXVlcnksIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENhbGxMb2dTeW5jO1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2FsbExvZ1N5bmM7XG5cblxuLyoqKi8gfSxcbi8qIDM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBDb21wYW55UGFnZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENvbXBhbnlQYWdlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIENvbXBhbnlQYWdlcihwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJjb21wYW55LXBhZ2VyXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgQ3JlYXRlIGFuZCBTZW5kIFBhZ2VyIE1lc3NhZ2Vcblx0ICAgICovXG5cdCAgICBDb21wYW55UGFnZXIucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQ29tcGFueVBhZ2VyO1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ29tcGFueVBhZ2VyO1xuXG5cbi8qKiovIH0sXG4vKiAzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgQ29uZmVyZW5jaW5nID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhDb25mZXJlbmNpbmcsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDb25mZXJlbmNpbmcocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiY29uZmVyZW5jaW5nXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgR2V0IENvbmZlcmVuY2luZyBpbmZvXG5cdCAgICAqL1xuXHQgICAgQ29uZmVyZW5jaW5nLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocXVlcnkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogcXVlcnksIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgICAgVXBkYXRlIENvbmZlcmVuY2luZyBpbmZvXG5cdCAgICAqL1xuXHQgICAgQ29uZmVyZW5jaW5nLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoYm9keSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInB1dFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDb25mZXJlbmNpbmc7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDb25mZXJlbmNpbmc7XG5cblxuLyoqKi8gfSxcbi8qIDM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykge1widXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIEZvcm1EYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cdHZhciBGYXggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZheCwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZheChwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJmYXhcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBDcmVhdGUgYW5kIFNlbmQgRmF4IE1lc3NhZ2Vcblx0ICAgICovXG5cdCAgICBGYXgucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSwgYXR0YWNobWVudHMpIHtcblx0ICAgICAgICBmdW5jdGlvbiBpbk5vZGUoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcHJvY2VzcyAhPSBcInVuZGVmaW5lZFwiICYmICFwcm9jZXNzW1wiYnJvd3NlclwiXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZnVuY3Rpb24gYnJvd3NlclN1cHBvcnRCbG9iKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdHlwZW9mIEJsb2IgPT0gXCJmdW5jdGlvblwiO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgbWV0YSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuXHQgICAgICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XG5cdCAgICAgICAgdmFyIGpzb25UeXBlID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XG5cdCAgICAgICAgaWYgKGluTm9kZSgpKSB7XG5cdCAgICAgICAgICAgIGZvcm0uYXBwZW5kKFwianNvblwiLCBtZXRhLCB7IGZpbGVuYW1lOiAncmVxdWVzdC5qc29uJywgY29udGVudFR5cGU6IGpzb25UeXBlIH0pO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dGFjaG1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgYXRjaCA9IGF0dGFjaG1lbnRzW2ldO1xuXHQgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhdGNoID09IFwic3RyaW5nXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChcImF0dGFjaG1lbnRcIiwgYXRjaCwgeyBjb250ZW50VHlwZTogXCJ0ZXh0L3BsYWluXCIgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChcImF0dGFjaG1lbnRcIiwgYXRjaCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoYnJvd3NlclN1cHBvcnRCbG9iKCkpIHtcblx0ICAgICAgICAgICAgZm9ybS5hcHBlbmQoXCJqc29uXCIsIG5ldyBCbG9iKFttZXRhXSwgeyB0eXBlOiBqc29uVHlwZSB9KSk7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0YWNobWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBhdGNoID0gYXR0YWNobWVudHNbaV07XG5cdCAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGF0Y2ggPT0gXCJzdHJpbmdcIikge1xuXHQgICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kKFwiYXR0YWNobWVudFwiLCBuZXcgQmxvYihbYXRjaF0sIHsgdHlwZTogXCJ0ZXh0L3BsYWluXCIgfSkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoXCJhdHRhY2htZW50XCIsIGF0Y2gpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJZb3VyJ3JlIG5vdCBpbiBub2RlIGFuZCB5b3VyIGVudmlyb25tZW50IGRvZXMgbm90IHN1cHBvcnQgQmxvYiBvciBGaWxlIEFQSS5cIik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5wb3N0KHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBmb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5qc29uKCk7IH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGYXg7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBGYXg7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygyKSkpXG5cbi8qKiovIH0sXG4vKiAzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogZXNsaW50LWVudiBicm93c2VyICovXG5cdG1vZHVsZS5leHBvcnRzID0gd2luZG93LkZvcm1EYXRhO1xuXG5cbi8qKiovIH0sXG4vKiAzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgRm9yd2FyZGluZ051bWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRm9yd2FyZGluZ051bWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZvcndhcmRpbmdOdW1iZXIocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiZm9yd2FyZGluZy1udW1iZXJcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBBZGQgTmV3IEZvcndhcmRpbmcgTnVtYmVyXG5cdCAgICAqL1xuXHQgICAgRm9yd2FyZGluZ051bWJlci5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChib2R5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicG9zdFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBGb3J3YXJkaW5nIE51bWJlcnNcblx0ICAgICovXG5cdCAgICBGb3J3YXJkaW5nTnVtYmVyLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRm9yd2FyZGluZ051bWJlcjtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEZvcndhcmRpbmdOdW1iZXI7XG5cblxuLyoqKi8gfSxcbi8qIDM5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBHcmFudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoR3JhbnQsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBHcmFudChwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJncmFudFwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBFeHRlbnNpb24gR3JhbnRzXG5cdCAgICAqL1xuXHQgICAgR3JhbnQucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAocXVlcnkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBHcmFudDtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEdyYW50O1xuXG5cbi8qKiovIH0sXG4vKiA0MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgR3JlZXRpbmcgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEdyZWV0aW5nLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gR3JlZXRpbmcocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiZ3JlZXRpbmdcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBDcmVhdGUgQ3VzdG9tIEdyZWV0aW5nXG5cdCAgICAqL1xuXHQgICAgR3JlZXRpbmcucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgQ3VzdG9tIEdyZWV0aW5nIGJ5IElEXG5cdCAgICAqL1xuXHQgICAgR3JlZXRpbmcucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBHcmVldGluZztcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEdyZWV0aW5nO1xuXG5cbi8qKiovIH0sXG4vKiA0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgU2VydmljZUluZm9fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgRW5kXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcblx0dmFyIE1lZXRpbmcgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1lZXRpbmcsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBNZWV0aW5nKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcIm1lZXRpbmdcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqXG5cdCAgICAgKi9cblx0ICAgIE1lZXRpbmcucHJvdG90eXBlLnNlcnZpY2VJbmZvID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBTZXJ2aWNlSW5mb18xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICpcblx0ICAgICAqL1xuXHQgICAgTWVldGluZy5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBFbmRfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBDcmVhdGUgTWVldGluZ1xuXHQgICAgKi9cblx0ICAgIE1lZXRpbmcucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgTWVldGluZ3MgTGlzdFxuXHQgICAgKi9cblx0ICAgIE1lZXRpbmcucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgICAgRGVsZXRlIE1lZXRpbmdcblx0ICAgICovXG5cdCAgICBNZWV0aW5nLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZGVsZXRlXCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLnJlc3BvbnNlKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgICAgR2V0IE1lZXRpbmdcblx0ICAgICovXG5cdCAgICBNZWV0aW5nLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBVcGRhdGUgTWVldGluZ1xuXHQgICAgKi9cblx0ICAgIE1lZXRpbmcucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChib2R5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1lZXRpbmc7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBNZWV0aW5nO1xuXG5cbi8qKiovIH0sXG4vKiA0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgU2VydmljZUluZm8gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFNlcnZpY2VJbmZvLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU2VydmljZUluZm8ocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwic2VydmljZS1pbmZvXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgR2V0IE1lZXRpbmcgU2VydmljZSBJbmZvXG5cdCAgICAqL1xuXHQgICAgU2VydmljZUluZm8ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTZXJ2aWNlSW5mbztcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFNlcnZpY2VJbmZvO1xuXG5cbi8qKiovIH0sXG4vKiA0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgRW5kID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhFbmQsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBFbmQocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiZW5kXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgRW5kIEN1cnJlbnQgTWVldGluZ1xuXHQgICAgKi9cblx0ICAgIEVuZC5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwb3N0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLnJlc3BvbnNlKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEVuZDtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEVuZDtcblxuXG4vKioqLyB9LFxuLyogNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIENvbnRlbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgTWVzc2FnZVN0b3JlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhNZXNzYWdlU3RvcmUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBNZXNzYWdlU3RvcmUocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwibWVzc2FnZS1zdG9yZVwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIG1lc3NhZ2UgYXR0YWNobWVudFxuXHQgICAgICovXG5cdCAgICBNZXNzYWdlU3RvcmUucHJvdG90eXBlLmNvbnRlbnQgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENvbnRlbnRfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgTWVzc2FnZSBMaXN0XG5cdCAgICAqL1xuXHQgICAgTWVzc2FnZVN0b3JlLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBEZWxldGUgTWVzc2FnZSBieSBJRFxuXHQgICAgKi9cblx0ICAgIE1lc3NhZ2VTdG9yZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZGVsZXRlXCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2UoKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgTWVzc2FnZSBieSBJRFxuXHQgICAgKi9cblx0ICAgIE1lc3NhZ2VTdG9yZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgICAgVXBkYXRlIE1lc3NhZ2UgYnkgSURcblx0ICAgICovXG5cdCAgICBNZXNzYWdlU3RvcmUucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChib2R5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1lc3NhZ2VTdG9yZTtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IE1lc3NhZ2VTdG9yZTtcblxuXG4vKioqLyB9LFxuLyogNDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIENvbnRlbnQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENvbnRlbnQsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDb250ZW50KHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImNvbnRlbnRcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgTWVzc2FnZSBBdHRhY2htZW50XG5cdCAgICAqL1xuXHQgICAgQ29udGVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5yZXNwb25zZSgpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDb250ZW50O1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ29udGVudDtcblxuXG4vKioqLyB9LFxuLyogNDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIE1lc3NhZ2VTeW5jID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhNZXNzYWdlU3luYywgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE1lc3NhZ2VTeW5jKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcIm1lc3NhZ2Utc3luY1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICAgIE1lc3NhZ2UgU3luY2hyb25pemF0aW9uXG5cdCAgICAqL1xuXHQgICAgTWVzc2FnZVN5bmMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWVzc2FnZVN5bmM7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBNZXNzYWdlU3luYztcblxuXG4vKioqLyB9LFxuLyogNDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIFBob25lTnVtYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhQaG9uZU51bWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFBob25lTnVtYmVyKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcInBob25lLW51bWJlclwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICAgIEdldCBFeHRlbnNpb24gUGhvbmUgTnVtYmVyc1xuXHQgICAgKi9cblx0ICAgIFBob25lTnVtYmVyLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgUGhvbmUgTnVtYmVyIGJ5IElEXG5cdCAgICAqL1xuXHQgICAgUGhvbmVOdW1iZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBQaG9uZU51bWJlcjtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBob25lTnVtYmVyO1xuXG5cbi8qKiovIH0sXG4vKiA0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgUHJlc2VuY2UgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFByZXNlbmNlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gUHJlc2VuY2UocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwicHJlc2VuY2VcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgRXh0ZW5zaW9uIFByZXNlbmNlXG5cdCAgICAqL1xuXHQgICAgUHJlc2VuY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBQcmVzZW5jZTtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByZXNlbmNlO1xuXG5cbi8qKiovIH0sXG4vKiA0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgRm9ybURhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblx0dmFyIFByb2ZpbGVJbWFnZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUHJvZmlsZUltYWdlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gUHJvZmlsZUltYWdlKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcInByb2ZpbGUtaW1hZ2VcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgUHJvZmlsZSBJbWFnZVxuXHQgICAgKi9cblx0ICAgIFByb2ZpbGVJbWFnZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5yZXNwb25zZSgpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIFVwZGF0ZSBQcm9maWxlIEltYWdlXG5cdCAgICAqL1xuXHQgICAgUHJvZmlsZUltYWdlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoaW1hZ2VEYXRhLCBjb250ZW50VHlwZSkge1xuXHQgICAgICAgIGlmIChjb250ZW50VHlwZSA9PT0gdm9pZCAwKSB7IGNvbnRlbnRUeXBlID0gXCJpbWFnZS9wbmdcIjsgfVxuXHQgICAgICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XG5cdCAgICAgICAgZm9ybS5hcHBlbmQoXCJpbWFnZVwiLCBpbWFnZURhdGEsIHsgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLCBmaWxlbmFtZTogXCJwcm9maWxlLlwiICsgY29udGVudFR5cGUuc3BsaXQoJy8nKS5wb3AoKSB9KTtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkucHV0KHRoaXMuZ2V0RW5kcG9pbnQoKSwgZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7IH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIFVwZGF0ZSBQcm9maWxlIEltYWdlIChzYW1lIGFzIFBVVClcblx0ICAgICovXG5cdCAgICBQcm9maWxlSW1hZ2UucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoaW1hZ2VEYXRhLCBjb250ZW50VHlwZSkge1xuXHQgICAgICAgIGlmIChjb250ZW50VHlwZSA9PT0gdm9pZCAwKSB7IGNvbnRlbnRUeXBlID0gXCJpbWFnZS9wbmdcIjsgfVxuXHQgICAgICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XG5cdCAgICAgICAgZm9ybS5hcHBlbmQoXCJpbWFnZVwiLCBpbWFnZURhdGEsIHsgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLCBmaWxlbmFtZTogXCJwcm9maWxlLlwiICsgY29udGVudFR5cGUuc3BsaXQoJy8nKS5wb3AoKSB9KTtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkucHV0KHRoaXMuZ2V0RW5kcG9pbnQoKSwgZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7IH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBQcm9maWxlSW1hZ2U7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm9maWxlSW1hZ2U7XG5cblxuLyoqKi8gfSxcbi8qIDUwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBSaW5nb3V0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhSaW5nb3V0LCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gUmluZ291dChwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJyaW5nb3V0XCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgSW5pdGlhdGUgUmluZ091dCBDYWxsXG5cdCAgICAqL1xuXHQgICAgUmluZ291dC5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChib2R5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicG9zdFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICAgIENhbmNlbCBSaW5nT3V0IENhbGxcblx0ICAgICovXG5cdCAgICBSaW5nb3V0LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZGVsZXRlXCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLnJlc3BvbnNlKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgICAgR2V0IFJpbmdPdXQgQ2FsbCBTdGF0dXNcblx0ICAgICovXG5cdCAgICBSaW5nb3V0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmluZ291dDtcblx0fShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJpbmdvdXQ7XG5cblxuLyoqKi8gfSxcbi8qIDUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBTbXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFNtcywgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNtcyhwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJzbXNcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBDcmVhdGUgYW5kIFNlbmQgU01TIE1lc3NhZ2Vcblx0ICAgICovXG5cdCAgICBTbXMucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU21zO1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gU21zO1xuXG5cbi8qKiovIH0sXG4vKiA1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgT3JkZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE9yZGVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gT3JkZXIocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwib3JkZXJcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAgICBDcmVhdGUgTmV3IE9yZGVyXG5cdCAgICAqL1xuXHQgICAgT3JkZXIucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgT3JkZXIgYnkgSURcblx0ICAgICovXG5cdCAgICBPcmRlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE9yZGVyO1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gT3JkZXI7XG5cblxuLyoqKi8gfSxcbi8qIDUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBDb250ZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIFJlY29yZGluZyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUmVjb3JkaW5nLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gUmVjb3JkaW5nKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcInJlY29yZGluZ1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIG1lc3NhZ2UgYXR0YWNobWVudFxuXHQgICAgICovXG5cdCAgICBSZWNvcmRpbmcucHJvdG90eXBlLmNvbnRlbnQgPSBmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENvbnRlbnRfMS5kZWZhdWx0KHRoaXMsIGlkKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAgICBHZXQgQ2FsbCBSZWNvcmRpbmcgTWV0YWRhdGFcblx0ICAgICovXG5cdCAgICBSZWNvcmRpbmcucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZWNvcmRpbmc7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBSZWNvcmRpbmc7XG5cblxuLyoqKi8gfSxcbi8qIDU0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBDdXN0b21EYXRhXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0dmFyIENsaWVudEluZm8gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENsaWVudEluZm8sIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDbGllbnRJbmZvKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImNsaWVudC1pbmZvXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDdXN0b20gZGF0YSBhY2Nlc3Mga2V5LiBUaGUgbnVtYmVyIG9mIHVuaXF1ZSBjdXN0b20gZGF0YSBrZXlzIGlzIGxpbWl0ZWQgdG8gMTAwIGtleXMgcGVyIGV4dGVuc2lvbiwgc3VtbWFyaXplZCBmb3IgYWxsIHRoZSBhcHBsaWNhdGlvbnMuIEZvciBleGFtcGxlLCBpZiB5b3UgaGF2ZSBjcmVhdGVkIDUwIGN1c3RvbSBkYXRhIGtleXMgdW5kZXIgdGhlIEFuZHJvaWQgbW9iaWxlIGNsaWVudCBhcHBsaWNhdGlvbiBmb3IgdGhlIHBhcnRpY3VsYXIgZXh0ZW5zaW9uLCB0aGVuIGxvZ2dlZCBpbiB0aGUgaU9TIGFwcGxpY2F0aW9uIGFuZCBjcmVhdGVkIGFub3RoZXIgNTAga2V5cywgdGhlIHdlYiBjbGllbnQgYXBwbGljYXRpb24gd29uJ3QgYmUgYWxsb3dlZCB0byBjcmVhdGUgYW55IGN1c3RvbSBkYXRhIGtleSBmb3IgdGhhdCBleHRlbnNpb25cblx0ICAgICAqL1xuXHQgICAgQ2xpZW50SW5mby5wcm90b3R5cGUuY3VzdG9tRGF0YSA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQ3VzdG9tRGF0YV8xLmRlZmF1bHQodGhpcywgaWQpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDbGllbnRJbmZvO1xuXHR9KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2xpZW50SW5mbztcblxuXG4vKioqLyB9LFxuLyogNTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG5cdHZhciBVcmxTZWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIEN1c3RvbURhdGEgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEN1c3RvbURhdGEsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDdXN0b21EYXRhKHBydiwgaWQsIHNlcnZpY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImN1c3RvbS1kYXRhXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgVXBkYXRlIEN1c3RvbSBEYXRhIGJ5IEtleVxuXHQgICAgKi9cblx0ICAgIEN1c3RvbURhdGEucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChib2R5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEN1c3RvbURhdGE7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDdXN0b21EYXRhO1xuXG5cbi8qKiovIH0sXG4vKiA1NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgTG9va3VwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTtcblx0dmFyIFJlc2VydmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXHR2YXIgTnVtYmVyUG9vbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoTnVtYmVyUG9vbCwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE51bWJlclBvb2wocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwibnVtYmVyLXBvb2xcIiwgaWQsIHBydiwgc2VydmljZSk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqXG5cdCAgICAgKi9cblx0ICAgIE51bWJlclBvb2wucHJvdG90eXBlLmxvb2t1cCA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgTG9va3VwXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKlxuXHQgICAgICovXG5cdCAgICBOdW1iZXJQb29sLnByb3RvdHlwZS5yZXNlcnZlID0gZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBSZXNlcnZlXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE51bWJlclBvb2w7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBOdW1iZXJQb29sO1xuXG5cbi8qKiovIH0sXG4vKiA1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cblx0dmFyIFVybFNlY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgTG9va3VwID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhMb29rdXAsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBMb29rdXAocHJ2LCBpZCwgc2VydmljZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwibG9va3VwXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgTG9vayB1cCBQaG9uZSBOdW1iZXJcblx0ICAgICovXG5cdCAgICBMb29rdXAucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAocXVlcnkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwb3N0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBMb29rdXA7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBMb29rdXA7XG5cblxuLyoqKi8gfSxcbi8qIDU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0Ly8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxuXHR2YXIgVXJsU2VjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBSZXNlcnZlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhSZXNlcnZlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gUmVzZXJ2ZShwcnYsIGlkLCBzZXJ2aWNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJyZXNlcnZlXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgICAgUmVzZXJ2ZSBQaG9uZSBOdW1iZXJcblx0ICAgICovXG5cdCAgICBSZXNlcnZlLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKGJvZHkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwb3N0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJlc2VydmU7XG5cdH0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBSZXNlcnZlO1xuXG5cbi8qKiovIH0sXG4vKiA1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIEJ1ZmZlcikgeyhmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdFx0aWYodHJ1ZSlcblx0XHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkpO1xuXHRcdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdFx0ZGVmaW5lKFssICwgXCJwdWJudWJcIl0sIGZhY3RvcnkpO1xuXHRcdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdFx0ZXhwb3J0c1tcIlNES1wiXSA9IGZhY3RvcnkocmVxdWlyZShcImVzNi1wcm9taXNlXCIpLCByZXF1aXJlKFwiZmV0Y2gtcG9ueWZpbGxcIiksIHJlcXVpcmUoXCJwdWJudWJcIikpO1xuXHRcdGVsc2Vcblx0XHRcdHJvb3RbXCJSaW5nQ2VudHJhbFwiXSA9IHJvb3RbXCJSaW5nQ2VudHJhbFwiXSB8fCB7fSwgcm9vdFtcIlJpbmdDZW50cmFsXCJdW1wiU0RLXCJdID0gZmFjdG9yeShyb290W3VuZGVmaW5lZF0sIHJvb3RbdW5kZWZpbmVkXSwgcm9vdFt1bmRlZmluZWRdKTtcblx0fSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXykge1xuXHRyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuXHQvKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcblx0LyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXHQvKioqKioqL1xuXHQvKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5cdC8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvKioqKioqL1xuXHQvKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdC8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcblx0LyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHQvKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuXHQvKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcblx0LyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuXHQvKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG5cdC8qKioqKiovIFx0XHR9O1xuXHQvKioqKioqL1xuXHQvKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdC8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0LyoqKioqKi9cblx0LyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0LyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXHQvKioqKioqL1xuXHQvKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0LyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcblx0LyoqKioqKi8gXHR9XG5cdC8qKioqKiovXG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcblx0LyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXHQvKioqKioqL1xuXHQvKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG5cdC8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblx0LyoqKioqKi9cblx0LyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuXHQvKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2J1aWxkL1wiO1xuXHQvKioqKioqL1xuXHQvKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuXHQvKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXHQvKioqKioqLyB9KVxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHQvKioqKioqLyAoW1xuXHQvKiAwICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0XG5cdC8qKiovIH0sXG5cdC8qIDEgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX1V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBVdGlscyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9VdGlscyk7XG5cdFxuXHR2YXIgX0NhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX0NhY2hlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NhY2hlKTtcblx0XG5cdHZhciBfRXh0ZXJuYWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBFeHRlcm5hbHMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfRXh0ZXJuYWxzKTtcblx0XG5cdHZhciBfZXZlbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXHRcblx0dmFyIF9DbGllbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfQ2xpZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NsaWVudCk7XG5cdFxuXHR2YXIgX0FwaVJlc3BvbnNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX0FwaVJlc3BvbnNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FwaVJlc3BvbnNlKTtcblx0XG5cdHZhciBfQ2xpZW50TW9jayA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0dmFyIF9DbGllbnRNb2NrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NsaWVudE1vY2spO1xuXHRcblx0dmFyIF9Nb2NrID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHR2YXIgX01vY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTW9jayk7XG5cdFxuXHR2YXIgX1JlZ2lzdHJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHR2YXIgX1JlZ2lzdHJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JlZ2lzdHJ5KTtcblx0XG5cdHZhciBfUGxhdGZvcm0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfUGxhdGZvcm0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGxhdGZvcm0pO1xuXHRcblx0dmFyIF9BdXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdFxuXHR2YXIgX0F1dGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXV0aCk7XG5cdFxuXHR2YXIgX1B1Ym51YkZhY3RvcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdHZhciBfUHVibnViRmFjdG9yeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QdWJudWJGYWN0b3J5KTtcblx0XG5cdHZhciBfU3Vic2NyaXB0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX1N1YnNjcmlwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdWJzY3JpcHRpb24pO1xuXHRcblx0dmFyIF9DYWNoZWRTdWJzY3JpcHRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfQ2FjaGVkU3Vic2NyaXB0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NhY2hlZFN1YnNjcmlwdGlvbik7XG5cdFxuXHR2YXIgX0NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0dmFyIF9Db25zdGFudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3RhbnRzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBTREsgPSBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAbmFtZXNwYWNlIFJpbmdDZW50cmFsXG5cdCAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zZXJ2ZXJdXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY2FjaGVQcmVmaXhdXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuYXBwU2VjcmV0XVxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmFwcEtleV1cblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5hcHBOYW1lXVxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmFwcFZlcnNpb25dXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucHVibnViRmFjdG9yeV1cblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jbGllbnRdXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucmVkaXJlY3RVcmldXG5cdCAgICAgKi9cblx0XG5cdCAgICBmdW5jdGlvbiBTREsoX3JlZikge1xuXHQgICAgICAgIHZhciBzZXJ2ZXIgPSBfcmVmLnNlcnZlcjtcblx0ICAgICAgICB2YXIgY2FjaGVQcmVmaXggPSBfcmVmLmNhY2hlUHJlZml4O1xuXHQgICAgICAgIHZhciBhcHBTZWNyZXQgPSBfcmVmLmFwcFNlY3JldDtcblx0ICAgICAgICB2YXIgYXBwS2V5ID0gX3JlZi5hcHBLZXk7XG5cdCAgICAgICAgdmFyIGFwcE5hbWUgPSBfcmVmLmFwcE5hbWU7XG5cdCAgICAgICAgdmFyIGFwcFZlcnNpb24gPSBfcmVmLmFwcFZlcnNpb247XG5cdCAgICAgICAgdmFyIHB1Ym51YkZhY3RvcnkgPSBfcmVmLnB1Ym51YkZhY3Rvcnk7XG5cdCAgICAgICAgdmFyIGNsaWVudCA9IF9yZWYuY2xpZW50O1xuXHQgICAgICAgIHZhciByZWRpcmVjdFVyaSA9IF9yZWYucmVkaXJlY3RVcmk7XG5cdFxuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTREspO1xuXHRcblx0ICAgICAgICBpZiAoIUV4dGVybmFscy5mZXRjaCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05hdGl2ZSBGZXRjaCBpcyBtaXNzaW5nLCBzZXQgUmluZ0NlbnRyYWwuU0RLLmNvcmUuRXh0ZXJuYWxzLmZldGNoIHRvIHlvdXIgZmF2b3JpdGUgYWx0ZXJuYXRpdmUnKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICghRXh0ZXJuYWxzLlByb21pc2UpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOYXRpdmUgUHJvbWlzZSBpcyBtaXNzaW5nLCBzZXQgUmluZ0NlbnRyYWwuU0RLLmNvcmUuRXh0ZXJuYWxzLlByb21pc2UgdG8geW91ciBmYXZvcml0ZSBhbHRlcm5hdGl2ZScpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgX0NhY2hlMi5kZWZhdWx0KEV4dGVybmFscy5sb2NhbFN0b3JhZ2UsIGNhY2hlUHJlZml4KTtcblx0XG5cdCAgICAgICAgdGhpcy5fY2xpZW50ID0gY2xpZW50IHx8IG5ldyBfQ2xpZW50Mi5kZWZhdWx0KCk7XG5cdFxuXHQgICAgICAgIHRoaXMuX3BsYXRmb3JtID0gbmV3IF9QbGF0Zm9ybTIuZGVmYXVsdCh7XG5cdCAgICAgICAgICAgIGNsaWVudDogdGhpcy5fY2xpZW50LFxuXHQgICAgICAgICAgICBjYWNoZTogdGhpcy5fY2FjaGUsXG5cdCAgICAgICAgICAgIHZlcnNpb246IFNESy52ZXJzaW9uLFxuXHQgICAgICAgICAgICBzZXJ2ZXI6IHNlcnZlcixcblx0ICAgICAgICAgICAgYXBwS2V5OiBhcHBLZXksXG5cdCAgICAgICAgICAgIGFwcFNlY3JldDogYXBwU2VjcmV0LFxuXHQgICAgICAgICAgICBhcHBOYW1lOiBhcHBOYW1lLFxuXHQgICAgICAgICAgICBhcHBWZXJzaW9uOiBhcHBWZXJzaW9uLFxuXHQgICAgICAgICAgICByZWRpcmVjdFVyaTogcmVkaXJlY3RVcmlcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdGhpcy5fcHVibnViRmFjdG9yeSA9IHB1Ym51YkZhY3RvcnkgfHwgRXh0ZXJuYWxzLlBVQk5VQjtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge1BsYXRmb3JtfVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIFNESy5wcm90b3R5cGUucGxhdGZvcm0gPSBmdW5jdGlvbiBwbGF0Zm9ybSgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fcGxhdGZvcm07XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHJldHVybiB7U3Vic2NyaXB0aW9ufVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIFNESy5wcm90b3R5cGUuY3JlYXRlU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gY3JlYXRlU3Vic2NyaXB0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgX1N1YnNjcmlwdGlvbjIuZGVmYXVsdCh0aGlzLl9wdWJudWJGYWN0b3J5LCB0aGlzLl9wbGF0Zm9ybSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHJldHVybiB7Q2FjaGVkU3Vic2NyaXB0aW9ufVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIFNESy5wcm90b3R5cGUuY3JlYXRlQ2FjaGVkU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gY3JlYXRlQ2FjaGVkU3Vic2NyaXB0aW9uKGNhY2hlS2V5KSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBfQ2FjaGVkU3Vic2NyaXB0aW9uMi5kZWZhdWx0KHRoaXMuX3B1Ym51YkZhY3RvcnksIHRoaXMuX3BsYXRmb3JtLCB0aGlzLl9jYWNoZSwgY2FjaGVLZXkpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge0NhY2hlfVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIFNESy5wcm90b3R5cGUuY2FjaGUgPSBmdW5jdGlvbiBjYWNoZSgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGU7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNESy5oYW5kbGVMb2dpblJlZGlyZWN0ID0gZnVuY3Rpb24gaGFuZGxlTG9naW5SZWRpcmVjdChvcmlnaW4pIHtcblx0ICAgICAgICB2YXIgX3dpbmRvdyRvcGVuZXIkcG9zdE1lO1xuXHRcblx0ICAgICAgICB2YXIgcmVzcG9uc2UgPSB3aW5kb3cubG9jYXRpb24uaGFzaCA/IHdpbmRvdy5sb2NhdGlvbi5oYXNoIDogd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcblx0ICAgICAgICB3aW5kb3cub3BlbmVyLnBvc3RNZXNzYWdlKChfd2luZG93JG9wZW5lciRwb3N0TWUgPSB7fSwgX3dpbmRvdyRvcGVuZXIkcG9zdE1lW19Db25zdGFudHMyLmRlZmF1bHQuYXV0aFJlc3BvbnNlUHJvcGVydHldID0gcmVzcG9uc2UsIF93aW5kb3ckb3BlbmVyJHBvc3RNZSksIG9yaWdpbiB8fCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFNESztcblx0fSgpO1xuXHRcblx0U0RLLnZlcnNpb24gPSBfQ29uc3RhbnRzMi5kZWZhdWx0LnZlcnNpb247XG5cdFNESy5zZXJ2ZXIgPSB7XG5cdCAgICBzYW5kYm94OiAnaHR0cHM6Ly9wbGF0Zm9ybS5kZXZ0ZXN0LnJpbmdjZW50cmFsLmNvbScsXG5cdCAgICBwcm9kdWN0aW9uOiAnaHR0cHM6Ly9wbGF0Zm9ybS5yaW5nY2VudHJhbC5jb20nXG5cdH07XG5cdFNESy5jb3JlID0ge1xuXHQgICAgQ2FjaGU6IF9DYWNoZTIuZGVmYXVsdCxcblx0ICAgIEV2ZW50RW1pdHRlcjogX2V2ZW50czIuZGVmYXVsdCxcblx0ICAgIFV0aWxzOiBVdGlscyxcblx0ICAgIEV4dGVybmFsczogRXh0ZXJuYWxzXG5cdH07XG5cdFNESy5odHRwID0ge1xuXHQgICAgQ2xpZW50OiBfQ2xpZW50Mi5kZWZhdWx0LFxuXHQgICAgQXBpUmVzcG9uc2U6IF9BcGlSZXNwb25zZTIuZGVmYXVsdFxuXHR9O1xuXHRTREsucGxhdGZvcm0gPSB7XG5cdCAgICBBdXRoOiBfQXV0aDIuZGVmYXVsdCxcblx0ICAgIFBsYXRmb3JtOiBfUGxhdGZvcm0yLmRlZmF1bHRcblx0fTtcblx0U0RLLnN1YnNjcmlwdGlvbiA9IHtcblx0ICAgIFN1YnNjcmlwdGlvbjogX1N1YnNjcmlwdGlvbjIuZGVmYXVsdFxuXHR9O1xuXHRTREsubW9ja3MgPSB7XG5cdCAgICBDbGllbnQ6IF9DbGllbnRNb2NrMi5kZWZhdWx0LFxuXHQgICAgUmVnaXN0cnk6IF9SZWdpc3RyeTIuZGVmYXVsdCxcblx0ICAgIE1vY2s6IF9Nb2NrMi5kZWZhdWx0XG5cdH07XG5cdFNESy5wdWJudWIgPSB7XG5cdCAgICBQdWJudWJNb2NrRmFjdG9yeTogX1B1Ym51YkZhY3RvcnkyLmRlZmF1bHRcblx0fTtcblx0XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFNESztcblx0XG5cdC8qKiovIH0sXG5cdC8qIDIgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7LyoqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy5cblx0ICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cblx0ICpcblx0ICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG5cdCAqIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvbWFzdGVyL0xJQ0VOU0UgZmlsZS4gQW5cblx0ICogYWRkaXRpb25hbCBncmFudCBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluXG5cdCAqIHRoZSBzYW1lIGRpcmVjdG9yeS5cblx0ICovXG5cdFxuXHQhKGZ1bmN0aW9uKGdsb2JhbCkge1xuXHQgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICB2YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0ICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cblx0ICB2YXIgaXRlcmF0b3JTeW1ib2wgPVxuXHQgICAgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcblx0XG5cdCAgdmFyIGluTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIjtcblx0ICB2YXIgcnVudGltZSA9IGdsb2JhbC5yZWdlbmVyYXRvclJ1bnRpbWU7XG5cdCAgaWYgKHJ1bnRpbWUpIHtcblx0ICAgIGlmIChpbk1vZHVsZSkge1xuXHQgICAgICAvLyBJZiByZWdlbmVyYXRvclJ1bnRpbWUgaXMgZGVmaW5lZCBnbG9iYWxseSBhbmQgd2UncmUgaW4gYSBtb2R1bGUsXG5cdCAgICAgIC8vIG1ha2UgdGhlIGV4cG9ydHMgb2JqZWN0IGlkZW50aWNhbCB0byByZWdlbmVyYXRvclJ1bnRpbWUuXG5cdCAgICAgIG1vZHVsZS5leHBvcnRzID0gcnVudGltZTtcblx0ICAgIH1cblx0ICAgIC8vIERvbid0IGJvdGhlciBldmFsdWF0aW5nIHRoZSByZXN0IG9mIHRoaXMgZmlsZSBpZiB0aGUgcnVudGltZSB3YXNcblx0ICAgIC8vIGFscmVhZHkgZGVmaW5lZCBnbG9iYWxseS5cblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIC8vIERlZmluZSB0aGUgcnVudGltZSBnbG9iYWxseSAoYXMgZXhwZWN0ZWQgYnkgZ2VuZXJhdGVkIGNvZGUpIGFzIGVpdGhlclxuXHQgIC8vIG1vZHVsZS5leHBvcnRzIChpZiB3ZSdyZSBpbiBhIG1vZHVsZSkgb3IgYSBuZXcsIGVtcHR5IG9iamVjdC5cblx0ICBydW50aW1lID0gZ2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZSA9IGluTW9kdWxlID8gbW9kdWxlLmV4cG9ydHMgOiB7fTtcblx0XG5cdCAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuXHQgICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cblx0ICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKChvdXRlckZuIHx8IEdlbmVyYXRvcikucHJvdG90eXBlKTtcblx0ICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXHRcblx0ICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcblx0ICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cblx0ICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblx0XG5cdCAgICByZXR1cm4gZ2VuZXJhdG9yO1xuXHQgIH1cblx0ICBydW50aW1lLndyYXAgPSB3cmFwO1xuXHRcblx0ICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cblx0ICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcblx0ICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcblx0ICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG5cdCAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuXHQgIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcblx0ICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuXHQgIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuXHQgIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcblx0ICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG5cdCAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG5cdCAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG5cdCAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcblx0ICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXHRcblx0ICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG5cdCAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuXHQgIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cdFxuXHQgIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuXHQgIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuXHQgIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG5cdCAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cblx0ICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuXHQgIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cblx0ICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cdFxuXHQgIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9IEdlbmVyYXRvci5wcm90b3R5cGU7XG5cdCAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR3AuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcblx0ICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuXHQgIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXHRcblx0ICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuXHQgIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG5cdCAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuXHQgICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG5cdCAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG5cdCAgICAgIH07XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIHJ1bnRpbWUuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuXHQgICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuXHQgICAgcmV0dXJuIGN0b3Jcblx0ICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuXHQgICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cblx0ICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG5cdCAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG5cdCAgICAgIDogZmFsc2U7XG5cdCAgfTtcblx0XG5cdCAgcnVudGltZS5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG5cdCAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG5cdCAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcblx0ICAgIH1cblx0ICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcblx0ICAgIHJldHVybiBnZW5GdW47XG5cdCAgfTtcblx0XG5cdCAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG5cdCAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3Rcblx0ICAvLyBgdmFsdWUgaW5zdGFuY2VvZiBBd2FpdEFyZ3VtZW50YCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcblx0ICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLiBTb21lIG1heSBjb25zaWRlciB0aGUgbmFtZSBvZiB0aGlzIG1ldGhvZCB0b29cblx0ICAvLyBjdXRlc3ksIGJ1dCB0aGV5IGFyZSBjdXJtdWRnZW9ucy5cblx0ICBydW50aW1lLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG5cdCAgICByZXR1cm4gbmV3IEF3YWl0QXJndW1lbnQoYXJnKTtcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBBd2FpdEFyZ3VtZW50KGFyZykge1xuXHQgICAgdGhpcy5hcmcgPSBhcmc7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvcikge1xuXHQgICAgLy8gVGhpcyBpbnZva2UgZnVuY3Rpb24gaXMgd3JpdHRlbiBpbiBhIHN0eWxlIHRoYXQgYXNzdW1lcyBzb21lXG5cdCAgICAvLyBjYWxsaW5nIGZ1bmN0aW9uIChvciBQcm9taXNlKSB3aWxsIGhhbmRsZSBleGNlcHRpb25zLlxuXHQgICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG5cdCAgICAgIHZhciByZXN1bHQgPSBnZW5lcmF0b3JbbWV0aG9kXShhcmcpO1xuXHQgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG5cdCAgICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIEF3YWl0QXJndW1lbnRcblx0ICAgICAgICA/IFByb21pc2UucmVzb2x2ZSh2YWx1ZS5hcmcpLnRoZW4oaW52b2tlTmV4dCwgaW52b2tlVGhyb3cpXG5cdCAgICAgICAgOiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG5cdCAgICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuXHQgICAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi4gSWYgdGhlIFByb21pc2UgaXMgcmVqZWN0ZWQsIGhvd2V2ZXIsIHRoZVxuXHQgICAgICAgICAgICAvLyByZXN1bHQgZm9yIHRoaXMgaXRlcmF0aW9uIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgc2FtZVxuXHQgICAgICAgICAgICAvLyByZWFzb24uIE5vdGUgdGhhdCByZWplY3Rpb25zIG9mIHlpZWxkZWQgUHJvbWlzZXMgYXJlIG5vdFxuXHQgICAgICAgICAgICAvLyB0aHJvd24gYmFjayBpbnRvIHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24sIGFzIGlzIHRoZSBjYXNlXG5cdCAgICAgICAgICAgIC8vIHdoZW4gYW4gYXdhaXRlZCBQcm9taXNlIGlzIHJlamVjdGVkLiBUaGlzIGRpZmZlcmVuY2UgaW5cblx0ICAgICAgICAgICAgLy8gYmVoYXZpb3IgYmV0d2VlbiB5aWVsZCBhbmQgYXdhaXQgaXMgaW1wb3J0YW50LCBiZWNhdXNlIGl0XG5cdCAgICAgICAgICAgIC8vIGFsbG93cyB0aGUgY29uc3VtZXIgdG8gZGVjaWRlIHdoYXQgdG8gZG8gd2l0aCB0aGUgeWllbGRlZFxuXHQgICAgICAgICAgICAvLyByZWplY3Rpb24gKHN3YWxsb3cgaXQgYW5kIGNvbnRpbnVlLCBtYW51YWxseSAudGhyb3cgaXQgYmFja1xuXHQgICAgICAgICAgICAvLyBpbnRvIHRoZSBnZW5lcmF0b3IsIGFiYW5kb24gaXRlcmF0aW9uLCB3aGF0ZXZlcikuIFdpdGhcblx0ICAgICAgICAgICAgLy8gYXdhaXQsIGJ5IGNvbnRyYXN0LCB0aGVyZSBpcyBubyBvcHBvcnR1bml0eSB0byBleGFtaW5lIHRoZVxuXHQgICAgICAgICAgICAvLyByZWplY3Rpb24gcmVhc29uIG91dHNpZGUgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiwgc28gdGhlXG5cdCAgICAgICAgICAgIC8vIG9ubHkgb3B0aW9uIGlzIHRvIHRocm93IGl0IGZyb20gdGhlIGF3YWl0IGV4cHJlc3Npb24sIGFuZFxuXHQgICAgICAgICAgICAvLyBsZXQgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiBoYW5kbGUgdGhlIGV4Y2VwdGlvbi5cblx0ICAgICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHByb2Nlc3MuZG9tYWluKSB7XG5cdCAgICAgIGludm9rZSA9IHByb2Nlc3MuZG9tYWluLmJpbmQoaW52b2tlKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaW52b2tlTmV4dCA9IGludm9rZS5iaW5kKGdlbmVyYXRvciwgXCJuZXh0XCIpO1xuXHQgICAgdmFyIGludm9rZVRocm93ID0gaW52b2tlLmJpbmQoZ2VuZXJhdG9yLCBcInRocm93XCIpO1xuXHQgICAgdmFyIGludm9rZVJldHVybiA9IGludm9rZS5iaW5kKGdlbmVyYXRvciwgXCJyZXR1cm5cIik7XG5cdCAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXHRcblx0ICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcblx0ICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG5cdCAgICAgICAgcmV0dXJuIGludm9rZShtZXRob2QsIGFyZyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuXHQgICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcblx0ICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcblx0ICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG5cdCAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cblx0ICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcblx0ICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuXHQgICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcblx0ICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuXHQgICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG5cdCAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcblx0ICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuXHQgICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cblx0ICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcblx0ICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuXHQgICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcblx0ICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cblx0ICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG5cdCAgICAgICAgKSA6IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdCAgICAgICAgICByZXNvbHZlKGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG5cdCAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cblx0ICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG5cdCAgfVxuXHRcblx0ICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuXHRcblx0ICAvLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG5cdCAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG5cdCAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG5cdCAgcnVudGltZS5hc3luYyA9IGZ1bmN0aW9uKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG5cdCAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuXHQgICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KVxuXHQgICAgKTtcblx0XG5cdCAgICByZXR1cm4gcnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG5cdCAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG5cdCAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcblx0ICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuXHQgICAgICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuXHQgICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblx0XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG5cdCAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG5cdCAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG5cdCAgICAgICAgICB0aHJvdyBhcmc7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuXHQgICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcblx0ICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB3aGlsZSAodHJ1ZSkge1xuXHQgICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG5cdCAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG5cdCAgICAgICAgICBpZiAobWV0aG9kID09PSBcInJldHVyblwiIHx8XG5cdCAgICAgICAgICAgICAgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiICYmIGRlbGVnYXRlLml0ZXJhdG9yW21ldGhvZF0gPT09IHVuZGVmaW5lZCkpIHtcblx0ICAgICAgICAgICAgLy8gQSByZXR1cm4gb3IgdGhyb3cgKHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyB0aHJvd1xuXHQgICAgICAgICAgICAvLyBtZXRob2QpIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cblx0ICAgICAgICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cdFxuXHQgICAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG5cdCAgICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC5cblx0ICAgICAgICAgICAgdmFyIHJldHVybk1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW1wicmV0dXJuXCJdO1xuXHQgICAgICAgICAgICBpZiAocmV0dXJuTWV0aG9kKSB7XG5cdCAgICAgICAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKHJldHVybk1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGFyZyk7XG5cdCAgICAgICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcblx0ICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXR1cm4gbWV0aG9kIHRocmV3IGFuIGV4Y2VwdGlvbiwgbGV0IHRoYXRcblx0ICAgICAgICAgICAgICAgIC8vIGV4Y2VwdGlvbiBwcmV2YWlsIG92ZXIgdGhlIG9yaWdpbmFsIHJldHVybiBvciB0aHJvdy5cblx0ICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwidGhyb3dcIjtcblx0ICAgICAgICAgICAgICAgIGFyZyA9IHJlY29yZC5hcmc7XG5cdCAgICAgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwicmV0dXJuXCIpIHtcblx0ICAgICAgICAgICAgICAvLyBDb250aW51ZSB3aXRoIHRoZSBvdXRlciByZXR1cm4sIG5vdyB0aGF0IHRoZSBkZWxlZ2F0ZVxuXHQgICAgICAgICAgICAgIC8vIGl0ZXJhdG9yIGhhcyBiZWVuIHRlcm1pbmF0ZWQuXG5cdCAgICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goXG5cdCAgICAgICAgICAgIGRlbGVnYXRlLml0ZXJhdG9yW21ldGhvZF0sXG5cdCAgICAgICAgICAgIGRlbGVnYXRlLml0ZXJhdG9yLFxuXHQgICAgICAgICAgICBhcmdcblx0ICAgICAgICAgICk7XG5cdFxuXHQgICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcblx0ICAgICAgICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cdFxuXHQgICAgICAgICAgICAvLyBMaWtlIHJldHVybmluZyBnZW5lcmF0b3IudGhyb3codW5jYXVnaHQpLCBidXQgd2l0aG91dCB0aGVcblx0ICAgICAgICAgICAgLy8gb3ZlcmhlYWQgb2YgYW4gZXh0cmEgZnVuY3Rpb24gY2FsbC5cblx0ICAgICAgICAgICAgbWV0aG9kID0gXCJ0aHJvd1wiO1xuXHQgICAgICAgICAgICBhcmcgPSByZWNvcmQuYXJnO1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAvLyBEZWxlZ2F0ZSBnZW5lcmF0b3IgcmFuIGFuZCBoYW5kbGVkIGl0cyBvd24gZXhjZXB0aW9ucyBzb1xuXHQgICAgICAgICAgLy8gcmVnYXJkbGVzcyBvZiB3aGF0IHRoZSBtZXRob2Qgd2FzLCB3ZSBjb250aW51ZSBhcyBpZiBpdCBpc1xuXHQgICAgICAgICAgLy8gXCJuZXh0XCIgd2l0aCBhbiB1bmRlZmluZWQgYXJnLlxuXHQgICAgICAgICAgbWV0aG9kID0gXCJuZXh0XCI7XG5cdCAgICAgICAgICBhcmcgPSB1bmRlZmluZWQ7XG5cdFxuXHQgICAgICAgICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXHQgICAgICAgICAgaWYgKGluZm8uZG9uZSkge1xuXHQgICAgICAgICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblx0ICAgICAgICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblx0ICAgICAgICAgICAgcmV0dXJuIGluZm87XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAobWV0aG9kID09PSBcIm5leHRcIikge1xuXHQgICAgICAgICAgY29udGV4dC5fc2VudCA9IGFyZztcblx0XG5cdCAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkWWllbGQpIHtcblx0ICAgICAgICAgICAgY29udGV4dC5zZW50ID0gYXJnO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY29udGV4dC5zZW50ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcblx0ICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuXHQgICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuXHQgICAgICAgICAgICB0aHJvdyBhcmc7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oYXJnKSkge1xuXHQgICAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuXHQgICAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuXHQgICAgICAgICAgICBtZXRob2QgPSBcIm5leHRcIjtcblx0ICAgICAgICAgICAgYXJnID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuXHQgICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgYXJnKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cdFxuXHQgICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblx0ICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcblx0ICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cblx0ICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cblx0ICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG5cdCAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcblx0ICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXHRcblx0ICAgICAgICAgIHZhciBpbmZvID0ge1xuXHQgICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcblx0ICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG5cdCAgICAgICAgICB9O1xuXHRcblx0ICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG5cdCAgICAgICAgICAgIGlmIChjb250ZXh0LmRlbGVnYXRlICYmIG1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcblx0ICAgICAgICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuXHQgICAgICAgICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cblx0ICAgICAgICAgICAgICBhcmcgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBpbmZvO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcblx0ICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG5cdCAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG5cdCAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGFyZykgY2FsbCBhYm92ZS5cblx0ICAgICAgICAgIG1ldGhvZCA9IFwidGhyb3dcIjtcblx0ICAgICAgICAgIGFyZyA9IHJlY29yZC5hcmc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcblx0ICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG5cdCAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblx0XG5cdCAgR3BbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcblx0ICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cdFxuXHQgICAgaWYgKDEgaW4gbG9jcykge1xuXHQgICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKDIgaW4gbG9jcykge1xuXHQgICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcblx0ICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcblx0ICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuXHQgICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuXHQgICAgZGVsZXRlIHJlY29yZC5hcmc7XG5cdCAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuXHQgICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG5cdCAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG5cdCAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG5cdCAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuXHQgICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuXHQgICAgdGhpcy5yZXNldCh0cnVlKTtcblx0ICB9XG5cdFxuXHQgIHJ1bnRpbWUua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgdmFyIGtleXMgPSBbXTtcblx0ICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcblx0ICAgICAga2V5cy5wdXNoKGtleSk7XG5cdCAgICB9XG5cdCAgICBrZXlzLnJldmVyc2UoKTtcblx0XG5cdCAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuXHQgICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cblx0ICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuXHQgICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcblx0ICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcblx0ICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuXHQgICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcblx0ICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuXHQgICAgICAgICAgcmV0dXJuIG5leHQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcblx0ICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcblx0ICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG5cdCAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cdCAgICAgIHJldHVybiBuZXh0O1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcblx0ICAgIGlmIChpdGVyYWJsZSkge1xuXHQgICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG5cdCAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuXHQgICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICByZXR1cm4gaXRlcmFibGU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuXHQgICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuXHQgICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG5cdCAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuXHQgICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cdFxuXHQgICAgICAgICAgcmV0dXJuIG5leHQ7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG5cdCAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG5cdCAgfVxuXHQgIHJ1bnRpbWUudmFsdWVzID0gdmFsdWVzO1xuXHRcblx0ICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuXHQgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuXHQgIH1cblx0XG5cdCAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG5cdCAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblx0XG5cdCAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuXHQgICAgICB0aGlzLnByZXYgPSAwO1xuXHQgICAgICB0aGlzLm5leHQgPSAwO1xuXHQgICAgICB0aGlzLnNlbnQgPSB1bmRlZmluZWQ7XG5cdCAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblx0XG5cdCAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXHRcblx0ICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG5cdCAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG5cdCAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuXHQgICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuXHQgICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG5cdCAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuXHQgICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBzdG9wOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblx0XG5cdCAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG5cdCAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG5cdCAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuXHQgICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gdGhpcy5ydmFsO1xuXHQgICAgfSxcblx0XG5cdCAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG5cdCAgICAgIGlmICh0aGlzLmRvbmUpIHtcblx0ICAgICAgICB0aHJvdyBleGNlcHRpb247XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcblx0ICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG5cdCAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG5cdCAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcblx0ICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cdCAgICAgICAgcmV0dXJuICEhY2F1Z2h0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG5cdCAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuXHQgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXHRcblx0ICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuXHQgICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcblx0ICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuXHQgICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cblx0ICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuXHQgICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG5cdCAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cdFxuXHQgICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuXHQgICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuXHQgICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuXHQgICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG5cdCAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuXHQgICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG5cdCAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcblx0ICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuXHQgICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG5cdCAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG5cdCAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuXHQgICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcblx0ICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuXHQgICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcblx0ICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG5cdCAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG5cdCAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcblx0ICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblx0XG5cdCAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcblx0ICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuXHQgICAgfSxcblx0XG5cdCAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuXHQgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuXHQgICAgICAgIHRocm93IHJlY29yZC5hcmc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG5cdCAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG5cdCAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcblx0ICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuXHQgICAgICAgIHRoaXMucnZhbCA9IHJlY29yZC5hcmc7XG5cdCAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcblx0ICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuXHQgICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuXHQgICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG5cdCAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuXHQgICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG5cdCAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcblx0ICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuXHQgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcblx0ICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG5cdCAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG5cdCAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblx0ICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG5cdCAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuXHQgICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHJldHVybiB0aHJvd247XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cblx0ICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG5cdCAgICB9LFxuXHRcblx0ICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG5cdCAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG5cdCAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG5cdCAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcblx0ICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcblx0ICAgIH1cblx0ICB9O1xuXHR9KShcblx0ICAvLyBBbW9uZyB0aGUgdmFyaW91cyB0cmlja3MgZm9yIG9idGFpbmluZyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsXG5cdCAgLy8gb2JqZWN0LCB0aGlzIHNlZW1zIHRvIGJlIHRoZSBtb3N0IHJlbGlhYmxlIHRlY2huaXF1ZSB0aGF0IGRvZXMgbm90XG5cdCAgLy8gdXNlIGluZGlyZWN0IGV2YWwgKHdoaWNoIHZpb2xhdGVzIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5KS5cblx0ICB0eXBlb2YgZ2xvYmFsID09PSBcIm9iamVjdFwiID8gZ2xvYmFsIDpcblx0ICB0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiID8gd2luZG93IDpcblx0ICB0eXBlb2Ygc2VsZiA9PT0gXCJvYmplY3RcIiA/IHNlbGYgOiB0aGlzXG5cdCk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cdFxuXHQvKioqLyB9LFxuXHQvKiAzICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRleHBvcnRzLnF1ZXJ5U3RyaW5naWZ5ID0gcXVlcnlTdHJpbmdpZnk7XG5cdGV4cG9ydHMucGFyc2VRdWVyeVN0cmluZyA9IHBhcnNlUXVlcnlTdHJpbmc7XG5cdGV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cdGV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cdGV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblx0ZXhwb3J0cy5pc09iamVjdE9iamVjdCA9IGlzT2JqZWN0T2JqZWN0O1xuXHRleHBvcnRzLmlzUGxhaW5PYmplY3QgPSBpc1BsYWluT2JqZWN0O1xuXHRleHBvcnRzLmlzTm9kZUpTID0gaXNOb2RlSlM7XG5cdGV4cG9ydHMuaXNCcm93c2VyID0gaXNCcm93c2VyO1xuXHRleHBvcnRzLmRlbGF5ID0gZGVsYXk7XG5cdFxuXHR2YXIgX0V4dGVybmFscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3F1ZXJ5c3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfcXVlcnlzdHJpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcXVlcnlzdHJpbmcpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1ldGVyc1xuXHQgKiBAcmV0dXJucyB7c3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gcXVlcnlTdHJpbmdpZnkocGFyYW1ldGVycykge1xuXHQgICAgcmV0dXJuIF9xdWVyeXN0cmluZzIuZGVmYXVsdC5zdHJpbmdpZnkocGFyYW1ldGVycyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmdcblx0ICogQHJldHVybnMge29iamVjdH1cblx0ICovXG5cdGZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpIHtcblx0ICAgIHJldHVybiBfcXVlcnlzdHJpbmcyLmRlZmF1bHQucGFyc2UocXVlcnlTdHJpbmcpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtIG9ialxuXHQgKiBAcmV0dXJuIHtib29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNGdW5jdGlvbihvYmopIHtcblx0ICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW0gb2JqXG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5KG9iaikge1xuXHQgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkgPyBBcnJheS5pc0FycmF5KG9iaikgOiB0eXBlb2Ygb2JqID09PSBcImFycmF5XCI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KG8pIHtcblx0ICAgIHJldHVybiBvICE9IG51bGwgJiYgKHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YobykpID09PSAnb2JqZWN0JyAmJiAhaXNBcnJheShvKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3RPYmplY3Qobykge1xuXHQgICAgcmV0dXJuIGlzT2JqZWN0KG8pID09PSB0cnVlICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qobykge1xuXHQgICAgdmFyIGN0b3IsIHByb3Q7XG5cdFxuXHQgICAgaWYgKGlzT2JqZWN0T2JqZWN0KG8pID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXHRcblx0ICAgIC8vIElmIGhhcyBtb2RpZmllZCBjb25zdHJ1Y3RvclxuXHQgICAgY3RvciA9IG8uY29uc3RydWN0b3I7XG5cdCAgICBpZiAodHlwZW9mIGN0b3IgIT09ICdmdW5jdGlvbicpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgICAvLyBJZiBoYXMgbW9kaWZpZWQgcHJvdG90eXBlXG5cdCAgICBwcm90ID0gY3Rvci5wcm90b3R5cGU7XG5cdCAgICBpZiAoaXNPYmplY3RPYmplY3QocHJvdCkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG5cdFxuXHQgICAgLy8gSWYgY29uc3RydWN0b3IgZG9lcyBub3QgaGF2ZSBhbiBPYmplY3Qtc3BlY2lmaWMgbWV0aG9kXG5cdCAgICBpZiAocHJvdC5oYXNPd25Qcm9wZXJ0eSgnaXNQcm90b3R5cGVPZicpID09PSBmYWxzZSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBNb3N0IGxpa2VseSBhIHBsYWluIE9iamVjdFxuXHQgICAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzTm9kZUpTKCkge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNCcm93c2VyKCkge1xuXHQgICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkZWxheSh0aW1lb3V0KSB7XG5cdCAgICByZXR1cm4gbmV3IF9FeHRlcm5hbHMuUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG5cdCAgICAgICAgfSwgdGltZW91dCk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0LyoqKi8gfSxcblx0LyogNCAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcInVzZSBzdHJpY3RcIjtcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdGV4cG9ydHMubG9jYWxTdG9yYWdlID0gZXhwb3J0cy5QVUJOVUIgPSBleHBvcnRzLkhlYWRlcnMgPSBleHBvcnRzLlJlc3BvbnNlID0gZXhwb3J0cy5SZXF1ZXN0ID0gZXhwb3J0cy5mZXRjaCA9IGV4cG9ydHMuUHJvbWlzZSA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfZXM2UHJvbWlzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2VzNlByb21pc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXM2UHJvbWlzZSk7XG5cdFxuXHR2YXIgX2ZldGNoUG9ueWZpbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9mZXRjaFBvbnlmaWxsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZldGNoUG9ueWZpbGwpO1xuXHRcblx0dmFyIF9wdWJudWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9wdWJudWIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHVibnViKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgcm9vdCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93IHx8IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXM7XCIpKCk7XG5cdFxuXHR2YXIgUHJvbWlzZSA9IF9lczZQcm9taXNlMi5kZWZhdWx0ICYmIF9lczZQcm9taXNlMi5kZWZhdWx0LlByb21pc2UgfHwgcm9vdC5Qcm9taXNlO1xuXHRcblx0dmFyIGZldGNoUGFydHMgPSBfZmV0Y2hQb255ZmlsbDIuZGVmYXVsdCA/ICgwLCBfZmV0Y2hQb255ZmlsbDIuZGVmYXVsdCkoeyBQcm9taXNlOiBQcm9taXNlIH0pIDoge307XG5cdFxuXHR2YXIgZmV0Y2ggPSBmZXRjaFBhcnRzLmZldGNoIHx8IHJvb3QuZmV0Y2g7XG5cdHZhciBSZXF1ZXN0ID0gZmV0Y2hQYXJ0cy5SZXF1ZXN0IHx8IHJvb3QuUmVxdWVzdDtcblx0dmFyIFJlc3BvbnNlID0gZmV0Y2hQYXJ0cy5SZXNwb25zZSB8fCByb290LlJlc3BvbnNlO1xuXHR2YXIgSGVhZGVycyA9IGZldGNoUGFydHMuSGVhZGVycyB8fCByb290LkhlYWRlcnM7XG5cdFxuXHR2YXIgUFVCTlVCID0gX3B1Ym51YjIuZGVmYXVsdCB8fCByb290LlBVQk5VQjtcblx0XG5cdHZhciBsb2NhbFN0b3JhZ2UgPSB0eXBlb2Ygcm9vdC5sb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnID8gcm9vdC5sb2NhbFN0b3JhZ2UgOiB7fTtcblx0XG5cdGV4cG9ydHMuUHJvbWlzZSA9IFByb21pc2U7XG5cdGV4cG9ydHMuZmV0Y2ggPSBmZXRjaDtcblx0ZXhwb3J0cy5SZXF1ZXN0ID0gUmVxdWVzdDtcblx0ZXhwb3J0cy5SZXNwb25zZSA9IFJlc3BvbnNlO1xuXHRleHBvcnRzLkhlYWRlcnMgPSBIZWFkZXJzO1xuXHRleHBvcnRzLlBVQk5VQiA9IFBVQk5VQjtcblx0ZXhwb3J0cy5sb2NhbFN0b3JhZ2UgPSBsb2NhbFN0b3JhZ2U7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblx0XG5cdC8qKiovIH0sXG5cdC8qIDUgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNV9fO1xuXHRcblx0LyoqKi8gfSxcblx0LyogNiAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X187XG5cdFxuXHQvKioqLyB9LFxuXHQvKiA3ICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXztcblx0XG5cdC8qKiovIH0sXG5cdC8qIDggKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLmRlY29kZSA9IGV4cG9ydHMucGFyc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRleHBvcnRzLmVuY29kZSA9IGV4cG9ydHMuc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHRcblx0LyoqKi8gfSxcblx0LyogOSAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblx0XG5cdC8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBJZiBvYmouaGFzT3duUHJvcGVydHkgaGFzIGJlZW4gb3ZlcnJpZGRlbiwgdGhlbiBjYWxsaW5nXG5cdC8vIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSB3aWxsIGJyZWFrLlxuXHQvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9pc3N1ZXMvMTcwN1xuXHRmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocXMsIHNlcCwgZXEsIG9wdGlvbnMpIHtcblx0ICBzZXAgPSBzZXAgfHwgJyYnO1xuXHQgIGVxID0gZXEgfHwgJz0nO1xuXHQgIHZhciBvYmogPSB7fTtcblx0XG5cdCAgaWYgKHR5cGVvZiBxcyAhPT0gJ3N0cmluZycgfHwgcXMubGVuZ3RoID09PSAwKSB7XG5cdCAgICByZXR1cm4gb2JqO1xuXHQgIH1cblx0XG5cdCAgdmFyIHJlZ2V4cCA9IC9cXCsvZztcblx0ICBxcyA9IHFzLnNwbGl0KHNlcCk7XG5cdFxuXHQgIHZhciBtYXhLZXlzID0gMTAwMDtcblx0ICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhLZXlzID09PSAnbnVtYmVyJykge1xuXHQgICAgbWF4S2V5cyA9IG9wdGlvbnMubWF4S2V5cztcblx0ICB9XG5cdFxuXHQgIHZhciBsZW4gPSBxcy5sZW5ndGg7XG5cdCAgLy8gbWF4S2V5cyA8PSAwIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsaW1pdCBrZXlzIGNvdW50XG5cdCAgaWYgKG1heEtleXMgPiAwICYmIGxlbiA+IG1heEtleXMpIHtcblx0ICAgIGxlbiA9IG1heEtleXM7XG5cdCAgfVxuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICB2YXIgeCA9IHFzW2ldLnJlcGxhY2UocmVnZXhwLCAnJTIwJyksXG5cdCAgICAgICAgaWR4ID0geC5pbmRleE9mKGVxKSxcblx0ICAgICAgICBrc3RyLCB2c3RyLCBrLCB2O1xuXHRcblx0ICAgIGlmIChpZHggPj0gMCkge1xuXHQgICAgICBrc3RyID0geC5zdWJzdHIoMCwgaWR4KTtcblx0ICAgICAgdnN0ciA9IHguc3Vic3RyKGlkeCArIDEpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAga3N0ciA9IHg7XG5cdCAgICAgIHZzdHIgPSAnJztcblx0ICAgIH1cblx0XG5cdCAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpO1xuXHQgICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2c3RyKTtcblx0XG5cdCAgICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwgaykpIHtcblx0ICAgICAgb2JqW2tdID0gdjtcblx0ICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmpba10pKSB7XG5cdCAgICAgIG9ialtrXS5wdXNoKHYpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb2JqW2tdID0gW29ialtrXSwgdl07XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRcblx0XG5cdC8qKiovIH0sXG5cdC8qIDEwICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXHRcblx0Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBzdHJpbmdpZnlQcmltaXRpdmUgPSBmdW5jdGlvbih2KSB7XG5cdCAgc3dpdGNoICh0eXBlb2Ygdikge1xuXHQgICAgY2FzZSAnc3RyaW5nJzpcblx0ICAgICAgcmV0dXJuIHY7XG5cdFxuXHQgICAgY2FzZSAnYm9vbGVhbic6XG5cdCAgICAgIHJldHVybiB2ID8gJ3RydWUnIDogJ2ZhbHNlJztcblx0XG5cdCAgICBjYXNlICdudW1iZXInOlxuXHQgICAgICByZXR1cm4gaXNGaW5pdGUodikgPyB2IDogJyc7XG5cdFxuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgcmV0dXJuICcnO1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG5cdCAgc2VwID0gc2VwIHx8ICcmJztcblx0ICBlcSA9IGVxIHx8ICc9Jztcblx0ICBpZiAob2JqID09PSBudWxsKSB7XG5cdCAgICBvYmogPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbihrKSB7XG5cdCAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG5cdCAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtrXSkpIHtcblx0ICAgICAgICByZXR1cm4gb2JqW2tdLm1hcChmdW5jdGlvbih2KSB7XG5cdCAgICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKHYpKTtcblx0ICAgICAgICB9KS5qb2luKHNlcCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmpba10pKTtcblx0ICAgICAgfVxuXHQgICAgfSkuam9pbihzZXApO1xuXHRcblx0ICB9XG5cdFxuXHQgIGlmICghbmFtZSkgcmV0dXJuICcnO1xuXHQgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG5hbWUpKSArIGVxICtcblx0ICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcblx0fTtcblx0XG5cdFxuXHQvKioqLyB9LFxuXHQvKiAxMSAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIENhY2hlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQ2FjaGUoc3RvcmFnZSwgcHJlZml4KSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhY2hlKTtcblx0XG5cdCAgICAgICAgdGhpcy5zZXRQcmVmaXgocHJlZml4KTtcblx0ICAgICAgICB0aGlzLl9zdG9yYWdlID0gc3RvcmFnZTtcblx0ICAgIH1cblx0XG5cdCAgICBDYWNoZS5wcm90b3R5cGUuc2V0UHJlZml4ID0gZnVuY3Rpb24gc2V0UHJlZml4KHByZWZpeCkge1xuXHQgICAgICAgIHRoaXMuX3ByZWZpeCA9IHByZWZpeCB8fCBDYWNoZS5kZWZhdWx0UHJlZml4O1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICBDYWNoZS5wcm90b3R5cGUuc2V0SXRlbSA9IGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCBkYXRhKSB7XG5cdCAgICAgICAgdGhpcy5fc3RvcmFnZVt0aGlzLl9wcmVmaXhLZXkoa2V5KV0gPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgQ2FjaGUucHJvdG90eXBlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiByZW1vdmVJdGVtKGtleSkge1xuXHQgICAgICAgIGRlbGV0ZSB0aGlzLl9zdG9yYWdlW3RoaXMuX3ByZWZpeEtleShrZXkpXTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgQ2FjaGUucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbiBnZXRJdGVtKGtleSkge1xuXHQgICAgICAgIHZhciBpdGVtID0gdGhpcy5fc3RvcmFnZVt0aGlzLl9wcmVmaXhLZXkoa2V5KV07XG5cdCAgICAgICAgaWYgKCFpdGVtKSByZXR1cm4gbnVsbDtcblx0ICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQ2FjaGUucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24gY2xlYW4oKSB7XG5cdFxuXHQgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl9zdG9yYWdlKSB7XG5cdFxuXHQgICAgICAgICAgICBpZiAoIXRoaXMuX3N0b3JhZ2UuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XG5cdFxuXHQgICAgICAgICAgICBpZiAoa2V5LmluZGV4T2YodGhpcy5fcHJlZml4KSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3N0b3JhZ2Vba2V5XTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIENhY2hlLnByb3RvdHlwZS5fcHJlZml4S2V5ID0gZnVuY3Rpb24gX3ByZWZpeEtleShrZXkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fcHJlZml4ICsga2V5O1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQ2FjaGU7XG5cdH0oKTtcblx0XG5cdENhY2hlLmRlZmF1bHRQcmVmaXggPSAncmMtJztcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2FjaGU7XG5cdFxuXHQvKioqLyB9LFxuXHQvKiAxMiAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblx0XG5cdC8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuXHQvL1xuXHQvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuXHQvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cdC8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuXHQvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5cdC8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcblx0Ly8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG5cdC8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXHQvL1xuXHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuXHQvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblx0Ly9cblx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuXHQvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5cdC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cblx0Ly8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5cdC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuXHQvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG5cdC8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHRmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG5cdCAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuXHQgIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG5cdH1cblx0bW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cdFxuXHQvLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcblx0RXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXHRcblx0Ly8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG5cdC8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5cdEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cdFxuXHQvLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncblx0Ly8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuXHQgIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG5cdCAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuXHQgIHRoaXMuX21heExpc3RlbmVycyA9IG47XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG5cdCAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMpXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0XG5cdCAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuXHQgIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG5cdCAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuXHQgICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuXHQgICAgICBlciA9IGFyZ3VtZW50c1sxXTtcblx0ICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0ICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG5cdCAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG5cdCAgICAgICAgZXJyLmNvbnRleHQgPSBlcjtcblx0ICAgICAgICB0aHJvdyBlcnI7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdFxuXHQgIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcblx0ICAgIHJldHVybiBmYWxzZTtcblx0XG5cdCAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcblx0ICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuXHQgICAgICAvLyBmYXN0IGNhc2VzXG5cdCAgICAgIGNhc2UgMTpcblx0ICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgMjpcblx0ICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAzOlxuXHQgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIC8vIHNsb3dlclxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuXHQgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdCAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG5cdCAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuXHQgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuXHQgIHZhciBtO1xuXHRcblx0ICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuXHQgICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMpXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0XG5cdCAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcblx0ICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG5cdCAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcblx0ICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuXHQgICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cblx0ICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG5cdCAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cblx0ICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuXHQgIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG5cdCAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG5cdCAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG5cdCAgZWxzZVxuXHQgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG5cdCAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cdFxuXHQgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG5cdCAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcblx0ICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuXHQgICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG5cdCAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuXHQgICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcblx0ICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcblx0ICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcblx0ICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuXHQgICAgICAgIGNvbnNvbGUudHJhY2UoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcblx0ICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdFxuXHQgIHZhciBmaXJlZCA9IGZhbHNlO1xuXHRcblx0ICBmdW5jdGlvbiBnKCkge1xuXHQgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblx0XG5cdCAgICBpZiAoIWZpcmVkKSB7XG5cdCAgICAgIGZpcmVkID0gdHJ1ZTtcblx0ICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcblx0ICB0aGlzLm9uKHR5cGUsIGcpO1xuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdC8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuXHQgIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXHRcblx0ICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuXHQgICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcblx0ICAgIHJldHVybiB0aGlzO1xuXHRcblx0ICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHQgIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuXHQgIHBvc2l0aW9uID0gLTE7XG5cdFxuXHQgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuXHQgICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcblx0ICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdCAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuXHQgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXHRcblx0ICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG5cdCAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG5cdCAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuXHQgICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG5cdCAgICAgICAgcG9zaXRpb24gPSBpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHBvc2l0aW9uIDwgMClcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIGxpc3QubGVuZ3RoID0gMDtcblx0ICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuXHQgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0ICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cdFxuXHQgIGlmICghdGhpcy5fZXZlbnRzKVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdFxuXHQgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcblx0ICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG5cdCAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHQgICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuXHQgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHRcblx0ICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG5cdCAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuXHQgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0XG5cdCAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG5cdCAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG5cdCAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcblx0ICAgIC8vIExJRk8gb3JkZXJcblx0ICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuXHQgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuXHQgIH1cblx0ICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXHRcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuXHQgIHZhciByZXQ7XG5cdCAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcblx0ICAgIHJldCA9IFtdO1xuXHQgIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcblx0ICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuXHQgIGVsc2Vcblx0ICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG5cdCAgaWYgKHRoaXMuX2V2ZW50cykge1xuXHQgICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cdFxuXHQgICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG5cdCAgICAgIHJldHVybiAxO1xuXHQgICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcblx0ICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuXHQgIH1cblx0ICByZXR1cm4gMDtcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuXHQgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc051bWJlcihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT09IHZvaWQgMDtcblx0fVxuXHRcblx0XG5cdC8qKiovIH0sXG5cdC8qIDEzICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRleHBvcnRzLmZpbmRIZWFkZXJOYW1lID0gZmluZEhlYWRlck5hbWU7XG5cdFxuXHR2YXIgX0V4dGVybmFscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX1V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfZXZlbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXHRcblx0dmFyIF9BcGlSZXNwb25zZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0dmFyIF9BcGlSZXNwb25zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BcGlSZXNwb25zZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IGZ1bmN0aW9uIHN0ZXAoa2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHN0ZXAoXCJuZXh0XCIsIHZhbHVlKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gc3RlcChcInRocm93XCIsIGVycik7IH0pOyB9IH0gcmV0dXJuIHN0ZXAoXCJuZXh0XCIpOyB9KTsgfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgQ2xpZW50ID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcblx0ICAgIF9pbmhlcml0cyhDbGllbnQsIF9FdmVudEVtaXR0ZXIpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIENsaWVudCgpIHtcblx0ICAgICAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXHRcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2xpZW50KTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0V2ZW50RW1pdHRlci5jYWxsLmFwcGx5KF9FdmVudEVtaXR0ZXIsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5ldmVudHMgPSB7XG5cdCAgICAgICAgICAgIGJlZm9yZVJlcXVlc3Q6ICdiZWZvcmVSZXF1ZXN0Jyxcblx0ICAgICAgICAgICAgcmVxdWVzdFN1Y2Nlc3M6ICdyZXF1ZXN0U3VjY2VzcycsXG5cdCAgICAgICAgICAgIHJlcXVlc3RFcnJvcjogJ3JlcXVlc3RFcnJvcidcblx0ICAgICAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdFxuXHQgICAgICogQHJldHVybiB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG5cdCAgICAgKi9cblx0XG5cdCAgICBDbGllbnQucHJvdG90eXBlLnNlbmRSZXF1ZXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXF1ZXN0KSB7XG5cdCAgICAgICAgICAgIHZhciBhcGlSZXNwb25zZTtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpUmVzcG9uc2UgPSBuZXcgX0FwaVJlc3BvbnNlMi5kZWZhdWx0KHJlcXVlc3QpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7XG5cdFxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETyBTdG9wIHJlcXVlc3QgaWYgbGlzdGVuZXJzIHJldHVybiBmYWxzZVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmJlZm9yZVJlcXVlc3QsIGFwaVJlc3BvbnNlKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkUmVzcG9uc2UocmVxdWVzdCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZXNwb25zZS5fcmVzcG9uc2UgPSBfY29udGV4dC5zZW50O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpUmVzcG9uc2UuX2luaXQoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcGlSZXNwb25zZS5vaygpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzcG9uc2UgaGFzIHVuc3VjY2Vzc2Z1bCBzdGF0dXMnKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLnJlcXVlc3RTdWNjZXNzLCBhcGlSZXNwb25zZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCBhcGlSZXNwb25zZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFtcImNhdGNoXCJdKDEpO1xuXHRcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9jb250ZXh0LnQwLmFwaVJlc3BvbnNlKSBfY29udGV4dC50MCA9IHRoaXMubWFrZUVycm9yKF9jb250ZXh0LnQwLCBhcGlSZXNwb25zZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLnJlcXVlc3RFcnJvciwgX2NvbnRleHQudDApO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0LnQwO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMSwgMTRdXSk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBzZW5kUmVxdWVzdChfeCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHNlbmRSZXF1ZXN0O1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0XG5cdCAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlc3BvbnNlPn1cblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQ2xpZW50LnByb3RvdHlwZS5fbG9hZFJlc3BvbnNlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlcXVlc3QpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfRXh0ZXJuYWxzLmZldGNoLmNhbGwobnVsbCwgcmVxdWVzdCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdChcInJldHVyblwiLCBfY29udGV4dDIuc2VudCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpO1xuXHQgICAgICAgIH0pKTtcblx0XG5cdCAgICAgICAgZnVuY3Rpb24gX2xvYWRSZXNwb25zZShfeDIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2xvYWRSZXNwb25zZTtcblx0ICAgIH0oKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFdyYXBzIHRoZSBKUyBFcnJvciBvYmplY3Qgd2l0aCB0cmFuc2FjdGlvbiBpbmZvcm1hdGlvblxuXHQgICAgICogQHBhcmFtIHtFcnJvcnxJQXBpRXJyb3J9IGVcblx0ICAgICAqIEBwYXJhbSB7QXBpUmVzcG9uc2V9IGFwaVJlc3BvbnNlXG5cdCAgICAgKiBAcmV0dXJuIHtJQXBpRXJyb3J9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQ2xpZW50LnByb3RvdHlwZS5tYWtlRXJyb3IgPSBmdW5jdGlvbiBtYWtlRXJyb3IoZSwgYXBpUmVzcG9uc2UpIHtcblx0XG5cdCAgICAgICAgLy8gV3JhcCBvbmx5IGlmIHJlZ3VsYXIgZXJyb3Jcblx0ICAgICAgICBpZiAoIWUuaGFzT3duUHJvcGVydHkoJ2FwaVJlc3BvbnNlJykgJiYgIWUuaGFzT3duUHJvcGVydHkoJ29yaWdpbmFsTWVzc2FnZScpKSB7XG5cdFxuXHQgICAgICAgICAgICBlLmFwaVJlc3BvbnNlID0gYXBpUmVzcG9uc2U7XG5cdCAgICAgICAgICAgIGUub3JpZ2luYWxNZXNzYWdlID0gZS5tZXNzYWdlO1xuXHQgICAgICAgICAgICBlLm1lc3NhZ2UgPSBhcGlSZXNwb25zZSAmJiBhcGlSZXNwb25zZS5lcnJvcih0cnVlKSB8fCBlLm9yaWdpbmFsTWVzc2FnZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBlO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gaW5pdFxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IFtpbml0LnVybF1cblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbaW5pdC5ib2R5XVxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IFtpbml0Lm1ldGhvZF1cblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbaW5pdC5xdWVyeV1cblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbaW5pdC5oZWFkZXJzXVxuXHQgICAgICogQHJldHVybiB7UmVxdWVzdH1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBDbGllbnQucHJvdG90eXBlLmNyZWF0ZVJlcXVlc3QgPSBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KGluaXQpIHtcblx0XG5cdCAgICAgICAgaW5pdCA9IGluaXQgfHwge307XG5cdCAgICAgICAgaW5pdC5oZWFkZXJzID0gaW5pdC5oZWFkZXJzIHx8IHt9O1xuXHRcblx0ICAgICAgICAvLyBTYW5pdHkgY2hlY2tzXG5cdCAgICAgICAgaWYgKCFpbml0LnVybCkgdGhyb3cgbmV3IEVycm9yKCdVcmwgaXMgbm90IGRlZmluZWQnKTtcblx0ICAgICAgICBpZiAoIWluaXQubWV0aG9kKSBpbml0Lm1ldGhvZCA9ICdHRVQnO1xuXHQgICAgICAgIGluaXQubWV0aG9kID0gaW5pdC5tZXRob2QudG9VcHBlckNhc2UoKTtcblx0ICAgICAgICBpZiAoaW5pdC5tZXRob2QgJiYgQ2xpZW50Ll9hbGxvd2VkTWV0aG9kcy5pbmRleE9mKGluaXQubWV0aG9kKSA8IDApIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2QgaGFzIHdyb25nIHZhbHVlOiAnICsgaW5pdC5tZXRob2QpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gRGVmYXVsdHNcblx0ICAgICAgICBpbml0LmNyZWRlbnRpYWxzID0gaW5pdC5jcmVkZW50aWFscyB8fCAnaW5jbHVkZSc7XG5cdCAgICAgICAgaW5pdC5tb2RlID0gaW5pdC5tb2RlIHx8ICdjb3JzJztcblx0XG5cdCAgICAgICAgLy8gQXBwZW5kIFF1ZXJ5IFN0cmluZ1xuXHQgICAgICAgIGlmIChpbml0LnF1ZXJ5KSB7XG5cdCAgICAgICAgICAgIGluaXQudXJsID0gaW5pdC51cmwgKyAoaW5pdC51cmwuaW5kZXhPZignPycpID4gLTEgPyAnJicgOiAnPycpICsgKDAsIF9VdGlscy5xdWVyeVN0cmluZ2lmeSkoaW5pdC5xdWVyeSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoIWZpbmRIZWFkZXJOYW1lKCdBY2NlcHQnLCBpbml0LmhlYWRlcnMpKSB7XG5cdCAgICAgICAgICAgIGluaXQuaGVhZGVyc1snQWNjZXB0J10gPSBfQXBpUmVzcG9uc2UyLmRlZmF1bHQuX2pzb25Db250ZW50VHlwZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIFNlcmlhbGl6ZSBib2R5XG5cdCAgICAgICAgaWYgKCgwLCBfVXRpbHMuaXNQbGFpbk9iamVjdCkoaW5pdC5ib2R5KSB8fCAhaW5pdC5ib2R5KSB7XG5cdFxuXHQgICAgICAgICAgICB2YXIgY29udGVudFR5cGVIZWFkZXJOYW1lID0gZmluZEhlYWRlck5hbWUoX0FwaVJlc3BvbnNlMi5kZWZhdWx0Ll9jb250ZW50VHlwZSwgaW5pdC5oZWFkZXJzKTtcblx0XG5cdCAgICAgICAgICAgIGlmICghY29udGVudFR5cGVIZWFkZXJOYW1lKSB7XG5cdCAgICAgICAgICAgICAgICBjb250ZW50VHlwZUhlYWRlck5hbWUgPSBfQXBpUmVzcG9uc2UyLmRlZmF1bHQuX2NvbnRlbnRUeXBlO1xuXHQgICAgICAgICAgICAgICAgaW5pdC5oZWFkZXJzW2NvbnRlbnRUeXBlSGVhZGVyTmFtZV0gPSBfQXBpUmVzcG9uc2UyLmRlZmF1bHQuX2pzb25Db250ZW50VHlwZTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgdmFyIGNvbnRlbnRUeXBlID0gaW5pdC5oZWFkZXJzW2NvbnRlbnRUeXBlSGVhZGVyTmFtZV07XG5cdFxuXHQgICAgICAgICAgICAvLyBBc3NpZ24gYSBuZXcgZW5jb2RlZCBib2R5XG5cdCAgICAgICAgICAgIGlmIChjb250ZW50VHlwZS5pbmRleE9mKF9BcGlSZXNwb25zZTIuZGVmYXVsdC5fanNvbkNvbnRlbnRUeXBlKSA+IC0xKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoKGluaXQubWV0aG9kID09PSAnR0VUJyB8fCBpbml0Lm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiAhIWluaXQuYm9keSkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIG9kZGx5IHNldHRpbmcgYm9keSB0byBudWxsIHN0aWxsIHJlc3VsdCBpbiBUeXBlRXJyb3IgaW4gcGhhbnRvbWpzXG5cdCAgICAgICAgICAgICAgICAgICAgaW5pdC5ib2R5ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBpbml0LmJvZHkgPSBKU09OLnN0cmluZ2lmeShpbml0LmJvZHkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRlbnRUeXBlLmluZGV4T2YoX0FwaVJlc3BvbnNlMi5kZWZhdWx0Ll91cmxlbmNvZGVkQ29udGVudFR5cGUpID4gLTEpIHtcblx0ICAgICAgICAgICAgICAgIGluaXQuYm9keSA9ICgwLCBfVXRpbHMucXVlcnlTdHJpbmdpZnkpKGluaXQuYm9keSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIENyZWF0ZSBhIHJlcXVlc3Qgd2l0aCBlbmNvZGVkIGJvZHlcblx0ICAgICAgICB2YXIgcmVxID0gbmV3IF9FeHRlcm5hbHMuUmVxdWVzdChpbml0LnVybCwgaW5pdCk7XG5cdFxuXHQgICAgICAgIC8vIEtlZXAgdGhlIG9yaWdpbmFsIGJvZHkgYWNjZXNzaWJsZSBkaXJlY3RseSAoZm9yIG1vY2tzKVxuXHQgICAgICAgIHJlcS5vcmlnaW5hbEJvZHkgPSBpbml0LmJvZHk7XG5cdFxuXHQgICAgICAgIHJldHVybiByZXE7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBDbGllbnQ7XG5cdH0oX2V2ZW50czIuZGVmYXVsdCk7XG5cdFxuXHRDbGllbnQuX2FsbG93ZWRNZXRob2RzID0gWydHRVQnLCAnUE9TVCcsICdQVVQnLCAnREVMRVRFJywgJ1BBVENIJywgJ09QVElPTlMnLCAnSEVBRCddO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDbGllbnQ7XG5cdGZ1bmN0aW9uIGZpbmRIZWFkZXJOYW1lKG5hbWUsIGhlYWRlcnMpIHtcblx0ICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgICByZXR1cm4gT2JqZWN0LmtleXMoaGVhZGVycykucmVkdWNlKGZ1bmN0aW9uIChyZXMsIGtleSkge1xuXHQgICAgICAgIGlmIChyZXMpIHJldHVybiByZXM7XG5cdCAgICAgICAgaWYgKG5hbWUgPT0ga2V5LnRvTG93ZXJDYXNlKCkpIHJldHVybiBrZXk7XG5cdCAgICAgICAgcmV0dXJuIHJlcztcblx0ICAgIH0sIG51bGwpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQG5hbWUgSUFwaUVycm9yXG5cdCAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzdGFja1xuXHQgKiBAcHJvcGVydHkge3N0cmluZ30gb3JpZ2luYWxNZXNzYWdlXG5cdCAqIEBwcm9wZXJ0eSB7QXBpUmVzcG9uc2V9IGFwaVJlc3BvbnNlXG5cdCAqL1xuXHRcblx0LyoqKi8gfSxcblx0LyogMTQgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRcblx0dmFyIF9FeHRlcm5hbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybiBuZXcgX0V4dGVybmFscy5Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgZnVuY3Rpb24gc3RlcChrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyByZXR1cm4gX0V4dGVybmFscy5Qcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBzdGVwKFwibmV4dFwiLCB2YWx1ZSk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHN0ZXAoXCJ0aHJvd1wiLCBlcnIpOyB9KTsgfSB9IHJldHVybiBzdGVwKFwibmV4dFwiKTsgfSk7IH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgQXBpUmVzcG9uc2UgPSBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3Rcblx0ICAgICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzcG9uc2VUZXh0XG5cdCAgICAgKi9cblx0XG5cdCAgICBmdW5jdGlvbiBBcGlSZXNwb25zZShyZXF1ZXN0LCByZXNwb25zZSwgcmVzcG9uc2VUZXh0KSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFwaVJlc3BvbnNlKTtcblx0XG5cdCAgICAgICAgLyoqIEB0eXBlIHtSZXF1ZXN0fSAqL1xuXHQgICAgICAgIHRoaXMuX3JlcXVlc3QgPSByZXF1ZXN0O1xuXHRcblx0ICAgICAgICAvKiogQHR5cGUge1Jlc3BvbnNlfSAqL1xuXHQgICAgICAgIHRoaXMuX3Jlc3BvbnNlID0gcmVzcG9uc2U7XG5cdFxuXHQgICAgICAgIHRoaXMuX3RleHQgPSByZXNwb25zZVRleHQ7XG5cdCAgICAgICAgdGhpcy5fanNvbiA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fbXVsdGlwYXJ0ID0gW107XG5cdCAgICB9XG5cdFxuXHQgICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5faXNNdWx0aXBhcnQoKSB8fCB0aGlzLl9pc0pzb24oKSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlKCkudGV4dCgpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGV4dCA9IF9jb250ZXh0LnNlbnQ7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCdyZXR1cm4nLCB0aGlzKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTtcblx0ICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIF9pbml0KCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9pbml0O1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHJldHVybiB7UmVzcG9uc2V9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLnJlc3BvbnNlID0gZnVuY3Rpb24gcmVzcG9uc2UoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNlO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge1JlcXVlc3R9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0O1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLm9rID0gZnVuY3Rpb24gb2soKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNlICYmIHRoaXMuX3Jlc3BvbnNlLm9rO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge3N0cmluZ31cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBBcGlSZXNwb25zZS5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uIHRleHQoKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLl9pc0pzb24oKSAmJiAhdGhpcy5faXNNdWx0aXBhcnQoKSkgdGhyb3cgbmV3IEVycm9yKCdSZXNwb25zZSBpcyBub3QgdGV4dCcpO1xuXHQgICAgICAgIHJldHVybiB0aGlzLl90ZXh0O1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge29iamVjdH1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBBcGlSZXNwb25zZS5wcm90b3R5cGUuanNvbiA9IGZ1bmN0aW9uIGpzb24oKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLl9pc0pzb24oKSkgdGhyb3cgbmV3IEVycm9yKCdSZXNwb25zZSBpcyBub3QgSlNPTicpO1xuXHQgICAgICAgIGlmICghdGhpcy5fanNvbikge1xuXHQgICAgICAgICAgICB0aGlzLl9qc29uID0gdGhpcy5fdGV4dCA/IEpTT04ucGFyc2UodGhpcy5fdGV4dCkgOiBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpcy5fanNvbjtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0gW3NraXBPS0NoZWNrXVxuXHQgICAgICogQHJldHVybiB7c3RyaW5nfVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIEFwaVJlc3BvbnNlLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIGVycm9yKHNraXBPS0NoZWNrKSB7XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLm9rKCkgJiYgIXNraXBPS0NoZWNrKSByZXR1cm4gbnVsbDtcblx0XG5cdCAgICAgICAgdmFyIG1lc3NhZ2UgPSAodGhpcy5fcmVzcG9uc2UgJiYgdGhpcy5fcmVzcG9uc2Uuc3RhdHVzID8gdGhpcy5fcmVzcG9uc2Uuc3RhdHVzICsgJyAnIDogJycpICsgKHRoaXMuX3Jlc3BvbnNlICYmIHRoaXMuX3Jlc3BvbnNlLnN0YXR1c1RleHQgPyB0aGlzLl9yZXNwb25zZS5zdGF0dXNUZXh0IDogJycpO1xuXHRcblx0ICAgICAgICB0cnkge1xuXHRcblx0ICAgICAgICAgICAgaWYgKHRoaXMuanNvbigpLm1lc3NhZ2UpIG1lc3NhZ2UgPSB0aGlzLmpzb24oKS5tZXNzYWdlO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5qc29uKCkuZXJyb3JfZGVzY3JpcHRpb24pIG1lc3NhZ2UgPSB0aGlzLmpzb24oKS5lcnJvcl9kZXNjcmlwdGlvbjtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuanNvbigpLmRlc2NyaXB0aW9uKSBtZXNzYWdlID0gdGhpcy5qc29uKCkuZGVzY3JpcHRpb247XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge31cblx0XG5cdCAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHJldHVybiB7QXBpUmVzcG9uc2VbXX1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBBcGlSZXNwb25zZS5wcm90b3R5cGUubXVsdGlwYXJ0ID0gZnVuY3Rpb24gbXVsdGlwYXJ0KCkge1xuXHRcblx0ICAgICAgICBpZiAoIXRoaXMuX2lzTXVsdGlwYXJ0KCkpIHRocm93IG5ldyBFcnJvcignUmVzcG9uc2UgaXMgbm90IG11bHRpcGFydCcpO1xuXHRcblx0ICAgICAgICBpZiAoIXRoaXMuX211bHRpcGFydC5sZW5ndGgpIHtcblx0XG5cdCAgICAgICAgICAgIC8vIFN0ZXAgMS4gU3BsaXQgbXVsdGlwYXJ0IHJlc3BvbnNlXG5cdFxuXHQgICAgICAgICAgICB2YXIgdGV4dCA9IHRoaXMudGV4dCgpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKCF0ZXh0KSB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlc3BvbnNlIGJvZHknKTtcblx0XG5cdCAgICAgICAgICAgIHZhciBib3VuZGFyeSA9IHRoaXMuX2dldENvbnRlbnRUeXBlKCkubWF0Y2goL2JvdW5kYXJ5PShbXjtdKykvaSlbMV07XG5cdFxuXHQgICAgICAgICAgICBpZiAoIWJvdW5kYXJ5KSB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIGJvdW5kYXJ5Jyk7XG5cdFxuXHQgICAgICAgICAgICB2YXIgcGFydHMgPSB0ZXh0LnRvU3RyaW5nKCkuc3BsaXQoQXBpUmVzcG9uc2UuX2JvdW5kYXJ5U2VwYXJhdG9yICsgYm91bmRhcnkpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKHBhcnRzWzBdLnRyaW0oKSA9PT0gJycpIHBhcnRzLnNoaWZ0KCk7XG5cdCAgICAgICAgICAgIGlmIChwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXS50cmltKCkgPT0gQXBpUmVzcG9uc2UuX2JvdW5kYXJ5U2VwYXJhdG9yKSBwYXJ0cy5wb3AoKTtcblx0XG5cdCAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPCAxKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHBhcnRzIGluIGJvZHknKTtcblx0XG5cdCAgICAgICAgICAgIC8vIFN0ZXAgMi4gUGFyc2Ugc3RhdHVzIGluZm9cblx0XG5cdCAgICAgICAgICAgIHZhciBzdGF0dXNJbmZvID0gQXBpUmVzcG9uc2UuY3JlYXRlKHBhcnRzLnNoaWZ0KCksIHRoaXMuX3Jlc3BvbnNlLnN0YXR1cywgdGhpcy5fcmVzcG9uc2Uuc3RhdHVzVGV4dCkuanNvbigpO1xuXHRcblx0ICAgICAgICAgICAgLy8gU3RlcCAzLiBQYXJzZSBhbGwgb3RoZXIgcGFydHNcblx0XG5cdCAgICAgICAgICAgIHRoaXMuX211bHRpcGFydCA9IHBhcnRzLm1hcChmdW5jdGlvbiAocGFydCwgaSkge1xuXHRcblx0ICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSBzdGF0dXNJbmZvLnJlc3BvbnNlW2ldLnN0YXR1cztcblx0XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gQXBpUmVzcG9uc2UuY3JlYXRlKHBhcnQsIHN0YXR1cyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX211bHRpcGFydDtcblx0ICAgIH07XG5cdFxuXHQgICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLl9pc0NvbnRlbnRUeXBlID0gZnVuY3Rpb24gX2lzQ29udGVudFR5cGUoY29udGVudFR5cGUpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q29udGVudFR5cGUoKS5pbmRleE9mKGNvbnRlbnRUeXBlKSA+IC0xO1xuXHQgICAgfTtcblx0XG5cdCAgICBBcGlSZXNwb25zZS5wcm90b3R5cGUuX2dldENvbnRlbnRUeXBlID0gZnVuY3Rpb24gX2dldENvbnRlbnRUeXBlKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9yZXNwb25zZS5oZWFkZXJzLmdldChBcGlSZXNwb25zZS5fY29udGVudFR5cGUpIHx8ICcnO1xuXHQgICAgfTtcblx0XG5cdCAgICBBcGlSZXNwb25zZS5wcm90b3R5cGUuX2lzTXVsdGlwYXJ0ID0gZnVuY3Rpb24gX2lzTXVsdGlwYXJ0KCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9pc0NvbnRlbnRUeXBlKEFwaVJlc3BvbnNlLl9tdWx0aXBhcnRDb250ZW50VHlwZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEFwaVJlc3BvbnNlLnByb3RvdHlwZS5faXNVcmxFbmNvZGVkID0gZnVuY3Rpb24gX2lzVXJsRW5jb2RlZCgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5faXNDb250ZW50VHlwZShBcGlSZXNwb25zZS5fdXJsZW5jb2RlZENvbnRlbnRUeXBlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLl9pc0pzb24gPSBmdW5jdGlvbiBfaXNKc29uKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9pc0NvbnRlbnRUeXBlKEFwaVJlc3BvbnNlLl9qc29uQ29udGVudFR5cGUpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE1ldGhvZCBpcyB1c2VkIHRvIGNyZWF0ZSBBcGlSZXNwb25zZSBvYmplY3QgZnJvbSBzdHJpbmcgcGFydHMgb2YgbXVsdGlwYXJ0L21peGVkIHJlc3BvbnNlXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3RleHRdXG5cdCAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXR1c11cblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RhdHVzVGV4dF1cblx0ICAgICAqIEByZXR1cm4ge0FwaVJlc3BvbnNlfVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIEFwaVJlc3BvbnNlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZSh0ZXh0LCBzdGF0dXMsIHN0YXR1c1RleHQpIHtcblx0XG5cdCAgICAgICAgdGV4dCA9IHRleHQgfHwgJyc7XG5cdCAgICAgICAgc3RhdHVzID0gc3RhdHVzIHx8IDIwMDtcblx0ICAgICAgICBzdGF0dXNUZXh0ID0gc3RhdHVzVGV4dCB8fCAnT0snO1xuXHRcblx0ICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHIvZywgJycpO1xuXHRcblx0ICAgICAgICB2YXIgaGVhZGVycyA9IG5ldyBfRXh0ZXJuYWxzLkhlYWRlcnMoKSxcblx0ICAgICAgICAgICAgaGVhZGVyc0FuZEJvZHkgPSB0ZXh0LnNwbGl0KEFwaVJlc3BvbnNlLl9ib2R5U2VwYXJhdG9yKSxcblx0ICAgICAgICAgICAgaGVhZGVyc1RleHQgPSBoZWFkZXJzQW5kQm9keS5sZW5ndGggPiAxID8gaGVhZGVyc0FuZEJvZHkuc2hpZnQoKSA6ICcnO1xuXHRcblx0ICAgICAgICB0ZXh0ID0gaGVhZGVyc0FuZEJvZHkubGVuZ3RoID4gMCA/IGhlYWRlcnNBbmRCb2R5LmpvaW4oQXBpUmVzcG9uc2UuX2JvZHlTZXBhcmF0b3IpIDogbnVsbDtcblx0XG5cdCAgICAgICAgKGhlYWRlcnNUZXh0IHx8ICcnKS5zcGxpdCgnXFxuJykuZm9yRWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7XG5cdFxuXHQgICAgICAgICAgICB2YXIgc3BsaXQgPSBoZWFkZXIudHJpbSgpLnNwbGl0KEFwaVJlc3BvbnNlLl9oZWFkZXJTZXBhcmF0b3IpLFxuXHQgICAgICAgICAgICAgICAga2V5ID0gc3BsaXQuc2hpZnQoKS50cmltKCksXG5cdCAgICAgICAgICAgICAgICB2YWx1ZSA9IHNwbGl0LmpvaW4oQXBpUmVzcG9uc2UuX2hlYWRlclNlcGFyYXRvcikudHJpbSgpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGtleSkgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBuZXcgQXBpUmVzcG9uc2UobnVsbCwgbmV3IF9FeHRlcm5hbHMuUmVzcG9uc2UodGV4dCA/IHRleHQgOiB1bmRlZmluZWQsIHtcblx0ICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcblx0ICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG5cdCAgICAgICAgICAgIHN0YXR1c1RleHQ6IHN0YXR1c1RleHRcblx0ICAgICAgICB9KSwgdGV4dCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBBcGlSZXNwb25zZTtcblx0fSgpO1xuXHRcblx0QXBpUmVzcG9uc2UuX2NvbnRlbnRUeXBlID0gJ0NvbnRlbnQtVHlwZSc7XG5cdEFwaVJlc3BvbnNlLl9qc29uQ29udGVudFR5cGUgPSAnYXBwbGljYXRpb24vanNvbic7XG5cdEFwaVJlc3BvbnNlLl9tdWx0aXBhcnRDb250ZW50VHlwZSA9ICdtdWx0aXBhcnQvbWl4ZWQnO1xuXHRBcGlSZXNwb25zZS5fdXJsZW5jb2RlZENvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XG5cdEFwaVJlc3BvbnNlLl9oZWFkZXJTZXBhcmF0b3IgPSAnOic7XG5cdEFwaVJlc3BvbnNlLl9ib2R5U2VwYXJhdG9yID0gJ1xcblxcbic7XG5cdEFwaVJlc3BvbnNlLl9ib3VuZGFyeVNlcGFyYXRvciA9ICctLSc7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEFwaVJlc3BvbnNlO1xuXHRcblx0LyoqKi8gfSxcblx0LyogMTUgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRcblx0dmFyIF9SZWdpc3RyeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0dmFyIF9SZWdpc3RyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SZWdpc3RyeSk7XG5cdFxuXHR2YXIgX0NsaWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0dmFyIF9DbGllbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2xpZW50KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgZnVuY3Rpb24gc3RlcChrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gc3RlcChcIm5leHRcIiwgdmFsdWUpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBzdGVwKFwidGhyb3dcIiwgZXJyKTsgfSk7IH0gfSByZXR1cm4gc3RlcChcIm5leHRcIik7IH0pOyB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBDbGllbnQgPSBmdW5jdGlvbiAoX0h0dHBDbGllbnQpIHtcblx0ICAgIF9pbmhlcml0cyhDbGllbnQsIF9IdHRwQ2xpZW50KTtcblx0XG5cdCAgICBmdW5jdGlvbiBDbGllbnQoKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENsaWVudCk7XG5cdFxuXHQgICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9IdHRwQ2xpZW50LmNhbGwodGhpcykpO1xuXHRcblx0ICAgICAgICBfdGhpcy5fcmVnaXN0cnkgPSBuZXcgX1JlZ2lzdHJ5Mi5kZWZhdWx0KCk7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzO1xuXHQgICAgfVxuXHRcblx0ICAgIENsaWVudC5wcm90b3R5cGUucmVnaXN0cnkgPSBmdW5jdGlvbiByZWdpc3RyeSgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fcmVnaXN0cnk7XG5cdCAgICB9O1xuXHRcblx0ICAgIENsaWVudC5wcm90b3R5cGUuX2xvYWRSZXNwb25zZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVxdWVzdCkge1xuXHQgICAgICAgICAgICB2YXIgbW9jaztcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9jayA9IHRoaXMuX3JlZ2lzdHJ5LmZpbmQocmVxdWVzdCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2NrLmdldFJlc3BvbnNlKHJlcXVlc3QpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgncmV0dXJuJywgX2NvbnRleHQuc2VudCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBfbG9hZFJlc3BvbnNlKF94KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX2xvYWRSZXNwb25zZTtcblx0ICAgIH0oKTtcblx0XG5cdCAgICByZXR1cm4gQ2xpZW50O1xuXHR9KF9DbGllbnQyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2xpZW50O1xuXHRcblx0LyoqKi8gfSxcblx0LyogMTYgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRcblx0dmFyIF9Nb2NrID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHR2YXIgX01vY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTW9jayk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBSZWdpc3RyeSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJlZ2lzdHJ5KCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWdpc3RyeSk7XG5cdFxuXHQgICAgICAgIHRoaXMuX21vY2tzID0gW107XG5cdCAgICB9XG5cdFxuXHQgICAgUmVnaXN0cnkucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChtb2NrKSB7XG5cdCAgICAgICAgdGhpcy5fbW9ja3MucHVzaChtb2NrKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgUmVnaXN0cnkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG5cdCAgICAgICAgdGhpcy5fbW9ja3MgPSBbXTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgUmVnaXN0cnkucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbiBmaW5kKHJlcXVlc3QpIHtcblx0XG5cdCAgICAgICAgLy9jb25zb2xlLmxvZygnUmVnaXN0cnkgaXMgbG9va2luZyBmb3InLCByZXF1ZXN0KTtcblx0XG5cdCAgICAgICAgdmFyIG1vY2sgPSB0aGlzLl9tb2Nrcy5zaGlmdCgpO1xuXHRcblx0ICAgICAgICBpZiAoIW1vY2spIHRocm93IG5ldyBFcnJvcignTm8gbW9jayBpbiByZWdpc3RyeSBmb3IgcmVxdWVzdCAnICsgcmVxdWVzdC5tZXRob2QgKyAnICcgKyByZXF1ZXN0LnVybCk7XG5cdFxuXHQgICAgICAgIGlmICghbW9jay50ZXN0KHJlcXVlc3QpKSB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIHJlcXVlc3QgJyArIHJlcXVlc3QubWV0aG9kICsgJyAnICsgcmVxdWVzdC51cmwgKyAnIGZvciBleHBlY3RlZCBtb2NrICcgKyBtb2NrLm1ldGhvZCgpICsgJyAnICsgbW9jay5wYXRoKCkpO1xuXHRcblx0ICAgICAgICByZXR1cm4gbW9jaztcblx0ICAgIH07XG5cdFxuXHQgICAgUmVnaXN0cnkucHJvdG90eXBlLmFwaUNhbGwgPSBmdW5jdGlvbiBhcGlDYWxsKG1ldGhvZCwgcGF0aCwgcmVzcG9uc2UsIHN0YXR1cywgc3RhdHVzVGV4dCwgZGVsYXkpIHtcblx0XG5cdCAgICAgICAgdGhpcy5hZGQobmV3IF9Nb2NrMi5kZWZhdWx0KG1ldGhvZCwgcGF0aCwgcmVzcG9uc2UsIHN0YXR1cywgc3RhdHVzVGV4dCwgZGVsYXkpKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlZ2lzdHJ5LnByb3RvdHlwZS5hdXRoZW50aWNhdGlvbiA9IGZ1bmN0aW9uIGF1dGhlbnRpY2F0aW9uKCkge1xuXHRcblx0ICAgICAgICB0aGlzLmFwaUNhbGwoJ1BPU1QnLCAnL3Jlc3RhcGkvb2F1dGgvdG9rZW4nLCB7XG5cdCAgICAgICAgICAgICdhY2Nlc3NfdG9rZW4nOiAnQUNDRVNTX1RPS0VOJyxcblx0ICAgICAgICAgICAgJ3Rva2VuX3R5cGUnOiAnYmVhcmVyJyxcblx0ICAgICAgICAgICAgJ2V4cGlyZXNfaW4nOiAzNjAwLFxuXHQgICAgICAgICAgICAncmVmcmVzaF90b2tlbic6ICdSRUZSRVNIX1RPS0VOJyxcblx0ICAgICAgICAgICAgJ3JlZnJlc2hfdG9rZW5fZXhwaXJlc19pbic6IDYwNDgwLFxuXHQgICAgICAgICAgICAnc2NvcGUnOiAnU01TIFJDTSBGb28gQm9vJyxcblx0ICAgICAgICAgICAgJ2V4cGlyZVRpbWUnOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDM2MDAwMDBcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlZ2lzdHJ5LnByb3RvdHlwZS5sb2dvdXQgPSBmdW5jdGlvbiBsb2dvdXQoKSB7XG5cdFxuXHQgICAgICAgIHRoaXMuYXBpQ2FsbCgnUE9TVCcsICcvcmVzdGFwaS9vYXV0aC9yZXZva2UnLCB7fSk7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICBSZWdpc3RyeS5wcm90b3R5cGUucHJlc2VuY2VMb2FkID0gZnVuY3Rpb24gcHJlc2VuY2VMb2FkKGlkKSB7XG5cdFxuXHQgICAgICAgIHRoaXMuYXBpQ2FsbCgnR0VUJywgJy9yZXN0YXBpL3YxLjAvYWNjb3VudC9+L2V4dGVuc2lvbi8nICsgaWQgKyAnL3ByZXNlbmNlJywge1xuXHQgICAgICAgICAgICBcInVyaVwiOiBcImh0dHBzOi8vcGxhdGZvcm0ucmluZ2NlbnRyYWwuY29tL3Jlc3RhcGkvdjEuMC9hY2NvdW50LzEyMy9leHRlbnNpb24vXCIgKyBpZCArIFwiL3ByZXNlbmNlXCIsXG5cdCAgICAgICAgICAgIFwiZXh0ZW5zaW9uXCI6IHtcblx0ICAgICAgICAgICAgICAgIFwidXJpXCI6IFwiaHR0cHM6Ly9wbGF0Zm9ybS5yaW5nY2VudHJhbC5jb20vcmVzdGFwaS92MS4wL2FjY291bnQvMTIzL2V4dGVuc2lvbi9cIiArIGlkLFxuXHQgICAgICAgICAgICAgICAgXCJpZFwiOiBpZCxcblx0ICAgICAgICAgICAgICAgIFwiZXh0ZW5zaW9uTnVtYmVyXCI6IFwiMTAxXCJcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgXCJhY3RpdmVDYWxsc1wiOiBbXSxcblx0ICAgICAgICAgICAgXCJwcmVzZW5jZVN0YXR1c1wiOiBcIkF2YWlsYWJsZVwiLFxuXHQgICAgICAgICAgICBcInRlbGVwaG9ueVN0YXR1c1wiOiBcIlJpbmdpbmdcIixcblx0ICAgICAgICAgICAgXCJ1c2VyU3RhdHVzXCI6IFwiQXZhaWxhYmxlXCIsXG5cdCAgICAgICAgICAgIFwiZG5kU3RhdHVzXCI6IFwiVGFrZUFsbENhbGxzXCIsXG5cdCAgICAgICAgICAgIFwiZXh0ZW5zaW9uSWRcIjogaWRcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlZ2lzdHJ5LnByb3RvdHlwZS5zdWJzY3JpYmVHZW5lcmljID0gZnVuY3Rpb24gc3Vic2NyaWJlR2VuZXJpYyhleHBpcmVzSW4pIHtcblx0XG5cdCAgICAgICAgZXhwaXJlc0luID0gZXhwaXJlc0luIHx8IDE1ICogNjAgKiA2MDtcblx0XG5cdCAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcblx0ICAgICAgICB0aGlzLmFwaUNhbGwoJ1BPU1QnLCAnL3Jlc3RhcGkvdjEuMC9zdWJzY3JpcHRpb24nLCB7XG5cdCAgICAgICAgICAgICdldmVudEZpbHRlcnMnOiBbJy9yZXN0YXBpL3YxLjAvYWNjb3VudC9+L2V4dGVuc2lvbi9+L3ByZXNlbmNlJ10sXG5cdCAgICAgICAgICAgICdleHBpcmF0aW9uVGltZSc6IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpICsgZXhwaXJlc0luICogMTAwMCkudG9JU09TdHJpbmcoKSxcblx0ICAgICAgICAgICAgJ2V4cGlyZXNJbic6IGV4cGlyZXNJbixcblx0ICAgICAgICAgICAgJ2RlbGl2ZXJ5TW9kZSc6IHtcblx0ICAgICAgICAgICAgICAgICd0cmFuc3BvcnRUeXBlJzogJ1B1Yk51YicsXG5cdCAgICAgICAgICAgICAgICAnZW5jcnlwdGlvbic6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgJ2FkZHJlc3MnOiAnMTIzX2ZvbycsXG5cdCAgICAgICAgICAgICAgICAnc3Vic2NyaWJlcktleSc6ICdzdWItYy1mb28nLFxuXHQgICAgICAgICAgICAgICAgJ3NlY3JldEtleSc6ICdzZWMtYy1iYXInXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICdpZCc6ICdmb28tYmFyLWJheicsXG5cdCAgICAgICAgICAgICdjcmVhdGlvblRpbWUnOiBkYXRlLnRvSVNPU3RyaW5nKCksXG5cdCAgICAgICAgICAgICdzdGF0dXMnOiAnQWN0aXZlJyxcblx0ICAgICAgICAgICAgJ3VyaSc6ICdodHRwczovL3BsYXRmb3JtLnJpbmdjZW50cmFsLmNvbS9yZXN0YXBpL3YxLjAvc3Vic2NyaXB0aW9uL2Zvby1iYXItYmF6J1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgUmVnaXN0cnkucHJvdG90eXBlLnN1YnNjcmliZU9uUHJlc2VuY2UgPSBmdW5jdGlvbiBzdWJzY3JpYmVPblByZXNlbmNlKGlkLCBkZXRhaWxlZCkge1xuXHRcblx0ICAgICAgICBpZCA9IGlkIHx8ICcxJztcblx0XG5cdCAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcblx0ICAgICAgICB0aGlzLmFwaUNhbGwoJ1BPU1QnLCAnL3Jlc3RhcGkvdjEuMC9zdWJzY3JpcHRpb24nLCB7XG5cdCAgICAgICAgICAgICdldmVudEZpbHRlcnMnOiBbJy9yZXN0YXBpL3YxLjAvYWNjb3VudC9+L2V4dGVuc2lvbi8nICsgaWQgKyAnL3ByZXNlbmNlJyArIChkZXRhaWxlZCA/ICc/ZGV0YWlsZWRUZWxlcGhvbnlTdGF0ZT10cnVlJyA6ICcnKV0sXG5cdCAgICAgICAgICAgICdleHBpcmF0aW9uVGltZSc6IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpICsgMTUgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcblx0ICAgICAgICAgICAgJ2RlbGl2ZXJ5TW9kZSc6IHtcblx0ICAgICAgICAgICAgICAgICd0cmFuc3BvcnRUeXBlJzogJ1B1Yk51YicsXG5cdCAgICAgICAgICAgICAgICAnZW5jcnlwdGlvbic6IHRydWUsXG5cdCAgICAgICAgICAgICAgICAnYWRkcmVzcyc6ICcxMjNfZm9vJyxcblx0ICAgICAgICAgICAgICAgICdzdWJzY3JpYmVyS2V5JzogJ3N1Yi1jLWZvbycsXG5cdCAgICAgICAgICAgICAgICAnc2VjcmV0S2V5JzogJ3NlYy1jLWJhcicsXG5cdCAgICAgICAgICAgICAgICAnZW5jcnlwdGlvbkFsZ29yaXRobSc6ICdBRVMnLFxuXHQgICAgICAgICAgICAgICAgJ2VuY3J5cHRpb25LZXknOiAnVlF3YjZFVk5jUVBCaEUvSmdGWjJ6dz09J1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAnY3JlYXRpb25UaW1lJzogZGF0ZS50b0lTT1N0cmluZygpLFxuXHQgICAgICAgICAgICAnaWQnOiAnZm9vLWJhci1iYXonLFxuXHQgICAgICAgICAgICAnc3RhdHVzJzogJ0FjdGl2ZScsXG5cdCAgICAgICAgICAgICd1cmknOiAnaHR0cHM6Ly9wbGF0Zm9ybS5yaW5nY2VudHJhbC5jb20vcmVzdGFwaS92MS4wL3N1YnNjcmlwdGlvbi9mb28tYmFyLWJheidcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIFJlZ2lzdHJ5LnByb3RvdHlwZS50b2tlblJlZnJlc2ggPSBmdW5jdGlvbiB0b2tlblJlZnJlc2goZmFpbHVyZSkge1xuXHRcblx0ICAgICAgICBpZiAoIWZhaWx1cmUpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuYXBpQ2FsbCgnUE9TVCcsICcvcmVzdGFwaS9vYXV0aC90b2tlbicsIHtcblx0ICAgICAgICAgICAgICAgICdhY2Nlc3NfdG9rZW4nOiAnQUNDRVNTX1RPS0VOX0ZST01fUkVGUkVTSCcsXG5cdCAgICAgICAgICAgICAgICAndG9rZW5fdHlwZSc6ICdiZWFyZXInLFxuXHQgICAgICAgICAgICAgICAgJ2V4cGlyZXNfaW4nOiAzNjAwLFxuXHQgICAgICAgICAgICAgICAgJ3JlZnJlc2hfdG9rZW4nOiAnUkVGUkVTSF9UT0tFTl9GUk9NX1JFRlJFU0gnLFxuXHQgICAgICAgICAgICAgICAgJ3JlZnJlc2hfdG9rZW5fZXhwaXJlc19pbic6IDYwNDgwLFxuXHQgICAgICAgICAgICAgICAgJ3Njb3BlJzogJ1NNUyBSQ00gRm9vIEJvbydcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuYXBpQ2FsbCgnUE9TVCcsICcvcmVzdGFwaS9vYXV0aC90b2tlbicsIHtcblx0ICAgICAgICAgICAgICAgICdtZXNzYWdlJzogJ1dyb25nIHRva2VuJyxcblx0ICAgICAgICAgICAgICAgICdlcnJvcl9kZXNjcmlwdGlvbic6ICdXcm9uZyB0b2tlbicsXG5cdCAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnV3JvbmcgdG9rZW4nXG5cdCAgICAgICAgICAgIH0sIDQwMCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFJlZ2lzdHJ5O1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZWdpc3RyeTtcblx0XG5cdC8qKiovIH0sXG5cdC8qIDE3ICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0XG5cdHZhciBfRXh0ZXJuYWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfQXBpUmVzcG9uc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfQXBpUmVzcG9uc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXBpUmVzcG9uc2UpO1xuXHRcblx0dmFyIF9VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybiBuZXcgX0V4dGVybmFscy5Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgZnVuY3Rpb24gc3RlcChrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyByZXR1cm4gX0V4dGVybmFscy5Qcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBzdGVwKFwibmV4dFwiLCB2YWx1ZSk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHN0ZXAoXCJ0aHJvd1wiLCBlcnIpOyB9KTsgfSB9IHJldHVybiBzdGVwKFwibmV4dFwiKTsgfSk7IH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgTW9jayA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE1vY2sobWV0aG9kLCBwYXRoLCBqc29uLCBzdGF0dXMsIHN0YXR1c1RleHQsIGRlbGF5KSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vY2spO1xuXHRcblx0ICAgICAgICB0aGlzLl9tZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKTtcblx0ICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcblx0ICAgICAgICB0aGlzLl9qc29uID0ganNvbiB8fCB7fTtcblx0ICAgICAgICB0aGlzLl9kZWxheSA9IGRlbGF5IHx8IDEwO1xuXHQgICAgICAgIHRoaXMuX3N0YXR1cyA9IHN0YXR1cyB8fCAyMDA7XG5cdCAgICAgICAgdGhpcy5fc3RhdHVzVGV4dCA9IHN0YXR1c1RleHQgfHwgJ09LJztcblx0ICAgIH1cblx0XG5cdCAgICBNb2NrLnByb3RvdHlwZS5wYXRoID0gZnVuY3Rpb24gcGF0aCgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fcGF0aDtcblx0ICAgIH07XG5cdFxuXHQgICAgTW9jay5wcm90b3R5cGUubWV0aG9kID0gZnVuY3Rpb24gbWV0aG9kKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9tZXRob2Q7XG5cdCAgICB9O1xuXHRcblx0ICAgIE1vY2sucHJvdG90eXBlLnRlc3QgPSBmdW5jdGlvbiB0ZXN0KHJlcXVlc3QpIHtcblx0XG5cdCAgICAgICAgcmV0dXJuIHJlcXVlc3QudXJsLmluZGV4T2YodGhpcy5fcGF0aCkgPiAtMSAmJiByZXF1ZXN0Lm1ldGhvZC50b1VwcGVyQ2FzZSgpID09IHRoaXMuX21ldGhvZDtcblx0ICAgIH07XG5cdFxuXHQgICAgTW9jay5wcm90b3R5cGUuZ2V0UmVzcG9uc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlcXVlc3QpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9VdGlscy5kZWxheSkodGhpcy5fZGVsYXkpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgncmV0dXJuJywgdGhpcy5jcmVhdGVSZXNwb25zZSh0aGlzLl9qc29uKSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBnZXRSZXNwb25zZShfeCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIGdldFJlc3BvbnNlO1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIE1vY2sucHJvdG90eXBlLmNyZWF0ZVJlc3BvbnNlID0gZnVuY3Rpb24gY3JlYXRlUmVzcG9uc2UoanNvbiwgaW5pdCkge1xuXHRcblx0ICAgICAgICBpbml0ID0gaW5pdCB8fCB7fTtcblx0XG5cdCAgICAgICAgaW5pdC5zdGF0dXMgPSBpbml0LnN0YXR1cyB8fCB0aGlzLl9zdGF0dXM7XG5cdCAgICAgICAgaW5pdC5zdGF0dXNUZXh0ID0gaW5pdC5zdGF0dXNUZXh0IHx8IHRoaXMuX3N0YXR1c1RleHQ7XG5cdFxuXHQgICAgICAgIHZhciBzdHIgPSBKU09OLnN0cmluZ2lmeShqc29uKSxcblx0ICAgICAgICAgICAgcmVzID0gbmV3IF9FeHRlcm5hbHMuUmVzcG9uc2Uoc3RyLCBpbml0KTtcblx0XG5cdCAgICAgICAgcmVzLmhlYWRlcnMuc2V0KF9BcGlSZXNwb25zZTIuZGVmYXVsdC5fY29udGVudFR5cGUsIF9BcGlSZXNwb25zZTIuZGVmYXVsdC5fanNvbkNvbnRlbnRUeXBlKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHJlcztcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIE1vY2s7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IE1vY2s7XG5cdFxuXHQvKioqLyB9LFxuXHQvKiAxOCAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblx0XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0XG5cdHZhciBfRXh0ZXJuYWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfZXZlbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXHRcblx0dmFyIF9BdXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdFxuXHR2YXIgX0F1dGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXV0aCk7XG5cdFxuXHR2YXIgX1V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfQ29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHR2YXIgX0NvbnN0YW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25zdGFudHMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBnZW4gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyByZXR1cm4gbmV3IF9FeHRlcm5hbHMuUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IGZ1bmN0aW9uIHN0ZXAoa2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgcmV0dXJuIF9FeHRlcm5hbHMuUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gc3RlcChcIm5leHRcIiwgdmFsdWUpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBzdGVwKFwidGhyb3dcIiwgZXJyKTsgfSk7IH0gfSByZXR1cm4gc3RlcChcIm5leHRcIik7IH0pOyB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBQbGF0Zm9ybSA9IGZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG5cdCAgICBfaW5oZXJpdHMoUGxhdGZvcm0sIF9FdmVudEVtaXR0ZXIpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFBsYXRmb3JtKF9yZWYpIHtcblx0ICAgICAgICB2YXIgY2xpZW50ID0gX3JlZi5jbGllbnQ7XG5cdCAgICAgICAgdmFyIGNhY2hlID0gX3JlZi5jYWNoZTtcblx0ICAgICAgICB2YXIgc2VydmVyID0gX3JlZi5zZXJ2ZXI7XG5cdCAgICAgICAgdmFyIGFwcEtleSA9IF9yZWYuYXBwS2V5O1xuXHQgICAgICAgIHZhciBhcHBTZWNyZXQgPSBfcmVmLmFwcFNlY3JldDtcblx0ICAgICAgICB2YXIgYXBwTmFtZSA9IF9yZWYuYXBwTmFtZTtcblx0ICAgICAgICB2YXIgYXBwVmVyc2lvbiA9IF9yZWYuYXBwVmVyc2lvbjtcblx0ICAgICAgICB2YXIgc2RrVmVyc2lvbiA9IF9yZWYuc2RrVmVyc2lvbjtcblx0ICAgICAgICB2YXIgcmVkaXJlY3RVcmkgPSBfcmVmLnJlZGlyZWN0VXJpO1xuXHRcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGxhdGZvcm0pO1xuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXHRcblx0ICAgICAgICBfdGhpcy5ldmVudHMgPSB7XG5cdCAgICAgICAgICAgIGJlZm9yZUxvZ2luOiAnYmVmb3JlTG9naW4nLFxuXHQgICAgICAgICAgICBsb2dpblN1Y2Nlc3M6ICdsb2dpblN1Y2Nlc3MnLFxuXHQgICAgICAgICAgICBsb2dpbkVycm9yOiAnbG9naW5FcnJvcicsXG5cdCAgICAgICAgICAgIGJlZm9yZVJlZnJlc2g6ICdiZWZvcmVSZWZyZXNoJyxcblx0ICAgICAgICAgICAgcmVmcmVzaFN1Y2Nlc3M6ICdyZWZyZXNoU3VjY2VzcycsXG5cdCAgICAgICAgICAgIHJlZnJlc2hFcnJvcjogJ3JlZnJlc2hFcnJvcicsXG5cdCAgICAgICAgICAgIGJlZm9yZUxvZ291dDogJ2JlZm9yZUxvZ291dCcsXG5cdCAgICAgICAgICAgIGxvZ291dFN1Y2Nlc3M6ICdsb2dvdXRTdWNjZXNzJyxcblx0ICAgICAgICAgICAgbG9nb3V0RXJyb3I6ICdsb2dvdXRFcnJvcidcblx0ICAgICAgICB9O1xuXHRcblx0XG5cdCAgICAgICAgX3RoaXMuX3NlcnZlciA9IHNlcnZlcjtcblx0ICAgICAgICBfdGhpcy5fYXBwS2V5ID0gYXBwS2V5O1xuXHQgICAgICAgIF90aGlzLl9hcHBTZWNyZXQgPSBhcHBTZWNyZXQ7XG5cdFxuXHQgICAgICAgIC8qKiBAdHlwZSB7Q2FjaGV9ICovXG5cdCAgICAgICAgX3RoaXMuX2NhY2hlID0gY2FjaGU7XG5cdFxuXHQgICAgICAgIC8qKiBAdHlwZSB7Q2xpZW50fSAqL1xuXHQgICAgICAgIF90aGlzLl9jbGllbnQgPSBjbGllbnQ7XG5cdFxuXHQgICAgICAgIC8qKiBAdHlwZSB7UHJvbWlzZTxBcGlSZXNwb25zZT59ICovXG5cdCAgICAgICAgX3RoaXMuX3JlZnJlc2hQcm9taXNlID0gbnVsbDtcblx0XG5cdCAgICAgICAgX3RoaXMuX2F1dGggPSBuZXcgX0F1dGgyLmRlZmF1bHQoX3RoaXMuX2NhY2hlLCBQbGF0Zm9ybS5fY2FjaGVJZCk7XG5cdFxuXHQgICAgICAgIF90aGlzLl91c2VyQWdlbnQgPSAoYXBwTmFtZSA/IGFwcE5hbWUgKyAoYXBwVmVyc2lvbiA/ICcvJyArIGFwcFZlcnNpb24gOiAnJykgKyAnICcgOiAnJykgKyAnUkNKU1NESy8nICsgc2RrVmVyc2lvbjtcblx0XG5cdCAgICAgICAgX3RoaXMuX3JlZGlyZWN0VXJpID0gcmVkaXJlY3RVcmkgfHwgJyc7XG5cdFxuXHQgICAgICAgIHJldHVybiBfdGhpcztcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge0F1dGh9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLmF1dGggPSBmdW5jdGlvbiBhdXRoKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9hdXRoO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge0NsaWVudH1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBQbGF0Zm9ybS5wcm90b3R5cGUuY2xpZW50ID0gZnVuY3Rpb24gY2xpZW50KCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9jbGllbnQ7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYWRkU2VydmVyXVxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmFkZE1ldGhvZF1cblx0ICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYWRkVG9rZW5dXG5cdCAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLmNyZWF0ZVVybCA9IGZ1bmN0aW9uIGNyZWF0ZVVybChwYXRoLCBvcHRpb25zKSB7XG5cdFxuXHQgICAgICAgIHBhdGggPSBwYXRoIHx8ICcnO1xuXHQgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcblx0ICAgICAgICB2YXIgYnVpbHRVcmwgPSAnJyxcblx0ICAgICAgICAgICAgaGFzSHR0cCA9IHBhdGguaW5kZXhPZignaHR0cDovLycpICE9IC0xIHx8IHBhdGguaW5kZXhPZignaHR0cHM6Ly8nKSAhPSAtMTtcblx0XG5cdCAgICAgICAgaWYgKG9wdGlvbnMuYWRkU2VydmVyICYmICFoYXNIdHRwKSBidWlsdFVybCArPSB0aGlzLl9zZXJ2ZXI7XG5cdFxuXHQgICAgICAgIGlmIChwYXRoLmluZGV4T2YoUGxhdGZvcm0uX3VybFByZWZpeCkgPT0gLTEgJiYgIWhhc0h0dHApIGJ1aWx0VXJsICs9IFBsYXRmb3JtLl91cmxQcmVmaXggKyAnLycgKyBQbGF0Zm9ybS5fYXBpVmVyc2lvbjtcblx0XG5cdCAgICAgICAgYnVpbHRVcmwgKz0gcGF0aDtcblx0XG5cdCAgICAgICAgaWYgKG9wdGlvbnMuYWRkTWV0aG9kIHx8IG9wdGlvbnMuYWRkVG9rZW4pIGJ1aWx0VXJsICs9IHBhdGguaW5kZXhPZignPycpID4gLTEgPyAnJicgOiAnPyc7XG5cdFxuXHQgICAgICAgIGlmIChvcHRpb25zLmFkZE1ldGhvZCkgYnVpbHRVcmwgKz0gJ19tZXRob2Q9JyArIG9wdGlvbnMuYWRkTWV0aG9kO1xuXHQgICAgICAgIGlmIChvcHRpb25zLmFkZFRva2VuKSBidWlsdFVybCArPSAob3B0aW9ucy5hZGRNZXRob2QgPyAnJicgOiAnJykgKyAnYWNjZXNzX3Rva2VuPScgKyB0aGlzLl9hdXRoLmFjY2Vzc1Rva2VuKCk7XG5cdFxuXHQgICAgICAgIHJldHVybiBidWlsdFVybDtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5yZWRpcmVjdFVyaVxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuc3RhdGVcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmJyYW5kSWRcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmRpc3BsYXlcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnByb21wdFxuXHQgICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLmltcGxpY2l0XG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG5cdCAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLmxvZ2luVXJsID0gZnVuY3Rpb24gbG9naW5Vcmwob3B0aW9ucykge1xuXHRcblx0ICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVXJsKFBsYXRmb3JtLl9hdXRob3JpemVFbmRwb2ludCArICc/JyArICgwLCBfVXRpbHMucXVlcnlTdHJpbmdpZnkpKHtcblx0ICAgICAgICAgICAgJ3Jlc3BvbnNlX3R5cGUnOiBvcHRpb25zLmltcGxpY2l0ID8gJ3Rva2VuJyA6ICdjb2RlJyxcblx0ICAgICAgICAgICAgJ3JlZGlyZWN0X3VyaSc6IG9wdGlvbnMucmVkaXJlY3RVcmkgfHwgdGhpcy5fcmVkaXJlY3RVcmksXG5cdCAgICAgICAgICAgICdjbGllbnRfaWQnOiB0aGlzLl9hcHBLZXksXG5cdCAgICAgICAgICAgICdzdGF0ZSc6IG9wdGlvbnMuc3RhdGUgfHwgJycsXG5cdCAgICAgICAgICAgICdicmFuZF9pZCc6IG9wdGlvbnMuYnJhbmRJZCB8fCAnJyxcblx0ICAgICAgICAgICAgJ2Rpc3BsYXknOiBvcHRpb25zLmRpc3BsYXkgfHwgJycsXG5cdCAgICAgICAgICAgICdwcm9tcHQnOiBvcHRpb25zLnByb21wdCB8fCAnJ1xuXHQgICAgICAgIH0pLCB7IGFkZFNlcnZlcjogdHJ1ZSB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG5cdCAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLnBhcnNlTG9naW5SZWRpcmVjdCA9IGZ1bmN0aW9uIHBhcnNlTG9naW5SZWRpcmVjdCh1cmwpIHtcblx0XG5cdCAgICAgICAgZnVuY3Rpb24gZ2V0UGFydHModXJsLCBzZXBhcmF0b3IpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHVybC5zcGxpdChzZXBhcmF0b3IpLnJldmVyc2UoKVswXTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciByZXNwb25zZSA9IHVybC5pbmRleE9mKCcjJykgPT09IDAgJiYgZ2V0UGFydHModXJsLCAnIycpIHx8IHVybC5pbmRleE9mKCc/JykgPT09IDAgJiYgZ2V0UGFydHModXJsLCAnPycpIHx8IG51bGw7XG5cdFxuXHQgICAgICAgIGlmICghcmVzcG9uc2UpIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHBhcnNlIHJlc3BvbnNlJyk7XG5cdFxuXHQgICAgICAgIHZhciBxcyA9ICgwLCBfVXRpbHMucGFyc2VRdWVyeVN0cmluZykocmVzcG9uc2UpO1xuXHRcblx0ICAgICAgICBpZiAoIXFzKSB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBwYXJzZSByZXNwb25zZScpO1xuXHRcblx0ICAgICAgICB2YXIgZXJyb3IgPSBxcy5lcnJvcl9kZXNjcmlwdGlvbiB8fCBxcy5lcnJvcjtcblx0XG5cdCAgICAgICAgaWYgKGVycm9yKSB7XG5cdCAgICAgICAgICAgIHZhciBlID0gbmV3IEVycm9yKGVycm9yKTtcblx0ICAgICAgICAgICAgZS5lcnJvciA9IHFzLmVycm9yO1xuXHQgICAgICAgICAgICB0aHJvdyBlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHFzO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBoYW5kbGUgMy1sZWdnZWQgT0F1dGhcblx0ICAgICAqXG5cdCAgICAgKiBBdHRlbnRpb24hIFRoaXMgaXMgYW4gZXhwZXJpbWVudGFsIG1ldGhvZCBhbmQgaXQncyBzaWduYXR1cmUgYW5kIGJlaGF2aW9yIG1heSBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG5cdCAgICAgKlxuXHQgICAgICogQGV4cGVyaW1lbnRhbFxuXHQgICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoXVxuXHQgICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmhlaWdodF1cblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5sb2dpbl0gYWRkaXRpb25hbCBvcHRpb25zIGZvciBsb2dpbigpXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3JpZ2luXVxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnByb3BlcnR5XSBuYW1lIG9mIHdpbmRvdy5wb3N0TWVzc2FnZSdzIGV2ZW50IGRhdGEgcHJvcGVydHlcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy50YXJnZXRdIHRhcmdldCBmb3Igd2luZG93Lm9wZW4oKVxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudXJsXG5cdCAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIFBsYXRmb3JtLnByb3RvdHlwZS5sb2dpbldpbmRvdyA9IGZ1bmN0aW9uIGxvZ2luV2luZG93KG9wdGlvbnMpIHtcblx0ICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgICAgcmV0dXJuIG5ldyBfRXh0ZXJuYWxzLlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcblx0ICAgICAgICAgICAgaWYgKCEoMCwgX1V0aWxzLmlzQnJvd3NlcikoKSkgdGhyb3cgbmV3IEVycm9yKCdUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBvbmx5IGluIGJyb3dzZXInKTtcblx0XG5cdCAgICAgICAgICAgIGlmICghb3B0aW9ucy51cmwpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYW5kYXRvcnkgVVJMIHBhcmFtZXRlcicpO1xuXHRcblx0ICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgICAgICAgICAgIG9wdGlvbnMudXJsID0gb3B0aW9ucy51cmwgfHwgNDAwO1xuXHQgICAgICAgICAgICBvcHRpb25zLndpZHRoID0gb3B0aW9ucy53aWR0aCB8fCA0MDA7XG5cdCAgICAgICAgICAgIG9wdGlvbnMuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgfHwgNjAwO1xuXHQgICAgICAgICAgICBvcHRpb25zLm9yaWdpbiA9IG9wdGlvbnMub3JpZ2luIHx8IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG5cdCAgICAgICAgICAgIG9wdGlvbnMucHJvcGVydHkgPSBvcHRpb25zLnByb3BlcnR5IHx8IF9Db25zdGFudHMyLmRlZmF1bHQuYXV0aFJlc3BvbnNlUHJvcGVydHk7XG5cdCAgICAgICAgICAgIG9wdGlvbnMudGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgJ19ibGFuayc7XG5cdFxuXHQgICAgICAgICAgICB2YXIgZHVhbFNjcmVlbkxlZnQgPSB3aW5kb3cuc2NyZWVuTGVmdCAhPSB1bmRlZmluZWQgPyB3aW5kb3cuc2NyZWVuTGVmdCA6IHNjcmVlbi5sZWZ0O1xuXHQgICAgICAgICAgICB2YXIgZHVhbFNjcmVlblRvcCA9IHdpbmRvdy5zY3JlZW5Ub3AgIT0gdW5kZWZpbmVkID8gd2luZG93LnNjcmVlblRvcCA6IHNjcmVlbi50b3A7XG5cdFxuXHQgICAgICAgICAgICB2YXIgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCA/IHdpbmRvdy5pbm5lcldpZHRoIDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIDogc2NyZWVuLndpZHRoO1xuXHQgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ID8gd2luZG93LmlubmVySGVpZ2h0IDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgOiBzY3JlZW4uaGVpZ2h0O1xuXHRcblx0ICAgICAgICAgICAgdmFyIGxlZnQgPSB3aWR0aCAvIDIgLSBvcHRpb25zLndpZHRoIC8gMiArIGR1YWxTY3JlZW5MZWZ0O1xuXHQgICAgICAgICAgICB2YXIgdG9wID0gaGVpZ2h0IC8gMiAtIG9wdGlvbnMuaGVpZ2h0IC8gMiArIGR1YWxTY3JlZW5Ub3A7XG5cdCAgICAgICAgICAgIHZhciB3aW4gPSB3aW5kb3cub3BlbihvcHRpb25zLnVybCwgJ19ibGFuaycsIG9wdGlvbnMudGFyZ2V0ID09ICdfYmxhbmsnID8gJ3Njcm9sbGJhcnM9eWVzLCBzdGF0dXM9eWVzLCB3aWR0aD0nICsgb3B0aW9ucy53aWR0aCArICcsIGhlaWdodD0nICsgb3B0aW9ucy5oZWlnaHQgKyAnLCBsZWZ0PScgKyBsZWZ0ICsgJywgdG9wPScgKyB0b3AgOiAnJyk7XG5cdFxuXHQgICAgICAgICAgICBpZiAod2luZG93LmZvY3VzKSB3aW4uZm9jdXMoKTtcblx0XG5cdCAgICAgICAgICAgIHZhciBldmVudE1ldGhvZCA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID8gJ2FkZEV2ZW50TGlzdGVuZXInIDogJ2F0dGFjaEV2ZW50Jztcblx0ICAgICAgICAgICAgdmFyIGV2ZW50UmVtb3ZlTWV0aG9kID0gZXZlbnRNZXRob2QgPT0gJ2FkZEV2ZW50TGlzdGVuZXInID8gJ3JlbW92ZUV2ZW50TGlzdGVuZXInIDogJ2RldGFjaEV2ZW50Jztcblx0ICAgICAgICAgICAgdmFyIG1lc3NhZ2VFdmVudCA9IGV2ZW50TWV0aG9kID09ICdhZGRFdmVudExpc3RlbmVyJyA/ICdtZXNzYWdlJyA6ICdvbm1lc3NhZ2UnO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiBldmVudExpc3RlbmVyKGUpIHtcblx0XG5cdCAgICAgICAgICAgICAgICBpZiAoZS5vcmlnaW4gIT0gb3B0aW9ucy5vcmlnaW4pIHJldHVybjtcblx0ICAgICAgICAgICAgICAgIGlmICghZS5kYXRhIHx8ICFlLmRhdGFbb3B0aW9ucy5wcm9wZXJ0eV0pIHJldHVybjsgLy8ga2VlcCB3YWl0aW5nXG5cdFxuXHQgICAgICAgICAgICAgICAgd2luLmNsb3NlKCk7XG5cdCAgICAgICAgICAgICAgICB3aW5kb3dbZXZlbnRSZW1vdmVNZXRob2RdKG1lc3NhZ2VFdmVudCwgZXZlbnRMaXN0ZW5lcik7XG5cdFxuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ2luT3B0aW9ucyA9IF90aGlzMi5wYXJzZUxvZ2luUmVkaXJlY3QoZS5kYXRhW29wdGlvbnMucHJvcGVydHldKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2dpbk9wdGlvbnMuY29kZSAmJiAhbG9naW5PcHRpb25zLmFjY2Vzc190b2tlbikgdGhyb3cgbmV3IEVycm9yKCdObyBhdXRob3JpemF0aW9uIGNvZGUgb3IgdG9rZW4nKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShsb2dpbk9wdGlvbnMpO1xuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICAgIHdpbmRvd1tldmVudE1ldGhvZF0obWVzc2FnZUV2ZW50LCBldmVudExpc3RlbmVyLCBmYWxzZSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHJldHVybiB7UHJvbWlzZTxib29sZWFuPn1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBQbGF0Zm9ybS5wcm90b3R5cGUubG9nZ2VkSW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuc3VyZUxvZ2dlZEluKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIHRydWUpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDY7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0W1wiY2F0Y2hcIl0oMCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGZhbHNlKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMCwgNl1dKTtcblx0ICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIGxvZ2dlZEluKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBsb2dnZWRJbjtcblx0ICAgIH0oKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnVzZXJuYW1lXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5wYXNzd29yZFxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuZXh0ZW5zaW9uXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5jb2RlXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5yZWRpcmVjdFVyaVxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuZW5kcG9pbnRJZFxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMucmVtZW1iZXJcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmFjY2Vzc1Rva2VuVHRsXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5yZWZyZXNoVG9rZW5UdGxcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmFjY2Vzc190b2tlblxuXHQgICAgICogQHJldHVybnMge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIFBsYXRmb3JtLnByb3RvdHlwZS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIHZhciBib2R5LCBhcGlSZXNwb25zZSwganNvbjtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDtcblx0XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmJlZm9yZUxvZ2luKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0ge307XG5cdFxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5jb2RlKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkuZ3JhbnRfdHlwZSA9ICdwYXNzd29yZCc7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keS51c2VybmFtZSA9IG9wdGlvbnMudXNlcm5hbWU7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5wYXNzd29yZCA9IG9wdGlvbnMucGFzc3dvcmQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5leHRlbnNpb24gPSBvcHRpb25zLmV4dGVuc2lvbiB8fCAnJztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5jb2RlKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkuZ3JhbnRfdHlwZSA9ICdhdXRob3JpemF0aW9uX2NvZGUnO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkuY29kZSA9IG9wdGlvbnMuY29kZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5LnJlZGlyZWN0X3VyaSA9IG9wdGlvbnMucmVkaXJlY3RVcmkgfHwgdGhpcy5fcmVkaXJlY3RVcmk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9ib2R5LmNsaWVudF9pZCA9IHRoaXMuZ2V0Q3JlZGVudGlhbHMoKS5rZXk7IC8vIG5vdCBuZWVkZWRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuYWNjZXNzX3Rva2VuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETyBQb3RlbnRpYWxseSBtYWtlIGEgcmVxdWVzdCB0byAvb2F1dGgvdG9rZW5pbmZvXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gb3B0aW9ucztcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE2O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW5kcG9pbnRJZCkgYm9keS5lbmRwb2ludF9pZCA9IG9wdGlvbnMuZW5kcG9pbnRJZDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFjY2Vzc1Rva2VuVHRsKSBib2R5LmFjY2Vzc1Rva2VuVHRsID0gb3B0aW9ucy5hY2Nlc3NUb2tlblR0bDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlZnJlc2hUb2tlblR0bCkgYm9keS5yZWZyZXNoVG9rZW5UdGwgPSBvcHRpb25zLnJlZnJlc2hUb2tlblR0bDtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Rva2VuUmVxdWVzdChQbGF0Zm9ybS5fdG9rZW5FbmRwb2ludCwgYm9keSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpUmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gYXBpUmVzcG9uc2UuanNvbigpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjpcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdXRoLnNldERhdGEoanNvbik7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmxvZ2luU3VjY2VzcywgYXBpUmVzcG9uc2UpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KFwicmV0dXJuXCIsIGFwaVJlc3BvbnNlKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjE6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDIxO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyW1wiY2F0Y2hcIl0oMCk7XG5cdFxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlLmNsZWFuKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmxvZ2luRXJyb3IsIF9jb250ZXh0Mi50MCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQyLnQwO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcywgW1swLCAyMV1dKTtcblx0ICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIGxvZ2luKF94KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIGxvZ2luO1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHJldHVybnMge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBQbGF0Zm9ybS5wcm90b3R5cGUuX3JlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7XG5cdCAgICAgICAgICAgIHZhciByZXMsIGpzb247XG5cdCAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDA7XG5cdFxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmV2ZW50cy5iZWZvcmVSZWZyZXNoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9VdGlscy5kZWxheSkoUGxhdGZvcm0uX3JlZnJlc2hEZWxheU1zKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hdXRoLnJlZnJlc2hUb2tlbigpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVmcmVzaCB0b2tlbiBpcyBtaXNzaW5nJyk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYXV0aC5yZWZyZXNoVG9rZW5WYWxpZCgpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVmcmVzaCB0b2tlbiBoYXMgZXhwaXJlZCcpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl90b2tlblJlcXVlc3QoUGxhdGZvcm0uX3Rva2VuRW5kcG9pbnQsIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImdyYW50X3R5cGVcIjogXCJyZWZyZXNoX3Rva2VuXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZWZyZXNoX3Rva2VuXCI6IHRoaXMuX2F1dGgucmVmcmVzaFRva2VuKCksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhY2Nlc3NfdG9rZW5fdHRsXCI6IHRoaXMuX2F1dGguZGF0YSgpLmV4cGlyZXNfaW4gKyAxLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVmcmVzaF90b2tlbl90dGxcIjogdGhpcy5fYXV0aC5kYXRhKCkucmVmcmVzaF90b2tlbl9leHBpcmVzX2luICsgMVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gcmVzLmpzb24oKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5hY2Nlc3NfdG9rZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE0O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHRoaXMuX2NsaWVudC5tYWtlRXJyb3IobmV3IEVycm9yKCdNYWxmb3JtZWQgT0F1dGggcmVzcG9uc2UnKSwgcmVzKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXV0aC5zZXREYXRhKGpzb24pO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmV2ZW50cy5yZWZyZXNoU3VjY2VzcywgcmVzKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdChcInJldHVyblwiLCByZXMpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbXCJjYXRjaFwiXSgwKTtcblx0XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gdGhpcy5fY2xpZW50Lm1ha2VFcnJvcihfY29udGV4dDMudDApO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChQbGF0Zm9ybS5fY2xlYXJDYWNoZU9uUmVmcmVzaEVycm9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGUuY2xlYW4oKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5ldmVudHMucmVmcmVzaEVycm9yLCBfY29udGV4dDMudDApO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0My50MDtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMsIFtbMCwgMTldXSk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBfcmVmcmVzaCgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gX3JlZnJlc2g7XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fcmVmcmVzaFByb21pc2UpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoXCJyZXR1cm5cIiwgdGhpcy5fcmVmcmVzaFByb21pc2UpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAyO1xuXHRcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoUHJvbWlzZSA9IHRoaXMuX3JlZnJlc2goKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuX3JlZnJlc2hQcm9taXNlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoXCJyZXR1cm5cIiwgdGhpcy5fcmVmcmVzaFByb21pc2UpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSA3O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0W1wiY2F0Y2hcIl0oMik7XG5cdFxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0NC50MDtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMsIFtbMiwgN11dKTtcblx0ICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIHJlZnJlc2goKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHJlZnJlc2g7XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHtcblx0ICAgICAgICAgICAgdmFyIHJlcztcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMDtcblx0XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmJlZm9yZUxvZ291dCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA0O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Rva2VuUmVxdWVzdChQbGF0Zm9ybS5fcmV2b2tlRW5kcG9pbnQsIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy5fYXV0aC5hY2Nlc3NUb2tlbigpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NS5zZW50O1xuXHRcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZS5jbGVhbigpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmV2ZW50cy5sb2dvdXRTdWNjZXNzLCByZXMpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxMDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVtcImNhdGNoXCJdKDApO1xuXHRcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5ldmVudHMubG9nb3V0RXJyb3IsIF9jb250ZXh0NS50MCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQ1LnQwO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcywgW1swLCAxMF1dKTtcblx0ICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWY2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gbG9nb3V0O1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0XG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG5cdCAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNraXBBdXRoQ2hlY2tdXG5cdCAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlcXVlc3Q+fVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIFBsYXRmb3JtLnByb3RvdHlwZS5pbmZsYXRlUmVxdWVzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX3JlZjcgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihyZXF1ZXN0LCBvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLnNraXBBdXRoQ2hlY2spIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVxdWVzdCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbnN1cmVMb2dnZWRJbigpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuaGVhZGVycy5zZXQoJ1gtVXNlci1BZ2VudCcsIHRoaXMuX3VzZXJBZ2VudCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMuc2V0KCdDbGllbnQtSWQnLCB0aGlzLl9hcHBLZXkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5oZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsIHRoaXMuX2F1dGhIZWFkZXIoKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlcXVlc3QudXJsID0gdGhpcy5jcmVhdGVVcmwocmVxdWVzdC51cmwsIHthZGRTZXJ2ZXI6IHRydWV9KTsgLy9GSVhNRSBTcGVjIHByZXZlbnRzIHRoaXMuLi5cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdChcInJldHVyblwiLCByZXF1ZXN0KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcyk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBpbmZsYXRlUmVxdWVzdChfeDIsIF94Mykge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBpbmZsYXRlUmVxdWVzdDtcblx0ICAgIH0oKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdFxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuXHQgICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5za2lwQXV0aENoZWNrXVxuXHQgICAgICogQHJldHVybiB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLnNlbmRSZXF1ZXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfcmVmOCA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHJlcXVlc3QsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluZmxhdGVSZXF1ZXN0KHJlcXVlc3QsIG9wdGlvbnMpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCA9IF9jb250ZXh0Ny5zZW50O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA2O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NsaWVudC5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0Ny5zZW50KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gOTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny50MCA9IF9jb250ZXh0N1tcImNhdGNoXCJdKDApO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFfY29udGV4dDcudDAuYXBpUmVzcG9uc2UgfHwgIV9jb250ZXh0Ny50MC5hcGlSZXNwb25zZS5yZXNwb25zZSgpIHx8IF9jb250ZXh0Ny50MC5hcGlSZXNwb25zZS5yZXNwb25zZSgpLnN0YXR1cyAhPSA0MDEgfHwgb3B0aW9ucy5yZXRyeSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEzO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0Ny50MDtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXV0aC5jYW5jZWxBY2Nlc3NUb2tlbigpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmV0cnkgPSB0cnVlO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTc7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdChyZXF1ZXN0LCBvcHRpb25zKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdChcInJldHVyblwiLCBfY29udGV4dDcuc2VudCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sIF9jYWxsZWU3LCB0aGlzLCBbWzAsIDldXSk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBzZW5kUmVxdWVzdChfeDQsIF94NSkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjguYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBzZW5kUmVxdWVzdDtcblx0ICAgIH0oKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEdlbmVyYWwgcHVycG9zZSBmdW5jdGlvbiB0byBzZW5kIGFueXRoaW5nIHRvIHNlcnZlclxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudXJsXG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuYm9keV1cblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5tZXRob2RdXG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMucXVlcnldXG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuaGVhZGVyc11cblx0ICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2tpcEF1dGhDaGVja11cblx0ICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIFBsYXRmb3JtLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfcmVmOSA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkge1xuXHQgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXHQgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkge1xuXHQgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRklYTUUgaHR0cHM6Ly9naXRodWIuY29tL2JpdGlubi9ub2RlLWZldGNoL2lzc3Vlcy80M1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy51cmwgPSB0aGlzLmNyZWF0ZVVybChvcHRpb25zLnVybCwgeyBhZGRTZXJ2ZXI6IHRydWUgfSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QodGhpcy5fY2xpZW50LmNyZWF0ZVJlcXVlc3Qob3B0aW9ucyksIG9wdGlvbnMpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoXCJyZXR1cm5cIiwgX2NvbnRleHQ4LnNlbnQpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sIF9jYWxsZWU4LCB0aGlzKTtcblx0ICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIHNlbmQoX3g2KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHNlbmQ7XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gW3F1ZXJ5XVxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdXG5cdCAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNraXBBdXRoQ2hlY2tdXG5cdCAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFwaVJlc3BvbnNlPn1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBQbGF0Zm9ybS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfcmVmMTAgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSh1cmwsIHF1ZXJ5LCBvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ0dFVCc7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnVybCA9IHVybDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucXVlcnkgPSBxdWVyeTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQob3B0aW9ucyk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdChcInJldHVyblwiLCBfY29udGV4dDkuc2VudCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgX2NhbGxlZTksIHRoaXMpO1xuXHQgICAgICAgIH0pKTtcblx0XG5cdCAgICAgICAgZnVuY3Rpb24gZ2V0KF94OCwgX3g5LCBfeDEwKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmMTAuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBnZXQ7XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gYm9keVxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IFtxdWVyeV1cblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5oZWFkZXJzXVxuXHQgICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5za2lwQXV0aENoZWNrXVxuXHQgICAgICogQHJldHVybiB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9yZWYxMSA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCh1cmwsIGJvZHksIHF1ZXJ5LCBvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm1ldGhvZCA9ICdQT1NUJztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudXJsID0gdXJsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5xdWVyeSA9IHF1ZXJ5O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gYm9keTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDc7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kKG9wdGlvbnMpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0MTAuc2VudCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBwb3N0KF94MTEsIF94MTIsIF94MTMsIF94MTQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYxMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHBvc3Q7XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gW2JvZHldXG5cdCAgICAgKiBAcGFyYW0ge29iamVjdH0gW3F1ZXJ5XVxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdXG5cdCAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNraXBBdXRoQ2hlY2tdXG5cdCAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFwaVJlc3BvbnNlPn1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBQbGF0Zm9ybS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfcmVmMTIgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEodXJsLCBib2R5LCBxdWVyeSwgb3B0aW9ucykge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5tZXRob2QgPSAnUFVUJztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudXJsID0gdXJsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5xdWVyeSA9IHF1ZXJ5O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gYm9keTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDc7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kKG9wdGlvbnMpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0MTEuc2VudCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sIF9jYWxsZWUxMSwgdGhpcyk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBwdXQoX3gxNSwgX3gxNiwgX3gxNywgX3gxOCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjEyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gcHV0O1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IFtxdWVyeV1cblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5oZWFkZXJzXVxuXHQgICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5za2lwQXV0aENoZWNrXVxuXHQgICAgICogQHJldHVybiB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX3JlZjEzID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKHVybCwgcXVlcnksIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikge1xuXHQgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ0RFTEVURSc7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnVybCA9IHVybDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucXVlcnkgPSBxdWVyeTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDY7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kKG9wdGlvbnMpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0MTIuc2VudCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sIF9jYWxsZWUxMiwgdGhpcyk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBfZGVsZXRlKF94MTksIF94MjAsIF94MjEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYxMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF9kZWxldGU7XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLl90b2tlblJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9yZWYxNCA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMyhwYXRoLCBib2R5KSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQoe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcGF0aCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwQXV0aENoZWNrOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCYXNpYyAnICsgdGhpcy5fYXBpS2V5KCksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0MTMuc2VudCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sIF9jYWxsZWUxMywgdGhpcyk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiBfdG9rZW5SZXF1ZXN0KF94MjIsIF94MjMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYxNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIF90b2tlblJlcXVlc3Q7XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgUGxhdGZvcm0ucHJvdG90eXBlLmVuc3VyZUxvZ2dlZEluID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfcmVmMTUgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0FjY2Vzc1Rva2VuVmFsaWQoKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KFwicmV0dXJuXCIsIG51bGwpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gNDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnJlc2goKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LmFicnVwdChcInJldHVyblwiLCBfY29udGV4dDE0LnNlbnQpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCBfY2FsbGVlMTQsIHRoaXMpO1xuXHQgICAgICAgIH0pKTtcblx0XG5cdCAgICAgICAgZnVuY3Rpb24gZW5zdXJlTG9nZ2VkSW4oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmMTUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBlbnN1cmVMb2dnZWRJbjtcblx0ICAgIH0oKTtcblx0XG5cdCAgICBQbGF0Zm9ybS5wcm90b3R5cGUuX2lzQWNjZXNzVG9rZW5WYWxpZCA9IGZ1bmN0aW9uIF9pc0FjY2Vzc1Rva2VuVmFsaWQoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2F1dGguYWNjZXNzVG9rZW5WYWxpZCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBQbGF0Zm9ybS5wcm90b3R5cGUuX2FwaUtleSA9IGZ1bmN0aW9uIF9hcGlLZXkoKSB7XG5cdCAgICAgICAgdmFyIGFwaUtleSA9IHRoaXMuX2FwcEtleSArICc6JyArIHRoaXMuX2FwcFNlY3JldDtcblx0ICAgICAgICByZXR1cm4gdHlwZW9mIGJ0b2EgPT0gJ2Z1bmN0aW9uJyA/IGJ0b2EoYXBpS2V5KSA6IG5ldyBCdWZmZXIoYXBpS2V5KS50b1N0cmluZygnYmFzZTY0Jyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFBsYXRmb3JtLnByb3RvdHlwZS5fYXV0aEhlYWRlciA9IGZ1bmN0aW9uIF9hdXRoSGVhZGVyKCkge1xuXHQgICAgICAgIHZhciB0b2tlbiA9IHRoaXMuX2F1dGguYWNjZXNzVG9rZW4oKTtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fYXV0aC50b2tlblR5cGUoKSArICh0b2tlbiA/ICcgJyArIHRva2VuIDogJycpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUGxhdGZvcm07XG5cdH0oX2V2ZW50czIuZGVmYXVsdCk7XG5cdFxuXHRQbGF0Zm9ybS5fdXJsUHJlZml4ID0gJy9yZXN0YXBpJztcblx0UGxhdGZvcm0uX2FwaVZlcnNpb24gPSAndjEuMCc7XG5cdFBsYXRmb3JtLl90b2tlbkVuZHBvaW50ID0gJy9yZXN0YXBpL29hdXRoL3Rva2VuJztcblx0UGxhdGZvcm0uX3Jldm9rZUVuZHBvaW50ID0gJy9yZXN0YXBpL29hdXRoL3Jldm9rZSc7XG5cdFBsYXRmb3JtLl9hdXRob3JpemVFbmRwb2ludCA9ICcvcmVzdGFwaS9vYXV0aC9hdXRob3JpemUnO1xuXHRQbGF0Zm9ybS5fcmVmcmVzaERlbGF5TXMgPSAxMDA7XG5cdFBsYXRmb3JtLl9jYWNoZUlkID0gJ3BsYXRmb3JtJztcblx0UGxhdGZvcm0uX2NsZWFyQ2FjaGVPblJlZnJlc2hFcnJvciA9IGZhbHNlO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBQbGF0Zm9ybTtcblx0XG5cdC8qKiovIH0sXG5cdC8qIDE5ICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgQXV0aCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEF1dGgoY2FjaGUsIGNhY2hlSWQpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXV0aCk7XG5cdFxuXHQgICAgICAgIC8qKiBAdHlwZSB7Q2FjaGV9ICovXG5cdCAgICAgICAgdGhpcy5fY2FjaGUgPSBjYWNoZTtcblx0ICAgICAgICB0aGlzLl9jYWNoZUlkID0gY2FjaGVJZDtcblx0ICAgIH0gLy8gMSBtaW51dGVcblx0XG5cdFxuXHQgICAgQXV0aC5wcm90b3R5cGUuYWNjZXNzVG9rZW4gPSBmdW5jdGlvbiBhY2Nlc3NUb2tlbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5kYXRhKCkuYWNjZXNzX3Rva2VuO1xuXHQgICAgfTtcblx0XG5cdCAgICBBdXRoLnByb3RvdHlwZS5yZWZyZXNoVG9rZW4gPSBmdW5jdGlvbiByZWZyZXNoVG9rZW4oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgpLnJlZnJlc2hfdG9rZW47XG5cdCAgICB9O1xuXHRcblx0ICAgIEF1dGgucHJvdG90eXBlLnRva2VuVHlwZSA9IGZ1bmN0aW9uIHRva2VuVHlwZSgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5kYXRhKCkudG9rZW5fdHlwZTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcmV0dXJuIHt7dG9rZW5fdHlwZTogc3RyaW5nLCBhY2Nlc3NfdG9rZW46IHN0cmluZywgZXhwaXJlc19pbjogbnVtYmVyLCByZWZyZXNoX3Rva2VuOiBzdHJpbmcsIHJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbjogbnVtYmVyfX1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBBdXRoLnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gZGF0YSgpIHtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLmdldEl0ZW0odGhpcy5fY2FjaGVJZCkgfHwge1xuXHQgICAgICAgICAgICB0b2tlbl90eXBlOiAnJyxcblx0ICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiAnJyxcblx0ICAgICAgICAgICAgZXhwaXJlc19pbjogMCxcblx0ICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogJycsXG5cdCAgICAgICAgICAgIHJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbjogMFxuXHQgICAgICAgIH07XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtvYmplY3R9IG5ld0RhdGFcblx0ICAgICAqIEByZXR1cm4ge0F1dGh9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQXV0aC5wcm90b3R5cGUuc2V0RGF0YSA9IGZ1bmN0aW9uIHNldERhdGEobmV3RGF0YSkge1xuXHRcblx0ICAgICAgICBuZXdEYXRhID0gbmV3RGF0YSB8fCB7fTtcblx0XG5cdCAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGEoKTtcblx0XG5cdCAgICAgICAgT2JqZWN0LmtleXMobmV3RGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICAgIGRhdGFba2V5XSA9IG5ld0RhdGFba2V5XTtcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgZGF0YS5leHBpcmVfdGltZSA9IERhdGUubm93KCkgKyBkYXRhLmV4cGlyZXNfaW4gKiAxMDAwO1xuXHQgICAgICAgIGRhdGEucmVmcmVzaF90b2tlbl9leHBpcmVfdGltZSA9IERhdGUubm93KCkgKyBkYXRhLnJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbiAqIDEwMDA7XG5cdFxuXHQgICAgICAgIHRoaXMuX2NhY2hlLnNldEl0ZW0odGhpcy5fY2FjaGVJZCwgZGF0YSk7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENoZWNrIGlmIHRoZXJlIGlzIGEgdmFsaWQgKG5vdCBleHBpcmVkKSBhY2Nlc3MgdG9rZW5cblx0ICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQXV0aC5wcm90b3R5cGUuYWNjZXNzVG9rZW5WYWxpZCA9IGZ1bmN0aW9uIGFjY2Vzc1Rva2VuVmFsaWQoKSB7XG5cdFxuXHQgICAgICAgIHZhciBhdXRoRGF0YSA9IHRoaXMuZGF0YSgpO1xuXHQgICAgICAgIHJldHVybiBhdXRoRGF0YS50b2tlbl90eXBlID09PSBBdXRoLmZvcmNlZFRva2VuVHlwZSB8fCBhdXRoRGF0YS5leHBpcmVfdGltZSAtIEF1dGgucmVmcmVzaEhhbmRpY2FwTXMgPiBEYXRlLm5vdygpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENoZWNrIGlmIHRoZXJlIGlzIGEgdmFsaWQgKG5vdCBleHBpcmVkKSBhY2Nlc3MgdG9rZW5cblx0ICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQXV0aC5wcm90b3R5cGUucmVmcmVzaFRva2VuVmFsaWQgPSBmdW5jdGlvbiByZWZyZXNoVG9rZW5WYWxpZCgpIHtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgpLnJlZnJlc2hfdG9rZW5fZXhwaXJlX3RpbWUgPiBEYXRlLm5vdygpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge0F1dGh9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQXV0aC5wcm90b3R5cGUuY2FuY2VsQWNjZXNzVG9rZW4gPSBmdW5jdGlvbiBjYW5jZWxBY2Nlc3NUb2tlbigpIHtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuc2V0RGF0YSh7XG5cdCAgICAgICAgICAgIGFjY2Vzc190b2tlbjogJycsXG5cdCAgICAgICAgICAgIGV4cGlyZXNfaW46IDBcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIG1ldGhvZCBzZXRzIGEgc3BlY2lhbCBhdXRoZW50aWNhdGlvbiBtb2RlIHVzZWQgaW4gU2VydmljZSBXZWJcblx0ICAgICAqIEByZXR1cm4ge0F1dGh9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgQXV0aC5wcm90b3R5cGUuZm9yY2VBdXRoZW50aWNhdGlvbiA9IGZ1bmN0aW9uIGZvcmNlQXV0aGVudGljYXRpb24oKSB7XG5cdFxuXHQgICAgICAgIHRoaXMuc2V0RGF0YSh7XG5cdCAgICAgICAgICAgIHRva2VuX3R5cGU6IEF1dGguZm9yY2VkVG9rZW5UeXBlLFxuXHQgICAgICAgICAgICBhY2Nlc3NfdG9rZW46ICcnLFxuXHQgICAgICAgICAgICBleHBpcmVzX2luOiAwLFxuXHQgICAgICAgICAgICByZWZyZXNoX3Rva2VuOiAnJyxcblx0ICAgICAgICAgICAgcmVmcmVzaF90b2tlbl9leHBpcmVzX2luOiAwXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQXV0aDtcblx0fSgpO1xuXHRcblx0Ly9leHBvcnQgaW50ZXJmYWNlIElBdXRoRGF0YSB7XG5cdC8vICAgIHJlbWVtYmVyPzpib29sZWFuO1xuXHQvLyAgICB0b2tlbl90eXBlPzpzdHJpbmc7XG5cdC8vICAgIGFjY2Vzc190b2tlbj86c3RyaW5nO1xuXHQvLyAgICBleHBpcmVzX2luPzpudW1iZXI7IC8vIGFjdHVhbGx5IGl0J3Mgc3RyaW5nXG5cdC8vICAgIGV4cGlyZV90aW1lPzpudW1iZXI7XG5cdC8vICAgIHJlZnJlc2hfdG9rZW4/OnN0cmluZztcblx0Ly8gICAgcmVmcmVzaF90b2tlbl9leHBpcmVzX2luPzpudW1iZXI7IC8vIGFjdHVhbGx5IGl0J3Mgc3RyaW5nXG5cdC8vICAgIHJlZnJlc2hfdG9rZW5fZXhwaXJlX3RpbWU/Om51bWJlcjtcblx0Ly8gICAgc2NvcGU/OnN0cmluZztcblx0Ly99XG5cdFxuXHRcblx0QXV0aC5yZWZyZXNoSGFuZGljYXBNcyA9IDYwICogMTAwMDtcblx0QXV0aC5mb3JjZWRUb2tlblR5cGUgPSAnZm9yY2VkJztcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQXV0aDtcblx0XG5cdC8qKiovIH0sXG5cdC8qIDIwICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgICAgYXV0aFJlc3BvbnNlUHJvcGVydHk6ICdSQ0F1dGhvcml6YXRpb25SZXNwb25zZScsXG5cdCAgICB2ZXJzaW9uOiAgdHJ1ZSA/IChcIjMuMC4wLXJjMlwiKSA6ICd4LngueCdcblx0fTtcblx0XG5cdC8qKiovIH0sXG5cdC8qIDIxICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblx0XG5cdHZhciBfUHVibnViTW9jayA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9QdWJudWJNb2NrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1B1Ym51Yk1vY2spO1xuXHRcblx0dmFyIF9FeHRlcm5hbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgUHVibnViTW9ja0ZhY3RvcnkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBQdWJudWJNb2NrRmFjdG9yeSgpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHVibnViTW9ja0ZhY3RvcnkpO1xuXHRcblx0ICAgICAgICB0aGlzLmNyeXB0b19vYmogPSBfRXh0ZXJuYWxzLlBVQk5VQi5jcnlwdG9fb2JqO1xuXHQgICAgfVxuXHRcblx0ICAgIFB1Ym51Yk1vY2tGYWN0b3J5LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBfUHVibnViTW9jazIuZGVmYXVsdChvcHRpb25zKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFB1Ym51Yk1vY2tGYWN0b3J5O1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQdWJudWJNb2NrRmFjdG9yeTtcblx0XG5cdC8qKiovIH0sXG5cdC8qIDIyICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRcblx0dmFyIF9ldmVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfZXZlbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V2ZW50cyk7XG5cdFxuXHR2YXIgX0V4dGVybmFscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgUHVibnViTW9jayA9IGZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG5cdCAgICBfaW5oZXJpdHMoUHVibnViTW9jaywgX0V2ZW50RW1pdHRlcik7XG5cdFxuXHQgICAgZnVuY3Rpb24gUHVibnViTW9jayhvcHRpb25zKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFB1Ym51Yk1vY2spO1xuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXHRcblx0ICAgICAgICBfdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgICAgICBfdGhpcy5jcnlwdG9fb2JqID0gX0V4dGVybmFscy5QVUJOVUIuY3J5cHRvX29iajtcblx0ICAgICAgICByZXR1cm4gX3RoaXM7XG5cdCAgICB9XG5cdFxuXHQgICAgUHVibnViTW9jay5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIGluaXQob3B0aW9ucykge1xuXHQgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgICB9O1xuXHRcblx0ICAgIFB1Ym51Yk1vY2sucHJvdG90eXBlLnJlYWR5ID0gZnVuY3Rpb24gcmVhZHkoKSB7fTtcblx0XG5cdCAgICBQdWJudWJNb2NrLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUob3B0aW9ucykge1xuXHQgICAgICAgIHRoaXMub24oJ21lc3NhZ2UtJyArIG9wdGlvbnMuY2hhbm5lbCwgb3B0aW9ucy5tZXNzYWdlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgUHVibnViTW9jay5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiB1bnN1YnNjcmliZShvcHRpb25zKSB7XG5cdCAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ21lc3NhZ2UtJyArIG9wdGlvbnMuY2hhbm5lbCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFB1Ym51Yk1vY2sucHJvdG90eXBlLnJlY2VpdmVNZXNzYWdlID0gZnVuY3Rpb24gcmVjZWl2ZU1lc3NhZ2UobXNnLCBjaGFubmVsKSB7XG5cdCAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlLScgKyBjaGFubmVsLCBtc2csICdlbnYnLCBjaGFubmVsKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFB1Ym51Yk1vY2s7XG5cdH0oX2V2ZW50czIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQdWJudWJNb2NrO1xuXHRcblx0LyoqKi8gfSxcblx0LyogMjMgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXHRcblx0dmFyIF9ldmVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfZXZlbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V2ZW50cyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IGZ1bmN0aW9uIHN0ZXAoa2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHN0ZXAoXCJuZXh0XCIsIHZhbHVlKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gc3RlcChcInRocm93XCIsIGVycik7IH0pOyB9IH0gcmV0dXJuIHN0ZXAoXCJuZXh0XCIpOyB9KTsgfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcblx0ICAgIF9pbmhlcml0cyhTdWJzY3JpcHRpb24sIF9FdmVudEVtaXR0ZXIpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbihwdWJudWJGYWN0b3J5LCBwbGF0Zm9ybSkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWJzY3JpcHRpb24pO1xuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXHRcblx0ICAgICAgICBfdGhpcy5ldmVudHMgPSB7XG5cdCAgICAgICAgICAgIG5vdGlmaWNhdGlvbjogJ25vdGlmaWNhdGlvbicsXG5cdCAgICAgICAgICAgIHJlbW92ZVN1Y2Nlc3M6ICdyZW1vdmVTdWNjZXNzJyxcblx0ICAgICAgICAgICAgcmVtb3ZlRXJyb3I6ICdyZW1vdmVFcnJvcicsXG5cdCAgICAgICAgICAgIHJlbmV3U3VjY2VzczogJ3JlbmV3U3VjY2VzcycsXG5cdCAgICAgICAgICAgIHJlbmV3RXJyb3I6ICdyZW5ld0Vycm9yJyxcblx0ICAgICAgICAgICAgc3Vic2NyaWJlU3VjY2VzczogJ3N1YnNjcmliZVN1Y2Nlc3MnLFxuXHQgICAgICAgICAgICBzdWJzY3JpYmVFcnJvcjogJ3N1YnNjcmliZUVycm9yJ1xuXHQgICAgICAgIH07XG5cdFxuXHRcblx0ICAgICAgICBfdGhpcy5fcHVibnViRmFjdG9yeSA9IHB1Ym51YkZhY3Rvcnk7XG5cdCAgICAgICAgX3RoaXMuX3BsYXRmb3JtID0gcGxhdGZvcm07XG5cdCAgICAgICAgX3RoaXMuX3B1Ym51YiA9IG51bGw7XG5cdCAgICAgICAgX3RoaXMuX3B1Ym51Ykxhc3RDaGFubmVsID0gbnVsbDtcblx0ICAgICAgICBfdGhpcy5fdGltZW91dCA9IG51bGw7XG5cdCAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbiA9IG51bGw7XG5cdFxuXHQgICAgICAgIHJldHVybiBfdGhpcztcblx0ICAgIH1cblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnN1YnNjcmliZWQgPSBmdW5jdGlvbiBzdWJzY3JpYmVkKCkge1xuXHRcblx0ICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb24oKTtcblx0XG5cdCAgICAgICAgcmV0dXJuICEhKHN1YnNjcmlwdGlvbi5pZCAmJiBzdWJzY3JpcHRpb24uZGVsaXZlcnlNb2RlICYmIHN1YnNjcmlwdGlvbi5kZWxpdmVyeU1vZGUuc3Vic2NyaWJlcktleSAmJiBzdWJzY3JpcHRpb24uZGVsaXZlcnlNb2RlLmFkZHJlc3MpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hbGl2ZSA9IGZ1bmN0aW9uIGFsaXZlKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZWQoKSAmJiBEYXRlLm5vdygpIDwgdGhpcy5leHBpcmF0aW9uVGltZSgpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5leHBpcmVkID0gZnVuY3Rpb24gZXhwaXJlZCgpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuc3Vic2NyaWJlZCgpKSByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gIXRoaXMuc3Vic2NyaWJlZCgpIHx8IERhdGUubm93KCkgPiB0aGlzLnN1YnNjcmlwdGlvbigpLmV4cGlyYXRpb25UaW1lO1xuXHQgICAgfTtcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLmV4cGlyYXRpb25UaW1lID0gZnVuY3Rpb24gZXhwaXJhdGlvblRpbWUoKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuc3Vic2NyaXB0aW9uKCkuZXhwaXJhdGlvblRpbWUgfHwgMCkuZ2V0VGltZSgpIC0gU3Vic2NyaXB0aW9uLl9yZW5ld0hhbmRpY2FwTXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuc2V0U3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gc2V0U3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikge1xuXHRcblx0ICAgICAgICBzdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb24gfHwge307XG5cdFxuXHQgICAgICAgIHRoaXMuX2NsZWFyVGltZW91dCgpO1xuXHQgICAgICAgIHRoaXMuX3NldFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIHRoaXMuX3N1YnNjcmliZUF0UHVibnViKCk7XG5cdCAgICAgICAgdGhpcy5fc2V0VGltZW91dCgpO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5zdWJzY3JpcHRpb24gPSBmdW5jdGlvbiBzdWJzY3JpcHRpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbiB8fCB7fTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIG9yIHVwZGF0ZXMgc3Vic2NyaXB0aW9uIGlmIHRoZXJlIGlzIGFuIGFjdGl2ZSBvbmVcblx0ICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFwaVJlc3BvbnNlPn1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFsaXZlKCkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmV3KCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCdyZXR1cm4nLCBfY29udGV4dC5zZW50KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCdyZXR1cm4nLCBfY29udGV4dC5zZW50KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTtcblx0ICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHJlZ2lzdGVyO1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuZXZlbnRGaWx0ZXJzID0gZnVuY3Rpb24gZXZlbnRGaWx0ZXJzKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbigpLmV2ZW50RmlsdGVycyB8fCBbXTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBldmVudHNcblx0ICAgICAqIEByZXR1cm4ge1N1YnNjcmlwdGlvbn1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLmFkZEV2ZW50RmlsdGVycyA9IGZ1bmN0aW9uIGFkZEV2ZW50RmlsdGVycyhldmVudHMpIHtcblx0ICAgICAgICB0aGlzLnNldEV2ZW50RmlsdGVycyh0aGlzLmV2ZW50RmlsdGVycygpLmNvbmNhdChldmVudHMpKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBldmVudHNcblx0ICAgICAqIEByZXR1cm4ge1N1YnNjcmlwdGlvbn1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnNldEV2ZW50RmlsdGVycyA9IGZ1bmN0aW9uIHNldEV2ZW50RmlsdGVycyhldmVudHMpIHtcblx0ICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb24oKTtcblx0ICAgICAgICBzdWJzY3JpcHRpb24uZXZlbnRGaWx0ZXJzID0gZXZlbnRzO1xuXHQgICAgICAgIHRoaXMuX3NldFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFwaVJlc3BvbnNlPn1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHtcblx0ICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBqc29uO1xuXHQgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0Mikge1xuXHQgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwO1xuXHRcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGVhclRpbWVvdXQoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ldmVudEZpbHRlcnMoKS5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudHMgYXJlIHVuZGVmaW5lZCcpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXRmb3JtLnBvc3QoJy9zdWJzY3JpcHRpb24nLCB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRGaWx0ZXJzOiB0aGlzLl9nZXRGdWxsRXZlbnRGaWx0ZXJzKCksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsaXZlcnlNb2RlOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydFR5cGU6ICdQdWJOdWInXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IHJlc3BvbnNlLmpzb24oKTtcblx0XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdWJzY3JpcHRpb24oanNvbikuZW1pdCh0aGlzLmV2ZW50cy5zdWJzY3JpYmVTdWNjZXNzLCByZXNwb25zZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoJ3JldHVybicsIHJlc3BvbnNlKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEyO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWydjYXRjaCddKDApO1xuXHRcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSB0aGlzLl9wbGF0Zm9ybS5jbGllbnQoKS5tYWtlRXJyb3IoX2NvbnRleHQyLnQwKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCkuZW1pdCh0aGlzLmV2ZW50cy5zdWJzY3JpYmVFcnJvciwgX2NvbnRleHQyLnQwKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDIudDA7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmQnOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcywgW1swLCAxMl1dKTtcblx0ICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIHN1YnNjcmliZSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gc3Vic2NyaWJlO1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHJldHVybnMge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVuZXcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7XG5cdCAgICAgICAgICAgIHZhciByZXNwb25zZSwganNvbjtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMDtcblx0XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2xlYXJUaW1lb3V0KCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3Vic2NyaWJlZCgpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc3Vic2NyaXB0aW9uJyk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ldmVudEZpbHRlcnMoKS5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudHMgYXJlIHVuZGVmaW5lZCcpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXRmb3JtLnB1dCgnL3N1YnNjcmlwdGlvbi8nICsgdGhpcy5zdWJzY3JpcHRpb24oKS5pZCwge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50RmlsdGVyczogdGhpcy5fZ2V0RnVsbEV2ZW50RmlsdGVycygpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gcmVzcG9uc2UuanNvbigpO1xuXHRcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN1YnNjcmlwdGlvbihqc29uKS5lbWl0KHRoaXMuZXZlbnRzLnJlbmV3U3VjY2VzcywgcmVzcG9uc2UpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCdyZXR1cm4nLCByZXNwb25zZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1snY2F0Y2gnXSgwKTtcblx0XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gdGhpcy5fcGxhdGZvcm0uY2xpZW50KCkubWFrZUVycm9yKF9jb250ZXh0My50MCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpLmVtaXQodGhpcy5ldmVudHMucmVuZXdFcnJvciwgX2NvbnRleHQzLnQwKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDMudDA7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE5OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmQnOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCBfY2FsbGVlMywgdGhpcywgW1swLCAxNF1dKTtcblx0ICAgICAgICB9KSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIHJlbmV3KCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiByZW5ldztcblx0ICAgIH0oKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFwaVJlc3BvbnNlPn1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHtcblx0ICAgICAgICAgICAgdmFyIHJlc3BvbnNlO1xuXHQgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkge1xuXHQgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAwO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmliZWQoKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHN1YnNjcmlwdGlvbicpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXRmb3JtLmRlbGV0ZSgnL3N1YnNjcmlwdGlvbi8nICsgdGhpcy5zdWJzY3JpcHRpb24oKS5pZCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50O1xuXHRcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCkuZW1pdCh0aGlzLmV2ZW50cy5yZW1vdmVTdWNjZXNzLCByZXNwb25zZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoJ3JldHVybicsIHJlc3BvbnNlKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDEwO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0WydjYXRjaCddKDApO1xuXHRcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSB0aGlzLl9wbGF0Zm9ybS5jbGllbnQoKS5tYWtlRXJyb3IoX2NvbnRleHQ0LnQwKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5ldmVudHMucmVtb3ZlRXJyb3IsIF9jb250ZXh0NC50MCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQ0LnQwO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNTpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMsIFtbMCwgMTBdXSk7XG5cdCAgICAgICAgfSkpO1xuXHRcblx0ICAgICAgICBmdW5jdGlvbiByZW1vdmUoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHJlbW92ZTtcblx0ICAgIH0oKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFwaVJlc3BvbnNlPn1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlc3Vic2NyaWJlID0gZnVuY3Rpb24gcmVzdWJzY3JpYmUoKSB7XG5cdCAgICAgICAgdmFyIGZpbHRlcnMgPSB0aGlzLmV2ZW50RmlsdGVycygpO1xuXHQgICAgICAgIHJldHVybiB0aGlzLnJlc2V0KCkuc2V0RXZlbnRGaWx0ZXJzKGZpbHRlcnMpLnN1YnNjcmliZSgpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJlbW92ZSBzdWJzY3JpcHRpb24gYW5kIGRpc2Nvbm5lY3QgZnJvbSBQVUJOVUJcblx0ICAgICAqIFRoaXMgbWV0aG9kIHJlc2V0cyBzdWJzY3JpcHRpb24gYXQgY2xpZW50IHNpZGUgYnV0IGJhY2tlbmQgaXMgbm90IG5vdGlmaWVkXG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuXHQgICAgICAgIHRoaXMuX2NsZWFyVGltZW91dCgpO1xuXHQgICAgICAgIGlmICh0aGlzLnN1YnNjcmliZWQoKSAmJiB0aGlzLl9wdWJudWIpIHRoaXMuX3B1Ym51Yi51bnN1YnNjcmliZSh7IGNoYW5uZWw6IHRoaXMuc3Vic2NyaXB0aW9uKCkuZGVsaXZlcnlNb2RlLmFkZHJlc3MgfSk7XG5cdCAgICAgICAgdGhpcy5fc2V0U3Vic2NyaXB0aW9uKG51bGwpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9zZXRTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiBfc2V0U3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjtcblx0ICAgIH07XG5cdFxuXHQgICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fZ2V0RnVsbEV2ZW50RmlsdGVycyA9IGZ1bmN0aW9uIF9nZXRGdWxsRXZlbnRGaWx0ZXJzKCkge1xuXHQgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcy5ldmVudEZpbHRlcnMoKS5tYXAoZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfdGhpczIuX3BsYXRmb3JtLmNyZWF0ZVVybChldmVudCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3NldFRpbWVvdXQgPSBmdW5jdGlvbiBfc2V0VGltZW91dCgpIHtcblx0ICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblx0XG5cdCAgICAgICAgdGhpcy5fY2xlYXJUaW1lb3V0KCk7XG5cdFxuXHQgICAgICAgIGlmICghdGhpcy5hbGl2ZSgpKSB0aHJvdyBuZXcgRXJyb3IoJ1N1YnNjcmlwdGlvbiBpcyBub3QgYWxpdmUnKTtcblx0XG5cdCAgICAgICAgdGhpcy5fdGltZW91dCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgICAgICAgIGlmIChfdGhpczMuYWxpdmUoKSkgcmV0dXJuO1xuXHRcblx0ICAgICAgICAgICAgaWYgKF90aGlzMy5leHBpcmVkKCkpIHtcblx0ICAgICAgICAgICAgICAgIF90aGlzMy5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIF90aGlzMy5yZW5ldygpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwgU3Vic2NyaXB0aW9uLl9wb2xsSW50ZXJ2YWwpO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fY2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gX2NsZWFyVGltZW91dCgpIHtcblx0ICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX3RpbWVvdXQpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9kZWNyeXB0ID0gZnVuY3Rpb24gX2RlY3J5cHQobWVzc2FnZSkge1xuXHRcblx0ICAgICAgICBpZiAoIXRoaXMuc3Vic2NyaWJlZCgpKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHN1YnNjcmlwdGlvbicpO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24oKS5kZWxpdmVyeU1vZGUuZW5jcnlwdGlvbktleSkge1xuXHRcblx0ICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMuX3B1Ym51YkZhY3RvcnkuY3J5cHRvX29iai5kZWNyeXB0KG1lc3NhZ2UsIHRoaXMuc3Vic2NyaXB0aW9uKCkuZGVsaXZlcnlNb2RlLmVuY3J5cHRpb25LZXksIHtcblx0ICAgICAgICAgICAgICAgIGVuY3J5cHRLZXk6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAga2V5RW5jb2Rpbmc6ICdiYXNlNjQnLFxuXHQgICAgICAgICAgICAgICAga2V5TGVuZ3RoOiAxMjgsXG5cdCAgICAgICAgICAgICAgICBtb2RlOiAnZWNiJ1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBtZXNzYWdlO1xuXHQgICAgfTtcblx0XG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9ub3RpZnkgPSBmdW5jdGlvbiBfbm90aWZ5KG1lc3NhZ2UpIHtcblx0ICAgICAgICB0aGlzLmVtaXQodGhpcy5ldmVudHMubm90aWZpY2F0aW9uLCB0aGlzLl9kZWNyeXB0KG1lc3NhZ2UpKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fc3Vic2NyaWJlQXRQdWJudWIgPSBmdW5jdGlvbiBfc3Vic2NyaWJlQXRQdWJudWIoKSB7XG5cdFxuXHQgICAgICAgIGlmICghdGhpcy5hbGl2ZSgpKSB0aHJvdyBuZXcgRXJyb3IoJ1N1YnNjcmlwdGlvbiBpcyBub3QgYWxpdmUnKTtcblx0XG5cdCAgICAgICAgdmFyIGRlbGl2ZXJ5TW9kZSA9IHRoaXMuc3Vic2NyaXB0aW9uKCkuZGVsaXZlcnlNb2RlO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5fcHVibnViKSB7XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5fcHVibnViTGFzdENoYW5uZWwgPT0gZGVsaXZlcnlNb2RlLmFkZHJlc3MpIHtcblx0ICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgdG8gdXBkYXRlLCBrZWVwIGxpc3RlbmluZyB0byBzYW1lIGNoYW5uZWxcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3B1Ym51Ykxhc3RDaGFubmVsKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIHN1YnNjcmliZSB0byBuZXcgY2hhbm5lbFxuXHQgICAgICAgICAgICAgICAgdGhpcy5fcHVibnViLnVuc3Vic2NyaWJlKHsgY2hhbm5lbDogdGhpcy5fcHVibnViTGFzdENoYW5uZWwgfSk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIC8vIFJlLWluaXQgZm9yIG5ldyBkYXRhXG5cdCAgICAgICAgICAgIHRoaXMuX3B1Ym51YiA9IHRoaXMuX3B1Ym51Yi5pbml0KHtcblx0ICAgICAgICAgICAgICAgIHNzbDogdHJ1ZSxcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZV9rZXk6IGRlbGl2ZXJ5TW9kZS5zdWJzY3JpYmVyS2V5XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdFxuXHQgICAgICAgICAgICAvLyBJbml0IGZyb20gc2NyYXRjaFxuXHQgICAgICAgICAgICB0aGlzLl9wdWJudWIgPSB0aGlzLl9wdWJudWJGYWN0b3J5LmluaXQoe1xuXHQgICAgICAgICAgICAgICAgc3NsOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlX2tleTogZGVsaXZlcnlNb2RlLnN1YnNjcmliZXJLZXlcblx0ICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLl9wdWJudWIucmVhZHkoKTsgLy9UT0RPIFRoaXMgbWF5IGJlIG5vdCBuZWVkZWQgYW55bW9yZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5fcHVibnViTGFzdENoYW5uZWwgPSBkZWxpdmVyeU1vZGUuYWRkcmVzcztcblx0XG5cdCAgICAgICAgdGhpcy5fcHVibnViLnN1YnNjcmliZSh7XG5cdCAgICAgICAgICAgIGNoYW5uZWw6IGRlbGl2ZXJ5TW9kZS5hZGRyZXNzLFxuXHQgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLl9ub3RpZnkuYmluZCh0aGlzKSxcblx0ICAgICAgICAgICAgY29ubmVjdDogZnVuY3Rpb24gY29ubmVjdCgpIHt9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gU3Vic2NyaXB0aW9uO1xuXHR9KF9ldmVudHMyLmRlZmF1bHQpO1xuXHRcblx0Ly9leHBvcnQgaW50ZXJmYWNlIElTdWJzY3JpcHRpb24ge1xuXHQvLyAgICBpZD86c3RyaW5nO1xuXHQvLyAgICB1cmk/OiBzdHJpbmc7XG5cdC8vICAgIGV2ZW50RmlsdGVycz86c3RyaW5nW107XG5cdC8vICAgIGV4cGlyYXRpb25UaW1lPzpzdHJpbmc7IC8vIDIwMTQtMDMtMTJUMTk6NTQ6MzUuNjEzWlxuXHQvLyAgICBleHBpcmVzSW4/Om51bWJlcjtcblx0Ly8gICAgZGVsaXZlcnlNb2RlPzoge1xuXHQvLyAgICAgICAgdHJhbnNwb3J0VHlwZT86c3RyaW5nO1xuXHQvLyAgICAgICAgZW5jcnlwdGlvbj86Ym9vbGVhbjtcblx0Ly8gICAgICAgIGFkZHJlc3M/OnN0cmluZztcblx0Ly8gICAgICAgIHN1YnNjcmliZXJLZXk/OnN0cmluZztcblx0Ly8gICAgICAgIGVuY3J5cHRpb25LZXk/OnN0cmluZztcblx0Ly8gICAgICAgIHNlY3JldEtleT86c3RyaW5nO1xuXHQvLyAgICB9O1xuXHQvLyAgICBjcmVhdGlvblRpbWU/OnN0cmluZzsgLy8gMjAxNC0wMy0xMlQxOTo1NDozNS42MTNaXG5cdC8vICAgIHN0YXR1cz86c3RyaW5nOyAvLyBBY3RpdmVcblx0Ly99XG5cdFxuXHRcblx0U3Vic2NyaXB0aW9uLl9yZW5ld0hhbmRpY2FwTXMgPSAyICogNjAgKiAxMDAwO1xuXHRTdWJzY3JpcHRpb24uX3BvbGxJbnRlcnZhbCA9IDEwICogMTAwMDtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gU3Vic2NyaXB0aW9uO1xuXHRcblx0LyoqKi8gfSxcblx0LyogMjQgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdFxuXHR2YXIgX1N1YnNjcmlwdGlvbjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfU3Vic2NyaXB0aW9uMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N1YnNjcmlwdGlvbjIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIENhY2hlZFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChfU3Vic2NyaXB0aW9uKSB7XG5cdCAgICBfaW5oZXJpdHMoQ2FjaGVkU3Vic2NyaXB0aW9uLCBfU3Vic2NyaXB0aW9uKTtcblx0XG5cdCAgICBmdW5jdGlvbiBDYWNoZWRTdWJzY3JpcHRpb24ocHVibnViRmFjdG9yeSwgcGxhdGZvcm0sIGNhY2hlLCBjYWNoZUtleSkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYWNoZWRTdWJzY3JpcHRpb24pO1xuXHRcblx0ICAgICAgICAvKiogQHR5cGUge0NhY2hlfSAqL1xuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfU3Vic2NyaXB0aW9uLmNhbGwodGhpcywgcHVibnViRmFjdG9yeSwgcGxhdGZvcm0pKTtcblx0XG5cdCAgICAgICAgX3RoaXMuX2NhY2hlID0gY2FjaGU7XG5cdCAgICAgICAgX3RoaXMuX2NhY2hlS2V5ID0gY2FjaGVLZXk7XG5cdFxuXHQgICAgICAgIHJldHVybiBfdGhpcztcblx0ICAgIH1cblx0XG5cdCAgICBDYWNoZWRTdWJzY3JpcHRpb24ucHJvdG90eXBlLnN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIHN1YnNjcmlwdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGUuZ2V0SXRlbSh0aGlzLl9jYWNoZUtleSkgfHwge307XG5cdCAgICB9O1xuXHRcblx0ICAgIENhY2hlZFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3NldFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIF9zZXRTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLnNldEl0ZW0odGhpcy5fY2FjaGVLZXksIHN1YnNjcmlwdGlvbik7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBmdW5jdGlvbiBjaGVja3Mgd2hldGhlciB0aGVyZSBhcmUgYW55IHByZS1kZWZpbmVkIGV2ZW50RmlsdGVycyBpbiBjYWNoZSBhbmQgaWYgbm90IC0tIHVzZXMgcHJvdmlkZWQgYXMgZGVmYXVsdHNcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGV2ZW50c1xuXHQgICAgICogQHJldHVybiB7Q2FjaGVkU3Vic2NyaXB0aW9ufVxuXHQgICAgICovXG5cdFxuXHRcblx0ICAgIENhY2hlZFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uIHJlc3RvcmUoZXZlbnRzKSB7XG5cdFxuXHQgICAgICAgIGlmICghdGhpcy5ldmVudEZpbHRlcnMoKS5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgdGhpcy5zZXRFdmVudEZpbHRlcnMoZXZlbnRzKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQ2FjaGVkU3Vic2NyaXB0aW9uO1xuXHR9KF9TdWJzY3JpcHRpb24zLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2FjaGVkU3Vic2NyaXB0aW9uO1xuXHRcblx0LyoqKi8gfVxuXHQvKioqKioqLyBdKVxuXHR9KTtcblx0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yaW5nY2VudHJhbC5qcy5tYXBcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMiksIF9fd2VicGFja19yZXF1aXJlX18oNjApLkJ1ZmZlcikpXG5cbi8qKiovIH0sXG4vKiA2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlciwgZ2xvYmFsKSB7LyohXG5cdCAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuXHQgKlxuXHQgKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cblx0ICogQGxpY2Vuc2UgIE1JVFxuXHQgKi9cblx0LyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblx0XG5cdCd1c2Ugc3RyaWN0J1xuXHRcblx0dmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdHZhciBpZWVlNzU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Milcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKVxuXHRcblx0ZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcblx0ZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuXHRleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblx0XG5cdC8qKlxuXHQgKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuXHQgKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuXHQgKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG5cdCAqXG5cdCAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcblx0ICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuXHQgKlxuXHQgKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG5cdCAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuXHQgKlxuXHQgKiBOb3RlOlxuXHQgKlxuXHQgKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuXHQgKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG5cdCAqXG5cdCAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuXHQgKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cdFxuXHQgKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuXHQgKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cblx0ICovXG5cdEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuXHQgID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcblx0ICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblx0XG5cdC8qXG5cdCAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC5cblx0ICovXG5cdGV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXHRcblx0ZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcblx0ICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fVxuXHQgICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcblx0ICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuXHQgICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcblx0ICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcblx0ICAgID8gMHg3ZmZmZmZmZlxuXHQgICAgOiAweDNmZmZmZmZmXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7XG5cdCAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJylcblx0ICB9XG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2Vcblx0ICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG5cdCAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuXHQgICAgaWYgKHRoYXQgPT09IG51bGwpIHtcblx0ICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuXHQgICAgfVxuXHQgICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcblx0ICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZlxuXHQgKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG5cdCAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG5cdCAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuXG5cdCAqXG5cdCAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG5cdCAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcblx0ICB9XG5cdFxuXHQgIC8vIENvbW1vbiBjYXNlLlxuXHQgIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuXHQgICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoXG5cdCAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJ1xuXHQgICAgICApXG5cdCAgICB9XG5cdCAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKVxuXHQgIH1cblx0ICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0QnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cdFxuXHQvLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cblx0QnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuXHQgIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG5cdCAgcmV0dXJuIGFyclxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tICh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG5cdCAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG5cdCAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuXHQgKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG5cdCAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuXHQgKiBCdWZmZXIuZnJvbShidWZmZXIpXG5cdCAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuXHQgKiovXG5cdEJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG5cdCAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcblx0ICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcblx0ICAgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7XG5cdCAgICAvLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85N1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcblx0ICAgICAgdmFsdWU6IG51bGwsXG5cdCAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgfSlcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcblx0ICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcblx0ICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG5cdCAgYXNzZXJ0U2l6ZShzaXplKVxuXHQgIGlmIChzaXplIDw9IDApIHtcblx0ICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcblx0ICB9XG5cdCAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcblx0ICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcblx0ICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC5cblx0ICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG5cdCAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG5cdCAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbClcblx0ICB9XG5cdCAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuXHQgKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG5cdCAqKi9cblx0QnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG5cdCAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuXHQgIGFzc2VydFNpemUoc2l6ZSlcblx0ICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKVxuXHQgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG5cdCAgICAgIHRoYXRbaV0gPSAwXG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuXHQgKiAqL1xuXHRCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuXHQgIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxuXHR9XG5cdC8qKlxuXHQgKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cblx0ICovXG5cdEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuXHQgIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG5cdCAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7XG5cdCAgICBlbmNvZGluZyA9ICd1dGY4J1xuXHQgIH1cblx0XG5cdCAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcblx0ICB9XG5cdFxuXHQgIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuXHQgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuXHRcblx0ICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXHRcblx0ICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHtcblx0ICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuXHQgICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cblx0ICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKVxuXHQgICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuXHQgICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuXHQgIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxuXHRcblx0ICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG5cdCAgfVxuXHRcblx0ICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnbGVuZ3RoXFwnIGlzIG91dCBvZiBib3VuZHMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcblx0ICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpXG5cdCAgfVxuXHRcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuXHQgICAgdGhhdCA9IGFycmF5XG5cdCAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuXHQgICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpXG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkge1xuXHQgICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwXG5cdCAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblx0XG5cdCAgICBpZiAodGhhdC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgcmV0dXJuIHRoYXRcblx0ICAgIH1cblx0XG5cdCAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG5cdCAgICByZXR1cm4gdGhhdFxuXHQgIH1cblx0XG5cdCAgaWYgKG9iaikge1xuXHQgICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcblx0ICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuXHQgICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMClcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuXHQgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmouZGF0YSlcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcblx0ICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cblx0ICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcblx0ICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuXHQgIH1cblx0ICByZXR1cm4gbGVuZ3RoIHwgMFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcblx0ICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcblx0ICAgIGxlbmd0aCA9IDBcblx0ICB9XG5cdCAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxuXHR9XG5cdFxuXHRCdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuXHQgIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG5cdH1cblx0XG5cdEJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cdFxuXHQgIHZhciB4ID0gYS5sZW5ndGhcblx0ICB2YXIgeSA9IGIubGVuZ3RoXG5cdFxuXHQgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuXHQgICAgICB4ID0gYVtpXVxuXHQgICAgICB5ID0gYltpXVxuXHQgICAgICBicmVha1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHggPCB5KSByZXR1cm4gLTFcblx0ICBpZiAoeSA8IHgpIHJldHVybiAxXG5cdCAgcmV0dXJuIDBcblx0fVxuXHRcblx0QnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuXHQgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG5cdCAgICBjYXNlICdoZXgnOlxuXHQgICAgY2FzZSAndXRmOCc6XG5cdCAgICBjYXNlICd1dGYtOCc6XG5cdCAgICBjYXNlICdhc2NpaSc6XG5cdCAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgY2FzZSAnYmluYXJ5Jzpcblx0ICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICBjYXNlICd1Y3MyJzpcblx0ICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRCdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcblx0ICBpZiAoIWlzQXJyYXkobGlzdCkpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG5cdCAgfVxuXHRcblx0ICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcblx0ICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcblx0ICB9XG5cdFxuXHQgIHZhciBpXG5cdCAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBsZW5ndGggPSAwXG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuXHQgICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKVxuXHQgIHZhciBwb3MgPSAwXG5cdCAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcblx0ICAgIHZhciBidWYgPSBsaXN0W2ldXG5cdCAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG5cdCAgICB9XG5cdCAgICBidWYuY29weShidWZmZXIsIHBvcylcblx0ICAgIHBvcyArPSBidWYubGVuZ3RoXG5cdCAgfVxuXHQgIHJldHVybiBidWZmZXJcblx0fVxuXHRcblx0ZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuXHQgICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHQgICAgICAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgc3RyaW5nIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG5cdCAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuXHQgIH1cblx0XG5cdCAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcblx0ICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXHRcblx0ICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHQgIGZvciAoOzspIHtcblx0ICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcblx0ICAgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgICAgIHJldHVybiBsZW5cblx0ICAgICAgY2FzZSAndXRmOCc6XG5cdCAgICAgIGNhc2UgJ3V0Zi04Jzpcblx0ICAgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG5cdCAgICAgIGNhc2UgJ3VjczInOlxuXHQgICAgICBjYXNlICd1Y3MtMic6XG5cdCAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgICBjYXNlICd1dGYtMTZsZSc6XG5cdCAgICAgICAgcmV0dXJuIGxlbiAqIDJcblx0ICAgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgICByZXR1cm4gbGVuID4+PiAxXG5cdCAgICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuXHQgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0QnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cdFxuXHRmdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2Vcblx0XG5cdCAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG5cdCAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS5cblx0XG5cdCAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG5cdCAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLlxuXHQgIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG5cdCAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG5cdCAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7XG5cdCAgICBzdGFydCA9IDBcblx0ICB9XG5cdCAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcblx0ICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxuXHQgIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gJydcblx0ICB9XG5cdFxuXHQgIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuXHQgICAgZW5kID0gdGhpcy5sZW5ndGhcblx0ICB9XG5cdFxuXHQgIGlmIChlbmQgPD0gMCkge1xuXHQgICAgcmV0dXJuICcnXG5cdCAgfVxuXHRcblx0ICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuXHQgIGVuZCA+Pj49IDBcblx0ICBzdGFydCA+Pj49IDBcblx0XG5cdCAgaWYgKGVuZCA8PSBzdGFydCkge1xuXHQgICAgcmV0dXJuICcnXG5cdCAgfVxuXHRcblx0ICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXHRcblx0ICB3aGlsZSAodHJ1ZSkge1xuXHQgICAgc3dpdGNoIChlbmNvZGluZykge1xuXHQgICAgICBjYXNlICdoZXgnOlxuXHQgICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAndXRmOCc6XG5cdCAgICAgIGNhc2UgJ3V0Zi04Jzpcblx0ICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICdhc2NpaSc6XG5cdCAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ2xhdGluMSc6XG5cdCAgICAgIGNhc2UgJ2JpbmFyeSc6XG5cdCAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICdiYXNlNjQnOlxuXHQgICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAndWNzMic6XG5cdCAgICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuXHQgICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG5cdC8vIEJ1ZmZlciBpbnN0YW5jZXMuXG5cdEJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXHRcblx0ZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkge1xuXHQgIHZhciBpID0gYltuXVxuXHQgIGJbbl0gPSBiW21dXG5cdCAgYlttXSA9IGlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkge1xuXHQgIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuXHQgIGlmIChsZW4gJSAyICE9PSAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKVxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG5cdCAgICBzd2FwKHRoaXMsIGksIGkgKyAxKVxuXHQgIH1cblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKGxlbiAlIDQgIT09IDApIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpXG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcblx0ICAgIHN3YXAodGhpcywgaSwgaSArIDMpXG5cdCAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMilcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xuXHQgIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuXHQgIGlmIChsZW4gJSA4ICE9PSAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG5cdCAgICBzd2FwKHRoaXMsIGksIGkgKyA3KVxuXHQgICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpXG5cdCAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcblx0ICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KVxuXHQgIH1cblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuXHQgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcblx0ICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG5cdCAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuXHQgIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuXHQgIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcblx0ICB2YXIgc3RyID0gJydcblx0ICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuXHQgIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcblx0ICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG5cdCAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG5cdCAgfVxuXHQgIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG5cdCAgfVxuXHRcblx0ICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgc3RhcnQgPSAwXG5cdCAgfVxuXHQgIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDBcblx0ICB9XG5cdCAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICB0aGlzU3RhcnQgPSAwXG5cdCAgfVxuXHQgIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aFxuXHQgIH1cblx0XG5cdCAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4Jylcblx0ICB9XG5cdFxuXHQgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcblx0ICAgIHJldHVybiAwXG5cdCAgfVxuXHQgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuXHQgICAgcmV0dXJuIC0xXG5cdCAgfVxuXHQgIGlmIChzdGFydCA+PSBlbmQpIHtcblx0ICAgIHJldHVybiAxXG5cdCAgfVxuXHRcblx0ICBzdGFydCA+Pj49IDBcblx0ICBlbmQgPj4+PSAwXG5cdCAgdGhpc1N0YXJ0ID4+Pj0gMFxuXHQgIHRoaXNFbmQgPj4+PSAwXG5cdFxuXHQgIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cdFxuXHQgIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydFxuXHQgIHZhciB5ID0gZW5kIC0gc3RhcnRcblx0ICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblx0XG5cdCAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG5cdCAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuXHQgICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG5cdCAgICAgIHggPSB0aGlzQ29weVtpXVxuXHQgICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuXHQgICAgICBicmVha1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHggPCB5KSByZXR1cm4gLTFcblx0ICBpZiAoeSA8IHgpIHJldHVybiAxXG5cdCAgcmV0dXJuIDBcblx0fVxuXHRcblx0Ly8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuXHQvLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxuXHQvL1xuXHQvLyBBcmd1bWVudHM6XG5cdC8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXG5cdC8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG5cdC8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuXHQvLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xuXHQvLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuXHRmdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcblx0ICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2hcblx0ICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cdFxuXHQgIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XG5cdCAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuXHQgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG5cdCAgICBieXRlT2Zmc2V0ID0gMFxuXHQgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcblx0ICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG5cdCAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcblx0ICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuXHQgIH1cblx0ICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQgIC8vIENvZXJjZSB0byBOdW1iZXIuXG5cdCAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG5cdCAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcblx0ICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKVxuXHQgIH1cblx0XG5cdCAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcblx0ICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuXHQgIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcblx0ICAgIGlmIChkaXIpIHJldHVybiAtMVxuXHQgICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcblx0ICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG5cdCAgICBpZiAoZGlyKSBieXRlT2Zmc2V0ID0gMFxuXHQgICAgZWxzZSByZXR1cm4gLTFcblx0ICB9XG5cdFxuXHQgIC8vIE5vcm1hbGl6ZSB2YWxcblx0ICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpXG5cdCAgfVxuXHRcblx0ICAvLyBGaW5hbGx5LCBzZWFyY2ggZWl0aGVyIGluZGV4T2YgKGlmIGRpciBpcyB0cnVlKSBvciBsYXN0SW5kZXhPZlxuXHQgIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuXHQgICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuXHQgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgcmV0dXJuIC0xXG5cdCAgICB9XG5cdCAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuXHQgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcblx0ICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuXHQgICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmXG5cdCAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgaWYgKGRpcikge1xuXHQgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbIHZhbCBdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuXHQgIH1cblx0XG5cdCAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuXHQgIHZhciBpbmRleFNpemUgPSAxXG5cdCAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcblx0ICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aFxuXHRcblx0ICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgIGlmIChlbmNvZGluZyA9PT0gJ3VjczInIHx8IGVuY29kaW5nID09PSAndWNzLTInIHx8XG5cdCAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuXHQgICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcblx0ICAgICAgICByZXR1cm4gLTFcblx0ICAgICAgfVxuXHQgICAgICBpbmRleFNpemUgPSAyXG5cdCAgICAgIGFyckxlbmd0aCAvPSAyXG5cdCAgICAgIHZhbExlbmd0aCAvPSAyXG5cdCAgICAgIGJ5dGVPZmZzZXQgLz0gMlxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZCAoYnVmLCBpKSB7XG5cdCAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG5cdCAgICAgIHJldHVybiBidWZbaV1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgaVxuXHQgIGlmIChkaXIpIHtcblx0ICAgIHZhciBmb3VuZEluZGV4ID0gLTFcblx0ICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7XG5cdCAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuXHQgICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemVcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcblx0ICAgICAgICBmb3VuZEluZGV4ID0gLTFcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aFxuXHQgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcblx0ICAgICAgdmFyIGZvdW5kID0gdHJ1ZVxuXHQgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuXHQgICAgICAgICAgZm91bmQgPSBmYWxzZVxuXHQgICAgICAgICAgYnJlYWtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIC0xXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuXHQgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcblx0ICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG5cdCAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuXHQgIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG5cdCAgaWYgKCFsZW5ndGgpIHtcblx0ICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuXHQgIH0gZWxzZSB7XG5cdCAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuXHQgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuXHQgICAgICBsZW5ndGggPSByZW1haW5pbmdcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG5cdCAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcblx0ICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblx0XG5cdCAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcblx0ICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcblx0ICB9XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuXHQgICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcblx0ICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuXHQgICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG5cdCAgfVxuXHQgIHJldHVybiBpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0ZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxhdGluMVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcblx0ICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuXHQgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG5cdCAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICBlbmNvZGluZyA9ICd1dGY4J1xuXHQgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcblx0ICAgIG9mZnNldCA9IDBcblx0ICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcblx0ICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICBlbmNvZGluZyA9IG9mZnNldFxuXHQgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcblx0ICAgIG9mZnNldCA9IDBcblx0ICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuXHQgIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuXHQgICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcblx0ICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuXHQgICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG5cdCAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuXHQgICAgfVxuXHQgIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKFxuXHQgICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXG5cdCAgICApXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcblx0ICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblx0XG5cdCAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG5cdCAgfVxuXHRcblx0ICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXHRcblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHQgIGZvciAoOzspIHtcblx0ICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcblx0ICAgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgICBjYXNlICd1dGYtOCc6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBjYXNlICdsYXRpbjEnOlxuXHQgICAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuXHQgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAndWNzMic6XG5cdCAgICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuXHQgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgdHlwZTogJ0J1ZmZlcicsXG5cdCAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdCAgdmFyIHJlcyA9IFtdXG5cdFxuXHQgIHZhciBpID0gc3RhcnRcblx0ICB3aGlsZSAoaSA8IGVuZCkge1xuXHQgICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuXHQgICAgdmFyIGNvZGVQb2ludCA9IG51bGxcblx0ICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuXHQgICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcblx0ICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG5cdCAgICAgIDogMVxuXHRcblx0ICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcblx0ICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXHRcblx0ICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcblx0ICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIGNhc2UgMjpcblx0ICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcblx0ICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG5cdCAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBicmVha1xuXHQgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG5cdCAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcblx0ICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG5cdCAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcblx0ICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGJyZWFrXG5cdCAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cblx0ICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cblx0ICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG5cdCAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcblx0ICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG5cdCAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG5cdCAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcblx0ICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuXHQgICAgICBjb2RlUG9pbnQgPSAweEZGRkRcblx0ICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG5cdCAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG5cdCAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG5cdCAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcblx0ICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcblx0ICAgIH1cblx0XG5cdCAgICByZXMucHVzaChjb2RlUG9pbnQpXG5cdCAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2Vcblx0ICB9XG5cdFxuXHQgIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxuXHR9XG5cdFxuXHQvLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcblx0Ly8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuXHQvLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG5cdHZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXHRcblx0ZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG5cdCAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG5cdCAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuXHQgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG5cdCAgfVxuXHRcblx0ICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG5cdCAgdmFyIHJlcyA9ICcnXG5cdCAgdmFyIGkgPSAwXG5cdCAgd2hpbGUgKGkgPCBsZW4pIHtcblx0ICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuXHQgICAgICBTdHJpbmcsXG5cdCAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcblx0ICAgIClcblx0ICB9XG5cdCAgcmV0dXJuIHJlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuXHQgIH1cblx0ICByZXR1cm4gcmV0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG5cdCAgfVxuXHQgIHJldHVybiByZXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cdFxuXHQgIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcblx0ICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cdFxuXHQgIHZhciBvdXQgPSAnJ1xuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG5cdCAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuXHQgIH1cblx0ICByZXR1cm4gb3V0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG5cdCAgdmFyIHJlcyA9ICcnXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuXHQgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgc3RhcnQgPSB+fnN0YXJ0XG5cdCAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXHRcblx0ICBpZiAoc3RhcnQgPCAwKSB7XG5cdCAgICBzdGFydCArPSBsZW5cblx0ICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuXHQgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcblx0ICAgIHN0YXJ0ID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgMCkge1xuXHQgICAgZW5kICs9IGxlblxuXHQgICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcblx0ICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuXHQgICAgZW5kID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cdFxuXHQgIHZhciBuZXdCdWZcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcblx0ICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XG5cdCAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcblx0ICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3QnVmXG5cdH1cblx0XG5cdC8qXG5cdCAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcblx0ICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcblx0ICB9XG5cdFxuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHQgIH1cblx0XG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuXHQgIHZhciBtdWwgPSAxXG5cdCAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gdGhpc1tvZmZzZXRdXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuXHQgICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG5cdCAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuXHQgICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuXHQgICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG5cdCAgICB0aGlzW29mZnNldCArIDNdKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcblx0ICB9XG5cdCAgbXVsICo9IDB4ODBcblx0XG5cdCAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICB2YXIgaSA9IGJ5dGVMZW5ndGhcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cblx0ICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcblx0ICB9XG5cdCAgbXVsICo9IDB4ODBcblx0XG5cdCAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuXHQgIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcblx0ICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcblx0ICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG5cdCAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDNdKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG5cdCAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcblx0ICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuXHQgIH1cblx0XG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG5cdCAgdmFyIG11bCA9IDFcblx0ICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG5cdCAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICByZXR1cm4gb2Zmc2V0ICsgMVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyArK2kpIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG5cdCAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuXHQgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cdFxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IDBcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBzdWIgPSAwXG5cdCAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7XG5cdCAgICAgIHN1YiA9IDFcblx0ICAgIH1cblx0ICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXHRcblx0ICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuXHQgIH1cblx0XG5cdCAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIHN1YiA9IDBcblx0ICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuXHQgICAgICBzdWIgPSAxXG5cdCAgICB9XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG5cdCAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG5cdCAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcblx0ICByZXR1cm4gb2Zmc2V0ICsgMVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgMlxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG5cdCAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcblx0ICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuXHQgIH1cblx0ICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcblx0ICB9XG5cdCAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG5cdCAgcmV0dXJuIG9mZnNldCArIDhcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcblx0fVxuXHRcblx0Ly8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuXHRCdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG5cdCAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG5cdCAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuXHQgIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcblx0ICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcblx0ICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblx0XG5cdCAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG5cdCAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG5cdCAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cdFxuXHQgIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcblx0ICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG5cdCAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG5cdCAgfVxuXHQgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcblx0ICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblx0XG5cdCAgLy8gQXJlIHdlIG9vYj9cblx0ICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG5cdCAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuXHQgIH1cblx0XG5cdCAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG5cdCAgdmFyIGlcblx0XG5cdCAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG5cdCAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcblx0ICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG5cdCAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG5cdCAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuXHQgICAgICB0YXJnZXQsXG5cdCAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSxcblx0ICAgICAgdGFyZ2V0U3RhcnRcblx0ICAgIClcblx0ICB9XG5cdFxuXHQgIHJldHVybiBsZW5cblx0fVxuXHRcblx0Ly8gVXNhZ2U6XG5cdC8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuXHQvLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcblx0Ly8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5cdEJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcblx0ICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuXHQgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuXHQgICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgZW5jb2RpbmcgPSBzdGFydFxuXHQgICAgICBzdGFydCA9IDBcblx0ICAgICAgZW5kID0gdGhpcy5sZW5ndGhcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgZW5jb2RpbmcgPSBlbmRcblx0ICAgICAgZW5kID0gdGhpcy5sZW5ndGhcblx0ICAgIH1cblx0ICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMClcblx0ICAgICAgaWYgKGNvZGUgPCAyNTYpIHtcblx0ICAgICAgICB2YWwgPSBjb2RlXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG5cdCAgICB2YWwgPSB2YWwgJiAyNTVcblx0ICB9XG5cdFxuXHQgIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuXHQgIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkge1xuXHQgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuXHQgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblx0XG5cdCAgaWYgKCF2YWwpIHZhbCA9IDBcblx0XG5cdCAgdmFyIGlcblx0ICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcblx0ICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcblx0ICAgICAgdGhpc1tpXSA9IHZhbFxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuXHQgICAgICA/IHZhbFxuXHQgICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSlcblx0ICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG5cdCAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdGhpc1xuXHR9XG5cdFxuXHQvLyBIRUxQRVIgRlVOQ1RJT05TXG5cdC8vID09PT09PT09PT09PT09PT1cblx0XG5cdHZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXHRcblx0ZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuXHQgIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuXHQgIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcblx0ICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG5cdCAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcblx0ICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3Rcblx0ICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcblx0ICAgIHN0ciA9IHN0ciArICc9J1xuXHQgIH1cblx0ICByZXR1cm4gc3RyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuXHQgIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b0hleCAobikge1xuXHQgIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuXHQgIHJldHVybiBuLnRvU3RyaW5nKDE2KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuXHQgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcblx0ICB2YXIgY29kZVBvaW50XG5cdCAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcblx0ICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblx0ICB2YXIgYnl0ZXMgPSBbXVxuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG5cdCAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXHRcblx0ICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcblx0ICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG5cdCAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG5cdCAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuXHQgICAgICAgIC8vIG5vIGxlYWQgeWV0XG5cdCAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuXHQgICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuXHQgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuXHQgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgICBjb250aW51ZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gdmFsaWQgbGVhZFxuXHQgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblx0XG5cdCAgICAgICAgY29udGludWVcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuXHQgICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG5cdCAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG5cdCAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXHQgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG5cdCAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcblx0ICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuXHQgICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG5cdCAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuXHQgICAgfVxuXHRcblx0ICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cdFxuXHQgICAgLy8gZW5jb2RlIHV0Zjhcblx0ICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG5cdCAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcblx0ICAgICAgKVxuXHQgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcblx0ICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuXHQgICAgICApXG5cdCAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG5cdCAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuXHQgICAgICBieXRlcy5wdXNoKFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuXHQgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG5cdCAgICAgIClcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50Jylcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBieXRlc1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuXHQgIHZhciBieXRlQXJyYXkgPSBbXVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG5cdCAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cblx0ICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcblx0ICB9XG5cdCAgcmV0dXJuIGJ5dGVBcnJheVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuXHQgIHZhciBjLCBoaSwgbG9cblx0ICB2YXIgYnl0ZUFycmF5ID0gW11cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuXHQgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cdFxuXHQgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG5cdCAgICBoaSA9IGMgPj4gOFxuXHQgICAgbG8gPSBjICUgMjU2XG5cdCAgICBieXRlQXJyYXkucHVzaChsbylcblx0ICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJ5dGVBcnJheVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcblx0ICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcblx0ICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcblx0ICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuXHQgIH1cblx0ICByZXR1cm4gaVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc25hbiAodmFsKSB7XG5cdCAgcmV0dXJuIHZhbCAhPT0gdmFsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKS5CdWZmZXIsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0J1xuXHRcblx0ZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXlcblx0ZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXHRcblx0dmFyIGxvb2t1cCA9IFtdXG5cdHZhciByZXZMb29rdXAgPSBbXVxuXHR2YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5XG5cdFxuXHR2YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuXHRmb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuXHQgIGxvb2t1cFtpXSA9IGNvZGVbaV1cblx0ICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcblx0fVxuXHRcblx0cmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5cdHJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2M1xuXHRcblx0ZnVuY3Rpb24gcGxhY2VIb2xkZXJzQ291bnQgKGI2NCkge1xuXHQgIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cdCAgaWYgKGxlbiAlIDQgPiAwKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuXHQgIH1cblx0XG5cdCAgLy8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcblx0ICAvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG5cdCAgLy8gcmVwcmVzZW50IG9uZSBieXRlXG5cdCAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG5cdCAgLy8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuXHQgIHJldHVybiBiNjRbbGVuIC0gMl0gPT09ICc9JyA/IDIgOiBiNjRbbGVuIC0gMV0gPT09ICc9JyA/IDEgOiAwXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkge1xuXHQgIC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuXHQgIHJldHVybiBiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnNDb3VudChiNjQpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcblx0ICB2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuXHQgIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cdCAgcGxhY2VIb2xkZXJzID0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxuXHRcblx0ICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXHRcblx0ICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG5cdCAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuXG5cdFxuXHQgIHZhciBMID0gMFxuXHRcblx0ICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7XG5cdCAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cblx0ICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG5cdCAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG5cdCAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcblx0ICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG5cdCAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcblx0ICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkge1xuXHQgICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG5cdCAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG5cdCAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBhcnJcblx0fVxuXHRcblx0ZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcblx0ICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIHRtcFxuXHQgIHZhciBvdXRwdXQgPSBbXVxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG5cdCAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pXG5cdCAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcblx0ICB9XG5cdCAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkge1xuXHQgIHZhciB0bXBcblx0ICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG5cdCAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG5cdCAgdmFyIG91dHB1dCA9ICcnXG5cdCAgdmFyIHBhcnRzID0gW11cblx0ICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblx0XG5cdCAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuXHQgIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcblx0ICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpXG5cdCAgfVxuXHRcblx0ICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG5cdCAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcblx0ICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG5cdCAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXVxuXHQgICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl1cblx0ICAgIG91dHB1dCArPSAnPT0nXG5cdCAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7XG5cdCAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pXG5cdCAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF1cblx0ICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdXG5cdCAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXVxuXHQgICAgb3V0cHV0ICs9ICc9J1xuXHQgIH1cblx0XG5cdCAgcGFydHMucHVzaChvdXRwdXQpXG5cdFxuXHQgIHJldHVybiBwYXJ0cy5qb2luKCcnKVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuXHQgIHZhciBlLCBtXG5cdCAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcblx0ICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuXHQgIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuXHQgIHZhciBuQml0cyA9IC03XG5cdCAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMFxuXHQgIHZhciBkID0gaXNMRSA/IC0xIDogMVxuXHQgIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cdFxuXHQgIGkgKz0gZFxuXHRcblx0ICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuXHQgIHMgPj49ICgtbkJpdHMpXG5cdCAgbkJpdHMgKz0gZUxlblxuXHQgIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cdFxuXHQgIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG5cdCAgZSA+Pj0gKC1uQml0cylcblx0ICBuQml0cyArPSBtTGVuXG5cdCAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblx0XG5cdCAgaWYgKGUgPT09IDApIHtcblx0ICAgIGUgPSAxIC0gZUJpYXNcblx0ICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcblx0ICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG5cdCAgICBlID0gZSAtIGVCaWFzXG5cdCAgfVxuXHQgIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG5cdH1cblx0XG5cdGV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcblx0ICB2YXIgZSwgbSwgY1xuXHQgIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG5cdCAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcblx0ICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcblx0ICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG5cdCAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKVxuXHQgIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuXHQgIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cdFxuXHQgIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cdFxuXHQgIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG5cdCAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcblx0ICAgIGUgPSBlTWF4XG5cdCAgfSBlbHNlIHtcblx0ICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuXHQgICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuXHQgICAgICBlLS1cblx0ICAgICAgYyAqPSAyXG5cdCAgICB9XG5cdCAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcblx0ICAgICAgdmFsdWUgKz0gcnQgLyBjXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcblx0ICAgIH1cblx0ICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuXHQgICAgICBlKytcblx0ICAgICAgYyAvPSAyXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG5cdCAgICAgIG0gPSAwXG5cdCAgICAgIGUgPSBlTWF4XG5cdCAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG5cdCAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuXHQgICAgICBlID0gZSArIGVCaWFzXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcblx0ICAgICAgZSA9IDBcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cdFxuXHQgIGUgPSAoZSA8PCBtTGVuKSB8IG1cblx0ICBlTGVuICs9IG1MZW5cblx0ICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cdFxuXHQgIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDYzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA2NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOyhmdW5jdGlvbiAoKSB7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICBmdW5jdGlvbiBmZXRjaFBvbnlmaWxsKG9wdGlvbnMpIHtcblx0ICAgIHZhciBQcm9taXNlID0gb3B0aW9ucyAmJiBvcHRpb25zLlByb21pc2UgfHwgc2VsZi5Qcm9taXNlO1xuXHQgICAgdmFyIFhNTEh0dHBSZXF1ZXN0ID0gb3B0aW9ucyAmJiBvcHRpb25zLlhNTEh0dHBSZXF1ZXN0IHx8IHNlbGYuWE1MSHR0cFJlcXVlc3Q7XG5cdCAgICB2YXIgZ2xvYmFsID0gc2VsZjtcblx0XG5cdCAgICByZXR1cm4gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHNlbGYgPSBPYmplY3QuY3JlYXRlKGdsb2JhbCwge1xuXHQgICAgICAgIGZldGNoOiB7XG5cdCAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuXHQgICAgICAgICAgd3JpdGFibGU6IHRydWVcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgKGZ1bmN0aW9uKHNlbGYpIHtcblx0ICAgICAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgICAgIGlmIChzZWxmLmZldGNoKSB7XG5cdCAgICAgICAgICByZXR1cm5cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBzdXBwb3J0ID0ge1xuXHQgICAgICAgICAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBzZWxmLFxuXHQgICAgICAgICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIHNlbGYgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG5cdCAgICAgICAgICBibG9iOiAnRmlsZVJlYWRlcicgaW4gc2VsZiAmJiAnQmxvYicgaW4gc2VsZiAmJiAoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgbmV3IEJsb2IoKVxuXHQgICAgICAgICAgICAgIHJldHVybiB0cnVlXG5cdCAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KSgpLFxuXHQgICAgICAgICAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gc2VsZixcblx0ICAgICAgICAgIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIHNlbGZcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUnKVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIHZhbHVlXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBCdWlsZCBhIGRlc3RydWN0aXZlIGl0ZXJhdG9yIGZvciB0aGUgdmFsdWUgbGlzdFxuXHQgICAgICAgIGZ1bmN0aW9uIGl0ZXJhdG9yRm9yKGl0ZW1zKSB7XG5cdCAgICAgICAgICB2YXIgaXRlcmF0b3IgPSB7XG5cdCAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KClcblx0ICAgICAgICAgICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG5cdCAgICAgICAgICAgIGl0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gaXRlcmF0b3Jcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHJldHVybiBpdGVyYXRvclxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG5cdCAgICAgICAgICB0aGlzLm1hcCA9IHt9XG5cdFxuXHQgICAgICAgICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG5cdCAgICAgICAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuXHQgICAgICAgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuXHQgICAgICAgICAgICB9LCB0aGlzKVxuXHRcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuXHQgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgICAgICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCBoZWFkZXJzW25hbWVdKVxuXHQgICAgICAgICAgICB9LCB0aGlzKVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcblx0ICAgICAgICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG5cdCAgICAgICAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuXHQgICAgICAgICAgdmFyIGxpc3QgPSB0aGlzLm1hcFtuYW1lXVxuXHQgICAgICAgICAgaWYgKCFsaXN0KSB7XG5cdCAgICAgICAgICAgIGxpc3QgPSBbXVxuXHQgICAgICAgICAgICB0aGlzLm1hcFtuYW1lXSA9IGxpc3Rcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGxpc3QucHVzaCh2YWx1ZSlcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgICAgICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICAgICAgdmFyIHZhbHVlcyA9IHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG5cdCAgICAgICAgICByZXR1cm4gdmFsdWVzID8gdmFsdWVzWzBdIDogbnVsbFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldIHx8IFtdXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICAgICAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIEhlYWRlcnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG5cdCAgICAgICAgICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IFtub3JtYWxpemVWYWx1ZSh2YWx1ZSldXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcblx0ICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMubWFwKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgICAgICAgICAgdGhpcy5tYXBbbmFtZV0uZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWUsIG5hbWUsIHRoaXMpXG5cdCAgICAgICAgICAgIH0sIHRoaXMpXG5cdCAgICAgICAgICB9LCB0aGlzKVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgSGVhZGVycy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKG5hbWUpIH0pXG5cdCAgICAgICAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBIZWFkZXJzLnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIHZhciBpdGVtcyA9IFtdXG5cdCAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsgaXRlbXMucHVzaCh2YWx1ZSkgfSlcblx0ICAgICAgICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIHZhciBpdGVtcyA9IFtdXG5cdCAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKSB9KVxuXHQgICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcblx0ICAgICAgICAgIEhlYWRlcnMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBmdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG5cdCAgICAgICAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuXHQgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJykpXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuXHQgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSlcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcihibG9iKSB7XG5cdCAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuXHQgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpXG5cdCAgICAgICAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0KGJsb2IpIHtcblx0ICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG5cdCAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChibG9iKVxuXHQgICAgICAgICAgcmV0dXJuIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBmdW5jdGlvbiBCb2R5KCkge1xuXHQgICAgICAgICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cdFxuXHQgICAgICAgICAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keVxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICAgICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHlcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmZvcm1EYXRhICYmIEZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpXG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoIWJvZHkpIHtcblx0ICAgICAgICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgICAgICAgIC8vIE9ubHkgc3VwcG9ydCBBcnJheUJ1ZmZlcnMgZm9yIFBPU1QgbWV0aG9kLlxuXHQgICAgICAgICAgICAgIC8vIFJlY2VpdmluZyBBcnJheUJ1ZmZlcnMgaGFwcGVucyB2aWEgQmxvYnMsIGluc3RlYWQuXG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBCb2R5SW5pdCB0eXBlJylcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuXHQgICAgICAgICAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnKVxuXHQgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSlcblx0ICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04Jylcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoc3VwcG9ydC5ibG9iKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG5cdCAgICAgICAgICAgICAgaWYgKHJlamVjdGVkKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcblx0ICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuXHQgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcilcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICAgICAgICBpZiAocmVqZWN0ZWQpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RlZFxuXHQgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG5cdCAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0Jylcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG5cdCAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkID8gcmVqZWN0ZWQgOiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuXHQgICAgICAgICAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpXG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgcmV0dXJuIHRoaXNcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIEhUVFAgbWV0aG9kcyB3aG9zZSBjYXBpdGFsaXphdGlvbiBzaG91bGQgYmUgbm9ybWFsaXplZFxuXHQgICAgICAgIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcblx0ICAgICAgICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcblx0ICAgICAgICAgIHJldHVybiAobWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEpID8gdXBjYXNlZCA6IG1ldGhvZFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuXHQgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblx0ICAgICAgICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG5cdCAgICAgICAgICBpZiAoUmVxdWVzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihpbnB1dCkpIHtcblx0ICAgICAgICAgICAgaWYgKGlucHV0LmJvZHlVc2VkKSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnVybCA9IGlucHV0LnVybFxuXHQgICAgICAgICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcblx0ICAgICAgICAgICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbnB1dC5oZWFkZXJzKVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kXG5cdCAgICAgICAgICAgIHRoaXMubW9kZSA9IGlucHV0Lm1vZGVcblx0ICAgICAgICAgICAgaWYgKCFib2R5KSB7XG5cdCAgICAgICAgICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdFxuXHQgICAgICAgICAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnVybCA9IGlucHV0XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnb21pdCdcblx0ICAgICAgICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuXHQgICAgICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJylcblx0ICAgICAgICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbFxuXHQgICAgICAgICAgdGhpcy5yZWZlcnJlciA9IG51bGxcblx0XG5cdCAgICAgICAgICBpZiAoKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiBib2R5KSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHRoaXMuX2luaXRCb2R5KGJvZHkpXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMpXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBmdW5jdGlvbiBkZWNvZGUoYm9keSkge1xuXHQgICAgICAgICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuXHQgICAgICAgICAgYm9keS50cmltKCkuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uKGJ5dGVzKSB7XG5cdCAgICAgICAgICAgIGlmIChieXRlcykge1xuXHQgICAgICAgICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9Jylcblx0ICAgICAgICAgICAgICB2YXIgbmFtZSA9IHNwbGl0LnNoaWZ0KCkucmVwbGFjZSgvXFwrL2csICcgJylcblx0ICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJylcblx0ICAgICAgICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pXG5cdCAgICAgICAgICByZXR1cm4gZm9ybVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZnVuY3Rpb24gaGVhZGVycyh4aHIpIHtcblx0ICAgICAgICAgIHZhciBoZWFkID0gbmV3IEhlYWRlcnMoKVxuXHQgICAgICAgICAgdmFyIHBhaXJzID0gKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJykudHJpbSgpLnNwbGl0KCdcXG4nKVxuXHQgICAgICAgICAgcGFpcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcblx0ICAgICAgICAgICAgdmFyIHNwbGl0ID0gaGVhZGVyLnRyaW0oKS5zcGxpdCgnOicpXG5cdCAgICAgICAgICAgIHZhciBrZXkgPSBzcGxpdC5zaGlmdCgpLnRyaW0oKVxuXHQgICAgICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc6JykudHJpbSgpXG5cdCAgICAgICAgICAgIGhlYWQuYXBwZW5kKGtleSwgdmFsdWUpXG5cdCAgICAgICAgICB9KVxuXHQgICAgICAgICAgcmV0dXJuIGhlYWRcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSlcblx0XG5cdCAgICAgICAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgIGlmICghb3B0aW9ucykge1xuXHQgICAgICAgICAgICBvcHRpb25zID0ge31cblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCdcblx0ICAgICAgICAgIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXNcblx0ICAgICAgICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcblx0ICAgICAgICAgIHRoaXMuc3RhdHVzVGV4dCA9IG9wdGlvbnMuc3RhdHVzVGV4dFxuXHQgICAgICAgICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycyA/IG9wdGlvbnMuaGVhZGVycyA6IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcblx0ICAgICAgICAgIHRoaXMudXJsID0gb3B0aW9ucy51cmwgfHwgJydcblx0ICAgICAgICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblx0XG5cdCAgICAgICAgUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG5cdCAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG5cdCAgICAgICAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcblx0ICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcblx0ICAgICAgICAgICAgdXJsOiB0aGlzLnVybFxuXHQgICAgICAgICAgfSlcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuXHQgICAgICAgICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcblx0ICAgICAgICAgIHJldHVybiByZXNwb25zZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cdFxuXHQgICAgICAgIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcblx0ICAgICAgICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgc3RhdHVzIGNvZGUnKVxuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgc2VsZi5IZWFkZXJzID0gSGVhZGVyc1xuXHQgICAgICAgIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3Rcblx0ICAgICAgICBzZWxmLlJlc3BvbnNlID0gUmVzcG9uc2Vcblx0XG5cdCAgICAgICAgc2VsZi5mZXRjaCA9IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG5cdCAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICAgIHZhciByZXF1ZXN0XG5cdCAgICAgICAgICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSAmJiAhaW5pdCkge1xuXHQgICAgICAgICAgICAgIHJlcXVlc3QgPSBpbnB1dFxuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cdFxuXHQgICAgICAgICAgICBmdW5jdGlvbiByZXNwb25zZVVSTCgpIHtcblx0ICAgICAgICAgICAgICBpZiAoJ3Jlc3BvbnNlVVJMJyBpbiB4aHIpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VVUkxcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIC8vIEF2b2lkIHNlY3VyaXR5IHdhcm5pbmdzIG9uIGdldFJlc3BvbnNlSGVhZGVyIHdoZW4gbm90IGFsbG93ZWQgYnkgQ09SU1xuXHQgICAgICAgICAgICAgIGlmICgvXlgtUmVxdWVzdC1VUkw6L20udGVzdCh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLVJlcXVlc3QtVVJMJylcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG5cdCAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcblx0ICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoeGhyKSxcblx0ICAgICAgICAgICAgICAgIHVybDogcmVzcG9uc2VVUkwoKVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dFxuXHQgICAgICAgICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC51cmwsIHRydWUpXG5cdFxuXHQgICAgICAgICAgICBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ2luY2x1ZGUnKSB7XG5cdCAgICAgICAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcblx0ICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG5cdCAgICAgICAgICAgIH0pXG5cdFxuXHQgICAgICAgICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuXHQgICAgICAgICAgfSlcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2VsZi5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcblx0ICAgICAgfSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMpO1xuXHRcblx0XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgZmV0Y2g6IHNlbGYuZmV0Y2gsXG5cdCAgICAgICAgSGVhZGVyczogc2VsZi5IZWFkZXJzLFxuXHQgICAgICAgIFJlcXVlc3Q6IHNlbGYuUmVxdWVzdCxcblx0ICAgICAgICBSZXNwb25zZTogc2VsZi5SZXNwb25zZVxuXHQgICAgICB9O1xuXHQgICAgfSgpKTtcblx0ICB9XG5cdFxuXHQgIGlmICh0cnVlKSB7XG5cdCAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gZmV0Y2hQb255ZmlsbDtcblx0ICAgIH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gZmV0Y2hQb255ZmlsbDtcblx0ICB9IGVsc2Uge1xuXHQgICAgc2VsZi5mZXRjaFBvbnlmaWxsID0gZmV0Y2hQb255ZmlsbDtcblx0ICB9XG5cdH0oKSk7XG5cdFxuXG5cbi8qKiovIH0sXG4vKiA2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohIDMuMTYuMyAvIG1vZGVybiAqL1xuXHQoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRcdGlmKHRydWUpXG5cdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0XHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdFx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0XHRleHBvcnRzW1wiUFVCTlVCXCJdID0gZmFjdG9yeSgpO1xuXHRcdGVsc2Vcblx0XHRcdHJvb3RbXCJQVUJOVUJcIl0gPSBmYWN0b3J5KCk7XG5cdH0pKHRoaXMsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuXHQvKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcblx0LyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXHRcblx0LyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuXHQvKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0XG5cdC8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0LyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuXHQvKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblx0XG5cdC8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHQvKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuXHQvKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcblx0LyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuXHQvKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG5cdC8qKioqKiovIFx0XHR9O1xuXHRcblx0LyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHQvKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdFxuXHQvKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHQvKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cdFxuXHQvKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0LyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcblx0LyoqKioqKi8gXHR9XG5cdFxuXHRcblx0LyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuXHQvKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cdFxuXHQvKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG5cdC8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblx0XG5cdC8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cblx0LyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXHRcblx0LyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcblx0LyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblx0LyoqKioqKi8gfSlcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblx0LyoqKioqKi8gKFtcblx0LyogMCAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblx0XG5cdFx0LyogZXNsaW50IGN1cmx5OiAwLCBjYW1lbGNhc2U6IDAsIGRvdC1ub3RhdGlvbjogMCAqL1xuXHRcblx0XHR2YXIgcHViTnViQ29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFx0dmFyIGNyeXB0b19vYmogPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcdHZhciBDcnlwdG9KUyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFx0dmFyIFdTID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdFxuXHRcdC8qKlxuXHRcdCAqIExPQ0FMIFNUT1JBR0Vcblx0XHQgKi9cblx0XHR2YXIgZGIgPSAoZnVuY3Rpb24gKCkge1xuXHRcdCAgdmFyIGxzO1xuXHRcblx0XHQgIHRyeSB7XG5cdFx0ICAgIGxzID0gdHlwZW9mIGxvY2FsU3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbG9jYWxTdG9yYWdlO1xuXHRcdCAgfSBjYXRjaCAoZSkge1xuXHRcdCAgICBscyA9IHtcblx0XHQgICAgICBfZGF0YToge30sXG5cdFx0ICAgICAgc2V0SXRlbTogZnVuY3Rpb24gKGlkLCB2YWwpIHtcblx0XHQgICAgICAgIHRoaXMuX2RhdGFbaWRdID0gU3RyaW5nKHZhbCk7XG5cdFx0ICAgICAgfSxcblx0XHQgICAgICBnZXRJdGVtOiBmdW5jdGlvbiAoaWQpIHtcblx0XHQgICAgICAgIHJldHVybiB0aGlzLl9kYXRhLmhhc093blByb3BlcnR5KGlkKSA/IHRoaXMuX2RhdGFbaWRdIDogdW5kZWZpbmVkO1xuXHRcdCAgICAgIH0sXG5cdFx0ICAgICAgcmVtb3ZlSXRlbTogZnVuY3Rpb24gKGlkKSB7XG5cdFx0ICAgICAgICByZXR1cm4gZGVsZXRlIHRoaXMuX2RhdGFbaWRdO1xuXHRcdCAgICAgIH0sXG5cdFx0ICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgIHRoaXMuX2RhdGEgPSB7fTtcblx0XHQgICAgICB9XG5cdFx0ICAgIH07XG5cdFx0ICB9XG5cdFx0ICByZXR1cm4ge1xuXHRcdCAgICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcblx0XHQgICAgICB0cnkge1xuXHRcdCAgICAgICAgaWYgKGxzKSByZXR1cm4gbHMuZ2V0SXRlbShrZXkpO1xuXHRcdCAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKGtleSkgPT09IC0xKSByZXR1cm4gbnVsbDtcblx0XHQgICAgICAgIHJldHVybiAoKGRvY3VtZW50LmNvb2tpZSB8fCAnJykubWF0Y2goXG5cdFx0ICAgICAgICAgICAgUmVnRXhwKGtleSArICc9KFteO10rKScpXG5cdFx0ICAgICAgICAgICkgfHwgW10pWzFdIHx8IG51bGw7XG5cdFx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHRcdCAgICAgICAgcmV0dXJuO1xuXHRcdCAgICAgIH1cblx0XHQgICAgfSxcblx0XHQgICAgc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRcdCAgICAgIHRyeSB7XG5cdFx0ICAgICAgICBpZiAobHMpIHJldHVybiBscy5zZXRJdGVtKGtleSwgdmFsdWUpICYmIDA7XG5cdFx0ICAgICAgICBkb2N1bWVudC5jb29raWUgPSBrZXkgKyAnPScgKyB2YWx1ZSArXG5cdFx0ICAgICAgICAgICc7IGV4cGlyZXM9VGh1LCAxIEF1ZyAyMDMwIDIwOjAwOjAwIFVUQzsgcGF0aD0vJztcblx0XHQgICAgICB9IGNhdGNoIChlKSB7XG5cdFx0ICAgICAgICByZXR1cm47XG5cdFx0ICAgICAgfVxuXHRcdCAgICB9XG5cdFx0ICB9O1xuXHRcdH0pKCk7XG5cdFxuXHRcblx0XHQvKipcblx0XHQgKiBDT1JTIFhIUiBSZXF1ZXN0XG5cdFx0ICogPT09PT09PT09PT09PT09PVxuXHRcdCAqICB4ZHIoe1xuXHRcdCAqICAgICB1cmwgICAgIDogWydodHRwOi8vd3d3LmJsYWguY29tL3VybCddLFxuXHRcdCAqICAgICBzdWNjZXNzIDogZnVuY3Rpb24ocmVzcG9uc2UpIHt9LFxuXHRcdCAqICAgICBmYWlsICAgIDogZnVuY3Rpb24oKSB7fVxuXHRcdCAqICB9KTtcblx0XHQgKi9cblx0XHRmdW5jdGlvbiB4ZHIoc2V0dXApIHtcblx0XHQgIHZhciB4aHI7XG5cdFx0ICB2YXIgdGltZXI7XG5cdFx0ICB2YXIgY29tcGxldGUgPSAwO1xuXHRcdCAgdmFyIGxvYWRlZCA9IDA7XG5cdFx0ICB2YXIgYXN5bmMgPSB0cnVlOyAvKiBkbyBub3QgYWxsb3cgc3luYyBvcGVyYXRpb25zIGluIG1vZGVybiBidWlsZHMgKi9cblx0XHQgIHZhciB4aHJ0bWUgPSBzZXR1cC50aW1lb3V0IHx8IHB1Yk51YkNvcmUuREVGX1RJTUVPVVQ7XG5cdFx0ICB2YXIgZGF0YSA9IHNldHVwLmRhdGEgfHwge307XG5cdFx0ICB2YXIgZmFpbCA9IHNldHVwLmZhaWwgfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICB2YXIgc3VjY2VzcyA9IHNldHVwLnN1Y2Nlc3MgfHwgZnVuY3Rpb24gKCkge307XG5cdFxuXHRcdCAgdmFyIGRvbmUgPSBmdW5jdGlvbiAoZmFpbGVkLCByZXNwb25zZSkge1xuXHRcdCAgICBpZiAoY29tcGxldGUpIHJldHVybjtcblx0XHQgICAgY29tcGxldGUgPSAxO1xuXHRcblx0XHQgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XG5cdFx0ICAgIGlmICh4aHIpIHtcblx0XHQgICAgICB4aHIub25lcnJvciA9IHhoci5vbmxvYWQgPSBudWxsO1xuXHRcdCAgICAgIGlmICh4aHIuYWJvcnQpIHhoci5hYm9ydCgpO1xuXHRcdCAgICAgIHhociA9IG51bGw7XG5cdFx0ICAgIH1cblx0XG5cdFx0ICAgIGlmIChmYWlsZWQpIGZhaWwocmVzcG9uc2UpO1xuXHRcdCAgfTtcblx0XG5cdFx0ICB2YXIgZmluaXNoZWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgIGlmIChsb2FkZWQpIHJldHVybjtcblx0XHQgICAgdmFyIHJlc3BvbnNlO1xuXHRcdCAgICBsb2FkZWQgPSAxO1xuXHRcblx0XHQgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XG5cdFx0ICAgIHRyeSB7XG5cdFx0ICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuXHRcdCAgICB9IGNhdGNoIChyKSB7XG5cdFx0ICAgICAgcmV0dXJuIGRvbmUoMSk7XG5cdFx0ICAgIH1cblx0XG5cdFx0ICAgIHN1Y2Nlc3MocmVzcG9uc2UpO1xuXHRcdCAgfTtcblx0XG5cdFx0ICB0aW1lciA9IHB1Yk51YkNvcmUudGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0ICAgIGRvbmUoMSk7XG5cdFx0ICB9LCB4aHJ0bWUpO1xuXHRcblx0XHQgIC8vIFNlbmRcblx0XHQgIHRyeSB7XG5cdFx0ICAgIHhociA9IHR5cGVvZiBYRG9tYWluUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0XHQgICAgICBuZXcgWERvbWFpblJlcXVlc3QoKSB8fFxuXHRcdCAgICAgIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcblx0XHQgICAgeGhyLm9uZXJyb3IgPSB4aHIub25hYm9ydCA9IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICBkb25lKDEsIHhoci5yZXNwb25zZVRleHQgfHwgeyBlcnJvcjogJ05ldHdvcmsgQ29ubmVjdGlvbiBFcnJvcicgfSk7XG5cdFx0ICAgIH07XG5cdFx0ICAgIHhoci5vbmxvYWQgPSB4aHIub25sb2FkZW5kID0gZmluaXNoZWQ7XG5cdFxuXHRcdCAgICB2YXIgdXJsID0gcHViTnViQ29yZS5idWlsZF91cmwoc2V0dXAudXJsLCBkYXRhKTtcblx0XHQgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgYXN5bmMpO1xuXHRcdCAgICBpZiAoYXN5bmMpIHhoci50aW1lb3V0ID0geGhydG1lO1xuXHRcdCAgICB4aHIuc2VuZCgpO1xuXHRcdCAgfSBjYXRjaCAoZWVlKSB7XG5cdFx0ICAgIGRvbmUoMSwgeyBlcnJvcjogJ1hIUiBGYWlsZWQnLCBzdGFja3RyYWNlOiBlZWUgfSk7XG5cdFx0ICB9XG5cdFxuXHRcdCAgLy8gUmV0dXJuICdkb25lJ1xuXHRcdCAgcmV0dXJuIGRvbmU7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBCSU5EXG5cdFx0ICogPT09PVxuXHRcdCAqIGJpbmQoICdrZXlkb3duJywgc2VhcmNoKCdhJylbMF0sIGZ1bmN0aW9uKGVsZW1lbnQpIHtcblx0XHQgKiAgICAgLi4uXG5cdFx0ICogfSApO1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGJpbmQodHlwZSwgZWwsIGZ1bikge1xuXHRcdCAgcHViTnViQ29yZS5lYWNoKHR5cGUuc3BsaXQoJywnKSwgZnVuY3Rpb24gKGV0eXBlKSB7XG5cdFx0ICAgIHZhciByYXBmdW4gPSBmdW5jdGlvbiAoZSkge1xuXHRcdCAgICAgIGlmICghZSkgZSA9IHdpbmRvdy5ldmVudDtcblx0XHQgICAgICBpZiAoIWZ1bihlKSkge1xuXHRcdCAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXHRcdCAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuXHRcdCAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcblx0XHQgICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHQgICAgICB9XG5cdFx0ICAgIH07XG5cdFxuXHRcdCAgICBpZiAoZWwuYWRkRXZlbnRMaXN0ZW5lcikgZWwuYWRkRXZlbnRMaXN0ZW5lcihldHlwZSwgcmFwZnVuLCBmYWxzZSk7XG5cdFx0ICAgIGVsc2UgaWYgKGVsLmF0dGFjaEV2ZW50KSBlbC5hdHRhY2hFdmVudCgnb24nICsgZXR5cGUsIHJhcGZ1bik7XG5cdFx0ICAgIGVsc2UgZWxbJ29uJyArIGV0eXBlXSA9IHJhcGZ1bjtcblx0XHQgIH0pO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogRVJST1Jcblx0XHQgKiA9PT1cblx0XHQgKiBlcnJvcignbWVzc2FnZScpO1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UpIHtcblx0XHQgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogRVZFTlRTXG5cdFx0ICogPT09PT09XG5cdFx0ICogUFVCTlVCLmV2ZW50cy5iaW5kKCAneW91LXN0ZXBwZWQtb24tZmxvd2VyJywgZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdCAqICAgICAvLyBEbyBTdHVmZiB3aXRoIG1lc3NhZ2Vcblx0XHQgKiB9ICk7XG5cdFx0ICpcblx0XHQgKiBQVUJOVUIuZXZlbnRzLmZpcmUoICd5b3Utc3RlcHBlZC1vbi1mbG93ZXInLCBcIm1lc3NhZ2UtZGF0YVwiICk7XG5cdFx0ICogUFVCTlVCLmV2ZW50cy5maXJlKCAneW91LXN0ZXBwZWQtb24tZmxvd2VyJywge21lc3NhZ2U6XCJkYXRhXCJ9ICk7XG5cdFx0ICogUFVCTlVCLmV2ZW50cy5maXJlKCAneW91LXN0ZXBwZWQtb24tZmxvd2VyJywgWzEsMiwzXSApO1xuXHRcdCAqXG5cdFx0ICovXG5cdFx0dmFyIGV2ZW50cyA9IHtcblx0XHQgIGxpc3Q6IHt9LFxuXHRcdCAgdW5iaW5kOiBmdW5jdGlvbiAobmFtZSkge1xuXHRcdCAgICBldmVudHMubGlzdFtuYW1lXSA9IFtdO1xuXHRcdCAgfSxcblx0XHQgIGJpbmQ6IGZ1bmN0aW9uIChuYW1lLCBmdW4pIHtcblx0XHQgICAgKGV2ZW50cy5saXN0W25hbWVdID0gZXZlbnRzLmxpc3RbbmFtZV0gfHwgW10pLnB1c2goZnVuKTtcblx0XHQgIH0sXG5cdFx0ICBmaXJlOiBmdW5jdGlvbiAobmFtZSwgZGF0YSkge1xuXHRcdCAgICBwdWJOdWJDb3JlLmVhY2goXG5cdFx0ICAgICAgZXZlbnRzLmxpc3RbbmFtZV0gfHwgW10sXG5cdFx0ICAgICAgZnVuY3Rpb24gKGZ1bikge1xuXHRcdCAgICAgICAgZnVuKGRhdGEpO1xuXHRcdCAgICAgIH1cblx0XHQgICAgKTtcblx0XHQgIH1cblx0XHR9O1xuXHRcblx0XHQvKipcblx0XHQgKiBBVFRSXG5cdFx0ICogPT09PVxuXHRcdCAqIHZhciBhdHRyaWJ1dGUgPSBhdHRyKCBub2RlLCAnYXR0cmlidXRlJyApO1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuXHRcdCAgaWYgKHZhbHVlKSBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcblx0XHQgIGVsc2UgcmV0dXJuIG5vZGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqICRcblx0XHQgKiA9XG5cdFx0ICogdmFyIGRpdiA9ICQoJ2RpdmlkJyk7XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gJChpZCkge1xuXHRcdCAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcblx0XHR9XG5cdFxuXHRcblx0XHQvKipcblx0XHQgKiBTRUFSQ0hcblx0XHQgKiA9PT09PT1cblx0XHQgKiB2YXIgZWxlbWVudHMgPSBzZWFyY2goJ2EgZGl2IHNwYW4nKTtcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBzZWFyY2goZWxlbWVudHMsIHN0YXJ0KSB7XG5cdFx0ICB2YXIgbGlzdCA9IFtdO1xuXHRcdCAgcHViTnViQ29yZS5lYWNoKGVsZW1lbnRzLnNwbGl0KC9cXHMrLyksIGZ1bmN0aW9uIChlbCkge1xuXHRcdCAgICBwdWJOdWJDb3JlLmVhY2goKHN0YXJ0IHx8IGRvY3VtZW50KS5nZXRFbGVtZW50c0J5VGFnTmFtZShlbCksIGZ1bmN0aW9uIChub2RlKSB7XG5cdFx0ICAgICAgbGlzdC5wdXNoKG5vZGUpO1xuXHRcdCAgICB9KTtcblx0XHQgIH0pO1xuXHRcdCAgcmV0dXJuIGxpc3Q7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBDU1Ncblx0XHQgKiA9PT1cblx0XHQgKiB2YXIgb2JqID0gY3JlYXRlKCdkaXYnKTtcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBjc3MoZWxlbWVudCwgc3R5bGVzKSB7XG5cdFx0ICBmb3IgKHZhciBzdHlsZSBpbiBzdHlsZXMpIGlmIChzdHlsZXMuaGFzT3duUHJvcGVydHkoc3R5bGUpKVxuXHRcdCAgICB0cnkge1xuXHRcdCAgICAgIGVsZW1lbnQuc3R5bGVbc3R5bGVdID0gc3R5bGVzW3N0eWxlXSArIChcblx0XHQgICAgICAgICAgJ3x3aWR0aHxoZWlnaHR8dG9wfGxlZnR8Jy5pbmRleE9mKHN0eWxlKSA+IDAgJiZcblx0XHQgICAgICAgICAgdHlwZW9mIHN0eWxlc1tzdHlsZV0gPT09ICdudW1iZXInXG5cdFx0ICAgICAgICAgICAgPyAncHgnIDogJydcblx0XHQgICAgICAgICk7XG5cdFx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0XHQgICAgICByZXR1cm47XG5cdFx0ICAgIH1cblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIENSRUFURVxuXHRcdCAqID09PT09PVxuXHRcdCAqIHZhciBvYmogPSBjcmVhdGUoJ2RpdicpO1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGNyZWF0ZShlbGVtZW50KSB7XG5cdFx0ICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcblx0XHR9XG5cdFxuXHRcblx0XHRmdW5jdGlvbiBnZXRfaG1hY19TSEEyNTYoZGF0YSwga2V5KSB7XG5cdFx0ICB2YXIgaGFzaCA9IENyeXB0b0pTWydIbWFjU0hBMjU2J10oZGF0YSwga2V5KTtcblx0XHQgIHJldHVybiBoYXNoLnRvU3RyaW5nKENyeXB0b0pTWydlbmMnXVsnQmFzZTY0J10pO1xuXHRcdH1cblx0XG5cdFx0LyogPS09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS09ICovXG5cdFx0LyogPS09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS09ICovXG5cdFx0LyogPS09PT09PT09PT09PT09PT09PT09PT09PT09ICAgICBQVUJOVUIgICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PS09ICovXG5cdFx0LyogPS09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS09ICovXG5cdFx0LyogPS09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS09ICovXG5cdFxuXHRcdGZ1bmN0aW9uIENSRUFURV9QVUJOVUIoc2V0dXApIHtcblx0XHQgIHNldHVwLmRiID0gZGI7XG5cdFx0ICBzZXR1cC54ZHIgPSB4ZHI7XG5cdFx0ICBzZXR1cC5lcnJvciA9IHNldHVwLmVycm9yIHx8IGVycm9yO1xuXHRcdCAgc2V0dXAuaG1hY19TSEEyNTYgPSBnZXRfaG1hY19TSEEyNTY7XG5cdFx0ICBzZXR1cC5jcnlwdG9fb2JqID0gY3J5cHRvX29iaigpO1xuXHRcdCAgc2V0dXAuV1MgPSBXUztcblx0XHQgIHNldHVwLnNka19mYW1pbHkgPSAnTW9kZXJuJztcblx0XG5cdFx0ICB2YXIgU0VMRiA9IGZ1bmN0aW9uIChzZXR1cCkge1xuXHRcdCAgICByZXR1cm4gQ1JFQVRFX1BVQk5VQihzZXR1cCk7XG5cdFx0ICB9O1xuXHRcblx0XHQgIHZhciBQTiA9IHB1Yk51YkNvcmUuUE5fQVBJKHNldHVwKTtcblx0XHQgIGZvciAodmFyIHByb3AgaW4gUE4pIHtcblx0XHQgICAgaWYgKFBOLmhhc093blByb3BlcnR5KHByb3ApKSB7XG5cdFx0ICAgICAgU0VMRltwcm9wXSA9IFBOW3Byb3BdO1xuXHRcdCAgICB9XG5cdFx0ICB9XG5cdFxuXHRcdCAgU0VMRi5pbml0ID0gU0VMRjtcblx0XHQgIFNFTEYuJCA9ICQ7XG5cdFx0ICBTRUxGLmF0dHIgPSBhdHRyO1xuXHRcdCAgU0VMRi5zZWFyY2ggPSBzZWFyY2g7XG5cdFx0ICBTRUxGLmJpbmQgPSBiaW5kO1xuXHRcdCAgU0VMRi5jc3MgPSBjc3M7XG5cdFx0ICBTRUxGLmNyZWF0ZSA9IGNyZWF0ZTtcblx0XHQgIFNFTEYuY3J5cHRvX29iaiA9IGNyeXB0b19vYmooKTtcblx0XHQgIFNFTEYuV1MgPSBXUztcblx0XHQgIFNFTEYuUE5tZXNzYWdlID0gcHViTnViQ29yZS5QTm1lc3NhZ2U7XG5cdFx0ICBTRUxGLnN1cHBsYW50ID0gcHViTnViQ29yZS5zdXBwbGFudDtcblx0XG5cdFx0ICBpZiAodHlwZW9mKHdpbmRvdykgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0ICAgIGJpbmQoJ2JlZm9yZXVubG9hZCcsIHdpbmRvdywgZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgIFNFTEZbJ2VhY2gtY2hhbm5lbCddKGZ1bmN0aW9uIChjaCkge1xuXHRcdCAgICAgICAgU0VMRlsnTEVBVkUnXShjaC5uYW1lLCAxKTtcblx0XHQgICAgICB9KTtcblx0XHQgICAgICByZXR1cm4gdHJ1ZTtcblx0XHQgICAgfSk7XG5cdFx0ICB9XG5cdFxuXHRcdCAgU0VMRi5yZWFkeSgpO1xuXHRcblx0XHQgIC8vIFJldHVybiB3aXRob3V0IFRlc3Rpbmdcblx0XHQgIGlmIChzZXR1cC5ub3Rlc3QpIHJldHVybiBTRUxGO1xuXHRcblx0XHQgIGlmICh0eXBlb2Yod2luZG93KSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHQgICAgYmluZCgnb2ZmbGluZScsIHdpbmRvdywgU0VMRlsnb2ZmbGluZSddKTtcblx0XHQgIH1cblx0XG5cdFx0ICBpZiAodHlwZW9mKGRvY3VtZW50KSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHQgICAgYmluZCgnb2ZmbGluZScsIGRvY3VtZW50LCBTRUxGWydvZmZsaW5lJ10pO1xuXHRcdCAgfVxuXHRcblx0XHQgIHJldHVybiBTRUxGO1xuXHRcdH1cblx0XG5cdFx0Q1JFQVRFX1BVQk5VQi5pbml0ID0gQ1JFQVRFX1BVQk5VQjtcblx0XHRDUkVBVEVfUFVCTlVCLnNlY3VyZSA9IENSRUFURV9QVUJOVUI7XG5cdFx0Q1JFQVRFX1BVQk5VQi5jcnlwdG9fb2JqID0gY3J5cHRvX29iaigpO1xuXHRcdENSRUFURV9QVUJOVUIuV1MgPSBXUztcblx0XHRDUkVBVEVfUFVCTlVCLmRiID0gZGI7XG5cdFx0Q1JFQVRFX1BVQk5VQi5QTm1lc3NhZ2UgPSBwdWJOdWJDb3JlLlBObWVzc2FnZTtcblx0XHRDUkVBVEVfUFVCTlVCLnV1aWQgPSBwdWJOdWJDb3JlLnV1aWQ7XG5cdFxuXHRcdENSRUFURV9QVUJOVUIuY3NzID0gY3NzO1xuXHRcdENSRUFURV9QVUJOVUIuJCA9ICQ7XG5cdFx0Q1JFQVRFX1BVQk5VQi5jcmVhdGUgPSAkO1xuXHRcdENSRUFURV9QVUJOVUIuYmluZCA9IGJpbmQ7XG5cdFx0Q1JFQVRFX1BVQk5VQi5zZWFyY2ggPSBzZWFyY2g7XG5cdFx0Q1JFQVRFX1BVQk5VQi5hdHRyID0gYXR0cjtcblx0XHRDUkVBVEVfUFVCTlVCLmV2ZW50cyA9IGV2ZW50cztcblx0XG5cdFx0Q1JFQVRFX1BVQk5VQi5tYXAgPSBwdWJOdWJDb3JlLm1hcDtcblx0XHRDUkVBVEVfUFVCTlVCLmVhY2ggPSBwdWJOdWJDb3JlLmVhY2g7XG5cdFx0Q1JFQVRFX1BVQk5VQi5ncmVwID0gcHViTnViQ29yZS5ncmVwO1xuXHRcdENSRUFURV9QVUJOVUIuc3VwcGxhbnQgPSBwdWJOdWJDb3JlLnN1cHBsYW50O1xuXHRcdENSRUFURV9QVUJOVUIubm93ID0gcHViTnViQ29yZS5ub3c7XG5cdFx0Q1JFQVRFX1BVQk5VQi51bmlxdWUgPSBwdWJOdWJDb3JlLnVuaXF1ZTtcblx0XHRDUkVBVEVfUFVCTlVCLnVwZGF0ZXIgPSBwdWJOdWJDb3JlLnVwZGF0ZXI7XG5cdFxuXHRcdG1vZHVsZS5leHBvcnRzID0gQ1JFQVRFX1BVQk5VQjtcblx0XG5cdFxuXHQvKioqLyB9LFxuXHQvKiAxICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0XHQvKiBlc2xpbnQgY2FtZWxjYXNlOiAwLCBuby11c2UtYmVmb3JlLWRlZmluZTogMCwgbm8tdW51c2VkLWV4cHJlc3Npb25zOiAwICAqL1xuXHRcdC8qIGVzbGludCBlcWVxZXE6IDAsIG9uZS12YXI6IDAgKi9cblx0XHQvKiBlc2xpbnQgbm8tcmVkZWNsYXJlOiAwICovXG5cdFx0LyogZXNsaW50IGd1YXJkLWZvci1pbjogMCAqL1xuXHRcdC8qIGVzbGludCBibG9jay1zY29wZWQtdmFyOiAwIHNwYWNlLXJldHVybi10aHJvdy1jYXNlOiAwLCBuby11bnVzZWQtdmFyczogMCAqL1xuXHRcblx0XHR2YXIgcGFja2FnZUpTT04gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcdHZhciBkZWZhdWx0Q29uZmlndXJhdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdFx0dmFyIE5PVyA9IDE7XG5cdFx0dmFyIFJFQURZID0gZmFsc2U7XG5cdFx0dmFyIFJFQURZX0JVRkZFUiA9IFtdO1xuXHRcdHZhciBQUkVTRU5DRV9TVUZGSVggPSAnLXBucHJlcyc7XG5cdFx0dmFyIERFRl9XSU5ET1dJTkcgPSAxMDsgLy8gTUlMTElTRUNPTkRTLlxuXHRcdHZhciBERUZfVElNRU9VVCA9IDE1MDAwOyAvLyBNSUxMSVNFQ09ORFMuXG5cdFx0dmFyIERFRl9TVUJfVElNRU9VVCA9IDMxMDsgLy8gU0VDT05EUy5cblx0XHR2YXIgREVGX0tFRVBBTElWRSA9IDYwOyAvLyBTRUNPTkRTIChGT1IgVElNRVNZTkMpLlxuXHRcdHZhciBTRUNPTkQgPSAxMDAwOyAvLyBBIFRIT1VTQU5EIE1JTExJU0VDT05EUy5cblx0XHR2YXIgUFJFU0VOQ0VfSEJfVEhSRVNIT0xEID0gNTtcblx0XHR2YXIgUFJFU0VOQ0VfSEJfREVGQVVMVCA9IDMwO1xuXHRcdHZhciBTREtfVkVSID0gcGFja2FnZUpTT04udmVyc2lvbjtcblx0XG5cdFx0LyoqXG5cdFx0ICogVVRJTElUSUVTXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gdW5pcXVlKCkge1xuXHRcdCAgcmV0dXJuICd4JyArICsrTk9XICsgJycgKyAoK25ldyBEYXRlKTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIE5FWFRPUklHSU5cblx0XHQgKiA9PT09PT09PT09XG5cdFx0ICogdmFyIG5leHRfb3JpZ2luID0gbmV4dG9yaWdpbigpO1xuXHRcdCAqL1xuXHRcdHZhciBuZXh0b3JpZ2luID0gKGZ1bmN0aW9uICgpIHtcblx0XHQgIHZhciBtYXggPSAyMDtcblx0XHQgIHZhciBvcmkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpO1xuXHRcdCAgcmV0dXJuIGZ1bmN0aW9uIChvcmlnaW4sIGZhaWxvdmVyKSB7XG5cdFx0ICAgIHJldHVybiBvcmlnaW4uaW5kZXhPZigncHVic3ViLicpID4gMFxuXHRcdCAgICAgICYmIG9yaWdpbi5yZXBsYWNlKFxuXHRcdCAgICAgICAgJ3B1YnN1YicsICdwcycgKyAoXG5cdFx0ICAgICAgICAgIGZhaWxvdmVyID8gdXRpbHMuZ2VuZXJhdGVVVUlEKCkuc3BsaXQoJy0nKVswXSA6XG5cdFx0ICAgICAgICAgICAgKCsrb3JpIDwgbWF4ID8gb3JpIDogb3JpID0gMSlcblx0XHQgICAgICAgICkpIHx8IG9yaWdpbjtcblx0XHQgIH07XG5cdFx0fSkoKTtcblx0XG5cdFxuXHRcdC8qKlxuXHRcdCAqIEdlbmVyYXRlIFN1YnNjcmlwdGlvbiBDaGFubmVsIExpc3Rcblx0XHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0ICogZ2VuZXJhdGVfY2hhbm5lbF9saXN0KGNoYW5uZWxzX29iamVjdCk7XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZ2VuZXJhdGVfY2hhbm5lbF9saXN0KGNoYW5uZWxzLCBub3ByZXNlbmNlKSB7XG5cdFx0ICB2YXIgbGlzdCA9IFtdO1xuXHRcdCAgdXRpbHMuZWFjaChjaGFubmVscywgZnVuY3Rpb24gKGNoYW5uZWwsIHN0YXR1cykge1xuXHRcdCAgICBpZiAobm9wcmVzZW5jZSkge1xuXHRcdCAgICAgIGlmIChjaGFubmVsLnNlYXJjaCgnLXBucHJlcycpIDwgMCkge1xuXHRcdCAgICAgICAgaWYgKHN0YXR1cy5zdWJzY3JpYmVkKSBsaXN0LnB1c2goY2hhbm5lbCk7XG5cdFx0ICAgICAgfVxuXHRcdCAgICB9IGVsc2Uge1xuXHRcdCAgICAgIGlmIChzdGF0dXMuc3Vic2NyaWJlZCkgbGlzdC5wdXNoKGNoYW5uZWwpO1xuXHRcdCAgICB9XG5cdFx0ICB9KTtcblx0XHQgIHJldHVybiBsaXN0LnNvcnQoKTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIEdlbmVyYXRlIFN1YnNjcmlwdGlvbiBDaGFubmVsIEdyb3VwcyBMaXN0XG5cdFx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdCAqIGdlbmVyYXRlX2NoYW5uZWxfZ3JvdXBfbGlzdChjaGFubmVsc19ncm91cHMgb2JqZWN0KTtcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBnZW5lcmF0ZV9jaGFubmVsX2dyb3VwX2xpc3QoY2hhbm5lbF9ncm91cHMsIG5vcHJlc2VuY2UpIHtcblx0XHQgIHZhciBsaXN0ID0gW107XG5cdFx0ICB1dGlscy5lYWNoKGNoYW5uZWxfZ3JvdXBzLCBmdW5jdGlvbiAoY2hhbm5lbF9ncm91cCwgc3RhdHVzKSB7XG5cdFx0ICAgIGlmIChub3ByZXNlbmNlKSB7XG5cdFx0ICAgICAgaWYgKGNoYW5uZWxfZ3JvdXAuc2VhcmNoKCctcG5wcmVzJykgPCAwKSB7XG5cdFx0ICAgICAgICBpZiAoc3RhdHVzLnN1YnNjcmliZWQpIGxpc3QucHVzaChjaGFubmVsX2dyb3VwKTtcblx0XHQgICAgICB9XG5cdFx0ICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgaWYgKHN0YXR1cy5zdWJzY3JpYmVkKSBsaXN0LnB1c2goY2hhbm5lbF9ncm91cCk7XG5cdFx0ICAgIH1cblx0XHQgIH0pO1xuXHRcdCAgcmV0dXJuIGxpc3Quc29ydCgpO1xuXHRcdH1cblx0XG5cdFx0Ly8gUFVCTlVCIFJFQURZIFRPIENPTk5FQ1Rcblx0XHRmdW5jdGlvbiByZWFkeSgpIHtcblx0XHQgIGlmIChSRUFEWSkgcmV0dXJuO1xuXHRcdCAgUkVBRFkgPSAxO1xuXHRcdCAgdXRpbHMuZWFjaChSRUFEWV9CVUZGRVIsIGZ1bmN0aW9uIChjb25uZWN0KSB7XG5cdFx0ICAgIGNvbm5lY3QoKTtcblx0XHQgIH0pO1xuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gUE5tZXNzYWdlKGFyZ3MpIHtcblx0XHQgIHZhciBtc2cgPSBhcmdzIHx8IHsgYXBuczoge30gfTtcblx0XG5cdFx0ICBtc2dbJ2dldFB1Ym51Yk1lc3NhZ2UnXSA9IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgdmFyIG0gPSB7fTtcblx0XG5cdFx0ICAgIGlmIChPYmplY3Qua2V5cyhtc2dbJ2FwbnMnXSkubGVuZ3RoKSB7XG5cdFx0ICAgICAgbVsncG5fYXBucyddID0ge1xuXHRcdCAgICAgICAgYXBzOiB7XG5cdFx0ICAgICAgICAgIGFsZXJ0OiBtc2dbJ2FwbnMnXVsnYWxlcnQnXSxcblx0XHQgICAgICAgICAgYmFkZ2U6IG1zZ1snYXBucyddWydiYWRnZSddLFxuXHRcdCAgICAgICAgICBzb3VuZDogbXNnWydhcG5zJ11bJ3NvdW5kJ11cblx0XHQgICAgICAgIH1cblx0XHQgICAgICB9O1xuXHRcdCAgICAgIGZvciAodmFyIGsgaW4gbXNnWydhcG5zJ10pIHtcblx0XHQgICAgICAgIG1bJ3BuX2FwbnMnXVtrXSA9IG1zZ1snYXBucyddW2tdO1xuXHRcdCAgICAgIH1cblx0XHQgICAgICB2YXIgZXhjbHVkZTEgPSBbJ2JhZGdlJywgJ2FsZXJ0JywgJ3NvdW5kJ107XG5cdFx0ICAgICAgZm9yICh2YXIgayBpbiBleGNsdWRlMSkge1xuXHRcdCAgICAgICAgZGVsZXRlIG1bJ3BuX2FwbnMnXVtleGNsdWRlMVtrXV07XG5cdFx0ICAgICAgfVxuXHRcdCAgICB9XG5cdFxuXHRcdCAgICBpZiAobXNnWydnY20nXSkge1xuXHRcdCAgICAgIG1bJ3BuX2djbSddID0ge1xuXHRcdCAgICAgICAgZGF0YTogbXNnWydnY20nXVxuXHRcdCAgICAgIH07XG5cdFx0ICAgIH1cblx0XG5cdFx0ICAgIGZvciAodmFyIGsgaW4gbXNnKSB7XG5cdFx0ICAgICAgbVtrXSA9IG1zZ1trXTtcblx0XHQgICAgfVxuXHRcdCAgICB2YXIgZXhjbHVkZSA9IFsnYXBucycsICdnY20nLCAncHVibGlzaCcsICdjaGFubmVsJywgJ2NhbGxiYWNrJywgJ2Vycm9yJ107XG5cdFx0ICAgIGZvciAodmFyIGsgaW4gZXhjbHVkZSkge1xuXHRcdCAgICAgIGRlbGV0ZSBtW2V4Y2x1ZGVba11dO1xuXHRcdCAgICB9XG5cdFxuXHRcdCAgICByZXR1cm4gbTtcblx0XHQgIH07XG5cdFx0ICBtc2dbJ3B1Ymxpc2gnXSA9IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgdmFyIG0gPSBtc2cuZ2V0UHVibnViTWVzc2FnZSgpO1xuXHRcblx0XHQgICAgaWYgKG1zZ1sncHVibnViJ10gJiYgbXNnWydjaGFubmVsJ10pIHtcblx0XHQgICAgICBtc2dbJ3B1Ym51YiddLnB1Ymxpc2goe1xuXHRcdCAgICAgICAgbWVzc2FnZTogbSxcblx0XHQgICAgICAgIGNoYW5uZWw6IG1zZ1snY2hhbm5lbCddLFxuXHRcdCAgICAgICAgY2FsbGJhY2s6IG1zZ1snY2FsbGJhY2snXSxcblx0XHQgICAgICAgIGVycm9yOiBtc2dbJ2Vycm9yJ11cblx0XHQgICAgICB9KTtcblx0XHQgICAgfVxuXHRcdCAgfTtcblx0XHQgIHJldHVybiBtc2c7XG5cdFx0fVxuXHRcblx0XHRmdW5jdGlvbiBQTl9BUEkoc2V0dXApIHtcblx0XHQgIHZhciBTVUJfV0lORE9XSU5HID0gK3NldHVwWyd3aW5kb3dpbmcnXSB8fCBERUZfV0lORE9XSU5HO1xuXHRcdCAgdmFyIFNVQl9USU1FT1VUID0gKCtzZXR1cFsndGltZW91dCddIHx8IERFRl9TVUJfVElNRU9VVCkgKiBTRUNPTkQ7XG5cdFx0ICB2YXIgS0VFUEFMSVZFID0gKCtzZXR1cFsna2VlcGFsaXZlJ10gfHwgREVGX0tFRVBBTElWRSkgKiBTRUNPTkQ7XG5cdFx0ICB2YXIgVElNRV9DSEVDSyA9IHNldHVwWyd0aW1lY2hlY2snXSB8fCAwO1xuXHRcdCAgdmFyIE5PTEVBVkUgPSBzZXR1cFsnbm9sZWF2ZSddIHx8IDA7XG5cdFx0ICB2YXIgUFVCTElTSF9LRVkgPSBzZXR1cFsncHVibGlzaF9rZXknXTtcblx0XHQgIHZhciBTVUJTQ1JJQkVfS0VZID0gc2V0dXBbJ3N1YnNjcmliZV9rZXknXTtcblx0XHQgIHZhciBBVVRIX0tFWSA9IHNldHVwWydhdXRoX2tleSddIHx8ICcnO1xuXHRcdCAgdmFyIFNFQ1JFVF9LRVkgPSBzZXR1cFsnc2VjcmV0X2tleSddIHx8ICcnO1xuXHRcdCAgdmFyIGhtYWNfU0hBMjU2ID0gc2V0dXBbJ2htYWNfU0hBMjU2J107XG5cdFx0ICB2YXIgU1NMID0gc2V0dXBbJ3NzbCddID8gJ3MnIDogJyc7XG5cdFx0ICB2YXIgT1JJR0lOID0gJ2h0dHAnICsgU1NMICsgJzovLycgKyAoc2V0dXBbJ29yaWdpbiddIHx8ICdwdWJzdWIucHVibnViLmNvbScpO1xuXHRcdCAgdmFyIFNURF9PUklHSU4gPSBuZXh0b3JpZ2luKE9SSUdJTik7XG5cdFx0ICB2YXIgU1VCX09SSUdJTiA9IG5leHRvcmlnaW4oT1JJR0lOKTtcblx0XHQgIHZhciBDT05ORUNUID0gZnVuY3Rpb24gKCkge1xuXHRcdCAgfTtcblx0XHQgIHZhciBQVUJfUVVFVUUgPSBbXTtcblx0XHQgIHZhciBDTE9BSyA9IHRydWU7XG5cdFx0ICB2YXIgVElNRV9EUklGVCA9IDA7XG5cdFx0ICB2YXIgU1VCX0NBTExCQUNLID0gMDtcblx0XHQgIHZhciBTVUJfQ0hBTk5FTCA9IDA7XG5cdFx0ICB2YXIgU1VCX1JFQ0VJVkVSID0gMDtcblx0XHQgIHZhciBTVUJfUkVTVE9SRSA9IHNldHVwWydyZXN0b3JlJ10gfHwgMDtcblx0XHQgIHZhciBTVUJfQlVGRl9XQUlUID0gMDtcblx0XHQgIHZhciBUSU1FVE9LRU4gPSAwO1xuXHRcdCAgdmFyIFJFU1VNRUQgPSBmYWxzZTtcblx0XHQgIHZhciBDSEFOTkVMUyA9IHt9O1xuXHRcdCAgdmFyIENIQU5ORUxfR1JPVVBTID0ge307XG5cdFx0ICB2YXIgU1VCX0VSUk9SID0gZnVuY3Rpb24gKCkge1xuXHRcdCAgfTtcblx0XHQgIHZhciBTVEFURSA9IHt9O1xuXHRcdCAgdmFyIFBSRVNFTkNFX0hCX1RJTUVPVVQgPSBudWxsO1xuXHRcdCAgdmFyIFBSRVNFTkNFX0hCID0gdmFsaWRhdGVfcHJlc2VuY2VfaGVhcnRiZWF0KFxuXHRcdCAgICBzZXR1cFsnaGVhcnRiZWF0J10gfHwgc2V0dXBbJ3BuZXhwaXJlcyddIHx8IDAsIHNldHVwWydlcnJvciddXG5cdFx0ICApO1xuXHRcdCAgdmFyIFBSRVNFTkNFX0hCX0lOVEVSVkFMID0gc2V0dXBbJ2hlYXJ0YmVhdF9pbnRlcnZhbCddIHx8IChQUkVTRU5DRV9IQiAvIDIpIC0gMTtcblx0XHQgIHZhciBQUkVTRU5DRV9IQl9SVU5OSU5HID0gZmFsc2U7XG5cdFx0ICB2YXIgTk9fV0FJVF9GT1JfUEVORElORyA9IHNldHVwWydub193YWl0X2Zvcl9wZW5kaW5nJ107XG5cdFx0ICB2YXIgQ09NUEFUSUJMRV8zNSA9IHNldHVwWydjb21wYXRpYmxlXzMuNSddIHx8IGZhbHNlO1xuXHRcdCAgdmFyIHhkciA9IHNldHVwWyd4ZHInXTtcblx0XHQgIHZhciBwYXJhbXMgPSBzZXR1cFsncGFyYW1zJ10gfHwge307XG5cdFx0ICB2YXIgZXJyb3IgPSBzZXR1cFsnZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgIHZhciBfaXNfb25saW5lID0gc2V0dXBbJ19pc19vbmxpbmUnXSB8fCBmdW5jdGlvbiAoKSB7IHJldHVybiAxO307XG5cdFx0ICB2YXIganNvbnBfY2IgPSBzZXR1cFsnanNvbnBfY2InXSB8fCBmdW5jdGlvbiAoKSB7IHJldHVybiAwOyB9O1xuXHRcdCAgdmFyIGRiID0gc2V0dXBbJ2RiJ10gfHwgeyBnZXQ6IGZ1bmN0aW9uICgpIHt9LCBzZXQ6IGZ1bmN0aW9uICgpIHt9IH07XG5cdFx0ICB2YXIgQ0lQSEVSX0tFWSA9IHNldHVwWydjaXBoZXJfa2V5J107XG5cdFx0ICB2YXIgVVVJRCA9IHNldHVwWyd1dWlkJ10gfHwgKCFzZXR1cFsndW5pcXVlX3V1aWQnXSAmJiBkYiAmJiBkYlsnZ2V0J10oU1VCU0NSSUJFX0tFWSArICd1dWlkJykgfHwgJycpO1xuXHRcdCAgdmFyIFVTRV9JTlNUQU5DRUlEID0gc2V0dXBbJ2luc3RhbmNlX2lkJ10gfHwgZmFsc2U7XG5cdFx0ICB2YXIgUEFSVE5FUl9JRCA9IHNldHVwWydwYXJ0bmVyX2lkJ107XG5cdFx0ICB2YXIgU0RLX0ZBTUlMWSA9IHNldHVwWydzZGtfZmFtaWx5J107XG5cdFx0ICB2YXIgSU5TVEFOQ0VJRCA9ICcnO1xuXHRcdCAgdmFyIHNodXRkb3duID0gc2V0dXBbJ3NodXRkb3duJ107XG5cdFx0ICB2YXIgdXNlX3NlbmRfYmVhY29uID0gKHR5cGVvZiBzZXR1cFsndXNlX3NlbmRfYmVhY29uJ10gIT0gJ3VuZGVmaW5lZCcpID8gc2V0dXBbJ3VzZV9zZW5kX2JlYWNvbiddIDogdHJ1ZTtcblx0XHQgIHZhciBzZW5kQmVhY29uID0gKHVzZV9zZW5kX2JlYWNvbikgPyBzZXR1cFsnc2VuZEJlYWNvbiddIDogbnVsbDtcblx0XHQgIHZhciBfcG9sbF90aW1lcjtcblx0XHQgIHZhciBfcG9sbF90aW1lcjI7XG5cdFxuXHRcdCAgaWYgKFBSRVNFTkNFX0hCID09PSAyKSBQUkVTRU5DRV9IQl9JTlRFUlZBTCA9IDE7XG5cdFxuXHRcdCAgdmFyIGNyeXB0b19vYmogPSBzZXR1cFsnY3J5cHRvX29iaiddIHx8IHtcblx0XHQgICAgZW5jcnlwdDogZnVuY3Rpb24gKGEsIGtleSkge1xuXHRcdCAgICAgIHJldHVybiBhO1xuXHRcdCAgICB9LFxuXHRcdCAgICBkZWNyeXB0OiBmdW5jdGlvbiAoYiwga2V5KSB7XG5cdFx0ICAgICAgcmV0dXJuIGI7XG5cdFx0ICAgIH1cblx0XHQgIH07XG5cdFxuXHRcdCAgZnVuY3Rpb24gX3ByZXBhcmVDbGllbnRJZGVudGlmaWVyKCkge1xuXHRcdCAgICB2YXIgYmFzZSA9ICdQdWJOdWItSlMtJyArIFNES19GQU1JTFk7XG5cdFxuXHRcdCAgICBpZiAoUEFSVE5FUl9JRCkge1xuXHRcdCAgICAgIGJhc2UgKz0gJy0nICsgUEFSVE5FUl9JRDtcblx0XHQgICAgfVxuXHRcblx0XHQgICAgYmFzZSArPSAnLycgKyBTREtfVkVSO1xuXHRcdCAgICByZXR1cm4gYmFzZTtcblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiBfZ2V0X3VybF9wYXJhbXMoZGF0YSkge1xuXHRcdCAgICBpZiAoIWRhdGEpIGRhdGEgPSB7fTtcblx0XHQgICAgdXRpbHMuZWFjaChwYXJhbXMsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdFx0ICAgICAgaWYgKCEoa2V5IGluIGRhdGEpKSBkYXRhW2tleV0gPSB2YWx1ZTtcblx0XHQgICAgfSk7XG5cdFxuXHRcdCAgICAvLyBhZGQgUE5TREsgdG8gdGhlIG1peC5cblx0XHQgICAgZGF0YS5wbnNkayA9IF9wcmVwYXJlQ2xpZW50SWRlbnRpZmllcigpO1xuXHRcblx0XHQgICAgcmV0dXJuIGRhdGE7XG5cdFx0ICB9XG5cdFxuXHRcdCAgZnVuY3Rpb24gX29iamVjdF90b19rZXlfbGlzdChvKSB7XG5cdFx0ICAgIHZhciBsID0gW107XG5cdFx0ICAgIHV0aWxzLmVhY2gobywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0XHQgICAgICBsLnB1c2goa2V5KTtcblx0XHQgICAgfSk7XG5cdFx0ICAgIHJldHVybiBsO1xuXHRcdCAgfVxuXHRcblx0XHQgIGZ1bmN0aW9uIF9vYmplY3RfdG9fa2V5X2xpc3Rfc29ydGVkKG8pIHtcblx0XHQgICAgcmV0dXJuIF9vYmplY3RfdG9fa2V5X2xpc3Qobykuc29ydCgpO1xuXHRcdCAgfVxuXHRcblx0XHQgIGZ1bmN0aW9uIF9nZXRfcGFtX3NpZ25faW5wdXRfZnJvbV9wYXJhbXMocGFyYW1zKSB7XG5cdFx0ICAgIHZhciBzaSA9ICcnO1xuXHRcdCAgICB2YXIgbCA9IF9vYmplY3RfdG9fa2V5X2xpc3Rfc29ydGVkKHBhcmFtcyk7XG5cdFxuXHRcdCAgICBmb3IgKHZhciBpIGluIGwpIHtcblx0XHQgICAgICB2YXIgayA9IGxbaV07XG5cdFx0ICAgICAgc2kgKz0gayArICc9JyArIHV0aWxzLnBhbUVuY29kZShwYXJhbXNba10pO1xuXHRcdCAgICAgIGlmIChpICE9IGwubGVuZ3RoIC0gMSkgc2kgKz0gJyYnO1xuXHRcdCAgICB9XG5cdFx0ICAgIHJldHVybiBzaTtcblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiB2YWxpZGF0ZV9wcmVzZW5jZV9oZWFydGJlYXQoaGVhcnRiZWF0LCBjdXJfaGVhcnRiZWF0LCBlcnJvcikge1xuXHRcdCAgICB2YXIgZXJyID0gZmFsc2U7XG5cdFxuXHRcdCAgICBpZiAodHlwZW9mIGhlYXJ0YmVhdCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHQgICAgICByZXR1cm4gY3VyX2hlYXJ0YmVhdDtcblx0XHQgICAgfVxuXHRcblx0XHQgICAgaWYgKHR5cGVvZiBoZWFydGJlYXQgPT09ICdudW1iZXInKSB7XG5cdFx0ICAgICAgaWYgKGhlYXJ0YmVhdCA+IFBSRVNFTkNFX0hCX1RIUkVTSE9MRCB8fCBoZWFydGJlYXQgPT0gMCkge1xuXHRcdCAgICAgICAgZXJyID0gZmFsc2U7XG5cdFx0ICAgICAgfSBlbHNlIHtcblx0XHQgICAgICAgIGVyciA9IHRydWU7XG5cdFx0ICAgICAgfVxuXHRcdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBoZWFydGJlYXQgPT09ICdib29sZWFuJykge1xuXHRcdCAgICAgIGlmICghaGVhcnRiZWF0KSB7XG5cdFx0ICAgICAgICByZXR1cm4gMDtcblx0XHQgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgcmV0dXJuIFBSRVNFTkNFX0hCX0RFRkFVTFQ7XG5cdFx0ICAgICAgfVxuXHRcdCAgICB9IGVsc2Uge1xuXHRcdCAgICAgIGVyciA9IHRydWU7XG5cdFx0ICAgIH1cblx0XG5cdFx0ICAgIGlmIChlcnIpIHtcblx0XHQgICAgICBlcnJvciAmJiBlcnJvcignUHJlc2VuY2UgSGVhcnRiZWF0IHZhbHVlIGludmFsaWQuIFZhbGlkIHJhbmdlICggeCA+ICcgKyBQUkVTRU5DRV9IQl9USFJFU0hPTEQgKyAnIG9yIHggPSAwKS4gQ3VycmVudCBWYWx1ZSA6ICcgKyAoY3VyX2hlYXJ0YmVhdCB8fCBQUkVTRU5DRV9IQl9USFJFU0hPTEQpKTtcblx0XHQgICAgICByZXR1cm4gY3VyX2hlYXJ0YmVhdCB8fCBQUkVTRU5DRV9IQl9USFJFU0hPTEQ7XG5cdFx0ICAgIH0gZWxzZSByZXR1cm4gaGVhcnRiZWF0O1xuXHRcdCAgfVxuXHRcblx0XHQgIGZ1bmN0aW9uIGVuY3J5cHQoaW5wdXQsIGtleSkge1xuXHRcdCAgICByZXR1cm4gY3J5cHRvX29ialsnZW5jcnlwdCddKGlucHV0LCBrZXkgfHwgQ0lQSEVSX0tFWSkgfHwgaW5wdXQ7XG5cdFx0ICB9XG5cdFxuXHRcdCAgZnVuY3Rpb24gZGVjcnlwdChpbnB1dCwga2V5KSB7XG5cdFx0ICAgIHJldHVybiBjcnlwdG9fb2JqWydkZWNyeXB0J10oaW5wdXQsIGtleSB8fCBDSVBIRVJfS0VZKSB8fFxuXHRcdCAgICAgIGNyeXB0b19vYmpbJ2RlY3J5cHQnXShpbnB1dCwgQ0lQSEVSX0tFWSkgfHxcblx0XHQgICAgICBpbnB1dDtcblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiBlcnJvcl9jb21tb24obWVzc2FnZSwgY2FsbGJhY2spIHtcblx0XHQgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soeyBlcnJvcjogbWVzc2FnZSB8fCAnZXJyb3Igb2NjdXJyZWQnIH0pO1xuXHRcdCAgICBlcnJvciAmJiBlcnJvcihtZXNzYWdlKTtcblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiBfcHJlc2VuY2VfaGVhcnRiZWF0KCkge1xuXHRcdCAgICBjbGVhclRpbWVvdXQoUFJFU0VOQ0VfSEJfVElNRU9VVCk7XG5cdFxuXHRcdCAgICBpZiAoIVBSRVNFTkNFX0hCX0lOVEVSVkFMIHx8IFBSRVNFTkNFX0hCX0lOVEVSVkFMID49IDUwMCB8fFxuXHRcdCAgICAgIFBSRVNFTkNFX0hCX0lOVEVSVkFMIDwgMSB8fFxuXHRcdCAgICAgICghZ2VuZXJhdGVfY2hhbm5lbF9saXN0KENIQU5ORUxTLCB0cnVlKS5sZW5ndGggJiYgIWdlbmVyYXRlX2NoYW5uZWxfZ3JvdXBfbGlzdChDSEFOTkVMX0dST1VQUywgdHJ1ZSkubGVuZ3RoKSkge1xuXHRcdCAgICAgIFBSRVNFTkNFX0hCX1JVTk5JTkcgPSBmYWxzZTtcblx0XHQgICAgICByZXR1cm47XG5cdFx0ICAgIH1cblx0XG5cdFx0ICAgIFBSRVNFTkNFX0hCX1JVTk5JTkcgPSB0cnVlO1xuXHRcdCAgICBTRUxGWydwcmVzZW5jZV9oZWFydGJlYXQnXSh7XG5cdFx0ICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyKSB7XG5cdFx0ICAgICAgICBQUkVTRU5DRV9IQl9USU1FT1VUID0gdXRpbHMudGltZW91dChfcHJlc2VuY2VfaGVhcnRiZWF0LCAoUFJFU0VOQ0VfSEJfSU5URVJWQUwpICogU0VDT05EKTtcblx0XHQgICAgICB9LFxuXHRcdCAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkge1xuXHRcdCAgICAgICAgZXJyb3IgJiYgZXJyb3IoJ1ByZXNlbmNlIEhlYXJ0YmVhdCB1bmFibGUgdG8gcmVhY2ggUHVibnViIHNlcnZlcnMuJyArIEpTT04uc3RyaW5naWZ5KGUpKTtcblx0XHQgICAgICAgIFBSRVNFTkNFX0hCX1RJTUVPVVQgPSB1dGlscy50aW1lb3V0KF9wcmVzZW5jZV9oZWFydGJlYXQsIChQUkVTRU5DRV9IQl9JTlRFUlZBTCkgKiBTRUNPTkQpO1xuXHRcdCAgICAgIH1cblx0XHQgICAgfSk7XG5cdFx0ICB9XG5cdFxuXHRcdCAgZnVuY3Rpb24gc3RhcnRfcHJlc2VuY2VfaGVhcnRiZWF0KCkge1xuXHRcdCAgICAhUFJFU0VOQ0VfSEJfUlVOTklORyAmJiBfcHJlc2VuY2VfaGVhcnRiZWF0KCk7XG5cdFx0ICB9XG5cdFxuXHRcdCAgZnVuY3Rpb24gcHVibGlzaChuZXh0KSB7XG5cdFx0ICAgIGlmIChOT19XQUlUX0ZPUl9QRU5ESU5HKSB7XG5cdFx0ICAgICAgaWYgKCFQVUJfUVVFVUUubGVuZ3RoKSByZXR1cm47XG5cdFx0ICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgaWYgKG5leHQpIFBVQl9RVUVVRS5zZW5kaW5nID0gMDtcblx0XHQgICAgICBpZiAoUFVCX1FVRVVFLnNlbmRpbmcgfHwgIVBVQl9RVUVVRS5sZW5ndGgpIHJldHVybjtcblx0XHQgICAgICBQVUJfUVVFVUUuc2VuZGluZyA9IDE7XG5cdFx0ICAgIH1cblx0XG5cdFx0ICAgIGV4ZWN1dGVSZXF1ZXN0KFBVQl9RVUVVRS5zaGlmdCgpKTtcblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiBlYWNoX2NoYW5uZWxfZ3JvdXAoY2FsbGJhY2spIHtcblx0XHQgICAgdmFyIGNvdW50ID0gMDtcblx0XG5cdFx0ICAgIHV0aWxzLmVhY2goZ2VuZXJhdGVfY2hhbm5lbF9ncm91cF9saXN0KENIQU5ORUxfR1JPVVBTKSwgZnVuY3Rpb24gKGNoYW5uZWxfZ3JvdXApIHtcblx0XHQgICAgICB2YXIgY2hhbmcgPSBDSEFOTkVMX0dST1VQU1tjaGFubmVsX2dyb3VwXTtcblx0XG5cdFx0ICAgICAgaWYgKCFjaGFuZykgcmV0dXJuO1xuXHRcblx0XHQgICAgICBjb3VudCsrO1xuXHRcdCAgICAgIChjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgfSkoY2hhbmcpO1xuXHRcdCAgICB9KTtcblx0XG5cdFx0ICAgIHJldHVybiBjb3VudDtcblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiBlYWNoX2NoYW5uZWwoY2FsbGJhY2spIHtcblx0XHQgICAgdmFyIGNvdW50ID0gMDtcblx0XG5cdFx0ICAgIHV0aWxzLmVhY2goZ2VuZXJhdGVfY2hhbm5lbF9saXN0KENIQU5ORUxTKSwgZnVuY3Rpb24gKGNoYW5uZWwpIHtcblx0XHQgICAgICB2YXIgY2hhbiA9IENIQU5ORUxTW2NoYW5uZWxdO1xuXHRcblx0XHQgICAgICBpZiAoIWNoYW4pIHJldHVybjtcblx0XG5cdFx0ICAgICAgY291bnQrKztcblx0XHQgICAgICAoY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgIH0pKGNoYW4pO1xuXHRcdCAgICB9KTtcblx0XG5cdFx0ICAgIHJldHVybiBjb3VudDtcblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKSB7XG5cdFx0ICAgIGlmICh0eXBlb2YgcmVzcG9uc2UgPT0gJ29iamVjdCcpIHtcblx0XHQgICAgICBpZiAocmVzcG9uc2VbJ2Vycm9yJ10pIHtcblx0XHQgICAgICAgIHZhciBjYWxsYmFja19kYXRhID0ge307XG5cdFxuXHRcdCAgICAgICAgaWYgKHJlc3BvbnNlWydtZXNzYWdlJ10pIHtcblx0XHQgICAgICAgICAgY2FsbGJhY2tfZGF0YVsnbWVzc2FnZSddID0gcmVzcG9uc2VbJ21lc3NhZ2UnXTtcblx0XHQgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICBpZiAocmVzcG9uc2VbJ3BheWxvYWQnXSkge1xuXHRcdCAgICAgICAgICBjYWxsYmFja19kYXRhWydwYXlsb2FkJ10gPSByZXNwb25zZVsncGF5bG9hZCddO1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIGVyciAmJiBlcnIoY2FsbGJhY2tfZGF0YSk7XG5cdFx0ICAgICAgICByZXR1cm47XG5cdFx0ICAgICAgfVxuXHRcdCAgICAgIGlmIChyZXNwb25zZVsncGF5bG9hZCddKSB7XG5cdFx0ICAgICAgICBpZiAocmVzcG9uc2VbJ25leHRfcGFnZSddKSB7XG5cdFx0ICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3BvbnNlWydwYXlsb2FkJ10sIHJlc3BvbnNlWyduZXh0X3BhZ2UnXSk7XG5cdFx0ICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZVsncGF5bG9hZCddKTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICAgIHJldHVybjtcblx0XHQgICAgICB9XG5cdFx0ICAgIH1cblx0XHQgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UpO1xuXHRcdCAgfVxuXHRcblx0XHQgIGZ1bmN0aW9uIF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIGVycikge1xuXHRcdCAgICBpZiAodHlwZW9mIHJlc3BvbnNlID09ICdvYmplY3QnICYmIHJlc3BvbnNlWydlcnJvciddKSB7XG5cdFx0ICAgICAgdmFyIGNhbGxiYWNrX2RhdGEgPSB7fTtcblx0XG5cdFx0ICAgICAgaWYgKHJlc3BvbnNlWydtZXNzYWdlJ10pIHtcblx0XHQgICAgICAgIGNhbGxiYWNrX2RhdGFbJ21lc3NhZ2UnXSA9IHJlc3BvbnNlWydtZXNzYWdlJ107XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICBpZiAocmVzcG9uc2VbJ3BheWxvYWQnXSkge1xuXHRcdCAgICAgICAgY2FsbGJhY2tfZGF0YVsncGF5bG9hZCddID0gcmVzcG9uc2VbJ3BheWxvYWQnXTtcblx0XHQgICAgICB9XG5cdFxuXHRcdCAgICAgIGVyciAmJiBlcnIoY2FsbGJhY2tfZGF0YSk7XG5cdFx0ICAgICAgcmV0dXJuO1xuXHRcdCAgICB9IGVsc2Uge1xuXHRcdCAgICAgIGVyciAmJiBlcnIocmVzcG9uc2UpO1xuXHRcdCAgICB9XG5cdFx0ICB9XG5cdFxuXHRcdCAgLypcblx0XHQgICAgQWJzdHJhY3Rpb24gb3ZlciBYSFIgdG8gYWxsb3cgY29tbW9uIHBhcmFtZXRlciBtb2RpZmljYXRpb24gYmVmb3JlXG5cdFx0ICAgIGRpc3BhdGNoaW5nIHRvIHRoZSBuZXR3b3JraW5nIGxheWVyLlxuXHRcdCAgKi9cblx0XHQgIGZ1bmN0aW9uIGV4ZWN1dGVSZXF1ZXN0KHJlcXVlc3RDb25maWcpIHtcblx0XHQgICAgdmFyIG9wZXJhdGlvblR5cGUgPSByZXF1ZXN0Q29uZmlnWydvcGVyYXRpb24nXTtcblx0XHQgICAgdmFyIHRpbWVzdGFtcCA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcblx0XHQgICAgdmFyIHJlcXVlc3REYXRhID0gcmVxdWVzdENvbmZpZ1snZGF0YSddIHx8IHt9O1xuXHRcblx0XHQgICAgaWYgKFNFQ1JFVF9LRVkpIHtcblx0XHQgICAgICAvLyBkZWxldGUgdGhlIGF1dGgga2V5IGlmIGl0IGNvbWVzIHVwIGVtcHR5LlxuXHRcdCAgICAgIGlmICghcmVxdWVzdERhdGFbJ2F1dGgnXSkge1xuXHRcdCAgICAgICAgZGVsZXRlIHJlcXVlc3REYXRhWydhdXRoJ107XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICByZXF1ZXN0RGF0YVsndGltZXN0YW1wJ10gPSB0aW1lc3RhbXA7XG5cdFx0ICAgICAgdmFyIHNpZ25JbnB1dCA9IFNVQlNDUklCRV9LRVkgKyAnXFxuJyArIFBVQkxJU0hfS0VZICsgJ1xcbic7XG5cdFxuXHRcdCAgICAgIGlmIChvcGVyYXRpb25UeXBlID09PSAnUE5BY2Nlc3NNYW5hZ2VyR3JhbnQnKSB7XG5cdFx0ICAgICAgICBzaWduSW5wdXQgKz0gJ2dyYW50JyArICdcXG4nO1xuXHRcdCAgICAgIH0gZWxzZSBpZiAob3BlcmF0aW9uVHlwZSA9PT0gJ1BOQWNjZXNzTWFuYWdlckF1ZGl0Jykge1xuXHRcdCAgICAgICAgc2lnbklucHV0ICs9ICdhdWRpdCcgKyAnXFxuJztcblx0XHQgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgdmFyIG5ld1BhdGggPSByZXF1ZXN0Q29uZmlnWyd1cmwnXS5zbGljZSgpO1xuXHRcdCAgICAgICAgbmV3UGF0aC5zaGlmdCgpO1xuXHRcdCAgICAgICAgc2lnbklucHV0ICs9ICcvJyArIG5ld1BhdGguam9pbignLycpICsgJ1xcbic7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICBzaWduSW5wdXQgKz0gX2dldF9wYW1fc2lnbl9pbnB1dF9mcm9tX3BhcmFtcyhyZXF1ZXN0RGF0YSk7XG5cdFx0ICAgICAgdmFyIHNpZ25hdHVyZSA9IGhtYWNfU0hBMjU2KHNpZ25JbnB1dCwgU0VDUkVUX0tFWSk7XG5cdFxuXHRcdCAgICAgIHNpZ25hdHVyZSA9IHNpZ25hdHVyZS5yZXBsYWNlKC9cXCsvZywgJy0nKTtcblx0XHQgICAgICBzaWduYXR1cmUgPSBzaWduYXR1cmUucmVwbGFjZSgvXFwvL2csICdfJyk7XG5cdFxuXHRcdCAgICAgIHJlcXVlc3REYXRhWydzaWduYXR1cmUnXSA9IHNpZ25hdHVyZTtcblx0XHQgICAgICByZXF1ZXN0Q29uZmlnWydkYXRhJ10gPSByZXF1ZXN0RGF0YTtcblx0XHQgICAgfVxuXHRcblx0XHQgICAgcmV0dXJuIHhkcihyZXF1ZXN0Q29uZmlnKTtcblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiBDUihhcmdzLCBjYWxsYmFjaywgdXJsMSwgZGF0YSkge1xuXHRcdCAgICB2YXIgY2FsbGJhY2sgPSBhcmdzWydjYWxsYmFjayddIHx8IGNhbGxiYWNrO1xuXHRcdCAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBlcnJvcjtcblx0XHQgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblx0XG5cdFx0ICAgIGRhdGEgPSBkYXRhIHx8IHt9O1xuXHRcblx0XHQgICAgaWYgKCFkYXRhWydhdXRoJ10pIHtcblx0XHQgICAgICBkYXRhWydhdXRoJ10gPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHRcdCAgICB9XG5cdFxuXHRcdCAgICB2YXIgdXJsID0gW1xuXHRcdCAgICAgIFNURF9PUklHSU4sICd2MScsICdjaGFubmVsLXJlZ2lzdHJhdGlvbicsXG5cdFx0ICAgICAgJ3N1Yi1rZXknLCBTVUJTQ1JJQkVfS0VZXG5cdFx0ICAgIF07XG5cdFxuXHRcdCAgICB1cmwucHVzaC5hcHBseSh1cmwsIHVybDEpO1xuXHRcblx0XHQgICAgaWYgKGpzb25wKSBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cdFxuXHRcdCAgICBleGVjdXRlUmVxdWVzdCh7XG5cdFx0ICAgICAgY2FsbGJhY2s6IGpzb25wLFxuXHRcdCAgICAgIGRhdGE6IF9nZXRfdXJsX3BhcmFtcyhkYXRhKSxcblx0XHQgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHQgICAgICAgIF9pbnZva2VfY2FsbGJhY2socmVzcG9uc2UsIGNhbGxiYWNrLCBlcnIpO1xuXHRcdCAgICAgIH0sXG5cdFx0ICAgICAgZmFpbDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICBfaW52b2tlX2Vycm9yKHJlc3BvbnNlLCBlcnIpO1xuXHRcdCAgICAgIH0sXG5cdFx0ICAgICAgdXJsOiB1cmxcblx0XHQgICAgfSk7XG5cdFx0ICB9XG5cdFxuXHRcdCAgLy8gQW5ub3VuY2UgTGVhdmUgRXZlbnRcblx0XHQgIHZhciBTRUxGID0ge1xuXHRcdCAgICBMRUFWRTogZnVuY3Rpb24gKGNoYW5uZWwsIGJsb2NraW5nLCBhdXRoX2tleSwgY2FsbGJhY2ssIGVycm9yKSB7XG5cdFx0ICAgICAgdmFyIGRhdGEgPSB7IHV1aWQ6IFVVSUQsIGF1dGg6IGF1dGhfa2V5IHx8IEFVVEhfS0VZIH07XG5cdFx0ICAgICAgdmFyIG9yaWdpbiA9IG5leHRvcmlnaW4oT1JJR0lOKTtcblx0XHQgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIgZXJyID0gZXJyb3IgfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIHVybDtcblx0XHQgICAgICB2YXIgcGFyYW1zO1xuXHRcdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdFxuXHRcdCAgICAgIC8vIFByZXZlbnQgTGVhdmluZyBhIFByZXNlbmNlIENoYW5uZWxcblx0XHQgICAgICBpZiAoY2hhbm5lbC5pbmRleE9mKFBSRVNFTkNFX1NVRkZJWCkgPiAwKSByZXR1cm4gdHJ1ZTtcblx0XG5cdFxuXHRcdCAgICAgIGlmIChDT01QQVRJQkxFXzM1KSB7XG5cdFx0ICAgICAgICBpZiAoIVNTTCkgcmV0dXJuIGZhbHNlO1xuXHRcdCAgICAgICAgaWYgKGpzb25wID09ICcwJykgcmV0dXJuIGZhbHNlO1xuXHRcdCAgICAgIH1cblx0XG5cdFx0ICAgICAgaWYgKE5PTEVBVkUpIHJldHVybiBmYWxzZTtcblx0XG5cdFx0ICAgICAgaWYgKGpzb25wICE9ICcwJykgZGF0YVsnY2FsbGJhY2snXSA9IGpzb25wO1xuXHRcblx0XHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cdFxuXHRcdCAgICAgIHVybCA9IFtcblx0XHQgICAgICAgIG9yaWdpbiwgJ3YyJywgJ3ByZXNlbmNlJywgJ3N1Yl9rZXknLFxuXHRcdCAgICAgICAgU1VCU0NSSUJFX0tFWSwgJ2NoYW5uZWwnLCB1dGlscy5lbmNvZGUoY2hhbm5lbCksICdsZWF2ZSdcblx0XHQgICAgICBdO1xuXHRcblx0XHQgICAgICBwYXJhbXMgPSBfZ2V0X3VybF9wYXJhbXMoZGF0YSk7XG5cdFxuXHRcblx0XHQgICAgICBpZiAoc2VuZEJlYWNvbikge1xuXHRcdCAgICAgICAgdmFyIHVybF9zdHJpbmcgPSB1dGlscy5idWlsZFVSTCh1cmwsIHBhcmFtcyk7XG5cdFx0ICAgICAgICBpZiAoc2VuZEJlYWNvbih1cmxfc3RyaW5nKSkge1xuXHRcdCAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7IHN0YXR1czogMjAwLCBhY3Rpb246ICdsZWF2ZScsIG1lc3NhZ2U6ICdPSycsIHNlcnZpY2U6ICdQcmVzZW5jZScgfSk7XG5cdFx0ICAgICAgICAgIHJldHVybiB0cnVlO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgIH1cblx0XG5cdFxuXHRcdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0XHQgICAgICAgIGJsb2NraW5nOiBibG9ja2luZyB8fCBTU0wsXG5cdFx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdFx0ICAgICAgICBkYXRhOiBwYXJhbXMsXG5cdFx0ICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgX2ludm9rZV9jYWxsYmFjayhyZXNwb25zZSwgY2FsbGJhY2ssIGVycik7XG5cdFx0ICAgICAgICB9LFxuXHRcdCAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICAgIF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIGVycik7XG5cdFx0ICAgICAgICB9LFxuXHRcdCAgICAgICAgdXJsOiB1cmxcblx0XHQgICAgICB9KTtcblx0XHQgICAgICByZXR1cm4gdHJ1ZTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIExFQVZFX0dST1VQOiBmdW5jdGlvbiAoY2hhbm5lbF9ncm91cCwgYmxvY2tpbmcsIGF1dGhfa2V5LCBjYWxsYmFjaywgZXJyb3IpIHtcblx0XHQgICAgICB2YXIgZGF0YSA9IHsgdXVpZDogVVVJRCwgYXV0aDogYXV0aF9rZXkgfHwgQVVUSF9LRVkgfTtcblx0XHQgICAgICB2YXIgb3JpZ2luID0gbmV4dG9yaWdpbihPUklHSU4pO1xuXHRcdCAgICAgIHZhciB1cmw7XG5cdFx0ICAgICAgdmFyIHBhcmFtcztcblx0XHQgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIgZXJyID0gZXJyb3IgfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblx0XG5cdFx0ICAgICAgLy8gUHJldmVudCBMZWF2aW5nIGEgUHJlc2VuY2UgQ2hhbm5lbCBHcm91cFxuXHRcdCAgICAgIGlmIChjaGFubmVsX2dyb3VwLmluZGV4T2YoUFJFU0VOQ0VfU1VGRklYKSA+IDApIHJldHVybiB0cnVlO1xuXHRcblx0XHQgICAgICBpZiAoQ09NUEFUSUJMRV8zNSkge1xuXHRcdCAgICAgICAgaWYgKCFTU0wpIHJldHVybiBmYWxzZTtcblx0XHQgICAgICAgIGlmIChqc29ucCA9PSAnMCcpIHJldHVybiBmYWxzZTtcblx0XHQgICAgICB9XG5cdFxuXHRcdCAgICAgIGlmIChOT0xFQVZFKSByZXR1cm4gZmFsc2U7XG5cdFxuXHRcdCAgICAgIGlmIChqc29ucCAhPSAnMCcpIGRhdGFbJ2NhbGxiYWNrJ10gPSBqc29ucDtcblx0XG5cdFx0ICAgICAgaWYgKGNoYW5uZWxfZ3JvdXAgJiYgY2hhbm5lbF9ncm91cC5sZW5ndGggPiAwKSBkYXRhWydjaGFubmVsLWdyb3VwJ10gPSBjaGFubmVsX2dyb3VwO1xuXHRcblx0XHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cdFxuXHRcdCAgICAgIHVybCA9IFtcblx0XHQgICAgICAgIG9yaWdpbiwgJ3YyJywgJ3ByZXNlbmNlJywgJ3N1Yl9rZXknLFxuXHRcdCAgICAgICAgU1VCU0NSSUJFX0tFWSwgJ2NoYW5uZWwnLCB1dGlscy5lbmNvZGUoJywnKSwgJ2xlYXZlJ1xuXHRcdCAgICAgIF07XG5cdFxuXHRcdCAgICAgIHBhcmFtcyA9IF9nZXRfdXJsX3BhcmFtcyhkYXRhKTtcblx0XG5cdFx0ICAgICAgaWYgKHNlbmRCZWFjb24pIHtcblx0XHQgICAgICAgIHZhciB1cmxfc3RyaW5nID0gdXRpbHMuYnVpbGRVUkwodXJsLCBwYXJhbXMpO1xuXHRcdCAgICAgICAgaWYgKHNlbmRCZWFjb24odXJsX3N0cmluZykpIHtcblx0XHQgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soeyBzdGF0dXM6IDIwMCwgYWN0aW9uOiAnbGVhdmUnLCBtZXNzYWdlOiAnT0snLCBzZXJ2aWNlOiAnUHJlc2VuY2UnIH0pO1xuXHRcdCAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICB9XG5cdFxuXHRcdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0XHQgICAgICAgIGJsb2NraW5nOiBibG9ja2luZyB8fCBTU0wsXG5cdFx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdFx0ICAgICAgICBkYXRhOiBwYXJhbXMsXG5cdFx0ICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgX2ludm9rZV9jYWxsYmFjayhyZXNwb25zZSwgY2FsbGJhY2ssIGVycik7XG5cdFx0ICAgICAgICB9LFxuXHRcdCAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICAgIF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIGVycik7XG5cdFx0ICAgICAgICB9LFxuXHRcdCAgICAgICAgdXJsOiB1cmxcblx0XHQgICAgICB9KTtcblx0XHQgICAgICByZXR1cm4gdHJ1ZTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIHNldF9yZXN1bWVkOiBmdW5jdGlvbiAocmVzdW1lZCkge1xuXHRcdCAgICAgIFJFU1VNRUQgPSByZXN1bWVkO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgZ2V0X2NpcGhlcl9rZXk6IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICByZXR1cm4gQ0lQSEVSX0tFWTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIHNldF9jaXBoZXJfa2V5OiBmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ICAgICAgQ0lQSEVSX0tFWSA9IGtleTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIHJhd19lbmNyeXB0OiBmdW5jdGlvbiAoaW5wdXQsIGtleSkge1xuXHRcdCAgICAgIHJldHVybiBlbmNyeXB0KGlucHV0LCBrZXkpO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgcmF3X2RlY3J5cHQ6IGZ1bmN0aW9uIChpbnB1dCwga2V5KSB7XG5cdFx0ICAgICAgcmV0dXJuIGRlY3J5cHQoaW5wdXQsIGtleSk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICBnZXRfaGVhcnRiZWF0OiBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgcmV0dXJuIFBSRVNFTkNFX0hCO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgc2V0X2hlYXJ0YmVhdDogZnVuY3Rpb24gKGhlYXJ0YmVhdCwgaGVhcnRiZWF0X2ludGVydmFsKSB7XG5cdFx0ICAgICAgUFJFU0VOQ0VfSEIgPSB2YWxpZGF0ZV9wcmVzZW5jZV9oZWFydGJlYXQoaGVhcnRiZWF0LCBQUkVTRU5DRV9IQiwgZXJyb3IpO1xuXHRcdCAgICAgIFBSRVNFTkNFX0hCX0lOVEVSVkFMID0gaGVhcnRiZWF0X2ludGVydmFsIHx8IChQUkVTRU5DRV9IQiAvIDIpIC0gMTtcblx0XHQgICAgICBpZiAoUFJFU0VOQ0VfSEIgPT0gMikge1xuXHRcdCAgICAgICAgUFJFU0VOQ0VfSEJfSU5URVJWQUwgPSAxO1xuXHRcdCAgICAgIH1cblx0XHQgICAgICBDT05ORUNUKCk7XG5cdFx0ICAgICAgX3ByZXNlbmNlX2hlYXJ0YmVhdCgpO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgZ2V0X2hlYXJ0YmVhdF9pbnRlcnZhbDogZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgIHJldHVybiBQUkVTRU5DRV9IQl9JTlRFUlZBTDtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIHNldF9oZWFydGJlYXRfaW50ZXJ2YWw6IGZ1bmN0aW9uIChoZWFydGJlYXRfaW50ZXJ2YWwpIHtcblx0XHQgICAgICBQUkVTRU5DRV9IQl9JTlRFUlZBTCA9IGhlYXJ0YmVhdF9pbnRlcnZhbDtcblx0XHQgICAgICBfcHJlc2VuY2VfaGVhcnRiZWF0KCk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICBnZXRfdmVyc2lvbjogZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgIHJldHVybiBTREtfVkVSO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgZ2V0R2NtTWVzc2FnZU9iamVjdDogZnVuY3Rpb24gKG9iaikge1xuXHRcdCAgICAgIHJldHVybiB7XG5cdFx0ICAgICAgICBkYXRhOiBvYmpcblx0XHQgICAgICB9O1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgZ2V0QXBuc01lc3NhZ2VPYmplY3Q6IGZ1bmN0aW9uIChvYmopIHtcblx0XHQgICAgICB2YXIgeCA9IHtcblx0XHQgICAgICAgIGFwczogeyBiYWRnZTogMSwgYWxlcnQ6ICcnIH1cblx0XHQgICAgICB9O1xuXHRcdCAgICAgIGZvciAodmFyIGsgaW4gb2JqKSB7XG5cdFx0ICAgICAgICBrW3hdID0gb2JqW2tdO1xuXHRcdCAgICAgIH1cblx0XHQgICAgICByZXR1cm4geDtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIF9hZGRfcGFyYW06IGZ1bmN0aW9uIChrZXksIHZhbCkge1xuXHRcdCAgICAgIHBhcmFtc1trZXldID0gdmFsO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgY2hhbm5lbF9ncm91cDogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdFx0ICAgICAgdmFyIG5zX2NoID0gYXJnc1snY2hhbm5lbF9ncm91cCddO1xuXHRcdCAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGFyZ3NbJ2NhbGxiYWNrJ107XG5cdFx0ICAgICAgdmFyIGNoYW5uZWxzID0gYXJnc1snY2hhbm5lbHMnXSB8fCBhcmdzWydjaGFubmVsJ107XG5cdFx0ICAgICAgdmFyIGNsb2FrID0gYXJnc1snY2xvYWsnXTtcblx0XHQgICAgICB2YXIgbmFtZXNwYWNlO1xuXHRcdCAgICAgIHZhciBjaGFubmVsX2dyb3VwO1xuXHRcdCAgICAgIHZhciB1cmwgPSBbXTtcblx0XHQgICAgICB2YXIgZGF0YSA9IHt9O1xuXHRcdCAgICAgIHZhciBtb2RlID0gYXJnc1snbW9kZSddIHx8ICdhZGQnO1xuXHRcblx0XG5cdFx0ICAgICAgaWYgKG5zX2NoKSB7XG5cdFx0ICAgICAgICB2YXIgbnNfY2hfYSA9IG5zX2NoLnNwbGl0KCc6Jyk7XG5cdFxuXHRcdCAgICAgICAgaWYgKG5zX2NoX2EubGVuZ3RoID4gMSkge1xuXHRcdCAgICAgICAgICBuYW1lc3BhY2UgPSAobnNfY2hfYVswXSA9PT0gJyonKSA/IG51bGwgOiBuc19jaF9hWzBdO1xuXHRcblx0XHQgICAgICAgICAgY2hhbm5lbF9ncm91cCA9IG5zX2NoX2FbMV07XG5cdFx0ICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgICBjaGFubmVsX2dyb3VwID0gbnNfY2hfYVswXTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICB9XG5cdFxuXHRcdCAgICAgIG5hbWVzcGFjZSAmJiB1cmwucHVzaCgnbmFtZXNwYWNlJykgJiYgdXJsLnB1c2godXRpbHMuZW5jb2RlKG5hbWVzcGFjZSkpO1xuXHRcblx0XHQgICAgICB1cmwucHVzaCgnY2hhbm5lbC1ncm91cCcpO1xuXHRcblx0XHQgICAgICBpZiAoY2hhbm5lbF9ncm91cCAmJiBjaGFubmVsX2dyb3VwICE9PSAnKicpIHtcblx0XHQgICAgICAgIHVybC5wdXNoKGNoYW5uZWxfZ3JvdXApO1xuXHRcdCAgICAgIH1cblx0XG5cdFx0ICAgICAgaWYgKGNoYW5uZWxzKSB7XG5cdFx0ICAgICAgICBpZiAodXRpbHMuaXNBcnJheShjaGFubmVscykpIHtcblx0XHQgICAgICAgICAgY2hhbm5lbHMgPSBjaGFubmVscy5qb2luKCcsJyk7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICBkYXRhW21vZGVdID0gY2hhbm5lbHM7XG5cdFx0ICAgICAgICBkYXRhWydjbG9hayddID0gKENMT0FLKSA/ICd0cnVlJyA6ICdmYWxzZSc7XG5cdFx0ICAgICAgfSBlbHNlIHtcblx0XHQgICAgICAgIGlmIChtb2RlID09PSAncmVtb3ZlJykgdXJsLnB1c2goJ3JlbW92ZScpO1xuXHRcdCAgICAgIH1cblx0XG5cdFx0ICAgICAgaWYgKHR5cGVvZiBjbG9hayAhPSAndW5kZWZpbmVkJykgZGF0YVsnY2xvYWsnXSA9IChjbG9haykgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXHRcblx0XHQgICAgICBDUihhcmdzLCBjYWxsYmFjaywgdXJsLCBkYXRhKTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIGNoYW5uZWxfZ3JvdXBfbGlzdF9ncm91cHM6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHRcdCAgICAgIHZhciBuYW1lc3BhY2U7XG5cdFxuXHRcdCAgICAgIG5hbWVzcGFjZSA9IGFyZ3NbJ25hbWVzcGFjZSddIHx8IGFyZ3NbJ25zJ10gfHwgYXJnc1snY2hhbm5lbF9ncm91cCddIHx8IG51bGw7XG5cdFx0ICAgICAgaWYgKG5hbWVzcGFjZSkge1xuXHRcdCAgICAgICAgYXJnc1snY2hhbm5lbF9ncm91cCddID0gbmFtZXNwYWNlICsgJzoqJztcblx0XHQgICAgICB9XG5cdFxuXHRcdCAgICAgIFNFTEZbJ2NoYW5uZWxfZ3JvdXAnXShhcmdzLCBjYWxsYmFjayk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICBjaGFubmVsX2dyb3VwX2xpc3RfY2hhbm5lbHM6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHRcdCAgICAgIGlmICghYXJnc1snY2hhbm5lbF9ncm91cCddKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2hhbm5lbCBHcm91cCcpO1xuXHRcdCAgICAgIFNFTEZbJ2NoYW5uZWxfZ3JvdXAnXShhcmdzLCBjYWxsYmFjayk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICBjaGFubmVsX2dyb3VwX3JlbW92ZV9jaGFubmVsOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0XHQgICAgICBpZiAoIWFyZ3NbJ2NoYW5uZWxfZ3JvdXAnXSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENoYW5uZWwgR3JvdXAnKTtcblx0XHQgICAgICBpZiAoIWFyZ3NbJ2NoYW5uZWwnXSAmJiAhYXJnc1snY2hhbm5lbHMnXSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENoYW5uZWwnKTtcblx0XG5cdFx0ICAgICAgYXJnc1snbW9kZSddID0gJ3JlbW92ZSc7XG5cdFx0ICAgICAgU0VMRlsnY2hhbm5lbF9ncm91cCddKGFyZ3MsIGNhbGxiYWNrKTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIGNoYW5uZWxfZ3JvdXBfcmVtb3ZlX2dyb3VwOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0XHQgICAgICBpZiAoIWFyZ3NbJ2NoYW5uZWxfZ3JvdXAnXSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENoYW5uZWwgR3JvdXAnKTtcblx0XHQgICAgICBpZiAoYXJnc1snY2hhbm5lbCddKSByZXR1cm4gZXJyb3IoJ1VzZSBjaGFubmVsX2dyb3VwX3JlbW92ZV9jaGFubmVsIGlmIHlvdSB3YW50IHRvIHJlbW92ZSBhIGNoYW5uZWwgZnJvbSBhIGdyb3VwLicpO1xuXHRcblx0XHQgICAgICBhcmdzWydtb2RlJ10gPSAncmVtb3ZlJztcblx0XHQgICAgICBTRUxGWydjaGFubmVsX2dyb3VwJ10oYXJncywgY2FsbGJhY2spO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgY2hhbm5lbF9ncm91cF9hZGRfY2hhbm5lbDogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdFx0ICAgICAgaWYgKCFhcmdzWydjaGFubmVsX2dyb3VwJ10pIHJldHVybiBlcnJvcignTWlzc2luZyBDaGFubmVsIEdyb3VwJyk7XG5cdFx0ICAgICAgaWYgKCFhcmdzWydjaGFubmVsJ10gJiYgIWFyZ3NbJ2NoYW5uZWxzJ10pIHJldHVybiBlcnJvcignTWlzc2luZyBDaGFubmVsJyk7XG5cdFx0ICAgICAgU0VMRlsnY2hhbm5lbF9ncm91cCddKGFyZ3MsIGNhbGxiYWNrKTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIGNoYW5uZWxfZ3JvdXBfY2xvYWs6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHRcdCAgICAgIGlmICh0eXBlb2YgYXJnc1snY2xvYWsnXSA9PSAndW5kZWZpbmVkJykge1xuXHRcdCAgICAgICAgY2FsbGJhY2soQ0xPQUspO1xuXHRcdCAgICAgICAgcmV0dXJuO1xuXHRcdCAgICAgIH1cblx0XHQgICAgICBDTE9BSyA9IGFyZ3NbJ2Nsb2FrJ107XG5cdFx0ICAgICAgU0VMRlsnY2hhbm5lbF9ncm91cCddKGFyZ3MsIGNhbGxiYWNrKTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIGNoYW5uZWxfZ3JvdXBfbGlzdF9uYW1lc3BhY2VzOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0XHQgICAgICB2YXIgdXJsID0gWyduYW1lc3BhY2UnXTtcblx0XHQgICAgICBDUihhcmdzLCBjYWxsYmFjaywgdXJsKTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIGNoYW5uZWxfZ3JvdXBfcmVtb3ZlX25hbWVzcGFjZTogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdFx0ICAgICAgdmFyIHVybCA9IFsnbmFtZXNwYWNlJywgYXJnc1snbmFtZXNwYWNlJ10sICdyZW1vdmUnXTtcblx0XHQgICAgICBDUihhcmdzLCBjYWxsYmFjaywgdXJsKTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIC8qXG5cdFx0ICAgICBQVUJOVUIuaGlzdG9yeSh7XG5cdFx0ICAgICBjaGFubmVsICA6ICdteV9jaGF0X2NoYW5uZWwnLFxuXHRcdCAgICAgbGltaXQgICAgOiAxMDAsXG5cdFx0ICAgICBjYWxsYmFjayA6IGZ1bmN0aW9uKGhpc3RvcnkpIHsgfVxuXHRcdCAgICAgfSk7XG5cdFx0ICAgICAqL1xuXHRcdCAgICBoaXN0b3J5OiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0XHQgICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzWydjYWxsYmFjayddIHx8IGNhbGxiYWNrO1xuXHRcdCAgICAgIHZhciBjb3VudCA9IGFyZ3NbJ2NvdW50J10gfHwgYXJnc1snbGltaXQnXSB8fCAxMDA7XG5cdFx0ICAgICAgdmFyIHJldmVyc2UgPSBhcmdzWydyZXZlcnNlJ10gfHwgJ2ZhbHNlJztcblx0XHQgICAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHRcdCAgICAgIHZhciBjaXBoZXJfa2V5ID0gYXJnc1snY2lwaGVyX2tleSddO1xuXHRcdCAgICAgIHZhciBjaGFubmVsID0gYXJnc1snY2hhbm5lbCddO1xuXHRcdCAgICAgIHZhciBjaGFubmVsX2dyb3VwID0gYXJnc1snY2hhbm5lbF9ncm91cCddO1xuXHRcdCAgICAgIHZhciBzdGFydCA9IGFyZ3NbJ3N0YXJ0J107XG5cdFx0ICAgICAgdmFyIGVuZCA9IGFyZ3NbJ2VuZCddO1xuXHRcdCAgICAgIHZhciBpbmNsdWRlX3Rva2VuID0gYXJnc1snaW5jbHVkZV90b2tlbiddO1xuXHRcdCAgICAgIHZhciBzdHJpbmdfbXNnX3Rva2VuID0gYXJnc1snc3RyaW5nX21lc3NhZ2VfdG9rZW4nXSB8fCBmYWxzZTtcblx0XHQgICAgICB2YXIgcGFyYW1zID0ge307XG5cdFx0ICAgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblx0XG5cdFx0ICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBDaGFubmVsXG5cdFx0ICAgICAgaWYgKCFjaGFubmVsICYmICFjaGFubmVsX2dyb3VwKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2hhbm5lbCcpO1xuXHRcdCAgICAgIGlmICghY2FsbGJhY2spIHJldHVybiBlcnJvcignTWlzc2luZyBDYWxsYmFjaycpO1xuXHRcdCAgICAgIGlmICghU1VCU0NSSUJFX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFN1YnNjcmliZSBLZXknKTtcblx0XG5cdFx0ICAgICAgcGFyYW1zWydzdHJpbmd0b2tlbiddID0gJ3RydWUnO1xuXHRcdCAgICAgIHBhcmFtc1snY291bnQnXSA9IGNvdW50O1xuXHRcdCAgICAgIHBhcmFtc1sncmV2ZXJzZSddID0gcmV2ZXJzZTtcblx0XHQgICAgICBwYXJhbXNbJ2F1dGgnXSA9IGF1dGhfa2V5O1xuXHRcblx0XHQgICAgICBpZiAoY2hhbm5lbF9ncm91cCkge1xuXHRcdCAgICAgICAgcGFyYW1zWydjaGFubmVsLWdyb3VwJ10gPSBjaGFubmVsX2dyb3VwO1xuXHRcdCAgICAgICAgaWYgKCFjaGFubmVsKSB7XG5cdFx0ICAgICAgICAgIGNoYW5uZWwgPSAnLCc7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgfVxuXHRcdCAgICAgIGlmIChqc29ucCkgcGFyYW1zWydjYWxsYmFjayddID0ganNvbnA7XG5cdFx0ICAgICAgaWYgKHN0YXJ0KSBwYXJhbXNbJ3N0YXJ0J10gPSBzdGFydDtcblx0XHQgICAgICBpZiAoZW5kKSBwYXJhbXNbJ2VuZCddID0gZW5kO1xuXHRcdCAgICAgIGlmIChpbmNsdWRlX3Rva2VuKSBwYXJhbXNbJ2luY2x1ZGVfdG9rZW4nXSA9ICd0cnVlJztcblx0XHQgICAgICBpZiAoc3RyaW5nX21zZ190b2tlbikgcGFyYW1zWydzdHJpbmdfbWVzc2FnZV90b2tlbiddID0gJ3RydWUnO1xuXHRcblx0XHQgICAgICAvLyBTZW5kIE1lc3NhZ2Vcblx0XHQgICAgICBleGVjdXRlUmVxdWVzdCh7XG5cdFx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdFx0ICAgICAgICBkYXRhOiBfZ2V0X3VybF9wYXJhbXMocGFyYW1zKSxcblx0XHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlID09ICdvYmplY3QnICYmIHJlc3BvbnNlWydlcnJvciddKSB7XG5cdFx0ICAgICAgICAgICAgZXJyKHsgbWVzc2FnZTogcmVzcG9uc2VbJ21lc3NhZ2UnXSwgcGF5bG9hZDogcmVzcG9uc2VbJ3BheWxvYWQnXSB9KTtcblx0XHQgICAgICAgICAgICByZXR1cm47XG5cdFx0ICAgICAgICAgIH1cblx0XHQgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gcmVzcG9uc2VbMF07XG5cdFx0ICAgICAgICAgIHZhciBkZWNyeXB0ZWRfbWVzc2FnZXMgPSBbXTtcblx0XHQgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBtZXNzYWdlcy5sZW5ndGg7IGErKykge1xuXHRcdCAgICAgICAgICAgIGlmIChpbmNsdWRlX3Rva2VuKSB7XG5cdFx0ICAgICAgICAgICAgICB2YXIgbmV3X21lc3NhZ2UgPSBkZWNyeXB0KG1lc3NhZ2VzW2FdWydtZXNzYWdlJ10sIGNpcGhlcl9rZXkpO1xuXHRcdCAgICAgICAgICAgICAgdmFyIHRpbWV0b2tlbiA9IG1lc3NhZ2VzW2FdWyd0aW1ldG9rZW4nXTtcblx0XHQgICAgICAgICAgICAgIHRyeSB7XG5cdFx0ICAgICAgICAgICAgICAgIGRlY3J5cHRlZF9tZXNzYWdlc1sncHVzaCddKHsgbWVzc2FnZTogSlNPTlsncGFyc2UnXShuZXdfbWVzc2FnZSksIHRpbWV0b2tlbjogdGltZXRva2VuIH0pO1xuXHRcdCAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHRcdCAgICAgICAgICAgICAgICBkZWNyeXB0ZWRfbWVzc2FnZXNbJ3B1c2gnXSgoeyBtZXNzYWdlOiBuZXdfbWVzc2FnZSwgdGltZXRva2VuOiB0aW1ldG9rZW4gfSkpO1xuXHRcdCAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICB2YXIgbmV3X21lc3NhZ2UgPSBkZWNyeXB0KG1lc3NhZ2VzW2FdLCBjaXBoZXJfa2V5KTtcblx0XHQgICAgICAgICAgICAgIHRyeSB7XG5cdFx0ICAgICAgICAgICAgICAgIGRlY3J5cHRlZF9tZXNzYWdlc1sncHVzaCddKEpTT05bJ3BhcnNlJ10obmV3X21lc3NhZ2UpKTtcblx0XHQgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0XHQgICAgICAgICAgICAgICAgZGVjcnlwdGVkX21lc3NhZ2VzWydwdXNoJ10oKG5ld19tZXNzYWdlKSk7XG5cdFx0ICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICB9XG5cdFx0ICAgICAgICAgIGNhbGxiYWNrKFtkZWNyeXB0ZWRfbWVzc2FnZXMsIHJlc3BvbnNlWzFdLCByZXNwb25zZVsyXV0pO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBfaW52b2tlX2Vycm9yKHJlc3BvbnNlLCBlcnIpO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIHVybDogW1xuXHRcdCAgICAgICAgICBTVERfT1JJR0lOLCAndjInLCAnaGlzdG9yeScsICdzdWIta2V5Jyxcblx0XHQgICAgICAgICAgU1VCU0NSSUJFX0tFWSwgJ2NoYW5uZWwnLCB1dGlscy5lbmNvZGUoY2hhbm5lbClcblx0XHQgICAgICAgIF1cblx0XHQgICAgICB9KTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIC8qXG5cdFx0ICAgICBQVUJOVUIucmVwbGF5KHtcblx0XHQgICAgIHNvdXJjZSAgICAgIDogJ215X2NoYW5uZWwnLFxuXHRcdCAgICAgZGVzdGluYXRpb24gOiAnbmV3X2NoYW5uZWwnXG5cdFx0ICAgICB9KTtcblx0XHQgICAgICovXG5cdFx0ICAgIHJlcGxheTogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdFx0ICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgYXJnc1snY2FsbGJhY2snXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHRcdCAgICAgIHZhciBzb3VyY2UgPSBhcmdzWydzb3VyY2UnXTtcblx0XHQgICAgICB2YXIgZGVzdGluYXRpb24gPSBhcmdzWydkZXN0aW5hdGlvbiddO1xuXHRcdCAgICAgIHZhciBlcnIgPSBhcmdzWydlcnJvciddIHx8IGFyZ3NbJ2Vycm9yJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIHN0b3AgPSBhcmdzWydzdG9wJ107XG5cdFx0ICAgICAgdmFyIHN0YXJ0ID0gYXJnc1snc3RhcnQnXTtcblx0XHQgICAgICB2YXIgZW5kID0gYXJnc1snZW5kJ107XG5cdFx0ICAgICAgdmFyIHJldmVyc2UgPSBhcmdzWydyZXZlcnNlJ107XG5cdFx0ICAgICAgdmFyIGxpbWl0ID0gYXJnc1snbGltaXQnXTtcblx0XHQgICAgICB2YXIganNvbnAgPSBqc29ucF9jYigpO1xuXHRcdCAgICAgIHZhciBkYXRhID0ge307XG5cdFx0ICAgICAgdmFyIHVybDtcblx0XG5cdFx0ICAgICAgLy8gQ2hlY2sgVXNlciBJbnB1dFxuXHRcdCAgICAgIGlmICghc291cmNlKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU291cmNlIENoYW5uZWwnKTtcblx0XHQgICAgICBpZiAoIWRlc3RpbmF0aW9uKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgRGVzdGluYXRpb24gQ2hhbm5lbCcpO1xuXHRcdCAgICAgIGlmICghUFVCTElTSF9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBQdWJsaXNoIEtleScpO1xuXHRcdCAgICAgIGlmICghU1VCU0NSSUJFX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFN1YnNjcmliZSBLZXknKTtcblx0XG5cdFx0ICAgICAgLy8gU2V0dXAgVVJMIFBhcmFtc1xuXHRcdCAgICAgIGlmIChqc29ucCAhPSAnMCcpIGRhdGFbJ2NhbGxiYWNrJ10gPSBqc29ucDtcblx0XHQgICAgICBpZiAoc3RvcCkgZGF0YVsnc3RvcCddID0gJ2FsbCc7XG5cdFx0ICAgICAgaWYgKHJldmVyc2UpIGRhdGFbJ3JldmVyc2UnXSA9ICd0cnVlJztcblx0XHQgICAgICBpZiAoc3RhcnQpIGRhdGFbJ3N0YXJ0J10gPSBzdGFydDtcblx0XHQgICAgICBpZiAoZW5kKSBkYXRhWydlbmQnXSA9IGVuZDtcblx0XHQgICAgICBpZiAobGltaXQpIGRhdGFbJ2NvdW50J10gPSBsaW1pdDtcblx0XG5cdFx0ICAgICAgZGF0YVsnYXV0aCddID0gYXV0aF9rZXk7XG5cdFxuXHRcdCAgICAgIC8vIENvbXBvc2UgVVJMIFBhcnRzXG5cdFx0ICAgICAgdXJsID0gW1xuXHRcdCAgICAgICAgU1REX09SSUdJTiwgJ3YxJywgJ3JlcGxheScsXG5cdFx0ICAgICAgICBQVUJMSVNIX0tFWSwgU1VCU0NSSUJFX0tFWSxcblx0XHQgICAgICAgIHNvdXJjZSwgZGVzdGluYXRpb25cblx0XHQgICAgICBdO1xuXHRcblx0XHQgICAgICAvLyBTdGFydCAob3IgU3RvcCkgUmVwbGF5IVxuXHRcdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0XHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0XHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0XHQgICAgICAgIH0sXG5cdFx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICAgIGNhbGxiYWNrKFswLCAnRGlzY29ubmVjdGVkJ10pO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIHVybDogdXJsLFxuXHRcdCAgICAgICAgZGF0YTogX2dldF91cmxfcGFyYW1zKGRhdGEpXG5cdFx0ICAgICAgfSk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICAvKlxuXHRcdCAgICAgUFVCTlVCLmF1dGgoJ0FKRkxLQUpTREtMQScpO1xuXHRcdCAgICAgKi9cblx0XHQgICAgYXV0aDogZnVuY3Rpb24gKGF1dGgpIHtcblx0XHQgICAgICBBVVRIX0tFWSA9IGF1dGg7XG5cdFx0ICAgICAgQ09OTkVDVCgpO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgLypcblx0XHQgICAgIFBVQk5VQi50aW1lKGZ1bmN0aW9uKHRpbWUpeyB9KTtcblx0XHQgICAgICovXG5cdFx0ICAgIHRpbWU6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHRcdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdFxuXHRcdCAgICAgIHZhciBkYXRhID0geyB1dWlkOiBVVUlELCBhdXRoOiBBVVRIX0tFWSB9O1xuXHRcblx0XHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cdFxuXHRcdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0XHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0XHQgICAgICAgIGRhdGE6IF9nZXRfdXJsX3BhcmFtcyhkYXRhKSxcblx0XHQgICAgICAgIHVybDogW1NURF9PUklHSU4sICd0aW1lJywganNvbnBdLFxuXHRcdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICAgIGNhbGxiYWNrKHJlc3BvbnNlWzBdKTtcblx0XHQgICAgICAgIH0sXG5cdFx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICAgIGNhbGxiYWNrKDApO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgLypcblx0XHQgICAgIFBVQk5VQi5wdWJsaXNoKHtcblx0XHQgICAgIGNoYW5uZWwgOiAnbXlfY2hhdF9jaGFubmVsJyxcblx0XHQgICAgIG1lc3NhZ2UgOiAnaGVsbG8hJ1xuXHRcdCAgICAgfSk7XG5cdFx0ICAgICAqL1xuXHRcdCAgICBwdWJsaXNoOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0XHQgICAgICB2YXIgbXNnID0gYXJnc1snbWVzc2FnZSddO1xuXHRcdCAgICAgIGlmICghbXNnKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgTWVzc2FnZScpO1xuXHRcblx0XHQgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBhcmdzWydjYWxsYmFjayddIHx8IG1zZ1snY2FsbGJhY2snXSB8fCBhcmdzWydzdWNjZXNzJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIGNoYW5uZWwgPSBhcmdzWydjaGFubmVsJ10gfHwgbXNnWydjaGFubmVsJ107XG5cdFx0ICAgICAgdmFyIG1ldGEgPSBhcmdzWydtZXRhJ10gfHwgYXJnc1snbWV0YWRhdGEnXTtcblx0XHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHRcdCAgICAgIHZhciBjaXBoZXJfa2V5ID0gYXJnc1snY2lwaGVyX2tleSddO1xuXHRcdCAgICAgIHZhciBlcnIgPSBhcmdzWydlcnJvciddIHx8IG1zZ1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIgcG9zdCA9IGFyZ3NbJ3Bvc3QnXSB8fCBmYWxzZTtcblx0XHQgICAgICB2YXIgc3RvcmUgPSAoJ3N0b3JlX2luX2hpc3RvcnknIGluIGFyZ3MpID8gYXJnc1snc3RvcmVfaW5faGlzdG9yeSddIDogdHJ1ZTtcblx0XHQgICAgICB2YXIgcmVwbGljYXRlID0gKCdyZXBsaWNhdGUnIGluIGFyZ3MpID8gYXJnc1sncmVwbGljYXRlJ10gOiB0cnVlO1xuXHRcdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdFx0ICAgICAgdmFyIGFkZF9tc2cgPSAncHVzaCc7XG5cdFx0ICAgICAgdmFyIHBhcmFtcztcblx0XHQgICAgICB2YXIgdXJsO1xuXHRcblx0XHQgICAgICBpZiAoYXJnc1sncHJlcGVuZCddKSBhZGRfbXNnID0gJ3Vuc2hpZnQnO1xuXHRcblx0XHQgICAgICBpZiAoIWNoYW5uZWwpIHJldHVybiBlcnJvcignTWlzc2luZyBDaGFubmVsJyk7XG5cdFx0ICAgICAgaWYgKCFQVUJMSVNIX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFB1Ymxpc2ggS2V5Jyk7XG5cdFx0ICAgICAgaWYgKCFTVUJTQ1JJQkVfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU3Vic2NyaWJlIEtleScpO1xuXHRcblx0XHQgICAgICBpZiAobXNnWydnZXRQdWJudWJNZXNzYWdlJ10pIHtcblx0XHQgICAgICAgIG1zZyA9IG1zZ1snZ2V0UHVibnViTWVzc2FnZSddKCk7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICAvLyBJZiB0cnlpbmcgdG8gc2VuZCBPYmplY3Rcblx0XHQgICAgICBtc2cgPSBKU09OWydzdHJpbmdpZnknXShlbmNyeXB0KG1zZywgY2lwaGVyX2tleSkpO1xuXHRcblx0XHQgICAgICAvLyBDcmVhdGUgVVJMXG5cdFx0ICAgICAgdXJsID0gW1xuXHRcdCAgICAgICAgU1REX09SSUdJTiwgJ3B1Ymxpc2gnLFxuXHRcdCAgICAgICAgUFVCTElTSF9LRVksIFNVQlNDUklCRV9LRVksXG5cdFx0ICAgICAgICAwLCB1dGlscy5lbmNvZGUoY2hhbm5lbCksXG5cdFx0ICAgICAgICBqc29ucCwgdXRpbHMuZW5jb2RlKG1zZylcblx0XHQgICAgICBdO1xuXHRcblx0XHQgICAgICBwYXJhbXMgPSB7IHV1aWQ6IFVVSUQsIGF1dGg6IGF1dGhfa2V5IH07XG5cdFxuXHRcdCAgICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09PSAnb2JqZWN0Jykge1xuXHRcdCAgICAgICAgcGFyYW1zWydtZXRhJ10gPSBKU09OLnN0cmluZ2lmeShtZXRhKTtcblx0XHQgICAgICB9XG5cdFxuXHRcdCAgICAgIGlmICghc3RvcmUpIHBhcmFtc1snc3RvcmUnXSA9ICcwJztcblx0XHQgICAgICBpZiAoIXJlcGxpY2F0ZSkgcGFyYW1zWydub3JlcCddID0gJ3RydWUnO1xuXHRcblx0XHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIHBhcmFtc1snaW5zdGFuY2VpZCddID0gSU5TVEFOQ0VJRDtcblx0XG5cdFx0ICAgICAgLy8gUXVldWUgTWVzc2FnZSBTZW5kXG5cdFx0ICAgICAgUFVCX1FVRVVFW2FkZF9tc2ddKHtcblx0XHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0XHQgICAgICAgIHVybDogdXJsLFxuXHRcdCAgICAgICAgZGF0YTogX2dldF91cmxfcGFyYW1zKHBhcmFtcyksXG5cdFx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgX2ludm9rZV9lcnJvcihyZXNwb25zZSwgZXJyKTtcblx0XHQgICAgICAgICAgcHVibGlzaCgxKTtcblx0XHQgICAgICAgIH0sXG5cdFx0ICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgX2ludm9rZV9jYWxsYmFjayhyZXNwb25zZSwgY2FsbGJhY2ssIGVycik7XG5cdFx0ICAgICAgICAgIHB1Ymxpc2goMSk7XG5cdFx0ICAgICAgICB9LFxuXHRcdCAgICAgICAgbW9kZTogKHBvc3QpID8gJ1BPU1QnIDogJ0dFVCdcblx0XHQgICAgICB9KTtcblx0XG5cdFx0ICAgICAgLy8gU2VuZCBNZXNzYWdlXG5cdFx0ICAgICAgcHVibGlzaCgpO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgZmlyZTogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdFx0ICAgICAgYXJncy5zdG9yZV9pbl9oaXN0b3J5ID0gZmFsc2U7XG5cdFx0ICAgICAgYXJncy5yZXBsaWNhdGUgPSBmYWxzZTtcblx0XHQgICAgICBTRUxGWydwdWJsaXNoJ10oYXJncywgY2FsbGJhY2spO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgLypcblx0XHQgICAgIFBVQk5VQi51bnN1YnNjcmliZSh7IGNoYW5uZWwgOiAnbXlfY2hhdCcgfSk7XG5cdFx0ICAgICAqL1xuXHRcdCAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdFx0ICAgICAgdmFyIGNoYW5uZWxBcmcgPSBhcmdzWydjaGFubmVsJ107XG5cdFx0ICAgICAgdmFyIGNoYW5uZWxHcm91cEFyZyA9IGFyZ3NbJ2NoYW5uZWxfZ3JvdXAnXTtcblx0XHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHRcdCAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGFyZ3NbJ2NhbGxiYWNrJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIGVyciA9IGFyZ3NbJ2Vycm9yJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdFxuXHRcdCAgICAgIGlmICghY2hhbm5lbEFyZyAmJiAhY2hhbm5lbEdyb3VwQXJnKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2hhbm5lbCBvciBDaGFubmVsIEdyb3VwJyk7XG5cdFx0ICAgICAgaWYgKCFTVUJTQ1JJQkVfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU3Vic2NyaWJlIEtleScpO1xuXHRcblx0XHQgICAgICBpZiAoY2hhbm5lbEFyZykge1xuXHRcdCAgICAgICAgdmFyIGNoYW5uZWxzID0gdXRpbHMuaXNBcnJheShjaGFubmVsQXJnKSA/IGNoYW5uZWxBcmcgOiAoJycgKyBjaGFubmVsQXJnKS5zcGxpdCgnLCcpO1xuXHRcdCAgICAgICAgdmFyIGV4aXN0aW5nQ2hhbm5lbHMgPSBbXTtcblx0XHQgICAgICAgIHZhciBwcmVzZW5jZUNoYW5uZWxzID0gW107XG5cdFxuXHRcdCAgICAgICAgdXRpbHMuZWFjaChjaGFubmVscywgZnVuY3Rpb24gKGNoYW5uZWwpIHtcblx0XHQgICAgICAgICAgaWYgKENIQU5ORUxTW2NoYW5uZWxdKSBleGlzdGluZ0NoYW5uZWxzLnB1c2goY2hhbm5lbCk7XG5cdFx0ICAgICAgICB9KTtcblx0XG5cdFx0ICAgICAgICAvLyBpZiB3ZSBkbyBub3QgaGF2ZSBhbnkgY2hhbm5lbHMgdG8gdW5zdWJzY3JpYmUgZnJvbSwgdHJpZ2dlciBhIGNhbGxiYWNrLlxuXHRcdCAgICAgICAgaWYgKGV4aXN0aW5nQ2hhbm5lbHMubGVuZ3RoID09IDApIHtcblx0XHQgICAgICAgICAgY2FsbGJhY2soeyBhY3Rpb246ICdsZWF2ZScgfSk7XG5cdFx0ICAgICAgICAgIHJldHVybjtcblx0XHQgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAvLyBQcmVwYXJlIHByZXNlbmNlIGNoYW5uZWxzXG5cdFx0ICAgICAgICB1dGlscy5lYWNoKGV4aXN0aW5nQ2hhbm5lbHMsIGZ1bmN0aW9uIChjaGFubmVsKSB7XG5cdFx0ICAgICAgICAgIHByZXNlbmNlQ2hhbm5lbHMucHVzaChjaGFubmVsICsgUFJFU0VOQ0VfU1VGRklYKTtcblx0XHQgICAgICAgIH0pO1xuXHRcblx0XHQgICAgICAgIHV0aWxzLmVhY2goZXhpc3RpbmdDaGFubmVscy5jb25jYXQocHJlc2VuY2VDaGFubmVscyksIGZ1bmN0aW9uIChjaGFubmVsKSB7XG5cdFx0ICAgICAgICAgIGlmIChjaGFubmVsIGluIENIQU5ORUxTKSBkZWxldGUgQ0hBTk5FTFNbY2hhbm5lbF07XG5cdFx0ICAgICAgICAgIGlmIChjaGFubmVsIGluIFNUQVRFKSBkZWxldGUgU1RBVEVbY2hhbm5lbF07XG5cdFx0ICAgICAgICB9KTtcblx0XG5cdFx0ICAgICAgICBpZiAoQ0hBTk5FTFMubGVuZ3RoID09PSAwICYmIENIQU5ORUxfR1JPVVBTLmxlbmd0aCA9PT0gMCkge1xuXHRcdCAgICAgICAgICBUSU1FVE9LRU4gPSAwO1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIHZhciBDQl9DQUxMRUQgPSB0cnVlO1xuXHRcdCAgICAgICAgaWYgKFJFQURZKSB7XG5cdFx0ICAgICAgICAgIENCX0NBTExFRCA9IFNFTEZbJ0xFQVZFJ10oZXhpc3RpbmdDaGFubmVscy5qb2luKCcsJyksIDAsIGF1dGhfa2V5LCBjYWxsYmFjaywgZXJyKTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICAgIGlmICghQ0JfQ0FMTEVEKSBjYWxsYmFjayh7IGFjdGlvbjogJ2xlYXZlJyB9KTtcblx0XHQgICAgICB9XG5cdFxuXHRcdCAgICAgIGlmIChjaGFubmVsR3JvdXBBcmcpIHtcblx0XHQgICAgICAgIHZhciBjaGFubmVsR3JvdXBzID0gdXRpbHMuaXNBcnJheShjaGFubmVsR3JvdXBBcmcpID8gY2hhbm5lbEdyb3VwQXJnIDogKCcnICsgY2hhbm5lbEdyb3VwQXJnKS5zcGxpdCgnLCcpO1xuXHRcdCAgICAgICAgdmFyIGV4aXN0aW5nQ2hhbm5lbEdyb3VwcyA9IFtdO1xuXHRcdCAgICAgICAgdmFyIHByZXNlbmNlQ2hhbm5lbEdyb3VwcyA9IFtdO1xuXHRcblx0XHQgICAgICAgIHV0aWxzLmVhY2goY2hhbm5lbEdyb3VwcywgZnVuY3Rpb24gKGNoYW5uZWxHcm91cCkge1xuXHRcdCAgICAgICAgICBpZiAoQ0hBTk5FTF9HUk9VUFNbY2hhbm5lbEdyb3VwXSkgZXhpc3RpbmdDaGFubmVsR3JvdXBzLnB1c2goY2hhbm5lbEdyb3VwKTtcblx0XHQgICAgICAgIH0pO1xuXHRcblx0XHQgICAgICAgIC8vIGlmIHdlIGRvIG5vdCBoYXZlIGFueSBjaGFubmVsIGdyb3VwcyB0byB1bnN1YnNjcmliZSBmcm9tLCB0cmlnZ2VyIGEgY2FsbGJhY2suXG5cdFx0ICAgICAgICBpZiAoZXhpc3RpbmdDaGFubmVsR3JvdXBzLmxlbmd0aCA9PSAwKSB7XG5cdFx0ICAgICAgICAgIGNhbGxiYWNrKHsgYWN0aW9uOiAnbGVhdmUnIH0pO1xuXHRcdCAgICAgICAgICByZXR1cm47XG5cdFx0ICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgLy8gUHJlcGFyZSBwcmVzZW5jZSBjaGFubmVsc1xuXHRcdCAgICAgICAgdXRpbHMuZWFjaChleGlzdGluZ0NoYW5uZWxHcm91cHMsIGZ1bmN0aW9uIChjaGFubmVsR3JvdXApIHtcblx0XHQgICAgICAgICAgcHJlc2VuY2VDaGFubmVsR3JvdXBzLnB1c2goY2hhbm5lbEdyb3VwICsgUFJFU0VOQ0VfU1VGRklYKTtcblx0XHQgICAgICAgIH0pO1xuXHRcblx0XHQgICAgICAgIHV0aWxzLmVhY2goZXhpc3RpbmdDaGFubmVsR3JvdXBzLmNvbmNhdChwcmVzZW5jZUNoYW5uZWxHcm91cHMpLCBmdW5jdGlvbiAoY2hhbm5lbEdyb3VwKSB7XG5cdFx0ICAgICAgICAgIGlmIChjaGFubmVsR3JvdXAgaW4gQ0hBTk5FTF9HUk9VUFMpIGRlbGV0ZSBDSEFOTkVMX0dST1VQU1tjaGFubmVsR3JvdXBdO1xuXHRcdCAgICAgICAgICBpZiAoY2hhbm5lbEdyb3VwIGluIFNUQVRFKSBkZWxldGUgU1RBVEVbY2hhbm5lbEdyb3VwXTtcblx0XHQgICAgICAgIH0pO1xuXHRcblx0XHQgICAgICAgIGlmIChDSEFOTkVMUy5sZW5ndGggPT09IDAgJiYgQ0hBTk5FTF9HUk9VUFMubGVuZ3RoID09PSAwKSB7XG5cdFx0ICAgICAgICAgIFRJTUVUT0tFTiA9IDA7XG5cdFx0ICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgdmFyIENCX0NBTExFRCA9IHRydWU7XG5cdFx0ICAgICAgICBpZiAoUkVBRFkpIHtcblx0XHQgICAgICAgICAgQ0JfQ0FMTEVEID0gU0VMRlsnTEVBVkVfR1JPVVAnXShleGlzdGluZ0NoYW5uZWxHcm91cHMuam9pbignLCcpLCAwLCBhdXRoX2tleSwgY2FsbGJhY2ssIGVycik7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICBpZiAoIUNCX0NBTExFRCkgY2FsbGJhY2soeyBhY3Rpb246ICdsZWF2ZScgfSk7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICAvLyBSZXNldCBDb25uZWN0aW9uIGlmIENvdW50IExlc3Ncblx0XHQgICAgICBDT05ORUNUKCk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICAvKlxuXHRcdCAgICAgUFVCTlVCLnN1YnNjcmliZSh7XG5cdFx0ICAgICBjaGFubmVsICA6ICdteV9jaGF0J1xuXHRcdCAgICAgY2FsbGJhY2sgOiBmdW5jdGlvbihtZXNzYWdlKSB7IH1cblx0XHQgICAgIH0pO1xuXHRcdCAgICAgKi9cblx0XHQgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0XHQgICAgICB2YXIgY2hhbm5lbCA9IGFyZ3NbJ2NoYW5uZWwnXTtcblx0XHQgICAgICB2YXIgY2hhbm5lbF9ncm91cCA9IGFyZ3NbJ2NoYW5uZWxfZ3JvdXAnXTtcblx0XHQgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBhcmdzWydjYWxsYmFjayddO1xuXHRcdCAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGFyZ3NbJ21lc3NhZ2UnXTtcblx0XHQgICAgICB2YXIgY29ubmVjdCA9IGFyZ3NbJ2Nvbm5lY3QnXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIgcmVjb25uZWN0ID0gYXJnc1sncmVjb25uZWN0J10gfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIGRpc2Nvbm5lY3QgPSBhcmdzWydkaXNjb25uZWN0J10gfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIFNVQl9FUlJPUiA9IGFyZ3NbJ2Vycm9yJ10gfHwgU1VCX0VSUk9SIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHRcdCAgICAgIHZhciBpZGxlY2IgPSBhcmdzWydpZGxlJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIHByZXNlbmNlID0gYXJnc1sncHJlc2VuY2UnXSB8fCAwO1xuXHRcdCAgICAgIHZhciBub2hlcmVzeW5jID0gYXJnc1snbm9oZXJlc3luYyddIHx8IDA7XG5cdFx0ICAgICAgdmFyIGJhY2tmaWxsID0gYXJnc1snYmFja2ZpbGwnXSB8fCAwO1xuXHRcdCAgICAgIHZhciB0aW1ldG9rZW4gPSBhcmdzWyd0aW1ldG9rZW4nXSB8fCAwO1xuXHRcdCAgICAgIHZhciBzdWJfdGltZW91dCA9IGFyZ3NbJ3RpbWVvdXQnXSB8fCBTVUJfVElNRU9VVDtcblx0XHQgICAgICB2YXIgd2luZG93aW5nID0gYXJnc1snd2luZG93aW5nJ10gfHwgU1VCX1dJTkRPV0lORztcblx0XHQgICAgICB2YXIgc3RhdGUgPSBhcmdzWydzdGF0ZSddO1xuXHRcdCAgICAgIHZhciBoZWFydGJlYXQgPSBhcmdzWydoZWFydGJlYXQnXSB8fCBhcmdzWydwbmV4cGlyZXMnXTtcblx0XHQgICAgICB2YXIgaGVhcnRiZWF0X2ludGVydmFsID0gYXJnc1snaGVhcnRiZWF0X2ludGVydmFsJ107XG5cdFx0ICAgICAgdmFyIHJlc3RvcmUgPSBhcmdzWydyZXN0b3JlJ10gfHwgU1VCX1JFU1RPUkU7XG5cdFxuXHRcdCAgICAgIEFVVEhfS0VZID0gYXJnc1snYXV0aF9rZXknXSB8fCBBVVRIX0tFWTtcblx0XG5cdFx0ICAgICAgLy8gUmVzdG9yZSBFbmFibGVkP1xuXHRcdCAgICAgIFNVQl9SRVNUT1JFID0gcmVzdG9yZTtcblx0XG5cdFx0ICAgICAgLy8gQWx3YXlzIFJlc2V0IHRoZSBUVFxuXHRcdCAgICAgIFRJTUVUT0tFTiA9IHRpbWV0b2tlbjtcblx0XG5cdFx0ICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBDaGFubmVsXG5cdFx0ICAgICAgaWYgKCFjaGFubmVsICYmICFjaGFubmVsX2dyb3VwKSB7XG5cdFx0ICAgICAgICByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2hhbm5lbCcpO1xuXHRcdCAgICAgIH1cblx0XG5cdFx0ICAgICAgaWYgKCFjYWxsYmFjaykgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENhbGxiYWNrJyk7XG5cdFx0ICAgICAgaWYgKCFTVUJTQ1JJQkVfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU3Vic2NyaWJlIEtleScpO1xuXHRcblx0XHQgICAgICBpZiAoaGVhcnRiZWF0IHx8IGhlYXJ0YmVhdCA9PT0gMCB8fCBoZWFydGJlYXRfaW50ZXJ2YWwgfHwgaGVhcnRiZWF0X2ludGVydmFsID09PSAwKSB7XG5cdFx0ICAgICAgICBTRUxGWydzZXRfaGVhcnRiZWF0J10oaGVhcnRiZWF0LCBoZWFydGJlYXRfaW50ZXJ2YWwpO1xuXHRcdCAgICAgIH1cblx0XG5cdFx0ICAgICAgLy8gU2V0dXAgQ2hhbm5lbChzKVxuXHRcdCAgICAgIGlmIChjaGFubmVsKSB7XG5cdFx0ICAgICAgICB1dGlscy5lYWNoKChjaGFubmVsLmpvaW4gPyBjaGFubmVsLmpvaW4oJywnKSA6ICcnICsgY2hhbm5lbCkuc3BsaXQoJywnKSxcblx0XHQgICAgICAgICAgZnVuY3Rpb24gKGNoYW5uZWwpIHtcblx0XHQgICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSBDSEFOTkVMU1tjaGFubmVsXSB8fCB7fTtcblx0XG5cdFx0ICAgICAgICAgICAgLy8gU3RvcmUgQ2hhbm5lbCBTdGF0ZVxuXHRcdCAgICAgICAgICAgIENIQU5ORUxTW1NVQl9DSEFOTkVMID0gY2hhbm5lbF0gPSB7XG5cdFx0ICAgICAgICAgICAgICBuYW1lOiBjaGFubmVsLFxuXHRcdCAgICAgICAgICAgICAgY29ubmVjdGVkOiBzZXR0aW5ncy5jb25uZWN0ZWQsXG5cdFx0ICAgICAgICAgICAgICBkaXNjb25uZWN0ZWQ6IHNldHRpbmdzLmRpc2Nvbm5lY3RlZCxcblx0XHQgICAgICAgICAgICAgIHN1YnNjcmliZWQ6IDEsXG5cdFx0ICAgICAgICAgICAgICBjYWxsYmFjazogU1VCX0NBTExCQUNLID0gY2FsbGJhY2ssXG5cdFx0ICAgICAgICAgICAgICBjaXBoZXJfa2V5OiBhcmdzWydjaXBoZXJfa2V5J10sXG5cdFx0ICAgICAgICAgICAgICBjb25uZWN0OiBjb25uZWN0LFxuXHRcdCAgICAgICAgICAgICAgZGlzY29ubmVjdDogZGlzY29ubmVjdCxcblx0XHQgICAgICAgICAgICAgIHJlY29ubmVjdDogcmVjb25uZWN0XG5cdFx0ICAgICAgICAgICAgfTtcblx0XG5cdFx0ICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG5cdFx0ICAgICAgICAgICAgICBpZiAoY2hhbm5lbCBpbiBzdGF0ZSkge1xuXHRcdCAgICAgICAgICAgICAgICBTVEFURVtjaGFubmVsXSA9IHN0YXRlW2NoYW5uZWxdO1xuXHRcdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0XHQgICAgICAgICAgICAgICAgU1RBVEVbY2hhbm5lbF0gPSBzdGF0ZTtcblx0XHQgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgICAgIC8vIFByZXNlbmNlIEVuYWJsZWQ/XG5cdFx0ICAgICAgICAgICAgaWYgKCFwcmVzZW5jZSkgcmV0dXJuO1xuXHRcblx0XHQgICAgICAgICAgICAvLyBTdWJzY3JpYmUgUHJlc2VuY2UgQ2hhbm5lbFxuXHRcdCAgICAgICAgICAgIFNFTEZbJ3N1YnNjcmliZSddKHtcblx0XHQgICAgICAgICAgICAgIGNoYW5uZWw6IGNoYW5uZWwgKyBQUkVTRU5DRV9TVUZGSVgsXG5cdFx0ICAgICAgICAgICAgICBjYWxsYmFjazogcHJlc2VuY2UsXG5cdFx0ICAgICAgICAgICAgICByZXN0b3JlOiByZXN0b3JlXG5cdFx0ICAgICAgICAgICAgfSk7XG5cdFxuXHRcdCAgICAgICAgICAgIC8vIFByZXNlbmNlIFN1YnNjcmliZWQ/XG5cdFx0ICAgICAgICAgICAgaWYgKHNldHRpbmdzLnN1YnNjcmliZWQpIHJldHVybjtcblx0XG5cdFx0ICAgICAgICAgICAgLy8gU2VlIFdobydzIEhlcmUgTm93P1xuXHRcdCAgICAgICAgICAgIGlmIChub2hlcmVzeW5jKSByZXR1cm47XG5cdFx0ICAgICAgICAgICAgU0VMRlsnaGVyZV9ub3cnXSh7XG5cdFx0ICAgICAgICAgICAgICBjaGFubmVsOiBjaGFubmVsLFxuXHRcdCAgICAgICAgICAgICAgZGF0YTogX2dldF91cmxfcGFyYW1zKHsgdXVpZDogVVVJRCwgYXV0aDogQVVUSF9LRVkgfSksXG5cdFx0ICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGhlcmUpIHtcblx0XHQgICAgICAgICAgICAgICAgdXRpbHMuZWFjaCgndXVpZHMnIGluIGhlcmUgPyBoZXJlWyd1dWlkcyddIDogW10sIGZ1bmN0aW9uICh1aWQpIHtcblx0XHQgICAgICAgICAgICAgICAgICBwcmVzZW5jZSh7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdqb2luJyxcblx0XHQgICAgICAgICAgICAgICAgICAgIHV1aWQ6IHVpZCxcblx0XHQgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogTWF0aC5mbG9vcih1dGlscy5ybm93KCkgLyAxMDAwKSxcblx0XHQgICAgICAgICAgICAgICAgICAgIG9jY3VwYW5jeTogaGVyZVsnb2NjdXBhbmN5J10gfHwgMVxuXHRcdCAgICAgICAgICAgICAgICAgIH0sIGhlcmUsIGNoYW5uZWwpO1xuXHRcdCAgICAgICAgICAgICAgICB9KTtcblx0XHQgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICB9KTtcblx0XHQgICAgICAgICAgfSk7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICAvLyBTZXR1cCBDaGFubmVsIEdyb3Vwc1xuXHRcdCAgICAgIGlmIChjaGFubmVsX2dyb3VwKSB7XG5cdFx0ICAgICAgICB1dGlscy5lYWNoKChjaGFubmVsX2dyb3VwLmpvaW4gPyBjaGFubmVsX2dyb3VwLmpvaW4oJywnKSA6ICcnICsgY2hhbm5lbF9ncm91cCkuc3BsaXQoJywnKSxcblx0XHQgICAgICAgICAgZnVuY3Rpb24gKGNoYW5uZWxfZ3JvdXApIHtcblx0XHQgICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSBDSEFOTkVMX0dST1VQU1tjaGFubmVsX2dyb3VwXSB8fCB7fTtcblx0XG5cdFx0ICAgICAgICAgICAgQ0hBTk5FTF9HUk9VUFNbY2hhbm5lbF9ncm91cF0gPSB7XG5cdFx0ICAgICAgICAgICAgICBuYW1lOiBjaGFubmVsX2dyb3VwLFxuXHRcdCAgICAgICAgICAgICAgY29ubmVjdGVkOiBzZXR0aW5ncy5jb25uZWN0ZWQsXG5cdFx0ICAgICAgICAgICAgICBkaXNjb25uZWN0ZWQ6IHNldHRpbmdzLmRpc2Nvbm5lY3RlZCxcblx0XHQgICAgICAgICAgICAgIHN1YnNjcmliZWQ6IDEsXG5cdFx0ICAgICAgICAgICAgICBjYWxsYmFjazogU1VCX0NBTExCQUNLID0gY2FsbGJhY2ssXG5cdFx0ICAgICAgICAgICAgICBjaXBoZXJfa2V5OiBhcmdzWydjaXBoZXJfa2V5J10sXG5cdFx0ICAgICAgICAgICAgICBjb25uZWN0OiBjb25uZWN0LFxuXHRcdCAgICAgICAgICAgICAgZGlzY29ubmVjdDogZGlzY29ubmVjdCxcblx0XHQgICAgICAgICAgICAgIHJlY29ubmVjdDogcmVjb25uZWN0XG5cdFx0ICAgICAgICAgICAgfTtcblx0XG5cdFx0ICAgICAgICAgICAgLy8gUHJlc2VuY2UgRW5hYmxlZD9cblx0XHQgICAgICAgICAgICBpZiAoIXByZXNlbmNlKSByZXR1cm47XG5cdFxuXHRcdCAgICAgICAgICAgIC8vIFN1YnNjcmliZSBQcmVzZW5jZSBDaGFubmVsXG5cdFx0ICAgICAgICAgICAgU0VMRlsnc3Vic2NyaWJlJ10oe1xuXHRcdCAgICAgICAgICAgICAgY2hhbm5lbF9ncm91cDogY2hhbm5lbF9ncm91cCArIFBSRVNFTkNFX1NVRkZJWCxcblx0XHQgICAgICAgICAgICAgIGNhbGxiYWNrOiBwcmVzZW5jZSxcblx0XHQgICAgICAgICAgICAgIHJlc3RvcmU6IHJlc3RvcmUsXG5cdFx0ICAgICAgICAgICAgICBhdXRoX2tleTogQVVUSF9LRVlcblx0XHQgICAgICAgICAgICB9KTtcblx0XG5cdFx0ICAgICAgICAgICAgLy8gUHJlc2VuY2UgU3Vic2NyaWJlZD9cblx0XHQgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc3Vic2NyaWJlZCkgcmV0dXJuO1xuXHRcblx0XHQgICAgICAgICAgICAvLyBTZWUgV2hvJ3MgSGVyZSBOb3c/XG5cdFx0ICAgICAgICAgICAgaWYgKG5vaGVyZXN5bmMpIHJldHVybjtcblx0XHQgICAgICAgICAgICBTRUxGWydoZXJlX25vdyddKHtcblx0XHQgICAgICAgICAgICAgIGNoYW5uZWxfZ3JvdXA6IGNoYW5uZWxfZ3JvdXAsXG5cdFx0ICAgICAgICAgICAgICBkYXRhOiBfZ2V0X3VybF9wYXJhbXMoeyB1dWlkOiBVVUlELCBhdXRoOiBBVVRIX0tFWSB9KSxcblx0XHQgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoaGVyZSkge1xuXHRcdCAgICAgICAgICAgICAgICB1dGlscy5lYWNoKCd1dWlkcycgaW4gaGVyZSA/IGhlcmVbJ3V1aWRzJ10gOiBbXSwgZnVuY3Rpb24gKHVpZCkge1xuXHRcdCAgICAgICAgICAgICAgICAgIHByZXNlbmNlKHtcblx0XHQgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2pvaW4nLFxuXHRcdCAgICAgICAgICAgICAgICAgICAgdXVpZDogdWlkLFxuXHRcdCAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBNYXRoLmZsb29yKHV0aWxzLnJub3coKSAvIDEwMDApLFxuXHRcdCAgICAgICAgICAgICAgICAgICAgb2NjdXBhbmN5OiBoZXJlWydvY2N1cGFuY3knXSB8fCAxXG5cdFx0ICAgICAgICAgICAgICAgICAgfSwgaGVyZSwgY2hhbm5lbF9ncm91cCk7XG5cdFx0ICAgICAgICAgICAgICAgIH0pO1xuXHRcdCAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH0pO1xuXHRcdCAgICAgICAgICB9KTtcblx0XHQgICAgICB9XG5cdFxuXHRcblx0XHQgICAgICAvLyBUZXN0IE5ldHdvcmsgQ29ubmVjdGlvblxuXHRcdCAgICAgIGZ1bmN0aW9uIF90ZXN0X2Nvbm5lY3Rpb24oc3VjY2Vzcykge1xuXHRcdCAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcblx0XHQgICAgICAgICAgLy8gQmVnaW4gTmV4dCBTb2NrZXQgQ29ubmVjdGlvblxuXHRcdCAgICAgICAgICB1dGlscy50aW1lb3V0KENPTk5FQ1QsIHdpbmRvd2luZyk7XG5cdFx0ICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgICAvLyBOZXcgT3JpZ2luIG9uIEZhaWxlZCBDb25uZWN0aW9uXG5cdFx0ICAgICAgICAgIFNURF9PUklHSU4gPSBuZXh0b3JpZ2luKE9SSUdJTiwgMSk7XG5cdFx0ICAgICAgICAgIFNVQl9PUklHSU4gPSBuZXh0b3JpZ2luKE9SSUdJTiwgMSk7XG5cdFxuXHRcdCAgICAgICAgICAvLyBSZS10ZXN0IENvbm5lY3Rpb25cblx0XHQgICAgICAgICAgdXRpbHMudGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICAgICAgU0VMRlsndGltZSddKF90ZXN0X2Nvbm5lY3Rpb24pO1xuXHRcdCAgICAgICAgICB9LCBTRUNPTkQpO1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIC8vIERpc2Nvbm5lY3QgJiBSZWNvbm5lY3Rcblx0XHQgICAgICAgIGVhY2hfY2hhbm5lbChmdW5jdGlvbiAoY2hhbm5lbCkge1xuXHRcdCAgICAgICAgICAvLyBSZWNvbm5lY3Rcblx0XHQgICAgICAgICAgaWYgKHN1Y2Nlc3MgJiYgY2hhbm5lbC5kaXNjb25uZWN0ZWQpIHtcblx0XHQgICAgICAgICAgICBjaGFubmVsLmRpc2Nvbm5lY3RlZCA9IDA7XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIGNoYW5uZWwucmVjb25uZWN0KGNoYW5uZWwubmFtZSk7XG5cdFx0ICAgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAgIC8vIERpc2Nvbm5lY3Rcblx0XHQgICAgICAgICAgaWYgKCFzdWNjZXNzICYmICFjaGFubmVsLmRpc2Nvbm5lY3RlZCkge1xuXHRcdCAgICAgICAgICAgIGNoYW5uZWwuZGlzY29ubmVjdGVkID0gMTtcblx0XHQgICAgICAgICAgICBjaGFubmVsLmRpc2Nvbm5lY3QoY2hhbm5lbC5uYW1lKTtcblx0XHQgICAgICAgICAgfVxuXHRcdCAgICAgICAgfSk7XG5cdFxuXHRcdCAgICAgICAgLy8gRGlzY29ubmVjdCAmIFJlY29ubmVjdCBmb3IgY2hhbm5lbCBncm91cHNcblx0XHQgICAgICAgIGVhY2hfY2hhbm5lbF9ncm91cChmdW5jdGlvbiAoY2hhbm5lbF9ncm91cCkge1xuXHRcdCAgICAgICAgICAvLyBSZWNvbm5lY3Rcblx0XHQgICAgICAgICAgaWYgKHN1Y2Nlc3MgJiYgY2hhbm5lbF9ncm91cC5kaXNjb25uZWN0ZWQpIHtcblx0XHQgICAgICAgICAgICBjaGFubmVsX2dyb3VwLmRpc2Nvbm5lY3RlZCA9IDA7XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIGNoYW5uZWxfZ3JvdXAucmVjb25uZWN0KGNoYW5uZWxfZ3JvdXAubmFtZSk7XG5cdFx0ICAgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAgIC8vIERpc2Nvbm5lY3Rcblx0XHQgICAgICAgICAgaWYgKCFzdWNjZXNzICYmICFjaGFubmVsX2dyb3VwLmRpc2Nvbm5lY3RlZCkge1xuXHRcdCAgICAgICAgICAgIGNoYW5uZWxfZ3JvdXAuZGlzY29ubmVjdGVkID0gMTtcblx0XHQgICAgICAgICAgICBjaGFubmVsX2dyb3VwLmRpc2Nvbm5lY3QoY2hhbm5lbF9ncm91cC5uYW1lKTtcblx0XHQgICAgICAgICAgfVxuXHRcdCAgICAgICAgfSk7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICAvLyBFdmVudGVkIFN1YnNjcmliZVxuXHRcdCAgICAgIGZ1bmN0aW9uIF9jb25uZWN0KCkge1xuXHRcdCAgICAgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblx0XHQgICAgICAgIHZhciBjaGFubmVscyA9IGdlbmVyYXRlX2NoYW5uZWxfbGlzdChDSEFOTkVMUykuam9pbignLCcpO1xuXHRcdCAgICAgICAgdmFyIGNoYW5uZWxfZ3JvdXBzID0gZ2VuZXJhdGVfY2hhbm5lbF9ncm91cF9saXN0KENIQU5ORUxfR1JPVVBTKS5qb2luKCcsJyk7XG5cdFxuXHRcdCAgICAgICAgLy8gU3RvcCBDb25uZWN0aW9uXG5cdFx0ICAgICAgICBpZiAoIWNoYW5uZWxzICYmICFjaGFubmVsX2dyb3VwcykgcmV0dXJuO1xuXHRcblx0XHQgICAgICAgIGlmICghY2hhbm5lbHMpIGNoYW5uZWxzID0gJywnO1xuXHRcblx0XHQgICAgICAgIC8vIENvbm5lY3QgdG8gUHViTnViIFN1YnNjcmliZSBTZXJ2ZXJzXG5cdFx0ICAgICAgICBfcmVzZXRfb2ZmbGluZSgpO1xuXHRcblx0XHQgICAgICAgIHZhciBkYXRhID0gX2dldF91cmxfcGFyYW1zKHsgdXVpZDogVVVJRCwgYXV0aDogQVVUSF9LRVkgfSk7XG5cdFxuXHRcdCAgICAgICAgaWYgKGNoYW5uZWxfZ3JvdXBzKSB7XG5cdFx0ICAgICAgICAgIGRhdGFbJ2NoYW5uZWwtZ3JvdXAnXSA9IGNoYW5uZWxfZ3JvdXBzO1xuXHRcdCAgICAgICAgfVxuXHRcblx0XG5cdFx0ICAgICAgICB2YXIgc3QgPSBKU09OLnN0cmluZ2lmeShTVEFURSk7XG5cdFx0ICAgICAgICBpZiAoc3QubGVuZ3RoID4gMikgZGF0YVsnc3RhdGUnXSA9IEpTT04uc3RyaW5naWZ5KFNUQVRFKTtcblx0XG5cdFx0ICAgICAgICBpZiAoUFJFU0VOQ0VfSEIpIGRhdGFbJ2hlYXJ0YmVhdCddID0gUFJFU0VOQ0VfSEI7XG5cdFxuXHRcdCAgICAgICAgaWYgKFVTRV9JTlNUQU5DRUlEKSBkYXRhWydpbnN0YW5jZWlkJ10gPSBJTlNUQU5DRUlEO1xuXHRcblx0XHQgICAgICAgIHN0YXJ0X3ByZXNlbmNlX2hlYXJ0YmVhdCgpO1xuXHRcdCAgICAgICAgU1VCX1JFQ0VJVkVSID0gZXhlY3V0ZVJlcXVlc3Qoe1xuXHRcdCAgICAgICAgICB0aW1lb3V0OiBzdWJfdGltZW91dCxcblx0XHQgICAgICAgICAgY2FsbGJhY2s6IGpzb25wLFxuXHRcdCAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2VbJ2Vycm9yJ10gJiYgcmVzcG9uc2VbJ3NlcnZpY2UnXSkge1xuXHRcdCAgICAgICAgICAgICAgX2ludm9rZV9lcnJvcihyZXNwb25zZSwgU1VCX0VSUk9SKTtcblx0XHQgICAgICAgICAgICAgIF90ZXN0X2Nvbm5lY3Rpb24oZmFsc2UpO1xuXHRcdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICBTRUxGWyd0aW1lJ10oZnVuY3Rpb24gKHN1Y2Nlc3MpIHtcblx0XHQgICAgICAgICAgICAgICAgIXN1Y2Nlc3MgJiYgKF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIFNVQl9FUlJPUikpO1xuXHRcdCAgICAgICAgICAgICAgICBfdGVzdF9jb25uZWN0aW9uKHN1Y2Nlc3MpO1xuXHRcdCAgICAgICAgICAgICAgfSk7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICB9LFxuXHRcdCAgICAgICAgICBkYXRhOiBfZ2V0X3VybF9wYXJhbXMoZGF0YSksXG5cdFx0ICAgICAgICAgIHVybDogW1xuXHRcdCAgICAgICAgICAgIFNVQl9PUklHSU4sICdzdWJzY3JpYmUnLFxuXHRcdCAgICAgICAgICAgIFNVQlNDUklCRV9LRVksIHV0aWxzLmVuY29kZShjaGFubmVscyksXG5cdFx0ICAgICAgICAgICAganNvbnAsIFRJTUVUT0tFTlxuXHRcdCAgICAgICAgICBdLFxuXHRcdCAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobWVzc2FnZXMpIHtcblx0XHQgICAgICAgICAgICAvLyBDaGVjayBmb3IgRXJyb3JzXG5cdFx0ICAgICAgICAgICAgaWYgKCFtZXNzYWdlcyB8fCAodHlwZW9mIG1lc3NhZ2VzID09ICdvYmplY3QnICYmICdlcnJvcicgaW4gbWVzc2FnZXMgJiYgbWVzc2FnZXNbJ2Vycm9yJ10pKSB7XG5cdFx0ICAgICAgICAgICAgICBTVUJfRVJST1IobWVzc2FnZXMpO1xuXHRcdCAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLnRpbWVvdXQoQ09OTkVDVCwgU0VDT05EKTtcblx0XHQgICAgICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgICAgIC8vIFVzZXIgSWRsZSBDYWxsYmFja1xuXHRcdCAgICAgICAgICAgIGlkbGVjYihtZXNzYWdlc1sxXSk7XG5cdFxuXHRcdCAgICAgICAgICAgIC8vIFJlc3RvcmUgUHJldmlvdXMgQ29ubmVjdGlvbiBQb2ludCBpZiBOZWVkZWRcblx0XHQgICAgICAgICAgICBUSU1FVE9LRU4gPSAhVElNRVRPS0VOICYmIFNVQl9SRVNUT1JFICYmIGRiWydnZXQnXShTVUJTQ1JJQkVfS0VZKSB8fCBtZXNzYWdlc1sxXTtcblx0XG5cdFx0ICAgICAgICAgICAgLypcblx0XHQgICAgICAgICAgICAgLy8gQ29ubmVjdFxuXHRcdCAgICAgICAgICAgICBlYWNoX2NoYW5uZWxfcmVnaXN0cnkoZnVuY3Rpb24ocmVnaXN0cnkpe1xuXHRcdCAgICAgICAgICAgICBpZiAocmVnaXN0cnkuY29ubmVjdGVkKSByZXR1cm47XG5cdFx0ICAgICAgICAgICAgIHJlZ2lzdHJ5LmNvbm5lY3RlZCA9IDE7XG5cdFx0ICAgICAgICAgICAgIHJlZ2lzdHJ5LmNvbm5lY3QoY2hhbm5lbC5uYW1lKTtcblx0XHQgICAgICAgICAgICAgfSk7XG5cdFx0ICAgICAgICAgICAgICovXG5cdFxuXHRcdCAgICAgICAgICAgIC8vIENvbm5lY3Rcblx0XHQgICAgICAgICAgICBlYWNoX2NoYW5uZWwoZnVuY3Rpb24gKGNoYW5uZWwpIHtcblx0XHQgICAgICAgICAgICAgIGlmIChjaGFubmVsLmNvbm5lY3RlZCkgcmV0dXJuO1xuXHRcdCAgICAgICAgICAgICAgY2hhbm5lbC5jb25uZWN0ZWQgPSAxO1xuXHRcdCAgICAgICAgICAgICAgY2hhbm5lbC5jb25uZWN0KGNoYW5uZWwubmFtZSk7XG5cdFx0ICAgICAgICAgICAgfSk7XG5cdFxuXHRcdCAgICAgICAgICAgIC8vIENvbm5lY3QgZm9yIGNoYW5uZWwgZ3JvdXBzXG5cdFx0ICAgICAgICAgICAgZWFjaF9jaGFubmVsX2dyb3VwKGZ1bmN0aW9uIChjaGFubmVsX2dyb3VwKSB7XG5cdFx0ICAgICAgICAgICAgICBpZiAoY2hhbm5lbF9ncm91cC5jb25uZWN0ZWQpIHJldHVybjtcblx0XHQgICAgICAgICAgICAgIGNoYW5uZWxfZ3JvdXAuY29ubmVjdGVkID0gMTtcblx0XHQgICAgICAgICAgICAgIGNoYW5uZWxfZ3JvdXAuY29ubmVjdChjaGFubmVsX2dyb3VwLm5hbWUpO1xuXHRcdCAgICAgICAgICAgIH0pO1xuXHRcblx0XHQgICAgICAgICAgICBpZiAoUkVTVU1FRCAmJiAhU1VCX1JFU1RPUkUpIHtcblx0XHQgICAgICAgICAgICAgIFRJTUVUT0tFTiA9IDA7XG5cdFx0ICAgICAgICAgICAgICBSRVNVTUVEID0gZmFsc2U7XG5cdFx0ICAgICAgICAgICAgICAvLyBVcGRhdGUgU2F2ZWQgVGltZXRva2VuXG5cdFx0ICAgICAgICAgICAgICBkYlsnc2V0J10oU1VCU0NSSUJFX0tFWSwgMCk7XG5cdFx0ICAgICAgICAgICAgICB1dGlscy50aW1lb3V0KF9jb25uZWN0LCB3aW5kb3dpbmcpO1xuXHRcdCAgICAgICAgICAgICAgcmV0dXJuO1xuXHRcdCAgICAgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAgICAgLy8gSW52b2tlIE1lbW9yeSBDYXRjaHVwIGFuZCBSZWNlaXZlIFVwIHRvIDEwMFxuXHRcdCAgICAgICAgICAgIC8vIFByZXZpb3VzIE1lc3NhZ2VzIGZyb20gdGhlIFF1ZXVlLlxuXHRcdCAgICAgICAgICAgIGlmIChiYWNrZmlsbCkge1xuXHRcdCAgICAgICAgICAgICAgVElNRVRPS0VOID0gMTAwMDA7XG5cdFx0ICAgICAgICAgICAgICBiYWNrZmlsbCA9IDA7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcblx0XHQgICAgICAgICAgICAvLyBVcGRhdGUgU2F2ZWQgVGltZXRva2VuXG5cdFx0ICAgICAgICAgICAgZGJbJ3NldCddKFNVQlNDUklCRV9LRVksIG1lc3NhZ2VzWzFdKTtcblx0XG5cdFx0ICAgICAgICAgICAgLy8gUm91dGUgQ2hhbm5lbCA8LS0tPiBDYWxsYmFjayBmb3IgTWVzc2FnZVxuXHRcdCAgICAgICAgICAgIHZhciBuZXh0X2NhbGxiYWNrID0gKGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICAgIHZhciBjaGFubmVscyA9ICcnO1xuXHRcdCAgICAgICAgICAgICAgdmFyIGNoYW5uZWxzMiA9ICcnO1xuXHRcblx0XHQgICAgICAgICAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPiAzKSB7XG5cdFx0ICAgICAgICAgICAgICAgIGNoYW5uZWxzID0gbWVzc2FnZXNbM107XG5cdFx0ICAgICAgICAgICAgICAgIGNoYW5uZWxzMiA9IG1lc3NhZ2VzWzJdO1xuXHRcdCAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlcy5sZW5ndGggPiAyKSB7XG5cdFx0ICAgICAgICAgICAgICAgIGNoYW5uZWxzID0gbWVzc2FnZXNbMl07XG5cdFx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgICAgICAgICBjaGFubmVscyA9IHV0aWxzLm1hcChcblx0XHQgICAgICAgICAgICAgICAgICBnZW5lcmF0ZV9jaGFubmVsX2xpc3QoQ0hBTk5FTFMpLCBmdW5jdGlvbiAoY2hhbikge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLm1hcChcblx0XHQgICAgICAgICAgICAgICAgICAgICAgQXJyYXkobWVzc2FnZXNbMF0ubGVuZ3RoKVxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcsJykuc3BsaXQoJywnKSxcblx0XHQgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGFuO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgICAgICApO1xuXHRcdCAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJywnKTtcblx0XHQgICAgICAgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAgICAgICB2YXIgbGlzdCA9IGNoYW5uZWxzLnNwbGl0KCcsJyk7XG5cdFx0ICAgICAgICAgICAgICB2YXIgbGlzdDIgPSAoY2hhbm5lbHMyKSA/IGNoYW5uZWxzMi5zcGxpdCgnLCcpIDogW107XG5cdFxuXHRcdCAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSBsaXN0LnNoaWZ0KCkgfHwgU1VCX0NIQU5ORUw7XG5cdFx0ICAgICAgICAgICAgICAgIHZhciBjaGFubmVsMiA9IGxpc3QyLnNoaWZ0KCk7XG5cdFxuXHRcdCAgICAgICAgICAgICAgICB2YXIgY2hvYmogPSB7fTtcblx0XHQgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRfY2hvYmogPSB7IGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7fSB9O1xuXHRcblx0XHQgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwyKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwgJiYgY2hhbm5lbC5pbmRleE9mKCctcG5wcmVzJykgPj0gMFxuXHRcdCAgICAgICAgICAgICAgICAgICAgJiYgY2hhbm5lbDIuaW5kZXhPZignLXBucHJlcycpIDwgMCkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDIgKz0gJy1wbnByZXMnO1xuXHRcdCAgICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgICBjaG9iaiA9IENIQU5ORUxfR1JPVVBTW2NoYW5uZWwyXSB8fCBDSEFOTkVMU1tjaGFubmVsMl0gfHwgZGVmYXVsdF9jaG9iajtcblx0XHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0XHQgICAgICAgICAgICAgICAgICBjaG9iaiA9IENIQU5ORUxTW2NoYW5uZWxdIHx8IGRlZmF1bHRfY2hvYmo7XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAgICAgICAgIHZhciByID0gW1xuXHRcdCAgICAgICAgICAgICAgICAgIGNob2JqXG5cdFx0ICAgICAgICAgICAgICAgICAgICAuY2FsbGJhY2sgfHwgU1VCX0NBTExCQUNLLFxuXHRcdCAgICAgICAgICAgICAgICAgIGNoYW5uZWwuc3BsaXQoUFJFU0VOQ0VfU1VGRklYKVswXVxuXHRcdCAgICAgICAgICAgICAgICBdO1xuXHRcdCAgICAgICAgICAgICAgICBjaGFubmVsMiAmJiByLnB1c2goY2hhbm5lbDIuc3BsaXQoUFJFU0VOQ0VfU1VGRklYKVswXSk7XG5cdFx0ICAgICAgICAgICAgICAgIHJldHVybiByO1xuXHRcdCAgICAgICAgICAgICAgfTtcblx0XHQgICAgICAgICAgICB9KSgpO1xuXHRcblx0XHQgICAgICAgICAgICB2YXIgbGF0ZW5jeSA9IGRldGVjdF9sYXRlbmN5KCttZXNzYWdlc1sxXSk7XG5cdFx0ICAgICAgICAgICAgdXRpbHMuZWFjaChtZXNzYWdlc1swXSwgZnVuY3Rpb24gKG1zZykge1xuXHRcdCAgICAgICAgICAgICAgdmFyIG5leHQgPSBuZXh0X2NhbGxiYWNrKCk7XG5cdFx0ICAgICAgICAgICAgICB2YXIgZGVjcnlwdGVkX21zZyA9IGRlY3J5cHQobXNnLFxuXHRcdCAgICAgICAgICAgICAgICAoQ0hBTk5FTFNbbmV4dFsxXV0pID8gQ0hBTk5FTFNbbmV4dFsxXV1bJ2NpcGhlcl9rZXknXSA6IG51bGwpO1xuXHRcdCAgICAgICAgICAgICAgbmV4dFswXSAmJiBuZXh0WzBdKGRlY3J5cHRlZF9tc2csIG1lc3NhZ2VzLCBuZXh0WzJdIHx8IG5leHRbMV0sIGxhdGVuY3ksIG5leHRbMV0pO1xuXHRcdCAgICAgICAgICAgIH0pO1xuXHRcblx0XHQgICAgICAgICAgICB1dGlscy50aW1lb3V0KF9jb25uZWN0LCB3aW5kb3dpbmcpO1xuXHRcdCAgICAgICAgICB9XG5cdFx0ICAgICAgICB9KTtcblx0XHQgICAgICB9XG5cdFxuXHRcdCAgICAgIENPTk5FQ1QgPSBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICBfcmVzZXRfb2ZmbGluZSgpO1xuXHRcdCAgICAgICAgdXRpbHMudGltZW91dChfY29ubmVjdCwgd2luZG93aW5nKTtcblx0XHQgICAgICB9O1xuXHRcblx0XHQgICAgICAvLyBSZWR1Y2UgU3RhdHVzIEZsaWNrZXJcblx0XHQgICAgICBpZiAoIVJFQURZKSByZXR1cm4gUkVBRFlfQlVGRkVSLnB1c2goQ09OTkVDVCk7XG5cdFxuXHRcdCAgICAgIC8vIENvbm5lY3QgTm93XG5cdFx0ICAgICAgQ09OTkVDVCgpO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgLypcblx0XHQgICAgIFBVQk5VQi5oZXJlX25vdyh7IGNoYW5uZWwgOiAnbXlfY2hhdCcsIGNhbGxiYWNrIDogZnVuIH0pO1xuXHRcdCAgICAgKi9cblx0XHQgICAgaGVyZV9ub3c6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHRcdCAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbJ2NhbGxiYWNrJ10gfHwgY2FsbGJhY2s7XG5cdFx0ICAgICAgdmFyIGRlYnVnID0gYXJnc1snZGVidWcnXTtcblx0XHQgICAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHRcdCAgICAgIHZhciBjaGFubmVsID0gYXJnc1snY2hhbm5lbCddO1xuXHRcdCAgICAgIHZhciBjaGFubmVsX2dyb3VwID0gYXJnc1snY2hhbm5lbF9ncm91cCddO1xuXHRcdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdFx0ICAgICAgdmFyIHV1aWRzID0gKCd1dWlkcycgaW4gYXJncykgPyBhcmdzWyd1dWlkcyddIDogdHJ1ZTtcblx0XHQgICAgICB2YXIgc3RhdGUgPSBhcmdzWydzdGF0ZSddO1xuXHRcdCAgICAgIHZhciBkYXRhID0geyB1dWlkOiBVVUlELCBhdXRoOiBhdXRoX2tleSB9O1xuXHRcblx0XHQgICAgICBpZiAoIXV1aWRzKSBkYXRhWydkaXNhYmxlX3V1aWRzJ10gPSAxO1xuXHRcdCAgICAgIGlmIChzdGF0ZSkgZGF0YVsnc3RhdGUnXSA9IDE7XG5cdFxuXHRcdCAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgQ2hhbm5lbFxuXHRcdCAgICAgIGlmICghY2FsbGJhY2spIHJldHVybiBlcnJvcignTWlzc2luZyBDYWxsYmFjaycpO1xuXHRcdCAgICAgIGlmICghU1VCU0NSSUJFX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFN1YnNjcmliZSBLZXknKTtcblx0XG5cdFx0ICAgICAgdmFyIHVybCA9IFtcblx0XHQgICAgICAgIFNURF9PUklHSU4sICd2MicsICdwcmVzZW5jZScsXG5cdFx0ICAgICAgICAnc3ViX2tleScsIFNVQlNDUklCRV9LRVlcblx0XHQgICAgICBdO1xuXHRcblx0XHQgICAgICBjaGFubmVsICYmIHVybC5wdXNoKCdjaGFubmVsJykgJiYgdXJsLnB1c2godXRpbHMuZW5jb2RlKGNoYW5uZWwpKTtcblx0XG5cdFx0ICAgICAgaWYgKGpzb25wICE9ICcwJykge1xuXHRcdCAgICAgICAgZGF0YVsnY2FsbGJhY2snXSA9IGpzb25wO1xuXHRcdCAgICAgIH1cblx0XG5cdFx0ICAgICAgaWYgKGNoYW5uZWxfZ3JvdXApIHtcblx0XHQgICAgICAgIGRhdGFbJ2NoYW5uZWwtZ3JvdXAnXSA9IGNoYW5uZWxfZ3JvdXA7XG5cdFx0ICAgICAgICAhY2hhbm5lbCAmJiB1cmwucHVzaCgnY2hhbm5lbCcpICYmIHVybC5wdXNoKCcsJyk7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cdFxuXHRcdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0XHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0XHQgICAgICAgIGRhdGE6IF9nZXRfdXJsX3BhcmFtcyhkYXRhKSxcblx0XHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0XHQgICAgICAgIH0sXG5cdFx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgX2ludm9rZV9lcnJvcihyZXNwb25zZSwgZXJyKTtcblx0XHQgICAgICAgIH0sXG5cdFx0ICAgICAgICBkZWJ1ZzogZGVidWcsXG5cdFx0ICAgICAgICB1cmw6IHVybFxuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgLypcblx0XHQgICAgIFBVQk5VQi5jdXJyZW50X2NoYW5uZWxzX2J5X3V1aWQoeyBjaGFubmVsIDogJ215X2NoYXQnLCBjYWxsYmFjayA6IGZ1biB9KTtcblx0XHQgICAgICovXG5cdFx0ICAgIHdoZXJlX25vdzogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdFx0ICAgICAgdmFyIGNhbGxiYWNrID0gYXJnc1snY2FsbGJhY2snXSB8fCBjYWxsYmFjaztcblx0XHQgICAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHRcdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdFx0ICAgICAgdmFyIHV1aWQgPSBhcmdzWyd1dWlkJ10gfHwgVVVJRDtcblx0XHQgICAgICB2YXIgZGF0YSA9IHsgYXV0aDogYXV0aF9rZXkgfTtcblx0XG5cdFx0ICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBDaGFubmVsXG5cdFx0ICAgICAgaWYgKCFjYWxsYmFjaykgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENhbGxiYWNrJyk7XG5cdFx0ICAgICAgaWYgKCFTVUJTQ1JJQkVfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU3Vic2NyaWJlIEtleScpO1xuXHRcblx0XHQgICAgICBpZiAoanNvbnAgIT0gJzAnKSB7XG5cdFx0ICAgICAgICBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cdFxuXHRcdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0XHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0XHQgICAgICAgIGRhdGE6IF9nZXRfdXJsX3BhcmFtcyhkYXRhKSxcblx0XHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0XHQgICAgICAgIH0sXG5cdFx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgX2ludm9rZV9lcnJvcihyZXNwb25zZSwgZXJyKTtcblx0XHQgICAgICAgIH0sXG5cdFx0ICAgICAgICB1cmw6IFtcblx0XHQgICAgICAgICAgU1REX09SSUdJTiwgJ3YyJywgJ3ByZXNlbmNlJyxcblx0XHQgICAgICAgICAgJ3N1Yl9rZXknLCBTVUJTQ1JJQkVfS0VZLFxuXHRcdCAgICAgICAgICAndXVpZCcsIHV0aWxzLmVuY29kZSh1dWlkKVxuXHRcdCAgICAgICAgXVxuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgc3RhdGU6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHRcdCAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbJ2NhbGxiYWNrJ10gfHwgY2FsbGJhY2sgfHwgZnVuY3Rpb24gKHIpIHt9O1xuXHRcdCAgICAgIHZhciBlcnIgPSBhcmdzWydlcnJvciddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHRcdCAgICAgIHZhciBhdXRoX2tleSA9IGFyZ3NbJ2F1dGhfa2V5J10gfHwgQVVUSF9LRVk7XG5cdFx0ICAgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblx0XHQgICAgICB2YXIgc3RhdGUgPSBhcmdzWydzdGF0ZSddO1xuXHRcdCAgICAgIHZhciB1dWlkID0gYXJnc1sndXVpZCddIHx8IFVVSUQ7XG5cdFx0ICAgICAgdmFyIGNoYW5uZWwgPSBhcmdzWydjaGFubmVsJ107XG5cdFx0ICAgICAgdmFyIGNoYW5uZWxfZ3JvdXAgPSBhcmdzWydjaGFubmVsX2dyb3VwJ107XG5cdFx0ICAgICAgdmFyIHVybDtcblx0XHQgICAgICB2YXIgZGF0YSA9IF9nZXRfdXJsX3BhcmFtcyh7IGF1dGg6IGF1dGhfa2V5IH0pO1xuXHRcblx0XHQgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIENoYW5uZWxcblx0XHQgICAgICBpZiAoIVNVQlNDUklCRV9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBTdWJzY3JpYmUgS2V5Jyk7XG5cdFx0ICAgICAgaWYgKCF1dWlkKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgVVVJRCcpO1xuXHRcdCAgICAgIGlmICghY2hhbm5lbCAmJiAhY2hhbm5lbF9ncm91cCkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENoYW5uZWwnKTtcblx0XG5cdFx0ICAgICAgaWYgKGpzb25wICE9ICcwJykge1xuXHRcdCAgICAgICAgZGF0YVsnY2FsbGJhY2snXSA9IGpzb25wO1xuXHRcdCAgICAgIH1cblx0XG5cdFx0ICAgICAgaWYgKHR5cGVvZiBjaGFubmVsICE9ICd1bmRlZmluZWQnXG5cdFx0ICAgICAgICAmJiBDSEFOTkVMU1tjaGFubmVsXSAmJiBDSEFOTkVMU1tjaGFubmVsXS5zdWJzY3JpYmVkKSB7XG5cdFx0ICAgICAgICBpZiAoc3RhdGUpIFNUQVRFW2NoYW5uZWxdID0gc3RhdGU7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICBpZiAodHlwZW9mIGNoYW5uZWxfZ3JvdXAgIT0gJ3VuZGVmaW5lZCdcblx0XHQgICAgICAgICYmIENIQU5ORUxfR1JPVVBTW2NoYW5uZWxfZ3JvdXBdXG5cdFx0ICAgICAgICAmJiBDSEFOTkVMX0dST1VQU1tjaGFubmVsX2dyb3VwXS5zdWJzY3JpYmVkXG5cdFx0ICAgICAgKSB7XG5cdFx0ICAgICAgICBpZiAoc3RhdGUpIFNUQVRFW2NoYW5uZWxfZ3JvdXBdID0gc3RhdGU7XG5cdFx0ICAgICAgICBkYXRhWydjaGFubmVsLWdyb3VwJ10gPSBjaGFubmVsX2dyb3VwO1xuXHRcblx0XHQgICAgICAgIGlmICghY2hhbm5lbCkge1xuXHRcdCAgICAgICAgICBjaGFubmVsID0gJywnO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgIH1cblx0XG5cdFx0ICAgICAgZGF0YVsnc3RhdGUnXSA9IEpTT04uc3RyaW5naWZ5KHN0YXRlKTtcblx0XG5cdFx0ICAgICAgaWYgKFVTRV9JTlNUQU5DRUlEKSBkYXRhWydpbnN0YW5jZWlkJ10gPSBJTlNUQU5DRUlEO1xuXHRcblx0XHQgICAgICBpZiAoc3RhdGUpIHtcblx0XHQgICAgICAgIHVybCA9IFtcblx0XHQgICAgICAgICAgU1REX09SSUdJTiwgJ3YyJywgJ3ByZXNlbmNlJyxcblx0XHQgICAgICAgICAgJ3N1Yi1rZXknLCBTVUJTQ1JJQkVfS0VZLFxuXHRcdCAgICAgICAgICAnY2hhbm5lbCcsIGNoYW5uZWwsXG5cdFx0ICAgICAgICAgICd1dWlkJywgdXVpZCwgJ2RhdGEnXG5cdFx0ICAgICAgICBdO1xuXHRcdCAgICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgICB1cmwgPSBbXG5cdFx0ICAgICAgICAgIFNURF9PUklHSU4sICd2MicsICdwcmVzZW5jZScsXG5cdFx0ICAgICAgICAgICdzdWIta2V5JywgU1VCU0NSSUJFX0tFWSxcblx0XHQgICAgICAgICAgJ2NoYW5uZWwnLCBjaGFubmVsLFxuXHRcdCAgICAgICAgICAndXVpZCcsIHV0aWxzLmVuY29kZSh1dWlkKVxuXHRcdCAgICAgICAgXTtcblx0XHQgICAgICB9XG5cdFxuXHRcdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0XHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0XHQgICAgICAgIGRhdGE6IF9nZXRfdXJsX3BhcmFtcyhkYXRhKSxcblx0XHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0XHQgICAgICAgIH0sXG5cdFx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgX2ludm9rZV9lcnJvcihyZXNwb25zZSwgZXJyKTtcblx0XHQgICAgICAgIH0sXG5cdFx0ICAgICAgICB1cmw6IHVybFxuXHRcblx0XHQgICAgICB9KTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIC8qXG5cdFx0ICAgICBQVUJOVUIuZ3JhbnQoe1xuXHRcdCAgICAgY2hhbm5lbCAgOiAnbXlfY2hhdCcsXG5cdFx0ICAgICBjYWxsYmFjayA6IGZ1bixcblx0XHQgICAgIGVycm9yICAgIDogZnVuLFxuXHRcdCAgICAgdHRsICAgICAgOiAyNCAqIDYwLCAvLyBNaW51dGVzXG5cdFx0ICAgICByZWFkICAgICA6IHRydWUsXG5cdFx0ICAgICB3cml0ZSAgICA6IHRydWUsXG5cdFx0ICAgICBhdXRoX2tleSA6ICczeTh1aWFqZGtseXRvd3NqJ1xuXHRcdCAgICAgfSk7XG5cdFx0ICAgICAqL1xuXHRcdCAgICBncmFudDogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdFx0ICAgICAgdmFyIGNhbGxiYWNrID0gYXJnc1snY2FsbGJhY2snXSB8fCBjYWxsYmFjaztcblx0XHQgICAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIgY2hhbm5lbCA9IGFyZ3NbJ2NoYW5uZWwnXSB8fCBhcmdzWydjaGFubmVscyddO1xuXHRcdCAgICAgIHZhciBjaGFubmVsX2dyb3VwID0gYXJnc1snY2hhbm5lbF9ncm91cCddO1xuXHRcdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdFx0ICAgICAgdmFyIHR0bCA9IGFyZ3NbJ3R0bCddO1xuXHRcdCAgICAgIHZhciByID0gKGFyZ3NbJ3JlYWQnXSkgPyAnMScgOiAnMCc7XG5cdFx0ICAgICAgdmFyIHcgPSAoYXJnc1snd3JpdGUnXSkgPyAnMScgOiAnMCc7XG5cdFx0ICAgICAgdmFyIG0gPSAoYXJnc1snbWFuYWdlJ10pID8gJzEnIDogJzAnO1xuXHRcdCAgICAgIHZhciBhdXRoX2tleSA9IGFyZ3NbJ2F1dGhfa2V5J10gfHwgYXJnc1snYXV0aF9rZXlzJ107XG5cdFxuXHRcdCAgICAgIGlmICghY2FsbGJhY2spIHJldHVybiBlcnJvcignTWlzc2luZyBDYWxsYmFjaycpO1xuXHRcdCAgICAgIGlmICghU1VCU0NSSUJFX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFN1YnNjcmliZSBLZXknKTtcblx0XHQgICAgICBpZiAoIVBVQkxJU0hfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgUHVibGlzaCBLZXknKTtcblx0XHQgICAgICBpZiAoIVNFQ1JFVF9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBTZWNyZXQgS2V5Jyk7XG5cdFxuXHRcdCAgICAgIHZhciBkYXRhID0geyB3OiB3LCByOiByIH07XG5cdFxuXHRcdCAgICAgIGlmIChhcmdzWydtYW5hZ2UnXSkge1xuXHRcdCAgICAgICAgZGF0YVsnbSddID0gbTtcblx0XHQgICAgICB9XG5cdFx0ICAgICAgaWYgKHV0aWxzLmlzQXJyYXkoY2hhbm5lbCkpIHtcblx0XHQgICAgICAgIGNoYW5uZWwgPSBjaGFubmVsWydqb2luJ10oJywnKTtcblx0XHQgICAgICB9XG5cdFx0ICAgICAgaWYgKHV0aWxzLmlzQXJyYXkoYXV0aF9rZXkpKSB7XG5cdFx0ICAgICAgICBhdXRoX2tleSA9IGF1dGhfa2V5Wydqb2luJ10oJywnKTtcblx0XHQgICAgICB9XG5cdFx0ICAgICAgaWYgKHR5cGVvZiBjaGFubmVsICE9ICd1bmRlZmluZWQnICYmIGNoYW5uZWwgIT0gbnVsbCAmJiBjaGFubmVsLmxlbmd0aCA+IDApIGRhdGFbJ2NoYW5uZWwnXSA9IGNoYW5uZWw7XG5cdFx0ICAgICAgaWYgKHR5cGVvZiBjaGFubmVsX2dyb3VwICE9ICd1bmRlZmluZWQnICYmIGNoYW5uZWxfZ3JvdXAgIT0gbnVsbCAmJiBjaGFubmVsX2dyb3VwLmxlbmd0aCA+IDApIHtcblx0XHQgICAgICAgIGRhdGFbJ2NoYW5uZWwtZ3JvdXAnXSA9IGNoYW5uZWxfZ3JvdXA7XG5cdFx0ICAgICAgfVxuXHRcdCAgICAgIGlmIChqc29ucCAhPSAnMCcpIHtcblx0XHQgICAgICAgIGRhdGFbJ2NhbGxiYWNrJ10gPSBqc29ucDtcblx0XHQgICAgICB9XG5cdFx0ICAgICAgaWYgKHR0bCB8fCB0dGwgPT09IDApIGRhdGFbJ3R0bCddID0gdHRsO1xuXHRcblx0XHQgICAgICBpZiAoYXV0aF9rZXkpIGRhdGFbJ2F1dGgnXSA9IGF1dGhfa2V5O1xuXHRcblx0XHQgICAgICBkYXRhID0gX2dldF91cmxfcGFyYW1zKGRhdGEpO1xuXHRcblx0XHQgICAgICBpZiAoIWF1dGhfa2V5KSBkZWxldGUgZGF0YVsnYXV0aCddO1xuXHRcblx0XHQgICAgICBleGVjdXRlUmVxdWVzdCh7XG5cdFx0ICAgICAgICBvcGVyYXRpb246ICdQTkFjY2Vzc01hbmFnZXJHcmFudCcsXG5cdFx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdFx0ICAgICAgICBkYXRhOiBkYXRhLFxuXHRcdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICAgIF9pbnZva2VfY2FsbGJhY2socmVzcG9uc2UsIGNhbGxiYWNrLCBlcnIpO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBfaW52b2tlX2Vycm9yKHJlc3BvbnNlLCBlcnIpO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIHVybDogW1xuXHRcdCAgICAgICAgICBTVERfT1JJR0lOLCAndjEnLCAnYXV0aCcsICdncmFudCcsXG5cdFx0ICAgICAgICAgICdzdWIta2V5JywgU1VCU0NSSUJFX0tFWVxuXHRcdCAgICAgICAgXVxuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgLypcblx0XHQgICAgIFBVQk5VQi5tb2JpbGVfZ3dfcHJvdmlzaW9uICh7XG5cdFx0ICAgICBkZXZpY2VfaWQ6ICdBNjU1RkJBOTkzMUFCJyxcblx0XHQgICAgIG9wICAgICAgIDogJ2FkZCcgfCAncmVtb3ZlJyxcblx0XHQgICAgIGd3X3R5cGUgIDogJ2FwbnMnIHwgJ2djbScsXG5cdFx0ICAgICBjaGFubmVsICA6ICdteV9jaGF0Jyxcblx0XHQgICAgIGNhbGxiYWNrIDogZnVuLFxuXHRcdCAgICAgZXJyb3IgICAgOiBmdW4sXG5cdFx0ICAgICB9KTtcblx0XHQgICAgICovXG5cdFxuXHRcdCAgICBtb2JpbGVfZ3dfcHJvdmlzaW9uOiBmdW5jdGlvbiAoYXJncykge1xuXHRcdCAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbJ2NhbGxiYWNrJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIGF1dGhfa2V5ID0gYXJnc1snYXV0aF9rZXknXSB8fCBBVVRIX0tFWTtcblx0XHQgICAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0XHQgICAgICB2YXIganNvbnAgPSBqc29ucF9jYigpO1xuXHRcdCAgICAgIHZhciBjaGFubmVsID0gYXJnc1snY2hhbm5lbCddO1xuXHRcdCAgICAgIHZhciBvcCA9IGFyZ3NbJ29wJ107XG5cdFx0ICAgICAgdmFyIGd3X3R5cGUgPSBhcmdzWydnd190eXBlJ107XG5cdFx0ICAgICAgdmFyIGRldmljZV9pZCA9IGFyZ3NbJ2RldmljZV9pZCddO1xuXHRcdCAgICAgIHZhciBwYXJhbXM7XG5cdFx0ICAgICAgdmFyIHVybDtcblx0XG5cdFx0ICAgICAgaWYgKCFkZXZpY2VfaWQpIHJldHVybiBlcnJvcignTWlzc2luZyBEZXZpY2UgSUQgKGRldmljZV9pZCknKTtcblx0XHQgICAgICBpZiAoIWd3X3R5cGUpIHJldHVybiBlcnJvcignTWlzc2luZyBHVyBUeXBlIChnd190eXBlOiBnY20gb3IgYXBucyknKTtcblx0XHQgICAgICBpZiAoIW9wKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgR1cgT3BlcmF0aW9uIChvcDogYWRkIG9yIHJlbW92ZSknKTtcblx0XHQgICAgICBpZiAoIWNoYW5uZWwpIHJldHVybiBlcnJvcignTWlzc2luZyBndyBkZXN0aW5hdGlvbiBDaGFubmVsIChjaGFubmVsKScpO1xuXHRcdCAgICAgIGlmICghU1VCU0NSSUJFX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFN1YnNjcmliZSBLZXknKTtcblx0XG5cdFx0ICAgICAgLy8gQ3JlYXRlIFVSTFxuXHRcdCAgICAgIHVybCA9IFtcblx0XHQgICAgICAgIFNURF9PUklHSU4sICd2MS9wdXNoL3N1Yi1rZXknLFxuXHRcdCAgICAgICAgU1VCU0NSSUJFX0tFWSwgJ2RldmljZXMnLCBkZXZpY2VfaWRcblx0XHQgICAgICBdO1xuXHRcblx0XHQgICAgICBwYXJhbXMgPSB7IHV1aWQ6IFVVSUQsIGF1dGg6IGF1dGhfa2V5LCB0eXBlOiBnd190eXBlIH07XG5cdFxuXHRcdCAgICAgIGlmIChvcCA9PSAnYWRkJykge1xuXHRcdCAgICAgICAgcGFyYW1zWydhZGQnXSA9IGNoYW5uZWw7XG5cdFx0ICAgICAgfSBlbHNlIGlmIChvcCA9PSAncmVtb3ZlJykge1xuXHRcdCAgICAgICAgcGFyYW1zWydyZW1vdmUnXSA9IGNoYW5uZWw7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIHBhcmFtc1snaW5zdGFuY2VpZCddID0gSU5TVEFOQ0VJRDtcblx0XG5cdFx0ICAgICAgZXhlY3V0ZVJlcXVlc3Qoe1xuXHRcdCAgICAgICAgY2FsbGJhY2s6IGpzb25wLFxuXHRcdCAgICAgICAgZGF0YTogcGFyYW1zLFxuXHRcdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICAgIF9pbnZva2VfY2FsbGJhY2socmVzcG9uc2UsIGNhbGxiYWNrLCBlcnIpO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBfaW52b2tlX2Vycm9yKHJlc3BvbnNlLCBlcnIpO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIHVybDogdXJsXG5cdFx0ICAgICAgfSk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICAvKlxuXHRcdCAgICAgUFVCTlVCLmF1ZGl0KHtcblx0XHQgICAgIGNoYW5uZWwgIDogJ215X2NoYXQnLFxuXHRcdCAgICAgY2FsbGJhY2sgOiBmdW4sXG5cdFx0ICAgICBlcnJvciAgICA6IGZ1bixcblx0XHQgICAgIHJlYWQgICAgIDogdHJ1ZSxcblx0XHQgICAgIHdyaXRlICAgIDogdHJ1ZSxcblx0XHQgICAgIGF1dGhfa2V5IDogJzN5OHVpYWpka2x5dG93c2onXG5cdFx0ICAgICB9KTtcblx0XHQgICAgICovXG5cdFx0ICAgIGF1ZGl0OiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0XHQgICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzWydjYWxsYmFjayddIHx8IGNhbGxiYWNrO1xuXHRcdCAgICAgIHZhciBlcnIgPSBhcmdzWydlcnJvciddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHRcdCAgICAgIHZhciBjaGFubmVsID0gYXJnc1snY2hhbm5lbCddO1xuXHRcdCAgICAgIHZhciBjaGFubmVsX2dyb3VwID0gYXJnc1snY2hhbm5lbF9ncm91cCddO1xuXHRcdCAgICAgIHZhciBhdXRoX2tleSA9IGFyZ3NbJ2F1dGhfa2V5J107XG5cdFx0ICAgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblx0XG5cdFx0ICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBDaGFubmVsXG5cdFx0ICAgICAgaWYgKCFjYWxsYmFjaykgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENhbGxiYWNrJyk7XG5cdFx0ICAgICAgaWYgKCFTVUJTQ1JJQkVfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU3Vic2NyaWJlIEtleScpO1xuXHRcdCAgICAgIGlmICghUFVCTElTSF9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBQdWJsaXNoIEtleScpO1xuXHRcdCAgICAgIGlmICghU0VDUkVUX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFNlY3JldCBLZXknKTtcblx0XG5cdFx0ICAgICAgdmFyIGRhdGEgPSB7fTtcblx0XHQgICAgICBpZiAoanNvbnAgIT0gJzAnKSB7XG5cdFx0ICAgICAgICBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cdFx0ICAgICAgfVxuXHRcdCAgICAgIGlmICh0eXBlb2YgY2hhbm5lbCAhPSAndW5kZWZpbmVkJyAmJiBjaGFubmVsICE9IG51bGwgJiYgY2hhbm5lbC5sZW5ndGggPiAwKSBkYXRhWydjaGFubmVsJ10gPSBjaGFubmVsO1xuXHRcdCAgICAgIGlmICh0eXBlb2YgY2hhbm5lbF9ncm91cCAhPSAndW5kZWZpbmVkJyAmJiBjaGFubmVsX2dyb3VwICE9IG51bGwgJiYgY2hhbm5lbF9ncm91cC5sZW5ndGggPiAwKSB7XG5cdFx0ICAgICAgICBkYXRhWydjaGFubmVsLWdyb3VwJ10gPSBjaGFubmVsX2dyb3VwO1xuXHRcdCAgICAgIH1cblx0XHQgICAgICBpZiAoYXV0aF9rZXkpIGRhdGFbJ2F1dGgnXSA9IGF1dGhfa2V5O1xuXHRcblx0XHQgICAgICBkYXRhID0gX2dldF91cmxfcGFyYW1zKGRhdGEpO1xuXHRcblx0XHQgICAgICBpZiAoIWF1dGhfa2V5KSBkZWxldGUgZGF0YVsnYXV0aCddO1xuXHRcblx0XHQgICAgICBleGVjdXRlUmVxdWVzdCh7XG5cdFx0ICAgICAgICBvcGVyYXRpb246ICdQTkFjY2Vzc01hbmFnZXJBdWRpdCcsXG5cdFx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdFx0ICAgICAgICBkYXRhOiBkYXRhLFxuXHRcdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICAgIF9pbnZva2VfY2FsbGJhY2socmVzcG9uc2UsIGNhbGxiYWNrLCBlcnIpO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBfaW52b2tlX2Vycm9yKHJlc3BvbnNlLCBlcnIpO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIHVybDogW1xuXHRcdCAgICAgICAgICBTVERfT1JJR0lOLCAndjEnLCAnYXV0aCcsICdhdWRpdCcsXG5cdFx0ICAgICAgICAgICdzdWIta2V5JywgU1VCU0NSSUJFX0tFWVxuXHRcdCAgICAgICAgXVxuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgLypcblx0XHQgICAgIFBVQk5VQi5yZXZva2Uoe1xuXHRcdCAgICAgY2hhbm5lbCAgOiAnbXlfY2hhdCcsXG5cdFx0ICAgICBjYWxsYmFjayA6IGZ1bixcblx0XHQgICAgIGVycm9yICAgIDogZnVuLFxuXHRcdCAgICAgYXV0aF9rZXkgOiAnM3k4dWlhamRrbHl0b3dzaidcblx0XHQgICAgIH0pO1xuXHRcdCAgICAgKi9cblx0XHQgICAgcmV2b2tlOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0XHQgICAgICBhcmdzWydyZWFkJ10gPSBmYWxzZTtcblx0XHQgICAgICBhcmdzWyd3cml0ZSddID0gZmFsc2U7XG5cdFx0ICAgICAgU0VMRlsnZ3JhbnQnXShhcmdzLCBjYWxsYmFjayk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICBzZXRfdXVpZDogZnVuY3Rpb24gKHV1aWQpIHtcblx0XHQgICAgICBVVUlEID0gdXVpZDtcblx0XHQgICAgICBDT05ORUNUKCk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICBnZXRfdXVpZDogZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgIHJldHVybiBVVUlEO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgaXNBcnJheTogZnVuY3Rpb24gKGFyZykge1xuXHRcdCAgICAgIHJldHVybiB1dGlscy5pc0FycmF5KGFyZyk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICBnZXRfc3Vic2NyaWJlZF9jaGFubmVsczogZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgIHJldHVybiBnZW5lcmF0ZV9jaGFubmVsX2xpc3QoQ0hBTk5FTFMsIHRydWUpO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgcHJlc2VuY2VfaGVhcnRiZWF0OiBmdW5jdGlvbiAoYXJncykge1xuXHRcdCAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbJ2NhbGxiYWNrJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIGVyciA9IGFyZ3NbJ2Vycm9yJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdFx0ICAgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblx0XHQgICAgICB2YXIgZGF0YSA9IHsgdXVpZDogVVVJRCwgYXV0aDogQVVUSF9LRVkgfTtcblx0XG5cdFx0ICAgICAgdmFyIHN0ID0gSlNPTlsnc3RyaW5naWZ5J10oU1RBVEUpO1xuXHRcdCAgICAgIGlmIChzdC5sZW5ndGggPiAyKSBkYXRhWydzdGF0ZSddID0gSlNPTlsnc3RyaW5naWZ5J10oU1RBVEUpO1xuXHRcblx0XHQgICAgICBpZiAoUFJFU0VOQ0VfSEIgPiAwICYmIFBSRVNFTkNFX0hCIDwgMzIwKSBkYXRhWydoZWFydGJlYXQnXSA9IFBSRVNFTkNFX0hCO1xuXHRcblx0XHQgICAgICBpZiAoanNvbnAgIT0gJzAnKSB7XG5cdFx0ICAgICAgICBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cdFx0ICAgICAgfVxuXHRcblx0XHQgICAgICB2YXIgY2hhbm5lbHMgPSB1dGlscy5lbmNvZGUoZ2VuZXJhdGVfY2hhbm5lbF9saXN0KENIQU5ORUxTLCB0cnVlKVsnam9pbiddKCcsJykpO1xuXHRcdCAgICAgIHZhciBjaGFubmVsX2dyb3VwcyA9IGdlbmVyYXRlX2NoYW5uZWxfZ3JvdXBfbGlzdChDSEFOTkVMX0dST1VQUywgdHJ1ZSlbJ2pvaW4nXSgnLCcpO1xuXHRcblx0XHQgICAgICBpZiAoIWNoYW5uZWxzKSBjaGFubmVscyA9ICcsJztcblx0XHQgICAgICBpZiAoY2hhbm5lbF9ncm91cHMpIGRhdGFbJ2NoYW5uZWwtZ3JvdXAnXSA9IGNoYW5uZWxfZ3JvdXBzO1xuXHRcblx0XHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cdFxuXHRcdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0XHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0XHQgICAgICAgIGRhdGE6IF9nZXRfdXJsX3BhcmFtcyhkYXRhKSxcblx0XHQgICAgICAgIHVybDogW1xuXHRcdCAgICAgICAgICBTVERfT1JJR0lOLCAndjInLCAncHJlc2VuY2UnLFxuXHRcdCAgICAgICAgICAnc3ViLWtleScsIFNVQlNDUklCRV9LRVksXG5cdFx0ICAgICAgICAgICdjaGFubmVsJywgY2hhbm5lbHMsXG5cdFx0ICAgICAgICAgICdoZWFydGJlYXQnXG5cdFx0ICAgICAgICBdLFxuXHRcdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICAgIF9pbnZva2VfY2FsbGJhY2socmVzcG9uc2UsIGNhbGxiYWNrLCBlcnIpO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICBfaW52b2tlX2Vycm9yKHJlc3BvbnNlLCBlcnIpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9LFxuXHRcblx0XHQgICAgc3RvcF90aW1lcnM6IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICBjbGVhclRpbWVvdXQoX3BvbGxfdGltZXIpO1xuXHRcdCAgICAgIGNsZWFyVGltZW91dChfcG9sbF90aW1lcjIpO1xuXHRcdCAgICAgIGNsZWFyVGltZW91dChQUkVTRU5DRV9IQl9USU1FT1VUKTtcblx0XHQgICAgfSxcblx0XG5cdFx0ICAgIHNodXRkb3duOiBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgU0VMRlsnc3RvcF90aW1lcnMnXSgpO1xuXHRcdCAgICAgIHNodXRkb3duICYmIHNodXRkb3duKCk7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICAvLyBFeHBvc2UgUFVCTlVCIEZ1bmN0aW9uc1xuXHRcdCAgICB4ZHI6IHhkcixcblx0XHQgICAgcmVhZHk6IHJlYWR5LFxuXHRcdCAgICBkYjogZGIsXG5cdFx0ICAgIHV1aWQ6IHV0aWxzLmdlbmVyYXRlVVVJRCxcblx0XHQgICAgbWFwOiB1dGlscy5tYXAsXG5cdFx0ICAgIGVhY2g6IHV0aWxzLmVhY2gsXG5cdFx0ICAgICdlYWNoLWNoYW5uZWwnOiBlYWNoX2NoYW5uZWwsXG5cdFx0ICAgIGdyZXA6IHV0aWxzLmdyZXAsXG5cdFx0ICAgIG9mZmxpbmU6IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICBfcmVzZXRfb2ZmbGluZSgxLCB7IG1lc3NhZ2U6ICdPZmZsaW5lLiBQbGVhc2UgY2hlY2sgeW91ciBuZXR3b3JrIHNldHRpbmdzLicgfSk7XG5cdFx0ICAgIH0sXG5cdFx0ICAgIHN1cHBsYW50OiB1dGlscy5zdXBwbGFudCxcblx0XHQgICAgbm93OiB1dGlscy5ybm93LFxuXHRcdCAgICB1bmlxdWU6IHVuaXF1ZSxcblx0XHQgICAgdXBkYXRlcjogdXRpbHMudXBkYXRlclxuXHRcdCAgfTtcblx0XG5cdFx0ICBmdW5jdGlvbiBfcG9sbF9vbmxpbmUoKSB7XG5cdFx0ICAgIF9pc19vbmxpbmUoKSB8fCBfcmVzZXRfb2ZmbGluZSgxLCB7IGVycm9yOiAnT2ZmbGluZS4gUGxlYXNlIGNoZWNrIHlvdXIgbmV0d29yayBzZXR0aW5ncy4nIH0pO1xuXHRcdCAgICBfcG9sbF90aW1lciAmJiBjbGVhclRpbWVvdXQoX3BvbGxfdGltZXIpO1xuXHRcdCAgICBfcG9sbF90aW1lciA9IHV0aWxzLnRpbWVvdXQoX3BvbGxfb25saW5lLCBTRUNPTkQpO1xuXHRcdCAgfVxuXHRcblx0XHQgIGZ1bmN0aW9uIF9wb2xsX29ubGluZTIoKSB7XG5cdFx0ICAgIGlmICghVElNRV9DSEVDSykgcmV0dXJuO1xuXHRcdCAgICBTRUxGWyd0aW1lJ10oZnVuY3Rpb24gKHN1Y2Nlc3MpIHtcblx0XHQgICAgICBkZXRlY3RfdGltZV9kZXRsYShmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgfSwgc3VjY2Vzcyk7XG5cdFx0ICAgICAgc3VjY2VzcyB8fCBfcmVzZXRfb2ZmbGluZSgxLCB7XG5cdFx0ICAgICAgICBlcnJvcjogJ0hlYXJ0YmVhdCBmYWlsZWQgdG8gY29ubmVjdCB0byBQdWJudWIgU2VydmVycy4nICtcblx0XHQgICAgICAgICdQbGVhc2UgY2hlY2sgeW91ciBuZXR3b3JrIHNldHRpbmdzLidcblx0XHQgICAgICB9KTtcblx0XHQgICAgICBfcG9sbF90aW1lcjIgJiYgY2xlYXJUaW1lb3V0KF9wb2xsX3RpbWVyMik7XG5cdFx0ICAgICAgX3BvbGxfdGltZXIyID0gdXRpbHMudGltZW91dChfcG9sbF9vbmxpbmUyLCBLRUVQQUxJVkUpO1xuXHRcdCAgICB9KTtcblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiBfcmVzZXRfb2ZmbGluZShlcnIsIG1zZykge1xuXHRcdCAgICBTVUJfUkVDRUlWRVIgJiYgU1VCX1JFQ0VJVkVSKGVyciwgbXNnKTtcblx0XHQgICAgU1VCX1JFQ0VJVkVSID0gbnVsbDtcblx0XG5cdFx0ICAgIGNsZWFyVGltZW91dChfcG9sbF90aW1lcik7XG5cdFx0ICAgIGNsZWFyVGltZW91dChfcG9sbF90aW1lcjIpO1xuXHRcdCAgfVxuXHRcblx0XHQgIGlmICghVVVJRCkgVVVJRCA9IFNFTEZbJ3V1aWQnXSgpO1xuXHRcdCAgaWYgKCFJTlNUQU5DRUlEKSBJTlNUQU5DRUlEID0gU0VMRlsndXVpZCddKCk7XG5cdFx0ICBkYlsnc2V0J10oU1VCU0NSSUJFX0tFWSArICd1dWlkJywgVVVJRCk7XG5cdFxuXHRcdCAgX3BvbGxfdGltZXIgPSB1dGlscy50aW1lb3V0KF9wb2xsX29ubGluZSwgU0VDT05EKTtcblx0XHQgIF9wb2xsX3RpbWVyMiA9IHV0aWxzLnRpbWVvdXQoX3BvbGxfb25saW5lMiwgS0VFUEFMSVZFKTtcblx0XHQgIFBSRVNFTkNFX0hCX1RJTUVPVVQgPSB1dGlscy50aW1lb3V0KFxuXHRcdCAgICBzdGFydF9wcmVzZW5jZV9oZWFydGJlYXQsXG5cdFx0ICAgIChQUkVTRU5DRV9IQl9JTlRFUlZBTCAtIDMpICogU0VDT05EXG5cdFx0ICApO1xuXHRcblx0XHQgIC8vIERldGVjdCBBZ2Ugb2YgTWVzc2FnZVxuXHRcdCAgZnVuY3Rpb24gZGV0ZWN0X2xhdGVuY3kodHQpIHtcblx0XHQgICAgdmFyIGFkanVzdGVkX3RpbWUgPSB1dGlscy5ybm93KCkgLSBUSU1FX0RSSUZUO1xuXHRcdCAgICByZXR1cm4gYWRqdXN0ZWRfdGltZSAtIHR0IC8gMTAwMDA7XG5cdFx0ICB9XG5cdFxuXHRcdCAgZGV0ZWN0X3RpbWVfZGV0bGEoKTtcblx0XHQgIGZ1bmN0aW9uIGRldGVjdF90aW1lX2RldGxhKGNiLCB0aW1lKSB7XG5cdFx0ICAgIHZhciBzdGltZSA9IHV0aWxzLnJub3coKTtcblx0XG5cdFx0ICAgIHRpbWUgJiYgY2FsY3VsYXRlKHRpbWUpIHx8IFNFTEZbJ3RpbWUnXShjYWxjdWxhdGUpO1xuXHRcblx0XHQgICAgZnVuY3Rpb24gY2FsY3VsYXRlKHRpbWUpIHtcblx0XHQgICAgICBpZiAoIXRpbWUpIHJldHVybjtcblx0XHQgICAgICB2YXIgcHRpbWUgPSB0aW1lIC8gMTAwMDA7XG5cdFx0ICAgICAgdmFyIGxhdGVuY3kgPSAodXRpbHMucm5vdygpIC0gc3RpbWUpIC8gMjtcblx0XHQgICAgICBUSU1FX0RSSUZUID0gdXRpbHMucm5vdygpIC0gKHB0aW1lICsgbGF0ZW5jeSk7XG5cdFx0ICAgICAgY2IgJiYgY2IoVElNRV9EUklGVCk7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XG5cdFx0ICByZXR1cm4gU0VMRjtcblx0XHR9XG5cdFxuXHRcdG1vZHVsZS5leHBvcnRzID0ge1xuXHRcdCAgUE5fQVBJOiBQTl9BUEksXG5cdFx0ICB1bmlxdWU6IHVuaXF1ZSxcblx0XHQgIFBObWVzc2FnZTogUE5tZXNzYWdlLFxuXHRcdCAgREVGX1RJTUVPVVQ6IERFRl9USU1FT1VULFxuXHRcdCAgdGltZW91dDogdXRpbHMudGltZW91dCxcblx0XHQgIGJ1aWxkX3VybDogdXRpbHMuYnVpbGRVUkwsXG5cdFx0ICBlYWNoOiB1dGlscy5lYWNoLFxuXHRcdCAgdXVpZDogdXRpbHMuZ2VuZXJhdGVVVUlELFxuXHRcdCAgVVJMQklUOiBkZWZhdWx0Q29uZmlndXJhdGlvbi5VUkxCSVQsXG5cdFx0ICBncmVwOiB1dGlscy5ncmVwLFxuXHRcdCAgc3VwcGxhbnQ6IHV0aWxzLnN1cHBsYW50LFxuXHRcdCAgbm93OiB1dGlscy5ybm93LFxuXHRcdCAgdXBkYXRlcjogdXRpbHMudXBkYXRlcixcblx0XHQgIG1hcDogdXRpbHMubWFwXG5cdFx0fTtcblx0XG5cdFxuXHQvKioqLyB9LFxuXHQvKiAyICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXHRcblx0XHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0XHRcdFwibmFtZVwiOiBcInB1Ym51YlwiLFxuXHRcdFx0XCJwcmVmZXJHbG9iYWxcIjogZmFsc2UsXG5cdFx0XHRcInZlcnNpb25cIjogXCIzLjE2LjNcIixcblx0XHRcdFwiYXV0aG9yXCI6IFwiUHViTnViIDxzdXBwb3J0QHB1Ym51Yi5jb20+XCIsXG5cdFx0XHRcImRlc2NyaXB0aW9uXCI6IFwiUHVibGlzaCAmIFN1YnNjcmliZSBSZWFsLXRpbWUgTWVzc2FnaW5nIHdpdGggUHViTnViXCIsXG5cdFx0XHRcImNvbnRyaWJ1dG9yc1wiOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRcIm5hbWVcIjogXCJTdGVwaGVuIEJsdW1cIixcblx0XHRcdFx0XHRcImVtYWlsXCI6IFwic3RlcGhlbkBwdWJudWIuY29tXCJcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdFwiYmluXCI6IHt9LFxuXHRcdFx0XCJzY3JpcHRzXCI6IHtcblx0XHRcdFx0XCJ0ZXN0XCI6IFwiZ3J1bnQgdGVzdCAtLWZvcmNlXCJcblx0XHRcdH0sXG5cdFx0XHRcIm1haW5cIjogXCIuL25vZGUuanMvcHVibnViLmpzXCIsXG5cdFx0XHRcImJyb3dzZXJcIjogXCIuL21vZGVybi9kaXN0L3B1Ym51Yi5qc1wiLFxuXHRcdFx0XCJyZXBvc2l0b3J5XCI6IHtcblx0XHRcdFx0XCJ0eXBlXCI6IFwiZ2l0XCIsXG5cdFx0XHRcdFwidXJsXCI6IFwiZ2l0Oi8vZ2l0aHViLmNvbS9wdWJudWIvamF2YXNjcmlwdC5naXRcIlxuXHRcdFx0fSxcblx0XHRcdFwia2V5d29yZHNcIjogW1xuXHRcdFx0XHRcImNsb3VkXCIsXG5cdFx0XHRcdFwicHVibGlzaFwiLFxuXHRcdFx0XHRcInN1YnNjcmliZVwiLFxuXHRcdFx0XHRcIndlYnNvY2tldHNcIixcblx0XHRcdFx0XCJjb21ldFwiLFxuXHRcdFx0XHRcImJvc2hcIixcblx0XHRcdFx0XCJ4bXBwXCIsXG5cdFx0XHRcdFwicmVhbC10aW1lXCIsXG5cdFx0XHRcdFwibWVzc2FnaW5nXCJcblx0XHRcdF0sXG5cdFx0XHRcImRlcGVuZGVuY2llc1wiOiB7XG5cdFx0XHRcdFwiYWdlbnRrZWVwYWxpdmVcIjogXCJ+MC4yXCIsXG5cdFx0XHRcdFwibG9kYXNoXCI6IFwiXjQuMS4wXCJcblx0XHRcdH0sXG5cdFx0XHRcIm5vQW5hbHl6ZVwiOiBmYWxzZSxcblx0XHRcdFwiZGV2RGVwZW5kZW5jaWVzXCI6IHtcblx0XHRcdFx0XCJjaGFpXCI6IFwiXjMuNS4wXCIsXG5cdFx0XHRcdFwiZXNsaW50XCI6IFwiMi40LjBcIixcblx0XHRcdFx0XCJlc2xpbnQtY29uZmlnLWFpcmJuYlwiOiBcIl42LjAuMlwiLFxuXHRcdFx0XHRcImVzbGludC1wbHVnaW4tZmxvd3R5cGVcIjogXCJeMi4xLjBcIixcblx0XHRcdFx0XCJlc2xpbnQtcGx1Z2luLW1vY2hhXCI6IFwiXjIuMC4wXCIsXG5cdFx0XHRcdFwiZXNsaW50LXBsdWdpbi1yZWFjdFwiOiBcIl40LjEuMFwiLFxuXHRcdFx0XHRcImZsb3ctYmluXCI6IFwiXjAuMjIuMFwiLFxuXHRcdFx0XHRcImdydW50XCI6IFwiXjAuNC41XCIsXG5cdFx0XHRcdFwiZ3J1bnQtY29udHJpYi1jbGVhblwiOiBcIl4xLjAuMFwiLFxuXHRcdFx0XHRcImdydW50LWNvbnRyaWItY29weVwiOiBcIl4wLjguMlwiLFxuXHRcdFx0XHRcImdydW50LWNvbnRyaWItdWdsaWZ5XCI6IFwiXjAuMTEuMVwiLFxuXHRcdFx0XHRcImdydW50LWVudlwiOiBcIl4wLjQuNFwiLFxuXHRcdFx0XHRcImdydW50LWVzbGludFwiOiBcIl4xOC4wLjBcIixcblx0XHRcdFx0XCJncnVudC1mbG93XCI6IFwiXjEuMC4zXCIsXG5cdFx0XHRcdFwiZ3J1bnQta2FybWFcIjogXCJeMC4xMi4xXCIsXG5cdFx0XHRcdFwiZ3J1bnQtbW9jaGEtaXN0YW5idWxcIjogXCJeMy4wLjFcIixcblx0XHRcdFx0XCJncnVudC10ZXh0LXJlcGxhY2VcIjogXCJeMC40LjBcIixcblx0XHRcdFx0XCJncnVudC13ZWJwYWNrXCI6IFwiXjEuMC4xMVwiLFxuXHRcdFx0XHRcImltcG9ydHMtbG9hZGVyXCI6IFwiXjAuNi41XCIsXG5cdFx0XHRcdFwiaXNwYXJ0YVwiOiBcIl40LjAuMFwiLFxuXHRcdFx0XHRcImpzb24tbG9hZGVyXCI6IFwiXjAuNS40XCIsXG5cdFx0XHRcdFwia2FybWFcIjogXCJeMC4xMy4yMVwiLFxuXHRcdFx0XHRcImthcm1hLWNoYWlcIjogXCJeMC4xLjBcIixcblx0XHRcdFx0XCJrYXJtYS1tb2NoYVwiOiBcIl4wLjIuMVwiLFxuXHRcdFx0XHRcImthcm1hLXBoYW50b21qcy1sYXVuY2hlclwiOiBcIl4xLjAuMFwiLFxuXHRcdFx0XHRcImthcm1hLXNwZWMtcmVwb3J0ZXJcIjogXCIwLjAuMjRcIixcblx0XHRcdFx0XCJsb2FkLWdydW50LXRhc2tzXCI6IFwiXjMuNC4wXCIsXG5cdFx0XHRcdFwibW9jaGFcIjogXCJeMi40LjVcIixcblx0XHRcdFx0XCJub2NrXCI6IFwiXjEuMS4wXCIsXG5cdFx0XHRcdFwibm9kZS11dWlkXCI6IFwiXjEuNC43XCIsXG5cdFx0XHRcdFwibm9kZXVuaXRcIjogXCJeMC45LjBcIixcblx0XHRcdFx0XCJwaGFudG9tanMtcHJlYnVpbHRcIjogXCJeMi4xLjRcIixcblx0XHRcdFx0XCJwcm94eXF1aXJlXCI6IFwiXjEuNy40XCIsXG5cdFx0XHRcdFwic2lub25cIjogXCJeMS4xNy4yXCIsXG5cdFx0XHRcdFwidWdsaWZ5LWpzXCI6IFwiXjIuNi4xXCIsXG5cdFx0XHRcdFwidW5kZXJzY29yZVwiOiBcIl4xLjcuMFwiLFxuXHRcdFx0XHRcIndlYnBhY2tcIjogXCJeMS4xMi4xM1wiLFxuXHRcdFx0XHRcIndlYnBhY2stZGV2LXNlcnZlclwiOiBcIl4xLjE0LjFcIlxuXHRcdFx0fSxcblx0XHRcdFwiYnVuZGxlRGVwZW5kZW5jaWVzXCI6IFtdLFxuXHRcdFx0XCJsaWNlbnNlXCI6IFwiTUlUXCIsXG5cdFx0XHRcImVuZ2luZVwiOiB7XG5cdFx0XHRcdFwibm9kZVwiOiBcIj49MC44XCJcblx0XHRcdH0sXG5cdFx0XHRcImZpbGVzXCI6IFtcblx0XHRcdFx0XCJjb3JlXCIsXG5cdFx0XHRcdFwibm9kZS5qc1wiLFxuXHRcdFx0XHRcIm1vZGVyblwiLFxuXHRcdFx0XHRcIkNIQU5HRUxPR1wiLFxuXHRcdFx0XHRcIkZVVFVSRS5tZFwiLFxuXHRcdFx0XHRcIkxJQ0VOU0VcIixcblx0XHRcdFx0XCJSRUFETUUubWRcIlxuXHRcdFx0XVxuXHRcdH07XG5cdFxuXHQvKioqLyB9LFxuXHQvKiAzICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXHRcblx0XHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0XHRcdFwiUEFSQU1TQklUXCI6IFwiJlwiLFxuXHRcdFx0XCJVUkxCSVRcIjogXCIvXCJcblx0XHR9O1xuXHRcblx0LyoqKi8gfSxcblx0LyogNCAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblx0XG5cdFx0LyogZXNsaW50IG5vLXVudXNlZC1leHByZXNzaW9uczogMCwgYmxvY2stc2NvcGVkLXZhcjogMCwgbm8tcmVkZWNsYXJlOiAwLCBndWFyZC1mb3ItaW46IDAgKi9cblx0XG5cdFx0dmFyIGRlZmF1bHRDb25maWd1cmF0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XHR2YXIgUkVQTCA9IC97KFtcXHdcXC1dKyl9L2c7XG5cdFxuXHRcdGZ1bmN0aW9uIHJub3coKSB7XG5cdFx0ICByZXR1cm4gK25ldyBEYXRlO1xuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcblx0XHQgIHJldHVybiAhIWFyZyAmJiB0eXBlb2YgYXJnICE9PSAnc3RyaW5nJyAmJiAoQXJyYXkuaXNBcnJheSAmJiBBcnJheS5pc0FycmF5KGFyZykgfHwgdHlwZW9mKGFyZy5sZW5ndGgpID09PSAnbnVtYmVyJyk7XG5cdFx0ICAvLyByZXR1cm4gISFhcmcgJiYgKEFycmF5LmlzQXJyYXkgJiYgQXJyYXkuaXNBcnJheShhcmcpIHx8IHR5cGVvZihhcmcubGVuZ3RoKSA9PT0gXCJudW1iZXJcIilcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIEVBQ0hcblx0XHQgKiA9PT09XG5cdFx0ICogZWFjaCggWzEsMiwzXSwgZnVuY3Rpb24oaXRlbSkgeyB9IClcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBlYWNoKG8sIGYpIHtcblx0XHQgIGlmICghbyB8fCAhZikge1xuXHRcdCAgICByZXR1cm47XG5cdFx0ICB9XG5cdFxuXHRcdCAgaWYgKGlzQXJyYXkobykpIHtcblx0XHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvLmxlbmd0aDsgaSA8IGw7KSB7XG5cdFx0ICAgICAgZi5jYWxsKG9baV0sIG9baV0sIGkrKyk7XG5cdFx0ICAgIH1cblx0XHQgIH0gZWxzZSB7XG5cdFx0ICAgIGZvciAodmFyIGkgaW4gbykge1xuXHRcdCAgICAgIG8uaGFzT3duUHJvcGVydHkgJiZcblx0XHQgICAgICBvLmhhc093blByb3BlcnR5KGkpICYmXG5cdFx0ICAgICAgZi5jYWxsKG9baV0sIGksIG9baV0pO1xuXHRcdCAgICB9XG5cdFx0ICB9XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBFTkNPREVcblx0XHQgKiA9PT09PT1cblx0XHQgKiB2YXIgZW5jb2RlZF9kYXRhID0gZW5jb2RlKCdwYXRoJyk7XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZW5jb2RlKHBhdGgpIHsgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChwYXRoKTsgfVxuXHRcblx0XHQvKipcblx0XHQgKiBCdWlsZCBVcmxcblx0XHQgKiA9PT09PT09XG5cdFx0ICpcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBidWlsZFVSTCh1cmxDb21wb25lbnRzLCB1cmxQYXJhbXMpIHtcblx0XHQgIHZhciB1cmwgPSB1cmxDb21wb25lbnRzLmpvaW4oZGVmYXVsdENvbmZpZ3VyYXRpb24uVVJMQklUKTtcblx0XHQgIHZhciBwYXJhbXMgPSBbXTtcblx0XG5cdFx0ICBpZiAoIXVybFBhcmFtcykgcmV0dXJuIHVybDtcblx0XG5cdFx0ICBlYWNoKHVybFBhcmFtcywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0XHQgICAgdmFyIHZhbHVlU3RyID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpID8gSlNPTlsnc3RyaW5naWZ5J10odmFsdWUpIDogdmFsdWU7XG5cdFx0ICAgICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG5cdFx0ICAgICAgdmFsdWUgIT09IG51bGwgJiYgZW5jb2RlKHZhbHVlU3RyKS5sZW5ndGggPiAwXG5cdFx0ICAgICkgJiYgcGFyYW1zLnB1c2goa2V5ICsgJz0nICsgZW5jb2RlKHZhbHVlU3RyKSk7XG5cdFx0ICB9KTtcblx0XG5cdFx0ICB1cmwgKz0gJz8nICsgcGFyYW1zLmpvaW4oZGVmYXVsdENvbmZpZ3VyYXRpb24uUEFSQU1TQklUKTtcblx0XHQgIHJldHVybiB1cmw7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBVUERBVEVSXG5cdFx0ICogPT09PT09PVxuXHRcdCAqIHZhciB0aW1lc3RhbXAgPSB1bmlxdWUoKTtcblx0XHQgKi9cblx0XHRmdW5jdGlvbiB1cGRhdGVyKGZ1biwgcmF0ZSkge1xuXHRcdCAgdmFyIHRpbWVvdXQ7XG5cdFx0ICB2YXIgbGFzdCA9IDA7XG5cdFx0ICB2YXIgcnVubml0ID0gZnVuY3Rpb24gKCkge1xuXHRcdCAgICBpZiAobGFzdCArIHJhdGUgPiBybm93KCkpIHtcblx0XHQgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0ICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQocnVubml0LCByYXRlKTtcblx0XHQgICAgfSBlbHNlIHtcblx0XHQgICAgICBsYXN0ID0gcm5vdygpO1xuXHRcdCAgICAgIGZ1bigpO1xuXHRcdCAgICB9XG5cdFx0ICB9O1xuXHRcblx0XHQgIHJldHVybiBydW5uaXQ7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBHUkVQXG5cdFx0ICogPT09PVxuXHRcdCAqIHZhciBsaXN0ID0gZ3JlcCggWzEsMiwzXSwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbSAlIDIgfSApXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZ3JlcChsaXN0LCBmdW4pIHtcblx0XHQgIHZhciBmaW4gPSBbXTtcblx0XHQgIGVhY2gobGlzdCB8fCBbXSwgZnVuY3Rpb24gKGwpIHtcblx0XHQgICAgZnVuKGwpICYmIGZpbi5wdXNoKGwpO1xuXHRcdCAgfSk7XG5cdFx0ICByZXR1cm4gZmluO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogU1VQUExBTlRcblx0XHQgKiA9PT09PT09PVxuXHRcdCAqIHZhciB0ZXh0ID0gc3VwcGxhbnQoICdIZWxsbyB7bmFtZX0hJywgeyBuYW1lIDogJ0pvaG4nIH0gKVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHN1cHBsYW50KHN0ciwgdmFsdWVzKSB7XG5cdFx0ICByZXR1cm4gc3RyLnJlcGxhY2UoUkVQTCwgZnVuY3Rpb24gKF8sIG1hdGNoKSB7XG5cdFx0ICAgIHJldHVybiB2YWx1ZXNbbWF0Y2hdIHx8IF87XG5cdFx0ICB9KTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIHRpbWVvdXRcblx0XHQgKiA9PT09PT09XG5cdFx0ICogdGltZW91dCggZnVuY3Rpb24oKXt9LCAxMDAgKTtcblx0XHQgKi9cblx0XHRmdW5jdGlvbiB0aW1lb3V0KGZ1biwgd2FpdCkge1xuXHRcdCAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAndW5kZWZpbmVkJykge1xuXHRcdCAgICByZXR1cm47XG5cdFx0ICB9XG5cdFxuXHRcdCAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCB3YWl0KTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIHV1aWRcblx0XHQgKiA9PT09XG5cdFx0ICogdmFyIG15X3V1aWQgPSBnZW5lcmF0ZVVVSUQoKTtcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBnZW5lcmF0ZVVVSUQoY2FsbGJhY2spIHtcblx0XHQgIHZhciB1ID0gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLFxuXHRcdCAgICBmdW5jdGlvbiAoYykge1xuXHRcdCAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMDtcblx0XHQgICAgICB2YXIgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XG5cdFx0ICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuXHRcdCAgICB9KTtcblx0XHQgIGlmIChjYWxsYmFjaykgY2FsbGJhY2sodSk7XG5cdFx0ICByZXR1cm4gdTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIE1BUFxuXHRcdCAqID09PVxuXHRcdCAqIHZhciBsaXN0ID0gbWFwKCBbMSwyLDNdLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtICsgMSB9IClcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBtYXAobGlzdCwgZnVuKSB7XG5cdFx0ICB2YXIgZmluID0gW107XG5cdFx0ICBlYWNoKGxpc3QgfHwgW10sIGZ1bmN0aW9uIChrLCB2KSB7XG5cdFx0ICAgIGZpbi5wdXNoKGZ1bihrLCB2KSk7XG5cdFx0ICB9KTtcblx0XHQgIHJldHVybiBmaW47XG5cdFx0fVxuXHRcblx0XG5cdFx0ZnVuY3Rpb24gcGFtRW5jb2RlKHN0cikge1xuXHRcdCAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoL1shJygpKn5dL2csIGZ1bmN0aW9uIChjKSB7XG5cdFx0ICAgIHJldHVybiAnJScgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cdFx0ICB9KTtcblx0XHR9XG5cdFxuXHRcblx0XHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0XHQgIGJ1aWxkVVJMOiBidWlsZFVSTCxcblx0XHQgIGVuY29kZTogZW5jb2RlLFxuXHRcdCAgZWFjaDogZWFjaCxcblx0XHQgIHVwZGF0ZXI6IHVwZGF0ZXIsXG5cdFx0ICBybm93OiBybm93LFxuXHRcdCAgaXNBcnJheTogaXNBcnJheSxcblx0XHQgIG1hcDogbWFwLFxuXHRcdCAgcGFtRW5jb2RlOiBwYW1FbmNvZGUsXG5cdFx0ICBnZW5lcmF0ZVVVSUQ6IGdlbmVyYXRlVVVJRCxcblx0XHQgIHRpbWVvdXQ6IHRpbWVvdXQsXG5cdFx0ICBzdXBwbGFudDogc3VwcGxhbnQsXG5cdFx0ICBncmVwOiBncmVwXG5cdFx0fTtcblx0XG5cdFxuXHQvKioqLyB9LFxuXHQvKiA1ICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0XHQvKiBlc2xpbnQgY2FtZWxjYXNlOiAwIGVxZXFlcTogMCAqL1xuXHRcblx0XHR2YXIgQ3J5cHRvSlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0XHRmdW5jdGlvbiBjcnlwdG9fb2JqKCkge1xuXHRcdCAgZnVuY3Rpb24gU0hBMjU2KHMpIHtcblx0XHQgICAgcmV0dXJuIENyeXB0b0pTWydTSEEyNTYnXShzKVsndG9TdHJpbmcnXShDcnlwdG9KU1snZW5jJ11bJ0hleCddKTtcblx0XHQgIH1cblx0XG5cdFx0ICB2YXIgaXYgPSAnMDEyMzQ1Njc4OTAxMjM0NSc7XG5cdFxuXHRcdCAgdmFyIGFsbG93ZWRLZXlFbmNvZGluZ3MgPSBbJ2hleCcsICd1dGY4JywgJ2Jhc2U2NCcsICdiaW5hcnknXTtcblx0XHQgIHZhciBhbGxvd2VkS2V5TGVuZ3RocyA9IFsxMjgsIDI1Nl07XG5cdFx0ICB2YXIgYWxsb3dlZE1vZGVzID0gWydlY2InLCAnY2JjJ107XG5cdFxuXHRcdCAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuXHRcdCAgICBlbmNyeXB0S2V5OiB0cnVlLFxuXHRcdCAgICBrZXlFbmNvZGluZzogJ3V0ZjgnLFxuXHRcdCAgICBrZXlMZW5ndGg6IDI1Nixcblx0XHQgICAgbW9kZTogJ2NiYydcblx0XHQgIH07XG5cdFxuXHRcdCAgZnVuY3Rpb24gcGFyc2Vfb3B0aW9ucyhvcHRpb25zKSB7XG5cdFx0ICAgIC8vIERlZmF1bHRzXG5cdFx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdCAgICBpZiAoIW9wdGlvbnNbJ2hhc093blByb3BlcnR5J10oJ2VuY3J5cHRLZXknKSkgb3B0aW9uc1snZW5jcnlwdEtleSddID0gZGVmYXVsdE9wdGlvbnNbJ2VuY3J5cHRLZXknXTtcblx0XHQgICAgaWYgKCFvcHRpb25zWydoYXNPd25Qcm9wZXJ0eSddKCdrZXlFbmNvZGluZycpKSBvcHRpb25zWydrZXlFbmNvZGluZyddID0gZGVmYXVsdE9wdGlvbnNbJ2tleUVuY29kaW5nJ107XG5cdFx0ICAgIGlmICghb3B0aW9uc1snaGFzT3duUHJvcGVydHknXSgna2V5TGVuZ3RoJykpIG9wdGlvbnNbJ2tleUxlbmd0aCddID0gZGVmYXVsdE9wdGlvbnNbJ2tleUxlbmd0aCddO1xuXHRcdCAgICBpZiAoIW9wdGlvbnNbJ2hhc093blByb3BlcnR5J10oJ21vZGUnKSkgb3B0aW9uc1snbW9kZSddID0gZGVmYXVsdE9wdGlvbnNbJ21vZGUnXTtcblx0XG5cdFx0ICAgIC8vIFZhbGlkYXRpb25cblx0XHQgICAgaWYgKGFsbG93ZWRLZXlFbmNvZGluZ3NbJ2luZGV4T2YnXShvcHRpb25zWydrZXlFbmNvZGluZyddWyd0b0xvd2VyQ2FzZSddKCkpID09IC0xKSBvcHRpb25zWydrZXlFbmNvZGluZyddID0gZGVmYXVsdE9wdGlvbnNbJ2tleUVuY29kaW5nJ107XG5cdFx0ICAgIGlmIChhbGxvd2VkS2V5TGVuZ3Roc1snaW5kZXhPZiddKHBhcnNlSW50KG9wdGlvbnNbJ2tleUxlbmd0aCddLCAxMCkpID09IC0xKSBvcHRpb25zWydrZXlMZW5ndGgnXSA9IGRlZmF1bHRPcHRpb25zWydrZXlMZW5ndGgnXTtcblx0XHQgICAgaWYgKGFsbG93ZWRNb2Rlc1snaW5kZXhPZiddKG9wdGlvbnNbJ21vZGUnXVsndG9Mb3dlckNhc2UnXSgpKSA9PSAtMSkgb3B0aW9uc1snbW9kZSddID0gZGVmYXVsdE9wdGlvbnNbJ21vZGUnXTtcblx0XG5cdFx0ICAgIHJldHVybiBvcHRpb25zO1xuXHRcdCAgfVxuXHRcblx0XHQgIGZ1bmN0aW9uIGRlY29kZV9rZXkoa2V5LCBvcHRpb25zKSB7XG5cdFx0ICAgIGlmIChvcHRpb25zWydrZXlFbmNvZGluZyddID09PSAnYmFzZTY0Jykge1xuXHRcdCAgICAgIHJldHVybiBDcnlwdG9KU1snZW5jJ11bJ0Jhc2U2NCddWydwYXJzZSddKGtleSk7XG5cdFx0ICAgIH0gZWxzZSBpZiAob3B0aW9uc1sna2V5RW5jb2RpbmcnXSA9PT0gJ2hleCcpIHtcblx0XHQgICAgICByZXR1cm4gQ3J5cHRvSlNbJ2VuYyddWydIZXgnXVsncGFyc2UnXShrZXkpO1xuXHRcdCAgICB9IGVsc2Uge1xuXHRcdCAgICAgIHJldHVybiBrZXk7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XG5cdFx0ICBmdW5jdGlvbiBnZXRfcGFkZGVkX2tleShrZXksIG9wdGlvbnMpIHtcblx0XHQgICAga2V5ID0gZGVjb2RlX2tleShrZXksIG9wdGlvbnMpO1xuXHRcdCAgICBpZiAob3B0aW9uc1snZW5jcnlwdEtleSddKSB7XG5cdFx0ICAgICAgcmV0dXJuIENyeXB0b0pTWydlbmMnXVsnVXRmOCddWydwYXJzZSddKFNIQTI1NihrZXkpWydzbGljZSddKDAsIDMyKSk7XG5cdFx0ICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgcmV0dXJuIGtleTtcblx0XHQgICAgfVxuXHRcdCAgfVxuXHRcblx0XHQgIGZ1bmN0aW9uIGdldF9tb2RlKG9wdGlvbnMpIHtcblx0XHQgICAgaWYgKG9wdGlvbnNbJ21vZGUnXSA9PT0gJ2VjYicpIHtcblx0XHQgICAgICByZXR1cm4gQ3J5cHRvSlNbJ21vZGUnXVsnRUNCJ107XG5cdFx0ICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgcmV0dXJuIENyeXB0b0pTWydtb2RlJ11bJ0NCQyddO1xuXHRcdCAgICB9XG5cdFx0ICB9XG5cdFxuXHRcdCAgZnVuY3Rpb24gZ2V0X2l2KG9wdGlvbnMpIHtcblx0XHQgICAgcmV0dXJuIChvcHRpb25zWydtb2RlJ10gPT09ICdjYmMnKSA/IENyeXB0b0pTWydlbmMnXVsnVXRmOCddWydwYXJzZSddKGl2KSA6IG51bGw7XG5cdFx0ICB9XG5cdFxuXHRcdCAgcmV0dXJuIHtcblx0XHQgICAgZW5jcnlwdDogZnVuY3Rpb24gKGRhdGEsIGtleSwgb3B0aW9ucykge1xuXHRcdCAgICAgIGlmICgha2V5KSByZXR1cm4gZGF0YTtcblx0XHQgICAgICBvcHRpb25zID0gcGFyc2Vfb3B0aW9ucyhvcHRpb25zKTtcblx0XHQgICAgICB2YXIgaXYgPSBnZXRfaXYob3B0aW9ucyk7XG5cdFx0ICAgICAgdmFyIG1vZGUgPSBnZXRfbW9kZShvcHRpb25zKTtcblx0XHQgICAgICB2YXIgY2lwaGVyX2tleSA9IGdldF9wYWRkZWRfa2V5KGtleSwgb3B0aW9ucyk7XG5cdFx0ICAgICAgdmFyIGhleF9tZXNzYWdlID0gSlNPTlsnc3RyaW5naWZ5J10oZGF0YSk7XG5cdFx0ICAgICAgdmFyIGVuY3J5cHRlZEhleEFycmF5ID0gQ3J5cHRvSlNbJ0FFUyddWydlbmNyeXB0J10oaGV4X21lc3NhZ2UsIGNpcGhlcl9rZXksIHsgaXY6IGl2LCBtb2RlOiBtb2RlIH0pWydjaXBoZXJ0ZXh0J107XG5cdFx0ICAgICAgdmFyIGJhc2VfNjRfZW5jcnlwdGVkID0gZW5jcnlwdGVkSGV4QXJyYXlbJ3RvU3RyaW5nJ10oQ3J5cHRvSlNbJ2VuYyddWydCYXNlNjQnXSk7XG5cdFx0ICAgICAgcmV0dXJuIGJhc2VfNjRfZW5jcnlwdGVkIHx8IGRhdGE7XG5cdFx0ICAgIH0sXG5cdFxuXHRcdCAgICBkZWNyeXB0OiBmdW5jdGlvbiAoZGF0YSwga2V5LCBvcHRpb25zKSB7XG5cdFx0ICAgICAgaWYgKCFrZXkpIHJldHVybiBkYXRhO1xuXHRcdCAgICAgIG9wdGlvbnMgPSBwYXJzZV9vcHRpb25zKG9wdGlvbnMpO1xuXHRcdCAgICAgIHZhciBpdiA9IGdldF9pdihvcHRpb25zKTtcblx0XHQgICAgICB2YXIgbW9kZSA9IGdldF9tb2RlKG9wdGlvbnMpO1xuXHRcdCAgICAgIHZhciBjaXBoZXJfa2V5ID0gZ2V0X3BhZGRlZF9rZXkoa2V5LCBvcHRpb25zKTtcblx0XHQgICAgICB0cnkge1xuXHRcdCAgICAgICAgdmFyIGJpbmFyeV9lbmMgPSBDcnlwdG9KU1snZW5jJ11bJ0Jhc2U2NCddWydwYXJzZSddKGRhdGEpO1xuXHRcdCAgICAgICAgdmFyIGpzb25fcGxhaW4gPSBDcnlwdG9KU1snQUVTJ11bJ2RlY3J5cHQnXSh7IGNpcGhlcnRleHQ6IGJpbmFyeV9lbmMgfSwgY2lwaGVyX2tleSwgeyBpdjogaXYsIG1vZGU6IG1vZGUgfSlbJ3RvU3RyaW5nJ10oQ3J5cHRvSlNbJ2VuYyddWydVdGY4J10pO1xuXHRcdCAgICAgICAgdmFyIHBsYWludGV4dCA9IEpTT05bJ3BhcnNlJ10oanNvbl9wbGFpbik7XG5cdFx0ICAgICAgICByZXR1cm4gcGxhaW50ZXh0O1xuXHRcdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0XHQgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG5cdFx0ICAgICAgfVxuXHRcdCAgICB9XG5cdFx0ICB9O1xuXHRcdH1cblx0XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjcnlwdG9fb2JqO1xuXHRcblx0XG5cdC8qKiovIH0sXG5cdC8qIDYgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cdFxuXHRcdC8qXG5cdFx0IENyeXB0b0pTIHYzLjEuMlxuXHRcdCBjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanNcblx0XHQgKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cdFx0IGNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2Vcblx0XHQgKi9cblx0XHR2YXIgQ3J5cHRvSlM9Q3J5cHRvSlN8fGZ1bmN0aW9uKGgscyl7dmFyIGY9e30sZz1mLmxpYj17fSxxPWZ1bmN0aW9uKCl7fSxtPWcuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKGEpe3EucHJvdG90eXBlPXRoaXM7dmFyIGM9bmV3IHE7YSYmYy5taXhJbihhKTtjLmhhc093blByb3BlcnR5KFwiaW5pdFwiKXx8KGMuaW5pdD1mdW5jdGlvbigpe2MuJHN1cGVyLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSk7Yy5pbml0LnByb3RvdHlwZT1jO2MuJHN1cGVyPXRoaXM7cmV0dXJuIGN9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0ZW5kKCk7YS5pbml0LmFwcGx5KGEsYXJndW1lbnRzKTtyZXR1cm4gYX0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24oYSl7Zm9yKHZhciBjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKHRoaXNbY109YVtjXSk7YS5oYXNPd25Qcm9wZXJ0eShcInRvU3RyaW5nXCIpJiYodGhpcy50b1N0cmluZz1hLnRvU3RyaW5nKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyl9fSxcblx0XHQgICAgcj1nLldvcmRBcnJheT1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGMpe2E9dGhpcy53b3Jkcz1hfHxbXTt0aGlzLnNpZ0J5dGVzPWMhPXM/Yzo0KmEubGVuZ3RofSx0b1N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4oYXx8aykuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy53b3JkcyxkPWEud29yZHMsYj10aGlzLnNpZ0J5dGVzO2E9YS5zaWdCeXRlczt0aGlzLmNsYW1wKCk7aWYoYiU0KWZvcih2YXIgZT0wO2U8YTtlKyspY1tiK2U+Pj4yXXw9KGRbZT4+PjJdPj4+MjQtOCooZSU0KSYyNTUpPDwyNC04KigoYitlKSU0KTtlbHNlIGlmKDY1NTM1PGQubGVuZ3RoKWZvcihlPTA7ZTxhO2UrPTQpY1tiK2U+Pj4yXT1kW2U+Pj4yXTtlbHNlIGMucHVzaC5hcHBseShjLGQpO3RoaXMuc2lnQnl0ZXMrPWE7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3JkcyxjPXRoaXMuc2lnQnl0ZXM7YVtjPj4+Ml0mPTQyOTQ5NjcyOTU8PFxuXHRcdCAgICAgIDMyLTgqKGMlNCk7YS5sZW5ndGg9aC5jZWlsKGMvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bS5jbG9uZS5jYWxsKHRoaXMpO2Eud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKTtyZXR1cm4gYX0scmFuZG9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhO2QrPTQpYy5wdXNoKDQyOTQ5NjcyOTYqaC5yYW5kb20oKXwwKTtyZXR1cm4gbmV3IHIuaW5pdChjLGEpfX0pLGw9Zi5lbmM9e30saz1sLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxiPTA7YjxhO2IrKyl7dmFyIGU9Y1tiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NTtkLnB1c2goKGU+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoZSYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gZC5qb2luKFwiXCIpfSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGM9YS5sZW5ndGgsZD1bXSxiPTA7YjxjO2IrPTIpZFtiPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGIsXG5cdFx0ICAgICAgICAyKSwxNik8PDI0LTQqKGIlOCk7cmV0dXJuIG5ldyByLmluaXQoZCxjLzIpfX0sbj1sLkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxiPTA7YjxhO2IrKylkLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShjW2I+Pj4yXT4+PjI0LTgqKGIlNCkmMjU1KSk7cmV0dXJuIGQuam9pbihcIlwiKX0scGFyc2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPWEubGVuZ3RoLGQ9W10sYj0wO2I8YztiKyspZFtiPj4+Ml18PShhLmNoYXJDb2RlQXQoYikmMjU1KTw8MjQtOCooYiU0KTtyZXR1cm4gbmV3IHIuaW5pdChkLGMpfX0saj1sLlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUobi5zdHJpbmdpZnkoYSkpKX1jYXRjaChjKXt0aHJvdyBFcnJvcihcIk1hbGZvcm1lZCBVVEYtOCBkYXRhXCIpO319LHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiBuLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhKSkpfX0sXG5cdFx0ICAgIHU9Zy5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPW0uZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IHIuaW5pdDt0aGlzLl9uRGF0YUJ5dGVzPTB9LF9hcHBlbmQ6ZnVuY3Rpb24oYSl7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPWoucGFyc2UoYSkpO3RoaXMuX2RhdGEuY29uY2F0KGEpO3RoaXMuX25EYXRhQnl0ZXMrPWEuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuX2RhdGEsZD1jLndvcmRzLGI9Yy5zaWdCeXRlcyxlPXRoaXMuYmxvY2tTaXplLGY9Yi8oNCplKSxmPWE/aC5jZWlsKGYpOmgubWF4KChmfDApLXRoaXMuX21pbkJ1ZmZlclNpemUsMCk7YT1mKmU7Yj1oLm1pbig0KmEsYik7aWYoYSl7Zm9yKHZhciBnPTA7ZzxhO2crPWUpdGhpcy5fZG9Qcm9jZXNzQmxvY2soZCxnKTtnPWQuc3BsaWNlKDAsYSk7Yy5zaWdCeXRlcy09Yn1yZXR1cm4gbmV3IHIuaW5pdChnLGIpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW0uY2xvbmUuY2FsbCh0aGlzKTtcblx0XHQgICAgICBhLl9kYXRhPXRoaXMuX2RhdGEuY2xvbmUoKTtyZXR1cm4gYX0sX21pbkJ1ZmZlclNpemU6MH0pO2cuSGFzaGVyPXUuZXh0ZW5kKHtjZmc6bS5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dS5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKGEpe3RoaXMuX2FwcGVuZChhKTt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpfSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXtyZXR1cm4obmV3IGEuaW5pdChkKSkuZmluYWxpemUoYyl9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXtyZXR1cm4obmV3IHQuSE1BQy5pbml0KGEsXG5cdFx0ICAgIGQpKS5maW5hbGl6ZShjKX19fSk7dmFyIHQ9Zi5hbGdvPXt9O3JldHVybiBmfShNYXRoKTtcblx0XG5cdFx0Ly8gU0hBMjU2XG5cdFx0KGZ1bmN0aW9uKGgpe2Zvcih2YXIgcz1DcnlwdG9KUyxmPXMubGliLGc9Zi5Xb3JkQXJyYXkscT1mLkhhc2hlcixmPXMuYWxnbyxtPVtdLHI9W10sbD1mdW5jdGlvbihhKXtyZXR1cm4gNDI5NDk2NzI5NiooYS0oYXwwKSl8MH0saz0yLG49MDs2ND5uOyl7dmFyIGo7YTp7aj1rO2Zvcih2YXIgdT1oLnNxcnQoaiksdD0yO3Q8PXU7dCsrKWlmKCEoaiV0KSl7aj0hMTticmVhayBhfWo9ITB9aiYmKDg+biYmKG1bbl09bChoLnBvdyhrLDAuNSkpKSxyW25dPWwoaC5wb3coaywxLzMpKSxuKyspO2srK312YXIgYT1bXSxmPWYuU0hBMjU2PXEuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGcuaW5pdChtLnNsaWNlKDApKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBiPXRoaXMuX2hhc2gud29yZHMsZT1iWzBdLGY9YlsxXSxnPWJbMl0saj1iWzNdLGg9Yls0XSxtPWJbNV0sbj1iWzZdLHE9Yls3XSxwPTA7NjQ+cDtwKyspe2lmKDE2PnApYVtwXT1cblx0XHQgIGNbZCtwXXwwO2Vsc2V7dmFyIGs9YVtwLTE1XSxsPWFbcC0yXTthW3BdPSgoazw8MjV8az4+PjcpXihrPDwxNHxrPj4+MTgpXms+Pj4zKSthW3AtN10rKChsPDwxNXxsPj4+MTcpXihsPDwxM3xsPj4+MTkpXmw+Pj4xMCkrYVtwLTE2XX1rPXErKChoPDwyNnxoPj4+NileKGg8PDIxfGg+Pj4xMSleKGg8PDd8aD4+PjI1KSkrKGgmbV5+aCZuKStyW3BdK2FbcF07bD0oKGU8PDMwfGU+Pj4yKV4oZTw8MTl8ZT4+PjEzKV4oZTw8MTB8ZT4+PjIyKSkrKGUmZl5lJmdeZiZnKTtxPW47bj1tO209aDtoPWora3wwO2o9ZztnPWY7Zj1lO2U9aytsfDB9YlswXT1iWzBdK2V8MDtiWzFdPWJbMV0rZnwwO2JbMl09YlsyXStnfDA7YlszXT1iWzNdK2p8MDtiWzRdPWJbNF0raHwwO2JbNV09Yls1XSttfDA7Yls2XT1iWzZdK258MDtiWzddPWJbN10rcXwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZD1hLndvcmRzLGI9OCp0aGlzLl9uRGF0YUJ5dGVzLGU9OCphLnNpZ0J5dGVzO1xuXHRcdCAgZFtlPj4+NV18PTEyODw8MjQtZSUzMjtkWyhlKzY0Pj4+OTw8NCkrMTRdPWguZmxvb3IoYi80Mjk0OTY3Mjk2KTtkWyhlKzY0Pj4+OTw8NCkrMTVdPWI7YS5zaWdCeXRlcz00KmQubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1xLmNsb25lLmNhbGwodGhpcyk7YS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGF9fSk7cy5TSEEyNTY9cS5fY3JlYXRlSGVscGVyKGYpO3MuSG1hY1NIQTI1Nj1xLl9jcmVhdGVIbWFjSGVscGVyKGYpfSkoTWF0aCk7XG5cdFxuXHRcdC8vIEhNQUMgU0hBMjU2XG5cdFx0KGZ1bmN0aW9uKCl7dmFyIGg9Q3J5cHRvSlMscz1oLmVuYy5VdGY4O2guYWxnby5ITUFDPWgubGliLkJhc2UuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGYsZyl7Zj10aGlzLl9oYXNoZXI9bmV3IGYuaW5pdDtcInN0cmluZ1wiPT10eXBlb2YgZyYmKGc9cy5wYXJzZShnKSk7dmFyIGg9Zi5ibG9ja1NpemUsbT00Kmg7Zy5zaWdCeXRlcz5tJiYoZz1mLmZpbmFsaXplKGcpKTtnLmNsYW1wKCk7Zm9yKHZhciByPXRoaXMuX29LZXk9Zy5jbG9uZSgpLGw9dGhpcy5faUtleT1nLmNsb25lKCksaz1yLndvcmRzLG49bC53b3JkcyxqPTA7ajxoO2orKylrW2pdXj0xNTQ5NTU2ODI4LG5bal1ePTkwOTUyMjQ4NjtyLnNpZ0J5dGVzPWwuc2lnQnl0ZXM9bTt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5faGFzaGVyO2YucmVzZXQoKTtmLnVwZGF0ZSh0aGlzLl9pS2V5KX0sdXBkYXRlOmZ1bmN0aW9uKGYpe3RoaXMuX2hhc2hlci51cGRhdGUoZik7cmV0dXJuIHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKGYpe3ZhciBnPVxuXHRcdCAgdGhpcy5faGFzaGVyO2Y9Zy5maW5hbGl6ZShmKTtnLnJlc2V0KCk7cmV0dXJuIGcuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChmKSl9fSl9KSgpO1xuXHRcblx0XHQvLyBCYXNlNjRcblx0XHQoZnVuY3Rpb24oKXt2YXIgdT1DcnlwdG9KUyxwPXUubGliLldvcmRBcnJheTt1LmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbihkKXt2YXIgbD1kLndvcmRzLHA9ZC5zaWdCeXRlcyx0PXRoaXMuX21hcDtkLmNsYW1wKCk7ZD1bXTtmb3IodmFyIHI9MDtyPHA7cis9Mylmb3IodmFyIHc9KGxbcj4+PjJdPj4+MjQtOCoociU0KSYyNTUpPDwxNnwobFtyKzE+Pj4yXT4+PjI0LTgqKChyKzEpJTQpJjI1NSk8PDh8bFtyKzI+Pj4yXT4+PjI0LTgqKChyKzIpJTQpJjI1NSx2PTA7ND52JiZyKzAuNzUqdjxwO3YrKylkLnB1c2godC5jaGFyQXQodz4+PjYqKDMtdikmNjMpKTtpZihsPXQuY2hhckF0KDY0KSlmb3IoO2QubGVuZ3RoJTQ7KWQucHVzaChsKTtyZXR1cm4gZC5qb2luKFwiXCIpfSxwYXJzZTpmdW5jdGlvbihkKXt2YXIgbD1kLmxlbmd0aCxzPXRoaXMuX21hcCx0PXMuY2hhckF0KDY0KTt0JiYodD1kLmluZGV4T2YodCksLTEhPXQmJihsPXQpKTtmb3IodmFyIHQ9W10scj0wLHc9MDt3PFxuXHRcdGw7dysrKWlmKHclNCl7dmFyIHY9cy5pbmRleE9mKGQuY2hhckF0KHctMSkpPDwyKih3JTQpLGI9cy5pbmRleE9mKGQuY2hhckF0KHcpKT4+PjYtMioodyU0KTt0W3I+Pj4yXXw9KHZ8Yik8PDI0LTgqKHIlNCk7cisrfXJldHVybiBwLmNyZWF0ZSh0LHIpfSxfbWFwOlwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIn19KSgpO1xuXHRcblx0XHQvLyBCbG9ja0NpcGhlclxuXHRcdChmdW5jdGlvbih1KXtmdW5jdGlvbiBwKGIsbixhLGMsZSxqLGspe2I9YisobiZhfH5uJmMpK2UraztyZXR1cm4oYjw8anxiPj4+MzItaikrbn1mdW5jdGlvbiBkKGIsbixhLGMsZSxqLGspe2I9YisobiZjfGEmfmMpK2UraztyZXR1cm4oYjw8anxiPj4+MzItaikrbn1mdW5jdGlvbiBsKGIsbixhLGMsZSxqLGspe2I9Yisobl5hXmMpK2UraztyZXR1cm4oYjw8anxiPj4+MzItaikrbn1mdW5jdGlvbiBzKGIsbixhLGMsZSxqLGspe2I9YisoYV4obnx+YykpK2UraztyZXR1cm4oYjw8anxiPj4+MzItaikrbn1mb3IodmFyIHQ9Q3J5cHRvSlMscj10LmxpYix3PXIuV29yZEFycmF5LHY9ci5IYXNoZXIscj10LmFsZ28sYj1bXSx4PTA7NjQ+eDt4KyspYlt4XT00Mjk0OTY3Mjk2KnUuYWJzKHUuc2luKHgrMSkpfDA7cj1yLk1ENT12LmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyB3LmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSxcblx0XHQgIF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihxLG4pe2Zvcih2YXIgYT0wOzE2PmE7YSsrKXt2YXIgYz1uK2EsZT1xW2NdO3FbY109KGU8PDh8ZT4+PjI0KSYxNjcxMTkzNXwoZTw8MjR8ZT4+PjgpJjQyNzgyNTUzNjB9dmFyIGE9dGhpcy5faGFzaC53b3JkcyxjPXFbbiswXSxlPXFbbisxXSxqPXFbbisyXSxrPXFbbiszXSx6PXFbbis0XSxyPXFbbis1XSx0PXFbbis2XSx3PXFbbis3XSx2PXFbbis4XSxBPXFbbis5XSxCPXFbbisxMF0sQz1xW24rMTFdLHU9cVtuKzEyXSxEPXFbbisxM10sRT1xW24rMTRdLHg9cVtuKzE1XSxmPWFbMF0sbT1hWzFdLGc9YVsyXSxoPWFbM10sZj1wKGYsbSxnLGgsYyw3LGJbMF0pLGg9cChoLGYsbSxnLGUsMTIsYlsxXSksZz1wKGcsaCxmLG0saiwxNyxiWzJdKSxtPXAobSxnLGgsZixrLDIyLGJbM10pLGY9cChmLG0sZyxoLHosNyxiWzRdKSxoPXAoaCxmLG0sZyxyLDEyLGJbNV0pLGc9cChnLGgsZixtLHQsMTcsYls2XSksbT1wKG0sZyxoLGYsdywyMixiWzddKSxcblx0XHQgICAgZj1wKGYsbSxnLGgsdiw3LGJbOF0pLGg9cChoLGYsbSxnLEEsMTIsYls5XSksZz1wKGcsaCxmLG0sQiwxNyxiWzEwXSksbT1wKG0sZyxoLGYsQywyMixiWzExXSksZj1wKGYsbSxnLGgsdSw3LGJbMTJdKSxoPXAoaCxmLG0sZyxELDEyLGJbMTNdKSxnPXAoZyxoLGYsbSxFLDE3LGJbMTRdKSxtPXAobSxnLGgsZix4LDIyLGJbMTVdKSxmPWQoZixtLGcsaCxlLDUsYlsxNl0pLGg9ZChoLGYsbSxnLHQsOSxiWzE3XSksZz1kKGcsaCxmLG0sQywxNCxiWzE4XSksbT1kKG0sZyxoLGYsYywyMCxiWzE5XSksZj1kKGYsbSxnLGgsciw1LGJbMjBdKSxoPWQoaCxmLG0sZyxCLDksYlsyMV0pLGc9ZChnLGgsZixtLHgsMTQsYlsyMl0pLG09ZChtLGcsaCxmLHosMjAsYlsyM10pLGY9ZChmLG0sZyxoLEEsNSxiWzI0XSksaD1kKGgsZixtLGcsRSw5LGJbMjVdKSxnPWQoZyxoLGYsbSxrLDE0LGJbMjZdKSxtPWQobSxnLGgsZix2LDIwLGJbMjddKSxmPWQoZixtLGcsaCxELDUsYlsyOF0pLGg9ZChoLGYsXG5cdFx0ICAgICAgbSxnLGosOSxiWzI5XSksZz1kKGcsaCxmLG0sdywxNCxiWzMwXSksbT1kKG0sZyxoLGYsdSwyMCxiWzMxXSksZj1sKGYsbSxnLGgsciw0LGJbMzJdKSxoPWwoaCxmLG0sZyx2LDExLGJbMzNdKSxnPWwoZyxoLGYsbSxDLDE2LGJbMzRdKSxtPWwobSxnLGgsZixFLDIzLGJbMzVdKSxmPWwoZixtLGcsaCxlLDQsYlszNl0pLGg9bChoLGYsbSxnLHosMTEsYlszN10pLGc9bChnLGgsZixtLHcsMTYsYlszOF0pLG09bChtLGcsaCxmLEIsMjMsYlszOV0pLGY9bChmLG0sZyxoLEQsNCxiWzQwXSksaD1sKGgsZixtLGcsYywxMSxiWzQxXSksZz1sKGcsaCxmLG0saywxNixiWzQyXSksbT1sKG0sZyxoLGYsdCwyMyxiWzQzXSksZj1sKGYsbSxnLGgsQSw0LGJbNDRdKSxoPWwoaCxmLG0sZyx1LDExLGJbNDVdKSxnPWwoZyxoLGYsbSx4LDE2LGJbNDZdKSxtPWwobSxnLGgsZixqLDIzLGJbNDddKSxmPXMoZixtLGcsaCxjLDYsYls0OF0pLGg9cyhoLGYsbSxnLHcsMTAsYls0OV0pLGc9cyhnLGgsZixtLFxuXHRcdCAgICAgIEUsMTUsYls1MF0pLG09cyhtLGcsaCxmLHIsMjEsYls1MV0pLGY9cyhmLG0sZyxoLHUsNixiWzUyXSksaD1zKGgsZixtLGcsaywxMCxiWzUzXSksZz1zKGcsaCxmLG0sQiwxNSxiWzU0XSksbT1zKG0sZyxoLGYsZSwyMSxiWzU1XSksZj1zKGYsbSxnLGgsdiw2LGJbNTZdKSxoPXMoaCxmLG0sZyx4LDEwLGJbNTddKSxnPXMoZyxoLGYsbSx0LDE1LGJbNThdKSxtPXMobSxnLGgsZixELDIxLGJbNTldKSxmPXMoZixtLGcsaCx6LDYsYls2MF0pLGg9cyhoLGYsbSxnLEMsMTAsYls2MV0pLGc9cyhnLGgsZixtLGosMTUsYls2Ml0pLG09cyhtLGcsaCxmLEEsMjEsYls2M10pO2FbMF09YVswXStmfDA7YVsxXT1hWzFdK218MDthWzJdPWFbMl0rZ3wwO2FbM109YVszXStofDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fZGF0YSxuPWIud29yZHMsYT04KnRoaXMuX25EYXRhQnl0ZXMsYz04KmIuc2lnQnl0ZXM7bltjPj4+NV18PTEyODw8MjQtYyUzMjt2YXIgZT11LmZsb29yKGEvXG5cdFx0ICAgIDQyOTQ5NjcyOTYpO25bKGMrNjQ+Pj45PDw0KSsxNV09KGU8PDh8ZT4+PjI0KSYxNjcxMTkzNXwoZTw8MjR8ZT4+PjgpJjQyNzgyNTUzNjA7blsoYys2ND4+Pjk8PDQpKzE0XT0oYTw8OHxhPj4+MjQpJjE2NzExOTM1fChhPDwyNHxhPj4+OCkmNDI3ODI1NTM2MDtiLnNpZ0J5dGVzPTQqKG4ubGVuZ3RoKzEpO3RoaXMuX3Byb2Nlc3MoKTtiPXRoaXMuX2hhc2g7bj1iLndvcmRzO2ZvcihhPTA7ND5hO2ErKyljPW5bYV0sblthXT0oYzw8OHxjPj4+MjQpJjE2NzExOTM1fChjPDwyNHxjPj4+OCkmNDI3ODI1NTM2MDtyZXR1cm4gYn0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYj12LmNsb25lLmNhbGwodGhpcyk7Yi5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGJ9fSk7dC5NRDU9di5fY3JlYXRlSGVscGVyKHIpO3QuSG1hY01ENT12Ll9jcmVhdGVIbWFjSGVscGVyKHIpfSkoTWF0aCk7XG5cdFx0KGZ1bmN0aW9uKCl7dmFyIHU9Q3J5cHRvSlMscD11LmxpYixkPXAuQmFzZSxsPXAuV29yZEFycmF5LHA9dS5hbGdvLHM9cC5FdnBLREY9ZC5leHRlbmQoe2NmZzpkLmV4dGVuZCh7a2V5U2l6ZTo0LGhhc2hlcjpwLk1ENSxpdGVyYXRpb25zOjF9KSxpbml0OmZ1bmN0aW9uKGQpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChkKX0sY29tcHV0ZTpmdW5jdGlvbihkLHIpe2Zvcih2YXIgcD10aGlzLmNmZyxzPXAuaGFzaGVyLmNyZWF0ZSgpLGI9bC5jcmVhdGUoKSx1PWIud29yZHMscT1wLmtleVNpemUscD1wLml0ZXJhdGlvbnM7dS5sZW5ndGg8cTspe24mJnMudXBkYXRlKG4pO3ZhciBuPXMudXBkYXRlKGQpLmZpbmFsaXplKHIpO3MucmVzZXQoKTtmb3IodmFyIGE9MTthPHA7YSsrKW49cy5maW5hbGl6ZShuKSxzLnJlc2V0KCk7Yi5jb25jYXQobil9Yi5zaWdCeXRlcz00KnE7cmV0dXJuIGJ9fSk7dS5FdnBLREY9ZnVuY3Rpb24oZCxsLHApe3JldHVybiBzLmNyZWF0ZShwKS5jb21wdXRlKGQsXG5cdFx0ICBsKX19KSgpO1xuXHRcblx0XHQvLyBDaXBoZXJcblx0XHRDcnlwdG9KUy5saWIuQ2lwaGVyfHxmdW5jdGlvbih1KXt2YXIgcD1DcnlwdG9KUyxkPXAubGliLGw9ZC5CYXNlLHM9ZC5Xb3JkQXJyYXksdD1kLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0scj1wLmVuYy5CYXNlNjQsdz1wLmFsZ28uRXZwS0RGLHY9ZC5DaXBoZXI9dC5leHRlbmQoe2NmZzpsLmV4dGVuZCgpLGNyZWF0ZUVuY3J5cHRvcjpmdW5jdGlvbihlLGEpe3JldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9FTkNfWEZPUk1fTU9ERSxlLGEpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24oZSxhKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fREVDX1hGT1JNX01PREUsZSxhKX0saW5pdDpmdW5jdGlvbihlLGEsYil7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGIpO3RoaXMuX3hmb3JtTW9kZT1lO3RoaXMuX2tleT1hO3RoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt0LnJlc2V0LmNhbGwodGhpcyk7dGhpcy5fZG9SZXNldCgpfSxwcm9jZXNzOmZ1bmN0aW9uKGUpe3RoaXMuX2FwcGVuZChlKTtyZXR1cm4gdGhpcy5fcHJvY2VzcygpfSxcblx0XHQgIGZpbmFsaXplOmZ1bmN0aW9uKGUpe2UmJnRoaXMuX2FwcGVuZChlKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihlKXtyZXR1cm57ZW5jcnlwdDpmdW5jdGlvbihiLGssZCl7cmV0dXJuKFwic3RyaW5nXCI9PXR5cGVvZiBrP2M6YSkuZW5jcnlwdChlLGIsayxkKX0sZGVjcnlwdDpmdW5jdGlvbihiLGssZCl7cmV0dXJuKFwic3RyaW5nXCI9PXR5cGVvZiBrP2M6YSkuZGVjcnlwdChlLGIsayxkKX19fX0pO2QuU3RyZWFtQ2lwaGVyPXYuZXh0ZW5kKHtfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9jZXNzKCEwKX0sYmxvY2tTaXplOjF9KTt2YXIgYj1wLm1vZGU9e30seD1mdW5jdGlvbihlLGEsYil7dmFyIGM9dGhpcy5faXY7Yz90aGlzLl9pdj11OmM9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgZD0wO2Q8YjtkKyspZVthK2RdXj1cblx0XHQgIGNbZF19LHE9KGQuQmxvY2tDaXBoZXJNb2RlPWwuZXh0ZW5kKHtjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24oZSxhKXtyZXR1cm4gdGhpcy5FbmNyeXB0b3IuY3JlYXRlKGUsYSl9LGNyZWF0ZURlY3J5cHRvcjpmdW5jdGlvbihlLGEpe3JldHVybiB0aGlzLkRlY3J5cHRvci5jcmVhdGUoZSxhKX0saW5pdDpmdW5jdGlvbihlLGEpe3RoaXMuX2NpcGhlcj1lO3RoaXMuX2l2PWF9fSkpLmV4dGVuZCgpO3EuRW5jcnlwdG9yPXEuZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZSxhKXt2YXIgYj10aGlzLl9jaXBoZXIsYz1iLmJsb2NrU2l6ZTt4LmNhbGwodGhpcyxlLGEsYyk7Yi5lbmNyeXB0QmxvY2soZSxhKTt0aGlzLl9wcmV2QmxvY2s9ZS5zbGljZShhLGErYyl9fSk7cS5EZWNyeXB0b3I9cS5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbihlLGEpe3ZhciBiPXRoaXMuX2NpcGhlcixjPWIuYmxvY2tTaXplLGQ9ZS5zbGljZShhLGErYyk7Yi5kZWNyeXB0QmxvY2soZSxhKTt4LmNhbGwodGhpcyxcblx0XHQgIGUsYSxjKTt0aGlzLl9wcmV2QmxvY2s9ZH19KTtiPWIuQ0JDPXE7cT0ocC5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9NCpiLGM9Yy1hLnNpZ0J5dGVzJWMsZD1jPDwyNHxjPDwxNnxjPDw4fGMsbD1bXSxuPTA7bjxjO24rPTQpbC5wdXNoKGQpO2M9cy5jcmVhdGUobCxjKTthLmNvbmNhdChjKX0sdW5wYWQ6ZnVuY3Rpb24oYSl7YS5zaWdCeXRlcy09YS53b3Jkc1thLnNpZ0J5dGVzLTE+Pj4yXSYyNTV9fTtkLkJsb2NrQ2lwaGVyPXYuZXh0ZW5kKHtjZmc6di5jZmcuZXh0ZW5kKHttb2RlOmIscGFkZGluZzpxfSkscmVzZXQ6ZnVuY3Rpb24oKXt2LnJlc2V0LmNhbGwodGhpcyk7dmFyIGE9dGhpcy5jZmcsYj1hLml2LGE9YS5tb2RlO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpdmFyIGM9YS5jcmVhdGVFbmNyeXB0b3I7ZWxzZSBjPWEuY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MTt0aGlzLl9tb2RlPWMuY2FsbChhLFxuXHRcdCAgdGhpcyxiJiZiLndvcmRzKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsYil7dGhpcy5fbW9kZS5wcm9jZXNzQmxvY2soYSxiKX0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNmZy5wYWRkaW5nO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpe2EucGFkKHRoaXMuX2RhdGEsdGhpcy5ibG9ja1NpemUpO3ZhciBiPXRoaXMuX3Byb2Nlc3MoITApfWVsc2UgYj10aGlzLl9wcm9jZXNzKCEwKSxhLnVucGFkKGIpO3JldHVybiBifSxibG9ja1NpemU6NH0pO3ZhciBuPWQuQ2lwaGVyUGFyYW1zPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEpe3RoaXMubWl4SW4oYSl9LHRvU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybihhfHx0aGlzLmZvcm1hdHRlcikuc3RyaW5naWZ5KHRoaXMpfX0pLGI9KHAuZm9ybWF0PXt9KS5PcGVuU1NMPXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS5jaXBoZXJ0ZXh0O2E9YS5zYWx0O3JldHVybihhP3MuY3JlYXRlKFsxMzk4ODkzNjg0LFxuXHRcdCAgMTcwMTA3NjgzMV0pLmNvbmNhdChhKS5jb25jYXQoYik6YikudG9TdHJpbmcocil9LHBhcnNlOmZ1bmN0aW9uKGEpe2E9ci5wYXJzZShhKTt2YXIgYj1hLndvcmRzO2lmKDEzOTg4OTM2ODQ9PWJbMF0mJjE3MDEwNzY4MzE9PWJbMV0pe3ZhciBjPXMuY3JlYXRlKGIuc2xpY2UoMiw0KSk7Yi5zcGxpY2UoMCw0KTthLnNpZ0J5dGVzLT0xNn1yZXR1cm4gbi5jcmVhdGUoe2NpcGhlcnRleHQ6YSxzYWx0OmN9KX19LGE9ZC5TZXJpYWxpemFibGVDaXBoZXI9bC5leHRlbmQoe2NmZzpsLmV4dGVuZCh7Zm9ybWF0OmJ9KSxlbmNyeXB0OmZ1bmN0aW9uKGEsYixjLGQpe2Q9dGhpcy5jZmcuZXh0ZW5kKGQpO3ZhciBsPWEuY3JlYXRlRW5jcnlwdG9yKGMsZCk7Yj1sLmZpbmFsaXplKGIpO2w9bC5jZmc7cmV0dXJuIG4uY3JlYXRlKHtjaXBoZXJ0ZXh0OmIsa2V5OmMsaXY6bC5pdixhbGdvcml0aG06YSxtb2RlOmwubW9kZSxwYWRkaW5nOmwucGFkZGluZyxibG9ja1NpemU6YS5ibG9ja1NpemUsZm9ybWF0dGVyOmQuZm9ybWF0fSl9LFxuXHRcdCAgZGVjcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTtiPXRoaXMuX3BhcnNlKGIsZC5mb3JtYXQpO3JldHVybiBhLmNyZWF0ZURlY3J5cHRvcihjLGQpLmZpbmFsaXplKGIuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbihhLGIpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhP2IucGFyc2UoYSx0aGlzKTphfX0pLHA9KHAua2RmPXt9KS5PcGVuU1NMPXtleGVjdXRlOmZ1bmN0aW9uKGEsYixjLGQpe2R8fChkPXMucmFuZG9tKDgpKTthPXcuY3JlYXRlKHtrZXlTaXplOmIrY30pLmNvbXB1dGUoYSxkKTtjPXMuY3JlYXRlKGEud29yZHMuc2xpY2UoYiksNCpjKTthLnNpZ0J5dGVzPTQqYjtyZXR1cm4gbi5jcmVhdGUoe2tleTphLGl2OmMsc2FsdDpkfSl9fSxjPWQuUGFzc3dvcmRCYXNlZENpcGhlcj1hLmV4dGVuZCh7Y2ZnOmEuY2ZnLmV4dGVuZCh7a2RmOnB9KSxlbmNyeXB0OmZ1bmN0aW9uKGIsYyxkLGwpe2w9dGhpcy5jZmcuZXh0ZW5kKGwpO2Q9bC5rZGYuZXhlY3V0ZShkLFxuXHRcdCAgYi5rZXlTaXplLGIuaXZTaXplKTtsLml2PWQuaXY7Yj1hLmVuY3J5cHQuY2FsbCh0aGlzLGIsYyxkLmtleSxsKTtiLm1peEluKGQpO3JldHVybiBifSxkZWNyeXB0OmZ1bmN0aW9uKGIsYyxkLGwpe2w9dGhpcy5jZmcuZXh0ZW5kKGwpO2M9dGhpcy5fcGFyc2UoYyxsLmZvcm1hdCk7ZD1sLmtkZi5leGVjdXRlKGQsYi5rZXlTaXplLGIuaXZTaXplLGMuc2FsdCk7bC5pdj1kLml2O3JldHVybiBhLmRlY3J5cHQuY2FsbCh0aGlzLGIsYyxkLmtleSxsKX19KX0oKTtcblx0XG5cdFx0Ly8gQUVTXG5cdFx0KGZ1bmN0aW9uKCl7Zm9yKHZhciB1PUNyeXB0b0pTLHA9dS5saWIuQmxvY2tDaXBoZXIsZD11LmFsZ28sbD1bXSxzPVtdLHQ9W10scj1bXSx3PVtdLHY9W10sYj1bXSx4PVtdLHE9W10sbj1bXSxhPVtdLGM9MDsyNTY+YztjKyspYVtjXT0xMjg+Yz9jPDwxOmM8PDFeMjgzO2Zvcih2YXIgZT0wLGo9MCxjPTA7MjU2PmM7YysrKXt2YXIgaz1qXmo8PDFeajw8Ml5qPDwzXmo8PDQsaz1rPj4+OF5rJjI1NV45OTtsW2VdPWs7c1trXT1lO3ZhciB6PWFbZV0sRj1hW3pdLEc9YVtGXSx5PTI1NyphW2tdXjE2ODQzMDA4Kms7dFtlXT15PDwyNHx5Pj4+ODtyW2VdPXk8PDE2fHk+Pj4xNjt3W2VdPXk8PDh8eT4+PjI0O3ZbZV09eTt5PTE2ODQzMDA5KkdeNjU1MzcqRl4yNTcqel4xNjg0MzAwOCplO2Jba109eTw8MjR8eT4+Pjg7eFtrXT15PDwxNnx5Pj4+MTY7cVtrXT15PDw4fHk+Pj4yNDtuW2tdPXk7ZT8oZT16XmFbYVthW0deel1dXSxqXj1hW2Fbal1dKTplPWo9MX12YXIgSD1bMCwxLDIsNCw4LFxuXHRcdCAgMTYsMzIsNjQsMTI4LDI3LDU0XSxkPWQuQUVTPXAuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLl9rZXksYz1hLndvcmRzLGQ9YS5zaWdCeXRlcy80LGE9NCooKHRoaXMuX25Sb3VuZHM9ZCs2KSsxKSxlPXRoaXMuX2tleVNjaGVkdWxlPVtdLGo9MDtqPGE7aisrKWlmKGo8ZCllW2pdPWNbal07ZWxzZXt2YXIgaz1lW2otMV07aiVkPzY8ZCYmND09aiVkJiYoaz1sW2s+Pj4yNF08PDI0fGxbaz4+PjE2JjI1NV08PDE2fGxbaz4+PjgmMjU1XTw8OHxsW2smMjU1XSk6KGs9azw8OHxrPj4+MjQsaz1sW2s+Pj4yNF08PDI0fGxbaz4+PjE2JjI1NV08PDE2fGxbaz4+PjgmMjU1XTw8OHxsW2smMjU1XSxrXj1IW2ovZHwwXTw8MjQpO2Vbal09ZVtqLWRdXmt9Yz10aGlzLl9pbnZLZXlTY2hlZHVsZT1bXTtmb3IoZD0wO2Q8YTtkKyspaj1hLWQsaz1kJTQ/ZVtqXTplW2otNF0sY1tkXT00PmR8fDQ+PWo/azpiW2xbaz4+PjI0XV1eeFtsW2s+Pj4xNiYyNTVdXV5xW2xbaz4+PlxuXHRcdDgmMjU1XV1ebltsW2smMjU1XV19LGVuY3J5cHRCbG9jazpmdW5jdGlvbihhLGIpe3RoaXMuX2RvQ3J5cHRCbG9jayhhLGIsdGhpcy5fa2V5U2NoZWR1bGUsdCxyLHcsdixsKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YVtjKzFdO2FbYysxXT1hW2MrM107YVtjKzNdPWQ7dGhpcy5fZG9DcnlwdEJsb2NrKGEsYyx0aGlzLl9pbnZLZXlTY2hlZHVsZSxiLHgscSxuLHMpO2Q9YVtjKzFdO2FbYysxXT1hW2MrM107YVtjKzNdPWR9LF9kb0NyeXB0QmxvY2s6ZnVuY3Rpb24oYSxiLGMsZCxlLGosbCxmKXtmb3IodmFyIG09dGhpcy5fblJvdW5kcyxnPWFbYl1eY1swXSxoPWFbYisxXV5jWzFdLGs9YVtiKzJdXmNbMl0sbj1hW2IrM11eY1szXSxwPTQscj0xO3I8bTtyKyspdmFyIHE9ZFtnPj4+MjRdXmVbaD4+PjE2JjI1NV1ealtrPj4+OCYyNTVdXmxbbiYyNTVdXmNbcCsrXSxzPWRbaD4+PjI0XV5lW2s+Pj4xNiYyNTVdXmpbbj4+PjgmMjU1XV5sW2cmMjU1XV5jW3ArK10sdD1cblx0XHQgIGRbaz4+PjI0XV5lW24+Pj4xNiYyNTVdXmpbZz4+PjgmMjU1XV5sW2gmMjU1XV5jW3ArK10sbj1kW24+Pj4yNF1eZVtnPj4+MTYmMjU1XV5qW2g+Pj44JjI1NV1ebFtrJjI1NV1eY1twKytdLGc9cSxoPXMsaz10O3E9KGZbZz4+PjI0XTw8MjR8ZltoPj4+MTYmMjU1XTw8MTZ8ZltrPj4+OCYyNTVdPDw4fGZbbiYyNTVdKV5jW3ArK107cz0oZltoPj4+MjRdPDwyNHxmW2s+Pj4xNiYyNTVdPDwxNnxmW24+Pj44JjI1NV08PDh8ZltnJjI1NV0pXmNbcCsrXTt0PShmW2s+Pj4yNF08PDI0fGZbbj4+PjE2JjI1NV08PDE2fGZbZz4+PjgmMjU1XTw8OHxmW2gmMjU1XSleY1twKytdO249KGZbbj4+PjI0XTw8MjR8ZltnPj4+MTYmMjU1XTw8MTZ8ZltoPj4+OCYyNTVdPDw4fGZbayYyNTVdKV5jW3ArK107YVtiXT1xO2FbYisxXT1zO2FbYisyXT10O2FbYiszXT1ufSxrZXlTaXplOjh9KTt1LkFFUz1wLl9jcmVhdGVIZWxwZXIoZCl9KSgpO1xuXHRcblx0XHQvLyBNb2RlIEVDQlxuXHRcdENyeXB0b0pTLm1vZGUuRUNCID0gKGZ1bmN0aW9uICgpIHtcblx0XHQgIHZhciBFQ0IgPSBDcnlwdG9KUy5saWIuQmxvY2tDaXBoZXJNb2RlLmV4dGVuZCgpO1xuXHRcblx0XHQgIEVDQi5FbmNyeXB0b3IgPSBFQ0IuZXh0ZW5kKHtcblx0XHQgICAgcHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbiAod29yZHMsIG9mZnNldCkge1xuXHRcdCAgICAgIHRoaXMuX2NpcGhlci5lbmNyeXB0QmxvY2sod29yZHMsIG9mZnNldCk7XG5cdFx0ICAgIH1cblx0XHQgIH0pO1xuXHRcblx0XHQgIEVDQi5EZWNyeXB0b3IgPSBFQ0IuZXh0ZW5kKHtcblx0XHQgICAgcHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbiAod29yZHMsIG9mZnNldCkge1xuXHRcdCAgICAgIHRoaXMuX2NpcGhlci5kZWNyeXB0QmxvY2sod29yZHMsIG9mZnNldCk7XG5cdFx0ICAgIH1cblx0XHQgIH0pO1xuXHRcblx0XHQgIHJldHVybiBFQ0I7XG5cdFx0fSgpKTtcblx0XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBDcnlwdG9KUztcblx0XG5cdFxuXHQvKioqLyB9LFxuXHQvKiA3ICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXHRcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBXRUJTT0NLRVQgSU5URVJGQUNFXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0dmFyIFdTID0gZnVuY3Rpb24oIHVybCwgcHJvdG9jb2xzICkge1xuXHRcdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFdTKSkgcmV0dXJuIG5ldyBXUyggdXJsLCBwcm90b2NvbHMgKTtcblx0XG5cdFx0ICB2YXIgc2VsZiAgICAgPSB0aGlzXG5cdFx0ICAgICwgICB1cmwgICAgICA9IHNlbGYudXJsICAgICAgPSB1cmwgfHwgJydcblx0XHQgICAgLCAgIHByb3RvY29sID0gc2VsZi5wcm90b2NvbCA9IHByb3RvY29scyB8fCAnU2VjLVdlYlNvY2tldC1Qcm90b2NvbCdcblx0XHQgICAgLCAgIGJpdHMgICAgID0gdXJsLnNwbGl0KCcvJylcblx0XHQgICAgLCAgIHNldHVwICAgID0ge1xuXHRcdCAgICAnc3NsJyAgICAgICAgICAgOiBiaXRzWzBdID09PSAnd3NzOidcblx0XHQgICAgLCdvcmlnaW4nICAgICAgICA6IGJpdHNbMl1cblx0XHQgICAgLCdwdWJsaXNoX2tleScgICA6IGJpdHNbM11cblx0XHQgICAgLCdzdWJzY3JpYmVfa2V5JyA6IGJpdHNbNF1cblx0XHQgICAgLCdjaGFubmVsJyAgICAgICA6IGJpdHNbNV1cblx0XHQgIH07XG5cdFxuXHRcdCAgLy8gUkVBRFkgU1RBVEVTXG5cdFx0ICBzZWxmWydDT05ORUNUSU5HJ10gPSAwOyAvLyBUaGUgY29ubmVjdGlvbiBpcyBub3QgeWV0IG9wZW4uXG5cdFx0ICBzZWxmWydPUEVOJ10gICAgICAgPSAxOyAvLyBUaGUgY29ubmVjdGlvbiBpcyBvcGVuIGFuZCByZWFkeSB0byBjb21tdW5pY2F0ZS5cblx0XHQgIHNlbGZbJ0NMT1NJTkcnXSAgICA9IDI7IC8vIFRoZSBjb25uZWN0aW9uIGlzIGluIHRoZSBwcm9jZXNzIG9mIGNsb3NpbmcuXG5cdFx0ICBzZWxmWydDTE9TRUQnXSAgICAgPSAzOyAvLyBUaGUgY29ubmVjdGlvbiBpcyBjbG9zZWQgb3IgY291bGRuJ3QgYmUgb3BlbmVkLlxuXHRcblx0XHQgIC8vIENMT1NFIFNUQVRFU1xuXHRcdCAgc2VsZlsnQ0xPU0VfTk9STUFMJ10gICAgICAgICA9IDEwMDA7IC8vIE5vcm1hbCBJbnRlbmRlZCBDbG9zZTsgY29tcGxldGVkLlxuXHRcdCAgc2VsZlsnQ0xPU0VfR09JTkdfQVdBWSddICAgICA9IDEwMDE7IC8vIENsb3NlZCBVbmV4cGVjdHRlZGx5LlxuXHRcdCAgc2VsZlsnQ0xPU0VfUFJPVE9DT0xfRVJST1InXSA9IDEwMDI7IC8vIFNlcnZlcjogTm90IFN1cHBvcnRlZC5cblx0XHQgIHNlbGZbJ0NMT1NFX1VOU1VQUE9SVEVEJ10gICAgPSAxMDAzOyAvLyBTZXJ2ZXI6IFVuc3VwcG9ydGVkIFByb3RvY29sLlxuXHRcdCAgc2VsZlsnQ0xPU0VfVE9PX0xBUkdFJ10gICAgICA9IDEwMDQ7IC8vIFNlcnZlcjogVG9vIE11Y2ggRGF0YS5cblx0XHQgIHNlbGZbJ0NMT1NFX05PX1NUQVRVUyddICAgICAgPSAxMDA1OyAvLyBTZXJ2ZXI6IE5vIHJlYXNvbi5cblx0XHQgIHNlbGZbJ0NMT1NFX0FCTk9STUFMJ10gICAgICAgPSAxMDA2OyAvLyBBYm5vcm1hbCBEaXNjb25uZWN0LlxuXHRcblx0XHQgIC8vIEV2ZW50cyBEZWZhdWx0XG5cdFx0ICBzZWxmWydvbmNsb3NlJ10gICA9IHNlbGZbJ29uZXJyb3InXSA9XG5cdFx0ICAgIHNlbGZbJ29ubWVzc2FnZSddID0gc2VsZlsnb25vcGVuJ10gID1cblx0XHQgICAgICBzZWxmWydvbnNlbmQnXSAgICA9ICBmdW5jdGlvbigpe307XG5cdFxuXHRcdCAgLy8gQXR0cmlidXRlc1xuXHRcdCAgc2VsZlsnYmluYXJ5VHlwZSddICAgICA9ICcnO1xuXHRcdCAgc2VsZlsnZXh0ZW5zaW9ucyddICAgICA9ICcnO1xuXHRcdCAgc2VsZlsnYnVmZmVyZWRBbW91bnQnXSA9IDA7XG5cdFx0ICBzZWxmWyd0cmFzbm1pdHRpbmcnXSAgID0gZmFsc2U7XG5cdFx0ICBzZWxmWydidWZmZXInXSAgICAgICAgID0gW107XG5cdFx0ICBzZWxmWydyZWFkeVN0YXRlJ10gICAgID0gc2VsZlsnQ09OTkVDVElORyddO1xuXHRcblx0XHQgIC8vIENsb3NlIGlmIG5vIHNldHVwLlxuXHRcdCAgaWYgKCF1cmwpIHtcblx0XHQgICAgc2VsZlsncmVhZHlTdGF0ZSddID0gc2VsZlsnQ0xPU0VEJ107XG5cdFx0ICAgIHNlbGZbJ29uY2xvc2UnXSh7XG5cdFx0ICAgICAgJ2NvZGUnICAgICA6IHNlbGZbJ0NMT1NFX0FCTk9STUFMJ10sXG5cdFx0ICAgICAgJ3JlYXNvbicgICA6ICdNaXNzaW5nIFVSTCcsXG5cdFx0ICAgICAgJ3dhc0NsZWFuJyA6IHRydWVcblx0XHQgICAgfSk7XG5cdFx0ICAgIHJldHVybiBzZWxmO1xuXHRcdCAgfVxuXHRcblx0XHQgIC8vIFB1Yk51YiBXZWJTb2NrZXQgRW11bGF0aW9uXG5cdFx0ICBzZWxmLnB1Ym51YiAgICAgICA9IFBVQk5VQlsnaW5pdCddKHNldHVwKTtcblx0XHQgIHNlbGYucHVibnViLnNldHVwID0gc2V0dXA7XG5cdFx0ICBzZWxmLnNldHVwICAgICAgICA9IHNldHVwO1xuXHRcblx0XHQgIHNlbGYucHVibnViWydzdWJzY3JpYmUnXSh7XG5cdFx0ICAgICdyZXN0b3JlJyAgICA6IGZhbHNlLFxuXHRcdCAgICAnY2hhbm5lbCcgICAgOiBzZXR1cFsnY2hhbm5lbCddLFxuXHRcdCAgICAnZGlzY29ubmVjdCcgOiBzZWxmWydvbmVycm9yJ10sXG5cdFx0ICAgICdyZWNvbm5lY3QnICA6IHNlbGZbJ29ub3BlbiddLFxuXHRcdCAgICAnZXJyb3InICAgICAgOiBmdW5jdGlvbigpIHtcblx0XHQgICAgICBzZWxmWydvbmNsb3NlJ10oe1xuXHRcdCAgICAgICAgJ2NvZGUnICAgICA6IHNlbGZbJ0NMT1NFX0FCTk9STUFMJ10sXG5cdFx0ICAgICAgICAncmVhc29uJyAgIDogJ01pc3NpbmcgVVJMJyxcblx0XHQgICAgICAgICd3YXNDbGVhbicgOiBmYWxzZVxuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9LFxuXHRcdCAgICAnY2FsbGJhY2snICAgOiBmdW5jdGlvbihtZXNzYWdlKSB7XG5cdFx0ICAgICAgc2VsZlsnb25tZXNzYWdlJ10oeyAnZGF0YScgOiBtZXNzYWdlIH0pO1xuXHRcdCAgICB9LFxuXHRcdCAgICAnY29ubmVjdCcgICAgOiBmdW5jdGlvbigpIHtcblx0XHQgICAgICBzZWxmWydyZWFkeVN0YXRlJ10gPSBzZWxmWydPUEVOJ107XG5cdFx0ICAgICAgc2VsZlsnb25vcGVuJ10oKTtcblx0XHQgICAgfVxuXHRcdCAgfSk7XG5cdFx0fTtcblx0XG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gV0VCU09DS0VUIFNFTkRcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRXUy5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHQgIHZhciBzZWxmID0gdGhpcztcblx0XHQgIHNlbGYucHVibnViWydwdWJsaXNoJ10oe1xuXHRcdCAgICAnY2hhbm5lbCcgIDogc2VsZi5wdWJudWIuc2V0dXBbJ2NoYW5uZWwnXSxcblx0XHQgICAgJ21lc3NhZ2UnICA6IGRhdGEsXG5cdFx0ICAgICdjYWxsYmFjaycgOiBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdCAgICAgIHNlbGZbJ29uc2VuZCddKHsgJ2RhdGEnIDogcmVzcG9uc2UgfSk7XG5cdFx0ICAgIH1cblx0XHQgIH0pO1xuXHRcdH07XG5cdFxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIFdFQlNPQ0tFVCBDTE9TRVxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFdTLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuXHRcdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHRcdCAgc2VsZi5wdWJudWJbJ3Vuc3Vic2NyaWJlJ10oeyAnY2hhbm5lbCcgOiBzZWxmLnB1Ym51Yi5zZXR1cFsnY2hhbm5lbCddIH0pO1xuXHRcdCAgc2VsZlsncmVhZHlTdGF0ZSddID0gc2VsZlsnQ0xPU0VEJ107XG5cdFx0ICBzZWxmWydvbmNsb3NlJ10oe30pO1xuXHRcdH07XG5cdFxuXHRcdG1vZHVsZS5leHBvcnRzID0gV1M7XG5cdFxuXHRcblx0LyoqKi8gfVxuXHQvKioqKioqLyBdKVxuXHR9KTtcblx0O1xuXG4vKioqLyB9LFxuLyogNjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nyk7XG5cblxuLyoqKi8gfSxcbi8qIDY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiFcblx0ICogY2hhaVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHR2YXIgdXNlZCA9IFtdXG5cdCAgLCBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8qIVxuXHQgKiBDaGFpIHZlcnNpb25cblx0ICovXG5cdFxuXHRleHBvcnRzLnZlcnNpb24gPSAnMy41LjAnO1xuXHRcblx0LyohXG5cdCAqIEFzc2VydGlvbiBFcnJvclxuXHQgKi9cblx0XG5cdGV4cG9ydHMuQXNzZXJ0aW9uRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KTtcblx0XG5cdC8qIVxuXHQgKiBVdGlscyBmb3IgcGx1Z2lucyAobm90IGV4cG9ydGVkKVxuXHQgKi9cblx0XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7XG5cdFxuXHQvKipcblx0ICogIyAudXNlKGZ1bmN0aW9uKVxuXHQgKlxuXHQgKiBQcm92aWRlcyBhIHdheSB0byBleHRlbmQgdGhlIGludGVybmFscyBvZiBDaGFpXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259XG5cdCAqIEByZXR1cm5zIHt0aGlzfSBmb3IgY2hhaW5pbmdcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRleHBvcnRzLnVzZSA9IGZ1bmN0aW9uIChmbikge1xuXHQgIGlmICghfnVzZWQuaW5kZXhPZihmbikpIHtcblx0ICAgIGZuKHRoaXMsIHV0aWwpO1xuXHQgICAgdXNlZC5wdXNoKGZuKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0LyohXG5cdCAqIFV0aWxpdHkgRnVuY3Rpb25zXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy51dGlsID0gdXRpbDtcblx0XG5cdC8qIVxuXHQgKiBDb25maWd1cmF0aW9uXG5cdCAqL1xuXHRcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oODIpO1xuXHRleHBvcnRzLmNvbmZpZyA9IGNvbmZpZztcblx0XG5cdC8qIVxuXHQgKiBQcmltYXJ5IGBBc3NlcnRpb25gIHByb3RvdHlwZVxuXHQgKi9cblx0XG5cdHZhciBhc3NlcnRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KTtcblx0ZXhwb3J0cy51c2UoYXNzZXJ0aW9uKTtcblx0XG5cdC8qIVxuXHQgKiBDb3JlIEFzc2VydGlvbnNcblx0ICovXG5cdFxuXHR2YXIgY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpO1xuXHRleHBvcnRzLnVzZShjb3JlKTtcblx0XG5cdC8qIVxuXHQgKiBFeHBlY3QgaW50ZXJmYWNlXG5cdCAqL1xuXHRcblx0dmFyIGV4cGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpO1xuXHRleHBvcnRzLnVzZShleHBlY3QpO1xuXHRcblx0LyohXG5cdCAqIFNob3VsZCBpbnRlcmZhY2Vcblx0ICovXG5cdFxuXHR2YXIgc2hvdWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApO1xuXHRleHBvcnRzLnVzZShzaG91bGQpO1xuXHRcblx0LyohXG5cdCAqIEFzc2VydCBpbnRlcmZhY2Vcblx0ICovXG5cdFxuXHR2YXIgYXNzZXJ0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpO1xuXHRleHBvcnRzLnVzZShhc3NlcnQpO1xuXG5cbi8qKiovIH0sXG4vKiA2OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIGFzc2VydGlvbi1lcnJvclxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMyBKYWtlIEx1ZXIgPGpha2VAcXVhbGlhbmN5LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyohXG5cdCAqIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBjb3B5IHByb3BlcnRpZXMgZnJvbVxuXHQgKiBvbmUgb2JqZWN0IHRvIGFub3RoZXIgZXhjbHVkaW5nIGFueSBvcmlnaW5hbGx5XG5cdCAqIGxpc3RlZC4gUmV0dXJuZWQgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgYHt9YC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4Y2x1ZGVkIHByb3BlcnRpZXMgLi4uXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4Y2x1ZGUgKCkge1xuXHQgIHZhciBleGNsdWRlcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0XG5cdCAgZnVuY3Rpb24gZXhjbHVkZVByb3BzIChyZXMsIG9iaikge1xuXHQgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgaWYgKCF+ZXhjbHVkZXMuaW5kZXhPZihrZXkpKSByZXNba2V5XSA9IG9ialtrZXldO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gZXh0ZW5kRXhjbHVkZSAoKSB7XG5cdCAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuXHQgICAgICAsIGkgPSAwXG5cdCAgICAgICwgcmVzID0ge307XG5cdFxuXHQgICAgZm9yICg7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGV4Y2x1ZGVQcm9wcyhyZXMsIGFyZ3NbaV0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiByZXM7XG5cdCAgfTtcblx0fTtcblx0XG5cdC8qIVxuXHQgKiBQcmltYXJ5IEV4cG9ydHNcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEFzc2VydGlvbkVycm9yO1xuXHRcblx0LyoqXG5cdCAqICMjIyBBc3NlcnRpb25FcnJvclxuXHQgKlxuXHQgKiBBbiBleHRlbnNpb24gb2YgdGhlIEphdmFTY3JpcHQgYEVycm9yYCBjb25zdHJ1Y3RvciBmb3Jcblx0ICogYXNzZXJ0aW9uIGFuZCB2YWxpZGF0aW9uIHNjZW5hcmlvcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgdG8gaW5jbHVkZSAob3B0aW9uYWwpXG5cdCAqIEBwYXJhbSB7Y2FsbGVlfSBzdGFydCBzdGFjayBmdW5jdGlvbiAob3B0aW9uYWwpXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3IgKG1lc3NhZ2UsIF9wcm9wcywgc3NmKSB7XG5cdCAgdmFyIGV4dGVuZCA9IGV4Y2x1ZGUoJ25hbWUnLCAnbWVzc2FnZScsICdzdGFjaycsICdjb25zdHJ1Y3RvcicsICd0b0pTT04nKVxuXHQgICAgLCBwcm9wcyA9IGV4dGVuZChfcHJvcHMgfHwge30pO1xuXHRcblx0ICAvLyBkZWZhdWx0IHZhbHVlc1xuXHQgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ1Vuc3BlY2lmaWVkIEFzc2VydGlvbkVycm9yJztcblx0ICB0aGlzLnNob3dEaWZmID0gZmFsc2U7XG5cdFxuXHQgIC8vIGNvcHkgZnJvbSBwcm9wZXJ0aWVzXG5cdCAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7XG5cdCAgICB0aGlzW2tleV0gPSBwcm9wc1trZXldO1xuXHQgIH1cblx0XG5cdCAgLy8gY2FwdHVyZSBzdGFjayB0cmFjZVxuXHQgIHNzZiA9IHNzZiB8fCBhcmd1bWVudHMuY2FsbGVlO1xuXHQgIGlmIChzc2YgJiYgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcblx0ICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHNzZik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuXHQgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgIHRoaXMuc3RhY2sgPSBlLnN0YWNrO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyohXG5cdCAqIEluaGVyaXQgZnJvbSBFcnJvci5wcm90b3R5cGVcblx0ICovXG5cdFxuXHRBc3NlcnRpb25FcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5cdFxuXHQvKiFcblx0ICogU3RhdGljYWxseSBzZXQgbmFtZVxuXHQgKi9cblx0XG5cdEFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcblx0XG5cdC8qIVxuXHQgKiBFbnN1cmUgY29ycmVjdCBjb25zdHJ1Y3RvclxuXHQgKi9cblx0XG5cdEFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFzc2VydGlvbkVycm9yO1xuXHRcblx0LyoqXG5cdCAqIEFsbG93IGVycm9ycyB0byBiZSBjb252ZXJ0ZWQgdG8gSlNPTiBmb3Igc3RhdGljIHRyYW5zZmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGluY2x1ZGUgc3RhY2sgKGRlZmF1bHQ6IGB0cnVlYClcblx0ICogQHJldHVybiB7T2JqZWN0fSBvYmplY3QgdGhhdCBjYW4gYmUgYEpTT04uc3RyaW5naWZ5YFxuXHQgKi9cblx0XG5cdEFzc2VydGlvbkVycm9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoc3RhY2spIHtcblx0ICB2YXIgZXh0ZW5kID0gZXhjbHVkZSgnY29uc3RydWN0b3InLCAndG9KU09OJywgJ3N0YWNrJylcblx0ICAgICwgcHJvcHMgPSBleHRlbmQoeyBuYW1lOiB0aGlzLm5hbWUgfSwgdGhpcyk7XG5cdFxuXHQgIC8vIGluY2x1ZGUgc3RhY2sgaWYgZXhpc3RzIGFuZCBub3QgdHVybmVkIG9mZlxuXHQgIGlmIChmYWxzZSAhPT0gc3RhY2sgJiYgdGhpcy5zdGFjaykge1xuXHQgICAgcHJvcHMuc3RhY2sgPSB0aGlzLnN0YWNrO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHByb3BzO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA2OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohXG5cdCAqIGNoYWlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTEgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qIVxuXHQgKiBNYWluIGV4cG9ydHNcblx0ICovXG5cdFxuXHR2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdFxuXHQvKiFcblx0ICogdGVzdCB1dGlsaXR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy50ZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7XG5cdFxuXHQvKiFcblx0ICogdHlwZSB1dGlsaXR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy50eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cdFxuXHQvKiFcblx0ICogZXhwZWN0VHlwZXMgdXRpbGl0eVxuXHQgKi9cblx0ZXhwb3J0cy5leHBlY3RUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpO1xuXHRcblx0LyohXG5cdCAqIG1lc3NhZ2UgdXRpbGl0eVxuXHQgKi9cblx0XG5cdGV4cG9ydHMuZ2V0TWVzc2FnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpO1xuXHRcblx0LyohXG5cdCAqIGFjdHVhbCB1dGlsaXR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5nZXRBY3R1YWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTtcblx0XG5cdC8qIVxuXHQgKiBJbnNwZWN0IHV0aWxcblx0ICovXG5cdFxuXHRleHBvcnRzLmluc3BlY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTtcblx0XG5cdC8qIVxuXHQgKiBPYmplY3QgRGlzcGxheSB1dGlsXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5vYmpEaXNwbGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MSk7XG5cdFxuXHQvKiFcblx0ICogRmxhZyB1dGlsaXR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5mbGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cdFxuXHQvKiFcblx0ICogRmxhZyB0cmFuc2ZlcnJpbmcgdXRpbGl0eVxuXHQgKi9cblx0XG5cdGV4cG9ydHMudHJhbnNmZXJGbGFncyA9IF9fd2VicGFja19yZXF1aXJlX18oODMpO1xuXHRcblx0LyohXG5cdCAqIERlZXAgZXF1YWwgdXRpbGl0eVxuXHQgKi9cblx0XG5cdGV4cG9ydHMuZXFsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7XG5cdFxuXHQvKiFcblx0ICogRGVlcCBwYXRoIHZhbHVlXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5nZXRQYXRoVmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KTtcblx0XG5cdC8qIVxuXHQgKiBEZWVwIHBhdGggaW5mb1xuXHQgKi9cblx0XG5cdGV4cG9ydHMuZ2V0UGF0aEluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KTtcblx0XG5cdC8qIVxuXHQgKiBDaGVjayBpZiBhIHByb3BlcnR5IGV4aXN0c1xuXHQgKi9cblx0XG5cdGV4cG9ydHMuaGFzUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkwKTtcblx0XG5cdC8qIVxuXHQgKiBGdW5jdGlvbiBuYW1lXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5nZXROYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7XG5cdFxuXHQvKiFcblx0ICogYWRkIFByb3BlcnR5XG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5hZGRQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpO1xuXHRcblx0LyohXG5cdCAqIGFkZCBNZXRob2Rcblx0ICovXG5cdFxuXHRleHBvcnRzLmFkZE1ldGhvZCA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpO1xuXHRcblx0LyohXG5cdCAqIG92ZXJ3cml0ZSBQcm9wZXJ0eVxuXHQgKi9cblx0XG5cdGV4cG9ydHMub3ZlcndyaXRlUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKTtcblx0XG5cdC8qIVxuXHQgKiBvdmVyd3JpdGUgTWV0aG9kXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5vdmVyd3JpdGVNZXRob2QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KTtcblx0XG5cdC8qIVxuXHQgKiBBZGQgYSBjaGFpbmFibGUgbWV0aG9kXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5hZGRDaGFpbmFibGVNZXRob2QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTtcblx0XG5cdC8qIVxuXHQgKiBPdmVyd3JpdGUgY2hhaW5hYmxlIG1ldGhvZFxuXHQgKi9cblx0XG5cdGV4cG9ydHMub3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Nik7XG5cblxuLyoqKi8gfSxcbi8qIDcwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiFcblx0ICogQ2hhaSAtIHRlc3QgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKiFcblx0ICogTW9kdWxlIGRlcGVuZGFuY2llc1xuXHQgKi9cblx0XG5cdHZhciBmbGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cdFxuXHQvKipcblx0ICogIyB0ZXN0KG9iamVjdCwgZXhwcmVzc2lvbilcblx0ICpcblx0ICogVGVzdCBhbmQgb2JqZWN0IGZvciBleHByZXNzaW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IChjb25zdHJ1Y3RlZCBBc3NlcnRpb24pXG5cdCAqIEBwYXJhbSB7QXJndW1lbnRzfSBjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUuYXNzZXJ0IGFyZ3VtZW50c1xuXHQgKiBAbmFtZXNwYWNlIFV0aWxzXG5cdCAqIEBuYW1lIHRlc3Rcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmosIGFyZ3MpIHtcblx0ICB2YXIgbmVnYXRlID0gZmxhZyhvYmosICduZWdhdGUnKVxuXHQgICAgLCBleHByID0gYXJnc1swXTtcblx0ICByZXR1cm4gbmVnYXRlID8gIWV4cHIgOiBleHByO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBmbGFnIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqICMjIyBmbGFnKG9iamVjdCwga2V5LCBbdmFsdWVdKVxuXHQgKlxuXHQgKiBHZXQgb3Igc2V0IGEgZmxhZyB2YWx1ZSBvbiBhbiBvYmplY3QuIElmIGFcblx0ICogdmFsdWUgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBzZXQsIGVsc2UgaXQgd2lsbFxuXHQgKiByZXR1cm4gdGhlIGN1cnJlbnRseSBzZXQgdmFsdWUgb3IgYHVuZGVmaW5lZGAgaWZcblx0ICogdGhlIHZhbHVlIGlzIG5vdCBzZXQuXG5cdCAqXG5cdCAqICAgICB1dGlscy5mbGFnKHRoaXMsICdmb28nLCAnYmFyJyk7IC8vIHNldHRlclxuXHQgKiAgICAgdXRpbHMuZmxhZyh0aGlzLCAnZm9vJyk7IC8vIGdldHRlciwgcmV0dXJucyBgYmFyYFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IGNvbnN0cnVjdGVkIEFzc2VydGlvblxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIChvcHRpb25hbClcblx0ICogQG5hbWVzcGFjZSBVdGlsc1xuXHQgKiBAbmFtZSBmbGFnXG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwga2V5LCB2YWx1ZSkge1xuXHQgIHZhciBmbGFncyA9IG9iai5fX2ZsYWdzIHx8IChvYmouX19mbGFncyA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7XG5cdCAgICBmbGFnc1trZXldID0gdmFsdWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmbGFnc1trZXldO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogNzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7XG5cblxuLyoqKi8gfSxcbi8qIDczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogdHlwZS1kZXRlY3Rcblx0ICogQ29weXJpZ2h0KGMpIDIwMTMgamFrZSBsdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qIVxuXHQgKiBQcmltYXJ5IEV4cG9ydHNcblx0ICovXG5cdFxuXHR2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZ2V0VHlwZTtcblx0XG5cdC8qKlxuXHQgKiAjIyMgdHlwZU9mIChvYmopXG5cdCAqXG5cdCAqIFVzZSBzZXZlcmFsIGRpZmZlcmVudCB0ZWNobmlxdWVzIHRvIGRldGVybWluZVxuXHQgKiB0aGUgdHlwZSBvZiBvYmplY3QgYmVpbmcgdGVzdGVkLlxuXHQgKlxuXHQgKlxuXHQgKiBAcGFyYW0ge01peGVkfSBvYmplY3Rcblx0ICogQHJldHVybiB7U3RyaW5nfSBvYmplY3QgdHlwZVxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0dmFyIG9iamVjdFR5cGVSZWdleHAgPSAvXlxcW29iamVjdCAoLiopXFxdJC87XG5cdFxuXHRmdW5jdGlvbiBnZXRUeXBlKG9iaikge1xuXHQgIHZhciB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikubWF0Y2gob2JqZWN0VHlwZVJlZ2V4cClbMV0udG9Mb3dlckNhc2UoKTtcblx0ICAvLyBMZXQgXCJuZXcgU3RyaW5nKCcnKVwiIHJldHVybiAnb2JqZWN0J1xuXHQgIGlmICh0eXBlb2YgUHJvbWlzZSA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmogaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gJ3Byb21pc2UnO1xuXHQgIC8vIFBoYW50b21KUyBoYXMgdHlwZSBcIkRPTVdpbmRvd1wiIGZvciBudWxsXG5cdCAgaWYgKG9iaiA9PT0gbnVsbCkgcmV0dXJuICdudWxsJztcblx0ICAvLyBQaGFudG9tSlMgaGFzIHR5cGUgXCJET01XaW5kb3dcIiBmb3IgdW5kZWZpbmVkXG5cdCAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG5cdCAgcmV0dXJuIHR5cGU7XG5cdH1cblx0XG5cdGV4cG9ydHMuTGlicmFyeSA9IExpYnJhcnk7XG5cdFxuXHQvKipcblx0ICogIyMjIExpYnJhcnlcblx0ICpcblx0ICogQ3JlYXRlIGEgcmVwb3NpdG9yeSBmb3IgY3VzdG9tIHR5cGUgZGV0ZWN0aW9uLlxuXHQgKlxuXHQgKiBgYGBqc1xuXHQgKiB2YXIgbGliID0gbmV3IHR5cGUuTGlicmFyeTtcblx0ICogYGBgXG5cdCAqXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gTGlicmFyeSgpIHtcblx0ICBpZiAoISh0aGlzIGluc3RhbmNlb2YgTGlicmFyeSkpIHJldHVybiBuZXcgTGlicmFyeSgpO1xuXHQgIHRoaXMudGVzdHMgPSB7fTtcblx0fVxuXHRcblx0LyoqXG5cdCAqICMjIyMgLm9mIChvYmopXG5cdCAqXG5cdCAqIEV4cG9zZSByZXBsYWNlbWVudCBgdHlwZW9mYCBkZXRlY3Rpb24gdG8gdGhlIGxpYnJhcnkuXG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqIGlmICgnc3RyaW5nJyA9PT0gbGliLm9mKCdoZWxsbyB3b3JsZCcpKSB7XG5cdCAqICAgLy8gLi4uXG5cdCAqIH1cblx0ICogYGBgXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdCB0byB0ZXN0XG5cdCAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdExpYnJhcnkucHJvdG90eXBlLm9mID0gZ2V0VHlwZTtcblx0XG5cdC8qKlxuXHQgKiAjIyMjIC5kZWZpbmUgKHR5cGUsIHRlc3QpXG5cdCAqXG5cdCAqIEFkZCBhIHRlc3QgdG8gZm9yIHRoZSBgLnRlc3QoKWAgYXNzZXJ0aW9uLlxuXHQgKlxuXHQgKiBDYW4gYmUgZGVmaW5lZCBhcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbjpcblx0ICpcblx0ICogYGBganNcblx0ICogbGliLmRlZmluZSgnaW50JywgL15bMC05XSskLyk7XG5cdCAqIGBgYFxuXHQgKlxuXHQgKiAuLi4gb3IgYXMgYSBmdW5jdGlvbjpcblx0ICpcblx0ICogYGBganNcblx0ICogbGliLmRlZmluZSgnYmxuJywgZnVuY3Rpb24gKG9iaikge1xuXHQgKiAgIGlmICgnYm9vbGVhbicgPT09IGxpYi5vZihvYmopKSByZXR1cm4gdHJ1ZTtcblx0ICogICB2YXIgYmxucyA9IFsgJ3llcycsICdubycsICd0cnVlJywgJ2ZhbHNlJywgMSwgMCBdO1xuXHQgKiAgIGlmICgnc3RyaW5nJyA9PT0gbGliLm9mKG9iaikpIG9iaiA9IG9iai50b0xvd2VyQ2FzZSgpO1xuXHQgKiAgIHJldHVybiAhISB+Ymxucy5pbmRleE9mKG9iaik7XG5cdCAqIH0pO1xuXHQgKiBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHBhcmFtIHtSZWdFeHB8RnVuY3Rpb259IHRlc3Rcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRMaWJyYXJ5LnByb3RvdHlwZS5kZWZpbmUgPSBmdW5jdGlvbih0eXBlLCB0ZXN0KSB7XG5cdCAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHJldHVybiB0aGlzLnRlc3RzW3R5cGVdO1xuXHQgIHRoaXMudGVzdHNbdHlwZV0gPSB0ZXN0O1xuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqICMjIyMgLnRlc3QgKG9iaiwgdGVzdClcblx0ICpcblx0ICogQXNzZXJ0IHRoYXQgYW4gb2JqZWN0IGlzIG9mIHR5cGUuIFdpbGwgZmlyc3Rcblx0ICogY2hlY2sgbmF0aXZlcywgYW5kIGlmIHRoYXQgZG9lcyBub3QgcGFzcyBpdCB3aWxsXG5cdCAqIHVzZSB0aGUgdXNlciBkZWZpbmVkIGN1c3RvbSB0ZXN0cy5cblx0ICpcblx0ICogYGBganNcblx0ICogYXNzZXJ0KGxpYi50ZXN0KCcxJywgJ2ludCcpKTtcblx0ICogYXNzZXJ0KGxpYi50ZXN0KCd5ZXMnLCAnYmxuJykpO1xuXHQgKiBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdExpYnJhcnkucHJvdG90eXBlLnRlc3QgPSBmdW5jdGlvbihvYmosIHR5cGUpIHtcblx0ICBpZiAodHlwZSA9PT0gZ2V0VHlwZShvYmopKSByZXR1cm4gdHJ1ZTtcblx0ICB2YXIgdGVzdCA9IHRoaXMudGVzdHNbdHlwZV07XG5cdFxuXHQgIGlmICh0ZXN0ICYmICdyZWdleHAnID09PSBnZXRUeXBlKHRlc3QpKSB7XG5cdCAgICByZXR1cm4gdGVzdC50ZXN0KG9iaik7XG5cdCAgfSBlbHNlIGlmICh0ZXN0ICYmICdmdW5jdGlvbicgPT09IGdldFR5cGUodGVzdCkpIHtcblx0ICAgIHJldHVybiB0ZXN0KG9iaik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignVHlwZSB0ZXN0IFwiJyArIHR5cGUgKyAnXCIgbm90IGRlZmluZWQgb3IgaW52YWxpZC4nKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiFcblx0ICogQ2hhaSAtIGV4cGVjdFR5cGVzIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqICMjIyBleHBlY3RUeXBlcyhvYmosIHR5cGVzKVxuXHQgKlxuXHQgKiBFbnN1cmVzIHRoYXQgdGhlIG9iamVjdCBiZWluZyB0ZXN0ZWQgYWdhaW5zdCBpcyBvZiBhIHZhbGlkIHR5cGUuXG5cdCAqXG5cdCAqICAgICB1dGlscy5leHBlY3RUeXBlcyh0aGlzLCBbJ2FycmF5JywgJ29iamVjdCcsICdzdHJpbmcnXSk7XG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IG9iaiBjb25zdHJ1Y3RlZCBBc3NlcnRpb25cblx0ICogQHBhcmFtIHtBcnJheX0gdHlwZSBBIGxpc3Qgb2YgYWxsb3dlZCB0eXBlcyBmb3IgdGhpcyBhc3NlcnRpb25cblx0ICogQG5hbWVzcGFjZSBVdGlsc1xuXHQgKiBAbmFtZSBleHBlY3RUeXBlc1xuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdHZhciBBc3NlcnRpb25FcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpO1xuXHR2YXIgZmxhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpO1xuXHR2YXIgdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCB0eXBlcykge1xuXHQgIHZhciBvYmogPSBmbGFnKG9iaiwgJ29iamVjdCcpO1xuXHQgIHR5cGVzID0gdHlwZXMubWFwKGZ1bmN0aW9uICh0KSB7IHJldHVybiB0LnRvTG93ZXJDYXNlKCk7IH0pO1xuXHQgIHR5cGVzLnNvcnQoKTtcblx0XG5cdCAgLy8gVHJhbnNmb3JtcyBbJ2xvcmVtJywgJ2lwc3VtJ10gaW50byAnYSBsaXJ1bSwgb3IgYW4gaXBzdW0nXG5cdCAgdmFyIHN0ciA9IHR5cGVzLm1hcChmdW5jdGlvbiAodCwgaW5kZXgpIHtcblx0ICAgIHZhciBhcnQgPSB+WyAnYScsICdlJywgJ2knLCAnbycsICd1JyBdLmluZGV4T2YodC5jaGFyQXQoMCkpID8gJ2FuJyA6ICdhJztcblx0ICAgIHZhciBvciA9IHR5cGVzLmxlbmd0aCA+IDEgJiYgaW5kZXggPT09IHR5cGVzLmxlbmd0aCAtIDEgPyAnb3IgJyA6ICcnO1xuXHQgICAgcmV0dXJuIG9yICsgYXJ0ICsgJyAnICsgdDtcblx0ICB9KS5qb2luKCcsICcpO1xuXHRcblx0ICBpZiAoIXR5cGVzLnNvbWUoZnVuY3Rpb24gKGV4cGVjdGVkKSB7IHJldHVybiB0eXBlKG9iaikgPT09IGV4cGVjdGVkOyB9KSkge1xuXHQgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKFxuXHQgICAgICAnb2JqZWN0IHRlc3RlZCBtdXN0IGJlICcgKyBzdHIgKyAnLCBidXQgJyArIHR5cGUob2JqKSArICcgZ2l2ZW4nXG5cdCAgICApO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogNzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gbWVzc2FnZSBjb21wb3NpdGlvbiB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qIVxuXHQgKiBNb2R1bGUgZGVwZW5kYW5jaWVzXG5cdCAqL1xuXHRcblx0dmFyIGZsYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKVxuXHQgICwgZ2V0QWN0dWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nilcblx0ICAsIGluc3BlY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KVxuXHQgICwgb2JqRGlzcGxheSA9IF9fd2VicGFja19yZXF1aXJlX18oODEpO1xuXHRcblx0LyoqXG5cdCAqICMjIyAuZ2V0TWVzc2FnZShvYmplY3QsIG1lc3NhZ2UsIG5lZ2F0ZU1lc3NhZ2UpXG5cdCAqXG5cdCAqIENvbnN0cnVjdCB0aGUgZXJyb3IgbWVzc2FnZSBiYXNlZCBvbiBmbGFnc1xuXHQgKiBhbmQgdGVtcGxhdGUgdGFncy4gVGVtcGxhdGUgdGFncyB3aWxsIHJldHVyblxuXHQgKiBhIHN0cmluZ2lmaWVkIGluc3BlY3Rpb24gb2YgdGhlIG9iamVjdCByZWZlcmVuY2VkLlxuXHQgKlxuXHQgKiBNZXNzYWdlIHRlbXBsYXRlIHRhZ3M6XG5cdCAqIC0gYCN7dGhpc31gIGN1cnJlbnQgYXNzZXJ0ZWQgb2JqZWN0XG5cdCAqIC0gYCN7YWN0fWAgYWN0dWFsIHZhbHVlXG5cdCAqIC0gYCN7ZXhwfWAgZXhwZWN0ZWQgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCAoY29uc3RydWN0ZWQgQXNzZXJ0aW9uKVxuXHQgKiBAcGFyYW0ge0FyZ3VtZW50c30gY2hhaS5Bc3NlcnRpb24ucHJvdG90eXBlLmFzc2VydCBhcmd1bWVudHNcblx0ICogQG5hbWVzcGFjZSBVdGlsc1xuXHQgKiBAbmFtZSBnZXRNZXNzYWdlXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBhcmdzKSB7XG5cdCAgdmFyIG5lZ2F0ZSA9IGZsYWcob2JqLCAnbmVnYXRlJylcblx0ICAgICwgdmFsID0gZmxhZyhvYmosICdvYmplY3QnKVxuXHQgICAgLCBleHBlY3RlZCA9IGFyZ3NbM11cblx0ICAgICwgYWN0dWFsID0gZ2V0QWN0dWFsKG9iaiwgYXJncylcblx0ICAgICwgbXNnID0gbmVnYXRlID8gYXJnc1syXSA6IGFyZ3NbMV1cblx0ICAgICwgZmxhZ01zZyA9IGZsYWcob2JqLCAnbWVzc2FnZScpO1xuXHRcblx0ICBpZih0eXBlb2YgbXNnID09PSBcImZ1bmN0aW9uXCIpIG1zZyA9IG1zZygpO1xuXHQgIG1zZyA9IG1zZyB8fCAnJztcblx0ICBtc2cgPSBtc2dcblx0ICAgIC5yZXBsYWNlKC8jXFx7dGhpc1xcfS9nLCBmdW5jdGlvbiAoKSB7IHJldHVybiBvYmpEaXNwbGF5KHZhbCk7IH0pXG5cdCAgICAucmVwbGFjZSgvI1xce2FjdFxcfS9nLCBmdW5jdGlvbiAoKSB7IHJldHVybiBvYmpEaXNwbGF5KGFjdHVhbCk7IH0pXG5cdCAgICAucmVwbGFjZSgvI1xce2V4cFxcfS9nLCBmdW5jdGlvbiAoKSB7IHJldHVybiBvYmpEaXNwbGF5KGV4cGVjdGVkKTsgfSk7XG5cdFxuXHQgIHJldHVybiBmbGFnTXNnID8gZmxhZ01zZyArICc6ICcgKyBtc2cgOiBtc2c7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogQ2hhaSAtIGdldEFjdHVhbCB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qKlxuXHQgKiAjIGdldEFjdHVhbChvYmplY3QsIFthY3R1YWxdKVxuXHQgKlxuXHQgKiBSZXR1cm5zIHRoZSBgYWN0dWFsYCB2YWx1ZSBmb3IgYW4gQXNzZXJ0aW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgKGNvbnN0cnVjdGVkIEFzc2VydGlvbilcblx0ICogQHBhcmFtIHtBcmd1bWVudHN9IGNoYWkuQXNzZXJ0aW9uLnByb3RvdHlwZS5hc3NlcnQgYXJndW1lbnRzXG5cdCAqIEBuYW1lc3BhY2UgVXRpbHNcblx0ICogQG5hbWUgZ2V0QWN0dWFsXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBhcmdzKSB7XG5cdCAgcmV0dXJuIGFyZ3MubGVuZ3RoID4gNCA/IGFyZ3NbNF0gOiBvYmouX29iajtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIFRoaXMgaXMgKGFsbW9zdCkgZGlyZWN0bHkgZnJvbSBOb2RlLmpzIHV0aWxzXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9ibG9iL2Y4YzMzNWQwY2FmNDdmMTZkMzE0MTNmODlhYTI4ZWRhMzg3OGUzYWEvbGliL3V0aWwuanNcblx0XG5cdHZhciBnZXROYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7XG5cdHZhciBnZXRQcm9wZXJ0aWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7XG5cdHZhciBnZXRFbnVtZXJhYmxlUHJvcGVydGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbnNwZWN0O1xuXHRcblx0LyoqXG5cdCAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcblx0ICogaW4gdGhlIGJlc3Qgd2F5IHBvc3NpYmxlIGdpdmVuIHRoZSBkaWZmZXJlbnQgdHlwZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvd0hpZGRlbiBGbGFnIHRoYXQgc2hvd3MgaGlkZGVuIChub3QgZW51bWVyYWJsZSlcblx0ICogICAgcHJvcGVydGllcyBvZiBvYmplY3RzLlxuXHQgKiBAcGFyYW0ge051bWJlcn0gZGVwdGggRGVwdGggaW4gd2hpY2ggdG8gZGVzY2VuZCBpbiBvYmplY3QuIERlZmF1bHQgaXMgMi5cblx0ICogQHBhcmFtIHtCb29sZWFufSBjb2xvcnMgRmxhZyB0byB0dXJuIG9uIEFOU0kgZXNjYXBlIGNvZGVzIHRvIGNvbG9yIHRoZVxuXHQgKiAgICBvdXRwdXQuIERlZmF1bHQgaXMgZmFsc2UgKG5vIGNvbG9yaW5nKS5cblx0ICogQG5hbWVzcGFjZSBVdGlsc1xuXHQgKiBAbmFtZSBpbnNwZWN0XG5cdCAqL1xuXHRmdW5jdGlvbiBpbnNwZWN0KG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycykge1xuXHQgIHZhciBjdHggPSB7XG5cdCAgICBzaG93SGlkZGVuOiBzaG93SGlkZGVuLFxuXHQgICAgc2VlbjogW10sXG5cdCAgICBzdHlsaXplOiBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBzdHI7IH1cblx0ICB9O1xuXHQgIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgKHR5cGVvZiBkZXB0aCA9PT0gJ3VuZGVmaW5lZCcgPyAyIDogZGVwdGgpKTtcblx0fVxuXHRcblx0Ly8gUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhIERPTSBlbGVtZW50LlxuXHR2YXIgaXNET01FbGVtZW50ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuXHQgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBvYmplY3QgJiZcblx0ICAgICAgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiZcblx0ICAgICAgb2JqZWN0Lm5vZGVUeXBlID09PSAxICYmXG5cdCAgICAgIHR5cGVvZiBvYmplY3Qubm9kZU5hbWUgPT09ICdzdHJpbmcnO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuXHQgIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cblx0ICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcblx0ICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLmluc3BlY3QgPT09ICdmdW5jdGlvbicgJiZcblx0ICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG5cdCAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJlxuXHQgICAgICAvLyBBbHNvIGZpbHRlciBvdXQgYW55IHByb3RvdHlwZSBvYmplY3RzIHVzaW5nIHRoZSBjaXJjdWxhciBjaGVjay5cblx0ICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuXHQgICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzKTtcblx0ICAgIGlmICh0eXBlb2YgcmV0ICE9PSAnc3RyaW5nJykge1xuXHQgICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXQ7XG5cdCAgfVxuXHRcblx0ICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuXHQgIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7XG5cdCAgaWYgKHByaW1pdGl2ZSkge1xuXHQgICAgcmV0dXJuIHByaW1pdGl2ZTtcblx0ICB9XG5cdFxuXHQgIC8vIElmIHRoaXMgaXMgYSBET00gZWxlbWVudCwgdHJ5IHRvIGdldCB0aGUgb3V0ZXIgSFRNTC5cblx0ICBpZiAoaXNET01FbGVtZW50KHZhbHVlKSkge1xuXHQgICAgaWYgKCdvdXRlckhUTUwnIGluIHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZS5vdXRlckhUTUw7XG5cdCAgICAgIC8vIFRoaXMgdmFsdWUgZG9lcyBub3QgaGF2ZSBhbiBvdXRlckhUTUwgYXR0cmlidXRlLFxuXHQgICAgICAvLyAgIGl0IGNvdWxkIHN0aWxsIGJlIGFuIFhNTCBlbGVtZW50XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBBdHRlbXB0IHRvIHNlcmlhbGl6ZSBpdFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmIChkb2N1bWVudC54bWxWZXJzaW9uKSB7XG5cdCAgICAgICAgICB2YXIgeG1sU2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG5cdCAgICAgICAgICByZXR1cm4geG1sU2VyaWFsaXplci5zZXJpYWxpemVUb1N0cmluZyh2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIEZpcmVmb3ggMTEtIGRvIG5vdCBzdXBwb3J0IG91dGVySFRNTFxuXHQgICAgICAgICAgLy8gICBJdCBkb2VzLCBob3dldmVyLCBzdXBwb3J0IGlubmVySFRNTFxuXHQgICAgICAgICAgLy8gICBVc2UgdGhlIGZvbGxvd2luZyB0byByZW5kZXIgdGhlIGVsZW1lbnRcblx0ICAgICAgICAgIHZhciBucyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXHQgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ18nKTtcblx0XG5cdCAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodmFsdWUuY2xvbmVOb2RlKGZhbHNlKSk7XG5cdCAgICAgICAgICBodG1sID0gY29udGFpbmVyLmlubmVySFRNTFxuXHQgICAgICAgICAgICAucmVwbGFjZSgnPjwnLCAnPicgKyB2YWx1ZS5pbm5lckhUTUwgKyAnPCcpO1xuXHQgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXHQgICAgICAgICAgcmV0dXJuIGh0bWw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIGEgbm9uLW5hdGl2ZSBET00gaW1wbGVtZW50YXRpb24sXG5cdCAgICAgICAgLy8gICBjb250aW51ZSB3aXRoIHRoZSBub3JtYWwgZmxvdzpcblx0ICAgICAgICAvLyAgIHByaW50aW5nIHRoZSBlbGVtZW50IGFzIGlmIGl0IGlzIGFuIG9iamVjdC5cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gTG9vayB1cCB0aGUga2V5cyBvZiB0aGUgb2JqZWN0LlxuXHQgIHZhciB2aXNpYmxlS2V5cyA9IGdldEVudW1lcmFibGVQcm9wZXJ0aWVzKHZhbHVlKTtcblx0ICB2YXIga2V5cyA9IGN0eC5zaG93SGlkZGVuID8gZ2V0UHJvcGVydGllcyh2YWx1ZSkgOiB2aXNpYmxlS2V5cztcblx0XG5cdCAgLy8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLlxuXHQgIC8vIEluIElFLCBlcnJvcnMgaGF2ZSBhIHNpbmdsZSBgc3RhY2tgIHByb3BlcnR5LCBvciBpZiB0aGV5IGFyZSB2YW5pbGxhIGBFcnJvcmAsXG5cdCAgLy8gYSBgc3RhY2tgIHBsdXMgYGRlc2NyaXB0aW9uYCBwcm9wZXJ0eTsgaWdub3JlIHRob3NlIGZvciBjb25zaXN0ZW5jeS5cblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDAgfHwgKGlzRXJyb3IodmFsdWUpICYmIChcblx0ICAgICAgKGtleXMubGVuZ3RoID09PSAxICYmIGtleXNbMF0gPT09ICdzdGFjaycpIHx8XG5cdCAgICAgIChrZXlzLmxlbmd0aCA9PT0gMiAmJiBrZXlzWzBdID09PSAnZGVzY3JpcHRpb24nICYmIGtleXNbMV0gPT09ICdzdGFjaycpXG5cdCAgICAgKSkpIHtcblx0ICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdmFyIG5hbWUgPSBnZXROYW1lKHZhbHVlKTtcblx0ICAgICAgdmFyIG5hbWVTdWZmaXggPSBuYW1lID8gJzogJyArIG5hbWUgOiAnJztcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZVN1ZmZpeCArICddJywgJ3NwZWNpYWwnKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTtcblx0XG5cdCAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgYXJyYXkgPSB0cnVlO1xuXHQgICAgYnJhY2VzID0gWydbJywgJ10nXTtcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHZhciBuYW1lID0gZ2V0TmFtZSh2YWx1ZSk7XG5cdCAgICB2YXIgbmFtZVN1ZmZpeCA9IG5hbWUgPyAnOiAnICsgbmFtZSA6ICcnO1xuXHQgICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG5hbWVTdWZmaXggKyAnXSc7XG5cdCAgfVxuXHRcblx0ICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuXHQgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG5cdCAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3Jcblx0ICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcblx0ICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcblx0ICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cdFxuXHQgIHZhciBvdXRwdXQ7XG5cdCAgaWYgKGFycmF5KSB7XG5cdCAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucG9wKCk7XG5cdFxuXHQgIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuXHQgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG5cdCAgICBjYXNlICd1bmRlZmluZWQnOlxuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcblx0XG5cdCAgICBjYXNlICdzdHJpbmcnOlxuXHQgICAgICB2YXIgc2ltcGxlID0gJ1xcJycgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXlwifFwiJC9nLCAnJylcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7XG5cdFxuXHQgICAgY2FzZSAnbnVtYmVyJzpcblx0ICAgICAgaWYgKHZhbHVlID09PSAwICYmICgxL3ZhbHVlKSA9PT0gLUluZmluaXR5KSB7XG5cdCAgICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCctMCcsICdudW1iZXInKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpO1xuXHRcblx0ICAgIGNhc2UgJ2Jvb2xlYW4nOlxuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ2Jvb2xlYW4nKTtcblx0ICB9XG5cdCAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzIFwib2JqZWN0XCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLlxuXHQgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcblx0ICB9XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuXHQgIHJldHVybiAnWycgKyBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgKyAnXSc7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG5cdCAgdmFyIG91dHB1dCA9IFtdO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG5cdCAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBTdHJpbmcoaSkpKSB7XG5cdCAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG5cdCAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG91dHB1dC5wdXNoKCcnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHQgICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG5cdCAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG5cdCAgICAgICAgICBrZXksIHRydWUpKTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gb3V0cHV0O1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuXHQgIHZhciBuYW1lLCBzdHI7XG5cdCAgaWYgKHZhbHVlLl9fbG9va3VwR2V0dGVyX18pIHtcblx0ICAgIGlmICh2YWx1ZS5fX2xvb2t1cEdldHRlcl9fKGtleSkpIHtcblx0ICAgICAgaWYgKHZhbHVlLl9fbG9va3VwU2V0dGVyX18oa2V5KSkge1xuXHQgICAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmICh2YWx1ZS5fX2xvb2t1cFNldHRlcl9fKGtleSkpIHtcblx0ICAgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICh2aXNpYmxlS2V5cy5pbmRleE9mKGtleSkgPCAwKSB7XG5cdCAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuXHQgIH1cblx0ICBpZiAoIXN0cikge1xuXHQgICAgaWYgKGN0eC5zZWVuLmluZGV4T2YodmFsdWVba2V5XSkgPCAwKSB7XG5cdCAgICAgIGlmIChyZWN1cnNlVGltZXMgPT09IG51bGwpIHtcblx0ICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlW2tleV0sIG51bGwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgdmFsdWVba2V5XSwgcmVjdXJzZVRpbWVzIC0gMSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHN0ci5pbmRleE9mKCdcXG4nKSA+IC0xKSB7XG5cdCAgICAgICAgaWYgKGFycmF5KSB7XG5cdCAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnICAnICsgbGluZTtcblx0ICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3RyID0gJ1xcbicgKyBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG5cdCAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbQ2lyY3VsYXJdJywgJ3NwZWNpYWwnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBuYW1lID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgaWYgKGFycmF5ICYmIGtleS5tYXRjaCgvXlxcZCskLykpIHtcblx0ICAgICAgcmV0dXJuIHN0cjtcblx0ICAgIH1cblx0ICAgIG5hbWUgPSBKU09OLnN0cmluZ2lmeSgnJyArIGtleSk7XG5cdCAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcblx0ICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG5cdCAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnbmFtZScpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG5cdCAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKVxuXHQgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuXHQgICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5hbWUgKyAnOiAnICsgc3RyO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcblx0ICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuXHQgIHZhciBsZW5ndGggPSBvdXRwdXQucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cikge1xuXHQgICAgbnVtTGluZXNFc3QrKztcblx0ICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcblx0ICAgIHJldHVybiBwcmV2ICsgY3VyLmxlbmd0aCArIDE7XG5cdCAgfSwgMCk7XG5cdFxuXHQgIGlmIChsZW5ndGggPiA2MCkge1xuXHQgICAgcmV0dXJuIGJyYWNlc1swXSArXG5cdCAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG5cdCAgICAgICAgICAgJyAnICtcblx0ICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuXHQgICAgICAgICAgICcgJyArXG5cdCAgICAgICAgICAgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNBcnJheShhcikge1xuXHQgIHJldHVybiBBcnJheS5pc0FycmF5KGFyKSB8fFxuXHQgICAgICAgICAodHlwZW9mIGFyID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhhcikgPT09ICdbb2JqZWN0IEFycmF5XScpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuXHQgIHJldHVybiB0eXBlb2YgcmUgPT09ICdvYmplY3QnICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzRGF0ZShkKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBkID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0Vycm9yKGUpIHtcblx0ICByZXR1cm4gdHlwZW9mIGUgPT09ICdvYmplY3QnICYmIG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiA3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBnZXROYW1lIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqICMgZ2V0TmFtZShmdW5jKVxuXHQgKlxuXHQgKiBHZXRzIHRoZSBuYW1lIG9mIGEgZnVuY3Rpb24sIGluIGEgY3Jvc3MtYnJvd3NlciB3YXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGEgZnVuY3Rpb24gKHVzdWFsbHkgYSBjb25zdHJ1Y3Rvcilcblx0ICogQG5hbWVzcGFjZSBVdGlsc1xuXHQgKiBAbmFtZSBnZXROYW1lXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZnVuYykge1xuXHQgIGlmIChmdW5jLm5hbWUpIHJldHVybiBmdW5jLm5hbWU7XG5cdFxuXHQgIHZhciBtYXRjaCA9IC9eXFxzP2Z1bmN0aW9uIChbXihdKilcXCgvLmV4ZWMoZnVuYyk7XG5cdCAgcmV0dXJuIG1hdGNoICYmIG1hdGNoWzFdID8gbWF0Y2hbMV0gOiBcIlwiO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA3OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBnZXRQcm9wZXJ0aWVzIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqICMjIyAuZ2V0UHJvcGVydGllcyhvYmplY3QpXG5cdCAqXG5cdCAqIFRoaXMgYWxsb3dzIHRoZSByZXRyaWV2YWwgb2YgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LCBlbnVtZXJhYmxlIG9yIG5vdCxcblx0ICogaW5oZXJpdGVkIG9yIG5vdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAqIEBuYW1lc3BhY2UgVXRpbHNcblx0ICogQG5hbWUgZ2V0UHJvcGVydGllc1xuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0UHJvcGVydGllcyhvYmplY3QpIHtcblx0ICB2YXIgcmVzdWx0ID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqZWN0KTtcblx0XG5cdCAgZnVuY3Rpb24gYWRkUHJvcGVydHkocHJvcGVydHkpIHtcblx0ICAgIGlmIChyZXN1bHQuaW5kZXhPZihwcm9wZXJ0eSkgPT09IC0xKSB7XG5cdCAgICAgIHJlc3VsdC5wdXNoKHByb3BlcnR5KTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpO1xuXHQgIHdoaWxlIChwcm90byAhPT0gbnVsbCkge1xuXHQgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvdG8pLmZvckVhY2goYWRkUHJvcGVydHkpO1xuXHQgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogODAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gZ2V0RW51bWVyYWJsZVByb3BlcnRpZXMgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKipcblx0ICogIyMjIC5nZXRFbnVtZXJhYmxlUHJvcGVydGllcyhvYmplY3QpXG5cdCAqXG5cdCAqIFRoaXMgYWxsb3dzIHRoZSByZXRyaWV2YWwgb2YgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QsXG5cdCAqIGluaGVyaXRlZCBvciBub3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKiBAbmFtZXNwYWNlIFV0aWxzXG5cdCAqIEBuYW1lIGdldEVudW1lcmFibGVQcm9wZXJ0aWVzXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRFbnVtZXJhYmxlUHJvcGVydGllcyhvYmplY3QpIHtcblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgZm9yICh2YXIgbmFtZSBpbiBvYmplY3QpIHtcblx0ICAgIHJlc3VsdC5wdXNoKG5hbWUpO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBmbGFnIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyohXG5cdCAqIE1vZHVsZSBkZXBlbmRhbmNpZXNcblx0ICovXG5cdFxuXHR2YXIgaW5zcGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpO1xuXHR2YXIgY29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cdFxuXHQvKipcblx0ICogIyMjIC5vYmpEaXNwbGF5IChvYmplY3QpXG5cdCAqXG5cdCAqIERldGVybWluZXMgaWYgYW4gb2JqZWN0IG9yIGFuIGFycmF5IG1hdGNoZXNcblx0ICogY3JpdGVyaWEgdG8gYmUgaW5zcGVjdGVkIGluLWxpbmUgZm9yIGVycm9yXG5cdCAqIG1lc3NhZ2VzIG9yIHNob3VsZCBiZSB0cnVuY2F0ZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IGphdmFzY3JpcHQgb2JqZWN0IHRvIGluc3BlY3Rcblx0ICogQG5hbWUgb2JqRGlzcGxheVxuXHQgKiBAbmFtZXNwYWNlIFV0aWxzXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG5cdCAgdmFyIHN0ciA9IGluc3BlY3Qob2JqKVxuXHQgICAgLCB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7XG5cdFxuXHQgIGlmIChjb25maWcudHJ1bmNhdGVUaHJlc2hvbGQgJiYgc3RyLmxlbmd0aCA+PSBjb25maWcudHJ1bmNhdGVUaHJlc2hvbGQpIHtcblx0ICAgIGlmICh0eXBlID09PSAnW29iamVjdCBGdW5jdGlvbl0nKSB7XG5cdCAgICAgIHJldHVybiAhb2JqLm5hbWUgfHwgb2JqLm5hbWUgPT09ICcnXG5cdCAgICAgICAgPyAnW0Z1bmN0aW9uXSdcblx0ICAgICAgICA6ICdbRnVuY3Rpb246ICcgKyBvYmoubmFtZSArICddJztcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuXHQgICAgICByZXR1cm4gJ1sgQXJyYXkoJyArIG9iai5sZW5ndGggKyAnKSBdJztcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcblx0ICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopXG5cdCAgICAgICAgLCBrc3RyID0ga2V5cy5sZW5ndGggPiAyXG5cdCAgICAgICAgICA/IGtleXMuc3BsaWNlKDAsIDIpLmpvaW4oJywgJykgKyAnLCAuLi4nXG5cdCAgICAgICAgICA6IGtleXMuam9pbignLCAnKTtcblx0ICAgICAgcmV0dXJuICd7IE9iamVjdCAoJyArIGtzdHIgKyAnKSB9Jztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBzdHI7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBzdHI7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA4MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyBjb25maWcuaW5jbHVkZVN0YWNrXG5cdCAgICpcblx0ICAgKiBVc2VyIGNvbmZpZ3VyYWJsZSBwcm9wZXJ0eSwgaW5mbHVlbmNlcyB3aGV0aGVyIHN0YWNrIHRyYWNlXG5cdCAgICogaXMgaW5jbHVkZWQgaW4gQXNzZXJ0aW9uIGVycm9yIG1lc3NhZ2UuIERlZmF1bHQgb2YgZmFsc2Vcblx0ICAgKiBzdXBwcmVzc2VzIHN0YWNrIHRyYWNlIGluIHRoZSBlcnJvciBtZXNzYWdlLlxuXHQgICAqXG5cdCAgICogICAgIGNoYWkuY29uZmlnLmluY2x1ZGVTdGFjayA9IHRydWU7ICAvLyBlbmFibGUgc3RhY2sgb24gZXJyb3Jcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn1cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICAgaW5jbHVkZVN0YWNrOiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIGNvbmZpZy5zaG93RGlmZlxuXHQgICAqXG5cdCAgICogVXNlciBjb25maWd1cmFibGUgcHJvcGVydHksIGluZmx1ZW5jZXMgd2hldGhlciBvciBub3Rcblx0ICAgKiB0aGUgYHNob3dEaWZmYCBmbGFnIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgdGhyb3duXG5cdCAgICogQXNzZXJ0aW9uRXJyb3JzLiBgZmFsc2VgIHdpbGwgYWx3YXlzIGJlIGBmYWxzZWA7IGB0cnVlYFxuXHQgICAqIHdpbGwgYmUgdHJ1ZSB3aGVuIHRoZSBhc3NlcnRpb24gaGFzIHJlcXVlc3RlZCBhIGRpZmZcblx0ICAgKiBiZSBzaG93bi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn1cblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBzaG93RGlmZjogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIGNvbmZpZy50cnVuY2F0ZVRocmVzaG9sZFxuXHQgICAqXG5cdCAgICogVXNlciBjb25maWd1cmFibGUgcHJvcGVydHksIHNldHMgbGVuZ3RoIHRocmVzaG9sZCBmb3IgYWN0dWFsIGFuZFxuXHQgICAqIGV4cGVjdGVkIHZhbHVlcyBpbiBhc3NlcnRpb24gZXJyb3JzLiBJZiB0aGlzIHRocmVzaG9sZCBpcyBleGNlZWRlZCwgZm9yXG5cdCAgICogZXhhbXBsZSBmb3IgbGFyZ2UgZGF0YSBzdHJ1Y3R1cmVzLCB0aGUgdmFsdWUgaXMgcmVwbGFjZWQgd2l0aCBzb21ldGhpbmdcblx0ICAgKiBsaWtlIGBbIEFycmF5KDMpIF1gIG9yIGB7IE9iamVjdCAocHJvcDEsIHByb3AyKSB9YC5cblx0ICAgKlxuXHQgICAqIFNldCBpdCB0byB6ZXJvIGlmIHlvdSB3YW50IHRvIGRpc2FibGUgdHJ1bmNhdGluZyBhbHRvZ2V0aGVyLlxuXHQgICAqXG5cdCAgICogVGhpcyBpcyBlc3BlY2lhbGx5IHVzZXJmdWwgd2hlbiBkb2luZyBhc3NlcnRpb25zIG9uIGFycmF5czogaGF2aW5nIHRoaXNcblx0ICAgKiBzZXQgdG8gYSByZWFzb25hYmxlIGxhcmdlIHZhbHVlIG1ha2VzIHRoZSBmYWlsdXJlIG1lc3NhZ2VzIHJlYWRpbHlcblx0ICAgKiBpbnNwZWN0YWJsZS5cblx0ICAgKlxuXHQgICAqICAgICBjaGFpLmNvbmZpZy50cnVuY2F0ZVRocmVzaG9sZCA9IDA7ICAvLyBkaXNhYmxlIHRydW5jYXRpbmdcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfVxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIHRydW5jYXRlVGhyZXNob2xkOiA0MFxuXHRcblx0fTtcblxuXG4vKioqLyB9LFxuLyogODMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gdHJhbnNmZXJGbGFncyB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qKlxuXHQgKiAjIyMgdHJhbnNmZXJGbGFncyhhc3NlcnRpb24sIG9iamVjdCwgaW5jbHVkZUFsbCA9IHRydWUpXG5cdCAqXG5cdCAqIFRyYW5zZmVyIGFsbCB0aGUgZmxhZ3MgZm9yIGBhc3NlcnRpb25gIHRvIGBvYmplY3RgLiBJZlxuXHQgKiBgaW5jbHVkZUFsbGAgaXMgc2V0IHRvIGBmYWxzZWAsIHRoZW4gdGhlIGJhc2UgQ2hhaVxuXHQgKiBhc3NlcnRpb24gZmxhZ3MgKG5hbWVseSBgb2JqZWN0YCwgYHNzZmlgLCBhbmQgYG1lc3NhZ2VgKVxuXHQgKiB3aWxsIG5vdCBiZSB0cmFuc2ZlcnJlZC5cblx0ICpcblx0ICpcblx0ICogICAgIHZhciBuZXdBc3NlcnRpb24gPSBuZXcgQXNzZXJ0aW9uKCk7XG5cdCAqICAgICB1dGlscy50cmFuc2ZlckZsYWdzKGFzc2VydGlvbiwgbmV3QXNzZXJ0aW9uKTtcblx0ICpcblx0ICogICAgIHZhciBhbm90aGVyQXNzZXJpdG9uID0gbmV3IEFzc2VydGlvbihteU9iaik7XG5cdCAqICAgICB1dGlscy50cmFuc2ZlckZsYWdzKGFzc2VydGlvbiwgYW5vdGhlckFzc2VydGlvbiwgZmFsc2UpO1xuXHQgKlxuXHQgKiBAcGFyYW0ge0Fzc2VydGlvbn0gYXNzZXJ0aW9uIHRoZSBhc3NlcnRpb24gdG8gdHJhbnNmZXIgdGhlIGZsYWdzIGZyb21cblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCB0aGUgb2JqZWN0IHRvIHRyYW5zZmVyIHRoZSBmbGFncyB0bzsgdXN1YWxseSBhIG5ldyBhc3NlcnRpb25cblx0ICogQHBhcmFtIHtCb29sZWFufSBpbmNsdWRlQWxsXG5cdCAqIEBuYW1lc3BhY2UgVXRpbHNcblx0ICogQG5hbWUgdHJhbnNmZXJGbGFnc1xuXHQgKiBAYXBpIHByaXZhdGVcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG9iamVjdCwgaW5jbHVkZUFsbCkge1xuXHQgIHZhciBmbGFncyA9IGFzc2VydGlvbi5fX2ZsYWdzIHx8IChhc3NlcnRpb24uX19mbGFncyA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuXHRcblx0ICBpZiAoIW9iamVjdC5fX2ZsYWdzKSB7XG5cdCAgICBvYmplY3QuX19mbGFncyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfVxuXHRcblx0ICBpbmNsdWRlQWxsID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMyA/IGluY2x1ZGVBbGwgOiB0cnVlO1xuXHRcblx0ICBmb3IgKHZhciBmbGFnIGluIGZsYWdzKSB7XG5cdCAgICBpZiAoaW5jbHVkZUFsbCB8fFxuXHQgICAgICAgIChmbGFnICE9PSAnb2JqZWN0JyAmJiBmbGFnICE9PSAnc3NmaScgJiYgZmxhZyAhPSAnbWVzc2FnZScpKSB7XG5cdCAgICAgIG9iamVjdC5fX2ZsYWdzW2ZsYWddID0gZmxhZ3NbZmxhZ107XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA4NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KTtcblxuXG4vKioqLyB9LFxuLyogODUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBkZWVwLWVxbFxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMyBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyohXG5cdCAqIE1vZHVsZSBkZXBlbmRlbmNpZXNcblx0ICovXG5cdFxuXHR2YXIgdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oODYpO1xuXHRcblx0LyohXG5cdCAqIEJ1ZmZlci5pc0J1ZmZlciBicm93c2VyIHNoaW1cblx0ICovXG5cdFxuXHR2YXIgQnVmZmVyO1xuXHR0cnkgeyBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKS5CdWZmZXI7IH1cblx0Y2F0Y2goZXgpIHtcblx0ICBCdWZmZXIgPSB7fTtcblx0ICBCdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBQcmltYXJ5IEV4cG9ydFxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGVlcEVxdWFsO1xuXHRcblx0LyoqXG5cdCAqIEFzc2VydCBzdXBlci1zdHJpY3QgKGVnYWwpIGVxdWFsaXR5IGJldHdlZW5cblx0ICogdHdvIG9iamVjdHMgb2YgYW55IHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IGFcblx0ICogQHBhcmFtIHtNaXhlZH0gYlxuXHQgKiBAcGFyYW0ge0FycmF5fSBtZW1vaXNlZCAob3B0aW9uYWwpXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IGVxdWFsIG1hdGNoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIsIG0pIHtcblx0ICBpZiAoc2FtZVZhbHVlKGEsIGIpKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9IGVsc2UgaWYgKCdkYXRlJyA9PT0gdHlwZShhKSkge1xuXHQgICAgcmV0dXJuIGRhdGVFcXVhbChhLCBiKTtcblx0ICB9IGVsc2UgaWYgKCdyZWdleHAnID09PSB0eXBlKGEpKSB7XG5cdCAgICByZXR1cm4gcmVnZXhwRXF1YWwoYSwgYik7XG5cdCAgfSBlbHNlIGlmIChCdWZmZXIuaXNCdWZmZXIoYSkpIHtcblx0ICAgIHJldHVybiBidWZmZXJFcXVhbChhLCBiKTtcblx0ICB9IGVsc2UgaWYgKCdhcmd1bWVudHMnID09PSB0eXBlKGEpKSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzRXF1YWwoYSwgYiwgbSk7XG5cdCAgfSBlbHNlIGlmICghdHlwZUVxdWFsKGEsIGIpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfSBlbHNlIGlmICgoJ29iamVjdCcgIT09IHR5cGUoYSkgJiYgJ29iamVjdCcgIT09IHR5cGUoYikpXG5cdCAgJiYgKCdhcnJheScgIT09IHR5cGUoYSkgJiYgJ2FycmF5JyAhPT0gdHlwZShiKSkpIHtcblx0ICAgIHJldHVybiBzYW1lVmFsdWUoYSwgYik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBvYmplY3RFcXVhbChhLCBiLCBtKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBTdHJpY3QgKGVnYWwpIGVxdWFsaXR5IHRlc3QuIEVuc3VyZXMgdGhhdCBOYU4gYWx3YXlzXG5cdCAqIGVxdWFscyBOYU4gYW5kIGAtMGAgZG9lcyBub3QgZXF1YWwgYCswYC5cblx0ICpcblx0ICogQHBhcmFtIHtNaXhlZH0gYVxuXHQgKiBAcGFyYW0ge01peGVkfSBiXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IGVxdWFsIG1hdGNoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2FtZVZhbHVlKGEsIGIpIHtcblx0ICBpZiAoYSA9PT0gYikgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuXHQgIHJldHVybiBhICE9PSBhICYmIGIgIT09IGI7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBDb21wYXJlIHRoZSB0eXBlcyBvZiB0d28gZ2l2ZW4gb2JqZWN0cyBhbmRcblx0ICogcmV0dXJuIGlmIHRoZXkgYXJlIGVxdWFsLiBOb3RlIHRoYXQgYW4gQXJyYXlcblx0ICogaGFzIGEgdHlwZSBvZiBgYXJyYXlgIChub3QgYG9iamVjdGApIGFuZCBhcmd1bWVudHNcblx0ICogaGF2ZSBhIHR5cGUgb2YgYGFyZ3VtZW50c2AgKG5vdCBgYXJyYXlgL2BvYmplY3RgKS5cblx0ICpcblx0ICogQHBhcmFtIHtNaXhlZH0gYVxuXHQgKiBAcGFyYW0ge01peGVkfSBiXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHR5cGVFcXVhbChhLCBiKSB7XG5cdCAgcmV0dXJuIHR5cGUoYSkgPT09IHR5cGUoYik7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBDb21wYXJlIHR3byBEYXRlIG9iamVjdHMgYnkgYXNzZXJ0aW5nIHRoYXRcblx0ICogdGhlIHRpbWUgdmFsdWVzIGFyZSBlcXVhbCB1c2luZyBgc2F2ZVZhbHVlYC5cblx0ICpcblx0ICogQHBhcmFtIHtEYXRlfSBhXG5cdCAqIEBwYXJhbSB7RGF0ZX0gYlxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkYXRlRXF1YWwoYSwgYikge1xuXHQgIGlmICgnZGF0ZScgIT09IHR5cGUoYikpIHJldHVybiBmYWxzZTtcblx0ICByZXR1cm4gc2FtZVZhbHVlKGEuZ2V0VGltZSgpLCBiLmdldFRpbWUoKSk7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBDb21wYXJlIHR3byByZWd1bGFyIGV4cHJlc3Npb25zIGJ5IGNvbnZlcnRpbmcgdGhlbVxuXHQgKiB0byBzdHJpbmcgYW5kIGNoZWNraW5nIGZvciBgc2FtZVZhbHVlYC5cblx0ICpcblx0ICogQHBhcmFtIHtSZWdFeHB9IGFcblx0ICogQHBhcmFtIHtSZWdFeHB9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVnZXhwRXF1YWwoYSwgYikge1xuXHQgIGlmICgncmVnZXhwJyAhPT0gdHlwZShiKSkgcmV0dXJuIGZhbHNlO1xuXHQgIHJldHVybiBzYW1lVmFsdWUoYS50b1N0cmluZygpLCBiLnRvU3RyaW5nKCkpO1xuXHR9XG5cdFxuXHQvKiFcblx0ICogQXNzZXJ0IGRlZXAgZXF1YWxpdHkgb2YgdHdvIGBhcmd1bWVudHNgIG9iamVjdHMuXG5cdCAqIFVuZm9ydHVuYXRlbHksIHRoZXNlIG11c3QgYmUgc2xpY2VkIHRvIGFycmF5c1xuXHQgKiBwcmlvciB0byB0ZXN0IHRvIGVuc3VyZSBubyBiYWQgYmVoYXZpb3IuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJndW1lbnRzfSBhXG5cdCAqIEBwYXJhbSB7QXJndW1lbnRzfSBiXG5cdCAqIEBwYXJhbSB7QXJyYXl9IG1lbW9pemUgKG9wdGlvbmFsKVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcmd1bWVudHNFcXVhbChhLCBiLCBtKSB7XG5cdCAgaWYgKCdhcmd1bWVudHMnICE9PSB0eXBlKGIpKSByZXR1cm4gZmFsc2U7XG5cdCAgYSA9IFtdLnNsaWNlLmNhbGwoYSk7XG5cdCAgYiA9IFtdLnNsaWNlLmNhbGwoYik7XG5cdCAgcmV0dXJuIGRlZXBFcXVhbChhLCBiLCBtKTtcblx0fVxuXHRcblx0LyohXG5cdCAqIEdldCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYSBnaXZlbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBhXG5cdCAqIEByZXR1cm4ge0FycmF5fSBwcm9wZXJ0eSBuYW1lc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGVudW1lcmFibGUoYSkge1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICBmb3IgKHZhciBrZXkgaW4gYSkgcmVzLnB1c2goa2V5KTtcblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKiFcblx0ICogU2ltcGxlIGVxdWFsaXR5IGZvciBmbGF0IGl0ZXJhYmxlIG9iamVjdHNcblx0ICogc3VjaCBhcyBBcnJheXMgb3IgTm9kZS5qcyBidWZmZXJzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0l0ZXJhYmxlfSBhXG5cdCAqIEBwYXJhbSB7SXRlcmFibGV9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXRlcmFibGVFcXVhbChhLCBiKSB7XG5cdCAgaWYgKGEubGVuZ3RoICE9PSAgYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgdmFyIGkgPSAwO1xuXHQgIHZhciBtYXRjaCA9IHRydWU7XG5cdFxuXHQgIGZvciAoOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcblx0ICAgICAgbWF0Y2ggPSBmYWxzZTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbWF0Y2g7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBFeHRlbnNpb24gdG8gYGl0ZXJhYmxlRXF1YWxgIHNwZWNpZmljYWxseVxuXHQgKiBmb3IgTm9kZS5qcyBCdWZmZXJzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0J1ZmZlcn0gYVxuXHQgKiBAcGFyYW0ge01peGVkfSBiXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJ1ZmZlckVxdWFsKGEsIGIpIHtcblx0ICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgcmV0dXJuIGZhbHNlO1xuXHQgIHJldHVybiBpdGVyYWJsZUVxdWFsKGEsIGIpO1xuXHR9XG5cdFxuXHQvKiFcblx0ICogQmxvY2sgZm9yIGBvYmplY3RFcXVhbGAgZW5zdXJpbmcgbm9uLWV4aXN0aW5nXG5cdCAqIHZhbHVlcyBkb24ndCBnZXQgaW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1ZhbHVlKGEpIHtcblx0ICByZXR1cm4gYSAhPT0gbnVsbCAmJiBhICE9PSB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdC8qIVxuXHQgKiBSZWN1cnNpdmVseSBjaGVjayB0aGUgZXF1YWxpdHkgb2YgdHdvIG9iamVjdHMuXG5cdCAqIE9uY2UgYmFzaWMgc2FtZW5lc3MgaGFzIGJlZW4gZXN0YWJsaXNoZWQgaXQgd2lsbFxuXHQgKiBkZWZlciB0byBgZGVlcEVxdWFsYCBmb3IgZWFjaCBlbnVtZXJhYmxlIGtleVxuXHQgKiBpbiB0aGUgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge01peGVkfSBhXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb2JqZWN0RXF1YWwoYSwgYiwgbSkge1xuXHQgIGlmICghaXNWYWx1ZShhKSB8fCAhaXNWYWx1ZShiKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgaWYgKGEucHJvdG90eXBlICE9PSBiLnByb3RvdHlwZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgdmFyIGk7XG5cdCAgaWYgKG0pIHtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBtLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmICgobVtpXVswXSA9PT0gYSAmJiBtW2ldWzFdID09PSBiKVxuXHQgICAgICB8fCAgKG1baV1bMF0gPT09IGIgJiYgbVtpXVsxXSA9PT0gYSkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBtID0gW107XG5cdCAgfVxuXHRcblx0ICB0cnkge1xuXHQgICAgdmFyIGthID0gZW51bWVyYWJsZShhKTtcblx0ICAgIHZhciBrYiA9IGVudW1lcmFibGUoYik7XG5cdCAgfSBjYXRjaCAoZXgpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGthLnNvcnQoKTtcblx0ICBrYi5zb3J0KCk7XG5cdFxuXHQgIGlmICghaXRlcmFibGVFcXVhbChrYSwga2IpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICBtLnB1c2goWyBhLCBiIF0pO1xuXHRcblx0ICB2YXIga2V5O1xuXHQgIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBrZXkgPSBrYVtpXTtcblx0ICAgIGlmICghZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBtKSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiA4NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KTtcblxuXG4vKioqLyB9LFxuLyogODcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiB0eXBlLWRldGVjdFxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMyBqYWtlIGx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0LyohXG5cdCAqIFByaW1hcnkgRXhwb3J0c1xuXHQgKi9cblx0XG5cdHZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBnZXRUeXBlO1xuXHRcblx0LyohXG5cdCAqIERldGVjdGFibGUgamF2YXNjcmlwdCBuYXRpdmVzXG5cdCAqL1xuXHRcblx0dmFyIG5hdGl2ZXMgPSB7XG5cdCAgICAnW29iamVjdCBBcnJheV0nOiAnYXJyYXknXG5cdCAgLCAnW29iamVjdCBSZWdFeHBdJzogJ3JlZ2V4cCdcblx0ICAsICdbb2JqZWN0IEZ1bmN0aW9uXSc6ICdmdW5jdGlvbidcblx0ICAsICdbb2JqZWN0IEFyZ3VtZW50c10nOiAnYXJndW1lbnRzJ1xuXHQgICwgJ1tvYmplY3QgRGF0ZV0nOiAnZGF0ZSdcblx0fTtcblx0XG5cdC8qKlxuXHQgKiAjIyMgdHlwZU9mIChvYmopXG5cdCAqXG5cdCAqIFVzZSBzZXZlcmFsIGRpZmZlcmVudCB0ZWNobmlxdWVzIHRvIGRldGVybWluZVxuXHQgKiB0aGUgdHlwZSBvZiBvYmplY3QgYmVpbmcgdGVzdGVkLlxuXHQgKlxuXHQgKlxuXHQgKiBAcGFyYW0ge01peGVkfSBvYmplY3Rcblx0ICogQHJldHVybiB7U3RyaW5nfSBvYmplY3QgdHlwZVxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFR5cGUgKG9iaikge1xuXHQgIHZhciBzdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTtcblx0ICBpZiAobmF0aXZlc1tzdHJdKSByZXR1cm4gbmF0aXZlc1tzdHJdO1xuXHQgIGlmIChvYmogPT09IG51bGwpIHJldHVybiAnbnVsbCc7XG5cdCAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG5cdCAgaWYgKG9iaiA9PT0gT2JqZWN0KG9iaikpIHJldHVybiAnb2JqZWN0Jztcblx0ICByZXR1cm4gdHlwZW9mIG9iajtcblx0fVxuXHRcblx0ZXhwb3J0cy5MaWJyYXJ5ID0gTGlicmFyeTtcblx0XG5cdC8qKlxuXHQgKiAjIyMgTGlicmFyeVxuXHQgKlxuXHQgKiBDcmVhdGUgYSByZXBvc2l0b3J5IGZvciBjdXN0b20gdHlwZSBkZXRlY3Rpb24uXG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqIHZhciBsaWIgPSBuZXcgdHlwZS5MaWJyYXJ5O1xuXHQgKiBgYGBcblx0ICpcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBMaWJyYXJ5ICgpIHtcblx0ICB0aGlzLnRlc3RzID0ge307XG5cdH1cblx0XG5cdC8qKlxuXHQgKiAjIyMjIC5vZiAob2JqKVxuXHQgKlxuXHQgKiBFeHBvc2UgcmVwbGFjZW1lbnQgYHR5cGVvZmAgZGV0ZWN0aW9uIHRvIHRoZSBsaWJyYXJ5LlxuXHQgKlxuXHQgKiBgYGBqc1xuXHQgKiBpZiAoJ3N0cmluZycgPT09IGxpYi5vZignaGVsbG8gd29ybGQnKSkge1xuXHQgKiAgIC8vIC4uLlxuXHQgKiB9XG5cdCAqIGBgYFxuXHQgKlxuXHQgKiBAcGFyYW0ge01peGVkfSBvYmplY3QgdG8gdGVzdFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRMaWJyYXJ5LnByb3RvdHlwZS5vZiA9IGdldFR5cGU7XG5cdFxuXHQvKipcblx0ICogIyMjIyAuZGVmaW5lICh0eXBlLCB0ZXN0KVxuXHQgKlxuXHQgKiBBZGQgYSB0ZXN0IHRvIGZvciB0aGUgYC50ZXN0KClgIGFzc2VydGlvbi5cblx0ICpcblx0ICogQ2FuIGJlIGRlZmluZWQgYXMgYSByZWd1bGFyIGV4cHJlc3Npb246XG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqIGxpYi5kZWZpbmUoJ2ludCcsIC9eWzAtOV0rJC8pO1xuXHQgKiBgYGBcblx0ICpcblx0ICogLi4uIG9yIGFzIGEgZnVuY3Rpb246XG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqIGxpYi5kZWZpbmUoJ2JsbicsIGZ1bmN0aW9uIChvYmopIHtcblx0ICogICBpZiAoJ2Jvb2xlYW4nID09PSBsaWIub2Yob2JqKSkgcmV0dXJuIHRydWU7XG5cdCAqICAgdmFyIGJsbnMgPSBbICd5ZXMnLCAnbm8nLCAndHJ1ZScsICdmYWxzZScsIDEsIDAgXTtcblx0ICogICBpZiAoJ3N0cmluZycgPT09IGxpYi5vZihvYmopKSBvYmogPSBvYmoudG9Mb3dlckNhc2UoKTtcblx0ICogICByZXR1cm4gISEgfmJsbnMuaW5kZXhPZihvYmopO1xuXHQgKiB9KTtcblx0ICogYGBgXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqIEBwYXJhbSB7UmVnRXhwfEZ1bmN0aW9ufSB0ZXN0XG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0TGlicmFyeS5wcm90b3R5cGUuZGVmaW5lID0gZnVuY3Rpb24gKHR5cGUsIHRlc3QpIHtcblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHRoaXMudGVzdHNbdHlwZV07XG5cdCAgdGhpcy50ZXN0c1t0eXBlXSA9IHRlc3Q7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHQvKipcblx0ICogIyMjIyAudGVzdCAob2JqLCB0ZXN0KVxuXHQgKlxuXHQgKiBBc3NlcnQgdGhhdCBhbiBvYmplY3QgaXMgb2YgdHlwZS4gV2lsbCBmaXJzdFxuXHQgKiBjaGVjayBuYXRpdmVzLCBhbmQgaWYgdGhhdCBkb2VzIG5vdCBwYXNzIGl0IHdpbGxcblx0ICogdXNlIHRoZSB1c2VyIGRlZmluZWQgY3VzdG9tIHRlc3RzLlxuXHQgKlxuXHQgKiBgYGBqc1xuXHQgKiBhc3NlcnQobGliLnRlc3QoJzEnLCAnaW50JykpO1xuXHQgKiBhc3NlcnQobGliLnRlc3QoJ3llcycsICdibG4nKSk7XG5cdCAqIGBgYFxuXHQgKlxuXHQgKiBAcGFyYW0ge01peGVkfSBvYmplY3Rcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0TGlicmFyeS5wcm90b3R5cGUudGVzdCA9IGZ1bmN0aW9uIChvYmosIHR5cGUpIHtcblx0ICBpZiAodHlwZSA9PT0gZ2V0VHlwZShvYmopKSByZXR1cm4gdHJ1ZTtcblx0ICB2YXIgdGVzdCA9IHRoaXMudGVzdHNbdHlwZV07XG5cdFxuXHQgIGlmICh0ZXN0ICYmICdyZWdleHAnID09PSBnZXRUeXBlKHRlc3QpKSB7XG5cdCAgICByZXR1cm4gdGVzdC50ZXN0KG9iaik7XG5cdCAgfSBlbHNlIGlmICh0ZXN0ICYmICdmdW5jdGlvbicgPT09IGdldFR5cGUodGVzdCkpIHtcblx0ICAgIHJldHVybiB0ZXN0KG9iaik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignVHlwZSB0ZXN0IFwiJyArIHR5cGUgKyAnXCIgbm90IGRlZmluZWQgb3IgaW52YWxpZC4nKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDg4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiFcblx0ICogQ2hhaSAtIGdldFBhdGhWYWx1ZSB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2xvZ2ljYWxwYXJhZG94L2ZpbHRyXG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdHZhciBnZXRQYXRoSW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oODkpO1xuXHRcblx0LyoqXG5cdCAqICMjIyAuZ2V0UGF0aFZhbHVlKHBhdGgsIG9iamVjdClcblx0ICpcblx0ICogVGhpcyBhbGxvd3MgdGhlIHJldHJpZXZhbCBvZiB2YWx1ZXMgaW4gYW5cblx0ICogb2JqZWN0IGdpdmVuIGEgc3RyaW5nIHBhdGguXG5cdCAqXG5cdCAqICAgICB2YXIgb2JqID0ge1xuXHQgKiAgICAgICAgIHByb3AxOiB7XG5cdCAqICAgICAgICAgICAgIGFycjogWydhJywgJ2InLCAnYyddXG5cdCAqICAgICAgICAgICAsIHN0cjogJ0hlbGxvJ1xuXHQgKiAgICAgICAgIH1cblx0ICogICAgICAgLCBwcm9wMjoge1xuXHQgKiAgICAgICAgICAgICBhcnI6IFsgeyBuZXN0ZWQ6ICdVbml2ZXJzZScgfSBdXG5cdCAqICAgICAgICAgICAsIHN0cjogJ0hlbGxvIGFnYWluISdcblx0ICogICAgICAgICB9XG5cdCAqICAgICB9XG5cdCAqXG5cdCAqIFRoZSBmb2xsb3dpbmcgd291bGQgYmUgdGhlIHJlc3VsdHMuXG5cdCAqXG5cdCAqICAgICBnZXRQYXRoVmFsdWUoJ3Byb3AxLnN0cicsIG9iaik7IC8vIEhlbGxvXG5cdCAqICAgICBnZXRQYXRoVmFsdWUoJ3Byb3AxLmF0dFsyXScsIG9iaik7IC8vIGJcblx0ICogICAgIGdldFBhdGhWYWx1ZSgncHJvcDIuYXJyWzBdLm5lc3RlZCcsIG9iaik7IC8vIFVuaXZlcnNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICogQHJldHVybnMge09iamVjdH0gdmFsdWUgb3IgYHVuZGVmaW5lZGBcblx0ICogQG5hbWVzcGFjZSBVdGlsc1xuXHQgKiBAbmFtZSBnZXRQYXRoVmFsdWVcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocGF0aCwgb2JqKSB7XG5cdCAgdmFyIGluZm8gPSBnZXRQYXRoSW5mbyhwYXRoLCBvYmopO1xuXHQgIHJldHVybiBpbmZvLnZhbHVlO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA4OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBnZXRQYXRoSW5mbyB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdHZhciBoYXNQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oOTApO1xuXHRcblx0LyoqXG5cdCAqICMjIyAuZ2V0UGF0aEluZm8ocGF0aCwgb2JqZWN0KVxuXHQgKlxuXHQgKiBUaGlzIGFsbG93cyB0aGUgcmV0cmlldmFsIG9mIHByb3BlcnR5IGluZm8gaW4gYW5cblx0ICogb2JqZWN0IGdpdmVuIGEgc3RyaW5nIHBhdGguXG5cdCAqXG5cdCAqIFRoZSBwYXRoIGluZm8gY29uc2lzdHMgb2YgYW4gb2JqZWN0IHdpdGggdGhlXG5cdCAqIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuXHQgKlxuXHQgKiAqIHBhcmVudCAtIFRoZSBwYXJlbnQgb2JqZWN0IG9mIHRoZSBwcm9wZXJ0eSByZWZlcmVuY2VkIGJ5IGBwYXRoYFxuXHQgKiAqIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZmluYWwgcHJvcGVydHksIGEgbnVtYmVyIGlmIGl0IHdhcyBhbiBhcnJheSBpbmRleGVyXG5cdCAqICogdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5LCBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSBgdW5kZWZpbmVkYFxuXHQgKiAqIGV4aXN0cyAtIFdoZXRoZXIgdGhlIHByb3BlcnR5IGV4aXN0cyBvciBub3Rcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBpbmZvXG5cdCAqIEBuYW1lc3BhY2UgVXRpbHNcblx0ICogQG5hbWUgZ2V0UGF0aEluZm9cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldFBhdGhJbmZvKHBhdGgsIG9iaikge1xuXHQgIHZhciBwYXJzZWQgPSBwYXJzZVBhdGgocGF0aCksXG5cdCAgICAgIGxhc3QgPSBwYXJzZWRbcGFyc2VkLmxlbmd0aCAtIDFdO1xuXHRcblx0ICB2YXIgaW5mbyA9IHtcblx0ICAgIHBhcmVudDogcGFyc2VkLmxlbmd0aCA+IDEgPyBfZ2V0UGF0aFZhbHVlKHBhcnNlZCwgb2JqLCBwYXJzZWQubGVuZ3RoIC0gMSkgOiBvYmosXG5cdCAgICBuYW1lOiBsYXN0LnAgfHwgbGFzdC5pLFxuXHQgICAgdmFsdWU6IF9nZXRQYXRoVmFsdWUocGFyc2VkLCBvYmopXG5cdCAgfTtcblx0ICBpbmZvLmV4aXN0cyA9IGhhc1Byb3BlcnR5KGluZm8ubmFtZSwgaW5mby5wYXJlbnQpO1xuXHRcblx0ICByZXR1cm4gaW5mbztcblx0fTtcblx0XG5cdFxuXHQvKiFcblx0ICogIyMgcGFyc2VQYXRoKHBhdGgpXG5cdCAqXG5cdCAqIEhlbHBlciBmdW5jdGlvbiB1c2VkIHRvIHBhcnNlIHN0cmluZyBvYmplY3Rcblx0ICogcGF0aHMuIFVzZSBpbiBjb25qdW5jdGlvbiB3aXRoIGBfZ2V0UGF0aFZhbHVlYC5cblx0ICpcblx0ICogICAgICB2YXIgcGFyc2VkID0gcGFyc2VQYXRoKCdteW9iamVjdC5wcm9wZXJ0eS5zdWJwcm9wJyk7XG5cdCAqXG5cdCAqICMjIyBQYXRoczpcblx0ICpcblx0ICogKiBDYW4gYmUgYXMgbmVhciBpbmZpbml0ZWx5IGRlZXAgYW5kIG5lc3RlZFxuXHQgKiAqIEFycmF5cyBhcmUgYWxzbyB2YWxpZCB1c2luZyB0aGUgZm9ybWFsIGBteW9iamVjdC5kb2N1bWVudFszXS5wcm9wZXJ0eWAuXG5cdCAqICogTGl0ZXJhbCBkb3RzIGFuZCBicmFja2V0cyAobm90IGRlbGltaXRlcikgbXVzdCBiZSBiYWNrc2xhc2gtZXNjYXBlZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybnMge09iamVjdH0gcGFyc2VkXG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlUGF0aCAocGF0aCkge1xuXHQgIHZhciBzdHIgPSBwYXRoLnJlcGxhY2UoLyhbXlxcXFxdKVxcWy9nLCAnJDEuWycpXG5cdCAgICAsIHBhcnRzID0gc3RyLm1hdGNoKC8oXFxcXFxcLnxbXi5dKz8pKy9nKTtcblx0ICByZXR1cm4gcGFydHMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgdmFyIHJlID0gL15cXFsoXFxkKylcXF0kL1xuXHQgICAgICAsIG1BcnIgPSByZS5leGVjKHZhbHVlKTtcblx0ICAgIGlmIChtQXJyKSByZXR1cm4geyBpOiBwYXJzZUZsb2F0KG1BcnJbMV0pIH07XG5cdCAgICBlbHNlIHJldHVybiB7IHA6IHZhbHVlLnJlcGxhY2UoL1xcXFwoWy5cXFtcXF1dKS9nLCAnJDEnKSB9O1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRcblx0LyohXG5cdCAqICMjIF9nZXRQYXRoVmFsdWUocGFyc2VkLCBvYmopXG5cdCAqXG5cdCAqIEhlbHBlciBjb21wYW5pb24gZnVuY3Rpb24gZm9yIGAucGFyc2VQYXRoYCB0aGF0IHJldHVybnNcblx0ICogdGhlIHZhbHVlIGxvY2F0ZWQgYXQgdGhlIHBhcnNlZCBhZGRyZXNzLlxuXHQgKlxuXHQgKiAgICAgIHZhciB2YWx1ZSA9IGdldFBhdGhWYWx1ZShwYXJzZWQsIG9iaik7XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwYXJzZWQgZGVmaW5pdGlvbiBmcm9tIGBwYXJzZVBhdGhgLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IHRvIHNlYXJjaCBhZ2FpbnN0XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBvYmplY3QgdG8gc2VhcmNoIGFnYWluc3Rcblx0ICogQHJldHVybnMge09iamVjdHxVbmRlZmluZWR9IHZhbHVlXG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF9nZXRQYXRoVmFsdWUgKHBhcnNlZCwgb2JqLCBpbmRleCkge1xuXHQgIHZhciB0bXAgPSBvYmpcblx0ICAgICwgcmVzO1xuXHRcblx0ICBpbmRleCA9IChpbmRleCA9PT0gdW5kZWZpbmVkID8gcGFyc2VkLmxlbmd0aCA6IGluZGV4KTtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBpbmRleDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIHBhcnQgPSBwYXJzZWRbaV07XG5cdCAgICBpZiAodG1wKSB7XG5cdCAgICAgIGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHBhcnQucClcblx0ICAgICAgICB0bXAgPSB0bXBbcGFydC5wXTtcblx0ICAgICAgZWxzZSBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBwYXJ0LmkpXG5cdCAgICAgICAgdG1wID0gdG1wW3BhcnQuaV07XG5cdCAgICAgIGlmIChpID09IChsIC0gMSkpIHJlcyA9IHRtcDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlcyA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXG5cbi8qKiovIH0sXG4vKiA5MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBoYXNQcm9wZXJ0eSB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdHZhciB0eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cdFxuXHQvKipcblx0ICogIyMjIC5oYXNQcm9wZXJ0eShvYmplY3QsIG5hbWUpXG5cdCAqXG5cdCAqIFRoaXMgYWxsb3dzIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhc1xuXHQgKiBuYW1lZCBwcm9wZXJ0eSBvciBudW1lcmljIGFycmF5IGluZGV4LlxuXHQgKlxuXHQgKiBCYXNpY2FsbHkgZG9lcyB0aGUgc2FtZSB0aGluZyBhcyB0aGUgYGluYFxuXHQgKiBvcGVyYXRvciBidXQgd29ya3MgcHJvcGVybHkgd2l0aCBuYXRpdmVzXG5cdCAqIGFuZCBudWxsL3VuZGVmaW5lZCB2YWx1ZXMuXG5cdCAqXG5cdCAqICAgICB2YXIgb2JqID0ge1xuXHQgKiAgICAgICAgIGFycjogWydhJywgJ2InLCAnYyddXG5cdCAqICAgICAgICwgc3RyOiAnSGVsbG8nXG5cdCAqICAgICB9XG5cdCAqXG5cdCAqIFRoZSBmb2xsb3dpbmcgd291bGQgYmUgdGhlIHJlc3VsdHMuXG5cdCAqXG5cdCAqICAgICBoYXNQcm9wZXJ0eSgnc3RyJywgb2JqKTsgIC8vIHRydWVcblx0ICogICAgIGhhc1Byb3BlcnR5KCdjb25zdHJ1Y3RvcicsIG9iaik7ICAvLyB0cnVlXG5cdCAqICAgICBoYXNQcm9wZXJ0eSgnYmFyJywgb2JqKTsgIC8vIGZhbHNlXG5cdCAqXG5cdCAqICAgICBoYXNQcm9wZXJ0eSgnbGVuZ3RoJywgb2JqLnN0cik7IC8vIHRydWVcblx0ICogICAgIGhhc1Byb3BlcnR5KDEsIG9iai5zdHIpOyAgLy8gdHJ1ZVxuXHQgKiAgICAgaGFzUHJvcGVydHkoNSwgb2JqLnN0cik7ICAvLyBmYWxzZVxuXHQgKlxuXHQgKiAgICAgaGFzUHJvcGVydHkoJ2xlbmd0aCcsIG9iai5hcnIpOyAgLy8gdHJ1ZVxuXHQgKiAgICAgaGFzUHJvcGVydHkoMiwgb2JqLmFycik7ICAvLyB0cnVlXG5cdCAqICAgICBoYXNQcm9wZXJ0eSgzLCBvYmouYXJyKTsgIC8vIGZhbHNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqdWVjdH0gb2JqZWN0XG5cdCAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gbmFtZVxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbn0gd2hldGhlciBpdCBleGlzdHNcblx0ICogQG5hbWVzcGFjZSBVdGlsc1xuXHQgKiBAbmFtZSBnZXRQYXRoSW5mb1xuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdHZhciBsaXRlcmFscyA9IHtcblx0ICAgICdudW1iZXInOiBOdW1iZXJcblx0ICAsICdzdHJpbmcnOiBTdHJpbmdcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaGFzUHJvcGVydHkobmFtZSwgb2JqKSB7XG5cdCAgdmFyIG90ID0gdHlwZShvYmopO1xuXHRcblx0ICAvLyBCYWQgT2JqZWN0LCBvYnZpb3VzbHkgbm8gcHJvcHMgYXQgYWxsXG5cdCAgaWYob3QgPT09ICdudWxsJyB8fCBvdCA9PT0gJ3VuZGVmaW5lZCcpXG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdFxuXHQgIC8vIFRoZSBgaW5gIG9wZXJhdG9yIGRvZXMgbm90IHdvcmsgd2l0aCBjZXJ0YWluIGxpdGVyYWxzXG5cdCAgLy8gYm94IHRoZXNlIGJlZm9yZSB0aGUgY2hlY2tcblx0ICBpZihsaXRlcmFsc1tvdF0gJiYgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpXG5cdCAgICBvYmogPSBuZXcgbGl0ZXJhbHNbb3RdKG9iaik7XG5cdFxuXHQgIHJldHVybiBuYW1lIGluIG9iajtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogOTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gYWRkUHJvcGVydHkgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHR2YXIgY29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cdHZhciBmbGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cdFxuXHQvKipcblx0ICogIyMjIGFkZFByb3BlcnR5IChjdHgsIG5hbWUsIGdldHRlcilcblx0ICpcblx0ICogQWRkcyBhIHByb3BlcnR5IHRvIHRoZSBwcm90b3R5cGUgb2YgYW4gb2JqZWN0LlxuXHQgKlxuXHQgKiAgICAgdXRpbHMuYWRkUHJvcGVydHkoY2hhaS5Bc3NlcnRpb24ucHJvdG90eXBlLCAnZm9vJywgZnVuY3Rpb24gKCkge1xuXHQgKiAgICAgICB2YXIgb2JqID0gdXRpbHMuZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAqICAgICAgIG5ldyBjaGFpLkFzc2VydGlvbihvYmopLnRvLmJlLmluc3RhbmNlb2YoRm9vKTtcblx0ICogICAgIH0pO1xuXHQgKlxuXHQgKiBDYW4gYWxzbyBiZSBhY2Nlc3NlZCBkaXJlY3RseSBmcm9tIGBjaGFpLkFzc2VydGlvbmAuXG5cdCAqXG5cdCAqICAgICBjaGFpLkFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZm9vJywgZm4pO1xuXHQgKlxuXHQgKiBUaGVuIGNhbiBiZSB1c2VkIGFzIGFueSBvdGhlciBhc3NlcnRpb24uXG5cdCAqXG5cdCAqICAgICBleHBlY3QobXlGb28pLnRvLmJlLmZvbztcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3QgdG8gd2hpY2ggdGhlIHByb3BlcnR5IGlzIGFkZGVkXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG9mIHByb3BlcnR5IHRvIGFkZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBnZXR0ZXIgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgbmFtZVxuXHQgKiBAbmFtZXNwYWNlIFV0aWxzXG5cdCAqIEBuYW1lIGFkZFByb3BlcnR5XG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3R4LCBuYW1lLCBnZXR0ZXIpIHtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBuYW1lLFxuXHQgICAgeyBnZXQ6IGZ1bmN0aW9uIGFkZFByb3BlcnR5KCkge1xuXHQgICAgICAgIHZhciBvbGRfc3NmaSA9IGZsYWcodGhpcywgJ3NzZmknKTtcblx0ICAgICAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG5cdCAgICAgICAgICBmbGFnKHRoaXMsICdzc2ZpJywgYWRkUHJvcGVydHkpO1xuXHRcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0dGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcblx0ICAgICAgfVxuXHQgICAgLCBjb25maWd1cmFibGU6IHRydWVcblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogOTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gYWRkTWV0aG9kIHV0aWxpdHlcblx0ICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cblx0ICogTUlUIExpY2Vuc2VkXG5cdCAqL1xuXHRcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oODIpO1xuXHRcblx0LyoqXG5cdCAqICMjIyAuYWRkTWV0aG9kIChjdHgsIG5hbWUsIG1ldGhvZClcblx0ICpcblx0ICogQWRkcyBhIG1ldGhvZCB0byB0aGUgcHJvdG90eXBlIG9mIGFuIG9iamVjdC5cblx0ICpcblx0ICogICAgIHV0aWxzLmFkZE1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdmb28nLCBmdW5jdGlvbiAoc3RyKSB7XG5cdCAqICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICogICAgICAgbmV3IGNoYWkuQXNzZXJ0aW9uKG9iaikudG8uYmUuZXF1YWwoc3RyKTtcblx0ICogICAgIH0pO1xuXHQgKlxuXHQgKiBDYW4gYWxzbyBiZSBhY2Nlc3NlZCBkaXJlY3RseSBmcm9tIGBjaGFpLkFzc2VydGlvbmAuXG5cdCAqXG5cdCAqICAgICBjaGFpLkFzc2VydGlvbi5hZGRNZXRob2QoJ2ZvbycsIGZuKTtcblx0ICpcblx0ICogVGhlbiBjYW4gYmUgdXNlZCBhcyBhbnkgb3RoZXIgYXNzZXJ0aW9uLlxuXHQgKlxuXHQgKiAgICAgZXhwZWN0KGZvb1N0cikudG8uYmUuZm9vKCdiYXInKTtcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3QgdG8gd2hpY2ggdGhlIG1ldGhvZCBpcyBhZGRlZFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBtZXRob2QgdG8gYWRkXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG1ldGhvZCBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBuYW1lXG5cdCAqIEBuYW1lc3BhY2UgVXRpbHNcblx0ICogQG5hbWUgYWRkTWV0aG9kXG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHR2YXIgZmxhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3R4LCBuYW1lLCBtZXRob2QpIHtcblx0ICBjdHhbbmFtZV0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgb2xkX3NzZmkgPSBmbGFnKHRoaXMsICdzc2ZpJyk7XG5cdCAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG5cdCAgICAgIGZsYWcodGhpcywgJ3NzZmknLCBjdHhbbmFtZV0pO1xuXHQgICAgdmFyIHJlc3VsdCA9IG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA5MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBvdmVyd3JpdGVQcm9wZXJ0eSB1dGlsaXR5XG5cdCAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdC8qKlxuXHQgKiAjIyMgb3ZlcndyaXRlUHJvcGVydHkgKGN0eCwgbmFtZSwgZm4pXG5cdCAqXG5cdCAqIE92ZXJ3aXRlcyBhbiBhbHJlYWR5IGV4aXN0aW5nIHByb3BlcnR5IGdldHRlciBhbmQgcHJvdmlkZXNcblx0ICogYWNjZXNzIHRvIHByZXZpb3VzIHZhbHVlLiBNdXN0IHJldHVybiBmdW5jdGlvbiB0byB1c2UgYXMgZ2V0dGVyLlxuXHQgKlxuXHQgKiAgICAgdXRpbHMub3ZlcndyaXRlUHJvcGVydHkoY2hhaS5Bc3NlcnRpb24ucHJvdG90eXBlLCAnb2snLCBmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAqICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAqICAgICAgICAgdmFyIG9iaiA9IHV0aWxzLmZsYWcodGhpcywgJ29iamVjdCcpO1xuXHQgKiAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBGb28pIHtcblx0ICogICAgICAgICAgIG5ldyBjaGFpLkFzc2VydGlvbihvYmoubmFtZSkudG8uZXF1YWwoJ2JhcicpO1xuXHQgKiAgICAgICAgIH0gZWxzZSB7XG5cdCAqICAgICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICogICAgICAgICB9XG5cdCAqICAgICAgIH1cblx0ICogICAgIH0pO1xuXHQgKlxuXHQgKlxuXHQgKiBDYW4gYWxzbyBiZSBhY2Nlc3NlZCBkaXJlY3RseSBmcm9tIGBjaGFpLkFzc2VydGlvbmAuXG5cdCAqXG5cdCAqICAgICBjaGFpLkFzc2VydGlvbi5vdmVyd3JpdGVQcm9wZXJ0eSgnZm9vJywgZm4pO1xuXHQgKlxuXHQgKiBUaGVuIGNhbiBiZSB1c2VkIGFzIGFueSBvdGhlciBhc3NlcnRpb24uXG5cdCAqXG5cdCAqICAgICBleHBlY3QobXlGb28pLnRvLmJlLm9rO1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4IG9iamVjdCB3aG9zZSBwcm9wZXJ0eSBpcyB0byBiZSBvdmVyd3JpdHRlblxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBwcm9wZXJ0eSB0byBvdmVyd3JpdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZ2V0dGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGdldHRlciBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBuYW1lXG5cdCAqIEBuYW1lc3BhY2UgVXRpbHNcblx0ICogQG5hbWUgb3ZlcndyaXRlUHJvcGVydHlcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIGdldHRlcikge1xuXHQgIHZhciBfZ2V0ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjdHgsIG5hbWUpXG5cdCAgICAsIF9zdXBlciA9IGZ1bmN0aW9uICgpIHt9O1xuXHRcblx0ICBpZiAoX2dldCAmJiAnZnVuY3Rpb24nID09PSB0eXBlb2YgX2dldC5nZXQpXG5cdCAgICBfc3VwZXIgPSBfZ2V0LmdldFxuXHRcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBuYW1lLFxuXHQgICAgeyBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0dGVyKF9zdXBlcikuY2FsbCh0aGlzKTtcblx0ICAgICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyB0aGlzIDogcmVzdWx0O1xuXHQgICAgICB9XG5cdCAgICAsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgIH0pO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBvdmVyd3JpdGVNZXRob2QgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKipcblx0ICogIyMjIG92ZXJ3cml0ZU1ldGhvZCAoY3R4LCBuYW1lLCBmbilcblx0ICpcblx0ICogT3ZlcndpdGVzIGFuIGFscmVhZHkgZXhpc3RpbmcgbWV0aG9kIGFuZCBwcm92aWRlc1xuXHQgKiBhY2Nlc3MgdG8gcHJldmlvdXMgZnVuY3Rpb24uIE11c3QgcmV0dXJuIGZ1bmN0aW9uXG5cdCAqIHRvIGJlIHVzZWQgZm9yIG5hbWUuXG5cdCAqXG5cdCAqICAgICB1dGlscy5vdmVyd3JpdGVNZXRob2QoY2hhaS5Bc3NlcnRpb24ucHJvdG90eXBlLCAnZXF1YWwnLCBmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAqICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RyKSB7XG5cdCAqICAgICAgICAgdmFyIG9iaiA9IHV0aWxzLmZsYWcodGhpcywgJ29iamVjdCcpO1xuXHQgKiAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBGb28pIHtcblx0ICogICAgICAgICAgIG5ldyBjaGFpLkFzc2VydGlvbihvYmoudmFsdWUpLnRvLmVxdWFsKHN0cik7XG5cdCAqICAgICAgICAgfSBlbHNlIHtcblx0ICogICAgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgKiAgICAgICAgIH1cblx0ICogICAgICAgfVxuXHQgKiAgICAgfSk7XG5cdCAqXG5cdCAqIENhbiBhbHNvIGJlIGFjY2Vzc2VkIGRpcmVjdGx5IGZyb20gYGNoYWkuQXNzZXJ0aW9uYC5cblx0ICpcblx0ICogICAgIGNoYWkuQXNzZXJ0aW9uLm92ZXJ3cml0ZU1ldGhvZCgnZm9vJywgZm4pO1xuXHQgKlxuXHQgKiBUaGVuIGNhbiBiZSB1c2VkIGFzIGFueSBvdGhlciBhc3NlcnRpb24uXG5cdCAqXG5cdCAqICAgICBleHBlY3QobXlGb28pLnRvLmVxdWFsKCdiYXInKTtcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3Qgd2hvc2UgbWV0aG9kIGlzIHRvIGJlIG92ZXJ3cml0dGVuXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG9mIG1ldGhvZCB0byBvdmVyd3JpdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRvIGJlIHVzZWQgZm9yIG5hbWVcblx0ICogQG5hbWVzcGFjZSBVdGlsc1xuXHQgKiBAbmFtZSBvdmVyd3JpdGVNZXRob2Rcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIG1ldGhvZCkge1xuXHQgIHZhciBfbWV0aG9kID0gY3R4W25hbWVdXG5cdCAgICAsIF9zdXBlciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG5cdFxuXHQgIGlmIChfbWV0aG9kICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBfbWV0aG9kKVxuXHQgICAgX3N1cGVyID0gX21ldGhvZDtcblx0XG5cdCAgY3R4W25hbWVdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHJlc3VsdCA9IG1ldGhvZChfc3VwZXIpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyB0aGlzIDogcmVzdWx0O1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogOTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBDaGFpIC0gYWRkQ2hhaW5pbmdNZXRob2QgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKiFcblx0ICogTW9kdWxlIGRlcGVuZGVuY2llc1xuXHQgKi9cblx0XG5cdHZhciB0cmFuc2ZlckZsYWdzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG5cdHZhciBmbGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cdHZhciBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTtcblx0XG5cdC8qIVxuXHQgKiBNb2R1bGUgdmFyaWFibGVzXG5cdCAqL1xuXHRcblx0Ly8gQ2hlY2sgd2hldGhlciBgX19wcm90b19fYCBpcyBzdXBwb3J0ZWRcblx0dmFyIGhhc1Byb3RvU3VwcG9ydCA9ICdfX3Byb3RvX18nIGluIE9iamVjdDtcblx0XG5cdC8vIFdpdGhvdXQgYF9fcHJvdG9fX2Agc3VwcG9ydCwgdGhpcyBtb2R1bGUgd2lsbCBuZWVkIHRvIGFkZCBwcm9wZXJ0aWVzIHRvIGEgZnVuY3Rpb24uXG5cdC8vIEhvd2V2ZXIsIHNvbWUgRnVuY3Rpb24ucHJvdG90eXBlIG1ldGhvZHMgY2Fubm90IGJlIG92ZXJ3cml0dGVuLFxuXHQvLyBhbmQgdGhlcmUgc2VlbXMgbm8gZWFzeSBjcm9zcy1wbGF0Zm9ybSB3YXkgdG8gZGV0ZWN0IHRoZW0gKEBzZWUgY2hhaWpzL2NoYWkvaXNzdWVzLzY5KS5cblx0dmFyIGV4Y2x1ZGVOYW1lcyA9IC9eKD86bGVuZ3RofG5hbWV8YXJndW1lbnRzfGNhbGxlcikkLztcblx0XG5cdC8vIENhY2hlIGBGdW5jdGlvbmAgcHJvcGVydGllc1xuXHR2YXIgY2FsbCAgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbCxcblx0ICAgIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXHRcblx0LyoqXG5cdCAqICMjIyBhZGRDaGFpbmFibGVNZXRob2QgKGN0eCwgbmFtZSwgbWV0aG9kLCBjaGFpbmluZ0JlaGF2aW9yKVxuXHQgKlxuXHQgKiBBZGRzIGEgbWV0aG9kIHRvIGFuIG9iamVjdCwgc3VjaCB0aGF0IHRoZSBtZXRob2QgY2FuIGFsc28gYmUgY2hhaW5lZC5cblx0ICpcblx0ICogICAgIHV0aWxzLmFkZENoYWluYWJsZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdmb28nLCBmdW5jdGlvbiAoc3RyKSB7XG5cdCAqICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICogICAgICAgbmV3IGNoYWkuQXNzZXJ0aW9uKG9iaikudG8uYmUuZXF1YWwoc3RyKTtcblx0ICogICAgIH0pO1xuXHQgKlxuXHQgKiBDYW4gYWxzbyBiZSBhY2Nlc3NlZCBkaXJlY3RseSBmcm9tIGBjaGFpLkFzc2VydGlvbmAuXG5cdCAqXG5cdCAqICAgICBjaGFpLkFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2ZvbycsIGZuLCBjaGFpbmluZ0JlaGF2aW9yKTtcblx0ICpcblx0ICogVGhlIHJlc3VsdCBjYW4gdGhlbiBiZSB1c2VkIGFzIGJvdGggYSBtZXRob2QgYXNzZXJ0aW9uLCBleGVjdXRpbmcgYm90aCBgbWV0aG9kYCBhbmRcblx0ICogYGNoYWluaW5nQmVoYXZpb3JgLCBvciBhcyBhIGxhbmd1YWdlIGNoYWluLCB3aGljaCBvbmx5IGV4ZWN1dGVzIGBjaGFpbmluZ0JlaGF2aW9yYC5cblx0ICpcblx0ICogICAgIGV4cGVjdChmb29TdHIpLnRvLmJlLmZvbygnYmFyJyk7XG5cdCAqICAgICBleHBlY3QoZm9vU3RyKS50by5iZS5mb28uZXF1YWwoJ2ZvbycpO1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4IG9iamVjdCB0byB3aGljaCB0aGUgbWV0aG9kIGlzIGFkZGVkXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG9mIG1ldGhvZCB0byBhZGRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIGZ1bmN0aW9uIHRvIGJlIHVzZWQgZm9yIGBuYW1lYCwgd2hlbiBjYWxsZWRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2hhaW5pbmdCZWhhdmlvciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgZXZlcnkgdGltZSB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWRcblx0ICogQG5hbWVzcGFjZSBVdGlsc1xuXHQgKiBAbmFtZSBhZGRDaGFpbmFibGVNZXRob2Rcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIG1ldGhvZCwgY2hhaW5pbmdCZWhhdmlvcikge1xuXHQgIGlmICh0eXBlb2YgY2hhaW5pbmdCZWhhdmlvciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgY2hhaW5pbmdCZWhhdmlvciA9IGZ1bmN0aW9uICgpIHsgfTtcblx0ICB9XG5cdFxuXHQgIHZhciBjaGFpbmFibGVCZWhhdmlvciA9IHtcblx0ICAgICAgbWV0aG9kOiBtZXRob2Rcblx0ICAgICwgY2hhaW5pbmdCZWhhdmlvcjogY2hhaW5pbmdCZWhhdmlvclxuXHQgIH07XG5cdFxuXHQgIC8vIHNhdmUgdGhlIG1ldGhvZHMgc28gd2UgY2FuIG92ZXJ3cml0ZSB0aGVtIGxhdGVyLCBpZiB3ZSBuZWVkIHRvLlxuXHQgIGlmICghY3R4Ll9fbWV0aG9kcykge1xuXHQgICAgY3R4Ll9fbWV0aG9kcyA9IHt9O1xuXHQgIH1cblx0ICBjdHguX19tZXRob2RzW25hbWVdID0gY2hhaW5hYmxlQmVoYXZpb3I7XG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIG5hbWUsXG5cdCAgICB7IGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNoYWluYWJsZUJlaGF2aW9yLmNoYWluaW5nQmVoYXZpb3IuY2FsbCh0aGlzKTtcblx0XG5cdCAgICAgICAgdmFyIGFzc2VydCA9IGZ1bmN0aW9uIGFzc2VydCgpIHtcblx0ICAgICAgICAgIHZhciBvbGRfc3NmaSA9IGZsYWcodGhpcywgJ3NzZmknKTtcblx0ICAgICAgICAgIGlmIChvbGRfc3NmaSAmJiBjb25maWcuaW5jbHVkZVN0YWNrID09PSBmYWxzZSlcblx0ICAgICAgICAgICAgZmxhZyh0aGlzLCAnc3NmaScsIGFzc2VydCk7XG5cdCAgICAgICAgICB2YXIgcmVzdWx0ID0gY2hhaW5hYmxlQmVoYXZpb3IubWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyB0aGlzIDogcmVzdWx0O1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIC8vIFVzZSBgX19wcm90b19fYCBpZiBhdmFpbGFibGVcblx0ICAgICAgICBpZiAoaGFzUHJvdG9TdXBwb3J0KSB7XG5cdCAgICAgICAgICAvLyBJbmhlcml0IGFsbCBwcm9wZXJ0aWVzIGZyb20gdGhlIG9iamVjdCBieSByZXBsYWNpbmcgdGhlIGBGdW5jdGlvbmAgcHJvdG90eXBlXG5cdCAgICAgICAgICB2YXIgcHJvdG90eXBlID0gYXNzZXJ0Ll9fcHJvdG9fXyA9IE9iamVjdC5jcmVhdGUodGhpcyk7XG5cdCAgICAgICAgICAvLyBSZXN0b3JlIHRoZSBgY2FsbGAgYW5kIGBhcHBseWAgbWV0aG9kcyBmcm9tIGBGdW5jdGlvbmBcblx0ICAgICAgICAgIHByb3RvdHlwZS5jYWxsID0gY2FsbDtcblx0ICAgICAgICAgIHByb3RvdHlwZS5hcHBseSA9IGFwcGx5O1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBPdGhlcndpc2UsIHJlZGVmaW5lIGFsbCBwcm9wZXJ0aWVzIChzbG93ISlcblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgIHZhciBhc3NlcnRlck5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3R4KTtcblx0ICAgICAgICAgIGFzc2VydGVyTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoYXNzZXJ0ZXJOYW1lKSB7XG5cdCAgICAgICAgICAgIGlmICghZXhjbHVkZU5hbWVzLnRlc3QoYXNzZXJ0ZXJOYW1lKSkge1xuXHQgICAgICAgICAgICAgIHZhciBwZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY3R4LCBhc3NlcnRlck5hbWUpO1xuXHQgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhc3NlcnQsIGFzc2VydGVyTmFtZSwgcGQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRyYW5zZmVyRmxhZ3ModGhpcywgYXNzZXJ0KTtcblx0ICAgICAgICByZXR1cm4gYXNzZXJ0O1xuXHQgICAgICB9XG5cdCAgICAsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgIH0pO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA5NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENoYWkgLSBvdmVyd3JpdGVDaGFpbmFibGVNZXRob2QgdXRpbGl0eVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHQvKipcblx0ICogIyMjIG92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZCAoY3R4LCBuYW1lLCBtZXRob2QsIGNoYWluaW5nQmVoYXZpb3IpXG5cdCAqXG5cdCAqIE92ZXJ3aXRlcyBhbiBhbHJlYWR5IGV4aXN0aW5nIGNoYWluYWJsZSBtZXRob2Rcblx0ICogYW5kIHByb3ZpZGVzIGFjY2VzcyB0byB0aGUgcHJldmlvdXMgZnVuY3Rpb24gb3Jcblx0ICogcHJvcGVydHkuICBNdXN0IHJldHVybiBmdW5jdGlvbnMgdG8gYmUgdXNlZCBmb3Jcblx0ICogbmFtZS5cblx0ICpcblx0ICogICAgIHV0aWxzLm92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdsZW5ndGgnLFxuXHQgKiAgICAgICBmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAqICAgICAgIH1cblx0ICogICAgICwgZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgKiAgICAgICB9XG5cdCAqICAgICApO1xuXHQgKlxuXHQgKiBDYW4gYWxzbyBiZSBhY2Nlc3NlZCBkaXJlY3RseSBmcm9tIGBjaGFpLkFzc2VydGlvbmAuXG5cdCAqXG5cdCAqICAgICBjaGFpLkFzc2VydGlvbi5vdmVyd3JpdGVDaGFpbmFibGVNZXRob2QoJ2ZvbycsIGZuLCBmbik7XG5cdCAqXG5cdCAqIFRoZW4gY2FuIGJlIHVzZWQgYXMgYW55IG90aGVyIGFzc2VydGlvbi5cblx0ICpcblx0ICogICAgIGV4cGVjdChteUZvbykudG8uaGF2ZS5sZW5ndGgoMyk7XG5cdCAqICAgICBleHBlY3QobXlGb28pLnRvLmhhdmUubGVuZ3RoLmFib3ZlKDMpO1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4IG9iamVjdCB3aG9zZSBtZXRob2QgLyBwcm9wZXJ0eSBpcyB0byBiZSBvdmVyd3JpdHRlblxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBtZXRob2QgLyBwcm9wZXJ0eSB0byBvdmVyd3JpdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRvIGJlIHVzZWQgZm9yIG5hbWVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2hhaW5pbmdCZWhhdmlvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBwcm9wZXJ0eVxuXHQgKiBAbmFtZXNwYWNlIFV0aWxzXG5cdCAqIEBuYW1lIG92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZFxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGN0eCwgbmFtZSwgbWV0aG9kLCBjaGFpbmluZ0JlaGF2aW9yKSB7XG5cdCAgdmFyIGNoYWluYWJsZUJlaGF2aW9yID0gY3R4Ll9fbWV0aG9kc1tuYW1lXTtcblx0XG5cdCAgdmFyIF9jaGFpbmluZ0JlaGF2aW9yID0gY2hhaW5hYmxlQmVoYXZpb3IuY2hhaW5pbmdCZWhhdmlvcjtcblx0ICBjaGFpbmFibGVCZWhhdmlvci5jaGFpbmluZ0JlaGF2aW9yID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHJlc3VsdCA9IGNoYWluaW5nQmVoYXZpb3IoX2NoYWluaW5nQmVoYXZpb3IpLmNhbGwodGhpcyk7XG5cdCAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyB0aGlzIDogcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIHZhciBfbWV0aG9kID0gY2hhaW5hYmxlQmVoYXZpb3IubWV0aG9kO1xuXHQgIGNoYWluYWJsZUJlaGF2aW9yLm1ldGhvZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciByZXN1bHQgPSBtZXRob2QoX21ldGhvZCkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByZXN1bHQ7XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogOTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiBjaGFpXG5cdCAqIGh0dHA6Ly9jaGFpanMuY29tXG5cdCAqIENvcHlyaWdodChjKSAyMDExLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdHZhciBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKF9jaGFpLCB1dGlsKSB7XG5cdCAgLyohXG5cdCAgICogTW9kdWxlIGRlcGVuZGVuY2llcy5cblx0ICAgKi9cblx0XG5cdCAgdmFyIEFzc2VydGlvbkVycm9yID0gX2NoYWkuQXNzZXJ0aW9uRXJyb3Jcblx0ICAgICwgZmxhZyA9IHV0aWwuZmxhZztcblx0XG5cdCAgLyohXG5cdCAgICogTW9kdWxlIGV4cG9ydC5cblx0ICAgKi9cblx0XG5cdCAgX2NoYWkuQXNzZXJ0aW9uID0gQXNzZXJ0aW9uO1xuXHRcblx0ICAvKiFcblx0ICAgKiBBc3NlcnRpb24gQ29uc3RydWN0b3Jcblx0ICAgKlxuXHQgICAqIENyZWF0ZXMgb2JqZWN0IGZvciBjaGFpbmluZy5cblx0ICAgKlxuXHQgICAqIEBhcGkgcHJpdmF0ZVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBBc3NlcnRpb24gKG9iaiwgbXNnLCBzdGFjaykge1xuXHQgICAgZmxhZyh0aGlzLCAnc3NmaScsIHN0YWNrIHx8IGFyZ3VtZW50cy5jYWxsZWUpO1xuXHQgICAgZmxhZyh0aGlzLCAnb2JqZWN0Jywgb2JqKTtcblx0ICAgIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgIH1cblx0XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFzc2VydGlvbiwgJ2luY2x1ZGVTdGFjaycsIHtcblx0ICAgIGdldDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIGNvbnNvbGUud2FybignQXNzZXJ0aW9uLmluY2x1ZGVTdGFjayBpcyBkZXByZWNhdGVkLCB1c2UgY2hhaS5jb25maWcuaW5jbHVkZVN0YWNrIGluc3RlYWQuJyk7XG5cdCAgICAgIHJldHVybiBjb25maWcuaW5jbHVkZVN0YWNrO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uaW5jbHVkZVN0YWNrIGlzIGRlcHJlY2F0ZWQsIHVzZSBjaGFpLmNvbmZpZy5pbmNsdWRlU3RhY2sgaW5zdGVhZC4nKTtcblx0ICAgICAgY29uZmlnLmluY2x1ZGVTdGFjayA9IHZhbHVlO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXNzZXJ0aW9uLCAnc2hvd0RpZmYnLCB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICBjb25zb2xlLndhcm4oJ0Fzc2VydGlvbi5zaG93RGlmZiBpcyBkZXByZWNhdGVkLCB1c2UgY2hhaS5jb25maWcuc2hvd0RpZmYgaW5zdGVhZC4nKTtcblx0ICAgICAgcmV0dXJuIGNvbmZpZy5zaG93RGlmZjtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgIGNvbnNvbGUud2FybignQXNzZXJ0aW9uLnNob3dEaWZmIGlzIGRlcHJlY2F0ZWQsIHVzZSBjaGFpLmNvbmZpZy5zaG93RGlmZiBpbnN0ZWFkLicpO1xuXHQgICAgICBjb25maWcuc2hvd0RpZmYgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUsIGZuKSB7XG5cdCAgICB1dGlsLmFkZFByb3BlcnR5KHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbik7XG5cdCAgfTtcblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCA9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xuXHQgICAgdXRpbC5hZGRNZXRob2QodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuKTtcblx0ICB9O1xuXHRcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kID0gZnVuY3Rpb24gKG5hbWUsIGZuLCBjaGFpbmluZ0JlaGF2aW9yKSB7XG5cdCAgICB1dGlsLmFkZENoYWluYWJsZU1ldGhvZCh0aGlzLnByb3RvdHlwZSwgbmFtZSwgZm4sIGNoYWluaW5nQmVoYXZpb3IpO1xuXHQgIH07XG5cdFxuXHQgIEFzc2VydGlvbi5vdmVyd3JpdGVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xuXHQgICAgdXRpbC5vdmVyd3JpdGVQcm9wZXJ0eSh0aGlzLnByb3RvdHlwZSwgbmFtZSwgZm4pO1xuXHQgIH07XG5cdFxuXHQgIEFzc2VydGlvbi5vdmVyd3JpdGVNZXRob2QgPSBmdW5jdGlvbiAobmFtZSwgZm4pIHtcblx0ICAgIHV0aWwub3ZlcndyaXRlTWV0aG9kKHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbik7XG5cdCAgfTtcblx0XG5cdCAgQXNzZXJ0aW9uLm92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZCA9IGZ1bmN0aW9uIChuYW1lLCBmbiwgY2hhaW5pbmdCZWhhdmlvcikge1xuXHQgICAgdXRpbC5vdmVyd3JpdGVDaGFpbmFibGVNZXRob2QodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuLCBjaGFpbmluZ0JlaGF2aW9yKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmFzc2VydChleHByZXNzaW9uLCBtZXNzYWdlLCBuZWdhdGVNZXNzYWdlLCBleHBlY3RlZCwgYWN0dWFsLCBzaG93RGlmZilcblx0ICAgKlxuXHQgICAqIEV4ZWN1dGVzIGFuIGV4cHJlc3Npb24gYW5kIGNoZWNrIGV4cGVjdGF0aW9ucy4gVGhyb3dzIEFzc2VydGlvbkVycm9yIGZvciByZXBvcnRpbmcgaWYgdGVzdCBkb2Vzbid0IHBhc3MuXG5cdCAgICpcblx0ICAgKiBAbmFtZSBhc3NlcnRcblx0ICAgKiBAcGFyYW0ge1BoaWxvc29waGljYWx9IGV4cHJlc3Npb24gdG8gYmUgdGVzdGVkXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IG1lc3NhZ2Ugb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIG1lc3NhZ2UgdG8gZGlzcGxheSBpZiBleHByZXNzaW9uIGZhaWxzXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IG5lZ2F0ZWRNZXNzYWdlIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBuZWdhdGVkTWVzc2FnZSB0byBkaXNwbGF5IGlmIG5lZ2F0ZWQgZXhwcmVzc2lvbiBmYWlsc1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkIHZhbHVlIChyZW1lbWJlciB0byBjaGVjayBmb3IgbmVnYXRpb24pXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsIChvcHRpb25hbCkgd2lsbCBkZWZhdWx0IHRvIGB0aGlzLm9iamBcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3dEaWZmIChvcHRpb25hbCkgd2hlbiBzZXQgdG8gYHRydWVgLCBhc3NlcnQgd2lsbCBkaXNwbGF5IGEgZGlmZiBpbiBhZGRpdGlvbiB0byB0aGUgbWVzc2FnZSBpZiBleHByZXNzaW9uIGZhaWxzXG5cdCAgICogQGFwaSBwcml2YXRlXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5wcm90b3R5cGUuYXNzZXJ0ID0gZnVuY3Rpb24gKGV4cHIsIG1zZywgbmVnYXRlTXNnLCBleHBlY3RlZCwgX2FjdHVhbCwgc2hvd0RpZmYpIHtcblx0ICAgIHZhciBvayA9IHV0aWwudGVzdCh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgaWYgKHRydWUgIT09IHNob3dEaWZmKSBzaG93RGlmZiA9IGZhbHNlO1xuXHQgICAgaWYgKHRydWUgIT09IGNvbmZpZy5zaG93RGlmZikgc2hvd0RpZmYgPSBmYWxzZTtcblx0XG5cdCAgICBpZiAoIW9rKSB7XG5cdCAgICAgIHZhciBtc2cgPSB1dGlsLmdldE1lc3NhZ2UodGhpcywgYXJndW1lbnRzKVxuXHQgICAgICAgICwgYWN0dWFsID0gdXRpbC5nZXRBY3R1YWwodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKG1zZywge1xuXHQgICAgICAgICAgYWN0dWFsOiBhY3R1YWxcblx0ICAgICAgICAsIGV4cGVjdGVkOiBleHBlY3RlZFxuXHQgICAgICAgICwgc2hvd0RpZmY6IHNob3dEaWZmXG5cdCAgICAgIH0sIChjb25maWcuaW5jbHVkZVN0YWNrKSA/IHRoaXMuYXNzZXJ0IDogZmxhZyh0aGlzLCAnc3NmaScpKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKiFcblx0ICAgKiAjIyMgLl9vYmpcblx0ICAgKlxuXHQgICAqIFF1aWNrIHJlZmVyZW5jZSB0byBzdG9yZWQgYGFjdHVhbGAgdmFsdWUgZm9yIHBsdWdpbiBkZXZlbG9wZXJzLlxuXHQgICAqXG5cdCAgICogQGFwaSBwcml2YXRlXG5cdCAgICovXG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBc3NlcnRpb24ucHJvdG90eXBlLCAnX29iaicsXG5cdCAgICB7IGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgICAgfVxuXHQgICAgLCBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnLCB2YWwpO1xuXHQgICAgICB9XG5cdCAgfSk7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDk4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogY2hhaVxuXHQgKiBodHRwOi8vY2hhaWpzLmNvbVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjaGFpLCBfKSB7XG5cdCAgdmFyIEFzc2VydGlvbiA9IGNoYWkuQXNzZXJ0aW9uXG5cdCAgICAsIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xuXHQgICAgLCBmbGFnID0gXy5mbGFnO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgTGFuZ3VhZ2UgQ2hhaW5zXG5cdCAgICpcblx0ICAgKiBUaGUgZm9sbG93aW5nIGFyZSBwcm92aWRlZCBhcyBjaGFpbmFibGUgZ2V0dGVycyB0b1xuXHQgICAqIGltcHJvdmUgdGhlIHJlYWRhYmlsaXR5IG9mIHlvdXIgYXNzZXJ0aW9ucy4gVGhleVxuXHQgICAqIGRvIG5vdCBwcm92aWRlIHRlc3RpbmcgY2FwYWJpbGl0aWVzIHVubGVzcyB0aGV5XG5cdCAgICogaGF2ZSBiZWVuIG92ZXJ3cml0dGVuIGJ5IGEgcGx1Z2luLlxuXHQgICAqXG5cdCAgICogKipDaGFpbnMqKlxuXHQgICAqXG5cdCAgICogLSB0b1xuXHQgICAqIC0gYmVcblx0ICAgKiAtIGJlZW5cblx0ICAgKiAtIGlzXG5cdCAgICogLSB0aGF0XG5cdCAgICogLSB3aGljaFxuXHQgICAqIC0gYW5kXG5cdCAgICogLSBoYXNcblx0ICAgKiAtIGhhdmVcblx0ICAgKiAtIHdpdGhcblx0ICAgKiAtIGF0XG5cdCAgICogLSBvZlxuXHQgICAqIC0gc2FtZVxuXHQgICAqXG5cdCAgICogQG5hbWUgbGFuZ3VhZ2UgY2hhaW5zXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBbICd0bycsICdiZScsICdiZWVuJ1xuXHQgICwgJ2lzJywgJ2FuZCcsICdoYXMnLCAnaGF2ZSdcblx0ICAsICd3aXRoJywgJ3RoYXQnLCAnd2hpY2gnLCAnYXQnXG5cdCAgLCAnb2YnLCAnc2FtZScgXS5mb3JFYWNoKGZ1bmN0aW9uIChjaGFpbikge1xuXHQgICAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KGNoYWluLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90XG5cdCAgICpcblx0ICAgKiBOZWdhdGVzIGFueSBvZiBhc3NlcnRpb25zIGZvbGxvd2luZyBpbiB0aGUgY2hhaW4uXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KGZvbykudG8ubm90LmVxdWFsKCdiYXInKTtcblx0ICAgKiAgICAgZXhwZWN0KGdvb2RGbikudG8ubm90LnRocm93KEVycm9yKTtcblx0ICAgKiAgICAgZXhwZWN0KHsgZm9vOiAnYmF6JyB9KS50by5oYXZlLnByb3BlcnR5KCdmb28nKVxuXHQgICAqICAgICAgIC5hbmQubm90LmVxdWFsKCdiYXInKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG5vdFxuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdub3QnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBmbGFnKHRoaXMsICduZWdhdGUnLCB0cnVlKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5kZWVwXG5cdCAgICpcblx0ICAgKiBTZXRzIHRoZSBgZGVlcGAgZmxhZywgbGF0ZXIgdXNlZCBieSB0aGUgYGVxdWFsYCBhbmRcblx0ICAgKiBgcHJvcGVydHlgIGFzc2VydGlvbnMuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KGZvbykudG8uZGVlcC5lcXVhbCh7IGJhcjogJ2JheicgfSk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogeyBiYXI6IHsgYmF6OiAncXV1eCcgfSB9IH0pXG5cdCAgICogICAgICAgLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSgnZm9vLmJhci5iYXonLCAncXV1eCcpO1xuXHQgICAqXG5cdCAgICogYC5kZWVwLnByb3BlcnR5YCBzcGVjaWFsIGNoYXJhY3RlcnMgY2FuIGJlIGVzY2FwZWRcblx0ICAgKiBieSBhZGRpbmcgdHdvIHNsYXNoZXMgYmVmb3JlIHRoZSBgLmAgb3IgYFtdYC5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgZGVlcENzcyA9IHsgJy5saW5rJzogeyAnW3RhcmdldF0nOiA0MiB9fTtcblx0ICAgKiAgICAgZXhwZWN0KGRlZXBDc3MpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSgnXFxcXC5saW5rLlxcXFxbdGFyZ2V0XFxcXF0nLCA0Mik7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWVwXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2RlZXAnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBmbGFnKHRoaXMsICdkZWVwJywgdHJ1ZSk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuYW55XG5cdCAgICpcblx0ICAgKiBTZXRzIHRoZSBgYW55YCBmbGFnLCAob3Bwb3NpdGUgb2YgdGhlIGBhbGxgIGZsYWcpXG5cdCAgICogbGF0ZXIgdXNlZCBpbiB0aGUgYGtleXNgIGFzc2VydGlvbi5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoZm9vKS50by5oYXZlLmFueS5rZXlzKCdiYXInLCAnYmF6Jyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBhbnlcblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnYW55JywgZnVuY3Rpb24gKCkge1xuXHQgICAgZmxhZyh0aGlzLCAnYW55JywgdHJ1ZSk7XG5cdCAgICBmbGFnKHRoaXMsICdhbGwnLCBmYWxzZSlcblx0ICB9KTtcblx0XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuYWxsXG5cdCAgICpcblx0ICAgKiBTZXRzIHRoZSBgYWxsYCBmbGFnIChvcHBvc2l0ZSBvZiB0aGUgYGFueWAgZmxhZylcblx0ICAgKiBsYXRlciB1c2VkIGJ5IHRoZSBga2V5c2AgYXNzZXJ0aW9uLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChmb28pLnRvLmhhdmUuYWxsLmtleXMoJ2JhcicsICdiYXonKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGFsbFxuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdhbGwnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBmbGFnKHRoaXMsICdhbGwnLCB0cnVlKTtcblx0ICAgIGZsYWcodGhpcywgJ2FueScsIGZhbHNlKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5hKHR5cGUpXG5cdCAgICpcblx0ICAgKiBUaGUgYGFgIGFuZCBgYW5gIGFzc2VydGlvbnMgYXJlIGFsaWFzZXMgdGhhdCBjYW4gYmVcblx0ICAgKiB1c2VkIGVpdGhlciBhcyBsYW5ndWFnZSBjaGFpbnMgb3IgdG8gYXNzZXJ0IGEgdmFsdWUnc1xuXHQgICAqIHR5cGUuXG5cdCAgICpcblx0ICAgKiAgICAgLy8gdHlwZW9mXG5cdCAgICogICAgIGV4cGVjdCgndGVzdCcpLnRvLmJlLmEoJ3N0cmluZycpO1xuXHQgICAqICAgICBleHBlY3QoeyBmb286ICdiYXInIH0pLnRvLmJlLmFuKCdvYmplY3QnKTtcblx0ICAgKiAgICAgZXhwZWN0KG51bGwpLnRvLmJlLmEoJ251bGwnKTtcblx0ICAgKiAgICAgZXhwZWN0KHVuZGVmaW5lZCkudG8uYmUuYW4oJ3VuZGVmaW5lZCcpO1xuXHQgICAqICAgICBleHBlY3QobmV3IEVycm9yKS50by5iZS5hbignZXJyb3InKTtcblx0ICAgKiAgICAgZXhwZWN0KG5ldyBQcm9taXNlKS50by5iZS5hKCdwcm9taXNlJyk7XG5cdCAgICogICAgIGV4cGVjdChuZXcgRmxvYXQzMkFycmF5KCkpLnRvLmJlLmEoJ2Zsb2F0MzJhcnJheScpO1xuXHQgICAqICAgICBleHBlY3QoU3ltYm9sKCkpLnRvLmJlLmEoJ3N5bWJvbCcpO1xuXHQgICAqXG5cdCAgICogICAgIC8vIGVzNiBvdmVycmlkZXNcblx0ICAgKiAgICAgZXhwZWN0KHtbU3ltYm9sLnRvU3RyaW5nVGFnXTooKT0+J2Zvbyd9KS50by5iZS5hKCdmb28nKTtcblx0ICAgKlxuXHQgICAqICAgICAvLyBsYW5ndWFnZSBjaGFpblxuXHQgICAqICAgICBleHBlY3QoZm9vKS50by5iZS5hbi5pbnN0YW5jZW9mKEZvbyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBhXG5cdCAgICogQGFsaWFzIGFuXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhbiAodHlwZSwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jylcblx0ICAgICAgLCBhcnRpY2xlID0gflsgJ2EnLCAnZScsICdpJywgJ28nLCAndScgXS5pbmRleE9mKHR5cGUuY2hhckF0KDApKSA/ICdhbiAnIDogJ2EgJztcblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICB0eXBlID09PSBfLnR5cGUob2JqKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlICcgKyBhcnRpY2xlICsgdHlwZVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSAnICsgYXJ0aWNsZSArIHR5cGVcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdhbicsIGFuKTtcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdhJywgYW4pO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmluY2x1ZGUodmFsdWUpXG5cdCAgICpcblx0ICAgKiBUaGUgYGluY2x1ZGVgIGFuZCBgY29udGFpbmAgYXNzZXJ0aW9ucyBjYW4gYmUgdXNlZCBhcyBlaXRoZXIgcHJvcGVydHlcblx0ICAgKiBiYXNlZCBsYW5ndWFnZSBjaGFpbnMgb3IgYXMgbWV0aG9kcyB0byBhc3NlcnQgdGhlIGluY2x1c2lvbiBvZiBhbiBvYmplY3Rcblx0ICAgKiBpbiBhbiBhcnJheSBvciBhIHN1YnN0cmluZyBpbiBhIHN0cmluZy4gV2hlbiB1c2VkIGFzIGxhbmd1YWdlIGNoYWlucyxcblx0ICAgKiB0aGV5IHRvZ2dsZSB0aGUgYGNvbnRhaW5zYCBmbGFnIGZvciB0aGUgYGtleXNgIGFzc2VydGlvbi5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoWzEsMiwzXSkudG8uaW5jbHVkZSgyKTtcblx0ICAgKiAgICAgZXhwZWN0KCdmb29iYXInKS50by5jb250YWluKCdmb28nKTtcblx0ICAgKiAgICAgZXhwZWN0KHsgZm9vOiAnYmFyJywgaGVsbG86ICd1bml2ZXJzZScgfSkudG8uaW5jbHVkZS5rZXlzKCdmb28nKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGluY2x1ZGVcblx0ICAgKiBAYWxpYXMgY29udGFpblxuXHQgICAqIEBhbGlhcyBpbmNsdWRlc1xuXHQgICAqIEBhbGlhcyBjb250YWluc1xuXHQgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ3xOdW1iZXJ9IG9ialxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yICgpIHtcblx0ICAgIGZsYWcodGhpcywgJ2NvbnRhaW5zJywgdHJ1ZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbmNsdWRlICh2YWwsIG1zZykge1xuXHQgICAgXy5leHBlY3RUeXBlcyh0aGlzLCBbJ2FycmF5JywgJ29iamVjdCcsICdzdHJpbmcnXSk7XG5cdFxuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICB2YXIgZXhwZWN0ZWQgPSBmYWxzZTtcblx0XG5cdCAgICBpZiAoXy50eXBlKG9iaikgPT09ICdhcnJheScgJiYgXy50eXBlKHZhbCkgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG5cdCAgICAgICAgaWYgKF8uZXFsKG9ialtpXSwgdmFsKSkge1xuXHQgICAgICAgICAgZXhwZWN0ZWQgPSB0cnVlO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKF8udHlwZSh2YWwpID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBpZiAoIWZsYWcodGhpcywgJ25lZ2F0ZScpKSB7XG5cdCAgICAgICAgZm9yICh2YXIgayBpbiB2YWwpIG5ldyBBc3NlcnRpb24ob2JqKS5wcm9wZXJ0eShrLCB2YWxba10pO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgc3Vic2V0ID0ge307XG5cdCAgICAgIGZvciAodmFyIGsgaW4gdmFsKSBzdWJzZXRba10gPSBvYmpba107XG5cdCAgICAgIGV4cGVjdGVkID0gXy5lcWwoc3Vic2V0LCB2YWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZXhwZWN0ZWQgPSAob2JqICE9IHVuZGVmaW5lZCkgJiYgfm9iai5pbmRleE9mKHZhbCk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICBleHBlY3RlZFxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGluY2x1ZGUgJyArIF8uaW5zcGVjdCh2YWwpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGluY2x1ZGUgJyArIF8uaW5zcGVjdCh2YWwpKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2luY2x1ZGUnLCBpbmNsdWRlLCBpbmNsdWRlQ2hhaW5pbmdCZWhhdmlvcik7XG5cdCAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnY29udGFpbicsIGluY2x1ZGUsIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yKTtcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdjb250YWlucycsIGluY2x1ZGUsIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yKTtcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdpbmNsdWRlcycsIGluY2x1ZGUsIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5va1xuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgdHJ1dGh5LlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgnZXZlcnl0aGluZycpLnRvLmJlLm9rO1xuXHQgICAqICAgICBleHBlY3QoMSkudG8uYmUub2s7XG5cdCAgICogICAgIGV4cGVjdChmYWxzZSkudG8ubm90LmJlLm9rO1xuXHQgICAqICAgICBleHBlY3QodW5kZWZpbmVkKS50by5ub3QuYmUub2s7XG5cdCAgICogICAgIGV4cGVjdChudWxsKS50by5ub3QuYmUub2s7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBva1xuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdvaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgdHJ1dGh5J1xuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGZhbHN5Jyk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAudHJ1ZVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgYHRydWVgLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCh0cnVlKS50by5iZS50cnVlO1xuXHQgICAqICAgICBleHBlY3QoMSkudG8ubm90LmJlLnRydWU7XG5cdCAgICpcblx0ICAgKiBAbmFtZSB0cnVlXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ3RydWUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICB0cnVlID09PSBmbGFnKHRoaXMsICdvYmplY3QnKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIHRydWUnXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgZmFsc2UnXG5cdCAgICAgICwgdGhpcy5uZWdhdGUgPyBmYWxzZSA6IHRydWVcblx0ICAgICk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZmFsc2Vcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGBmYWxzZWAuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KGZhbHNlKS50by5iZS5mYWxzZTtcblx0ICAgKiAgICAgZXhwZWN0KDApLnRvLm5vdC5iZS5mYWxzZTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGZhbHNlXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2ZhbHNlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgZmFsc2UgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgZmFsc2UnXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgdHJ1ZSdcblx0ICAgICAgLCB0aGlzLm5lZ2F0ZSA/IHRydWUgOiBmYWxzZVxuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5udWxsXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgbnVsbGAuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KG51bGwpLnRvLmJlLm51bGw7XG5cdCAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLm5vdC5iZS5udWxsO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbnVsbFxuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdudWxsJywgZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgbnVsbCA9PT0gZmxhZyh0aGlzLCAnb2JqZWN0Jylcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBudWxsJ1xuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSBudWxsJ1xuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC51bmRlZmluZWRcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGB1bmRlZmluZWRgLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLmJlLnVuZGVmaW5lZDtcblx0ICAgKiAgICAgZXhwZWN0KG51bGwpLnRvLm5vdC5iZS51bmRlZmluZWQ7XG5cdCAgICpcblx0ICAgKiBAbmFtZSB1bmRlZmluZWRcblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgndW5kZWZpbmVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgdW5kZWZpbmVkID09PSBmbGFnKHRoaXMsICdvYmplY3QnKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIHVuZGVmaW5lZCdcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gYmUgdW5kZWZpbmVkJ1xuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5OYU5cblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgTmFOYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmJlLk5hTjtcblx0ICAgKiAgICAgZXhwZWN0KDQpLm5vdC50by5iZS5OYU47XG5cdCAgICpcblx0ICAgKiBAbmFtZSBOYU5cblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnTmFOJywgZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgaXNOYU4oZmxhZyh0aGlzLCAnb2JqZWN0JykpXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBOYU4nXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gYmUgTmFOJ1xuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5leGlzdFxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgbmVpdGhlciBgbnVsbGAgbm9yIGB1bmRlZmluZWRgLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBmb28gPSAnaGknXG5cdCAgICogICAgICAgLCBiYXIgPSBudWxsXG5cdCAgICogICAgICAgLCBiYXo7XG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KGZvbykudG8uZXhpc3Q7XG5cdCAgICogICAgIGV4cGVjdChiYXIpLnRvLm5vdC5leGlzdDtcblx0ICAgKiAgICAgZXhwZWN0KGJheikudG8ubm90LmV4aXN0O1xuXHQgICAqXG5cdCAgICogQG5hbWUgZXhpc3Rcblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZXhpc3QnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICBudWxsICE9IGZsYWcodGhpcywgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gZXhpc3QnXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGV4aXN0J1xuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZW1wdHlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0J3MgbGVuZ3RoIGlzIGAwYC4gRm9yIGFycmF5cyBhbmQgc3RyaW5ncywgaXQgY2hlY2tzXG5cdCAgICogdGhlIGBsZW5ndGhgIHByb3BlcnR5LiBGb3Igb2JqZWN0cywgaXQgZ2V0cyB0aGUgY291bnQgb2Zcblx0ICAgKiBlbnVtZXJhYmxlIGtleXMuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KFtdKS50by5iZS5lbXB0eTtcblx0ICAgKiAgICAgZXhwZWN0KCcnKS50by5iZS5lbXB0eTtcblx0ICAgKiAgICAgZXhwZWN0KHt9KS50by5iZS5lbXB0eTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGVtcHR5XG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2VtcHR5JywgZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpXG5cdCAgICAgICwgZXhwZWN0ZWQgPSBvYmo7XG5cdFxuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSB8fCAnc3RyaW5nJyA9PT0gdHlwZW9mIG9iamVjdCkge1xuXHQgICAgICBleHBlY3RlZCA9IG9iai5sZW5ndGg7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIGV4cGVjdGVkID0gT2JqZWN0LmtleXMob2JqKS5sZW5ndGg7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgIWV4cGVjdGVkXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgZW1wdHknXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gbm90IHRvIGJlIGVtcHR5J1xuXHQgICAgKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5hcmd1bWVudHNcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGFuIGFyZ3VtZW50cyBvYmplY3QuXG5cdCAgICpcblx0ICAgKiAgICAgZnVuY3Rpb24gdGVzdCAoKSB7XG5cdCAgICogICAgICAgZXhwZWN0KGFyZ3VtZW50cykudG8uYmUuYXJndW1lbnRzO1xuXHQgICAqICAgICB9XG5cdCAgICpcblx0ICAgKiBAbmFtZSBhcmd1bWVudHNcblx0ICAgKiBAYWxpYXMgQXJndW1lbnRzXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjaGVja0FyZ3VtZW50cyAoKSB7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jylcblx0ICAgICAgLCB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAnW29iamVjdCBBcmd1bWVudHNdJyA9PT0gdHlwZVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGFyZ3VtZW50cyBidXQgZ290ICcgKyB0eXBlXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGFyZ3VtZW50cydcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2FyZ3VtZW50cycsIGNoZWNrQXJndW1lbnRzKTtcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ0FyZ3VtZW50cycsIGNoZWNrQXJndW1lbnRzKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5lcXVhbCh2YWx1ZSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIHN0cmljdGx5IGVxdWFsIChgPT09YCkgdG8gYHZhbHVlYC5cblx0ICAgKiBBbHRlcm5hdGVseSwgaWYgdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgYXNzZXJ0cyB0aGF0XG5cdCAgICogdGhlIHRhcmdldCBpcyBkZWVwbHkgZXF1YWwgdG8gYHZhbHVlYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoJ2hlbGxvJykudG8uZXF1YWwoJ2hlbGxvJyk7XG5cdCAgICogICAgIGV4cGVjdCg0MikudG8uZXF1YWwoNDIpO1xuXHQgICAqICAgICBleHBlY3QoMSkudG8ubm90LmVxdWFsKHRydWUpO1xuXHQgICAqICAgICBleHBlY3QoeyBmb286ICdiYXInIH0pLnRvLm5vdC5lcXVhbCh7IGZvbzogJ2JhcicgfSk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8uZGVlcC5lcXVhbCh7IGZvbzogJ2JhcicgfSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBlcXVhbFxuXHQgICAqIEBhbGlhcyBlcXVhbHNcblx0ICAgKiBAYWxpYXMgZXFcblx0ICAgKiBAYWxpYXMgZGVlcC5lcXVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0RXF1YWwgKHZhbCwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIGlmIChmbGFnKHRoaXMsICdkZWVwJykpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZXFsKHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIHZhbCA9PT0gb2JqXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBlcXVhbCAje2V4cH0nXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgZXF1YWwgI3tleHB9J1xuXHQgICAgICAgICwgdmFsXG5cdCAgICAgICAgLCB0aGlzLl9vYmpcblx0ICAgICAgICAsIHRydWVcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2VxdWFsJywgYXNzZXJ0RXF1YWwpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2VxdWFscycsIGFzc2VydEVxdWFsKTtcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdlcScsIGFzc2VydEVxdWFsKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5lcWwodmFsdWUpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBkZWVwbHkgZXF1YWwgdG8gYHZhbHVlYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoeyBmb286ICdiYXInIH0pLnRvLmVxbCh7IGZvbzogJ2JhcicgfSk7XG5cdCAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uZXFsKFsgMSwgMiwgMyBdKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGVxbFxuXHQgICAqIEBhbGlhcyBlcWxzXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRFcWwob2JqLCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgXy5lcWwob2JqLCBmbGFnKHRoaXMsICdvYmplY3QnKSlcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBkZWVwbHkgZXF1YWwgI3tleHB9J1xuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBkZWVwbHkgZXF1YWwgI3tleHB9J1xuXHQgICAgICAsIG9ialxuXHQgICAgICAsIHRoaXMuX29ialxuXHQgICAgICAsIHRydWVcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdlcWwnLCBhc3NlcnRFcWwpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2VxbHMnLCBhc3NlcnRFcWwpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmFib3ZlKHZhbHVlKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZ3JlYXRlciB0aGFuIGB2YWx1ZWAuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KDEwKS50by5iZS5hYm92ZSg1KTtcblx0ICAgKlxuXHQgICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuXHQgICAqIGFzc2VydCBhIG1pbmltdW0gbGVuZ3RoLiBUaGUgYmVuZWZpdCBiZWluZyBhXG5cdCAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuXHQgICAqIHdhcyBzdXBwbGllZCBkaXJlY3RseS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLmFib3ZlKDIpO1xuXHQgICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmhhdmUubGVuZ3RoLmFib3ZlKDIpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgYWJvdmVcblx0ICAgKiBAYWxpYXMgZ3Rcblx0ICAgKiBAYWxpYXMgZ3JlYXRlclRoYW5cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRBYm92ZSAobiwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUucHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBsZW4gPiBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGFib3ZlICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgbGVuZ3RoIGFib3ZlICN7ZXhwfSdcblx0ICAgICAgICAsIG5cblx0ICAgICAgICAsIGxlblxuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBvYmogPiBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhYm92ZSAnICsgblxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYXQgbW9zdCAnICsgblxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnYWJvdmUnLCBhc3NlcnRBYm92ZSk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZ3QnLCBhc3NlcnRBYm92ZSk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZ3JlYXRlclRoYW4nLCBhc3NlcnRBYm92ZSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubGVhc3QodmFsdWUpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYHZhbHVlYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoMTApLnRvLmJlLmF0LmxlYXN0KDEwKTtcblx0ICAgKlxuXHQgICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuXHQgICAqIGFzc2VydCBhIG1pbmltdW0gbGVuZ3RoLiBUaGUgYmVuZWZpdCBiZWluZyBhXG5cdCAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuXHQgICAqIHdhcyBzdXBwbGllZCBkaXJlY3RseS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLm9mLmF0LmxlYXN0KDIpO1xuXHQgICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmhhdmUubGVuZ3RoLm9mLmF0LmxlYXN0KDMpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbGVhc3Rcblx0ICAgKiBAYWxpYXMgZ3RlXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0TGVhc3QgKG4sIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICBpZiAoZmxhZyh0aGlzLCAnZG9MZW5ndGgnKSkge1xuXHQgICAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5oYXZlLnByb3BlcnR5KCdsZW5ndGgnKTtcblx0ICAgICAgdmFyIGxlbiA9IG9iai5sZW5ndGg7XG5cdCAgICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgbGVuID49IG5cblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYSBsZW5ndGggYXQgbGVhc3QgI3tleHB9IGJ1dCBnb3QgI3thY3R9J1xuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCBiZWxvdyAje2V4cH0nXG5cdCAgICAgICAgLCBuXG5cdCAgICAgICAgLCBsZW5cblx0ICAgICAgKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgb2JqID49IG5cblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGF0IGxlYXN0ICcgKyBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBiZWxvdyAnICsgblxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbGVhc3QnLCBhc3NlcnRMZWFzdCk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZ3RlJywgYXNzZXJ0TGVhc3QpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmJlbG93KHZhbHVlKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgbGVzcyB0aGFuIGB2YWx1ZWAuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KDUpLnRvLmJlLmJlbG93KDEwKTtcblx0ICAgKlxuXHQgICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuXHQgICAqIGFzc2VydCBhIG1heGltdW0gbGVuZ3RoLiBUaGUgYmVuZWZpdCBiZWluZyBhXG5cdCAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuXHQgICAqIHdhcyBzdXBwbGllZCBkaXJlY3RseS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLmJlbG93KDQpO1xuXHQgICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmhhdmUubGVuZ3RoLmJlbG93KDQpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgYmVsb3dcblx0ICAgKiBAYWxpYXMgbHRcblx0ICAgKiBAYWxpYXMgbGVzc1RoYW5cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRCZWxvdyAobiwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUucHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBsZW4gPCBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGJlbG93ICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgbGVuZ3RoIGJlbG93ICN7ZXhwfSdcblx0ICAgICAgICAsIG5cblx0ICAgICAgICAsIGxlblxuXHQgICAgICApO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBvYmogPCBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBiZWxvdyAnICsgblxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYXQgbGVhc3QgJyArIG5cblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2JlbG93JywgYXNzZXJ0QmVsb3cpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2x0JywgYXNzZXJ0QmVsb3cpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2xlc3NUaGFuJywgYXNzZXJ0QmVsb3cpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm1vc3QodmFsdWUpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYHZhbHVlYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoNSkudG8uYmUuYXQubW9zdCg1KTtcblx0ICAgKlxuXHQgICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuXHQgICAqIGFzc2VydCBhIG1heGltdW0gbGVuZ3RoLiBUaGUgYmVuZWZpdCBiZWluZyBhXG5cdCAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuXHQgICAqIHdhcyBzdXBwbGllZCBkaXJlY3RseS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLm9mLmF0Lm1vc3QoNCk7XG5cdCAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uaGF2ZS5sZW5ndGgub2YuYXQubW9zdCgzKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG1vc3Rcblx0ICAgKiBAYWxpYXMgbHRlXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0TW9zdCAobiwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUucHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBsZW4gPD0gblxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCBhdCBtb3N0ICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYSBsZW5ndGggYWJvdmUgI3tleHB9J1xuXHQgICAgICAgICwgblxuXHQgICAgICAgICwgbGVuXG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIG9iaiA8PSBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhdCBtb3N0ICcgKyBuXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhYm92ZSAnICsgblxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbW9zdCcsIGFzc2VydE1vc3QpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2x0ZScsIGFzc2VydE1vc3QpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLndpdGhpbihzdGFydCwgZmluaXNoKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgd2l0aGluIGEgcmFuZ2UuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KDcpLnRvLmJlLndpdGhpbig1LDEwKTtcblx0ICAgKlxuXHQgICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuXHQgICAqIGFzc2VydCBhIGxlbmd0aCByYW5nZS4gVGhlIGJlbmVmaXQgYmVpbmcgYVxuXHQgICAqIG1vcmUgaW5mb3JtYXRpdmUgZXJyb3IgbWVzc2FnZSB0aGFuIGlmIHRoZSBsZW5ndGhcblx0ICAgKiB3YXMgc3VwcGxpZWQgZGlyZWN0bHkuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcblx0ICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHdpdGhpblxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCBsb3dlcmJvdW5kIGluY2x1c2l2ZVxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBmaW5pc2ggdXBwZXJib3VuZCBpbmNsdXNpdmVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCd3aXRoaW4nLCBmdW5jdGlvbiAoc3RhcnQsIGZpbmlzaCwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuXHQgICAgICAsIHJhbmdlID0gc3RhcnQgKyAnLi4nICsgZmluaXNoO1xuXHQgICAgaWYgKGZsYWcodGhpcywgJ2RvTGVuZ3RoJykpIHtcblx0ICAgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdCAgICAgIHZhciBsZW4gPSBvYmoubGVuZ3RoO1xuXHQgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgIGxlbiA+PSBzdGFydCAmJiBsZW4gPD0gZmluaXNoXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIHdpdGhpbiAnICsgcmFuZ2Vcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgbGVuZ3RoIHdpdGhpbiAnICsgcmFuZ2Vcblx0ICAgICAgKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgb2JqID49IHN0YXJ0ICYmIG9iaiA8PSBmaW5pc2hcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIHdpdGhpbiAnICsgcmFuZ2Vcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBiZSB3aXRoaW4gJyArIHJhbmdlXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaW5zdGFuY2VvZihjb25zdHJ1Y3Rvcilcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGFuIGluc3RhbmNlIG9mIGBjb25zdHJ1Y3RvcmAuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIFRlYSA9IGZ1bmN0aW9uIChuYW1lKSB7IHRoaXMubmFtZSA9IG5hbWU7IH1cblx0ICAgKiAgICAgICAsIENoYWkgPSBuZXcgVGVhKCdjaGFpJyk7XG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KENoYWkpLnRvLmJlLmFuLmluc3RhbmNlb2YoVGVhKTtcblx0ICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5iZS5pbnN0YW5jZW9mKEFycmF5KTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGluc3RhbmNlb2Zcblx0ICAgKiBAcGFyYW0ge0NvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAYWxpYXMgaW5zdGFuY2VPZlxuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0SW5zdGFuY2VPZiAoY29uc3RydWN0b3IsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgbmFtZSA9IF8uZ2V0TmFtZShjb25zdHJ1Y3Rvcik7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnKSBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYW4gaW5zdGFuY2Ugb2YgJyArIG5hbWVcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgYmUgYW4gaW5zdGFuY2Ugb2YgJyArIG5hbWVcblx0ICAgICk7XG5cdCAgfTtcblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnaW5zdGFuY2VvZicsIGFzc2VydEluc3RhbmNlT2YpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2luc3RhbmNlT2YnLCBhc3NlcnRJbnN0YW5jZU9mKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5wcm9wZXJ0eShuYW1lLCBbdmFsdWVdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaGFzIGEgcHJvcGVydHkgYG5hbWVgLCBvcHRpb25hbGx5IGFzc2VydGluZyB0aGF0XG5cdCAgICogdGhlIHZhbHVlIG9mIHRoYXQgcHJvcGVydHkgaXMgc3RyaWN0bHkgZXF1YWwgdG8gIGB2YWx1ZWAuXG5cdCAgICogSWYgdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgeW91IGNhbiB1c2UgZG90LSBhbmQgYnJhY2tldC1ub3RhdGlvbiBmb3IgZGVlcFxuXHQgICAqIHJlZmVyZW5jZXMgaW50byBvYmplY3RzIGFuZCBhcnJheXMuXG5cdCAgICpcblx0ICAgKiAgICAgLy8gc2ltcGxlIHJlZmVyZW5jaW5nXG5cdCAgICogICAgIHZhciBvYmogPSB7IGZvbzogJ2JhcicgfTtcblx0ICAgKiAgICAgZXhwZWN0KG9iaikudG8uaGF2ZS5wcm9wZXJ0eSgnZm9vJyk7XG5cdCAgICogICAgIGV4cGVjdChvYmopLnRvLmhhdmUucHJvcGVydHkoJ2ZvbycsICdiYXInKTtcblx0ICAgKlxuXHQgICAqICAgICAvLyBkZWVwIHJlZmVyZW5jaW5nXG5cdCAgICogICAgIHZhciBkZWVwT2JqID0ge1xuXHQgICAqICAgICAgICAgZ3JlZW46IHsgdGVhOiAnbWF0Y2hhJyB9XG5cdCAgICogICAgICAgLCB0ZWFzOiBbICdjaGFpJywgJ21hdGNoYScsIHsgdGVhOiAna29uYWNoYScgfSBdXG5cdCAgICogICAgIH07XG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KGRlZXBPYmopLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSgnZ3JlZW4udGVhJywgJ21hdGNoYScpO1xuXHQgICAqICAgICBleHBlY3QoZGVlcE9iaikudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCd0ZWFzWzFdJywgJ21hdGNoYScpO1xuXHQgICAqICAgICBleHBlY3QoZGVlcE9iaikudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCd0ZWFzWzJdLnRlYScsICdrb25hY2hhJyk7XG5cdCAgICpcblx0ICAgKiBZb3UgY2FuIGFsc28gdXNlIGFuIGFycmF5IGFzIHRoZSBzdGFydGluZyBwb2ludCBvZiBhIGBkZWVwLnByb3BlcnR5YFxuXHQgICAqIGFzc2VydGlvbiwgb3IgdHJhdmVyc2UgbmVzdGVkIGFycmF5cy5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgYXJyID0gW1xuXHQgICAqICAgICAgICAgWyAnY2hhaScsICdtYXRjaGEnLCAna29uYWNoYScgXVxuXHQgICAqICAgICAgICwgWyB7IHRlYTogJ2NoYWknIH1cblx0ICAgKiAgICAgICAgICwgeyB0ZWE6ICdtYXRjaGEnIH1cblx0ICAgKiAgICAgICAgICwgeyB0ZWE6ICdrb25hY2hhJyB9IF1cblx0ICAgKiAgICAgXTtcblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoYXJyKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ1swXVsxXScsICdtYXRjaGEnKTtcblx0ICAgKiAgICAgZXhwZWN0KGFycikudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCdbMV1bMl0udGVhJywgJ2tvbmFjaGEnKTtcblx0ICAgKlxuXHQgICAqIEZ1cnRoZXJtb3JlLCBgcHJvcGVydHlgIGNoYW5nZXMgdGhlIHN1YmplY3Qgb2YgdGhlIGFzc2VydGlvblxuXHQgICAqIHRvIGJlIHRoZSB2YWx1ZSBvZiB0aGF0IHByb3BlcnR5IGZyb20gdGhlIG9yaWdpbmFsIG9iamVjdC4gVGhpc1xuXHQgICAqIHBlcm1pdHMgZm9yIGZ1cnRoZXIgY2hhaW5hYmxlIGFzc2VydGlvbnMgb24gdGhhdCBwcm9wZXJ0eS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3Qob2JqKS50by5oYXZlLnByb3BlcnR5KCdmb28nKVxuXHQgICAqICAgICAgIC50aGF0LmlzLmEoJ3N0cmluZycpO1xuXHQgICAqICAgICBleHBlY3QoZGVlcE9iaikudG8uaGF2ZS5wcm9wZXJ0eSgnZ3JlZW4nKVxuXHQgICAqICAgICAgIC50aGF0LmlzLmFuKCdvYmplY3QnKVxuXHQgICAqICAgICAgIC50aGF0LmRlZXAuZXF1YWxzKHsgdGVhOiAnbWF0Y2hhJyB9KTtcblx0ICAgKiAgICAgZXhwZWN0KGRlZXBPYmopLnRvLmhhdmUucHJvcGVydHkoJ3RlYXMnKVxuXHQgICAqICAgICAgIC50aGF0LmlzLmFuKCdhcnJheScpXG5cdCAgICogICAgICAgLndpdGguZGVlcC5wcm9wZXJ0eSgnWzJdJylcblx0ICAgKiAgICAgICAgIC50aGF0LmRlZXAuZXF1YWxzKHsgdGVhOiAna29uYWNoYScgfSk7XG5cdCAgICpcblx0ICAgKiBOb3RlIHRoYXQgZG90cyBhbmQgYnJhY2tldCBpbiBgbmFtZWAgbXVzdCBiZSBiYWNrc2xhc2gtZXNjYXBlZCB3aGVuXG5cdCAgICogdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgd2hpbGUgdGhleSBtdXN0IE5PVCBiZSBlc2NhcGVkIHdoZW4gdGhlIGBkZWVwYFxuXHQgICAqIGZsYWcgaXMgbm90IHNldC5cblx0ICAgKlxuXHQgICAqICAgICAvLyBzaW1wbGUgcmVmZXJlbmNpbmdcblx0ICAgKiAgICAgdmFyIGNzcyA9IHsgJy5saW5rW3RhcmdldF0nOiA0MiB9O1xuXHQgICAqICAgICBleHBlY3QoY3NzKS50by5oYXZlLnByb3BlcnR5KCcubGlua1t0YXJnZXRdJywgNDIpO1xuXHQgICAqXG5cdCAgICogICAgIC8vIGRlZXAgcmVmZXJlbmNpbmdcblx0ICAgKiAgICAgdmFyIGRlZXBDc3MgPSB7ICcubGluayc6IHsgJ1t0YXJnZXRdJzogNDIgfX07XG5cdCAgICogICAgIGV4cGVjdChkZWVwQ3NzKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ1xcXFwubGluay5cXFxcW3RhcmdldFxcXFxdJywgNDIpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgcHJvcGVydHlcblx0ICAgKiBAYWxpYXMgZGVlcC5wcm9wZXJ0eVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgKG9wdGlvbmFsKVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAcmV0dXJucyB2YWx1ZSBvZiBwcm9wZXJ0eSBmb3IgY2hhaW5pbmdcblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Byb3BlcnR5JywgZnVuY3Rpb24gKG5hbWUsIHZhbCwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0XG5cdCAgICB2YXIgaXNEZWVwID0gISFmbGFnKHRoaXMsICdkZWVwJylcblx0ICAgICAgLCBkZXNjcmlwdG9yID0gaXNEZWVwID8gJ2RlZXAgcHJvcGVydHkgJyA6ICdwcm9wZXJ0eSAnXG5cdCAgICAgICwgbmVnYXRlID0gZmxhZyh0aGlzLCAnbmVnYXRlJylcblx0ICAgICAgLCBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuXHQgICAgICAsIHBhdGhJbmZvID0gaXNEZWVwID8gXy5nZXRQYXRoSW5mbyhuYW1lLCBvYmopIDogbnVsbFxuXHQgICAgICAsIGhhc1Byb3BlcnR5ID0gaXNEZWVwXG5cdCAgICAgICAgPyBwYXRoSW5mby5leGlzdHNcblx0ICAgICAgICA6IF8uaGFzUHJvcGVydHkobmFtZSwgb2JqKVxuXHQgICAgICAsIHZhbHVlID0gaXNEZWVwXG5cdCAgICAgICAgPyBwYXRoSW5mby52YWx1ZVxuXHQgICAgICAgIDogb2JqW25hbWVdO1xuXHRcblx0ICAgIGlmIChuZWdhdGUgJiYgYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdmFsdWUpIHtcblx0ICAgICAgICBtc2cgPSAobXNnICE9IG51bGwpID8gbXNnICsgJzogJyA6ICcnO1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cgKyBfLmluc3BlY3Qob2JqKSArICcgaGFzIG5vICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBoYXNQcm9wZXJ0eVxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSAnICsgZGVzY3JpcHRvciArIF8uaW5zcGVjdChuYW1lKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgdmFsID09PSB2YWx1ZVxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpICsgJyBvZiAje2V4cH0sIGJ1dCBnb3QgI3thY3R9J1xuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGhhdmUgYSAnICsgZGVzY3JpcHRvciArIF8uaW5zcGVjdChuYW1lKSArICcgb2YgI3thY3R9J1xuXHQgICAgICAgICwgdmFsXG5cdCAgICAgICAgLCB2YWx1ZVxuXHQgICAgICApO1xuXHQgICAgfVxuXHRcblx0ICAgIGZsYWcodGhpcywgJ29iamVjdCcsIHZhbHVlKTtcblx0ICB9KTtcblx0XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAub3duUHJvcGVydHkobmFtZSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGhhcyBhbiBvd24gcHJvcGVydHkgYG5hbWVgLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgndGVzdCcpLnRvLmhhdmUub3duUHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgb3duUHJvcGVydHlcblx0ICAgKiBAYWxpYXMgaGF2ZU93blByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRPd25Qcm9wZXJ0eSAobmFtZSwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIG9iai5oYXNPd25Qcm9wZXJ0eShuYW1lKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgb3duIHByb3BlcnR5ICcgKyBfLmluc3BlY3QobmFtZSlcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSBvd24gcHJvcGVydHkgJyArIF8uaW5zcGVjdChuYW1lKVxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ293blByb3BlcnR5JywgYXNzZXJ0T3duUHJvcGVydHkpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2hhdmVPd25Qcm9wZXJ0eScsIGFzc2VydE93blByb3BlcnR5KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5vd25Qcm9wZXJ0eURlc2NyaXB0b3IobmFtZVssIGRlc2NyaXB0b3JbLCBtZXNzYWdlXV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBoYXMgYW4gb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgYG5hbWVgLCB0aGF0IG9wdGlvbmFsbHkgbWF0Y2hlcyBgZGVzY3JpcHRvcmAuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KCd0ZXN0JykudG8uaGF2ZS5vd25Qcm9wZXJ0eURlc2NyaXB0b3IoJ2xlbmd0aCcpO1xuXHQgICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5oYXZlLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJywgeyBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IGZhbHNlLCB2YWx1ZTogNCB9KTtcblx0ICAgKiAgICAgZXhwZWN0KCd0ZXN0Jykubm90LnRvLmhhdmUub3duUHJvcGVydHlEZXNjcmlwdG9yKCdsZW5ndGgnLCB7IGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IGZhbHNlLCB3cml0YWJsZTogZmFsc2UsIHZhbHVlOiAzIH0pO1xuXHQgICAqICAgICBleHBlY3QoJ3Rlc3QnKS5vd25Qcm9wZXJ0eURlc2NyaXB0b3IoJ2xlbmd0aCcpLnRvLmhhdmUucHJvcGVydHkoJ2VudW1lcmFibGUnLCBmYWxzZSk7XG5cdCAgICogICAgIGV4cGVjdCgndGVzdCcpLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJykudG8uaGF2ZS5rZXlzKCd2YWx1ZScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgb3duUHJvcGVydHlEZXNjcmlwdG9yXG5cdCAgICogQGFsaWFzIGhhdmVPd25Qcm9wZXJ0eURlc2NyaXB0b3Jcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yIF9vcHRpb25hbF9cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgKG5hbWUsIGRlc2NyaXB0b3IsIG1zZykge1xuXHQgICAgaWYgKHR5cGVvZiBkZXNjcmlwdG9yID09PSAnc3RyaW5nJykge1xuXHQgICAgICBtc2cgPSBkZXNjcmlwdG9yO1xuXHQgICAgICBkZXNjcmlwdG9yID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXHQgICAgdmFyIGFjdHVhbERlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdChvYmopLCBuYW1lKTtcblx0ICAgIGlmIChhY3R1YWxEZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IpIHtcblx0ICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICBfLmVxbChkZXNjcmlwdG9yLCBhY3R1YWxEZXNjcmlwdG9yKVxuXHQgICAgICAgICwgJ2V4cGVjdGVkIHRoZSBvd24gcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgJyArIF8uaW5zcGVjdChuYW1lKSArICcgb24gI3t0aGlzfSB0byBtYXRjaCAnICsgXy5pbnNwZWN0KGRlc2NyaXB0b3IpICsgJywgZ290ICcgKyBfLmluc3BlY3QoYWN0dWFsRGVzY3JpcHRvcilcblx0ICAgICAgICAsICdleHBlY3RlZCB0aGUgb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgZm9yICcgKyBfLmluc3BlY3QobmFtZSkgKyAnIG9uICN7dGhpc30gdG8gbm90IG1hdGNoICcgKyBfLmluc3BlY3QoZGVzY3JpcHRvcilcblx0ICAgICAgICAsIGRlc2NyaXB0b3Jcblx0ICAgICAgICAsIGFjdHVhbERlc2NyaXB0b3Jcblx0ICAgICAgICAsIHRydWVcblx0ICAgICAgKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgYWN0dWFsRGVzY3JpcHRvclxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhbiBvd24gcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgJyArIF8uaW5zcGVjdChuYW1lKVxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGhhdmUgYW4gb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgZm9yICcgKyBfLmluc3BlY3QobmFtZSlcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICAgIGZsYWcodGhpcywgJ29iamVjdCcsIGFjdHVhbERlc2NyaXB0b3IpO1xuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnb3duUHJvcGVydHlEZXNjcmlwdG9yJywgYXNzZXJ0T3duUHJvcGVydHlEZXNjcmlwdG9yKTtcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdoYXZlT3duUHJvcGVydHlEZXNjcmlwdG9yJywgYXNzZXJ0T3duUHJvcGVydHlEZXNjcmlwdG9yKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5sZW5ndGhcblx0ICAgKlxuXHQgICAqIFNldHMgdGhlIGBkb0xlbmd0aGAgZmxhZyBsYXRlciB1c2VkIGFzIGEgY2hhaW4gcHJlY3Vyc29yIHRvIGEgdmFsdWVcblx0ICAgKiBjb21wYXJpc29uIGZvciB0aGUgYGxlbmd0aGAgcHJvcGVydHkuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC5hYm92ZSgyKTtcblx0ICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5hYm92ZSgyKTtcblx0ICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC5iZWxvdyg0KTtcblx0ICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5iZWxvdyg0KTtcblx0ICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcblx0ICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcblx0ICAgKlxuXHQgICAqICpEZXByZWNhdGlvbiBub3RpY2U6KiBVc2luZyBgbGVuZ3RoYCBhcyBhbiBhc3NlcnRpb24gd2lsbCBiZSBkZXByZWNhdGVkXG5cdCAgICogaW4gdmVyc2lvbiAyLjQuMCBhbmQgcmVtb3ZlZCBpbiAzLjAuMC4gQ29kZSB1c2luZyB0aGUgb2xkIHN0eWxlIG9mXG5cdCAgICogYXNzZXJ0aW5nIGZvciBgbGVuZ3RoYCBwcm9wZXJ0eSB2YWx1ZSB1c2luZyBgbGVuZ3RoKHZhbHVlKWAgc2hvdWxkIGJlXG5cdCAgICogc3dpdGNoZWQgdG8gdXNlIGBsZW5ndGhPZih2YWx1ZSlgIGluc3RlYWQuXG5cdCAgICpcblx0ICAgKiBAbmFtZSBsZW5ndGhcblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubGVuZ3RoT2YodmFsdWVbLCBtZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0J3MgYGxlbmd0aGAgcHJvcGVydHkgaGFzXG5cdCAgICogdGhlIGV4cGVjdGVkIHZhbHVlLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChbIDEsIDIsIDNdKS50by5oYXZlLmxlbmd0aE9mKDMpO1xuXHQgICAqICAgICBleHBlY3QoJ2Zvb2JhcicpLnRvLmhhdmUubGVuZ3RoT2YoNik7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBsZW5ndGhPZlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnRMZW5ndGhDaGFpbiAoKSB7XG5cdCAgICBmbGFnKHRoaXMsICdkb0xlbmd0aCcsIHRydWUpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0TGVuZ3RoIChuLCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdCAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICBsZW4gPT0gblxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYSBsZW5ndGggb2YgI3tleHB9IGJ1dCBnb3QgI3thY3R9J1xuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgbGVuZ3RoIG9mICN7YWN0fSdcblx0ICAgICAgLCBuXG5cdCAgICAgICwgbGVuXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnbGVuZ3RoJywgYXNzZXJ0TGVuZ3RoLCBhc3NlcnRMZW5ndGhDaGFpbik7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbGVuZ3RoT2YnLCBhc3NlcnRMZW5ndGgpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm1hdGNoKHJlZ2V4cClcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IG1hdGNoZXMgYSByZWd1bGFyIGV4cHJlc3Npb24uXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KCdmb29iYXInKS50by5tYXRjaCgvXmZvby8pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbWF0Y2hcblx0ICAgKiBAYWxpYXMgbWF0Y2hlc1xuXHQgICAqIEBwYXJhbSB7UmVnRXhwfSBSZWd1bGFyRXhwcmVzc2lvblxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gYXNzZXJ0TWF0Y2gocmUsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICByZS5leGVjKG9iailcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBtYXRjaCAnICsgcmVcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gbWF0Y2ggJyArIHJlXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbWF0Y2gnLCBhc3NlcnRNYXRjaCk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbWF0Y2hlcycsIGFzc2VydE1hdGNoKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5zdHJpbmcoc3RyaW5nKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSBzdHJpbmcgdGFyZ2V0IGNvbnRhaW5zIGFub3RoZXIgc3RyaW5nLlxuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdCgnZm9vYmFyJykudG8uaGF2ZS5zdHJpbmcoJ2JhcicpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgc3RyaW5nXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ3N0cmluZycsIGZ1bmN0aW9uIChzdHIsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS5pcy5hKCdzdHJpbmcnKTtcblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICB+b2JqLmluZGV4T2Yoc3RyKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGNvbnRhaW4gJyArIF8uaW5zcGVjdChzdHIpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGNvbnRhaW4gJyArIF8uaW5zcGVjdChzdHIpXG5cdCAgICApO1xuXHQgIH0pO1xuXHRcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5rZXlzKGtleTEsIFtrZXkyXSwgWy4uLl0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBjb250YWlucyBhbnkgb3IgYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cy5cblx0ICAgKiBVc2UgaW4gY29tYmluYXRpb24gd2l0aCBgYW55YCwgYGFsbGAsIGBjb250YWluc2AsIG9yIGBoYXZlYCB3aWxsIGFmZmVjdFxuXHQgICAqIHdoYXQgd2lsbCBwYXNzLlxuXHQgICAqXG5cdCAgICogV2hlbiB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYGFueWAsIGF0IGxlYXN0IG9uZSBrZXkgdGhhdCBpcyBwYXNzZWRcblx0ICAgKiBpbiBtdXN0IGV4aXN0IGluIHRoZSB0YXJnZXQgb2JqZWN0LiBUaGlzIGlzIHJlZ2FyZGxlc3Mgd2hldGhlciBvciBub3Rcblx0ICAgKiB0aGUgYGhhdmVgIG9yIGBjb250YWluYCBxdWFsaWZpZXJzIGFyZSB1c2VkLiBOb3RlLCBlaXRoZXIgYGFueWAgb3IgYGFsbGBcblx0ICAgKiBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYXNzZXJ0aW9uLiBJZiBuZWl0aGVyIGFyZSB1c2VkLCB0aGUgYXNzZXJ0aW9uIGlzXG5cdCAgICogZGVmYXVsdGVkIHRvIGBhbGxgLlxuXHQgICAqXG5cdCAgICogV2hlbiBib3RoIGBhbGxgIGFuZCBgY29udGFpbmAgYXJlIHVzZWQsIHRoZSB0YXJnZXQgb2JqZWN0IG11c3QgaGF2ZSBhdFxuXHQgICAqIGxlYXN0IGFsbCBvZiB0aGUgcGFzc2VkLWluIGtleXMgYnV0IG1heSBoYXZlIG1vcmUga2V5cyBub3QgbGlzdGVkLlxuXHQgICAqXG5cdCAgICogV2hlbiBib3RoIGBhbGxgIGFuZCBgaGF2ZWAgYXJlIHVzZWQsIHRoZSB0YXJnZXQgb2JqZWN0IG11c3QgYm90aCBjb250YWluXG5cdCAgICogYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cyBBTkQgdGhlIG51bWJlciBvZiBrZXlzIGluIHRoZSB0YXJnZXQgb2JqZWN0IG11c3Rcblx0ICAgKiBtYXRjaCB0aGUgbnVtYmVyIG9mIGtleXMgcGFzc2VkIGluIChpbiBvdGhlciB3b3JkcywgYSB0YXJnZXQgb2JqZWN0IG11c3Rcblx0ICAgKiBoYXZlIGFsbCBhbmQgb25seSBhbGwgb2YgdGhlIHBhc3NlZC1pbiBrZXlzKS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFueS5rZXlzKCdmb28nLCAnYmF6Jyk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmhhdmUuYW55LmtleXMoJ2ZvbycpO1xuXHQgICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5jb250YWluLmFueS5rZXlzKCdiYXInLCAnYmF6Jyk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmNvbnRhaW4uYW55LmtleXMoWydmb28nXSk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmNvbnRhaW4uYW55LmtleXMoeydmb28nOiA2fSk7XG5cdCAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmhhdmUuYWxsLmtleXMoWydiYXInLCAnZm9vJ10pO1xuXHQgICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFsbC5rZXlzKHsnYmFyJzogNiwgJ2Zvbyc6IDd9KTtcblx0ICAgKiAgICAgZXhwZWN0KHsgZm9vOiAxLCBiYXI6IDIsIGJhejogMyB9KS50by5jb250YWluLmFsbC5rZXlzKFsnYmFyJywgJ2ZvbyddKTtcblx0ICAgKiAgICAgZXhwZWN0KHsgZm9vOiAxLCBiYXI6IDIsIGJhejogMyB9KS50by5jb250YWluLmFsbC5rZXlzKHsnYmFyJzogNn0pO1xuXHQgICAqXG5cdCAgICpcblx0ICAgKiBAbmFtZSBrZXlzXG5cdCAgICogQGFsaWFzIGtleVxuXHQgICAqIEBwYXJhbSB7Li4uU3RyaW5nfEFycmF5fE9iamVjdH0ga2V5c1xuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0S2V5cyAoa2V5cykge1xuXHQgICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpXG5cdCAgICAgICwgc3RyXG5cdCAgICAgICwgb2sgPSB0cnVlXG5cdCAgICAgICwgbWl4ZWRBcmdzTXNnID0gJ2tleXMgbXVzdCBiZSBnaXZlbiBzaW5nbGUgYXJndW1lbnQgb2YgQXJyYXl8T2JqZWN0fFN0cmluZywgb3IgbXVsdGlwbGUgU3RyaW5nIGFyZ3VtZW50cyc7XG5cdFxuXHQgICAgc3dpdGNoIChfLnR5cGUoa2V5cykpIHtcblx0ICAgICAgY2FzZSBcImFycmF5XCI6XG5cdCAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0aHJvdyAobmV3IEVycm9yKG1peGVkQXJnc01zZykpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlIFwib2JqZWN0XCI6XG5cdCAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0aHJvdyAobmV3IEVycm9yKG1peGVkQXJnc01zZykpO1xuXHQgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhrZXlzKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBrZXlzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIWtleXMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ2tleXMgcmVxdWlyZWQnKTtcblx0XG5cdCAgICB2YXIgYWN0dWFsID0gT2JqZWN0LmtleXMob2JqKVxuXHQgICAgICAsIGV4cGVjdGVkID0ga2V5c1xuXHQgICAgICAsIGxlbiA9IGtleXMubGVuZ3RoXG5cdCAgICAgICwgYW55ID0gZmxhZyh0aGlzLCAnYW55Jylcblx0ICAgICAgLCBhbGwgPSBmbGFnKHRoaXMsICdhbGwnKTtcblx0XG5cdCAgICBpZiAoIWFueSAmJiAhYWxsKSB7XG5cdCAgICAgIGFsbCA9IHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSGFzIGFueVxuXHQgICAgaWYgKGFueSkge1xuXHQgICAgICB2YXIgaW50ZXJzZWN0aW9uID0gZXhwZWN0ZWQuZmlsdGVyKGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICAgIHJldHVybiB+YWN0dWFsLmluZGV4T2Yoa2V5KTtcblx0ICAgICAgfSk7XG5cdCAgICAgIG9rID0gaW50ZXJzZWN0aW9uLmxlbmd0aCA+IDA7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSGFzIGFsbFxuXHQgICAgaWYgKGFsbCkge1xuXHQgICAgICBvayA9IGtleXMuZXZlcnkoZnVuY3Rpb24oa2V5KXtcblx0ICAgICAgICByZXR1cm4gfmFjdHVhbC5pbmRleE9mKGtleSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAoIWZsYWcodGhpcywgJ25lZ2F0ZScpICYmICFmbGFnKHRoaXMsICdjb250YWlucycpKSB7XG5cdCAgICAgICAgb2sgPSBvayAmJiBrZXlzLmxlbmd0aCA9PSBhY3R1YWwubGVuZ3RoO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gS2V5IHN0cmluZ1xuXHQgICAgaWYgKGxlbiA+IDEpIHtcblx0ICAgICAga2V5cyA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSl7XG5cdCAgICAgICAgcmV0dXJuIF8uaW5zcGVjdChrZXkpO1xuXHQgICAgICB9KTtcblx0ICAgICAgdmFyIGxhc3QgPSBrZXlzLnBvcCgpO1xuXHQgICAgICBpZiAoYWxsKSB7XG5cdCAgICAgICAgc3RyID0ga2V5cy5qb2luKCcsICcpICsgJywgYW5kICcgKyBsYXN0O1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChhbnkpIHtcblx0ICAgICAgICBzdHIgPSBrZXlzLmpvaW4oJywgJykgKyAnLCBvciAnICsgbGFzdDtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3RyID0gXy5pbnNwZWN0KGtleXNbMF0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEZvcm1cblx0ICAgIHN0ciA9IChsZW4gPiAxID8gJ2tleXMgJyA6ICdrZXkgJykgKyBzdHI7XG5cdFxuXHQgICAgLy8gSGF2ZSAvIGluY2x1ZGVcblx0ICAgIHN0ciA9IChmbGFnKHRoaXMsICdjb250YWlucycpID8gJ2NvbnRhaW4gJyA6ICdoYXZlICcpICsgc3RyO1xuXHRcblx0ICAgIC8vIEFzc2VydGlvblxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgb2tcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byAnICsgc3RyXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90ICcgKyBzdHJcblx0ICAgICAgLCBleHBlY3RlZC5zbGljZSgwKS5zb3J0KClcblx0ICAgICAgLCBhY3R1YWwuc29ydCgpXG5cdCAgICAgICwgdHJ1ZVxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ2tleXMnLCBhc3NlcnRLZXlzKTtcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdrZXknLCBhc3NlcnRLZXlzKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC50aHJvdyhjb25zdHJ1Y3Rvcilcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgZnVuY3Rpb24gdGFyZ2V0IHdpbGwgdGhyb3cgYSBzcGVjaWZpYyBlcnJvciwgb3Igc3BlY2lmaWMgdHlwZSBvZiBlcnJvclxuXHQgICAqIChhcyBkZXRlcm1pbmVkIHVzaW5nIGBpbnN0YW5jZW9mYCksIG9wdGlvbmFsbHkgd2l0aCBhIFJlZ0V4cCBvciBzdHJpbmcgaW5jbHVzaW9uIHRlc3Rcblx0ICAgKiBmb3IgdGhlIGVycm9yJ3MgbWVzc2FnZS5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgZXJyID0gbmV3IFJlZmVyZW5jZUVycm9yKCdUaGlzIGlzIGEgYmFkIGZ1bmN0aW9uLicpO1xuXHQgICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoKSB7IHRocm93IGVycjsgfVxuXHQgICAqICAgICBleHBlY3QoZm4pLnRvLnRocm93KFJlZmVyZW5jZUVycm9yKTtcblx0ICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdyhFcnJvcik7XG5cdCAgICogICAgIGV4cGVjdChmbikudG8udGhyb3coL2JhZCBmdW5jdGlvbi8pO1xuXHQgICAqICAgICBleHBlY3QoZm4pLnRvLm5vdC50aHJvdygnZ29vZCBmdW5jdGlvbicpO1xuXHQgICAqICAgICBleHBlY3QoZm4pLnRvLnRocm93KFJlZmVyZW5jZUVycm9yLCAvYmFkIGZ1bmN0aW9uLyk7XG5cdCAgICogICAgIGV4cGVjdChmbikudG8udGhyb3coZXJyKTtcblx0ICAgKlxuXHQgICAqIFBsZWFzZSBub3RlIHRoYXQgd2hlbiBhIHRocm93IGV4cGVjdGF0aW9uIGlzIG5lZ2F0ZWQsIGl0IHdpbGwgY2hlY2sgZWFjaFxuXHQgICAqIHBhcmFtZXRlciBpbmRlcGVuZGVudGx5LCBzdGFydGluZyB3aXRoIGVycm9yIGNvbnN0cnVjdG9yIHR5cGUuIFRoZSBhcHByb3ByaWF0ZSB3YXlcblx0ICAgKiB0byBjaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZiBhIHR5cGUgb2YgZXJyb3IgYnV0IGZvciBhIG1lc3NhZ2UgdGhhdCBkb2VzIG5vdCBtYXRjaFxuXHQgICAqIGlzIHRvIHVzZSBgYW5kYC5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoZm4pLnRvLnRocm93KFJlZmVyZW5jZUVycm9yKVxuXHQgICAqICAgICAgICAuYW5kLm5vdC50aHJvdygvZ29vZCBmdW5jdGlvbi8pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgdGhyb3dcblx0ICAgKiBAYWxpYXMgdGhyb3dzXG5cdCAgICogQGFsaWFzIFRocm93XG5cdCAgICogQHBhcmFtIHtFcnJvckNvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXhwZWN0ZWQgZXJyb3IgbWVzc2FnZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0Vycm9yX3R5cGVzXG5cdCAgICogQHJldHVybnMgZXJyb3IgZm9yIGNoYWluaW5nIChudWxsIGlmIG5vIGVycm9yKVxuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0VGhyb3dzIChjb25zdHJ1Y3RvciwgZXJyTXNnLCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykuaXMuYSgnZnVuY3Rpb24nKTtcblx0XG5cdCAgICB2YXIgdGhyb3duID0gZmFsc2Vcblx0ICAgICAgLCBkZXNpcmVkRXJyb3IgPSBudWxsXG5cdCAgICAgICwgbmFtZSA9IG51bGxcblx0ICAgICAgLCB0aHJvd25FcnJvciA9IG51bGw7XG5cdFxuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgZXJyTXNnID0gbnVsbDtcblx0ICAgICAgY29uc3RydWN0b3IgPSBudWxsO1xuXHQgICAgfSBlbHNlIGlmIChjb25zdHJ1Y3RvciAmJiAoY29uc3RydWN0b3IgaW5zdGFuY2VvZiBSZWdFeHAgfHwgJ3N0cmluZycgPT09IHR5cGVvZiBjb25zdHJ1Y3RvcikpIHtcblx0ICAgICAgZXJyTXNnID0gY29uc3RydWN0b3I7XG5cdCAgICAgIGNvbnN0cnVjdG9yID0gbnVsbDtcblx0ICAgIH0gZWxzZSBpZiAoY29uc3RydWN0b3IgJiYgY29uc3RydWN0b3IgaW5zdGFuY2VvZiBFcnJvcikge1xuXHQgICAgICBkZXNpcmVkRXJyb3IgPSBjb25zdHJ1Y3Rvcjtcblx0ICAgICAgY29uc3RydWN0b3IgPSBudWxsO1xuXHQgICAgICBlcnJNc2cgPSBudWxsO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc3RydWN0b3IgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgbmFtZSA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZS5uYW1lO1xuXHQgICAgICBpZiAoIW5hbWUgfHwgKG5hbWUgPT09ICdFcnJvcicgJiYgY29uc3RydWN0b3IgIT09IEVycm9yKSkge1xuXHQgICAgICAgIG5hbWUgPSBjb25zdHJ1Y3Rvci5uYW1lIHx8IChuZXcgY29uc3RydWN0b3IoKSkubmFtZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY29uc3RydWN0b3IgPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIG9iaigpO1xuXHQgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgIC8vIGZpcnN0LCBjaGVjayBkZXNpcmVkIGVycm9yXG5cdCAgICAgIGlmIChkZXNpcmVkRXJyb3IpIHtcblx0ICAgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgICAgZXJyID09PSBkZXNpcmVkRXJyb3Jcblx0ICAgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gdGhyb3cgI3tleHB9IGJ1dCAje2FjdH0gd2FzIHRocm93bidcblx0ICAgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IHRocm93ICN7ZXhwfSdcblx0ICAgICAgICAgICwgKGRlc2lyZWRFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZGVzaXJlZEVycm9yLnRvU3RyaW5nKCkgOiBkZXNpcmVkRXJyb3IpXG5cdCAgICAgICAgICAsIChlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci50b1N0cmluZygpIDogZXJyKVxuXHQgICAgICAgICk7XG5cdFxuXHQgICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcsIGVycik7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIG5leHQsIGNoZWNrIGNvbnN0cnVjdG9yXG5cdCAgICAgIGlmIChjb25zdHJ1Y3Rvcikge1xuXHQgICAgICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgICBlcnIgaW5zdGFuY2VvZiBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byB0aHJvdyAje2V4cH0gYnV0ICN7YWN0fSB3YXMgdGhyb3duJ1xuXHQgICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgdGhyb3cgI3tleHB9IGJ1dCAje2FjdH0gd2FzIHRocm93bidcblx0ICAgICAgICAgICwgbmFtZVxuXHQgICAgICAgICAgLCAoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIudG9TdHJpbmcoKSA6IGVycilcblx0ICAgICAgICApO1xuXHRcblx0ICAgICAgICBpZiAoIWVyck1zZykge1xuXHQgICAgICAgICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgZXJyKTtcblx0ICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gbmV4dCwgY2hlY2sgbWVzc2FnZVxuXHQgICAgICB2YXIgbWVzc2FnZSA9ICdlcnJvcicgPT09IF8udHlwZShlcnIpICYmIFwibWVzc2FnZVwiIGluIGVyclxuXHQgICAgICAgID8gZXJyLm1lc3NhZ2Vcblx0ICAgICAgICA6ICcnICsgZXJyO1xuXHRcblx0ICAgICAgaWYgKChtZXNzYWdlICE9IG51bGwpICYmIGVyck1zZyAmJiBlcnJNc2cgaW5zdGFuY2VvZiBSZWdFeHApIHtcblx0ICAgICAgICB0aGlzLmFzc2VydChcblx0ICAgICAgICAgICAgZXJyTXNnLmV4ZWMobWVzc2FnZSlcblx0ICAgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gdGhyb3cgZXJyb3IgbWF0Y2hpbmcgI3tleHB9IGJ1dCBnb3QgI3thY3R9J1xuXHQgICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byB0aHJvdyBlcnJvciBub3QgbWF0Y2hpbmcgI3tleHB9J1xuXHQgICAgICAgICAgLCBlcnJNc2dcblx0ICAgICAgICAgICwgbWVzc2FnZVxuXHQgICAgICAgICk7XG5cdFxuXHQgICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcsIGVycik7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH0gZWxzZSBpZiAoKG1lc3NhZ2UgIT0gbnVsbCkgJiYgZXJyTXNnICYmICdzdHJpbmcnID09PSB0eXBlb2YgZXJyTXNnKSB7XG5cdCAgICAgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgICAgIH5tZXNzYWdlLmluZGV4T2YoZXJyTXNnKVxuXHQgICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byB0aHJvdyBlcnJvciBpbmNsdWRpbmcgI3tleHB9IGJ1dCBnb3QgI3thY3R9J1xuXHQgICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byB0aHJvdyBlcnJvciBub3QgaW5jbHVkaW5nICN7YWN0fSdcblx0ICAgICAgICAgICwgZXJyTXNnXG5cdCAgICAgICAgICAsIG1lc3NhZ2Vcblx0ICAgICAgICApO1xuXHRcblx0ICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnLCBlcnIpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRocm93biA9IHRydWU7XG5cdCAgICAgICAgdGhyb3duRXJyb3IgPSBlcnI7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgYWN0dWFsbHlHb3QgPSAnJ1xuXHQgICAgICAsIGV4cGVjdGVkVGhyb3duID0gbmFtZSAhPT0gbnVsbFxuXHQgICAgICAgID8gbmFtZVxuXHQgICAgICAgIDogZGVzaXJlZEVycm9yXG5cdCAgICAgICAgICA/ICcje2V4cH0nIC8vXy5pbnNwZWN0KGRlc2lyZWRFcnJvcilcblx0ICAgICAgICAgIDogJ2FuIGVycm9yJztcblx0XG5cdCAgICBpZiAodGhyb3duKSB7XG5cdCAgICAgIGFjdHVhbGx5R290ID0gJyBidXQgI3thY3R9IHdhcyB0aHJvd24nXG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgdGhyb3duID09PSB0cnVlXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gdGhyb3cgJyArIGV4cGVjdGVkVGhyb3duICsgYWN0dWFsbHlHb3Rcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgdGhyb3cgJyArIGV4cGVjdGVkVGhyb3duICsgYWN0dWFsbHlHb3Rcblx0ICAgICAgLCAoZGVzaXJlZEVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBkZXNpcmVkRXJyb3IudG9TdHJpbmcoKSA6IGRlc2lyZWRFcnJvcilcblx0ICAgICAgLCAodGhyb3duRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHRocm93bkVycm9yLnRvU3RyaW5nKCkgOiB0aHJvd25FcnJvcilcblx0ICAgICk7XG5cdFxuXHQgICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgdGhyb3duRXJyb3IpO1xuXHQgIH07XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Rocm93JywgYXNzZXJ0VGhyb3dzKTtcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCd0aHJvd3MnLCBhc3NlcnRUaHJvd3MpO1xuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ1Rocm93JywgYXNzZXJ0VGhyb3dzKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5yZXNwb25kVG8obWV0aG9kKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSBvYmplY3Qgb3IgY2xhc3MgdGFyZ2V0IHdpbGwgcmVzcG9uZCB0byBhIG1ldGhvZC5cblx0ICAgKlxuXHQgICAqICAgICBLbGFzcy5wcm90b3R5cGUuYmFyID0gZnVuY3Rpb24oKXt9O1xuXHQgICAqICAgICBleHBlY3QoS2xhc3MpLnRvLnJlc3BvbmRUbygnYmFyJyk7XG5cdCAgICogICAgIGV4cGVjdChvYmopLnRvLnJlc3BvbmRUbygnYmFyJyk7XG5cdCAgICpcblx0ICAgKiBUbyBjaGVjayBpZiBhIGNvbnN0cnVjdG9yIHdpbGwgcmVzcG9uZCB0byBhIHN0YXRpYyBmdW5jdGlvbixcblx0ICAgKiBzZXQgdGhlIGBpdHNlbGZgIGZsYWcuXG5cdCAgICpcblx0ICAgKiAgICAgS2xhc3MuYmF6ID0gZnVuY3Rpb24oKXt9O1xuXHQgICAqICAgICBleHBlY3QoS2xhc3MpLml0c2VsZi50by5yZXNwb25kVG8oJ2JheicpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgcmVzcG9uZFRvXG5cdCAgICogQGFsaWFzIHJlc3BvbmRzVG9cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVzcG9uZFRvIChtZXRob2QsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jylcblx0ICAgICAgLCBpdHNlbGYgPSBmbGFnKHRoaXMsICdpdHNlbGYnKVxuXHQgICAgICAsIGNvbnRleHQgPSAoJ2Z1bmN0aW9uJyA9PT0gXy50eXBlKG9iaikgJiYgIWl0c2VsZilcblx0ICAgICAgICA/IG9iai5wcm90b3R5cGVbbWV0aG9kXVxuXHQgICAgICAgIDogb2JqW21ldGhvZF07XG5cdFxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGNvbnRleHRcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byByZXNwb25kIHRvICcgKyBfLmluc3BlY3QobWV0aG9kKVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCByZXNwb25kIHRvICcgKyBfLmluc3BlY3QobWV0aG9kKVxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Jlc3BvbmRUbycsIHJlc3BvbmRUbyk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgncmVzcG9uZHNUbycsIHJlc3BvbmRUbyk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXRzZWxmXG5cdCAgICpcblx0ICAgKiBTZXRzIHRoZSBgaXRzZWxmYCBmbGFnLCBsYXRlciB1c2VkIGJ5IHRoZSBgcmVzcG9uZFRvYCBhc3NlcnRpb24uXG5cdCAgICpcblx0ICAgKiAgICAgZnVuY3Rpb24gRm9vKCkge31cblx0ICAgKiAgICAgRm9vLmJhciA9IGZ1bmN0aW9uKCkge31cblx0ICAgKiAgICAgRm9vLnByb3RvdHlwZS5iYXogPSBmdW5jdGlvbigpIHt9XG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KEZvbykuaXRzZWxmLnRvLnJlc3BvbmRUbygnYmFyJyk7XG5cdCAgICogICAgIGV4cGVjdChGb28pLml0c2VsZi5ub3QudG8ucmVzcG9uZFRvKCdiYXonKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGl0c2VsZlxuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdpdHNlbGYnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBmbGFnKHRoaXMsICdpdHNlbGYnLCB0cnVlKTtcblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5zYXRpc2Z5KG1ldGhvZClcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IHBhc3NlcyBhIGdpdmVuIHRydXRoIHRlc3QuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KDEpLnRvLnNhdGlzZnkoZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gPiAwOyB9KTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHNhdGlzZnlcblx0ICAgKiBAYWxpYXMgc2F0aXNmaWVzXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gbWF0Y2hlclxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHNhdGlzZnkgKG1hdGNoZXIsIG1zZykge1xuXHQgICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICB2YXIgcmVzdWx0ID0gbWF0Y2hlcihvYmopO1xuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgICAgcmVzdWx0XG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gc2F0aXNmeSAnICsgXy5vYmpEaXNwbGF5KG1hdGNoZXIpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IHNhdGlzZnknICsgXy5vYmpEaXNwbGF5KG1hdGNoZXIpXG5cdCAgICAgICwgdGhpcy5uZWdhdGUgPyBmYWxzZSA6IHRydWVcblx0ICAgICAgLCByZXN1bHRcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdzYXRpc2Z5Jywgc2F0aXNmeSk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnc2F0aXNmaWVzJywgc2F0aXNmeSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuY2xvc2VUbyhleHBlY3RlZCwgZGVsdGEpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBlcXVhbCBgZXhwZWN0ZWRgLCB0byB3aXRoaW4gYSArLy0gYGRlbHRhYCByYW5nZS5cblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoMS41KS50by5iZS5jbG9zZVRvKDEsIDAuNSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBjbG9zZVRvXG5cdCAgICogQGFsaWFzIGFwcHJveGltYXRlbHlcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZXhwZWN0ZWRcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVsdGFcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjbG9zZVRvKGV4cGVjdGVkLCBkZWx0YSwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS5pcy5hKCdudW1iZXInKTtcblx0ICAgIGlmIChfLnR5cGUoZXhwZWN0ZWQpICE9PSAnbnVtYmVyJyB8fCBfLnR5cGUoZGVsdGEpICE9PSAnbnVtYmVyJykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RoZSBhcmd1bWVudHMgdG8gY2xvc2VUbyBvciBhcHByb3hpbWF0ZWx5IG11c3QgYmUgbnVtYmVycycpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIE1hdGguYWJzKG9iaiAtIGV4cGVjdGVkKSA8PSBkZWx0YVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGNsb3NlIHRvICcgKyBleHBlY3RlZCArICcgKy8tICcgKyBkZWx0YVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSBjbG9zZSB0byAnICsgZXhwZWN0ZWQgKyAnICsvLSAnICsgZGVsdGFcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkTWV0aG9kKCdjbG9zZVRvJywgY2xvc2VUbyk7XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnYXBwcm94aW1hdGVseScsIGNsb3NlVG8pO1xuXHRcblx0ICBmdW5jdGlvbiBpc1N1YnNldE9mKHN1YnNldCwgc3VwZXJzZXQsIGNtcCkge1xuXHQgICAgcmV0dXJuIHN1YnNldC5ldmVyeShmdW5jdGlvbihlbGVtKSB7XG5cdCAgICAgIGlmICghY21wKSByZXR1cm4gc3VwZXJzZXQuaW5kZXhPZihlbGVtKSAhPT0gLTE7XG5cdFxuXHQgICAgICByZXR1cm4gc3VwZXJzZXQuc29tZShmdW5jdGlvbihlbGVtMikge1xuXHQgICAgICAgIHJldHVybiBjbXAoZWxlbSwgZWxlbTIpO1xuXHQgICAgICB9KTtcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm1lbWJlcnMoc2V0KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgYSBzdXBlcnNldCBvZiBgc2V0YCxcblx0ICAgKiBvciB0aGF0IHRoZSB0YXJnZXQgYW5kIGBzZXRgIGhhdmUgdGhlIHNhbWUgc3RyaWN0bHktZXF1YWwgKD09PSkgbWVtYmVycy5cblx0ICAgKiBBbHRlcm5hdGVseSwgaWYgdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgc2V0IG1lbWJlcnMgYXJlIGNvbXBhcmVkIGZvciBkZWVwXG5cdCAgICogZXF1YWxpdHkuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KFsxLCAyLCAzXSkudG8uaW5jbHVkZS5tZW1iZXJzKFszLCAyXSk7XG5cdCAgICogICAgIGV4cGVjdChbMSwgMiwgM10pLnRvLm5vdC5pbmNsdWRlLm1lbWJlcnMoWzMsIDIsIDhdKTtcblx0ICAgKlxuXHQgICAqICAgICBleHBlY3QoWzQsIDJdKS50by5oYXZlLm1lbWJlcnMoWzIsIDRdKTtcblx0ICAgKiAgICAgZXhwZWN0KFs1LCAyXSkudG8ubm90LmhhdmUubWVtYmVycyhbNSwgMiwgMV0pO1xuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChbeyBpZDogMSB9XSkudG8uZGVlcC5pbmNsdWRlLm1lbWJlcnMoW3sgaWQ6IDEgfV0pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbWVtYmVyc1xuXHQgICAqIEBwYXJhbSB7QXJyYXl9IHNldFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIEFzc2VydGlvbi5hZGRNZXRob2QoJ21lbWJlcnMnLCBmdW5jdGlvbiAoc3Vic2V0LCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXHRcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqKS50by5iZS5hbignYXJyYXknKTtcblx0ICAgIG5ldyBBc3NlcnRpb24oc3Vic2V0KS50by5iZS5hbignYXJyYXknKTtcblx0XG5cdCAgICB2YXIgY21wID0gZmxhZyh0aGlzLCAnZGVlcCcpID8gXy5lcWwgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgaWYgKGZsYWcodGhpcywgJ2NvbnRhaW5zJykpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgICAgaXNTdWJzZXRPZihzdWJzZXQsIG9iaiwgY21wKVxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYSBzdXBlcnNldCBvZiAje2FjdH0nXG5cdCAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgYmUgYSBzdXBlcnNldCBvZiAje2FjdH0nXG5cdCAgICAgICAgLCBvYmpcblx0ICAgICAgICAsIHN1YnNldFxuXHQgICAgICApO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIGlzU3Vic2V0T2Yob2JqLCBzdWJzZXQsIGNtcCkgJiYgaXNTdWJzZXRPZihzdWJzZXQsIG9iaiwgY21wKVxuXHQgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSB0aGUgc2FtZSBtZW1iZXJzIGFzICN7YWN0fSdcblx0ICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIHRoZSBzYW1lIG1lbWJlcnMgYXMgI3thY3R9J1xuXHQgICAgICAgICwgb2JqXG5cdCAgICAgICAgLCBzdWJzZXRcblx0ICAgICk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAub25lT2YobGlzdClcblx0ICAgKlxuXHQgICAqIEFzc2VydCB0aGF0IGEgdmFsdWUgYXBwZWFycyBzb21ld2hlcmUgaW4gdGhlIHRvcCBsZXZlbCBvZiBhcnJheSBgbGlzdGAuXG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KCdhJykudG8uYmUub25lT2YoWydhJywgJ2InLCAnYyddKTtcblx0ICAgKiAgICAgZXhwZWN0KDkpLnRvLm5vdC5iZS5vbmVPZihbJ3onXSk7XG5cdCAgICogICAgIGV4cGVjdChbM10pLnRvLm5vdC5iZS5vbmVPZihbMSwgMiwgWzNdXSk7XG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRocmVlID0gWzNdO1xuXHQgICAqICAgICAvLyBmb3Igb2JqZWN0LXR5cGVzLCBjb250ZW50cyBhcmUgbm90IGNvbXBhcmVkXG5cdCAgICogICAgIGV4cGVjdCh0aHJlZSkudG8ubm90LmJlLm9uZU9mKFsxLCAyLCBbM11dKTtcblx0ICAgKiAgICAgLy8gY29tcGFyaW5nIHJlZmVyZW5jZXMgd29ya3Ncblx0ICAgKiAgICAgZXhwZWN0KHRocmVlKS50by5iZS5vbmVPZihbMSwgMiwgdGhyZWVdKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG9uZU9mXG5cdCAgICogQHBhcmFtIHtBcnJheTwqPn0gbGlzdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG9uZU9mIChsaXN0LCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIGV4cGVjdGVkID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGxpc3QpLnRvLmJlLmFuKCdhcnJheScpO1xuXHRcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICAgIGxpc3QuaW5kZXhPZihleHBlY3RlZCkgPiAtMVxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIG9uZSBvZiAje2V4cH0nXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIG9uZSBvZiAje2V4cH0nXG5cdCAgICAgICwgbGlzdFxuXHQgICAgICAsIGV4cGVjdGVkXG5cdCAgICApO1xuXHQgIH1cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnb25lT2YnLCBvbmVPZik7XG5cdFxuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmNoYW5nZShmdW5jdGlvbilcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGNoYW5nZXMgYW4gb2JqZWN0IHByb3BlcnR5XG5cdCAgICpcblx0ICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuXHQgICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCArPSAzIH07XG5cdCAgICogICAgIHZhciBub0NoYW5nZUZuID0gZnVuY3Rpb24oKSB7IHJldHVybiAnZm9vJyArICdiYXInOyB9XG5cdCAgICogICAgIGV4cGVjdChmbikudG8uY2hhbmdlKG9iaiwgJ3ZhbCcpO1xuXHQgICAqICAgICBleHBlY3Qobm9DaGFuZ2VGbikudG8ubm90LmNoYW5nZShvYmosICd2YWwnKVxuXHQgICAqXG5cdCAgICogQG5hbWUgY2hhbmdlXG5cdCAgICogQGFsaWFzIGNoYW5nZXNcblx0ICAgKiBAYWxpYXMgQ2hhbmdlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXNzZXJ0Q2hhbmdlcyAob2JqZWN0LCBwcm9wLCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIGZuID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iamVjdCwgbXNnKS50by5oYXZlLnByb3BlcnR5KHByb3ApO1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikuaXMuYSgnZnVuY3Rpb24nKTtcblx0XG5cdCAgICB2YXIgaW5pdGlhbCA9IG9iamVjdFtwcm9wXTtcblx0ICAgIGZuKCk7XG5cdFxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgIGluaXRpYWwgIT09IG9iamVjdFtwcm9wXVxuXHQgICAgICAsICdleHBlY3RlZCAuJyArIHByb3AgKyAnIHRvIGNoYW5nZSdcblx0ICAgICAgLCAnZXhwZWN0ZWQgLicgKyBwcm9wICsgJyB0byBub3QgY2hhbmdlJ1xuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2NoYW5nZScsIGFzc2VydENoYW5nZXMpO1xuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2NoYW5nZXMnLCBhc3NlcnRDaGFuZ2VzKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pbmNyZWFzZShmdW5jdGlvbilcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGluY3JlYXNlcyBhbiBvYmplY3QgcHJvcGVydHlcblx0ICAgKlxuXHQgICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG5cdCAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBvYmoudmFsID0gMTUgfTtcblx0ICAgKiAgICAgZXhwZWN0KGZuKS50by5pbmNyZWFzZShvYmosICd2YWwnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGluY3JlYXNlXG5cdCAgICogQGFsaWFzIGluY3JlYXNlc1xuXHQgICAqIEBhbGlhcyBJbmNyZWFzZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEJERFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFzc2VydEluY3JlYXNlcyAob2JqZWN0LCBwcm9wLCBtc2cpIHtcblx0ICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgdmFyIGZuID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iamVjdCwgbXNnKS50by5oYXZlLnByb3BlcnR5KHByb3ApO1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikuaXMuYSgnZnVuY3Rpb24nKTtcblx0XG5cdCAgICB2YXIgaW5pdGlhbCA9IG9iamVjdFtwcm9wXTtcblx0ICAgIGZuKCk7XG5cdFxuXHQgICAgdGhpcy5hc3NlcnQoXG5cdCAgICAgIG9iamVjdFtwcm9wXSAtIGluaXRpYWwgPiAwXG5cdCAgICAgICwgJ2V4cGVjdGVkIC4nICsgcHJvcCArICcgdG8gaW5jcmVhc2UnXG5cdCAgICAgICwgJ2V4cGVjdGVkIC4nICsgcHJvcCArICcgdG8gbm90IGluY3JlYXNlJ1xuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2luY3JlYXNlJywgYXNzZXJ0SW5jcmVhc2VzKTtcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdpbmNyZWFzZXMnLCBhc3NlcnRJbmNyZWFzZXMpO1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmRlY3JlYXNlKGZ1bmN0aW9uKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZGVjcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuXHQgICAqXG5cdCAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcblx0ICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSA1IH07XG5cdCAgICogICAgIGV4cGVjdChmbikudG8uZGVjcmVhc2Uob2JqLCAndmFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWNyZWFzZVxuXHQgICAqIEBhbGlhcyBkZWNyZWFzZXNcblx0ICAgKiBAYWxpYXMgRGVjcmVhc2Vcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5hbWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhc3NlcnREZWNyZWFzZXMgKG9iamVjdCwgcHJvcCwgbXNnKSB7XG5cdCAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcblx0ICAgIHZhciBmbiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmplY3QsIG1zZykudG8uaGF2ZS5wcm9wZXJ0eShwcm9wKTtcblx0ICAgIG5ldyBBc3NlcnRpb24oZm4pLmlzLmEoJ2Z1bmN0aW9uJyk7XG5cdFxuXHQgICAgdmFyIGluaXRpYWwgPSBvYmplY3RbcHJvcF07XG5cdCAgICBmbigpO1xuXHRcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICBvYmplY3RbcHJvcF0gLSBpbml0aWFsIDwgMFxuXHQgICAgICAsICdleHBlY3RlZCAuJyArIHByb3AgKyAnIHRvIGRlY3JlYXNlJ1xuXHQgICAgICAsICdleHBlY3RlZCAuJyArIHByb3AgKyAnIHRvIG5vdCBkZWNyZWFzZSdcblx0ICAgICk7XG5cdCAgfVxuXHRcblx0ICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdkZWNyZWFzZScsIGFzc2VydERlY3JlYXNlcyk7XG5cdCAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnZGVjcmVhc2VzJywgYXNzZXJ0RGVjcmVhc2VzKTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5leHRlbnNpYmxlXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBleHRlbnNpYmxlIChjYW4gaGF2ZSBuZXcgcHJvcGVydGllcyBhZGRlZCB0b1xuXHQgICAqIGl0KS5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgbm9uRXh0ZW5zaWJsZU9iamVjdCA9IE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSk7XG5cdCAgICogICAgIHZhciBzZWFsZWRPYmplY3QgPSBPYmplY3Quc2VhbCh7fSk7XG5cdCAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXplKHt9KTtcblx0ICAgKlxuXHQgICAqICAgICBleHBlY3Qoe30pLnRvLmJlLmV4dGVuc2libGU7XG5cdCAgICogICAgIGV4cGVjdChub25FeHRlbnNpYmxlT2JqZWN0KS50by5ub3QuYmUuZXh0ZW5zaWJsZTtcblx0ICAgKiAgICAgZXhwZWN0KHNlYWxlZE9iamVjdCkudG8ubm90LmJlLmV4dGVuc2libGU7XG5cdCAgICogICAgIGV4cGVjdChmcm96ZW5PYmplY3QpLnRvLm5vdC5iZS5leHRlbnNpYmxlO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZXh0ZW5zaWJsZVxuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdleHRlbnNpYmxlJywgZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cdFxuXHQgICAgLy8gSW4gRVM1LCBpZiB0aGUgYXJndW1lbnQgdG8gdGhpcyBtZXRob2QgaXMgbm90IGFuIG9iamVjdCAoYSBwcmltaXRpdmUpLCB0aGVuIGl0IHdpbGwgY2F1c2UgYSBUeXBlRXJyb3IuXG5cdCAgICAvLyBJbiBFUzYsIGEgbm9uLW9iamVjdCBhcmd1bWVudCB3aWxsIGJlIHRyZWF0ZWQgYXMgaWYgaXQgd2FzIGEgbm9uLWV4dGVuc2libGUgb3JkaW5hcnkgb2JqZWN0LCBzaW1wbHkgcmV0dXJuIGZhbHNlLlxuXHQgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzRXh0ZW5zaWJsZVxuXHQgICAgLy8gVGhlIGZvbGxvd2luZyBwcm92aWRlcyBFUzYgYmVoYXZpb3Igd2hlbiBhIFR5cGVFcnJvciBpcyB0aHJvd24gdW5kZXIgRVM1LlxuXHRcblx0ICAgIHZhciBpc0V4dGVuc2libGU7XG5cdFxuXHQgICAgdHJ5IHtcblx0ICAgICAgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZShvYmopO1xuXHQgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBUeXBlRXJyb3IpIGlzRXh0ZW5zaWJsZSA9IGZhbHNlO1xuXHQgICAgICBlbHNlIHRocm93IGVycjtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgaXNFeHRlbnNpYmxlXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgZXh0ZW5zaWJsZSdcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgYmUgZXh0ZW5zaWJsZSdcblx0ICAgICk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuc2VhbGVkXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBzZWFsZWQgKGNhbm5vdCBoYXZlIG5ldyBwcm9wZXJ0aWVzIGFkZGVkIHRvIGl0XG5cdCAgICogYW5kIGl0cyBleGlzdGluZyBwcm9wZXJ0aWVzIGNhbm5vdCBiZSByZW1vdmVkKS5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgc2VhbGVkT2JqZWN0ID0gT2JqZWN0LnNlYWwoe30pO1xuXHQgICAqICAgICB2YXIgZnJvemVuT2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG5cdCAgICpcblx0ICAgKiAgICAgZXhwZWN0KHNlYWxlZE9iamVjdCkudG8uYmUuc2VhbGVkO1xuXHQgICAqICAgICBleHBlY3QoZnJvemVuT2JqZWN0KS50by5iZS5zZWFsZWQ7XG5cdCAgICogICAgIGV4cGVjdCh7fSkudG8ubm90LmJlLnNlYWxlZDtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHNlYWxlZFxuXHQgICAqIEBuYW1lc3BhY2UgQkREXG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdzZWFsZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblx0XG5cdCAgICAvLyBJbiBFUzUsIGlmIHRoZSBhcmd1bWVudCB0byB0aGlzIG1ldGhvZCBpcyBub3QgYW4gb2JqZWN0IChhIHByaW1pdGl2ZSksIHRoZW4gaXQgd2lsbCBjYXVzZSBhIFR5cGVFcnJvci5cblx0ICAgIC8vIEluIEVTNiwgYSBub24tb2JqZWN0IGFyZ3VtZW50IHdpbGwgYmUgdHJlYXRlZCBhcyBpZiBpdCB3YXMgYSBzZWFsZWQgb3JkaW5hcnkgb2JqZWN0LCBzaW1wbHkgcmV0dXJuIHRydWUuXG5cdCAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzU2VhbGVkXG5cdCAgICAvLyBUaGUgZm9sbG93aW5nIHByb3ZpZGVzIEVTNiBiZWhhdmlvciB3aGVuIGEgVHlwZUVycm9yIGlzIHRocm93biB1bmRlciBFUzUuXG5cdFxuXHQgICAgdmFyIGlzU2VhbGVkO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIGlzU2VhbGVkID0gT2JqZWN0LmlzU2VhbGVkKG9iaik7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikgaXNTZWFsZWQgPSB0cnVlO1xuXHQgICAgICBlbHNlIHRocm93IGVycjtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmFzc2VydChcblx0ICAgICAgaXNTZWFsZWRcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBzZWFsZWQnXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIHNlYWxlZCdcblx0ICAgICk7XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuZnJvemVuXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBmcm96ZW4gKGNhbm5vdCBoYXZlIG5ldyBwcm9wZXJ0aWVzIGFkZGVkIHRvIGl0XG5cdCAgICogYW5kIGl0cyBleGlzdGluZyBwcm9wZXJ0aWVzIGNhbm5vdCBiZSBtb2RpZmllZCkuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIGZyb3plbk9iamVjdCA9IE9iamVjdC5mcmVlemUoe30pO1xuXHQgICAqXG5cdCAgICogICAgIGV4cGVjdChmcm96ZW5PYmplY3QpLnRvLmJlLmZyb3plbjtcblx0ICAgKiAgICAgZXhwZWN0KHt9KS50by5ub3QuYmUuZnJvemVuO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZnJvemVuXG5cdCAgICogQG5hbWVzcGFjZSBCRERcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2Zyb3plbicsIGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuXHRcblx0ICAgIC8vIEluIEVTNSwgaWYgdGhlIGFyZ3VtZW50IHRvIHRoaXMgbWV0aG9kIGlzIG5vdCBhbiBvYmplY3QgKGEgcHJpbWl0aXZlKSwgdGhlbiBpdCB3aWxsIGNhdXNlIGEgVHlwZUVycm9yLlxuXHQgICAgLy8gSW4gRVM2LCBhIG5vbi1vYmplY3QgYXJndW1lbnQgd2lsbCBiZSB0cmVhdGVkIGFzIGlmIGl0IHdhcyBhIGZyb3plbiBvcmRpbmFyeSBvYmplY3QsIHNpbXBseSByZXR1cm4gdHJ1ZS5cblx0ICAgIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNGcm96ZW5cblx0ICAgIC8vIFRoZSBmb2xsb3dpbmcgcHJvdmlkZXMgRVM2IGJlaGF2aW9yIHdoZW4gYSBUeXBlRXJyb3IgaXMgdGhyb3duIHVuZGVyIEVTNS5cblx0XG5cdCAgICB2YXIgaXNGcm96ZW47XG5cdFxuXHQgICAgdHJ5IHtcblx0ICAgICAgaXNGcm96ZW4gPSBPYmplY3QuaXNGcm96ZW4ob2JqKTtcblx0ICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgVHlwZUVycm9yKSBpc0Zyb3plbiA9IHRydWU7XG5cdCAgICAgIGVsc2UgdGhyb3cgZXJyO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuYXNzZXJ0KFxuXHQgICAgICBpc0Zyb3plblxuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGZyb3plbidcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgYmUgZnJvemVuJ1xuXHQgICAgKTtcblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogOTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBjaGFpXG5cdCAqIENvcHlyaWdodChjKSAyMDExLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNoYWksIHV0aWwpIHtcblx0ICBjaGFpLmV4cGVjdCA9IGZ1bmN0aW9uICh2YWwsIG1lc3NhZ2UpIHtcblx0ICAgIHJldHVybiBuZXcgY2hhaS5Bc3NlcnRpb24odmFsLCBtZXNzYWdlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmZhaWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdLCBbb3BlcmF0b3JdKVxuXHQgICAqXG5cdCAgICogVGhyb3cgYSBmYWlsdXJlLlxuXHQgICAqXG5cdCAgICogQG5hbWUgZmFpbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gb3BlcmF0b3Jcblx0ICAgKiBAbmFtZXNwYWNlIEV4cGVjdFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGNoYWkuZXhwZWN0LmZhaWwgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgb3BlcmF0b3IpIHtcblx0ICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdleHBlY3QuZmFpbCgpJztcblx0ICAgIHRocm93IG5ldyBjaGFpLkFzc2VydGlvbkVycm9yKG1lc3NhZ2UsIHtcblx0ICAgICAgICBhY3R1YWw6IGFjdHVhbFxuXHQgICAgICAsIGV4cGVjdGVkOiBleHBlY3RlZFxuXHQgICAgICAsIG9wZXJhdG9yOiBvcGVyYXRvclxuXHQgICAgfSwgY2hhaS5leHBlY3QuZmFpbCk7XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogY2hhaVxuXHQgKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuXHQgKiBNSVQgTGljZW5zZWRcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjaGFpLCB1dGlsKSB7XG5cdCAgdmFyIEFzc2VydGlvbiA9IGNoYWkuQXNzZXJ0aW9uO1xuXHRcblx0ICBmdW5jdGlvbiBsb2FkU2hvdWxkICgpIHtcblx0ICAgIC8vIGV4cGxpY2l0bHkgZGVmaW5lIHRoaXMgbWV0aG9kIGFzIGZ1bmN0aW9uIGFzIHRvIGhhdmUgaXQncyBuYW1lIHRvIGluY2x1ZGUgYXMgYHNzZmlgXG5cdCAgICBmdW5jdGlvbiBzaG91bGRHZXR0ZXIoKSB7XG5cdCAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgU3RyaW5nIHx8IHRoaXMgaW5zdGFuY2VvZiBOdW1iZXIgfHwgdGhpcyBpbnN0YW5jZW9mIEJvb2xlYW4gKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBBc3NlcnRpb24odGhpcy52YWx1ZU9mKCksIG51bGwsIHNob3VsZEdldHRlcik7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG5ldyBBc3NlcnRpb24odGhpcywgbnVsbCwgc2hvdWxkR2V0dGVyKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHNob3VsZFNldHRlcih2YWx1ZSkge1xuXHQgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2NoYWlqcy9jaGFpL2lzc3Vlcy84NjogdGhpcyBtYWtlc1xuXHQgICAgICAvLyBgd2hhdGV2ZXIuc2hvdWxkID0gc29tZVZhbHVlYCBhY3R1YWxseSBzZXQgYHNvbWVWYWx1ZWAsIHdoaWNoIGlzXG5cdCAgICAgIC8vIGVzcGVjaWFsbHkgdXNlZnVsIGZvciBgZ2xvYmFsLnNob3VsZCA9IHJlcXVpcmUoJ2NoYWknKS5zaG91bGQoKWAuXG5cdCAgICAgIC8vXG5cdCAgICAgIC8vIE5vdGUgdGhhdCB3ZSBoYXZlIHRvIHVzZSBbW0RlZmluZVByb3BlcnR5XV0gaW5zdGVhZCBvZiBbW1B1dF1dXG5cdCAgICAgIC8vIHNpbmNlIG90aGVyd2lzZSB3ZSB3b3VsZCB0cmlnZ2VyIHRoaXMgdmVyeSBzZXR0ZXIhXG5cdCAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnc2hvdWxkJywge1xuXHQgICAgICAgIHZhbHVlOiB2YWx1ZSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgICAgICB3cml0YWJsZTogdHJ1ZVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIC8vIG1vZGlmeSBPYmplY3QucHJvdG90eXBlIHRvIGhhdmUgYHNob3VsZGBcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QucHJvdG90eXBlLCAnc2hvdWxkJywge1xuXHQgICAgICBzZXQ6IHNob3VsZFNldHRlclxuXHQgICAgICAsIGdldDogc2hvdWxkR2V0dGVyXG5cdCAgICAgICwgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgc2hvdWxkID0ge307XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiAjIyMgLmZhaWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdLCBbb3BlcmF0b3JdKVxuXHQgICAgICpcblx0ICAgICAqIFRocm93IGEgZmFpbHVyZS5cblx0ICAgICAqXG5cdCAgICAgKiBAbmFtZSBmYWlsXG5cdCAgICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcblx0ICAgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IG9wZXJhdG9yXG5cdCAgICAgKiBAbmFtZXNwYWNlIFNob3VsZFxuXHQgICAgICogQGFwaSBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICAgIHNob3VsZC5mYWlsID0gZnVuY3Rpb24gKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yKSB7XG5cdCAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdzaG91bGQuZmFpbCgpJztcblx0ICAgICAgdGhyb3cgbmV3IGNoYWkuQXNzZXJ0aW9uRXJyb3IobWVzc2FnZSwge1xuXHQgICAgICAgICAgYWN0dWFsOiBhY3R1YWxcblx0ICAgICAgICAsIGV4cGVjdGVkOiBleHBlY3RlZFxuXHQgICAgICAgICwgb3BlcmF0b3I6IG9wZXJhdG9yXG5cdCAgICAgIH0sIHNob3VsZC5mYWlsKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiAjIyMgLmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcblx0ICAgICAqXG5cdCAgICAgKiBBc3NlcnRzIG5vbi1zdHJpY3QgZXF1YWxpdHkgKGA9PWApIG9mIGBhY3R1YWxgIGFuZCBgZXhwZWN0ZWRgLlxuXHQgICAgICpcblx0ICAgICAqICAgICBzaG91bGQuZXF1YWwoMywgJzMnLCAnPT0gY29lcmNlcyB2YWx1ZXMgdG8gc3RyaW5ncycpO1xuXHQgICAgICpcblx0ICAgICAqIEBuYW1lIGVxdWFsXG5cdCAgICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcblx0ICAgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAgICogQG5hbWVzcGFjZSBTaG91bGRcblx0ICAgICAqIEBhcGkgcHVibGljXG5cdCAgICAgKi9cblx0XG5cdCAgICBzaG91bGQuZXF1YWwgPSBmdW5jdGlvbiAodmFsMSwgdmFsMiwgbXNnKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24odmFsMSwgbXNnKS50by5lcXVhbCh2YWwyKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiAjIyMgLnRocm93KGZ1bmN0aW9uLCBbY29uc3RydWN0b3Ivc3RyaW5nL3JlZ2V4cF0sIFtzdHJpbmcvcmVnZXhwXSwgW21lc3NhZ2VdKVxuXHQgICAgICpcblx0ICAgICAqIEFzc2VydHMgdGhhdCBgZnVuY3Rpb25gIHdpbGwgdGhyb3cgYW4gZXJyb3IgdGhhdCBpcyBhbiBpbnN0YW5jZSBvZlxuXHQgICAgICogYGNvbnN0cnVjdG9yYCwgb3IgYWx0ZXJuYXRlbHkgdGhhdCBpdCB3aWxsIHRocm93IGFuIGVycm9yIHdpdGggbWVzc2FnZVxuXHQgICAgICogbWF0Y2hpbmcgYHJlZ2V4cGAuXG5cdCAgICAgKlxuXHQgICAgICogICAgIHNob3VsZC50aHJvdyhmbiwgJ2Z1bmN0aW9uIHRocm93cyBhIHJlZmVyZW5jZSBlcnJvcicpO1xuXHQgICAgICogICAgIHNob3VsZC50aHJvdyhmbiwgL2Z1bmN0aW9uIHRocm93cyBhIHJlZmVyZW5jZSBlcnJvci8pO1xuXHQgICAgICogICAgIHNob3VsZC50aHJvdyhmbiwgUmVmZXJlbmNlRXJyb3IpO1xuXHQgICAgICogICAgIHNob3VsZC50aHJvdyhmbiwgUmVmZXJlbmNlRXJyb3IsICdmdW5jdGlvbiB0aHJvd3MgYSByZWZlcmVuY2UgZXJyb3InKTtcblx0ICAgICAqICAgICBzaG91bGQudGhyb3coZm4sIFJlZmVyZW5jZUVycm9yLCAvZnVuY3Rpb24gdGhyb3dzIGEgcmVmZXJlbmNlIGVycm9yLyk7XG5cdCAgICAgKlxuXHQgICAgICogQG5hbWUgdGhyb3dcblx0ICAgICAqIEBhbGlhcyBUaHJvd1xuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb25cblx0ICAgICAqIEBwYXJhbSB7RXJyb3JDb25zdHJ1Y3Rvcn0gY29uc3RydWN0b3Jcblx0ICAgICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0Vycm9yX3R5cGVzXG5cdCAgICAgKiBAbmFtZXNwYWNlIFNob3VsZFxuXHQgICAgICogQGFwaSBwdWJsaWNcblx0ICAgICAqL1xuXHRcblx0ICAgIHNob3VsZC5UaHJvdyA9IGZ1bmN0aW9uIChmbiwgZXJydCwgZXJycywgbXNnKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24oZm4sIG1zZykudG8uVGhyb3coZXJydCwgZXJycyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogIyMjIC5leGlzdFxuXHQgICAgICpcblx0ICAgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIG5laXRoZXIgYG51bGxgIG5vciBgdW5kZWZpbmVkYC5cblx0ICAgICAqXG5cdCAgICAgKiAgICAgdmFyIGZvbyA9ICdoaSc7XG5cdCAgICAgKlxuXHQgICAgICogICAgIHNob3VsZC5leGlzdChmb28sICdmb28gZXhpc3RzJyk7XG5cdCAgICAgKlxuXHQgICAgICogQG5hbWUgZXhpc3Rcblx0ICAgICAqIEBuYW1lc3BhY2UgU2hvdWxkXG5cdCAgICAgKiBAYXBpIHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgICAgc2hvdWxkLmV4aXN0ID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmV4aXN0O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIG5lZ2F0aW9uXG5cdCAgICBzaG91bGQubm90ID0ge31cblx0XG5cdCAgICAvKipcblx0ICAgICAqICMjIyAubm90LmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcblx0ICAgICAqXG5cdCAgICAgKiBBc3NlcnRzIG5vbi1zdHJpY3QgaW5lcXVhbGl0eSAoYCE9YCkgb2YgYGFjdHVhbGAgYW5kIGBleHBlY3RlZGAuXG5cdCAgICAgKlxuXHQgICAgICogICAgIHNob3VsZC5ub3QuZXF1YWwoMywgNCwgJ3RoZXNlIG51bWJlcnMgYXJlIG5vdCBlcXVhbCcpO1xuXHQgICAgICpcblx0ICAgICAqIEBuYW1lIG5vdC5lcXVhbFxuXHQgICAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG5cdCAgICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgICAqIEBuYW1lc3BhY2UgU2hvdWxkXG5cdCAgICAgKiBAYXBpIHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgICAgc2hvdWxkLm5vdC5lcXVhbCA9IGZ1bmN0aW9uICh2YWwxLCB2YWwyLCBtc2cpIHtcblx0ICAgICAgbmV3IEFzc2VydGlvbih2YWwxLCBtc2cpLnRvLm5vdC5lcXVhbCh2YWwyKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiAjIyMgLnRocm93KGZ1bmN0aW9uLCBbY29uc3RydWN0b3IvcmVnZXhwXSwgW21lc3NhZ2VdKVxuXHQgICAgICpcblx0ICAgICAqIEFzc2VydHMgdGhhdCBgZnVuY3Rpb25gIHdpbGwgX25vdF8gdGhyb3cgYW4gZXJyb3IgdGhhdCBpcyBhbiBpbnN0YW5jZSBvZlxuXHQgICAgICogYGNvbnN0cnVjdG9yYCwgb3IgYWx0ZXJuYXRlbHkgdGhhdCBpdCB3aWxsIG5vdCB0aHJvdyBhbiBlcnJvciB3aXRoIG1lc3NhZ2Vcblx0ICAgICAqIG1hdGNoaW5nIGByZWdleHBgLlxuXHQgICAgICpcblx0ICAgICAqICAgICBzaG91bGQubm90LnRocm93KGZuLCBFcnJvciwgJ2Z1bmN0aW9uIGRvZXMgbm90IHRocm93Jyk7XG5cdCAgICAgKlxuXHQgICAgICogQG5hbWUgbm90LnRocm93XG5cdCAgICAgKiBAYWxpYXMgbm90LlRocm93XG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvblxuXHQgICAgICogQHBhcmFtIHtFcnJvckNvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuXHQgICAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ2V4cFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjRXJyb3JfdHlwZXNcblx0ICAgICAqIEBuYW1lc3BhY2UgU2hvdWxkXG5cdCAgICAgKiBAYXBpIHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgICAgc2hvdWxkLm5vdC5UaHJvdyA9IGZ1bmN0aW9uIChmbiwgZXJydCwgZXJycywgbXNnKSB7XG5cdCAgICAgIG5ldyBBc3NlcnRpb24oZm4sIG1zZykudG8ubm90LlRocm93KGVycnQsIGVycnMpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqICMjIyAubm90LmV4aXN0XG5cdCAgICAgKlxuXHQgICAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgbmVpdGhlciBgbnVsbGAgbm9yIGB1bmRlZmluZWRgLlxuXHQgICAgICpcblx0ICAgICAqICAgICB2YXIgYmFyID0gbnVsbDtcblx0ICAgICAqXG5cdCAgICAgKiAgICAgc2hvdWxkLm5vdC5leGlzdChiYXIsICdiYXIgZG9lcyBub3QgZXhpc3QnKTtcblx0ICAgICAqXG5cdCAgICAgKiBAbmFtZSBub3QuZXhpc3Rcblx0ICAgICAqIEBuYW1lc3BhY2UgU2hvdWxkXG5cdCAgICAgKiBAYXBpIHB1YmxpY1xuXHQgICAgICovXG5cdFxuXHQgICAgc2hvdWxkLm5vdC5leGlzdCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuZXhpc3Q7XG5cdCAgICB9XG5cdFxuXHQgICAgc2hvdWxkWyd0aHJvdyddID0gc2hvdWxkWydUaHJvdyddO1xuXHQgICAgc2hvdWxkLm5vdFsndGhyb3cnXSA9IHNob3VsZC5ub3RbJ1Rocm93J107XG5cdFxuXHQgICAgcmV0dXJuIHNob3VsZDtcblx0ICB9O1xuXHRcblx0ICBjaGFpLnNob3VsZCA9IGxvYWRTaG91bGQ7XG5cdCAgY2hhaS5TaG91bGQgPSBsb2FkU2hvdWxkO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxMDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIVxuXHQgKiBjaGFpXG5cdCAqIENvcHlyaWdodChjKSAyMDExLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG5cdCAqIE1JVCBMaWNlbnNlZFxuXHQgKi9cblx0XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjaGFpLCB1dGlsKSB7XG5cdFxuXHQgIC8qIVxuXHQgICAqIENoYWkgZGVwZW5kZW5jaWVzLlxuXHQgICAqL1xuXHRcblx0ICB2YXIgQXNzZXJ0aW9uID0gY2hhaS5Bc3NlcnRpb25cblx0ICAgICwgZmxhZyA9IHV0aWwuZmxhZztcblx0XG5cdCAgLyohXG5cdCAgICogTW9kdWxlIGV4cG9ydC5cblx0ICAgKi9cblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIGFzc2VydChleHByZXNzaW9uLCBtZXNzYWdlKVxuXHQgICAqXG5cdCAgICogV3JpdGUgeW91ciBvd24gdGVzdCBleHByZXNzaW9ucy5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQoJ2ZvbycgIT09ICdiYXInLCAnZm9vIGlzIG5vdCBiYXInKTtcblx0ICAgKiAgICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkoW10pLCAnZW1wdHkgYXJyYXlzIGFyZSBhcnJheXMnKTtcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cHJlc3Npb24gdG8gdGVzdCBmb3IgdHJ1dGhpbmVzc1xuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIHRvIGRpc3BsYXkgb24gZXJyb3Jcblx0ICAgKiBAbmFtZSBhc3NlcnRcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIHZhciBhc3NlcnQgPSBjaGFpLmFzc2VydCA9IGZ1bmN0aW9uIChleHByZXNzLCBlcnJtc2cpIHtcblx0ICAgIHZhciB0ZXN0ID0gbmV3IEFzc2VydGlvbihudWxsLCBudWxsLCBjaGFpLmFzc2VydCk7XG5cdCAgICB0ZXN0LmFzc2VydChcblx0ICAgICAgICBleHByZXNzXG5cdCAgICAgICwgZXJybXNnXG5cdCAgICAgICwgJ1sgbmVnYXRpb24gbWVzc2FnZSB1bmF2YWlsYWJsZSBdJ1xuXHQgICAgKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmZhaWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdLCBbb3BlcmF0b3JdKVxuXHQgICAqXG5cdCAgICogVGhyb3cgYSBmYWlsdXJlLiBOb2RlLmpzIGBhc3NlcnRgIG1vZHVsZS1jb21wYXRpYmxlLlxuXHQgICAqXG5cdCAgICogQG5hbWUgZmFpbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gb3BlcmF0b3Jcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5mYWlsID0gZnVuY3Rpb24gKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yKSB7XG5cdCAgICBtZXNzYWdlID0gbWVzc2FnZSB8fCAnYXNzZXJ0LmZhaWwoKSc7XG5cdCAgICB0aHJvdyBuZXcgY2hhaS5Bc3NlcnRpb25FcnJvcihtZXNzYWdlLCB7XG5cdCAgICAgICAgYWN0dWFsOiBhY3R1YWxcblx0ICAgICAgLCBleHBlY3RlZDogZXhwZWN0ZWRcblx0ICAgICAgLCBvcGVyYXRvcjogb3BlcmF0b3Jcblx0ICAgIH0sIGFzc2VydC5mYWlsKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzT2sob2JqZWN0LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgdHJ1dGh5LlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc09rKCdldmVyeXRoaW5nJywgJ2V2ZXJ5dGhpbmcgaXMgb2snKTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzT2soZmFsc2UsICd0aGlzIHdpbGwgZmFpbCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNPa1xuXHQgICAqIEBhbGlhcyBva1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdCB0byB0ZXN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc09rID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS5pcy5vaztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzTm90T2sob2JqZWN0LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgZmFsc3kuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzTm90T2soJ2V2ZXJ5dGhpbmcnLCAndGhpcyB3aWxsIGZhaWwnKTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzTm90T2soZmFsc2UsICd0aGlzIHdpbGwgcGFzcycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3RPa1xuXHQgICAqIEBhbGlhcyBub3RPa1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdCB0byB0ZXN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05vdE9rID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS5pcy5ub3Qub2s7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIG5vbi1zdHJpY3QgZXF1YWxpdHkgKGA9PWApIG9mIGBhY3R1YWxgIGFuZCBgZXhwZWN0ZWRgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5lcXVhbCgzLCAnMycsICc9PSBjb2VyY2VzIHZhbHVlcyB0byBzdHJpbmdzJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBlcXVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIChhY3QsIGV4cCwgbXNnKSB7XG5cdCAgICB2YXIgdGVzdCA9IG5ldyBBc3NlcnRpb24oYWN0LCBtc2csIGFzc2VydC5lcXVhbCk7XG5cdFxuXHQgICAgdGVzdC5hc3NlcnQoXG5cdCAgICAgICAgZXhwID09IGZsYWcodGVzdCwgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gZXF1YWwgI3tleHB9J1xuXHQgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBlcXVhbCAje2FjdH0nXG5cdCAgICAgICwgZXhwXG5cdCAgICAgICwgYWN0XG5cdCAgICApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyBub24tc3RyaWN0IGluZXF1YWxpdHkgKGAhPWApIG9mIGBhY3R1YWxgIGFuZCBgZXhwZWN0ZWRgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5ub3RFcXVhbCgzLCA0LCAndGhlc2UgbnVtYmVycyBhcmUgbm90IGVxdWFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBub3RFcXVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5ub3RFcXVhbCA9IGZ1bmN0aW9uIChhY3QsIGV4cCwgbXNnKSB7XG5cdCAgICB2YXIgdGVzdCA9IG5ldyBBc3NlcnRpb24oYWN0LCBtc2csIGFzc2VydC5ub3RFcXVhbCk7XG5cdFxuXHQgICAgdGVzdC5hc3NlcnQoXG5cdCAgICAgICAgZXhwICE9IGZsYWcodGVzdCwgJ29iamVjdCcpXG5cdCAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGVxdWFsICN7ZXhwfSdcblx0ICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBlcXVhbCAje2FjdH0nXG5cdCAgICAgICwgZXhwXG5cdCAgICAgICwgYWN0XG5cdCAgICApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuc3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyBzdHJpY3QgZXF1YWxpdHkgKGA9PT1gKSBvZiBgYWN0dWFsYCBhbmQgYGV4cGVjdGVkYC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgdHJ1ZSwgJ3RoZXNlIGJvb2xlYW5zIGFyZSBzdHJpY3RseSBlcXVhbCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgc3RyaWN0RXF1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuc3RyaWN0RXF1YWwgPSBmdW5jdGlvbiAoYWN0LCBleHAsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8uZXF1YWwoZXhwKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgc3RyaWN0IGluZXF1YWxpdHkgKGAhPT1gKSBvZiBgYWN0dWFsYCBhbmQgYGV4cGVjdGVkYC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQubm90U3RyaWN0RXF1YWwoMywgJzMnLCAnbm8gY29lcmNpb24gZm9yIHN0cmljdCBlcXVhbGl0eScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbm90U3RyaWN0RXF1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQubm90U3RyaWN0RXF1YWwgPSBmdW5jdGlvbiAoYWN0LCBleHAsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8ubm90LmVxdWFsKGV4cCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBhY3R1YWxgIGlzIGRlZXBseSBlcXVhbCB0byBgZXhwZWN0ZWRgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5kZWVwRXF1YWwoeyB0ZWE6ICdncmVlbicgfSwgeyB0ZWE6ICdncmVlbicgfSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWVwRXF1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuZGVlcEVxdWFsID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oYWN0LCBtc2cpLnRvLmVxbChleHApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydCB0aGF0IGBhY3R1YWxgIGlzIG5vdCBkZWVwbHkgZXF1YWwgdG8gYGV4cGVjdGVkYC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQubm90RGVlcEVxdWFsKHsgdGVhOiAnZ3JlZW4nIH0sIHsgdGVhOiAnamFzbWluZScgfSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBub3REZWVwRXF1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcblx0ICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oYWN0LCBtc2cpLnRvLm5vdC5lcWwoZXhwKTtcblx0ICB9O1xuXHRcblx0ICAgLyoqXG5cdCAgICogIyMjIC5pc0Fib3ZlKHZhbHVlVG9DaGVjaywgdmFsdWVUb0JlQWJvdmUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgYHZhbHVlVG9DaGVja2AgaXMgc3RyaWN0bHkgZ3JlYXRlciB0aGFuICg+KSBgdmFsdWVUb0JlQWJvdmVgXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzQWJvdmUoNSwgMiwgJzUgaXMgc3RyaWN0bHkgZ3JlYXRlciB0aGFuIDInKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzQWJvdmVcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQ2hlY2tcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQmVBYm92ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNBYm92ZSA9IGZ1bmN0aW9uICh2YWwsIGFidiwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hYm92ZShhYnYpO1xuXHQgIH07XG5cdFxuXHQgICAvKipcblx0ICAgKiAjIyMgLmlzQXRMZWFzdCh2YWx1ZVRvQ2hlY2ssIHZhbHVlVG9CZUF0TGVhc3QsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgYHZhbHVlVG9DaGVja2AgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICg+PSkgYHZhbHVlVG9CZUF0TGVhc3RgXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzQXRMZWFzdCg1LCAyLCAnNSBpcyBncmVhdGVyIG9yIGVxdWFsIHRvIDInKTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzQXRMZWFzdCgzLCAzLCAnMyBpcyBncmVhdGVyIG9yIGVxdWFsIHRvIDMnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzQXRMZWFzdFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9DaGVja1xuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9CZUF0TGVhc3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzQXRMZWFzdCA9IGZ1bmN0aW9uICh2YWwsIGF0bHN0LCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmxlYXN0KGF0bHN0KTtcblx0ICB9O1xuXHRcblx0ICAgLyoqXG5cdCAgICogIyMjIC5pc0JlbG93KHZhbHVlVG9DaGVjaywgdmFsdWVUb0JlQmVsb3csIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgYHZhbHVlVG9DaGVja2AgaXMgc3RyaWN0bHkgbGVzcyB0aGFuICg8KSBgdmFsdWVUb0JlQmVsb3dgXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzQmVsb3coMywgNiwgJzMgaXMgc3RyaWN0bHkgbGVzcyB0aGFuIDYnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzQmVsb3dcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQ2hlY2tcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQmVCZWxvd1xuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNCZWxvdyA9IGZ1bmN0aW9uICh2YWwsIGJsdywgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5iZWxvdyhibHcpO1xuXHQgIH07XG5cdFxuXHQgICAvKipcblx0ICAgKiAjIyMgLmlzQXRNb3N0KHZhbHVlVG9DaGVjaywgdmFsdWVUb0JlQXRNb3N0LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIGB2YWx1ZVRvQ2hlY2tgIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byAoPD0pIGB2YWx1ZVRvQmVBdE1vc3RgXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzQXRNb3N0KDMsIDYsICczIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byA2Jyk7XG5cdCAgICogICAgIGFzc2VydC5pc0F0TW9zdCg0LCA0LCAnNCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gNCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNBdE1vc3Rcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQ2hlY2tcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQmVBdE1vc3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzQXRNb3N0ID0gZnVuY3Rpb24gKHZhbCwgYXRtc3QsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUubW9zdChhdG1zdCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc1RydWUodmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIHRydWUuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRlYVNlcnZlZCA9IHRydWU7XG5cdCAgICogICAgIGFzc2VydC5pc1RydWUodGVhU2VydmVkLCAndGhlIHRlYSBoYXMgYmVlbiBzZXJ2ZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzVHJ1ZVxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc1RydWUgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLmlzWyd0cnVlJ107XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdFRydWUodmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIG5vdCB0cnVlLlxuXHQgICAqXG5cdCAgICogICAgIHZhciB0ZWEgPSAndGFzdHkgY2hhaSc7XG5cdCAgICogICAgIGFzc2VydC5pc05vdFRydWUodGVhLCAnZ3JlYXQsIHRpbWUgZm9yIHRlYSEnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTm90VHJ1ZVxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05vdFRydWUgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5lcXVhbCh0cnVlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzRmFsc2UodmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGZhbHNlLlxuXHQgICAqXG5cdCAgICogICAgIHZhciB0ZWFTZXJ2ZWQgPSBmYWxzZTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzRmFsc2UodGVhU2VydmVkLCAnbm8gdGVhIHlldD8gaG1tLi4uJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc0ZhbHNlXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzRmFsc2UgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLmlzWydmYWxzZSddO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3RGYWxzZSh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgbm90IGZhbHNlLlxuXHQgICAqXG5cdCAgICogICAgIHZhciB0ZWEgPSAndGFzdHkgY2hhaSc7XG5cdCAgICogICAgIGFzc2VydC5pc05vdEZhbHNlKHRlYSwgJ2dyZWF0LCB0aW1lIGZvciB0ZWEhJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc05vdEZhbHNlXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTm90RmFsc2UgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5lcXVhbChmYWxzZSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc051bGwodmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIG51bGwuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzTnVsbChlcnIsICd0aGVyZSB3YXMgbm8gZXJyb3InKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTnVsbFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc051bGwgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmVxdWFsKG51bGwpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3ROdWxsKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBub3QgbnVsbC5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgdGVhID0gJ3Rhc3R5IGNoYWknO1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3ROdWxsKHRlYSwgJ2dyZWF0LCB0aW1lIGZvciB0ZWEhJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc05vdE51bGxcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNOb3ROdWxsID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuZXF1YWwobnVsbCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05hTlxuXHQgICAqIEFzc2VydHMgdGhhdCB2YWx1ZSBpcyBOYU5cblx0ICAgKlxuXHQgICAqICAgIGFzc2VydC5pc05hTignZm9vJywgJ2ZvbyBpcyBOYU4nKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTmFOXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTmFOID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5OYU47XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdE5hTlxuXHQgICAqIEFzc2VydHMgdGhhdCB2YWx1ZSBpcyBub3QgTmFOXG5cdCAgICpcblx0ICAgKiAgICBhc3NlcnQuaXNOb3ROYU4oNCwgJzQgaXMgbm90IE5hTicpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3ROYU5cblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHQgIGFzc2VydC5pc05vdE5hTiA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykubm90LnRvLmJlLk5hTjtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzVW5kZWZpbmVkKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBgdW5kZWZpbmVkYC5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgdGVhO1xuXHQgICAqICAgICBhc3NlcnQuaXNVbmRlZmluZWQodGVhLCAnbm8gdGVhIGRlZmluZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzVW5kZWZpbmVkXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzVW5kZWZpbmVkID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5lcXVhbCh1bmRlZmluZWQpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNEZWZpbmVkKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBub3QgYHVuZGVmaW5lZGAuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRlYSA9ICdjdXAgb2YgY2hhaSc7XG5cdCAgICogICAgIGFzc2VydC5pc0RlZmluZWQodGVhLCAndGVhIGhhcyBiZWVuIGRlZmluZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzRGVmaW5lZFxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc0RlZmluZWQgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5lcXVhbCh1bmRlZmluZWQpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNGdW5jdGlvbih2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYSBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqICAgICBmdW5jdGlvbiBzZXJ2ZVRlYSgpIHsgcmV0dXJuICdjdXAgb2YgdGVhJzsgfTtcblx0ICAgKiAgICAgYXNzZXJ0LmlzRnVuY3Rpb24oc2VydmVUZWEsICdncmVhdCwgd2UgY2FuIGhhdmUgdGVhIG5vdycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNGdW5jdGlvblxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc0Z1bmN0aW9uID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hKCdmdW5jdGlvbicpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3RGdW5jdGlvbih2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgX25vdF8gYSBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgc2VydmVUZWEgPSBbICdoZWF0JywgJ3BvdXInLCAnc2lwJyBdO1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3RGdW5jdGlvbihzZXJ2ZVRlYSwgJ2dyZWF0LCB3ZSBoYXZlIGxpc3RlZCB0aGUgc3RlcHMnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTm90RnVuY3Rpb25cblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNOb3RGdW5jdGlvbiA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmJlLmEoJ2Z1bmN0aW9uJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc09iamVjdCh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYW4gb2JqZWN0IG9mIHR5cGUgJ09iamVjdCcgKGFzIHJldmVhbGVkIGJ5IGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYCkuXG5cdCAgICogX1RoZSBhc3NlcnRpb24gZG9lcyBub3QgbWF0Y2ggc3ViY2xhc3NlZCBvYmplY3RzLl9cblx0ICAgKlxuXHQgICAqICAgICB2YXIgc2VsZWN0aW9uID0geyBuYW1lOiAnQ2hhaScsIHNlcnZlOiAnd2l0aCBzcGljZXMnIH07XG5cdCAgICogICAgIGFzc2VydC5pc09iamVjdChzZWxlY3Rpb24sICd0ZWEgc2VsZWN0aW9uIGlzIGFuIG9iamVjdCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNPYmplY3Rcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNPYmplY3QgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmEoJ29iamVjdCcpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3RPYmplY3QodmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIF9ub3RfIGFuIG9iamVjdCBvZiB0eXBlICdPYmplY3QnIChhcyByZXZlYWxlZCBieSBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2ApLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBzZWxlY3Rpb24gPSAnY2hhaSdcblx0ICAgKiAgICAgYXNzZXJ0LmlzTm90T2JqZWN0KHNlbGVjdGlvbiwgJ3RlYSBzZWxlY3Rpb24gaXMgbm90IGFuIG9iamVjdCcpO1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3RPYmplY3QobnVsbCwgJ251bGwgaXMgbm90IGFuIG9iamVjdCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3RPYmplY3Rcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNOb3RPYmplY3QgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKCdvYmplY3QnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzQXJyYXkodmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGFuIGFycmF5LlxuXHQgICAqXG5cdCAgICogICAgIHZhciBtZW51ID0gWyAnZ3JlZW4nLCAnY2hhaScsICdvb2xvbmcnIF07XG5cdCAgICogICAgIGFzc2VydC5pc0FycmF5KG1lbnUsICd3aGF0IGtpbmQgb2YgdGVhIGRvIHdlIHdhbnQ/Jyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc0FycmF5XG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzQXJyYXkgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmFuKCdhcnJheScpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3RBcnJheSh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgX25vdF8gYW4gYXJyYXkuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIG1lbnUgPSAnZ3JlZW58Y2hhaXxvb2xvbmcnO1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3RBcnJheShtZW51LCAnd2hhdCBraW5kIG9mIHRlYSBkbyB3ZSB3YW50PycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3RBcnJheVxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05vdEFycmF5ID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuYmUuYW4oJ2FycmF5Jyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc1N0cmluZyh2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYSBzdHJpbmcuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRlYU9yZGVyID0gJ2NoYWknO1xuXHQgICAqICAgICBhc3NlcnQuaXNTdHJpbmcodGVhT3JkZXIsICdvcmRlciBwbGFjZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzU3RyaW5nXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzU3RyaW5nID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hKCdzdHJpbmcnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzTm90U3RyaW5nKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhIHN0cmluZy5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgdGVhT3JkZXIgPSA0O1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3RTdHJpbmcodGVhT3JkZXIsICdvcmRlciBwbGFjZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTm90U3RyaW5nXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTm90U3RyaW5nID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuYmUuYSgnc3RyaW5nJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc051bWJlcih2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYSBudW1iZXIuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIGN1cHMgPSAyO1xuXHQgICAqICAgICBhc3NlcnQuaXNOdW1iZXIoY3VwcywgJ2hvdyBtYW55IGN1cHMnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTnVtYmVyXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc051bWJlciA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYSgnbnVtYmVyJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdE51bWJlcih2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgX25vdF8gYSBudW1iZXIuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIGN1cHMgPSAnMiBjdXBzIHBsZWFzZSc7XG5cdCAgICogICAgIGFzc2VydC5pc05vdE51bWJlcihjdXBzLCAnaG93IG1hbnkgY3VwcycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3ROdW1iZXJcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaXNOb3ROdW1iZXIgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKCdudW1iZXInKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzQm9vbGVhbih2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYSBib29sZWFuLlxuXHQgICAqXG5cdCAgICogICAgIHZhciB0ZWFSZWFkeSA9IHRydWVcblx0ICAgKiAgICAgICAsIHRlYVNlcnZlZCA9IGZhbHNlO1xuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc0Jvb2xlYW4odGVhUmVhZHksICdpcyB0aGUgdGVhIHJlYWR5Jyk7XG5cdCAgICogICAgIGFzc2VydC5pc0Jvb2xlYW4odGVhU2VydmVkLCAnaGFzIHRlYSBiZWVuIHNlcnZlZCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNCb29sZWFuXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzQm9vbGVhbiA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYSgnYm9vbGVhbicpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3RCb29sZWFuKHZhbHVlLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhIGJvb2xlYW4uXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIHRlYVJlYWR5ID0gJ3llcCdcblx0ICAgKiAgICAgICAsIHRlYVNlcnZlZCA9ICdub3BlJztcblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuaXNOb3RCb29sZWFuKHRlYVJlYWR5LCAnaXMgdGhlIHRlYSByZWFkeScpO1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3RCb29sZWFuKHRlYVNlcnZlZCwgJ2hhcyB0ZWEgYmVlbiBzZXJ2ZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTm90Qm9vbGVhblxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05vdEJvb2xlYW4gPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKCdib29sZWFuJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC50eXBlT2YodmFsdWUsIG5hbWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgJ3MgdHlwZSBpcyBgbmFtZWAsIGFzIGRldGVybWluZWQgYnlcblx0ICAgKiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LnR5cGVPZih7IHRlYTogJ2NoYWknIH0sICdvYmplY3QnLCAnd2UgaGF2ZSBhbiBvYmplY3QnKTtcblx0ICAgKiAgICAgYXNzZXJ0LnR5cGVPZihbJ2NoYWknLCAnamFzbWluZSddLCAnYXJyYXknLCAnd2UgaGF2ZSBhbiBhcnJheScpO1xuXHQgICAqICAgICBhc3NlcnQudHlwZU9mKCd0ZWEnLCAnc3RyaW5nJywgJ3dlIGhhdmUgYSBzdHJpbmcnKTtcblx0ICAgKiAgICAgYXNzZXJ0LnR5cGVPZigvdGVhLywgJ3JlZ2V4cCcsICd3ZSBoYXZlIGEgcmVndWxhciBleHByZXNzaW9uJyk7XG5cdCAgICogICAgIGFzc2VydC50eXBlT2YobnVsbCwgJ251bGwnLCAnd2UgaGF2ZSBhIG51bGwnKTtcblx0ICAgKiAgICAgYXNzZXJ0LnR5cGVPZih1bmRlZmluZWQsICd1bmRlZmluZWQnLCAnd2UgaGF2ZSBhbiB1bmRlZmluZWQnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIHR5cGVPZlxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LnR5cGVPZiA9IGZ1bmN0aW9uICh2YWwsIHR5cGUsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYSh0eXBlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm5vdFR5cGVPZih2YWx1ZSwgbmFtZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAncyB0eXBlIGlzIF9ub3RfIGBuYW1lYCwgYXMgZGV0ZXJtaW5lZCBieVxuXHQgICAqIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQubm90VHlwZU9mKCd0ZWEnLCAnbnVtYmVyJywgJ3N0cmluZ3MgYXJlIG5vdCBudW1iZXJzJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBub3RUeXBlT2Zcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlb2YgbmFtZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQubm90VHlwZU9mID0gZnVuY3Rpb24gKHZhbCwgdHlwZSwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuYmUuYSh0eXBlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmluc3RhbmNlT2Yob2JqZWN0LCBjb25zdHJ1Y3RvciwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYW4gaW5zdGFuY2Ugb2YgYGNvbnN0cnVjdG9yYC5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgVGVhID0gZnVuY3Rpb24gKG5hbWUpIHsgdGhpcy5uYW1lID0gbmFtZTsgfVxuXHQgICAqICAgICAgICwgY2hhaSA9IG5ldyBUZWEoJ2NoYWknKTtcblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuaW5zdGFuY2VPZihjaGFpLCBUZWEsICdjaGFpIGlzIGFuIGluc3RhbmNlIG9mIHRlYScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaW5zdGFuY2VPZlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge0NvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaW5zdGFuY2VPZiA9IGZ1bmN0aW9uICh2YWwsIHR5cGUsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuaW5zdGFuY2VPZih0eXBlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm5vdEluc3RhbmNlT2Yob2JqZWN0LCBjb25zdHJ1Y3RvciwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyBgdmFsdWVgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBUZWEgPSBmdW5jdGlvbiAobmFtZSkgeyB0aGlzLm5hbWUgPSBuYW1lOyB9XG5cdCAgICogICAgICAgLCBjaGFpID0gbmV3IFN0cmluZygnY2hhaScpO1xuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5ub3RJbnN0YW5jZU9mKGNoYWksIFRlYSwgJ2NoYWkgaXMgbm90IGFuIGluc3RhbmNlIG9mIHRlYScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbm90SW5zdGFuY2VPZlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge0NvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQubm90SW5zdGFuY2VPZiA9IGZ1bmN0aW9uICh2YWwsIHR5cGUsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmJlLmluc3RhbmNlT2YodHlwZSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pbmNsdWRlKGhheXN0YWNrLCBuZWVkbGUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgaGF5c3RhY2tgIGluY2x1ZGVzIGBuZWVkbGVgLiBXb3Jrc1xuXHQgICAqIGZvciBzdHJpbmdzIGFuZCBhcnJheXMuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmluY2x1ZGUoJ2Zvb2JhcicsICdiYXInLCAnZm9vYmFyIGNvbnRhaW5zIHN0cmluZyBcImJhclwiJyk7XG5cdCAgICogICAgIGFzc2VydC5pbmNsdWRlKFsgMSwgMiwgMyBdLCAzLCAnYXJyYXkgY29udGFpbnMgdmFsdWUnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGluY2x1ZGVcblx0ICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gaGF5c3RhY2tcblx0ICAgKiBAcGFyYW0ge01peGVkfSBuZWVkbGVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmluY2x1ZGUgPSBmdW5jdGlvbiAoZXhwLCBpbmMsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihleHAsIG1zZywgYXNzZXJ0LmluY2x1ZGUpLmluY2x1ZGUoaW5jKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm5vdEluY2x1ZGUoaGF5c3RhY2ssIG5lZWRsZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBoYXlzdGFja2AgZG9lcyBub3QgaW5jbHVkZSBgbmVlZGxlYC4gV29ya3Ncblx0ICAgKiBmb3Igc3RyaW5ncyBhbmQgYXJyYXlzLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5ub3RJbmNsdWRlKCdmb29iYXInLCAnYmF6JywgJ3N0cmluZyBub3QgaW5jbHVkZSBzdWJzdHJpbmcnKTtcblx0ICAgKiAgICAgYXNzZXJ0Lm5vdEluY2x1ZGUoWyAxLCAyLCAzIF0sIDQsICdhcnJheSBub3QgaW5jbHVkZSBjb250YWluIHZhbHVlJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBub3RJbmNsdWRlXG5cdCAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGhheXN0YWNrXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gbmVlZGxlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5ub3RJbmNsdWRlID0gZnVuY3Rpb24gKGV4cCwgaW5jLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2csIGFzc2VydC5ub3RJbmNsdWRlKS5ub3QuaW5jbHVkZShpbmMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubWF0Y2godmFsdWUsIHJlZ2V4cCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgbWF0Y2hlcyB0aGUgcmVndWxhciBleHByZXNzaW9uIGByZWdleHBgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5tYXRjaCgnZm9vYmFyJywgL15mb28vLCAncmVnZXhwIG1hdGNoZXMnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG1hdGNoXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1JlZ0V4cH0gcmVnZXhwXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5tYXRjaCA9IGZ1bmN0aW9uIChleHAsIHJlLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2cpLnRvLm1hdGNoKHJlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm5vdE1hdGNoKHZhbHVlLCByZWdleHAsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGRvZXMgbm90IG1hdGNoIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gYHJlZ2V4cGAuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0Lm5vdE1hdGNoKCdmb29iYXInLCAvXmZvby8sICdyZWdleHAgZG9lcyBub3QgbWF0Y2gnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIG5vdE1hdGNoXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1JlZ0V4cH0gcmVnZXhwXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5ub3RNYXRjaCA9IGZ1bmN0aW9uIChleHAsIHJlLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2cpLnRvLm5vdC5tYXRjaChyZSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5wcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQucHJvcGVydHkoeyB0ZWE6IHsgZ3JlZW46ICdtYXRjaGEnIH19LCAndGVhJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBwcm9wZXJ0eVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LnByb3BlcnR5ID0gZnVuY3Rpb24gKG9iaiwgcHJvcCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5oYXZlLnByb3BlcnR5KHByb3ApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAubm90UHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGRvZXMgX25vdF8gaGF2ZSBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0Lm5vdFByb3BlcnR5KHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ2NvZmZlZScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgbm90UHJvcGVydHlcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5ub3RQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvYmosIHByb3AsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8ubm90LmhhdmUucHJvcGVydHkocHJvcCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5kZWVwUHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGhhcyBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAsIHdoaWNoIGNhbiBiZSBhXG5cdCAgICogc3RyaW5nIHVzaW5nIGRvdC0gYW5kIGJyYWNrZXQtbm90YXRpb24gZm9yIGRlZXAgcmVmZXJlbmNlLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5kZWVwUHJvcGVydHkoeyB0ZWE6IHsgZ3JlZW46ICdtYXRjaGEnIH19LCAndGVhLmdyZWVuJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWVwUHJvcGVydHlcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kZWVwUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eShwcm9wKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm5vdERlZXBQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgZG9lcyBfbm90XyBoYXZlIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YCwgd2hpY2hcblx0ICAgKiBjYW4gYmUgYSBzdHJpbmcgdXNpbmcgZG90LSBhbmQgYnJhY2tldC1ub3RhdGlvbiBmb3IgZGVlcCByZWZlcmVuY2UuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0Lm5vdERlZXBQcm9wZXJ0eSh7IHRlYTogeyBncmVlbjogJ21hdGNoYScgfX0sICd0ZWEub29sb25nJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBub3REZWVwUHJvcGVydHlcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5ub3REZWVwUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5oYXZlLmRlZXAucHJvcGVydHkocHJvcCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5wcm9wZXJ0eVZhbChvYmplY3QsIHByb3BlcnR5LCB2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGhhcyBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAgd2l0aCB2YWx1ZSBnaXZlblxuXHQgICAqIGJ5IGB2YWx1ZWAuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LnByb3BlcnR5VmFsKHsgdGVhOiAnaXMgZ29vZCcgfSwgJ3RlYScsICdpcyBnb29kJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBwcm9wZXJ0eVZhbFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQucHJvcGVydHlWYWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eShwcm9wLCB2YWwpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAucHJvcGVydHlOb3RWYWwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBoYXMgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLCBidXQgd2l0aCBhIHZhbHVlXG5cdCAgICogZGlmZmVyZW50IGZyb20gdGhhdCBnaXZlbiBieSBgdmFsdWVgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5wcm9wZXJ0eU5vdFZhbCh7IHRlYTogJ2lzIGdvb2QnIH0sICd0ZWEnLCAnaXMgYmFkJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBwcm9wZXJ0eU5vdFZhbFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQucHJvcGVydHlOb3RWYWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8ubm90LmhhdmUucHJvcGVydHkocHJvcCwgdmFsKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmRlZXBQcm9wZXJ0eVZhbChvYmplY3QsIHByb3BlcnR5LCB2YWx1ZSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGhhcyBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAgd2l0aCB2YWx1ZSBnaXZlblxuXHQgICAqIGJ5IGB2YWx1ZWAuIGBwcm9wZXJ0eWAgY2FuIHVzZSBkb3QtIGFuZCBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwXG5cdCAgICogcmVmZXJlbmNlLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5kZWVwUHJvcGVydHlWYWwoeyB0ZWE6IHsgZ3JlZW46ICdtYXRjaGEnIH19LCAndGVhLmdyZWVuJywgJ21hdGNoYScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZGVlcFByb3BlcnR5VmFsXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kZWVwUHJvcGVydHlWYWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWwsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5kZWVwLnByb3BlcnR5KHByb3AsIHZhbCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5kZWVwUHJvcGVydHlOb3RWYWwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBoYXMgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLCBidXQgd2l0aCBhIHZhbHVlXG5cdCAgICogZGlmZmVyZW50IGZyb20gdGhhdCBnaXZlbiBieSBgdmFsdWVgLiBgcHJvcGVydHlgIGNhbiB1c2UgZG90LSBhbmRcblx0ICAgKiBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwIHJlZmVyZW5jZS5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuZGVlcFByb3BlcnR5Tm90VmFsKHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ3RlYS5ncmVlbicsICdrb25hY2hhJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWVwUHJvcGVydHlOb3RWYWxcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdCAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmRlZXBQcm9wZXJ0eU5vdFZhbCA9IGZ1bmN0aW9uIChvYmosIHByb3AsIHZhbCwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5ub3QuaGF2ZS5kZWVwLnByb3BlcnR5KHByb3AsIHZhbCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5sZW5ndGhPZihvYmplY3QsIGxlbmd0aCwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGhhcyBhIGBsZW5ndGhgIHByb3BlcnR5IHdpdGggdGhlIGV4cGVjdGVkIHZhbHVlLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5sZW5ndGhPZihbMSwyLDNdLCAzLCAnYXJyYXkgaGFzIGxlbmd0aCBvZiAzJyk7XG5cdCAgICogICAgIGFzc2VydC5sZW5ndGhPZignZm9vYmFyJywgNiwgJ3N0cmluZyBoYXMgbGVuZ3RoIG9mIDYnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGxlbmd0aE9mXG5cdCAgICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQubGVuZ3RoT2YgPSBmdW5jdGlvbiAoZXhwLCBsZW4sIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihleHAsIG1zZykudG8uaGF2ZS5sZW5ndGgobGVuKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLnRocm93cyhmdW5jdGlvbiwgW2NvbnN0cnVjdG9yL3N0cmluZy9yZWdleHBdLCBbc3RyaW5nL3JlZ2V4cF0sIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgZnVuY3Rpb25gIHdpbGwgdGhyb3cgYW4gZXJyb3IgdGhhdCBpcyBhbiBpbnN0YW5jZSBvZlxuXHQgICAqIGBjb25zdHJ1Y3RvcmAsIG9yIGFsdGVybmF0ZWx5IHRoYXQgaXQgd2lsbCB0aHJvdyBhbiBlcnJvciB3aXRoIG1lc3NhZ2Vcblx0ICAgKiBtYXRjaGluZyBgcmVnZXhwYC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQudGhyb3dzKGZuLCAnZnVuY3Rpb24gdGhyb3dzIGEgcmVmZXJlbmNlIGVycm9yJyk7XG5cdCAgICogICAgIGFzc2VydC50aHJvd3MoZm4sIC9mdW5jdGlvbiB0aHJvd3MgYSByZWZlcmVuY2UgZXJyb3IvKTtcblx0ICAgKiAgICAgYXNzZXJ0LnRocm93cyhmbiwgUmVmZXJlbmNlRXJyb3IpO1xuXHQgICAqICAgICBhc3NlcnQudGhyb3dzKGZuLCBSZWZlcmVuY2VFcnJvciwgJ2Z1bmN0aW9uIHRocm93cyBhIHJlZmVyZW5jZSBlcnJvcicpO1xuXHQgICAqICAgICBhc3NlcnQudGhyb3dzKGZuLCBSZWZlcmVuY2VFcnJvciwgL2Z1bmN0aW9uIHRocm93cyBhIHJlZmVyZW5jZSBlcnJvci8pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgdGhyb3dzXG5cdCAgICogQGFsaWFzIHRocm93XG5cdCAgICogQGFsaWFzIFRocm93XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb25cblx0ICAgKiBAcGFyYW0ge0Vycm9yQ29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG5cdCAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ2V4cFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNFcnJvcl90eXBlc1xuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uIChmbiwgZXJydCwgZXJycywgbXNnKSB7XG5cdCAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBlcnJ0IHx8IGVycnQgaW5zdGFuY2VvZiBSZWdFeHApIHtcblx0ICAgICAgZXJycyA9IGVycnQ7XG5cdCAgICAgIGVycnQgPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBhc3NlcnRFcnIgPSBuZXcgQXNzZXJ0aW9uKGZuLCBtc2cpLnRvLnRocm93KGVycnQsIGVycnMpO1xuXHQgICAgcmV0dXJuIGZsYWcoYXNzZXJ0RXJyLCAnb2JqZWN0Jyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5kb2VzTm90VGhyb3coZnVuY3Rpb24sIFtjb25zdHJ1Y3Rvci9yZWdleHBdLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYGZ1bmN0aW9uYCB3aWxsIF9ub3RfIHRocm93IGFuIGVycm9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ugb2Zcblx0ICAgKiBgY29uc3RydWN0b3JgLCBvciBhbHRlcm5hdGVseSB0aGF0IGl0IHdpbGwgbm90IHRocm93IGFuIGVycm9yIHdpdGggbWVzc2FnZVxuXHQgICAqIG1hdGNoaW5nIGByZWdleHBgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5kb2VzTm90VGhyb3coZm4sIEVycm9yLCAnZnVuY3Rpb24gZG9lcyBub3QgdGhyb3cnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGRvZXNOb3RUaHJvd1xuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uXG5cdCAgICogQHBhcmFtIHtFcnJvckNvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuXHQgICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjRXJyb3JfdHlwZXNcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kb2VzTm90VGhyb3cgPSBmdW5jdGlvbiAoZm4sIHR5cGUsIG1zZykge1xuXHQgICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgdHlwZSkge1xuXHQgICAgICBtc2cgPSB0eXBlO1xuXHQgICAgICB0eXBlID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGZuLCBtc2cpLnRvLm5vdC5UaHJvdyh0eXBlKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLm9wZXJhdG9yKHZhbDEsIG9wZXJhdG9yLCB2YWwyLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBDb21wYXJlcyB0d28gdmFsdWVzIHVzaW5nIGBvcGVyYXRvcmAuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0Lm9wZXJhdG9yKDEsICc8JywgMiwgJ2V2ZXJ5dGhpbmcgaXMgb2snKTtcblx0ICAgKiAgICAgYXNzZXJ0Lm9wZXJhdG9yKDEsICc+JywgMiwgJ3RoaXMgd2lsbCBmYWlsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBvcGVyYXRvclxuXHQgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbDFcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gb3BlcmF0b3Jcblx0ICAgKiBAcGFyYW0ge01peGVkfSB2YWwyXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5vcGVyYXRvciA9IGZ1bmN0aW9uICh2YWwsIG9wZXJhdG9yLCB2YWwyLCBtc2cpIHtcblx0ICAgIHZhciBvaztcblx0ICAgIHN3aXRjaChvcGVyYXRvcikge1xuXHQgICAgICBjYXNlICc9PSc6XG5cdCAgICAgICAgb2sgPSB2YWwgPT0gdmFsMjtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnPT09Jzpcblx0ICAgICAgICBvayA9IHZhbCA9PT0gdmFsMjtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnPic6XG5cdCAgICAgICAgb2sgPSB2YWwgPiB2YWwyO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICc+PSc6XG5cdCAgICAgICAgb2sgPSB2YWwgPj0gdmFsMjtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnPCc6XG5cdCAgICAgICAgb2sgPSB2YWwgPCB2YWwyO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICc8PSc6XG5cdCAgICAgICAgb2sgPSB2YWwgPD0gdmFsMjtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnIT0nOlxuXHQgICAgICAgIG9rID0gdmFsICE9IHZhbDI7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJyE9PSc6XG5cdCAgICAgICAgb2sgPSB2YWwgIT09IHZhbDI7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG9wZXJhdG9yIFwiJyArIG9wZXJhdG9yICsgJ1wiJyk7XG5cdCAgICB9XG5cdCAgICB2YXIgdGVzdCA9IG5ldyBBc3NlcnRpb24ob2ssIG1zZyk7XG5cdCAgICB0ZXN0LmFzc2VydChcblx0ICAgICAgICB0cnVlID09PSBmbGFnKHRlc3QsICdvYmplY3QnKVxuXHQgICAgICAsICdleHBlY3RlZCAnICsgdXRpbC5pbnNwZWN0KHZhbCkgKyAnIHRvIGJlICcgKyBvcGVyYXRvciArICcgJyArIHV0aWwuaW5zcGVjdCh2YWwyKVxuXHQgICAgICAsICdleHBlY3RlZCAnICsgdXRpbC5pbnNwZWN0KHZhbCkgKyAnIHRvIG5vdCBiZSAnICsgb3BlcmF0b3IgKyAnICcgKyB1dGlsLmluc3BlY3QodmFsMikgKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmNsb3NlVG8oYWN0dWFsLCBleHBlY3RlZCwgZGVsdGEsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGVxdWFsIGBleHBlY3RlZGAsIHRvIHdpdGhpbiBhICsvLSBgZGVsdGFgIHJhbmdlLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5jbG9zZVRvKDEuNSwgMSwgMC41LCAnbnVtYmVycyBhcmUgY2xvc2UnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGNsb3NlVG9cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gYWN0dWFsXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGV4cGVjdGVkXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbHRhXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5jbG9zZVRvID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBkZWx0YSwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnKS50by5iZS5jbG9zZVRvKGV4cCwgZGVsdGEpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuYXBwcm94aW1hdGVseShhY3R1YWwsIGV4cGVjdGVkLCBkZWx0YSwgW21lc3NhZ2VdKVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZXF1YWwgYGV4cGVjdGVkYCwgdG8gd2l0aGluIGEgKy8tIGBkZWx0YWAgcmFuZ2UuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmFwcHJveGltYXRlbHkoMS41LCAxLCAwLjUsICdudW1iZXJzIGFyZSBjbG9zZScpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgYXBwcm94aW1hdGVseVxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBhY3R1YWxcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZXhwZWN0ZWRcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVsdGFcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmFwcHJveGltYXRlbHkgPSBmdW5jdGlvbiAoYWN0LCBleHAsIGRlbHRhLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oYWN0LCBtc2cpLnRvLmJlLmFwcHJveGltYXRlbHkoZXhwLCBkZWx0YSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5zYW1lTWVtYmVycyhzZXQxLCBzZXQyLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHNldDFgIGFuZCBgc2V0MmAgaGF2ZSB0aGUgc2FtZSBtZW1iZXJzLlxuXHQgICAqIE9yZGVyIGlzIG5vdCB0YWtlbiBpbnRvIGFjY291bnQuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LnNhbWVNZW1iZXJzKFsgMSwgMiwgMyBdLCBbIDIsIDEsIDMgXSwgJ3NhbWUgbWVtYmVycycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgc2FtZU1lbWJlcnNcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBzZXQxXG5cdCAgICogQHBhcmFtIHtBcnJheX0gc2V0MlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuc2FtZU1lbWJlcnMgPSBmdW5jdGlvbiAoc2V0MSwgc2V0MiwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKHNldDEsIG1zZykudG8uaGF2ZS5zYW1lLm1lbWJlcnMoc2V0Mik7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLnNhbWVEZWVwTWVtYmVycyhzZXQxLCBzZXQyLCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHNldDFgIGFuZCBgc2V0MmAgaGF2ZSB0aGUgc2FtZSBtZW1iZXJzIC0gdXNpbmcgYSBkZWVwIGVxdWFsaXR5IGNoZWNraW5nLlxuXHQgICAqIE9yZGVyIGlzIG5vdCB0YWtlbiBpbnRvIGFjY291bnQuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LnNhbWVEZWVwTWVtYmVycyhbIHtiOiAzfSwge2E6IDJ9LCB7YzogNX0gXSwgWyB7YzogNX0sIHtiOiAzfSwge2E6IDJ9IF0sICdzYW1lIGRlZXAgbWVtYmVycycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgc2FtZURlZXBNZW1iZXJzXG5cdCAgICogQHBhcmFtIHtBcnJheX0gc2V0MVxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IHNldDJcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LnNhbWVEZWVwTWVtYmVycyA9IGZ1bmN0aW9uIChzZXQxLCBzZXQyLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oc2V0MSwgbXNnKS50by5oYXZlLnNhbWUuZGVlcC5tZW1iZXJzKHNldDIpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pbmNsdWRlTWVtYmVycyhzdXBlcnNldCwgc3Vic2V0LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYHN1YnNldGAgaXMgaW5jbHVkZWQgaW4gYHN1cGVyc2V0YC5cblx0ICAgKiBPcmRlciBpcyBub3QgdGFrZW4gaW50byBhY2NvdW50LlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pbmNsdWRlTWVtYmVycyhbIDEsIDIsIDMgXSwgWyAyLCAxIF0sICdpbmNsdWRlIG1lbWJlcnMnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGluY2x1ZGVNZW1iZXJzXG5cdCAgICogQHBhcmFtIHtBcnJheX0gc3VwZXJzZXRcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBzdWJzZXRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmluY2x1ZGVNZW1iZXJzID0gZnVuY3Rpb24gKHN1cGVyc2V0LCBzdWJzZXQsIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihzdXBlcnNldCwgbXNnKS50by5pbmNsdWRlLm1lbWJlcnMoc3Vic2V0KTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaW5jbHVkZURlZXBNZW1iZXJzKHN1cGVyc2V0LCBzdWJzZXQsIFttZXNzYWdlXSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgc3Vic2V0YCBpcyBpbmNsdWRlZCBpbiBgc3VwZXJzZXRgIC0gdXNpbmcgZGVlcCBlcXVhbGl0eSBjaGVja2luZy5cblx0ICAgKiBPcmRlciBpcyBub3QgdGFrZW4gaW50byBhY2NvdW50LlxuXHQgICAqIER1cGxpY2F0ZXMgYXJlIGlnbm9yZWQuXG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmluY2x1ZGVEZWVwTWVtYmVycyhbIHthOiAxfSwge2I6IDJ9LCB7YzogM30gXSwgWyB7YjogMn0sIHthOiAxfSwge2I6IDJ9IF0sICdpbmNsdWRlIGRlZXAgbWVtYmVycycpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaW5jbHVkZURlZXBNZW1iZXJzXG5cdCAgICogQHBhcmFtIHtBcnJheX0gc3VwZXJzZXRcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBzdWJzZXRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmluY2x1ZGVEZWVwTWVtYmVycyA9IGZ1bmN0aW9uIChzdXBlcnNldCwgc3Vic2V0LCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oc3VwZXJzZXQsIG1zZykudG8uaW5jbHVkZS5kZWVwLm1lbWJlcnMoc3Vic2V0KTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAub25lT2YoaW5MaXN0LCBsaXN0LCBbbWVzc2FnZV0pXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgbm9uLW9iamVjdCwgbm9uLWFycmF5IHZhbHVlIGBpbkxpc3RgIGFwcGVhcnMgaW4gdGhlIGZsYXQgYXJyYXkgYGxpc3RgLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5vbmVPZigxLCBbIDIsIDEgXSwgJ05vdCBmb3VuZCBpbiBsaXN0Jyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBvbmVPZlxuXHQgICAqIEBwYXJhbSB7Kn0gaW5MaXN0XG5cdCAgICogQHBhcmFtIHtBcnJheTwqPn0gbGlzdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQub25lT2YgPSBmdW5jdGlvbiAoaW5MaXN0LCBsaXN0LCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24oaW5MaXN0LCBtc2cpLnRvLmJlLm9uZU9mKGxpc3QpO1xuXHQgIH1cblx0XG5cdCAgIC8qKlxuXHQgICAqICMjIyAuY2hhbmdlcyhmdW5jdGlvbiwgb2JqZWN0LCBwcm9wZXJ0eSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGNoYW5nZXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHlcblx0ICAgKlxuXHQgICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG5cdCAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBvYmoudmFsID0gMjIgfTtcblx0ICAgKiAgICAgYXNzZXJ0LmNoYW5nZXMoZm4sIG9iaiwgJ3ZhbCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgY2hhbmdlc1xuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG1vZGlmaWVyIGZ1bmN0aW9uXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmNoYW5nZXMgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikudG8uY2hhbmdlKG9iaiwgcHJvcCk7XG5cdCAgfVxuXHRcblx0ICAgLyoqXG5cdCAgICogIyMjIC5kb2VzTm90Q2hhbmdlKGZ1bmN0aW9uLCBvYmplY3QsIHByb3BlcnR5KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZG9lcyBub3QgY2hhbmdlcyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eVxuXHQgICAqXG5cdCAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcblx0ICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdmb28nKTsgfTtcblx0ICAgKiAgICAgYXNzZXJ0LmRvZXNOb3RDaGFuZ2UoZm4sIG9iaiwgJ3ZhbCcpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgZG9lc05vdENoYW5nZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG1vZGlmaWVyIGZ1bmN0aW9uXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmRvZXNOb3RDaGFuZ2UgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikudG8ubm90LmNoYW5nZShvYmosIHByb3ApO1xuXHQgIH1cblx0XG5cdCAgIC8qKlxuXHQgICAqICMjIyAuaW5jcmVhc2VzKGZ1bmN0aW9uLCBvYmplY3QsIHByb3BlcnR5KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gaW5jcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuXHQgICAqXG5cdCAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcblx0ICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSAxMyB9O1xuXHQgICAqICAgICBhc3NlcnQuaW5jcmVhc2VzKGZuLCBvYmosICd2YWwnKTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGluY3JlYXNlc1xuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG1vZGlmaWVyIGZ1bmN0aW9uXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmluY3JlYXNlcyA9IGZ1bmN0aW9uIChmbiwgb2JqLCBwcm9wKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKGZuKS50by5pbmNyZWFzZShvYmosIHByb3ApO1xuXHQgIH1cblx0XG5cdCAgIC8qKlxuXHQgICAqICMjIyAuZG9lc05vdEluY3JlYXNlKGZ1bmN0aW9uLCBvYmplY3QsIHByb3BlcnR5KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZG9lcyBub3QgaW5jcmVhc2Ugb2JqZWN0IHByb3BlcnR5XG5cdCAgICpcblx0ICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuXHQgICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCA9IDggfTtcblx0ICAgKiAgICAgYXNzZXJ0LmRvZXNOb3RJbmNyZWFzZShmbiwgb2JqLCAndmFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkb2VzTm90SW5jcmVhc2Vcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllciBmdW5jdGlvblxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kb2VzTm90SW5jcmVhc2UgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikudG8ubm90LmluY3JlYXNlKG9iaiwgcHJvcCk7XG5cdCAgfVxuXHRcblx0ICAgLyoqXG5cdCAgICogIyMjIC5kZWNyZWFzZXMoZnVuY3Rpb24sIG9iamVjdCwgcHJvcGVydHkpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYSBmdW5jdGlvbiBkZWNyZWFzZXMgYW4gb2JqZWN0IHByb3BlcnR5XG5cdCAgICpcblx0ICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuXHQgICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCA9IDUgfTtcblx0ICAgKiAgICAgYXNzZXJ0LmRlY3JlYXNlcyhmbiwgb2JqLCAndmFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkZWNyZWFzZXNcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllciBmdW5jdGlvblxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kZWNyZWFzZXMgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikudG8uZGVjcmVhc2Uob2JqLCBwcm9wKTtcblx0ICB9XG5cdFxuXHQgICAvKipcblx0ICAgKiAjIyMgLmRvZXNOb3REZWNyZWFzZShmdW5jdGlvbiwgb2JqZWN0LCBwcm9wZXJ0eSlcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGRvZXMgbm90IGRlY3JlYXNlcyBhbiBvYmplY3QgcHJvcGVydHlcblx0ICAgKlxuXHQgICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG5cdCAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBvYmoudmFsID0gMTUgfTtcblx0ICAgKiAgICAgYXNzZXJ0LmRvZXNOb3REZWNyZWFzZShmbiwgb2JqLCAndmFsJyk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBkb2VzTm90RGVjcmVhc2Vcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllciBmdW5jdGlvblxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5kb2VzTm90RGVjcmVhc2UgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuXHQgICAgbmV3IEFzc2VydGlvbihmbikudG8ubm90LmRlY3JlYXNlKG9iaiwgcHJvcCk7XG5cdCAgfVxuXHRcblx0ICAvKiFcblx0ICAgKiAjIyMgLmlmRXJyb3Iob2JqZWN0KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyBpZiB2YWx1ZSBpcyBub3QgYSBmYWxzZSB2YWx1ZSwgYW5kIHRocm93cyBpZiBpdCBpcyBhIHRydWUgdmFsdWUuXG5cdCAgICogVGhpcyBpcyBhZGRlZCB0byBhbGxvdyBmb3IgY2hhaSB0byBiZSBhIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIE5vZGUnc1xuXHQgICAqIGFzc2VydCBjbGFzcy5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdJIGFtIGEgY3VzdG9tIGVycm9yJyk7XG5cdCAgICogICAgIGFzc2VydC5pZkVycm9yKGVycik7IC8vIFJldGhyb3dzIGVyciFcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlmRXJyb3Jcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQG5hbWVzcGFjZSBBc3NlcnRcblx0ICAgKiBAYXBpIHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBhc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgIGlmICh2YWwpIHtcblx0ICAgICAgdGhyb3codmFsKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzRXh0ZW5zaWJsZShvYmplY3QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgZXh0ZW5zaWJsZSAoY2FuIGhhdmUgbmV3IHByb3BlcnRpZXMgYWRkZWQgdG8gaXQpLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc0V4dGVuc2libGUoe30pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNFeHRlbnNpYmxlXG5cdCAgICogQGFsaWFzIGV4dGVuc2libGVcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzRXh0ZW5zaWJsZSA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uYmUuZXh0ZW5zaWJsZTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzTm90RXh0ZW5zaWJsZShvYmplY3QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgX25vdF8gZXh0ZW5zaWJsZS5cblx0ICAgKlxuXHQgICAqICAgICB2YXIgbm9uRXh0ZW5zaWJsZU9iamVjdCA9IE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSk7XG5cdCAgICogICAgIHZhciBzZWFsZWRPYmplY3QgPSBPYmplY3Quc2VhbCh7fSk7XG5cdCAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXNlKHt9KTtcblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuaXNOb3RFeHRlbnNpYmxlKG5vbkV4dGVuc2libGVPYmplY3QpO1xuXHQgICAqICAgICBhc3NlcnQuaXNOb3RFeHRlbnNpYmxlKHNlYWxlZE9iamVjdCk7XG5cdCAgICogICAgIGFzc2VydC5pc05vdEV4dGVuc2libGUoZnJvemVuT2JqZWN0KTtcblx0ICAgKlxuXHQgICAqIEBuYW1lIGlzTm90RXh0ZW5zaWJsZVxuXHQgICAqIEBhbGlhcyBub3RFeHRlbnNpYmxlXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05vdEV4dGVuc2libGUgPSBmdW5jdGlvbiAob2JqLCBtc2cpIHtcblx0ICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5iZS5leHRlbnNpYmxlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNTZWFsZWQob2JqZWN0KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIHNlYWxlZCAoY2Fubm90IGhhdmUgbmV3IHByb3BlcnRpZXMgYWRkZWQgdG8gaXRcblx0ICAgKiBhbmQgaXRzIGV4aXN0aW5nIHByb3BlcnRpZXMgY2Fubm90IGJlIHJlbW92ZWQpLlxuXHQgICAqXG5cdCAgICogICAgIHZhciBzZWFsZWRPYmplY3QgPSBPYmplY3Quc2VhbCh7fSk7XG5cdCAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3Quc2VhbCh7fSk7XG5cdCAgICpcblx0ICAgKiAgICAgYXNzZXJ0LmlzU2VhbGVkKHNlYWxlZE9iamVjdCk7XG5cdCAgICogICAgIGFzc2VydC5pc1NlYWxlZChmcm96ZW5PYmplY3QpO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNTZWFsZWRcblx0ICAgKiBAYWxpYXMgc2VhbGVkXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc1NlYWxlZCA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uYmUuc2VhbGVkO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICMjIyAuaXNOb3RTZWFsZWQob2JqZWN0KVxuXHQgICAqXG5cdCAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIF9ub3RfIHNlYWxlZC5cblx0ICAgKlxuXHQgICAqICAgICBhc3NlcnQuaXNOb3RTZWFsZWQoe30pO1xuXHQgICAqXG5cdCAgICogQG5hbWUgaXNOb3RTZWFsZWRcblx0ICAgKiBAYWxpYXMgbm90U2VhbGVkXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cblx0ICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuXHQgICAqIEBhcGkgcHVibGljXG5cdCAgICovXG5cdFxuXHQgIGFzc2VydC5pc05vdFNlYWxlZCA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuXHQgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8ubm90LmJlLnNlYWxlZDtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiAjIyMgLmlzRnJvemVuKG9iamVjdClcblx0ICAgKlxuXHQgICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBpcyBmcm96ZW4gKGNhbm5vdCBoYXZlIG5ldyBwcm9wZXJ0aWVzIGFkZGVkIHRvIGl0XG5cdCAgICogYW5kIGl0cyBleGlzdGluZyBwcm9wZXJ0aWVzIGNhbm5vdCBiZSBtb2RpZmllZCkuXG5cdCAgICpcblx0ICAgKiAgICAgdmFyIGZyb3plbk9iamVjdCA9IE9iamVjdC5mcmVlemUoe30pO1xuXHQgICAqICAgICBhc3NlcnQuZnJvemVuKGZyb3plbk9iamVjdCk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc0Zyb3plblxuXHQgICAqIEBhbGlhcyBmcm96ZW5cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzRnJvemVuID0gZnVuY3Rpb24gKG9iaiwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5iZS5mcm96ZW47XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogIyMjIC5pc05vdEZyb3plbihvYmplY3QpXG5cdCAgICpcblx0ICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgX25vdF8gZnJvemVuLlxuXHQgICAqXG5cdCAgICogICAgIGFzc2VydC5pc05vdEZyb3plbih7fSk7XG5cdCAgICpcblx0ICAgKiBAbmFtZSBpc05vdEZyb3plblxuXHQgICAqIEBhbGlhcyBub3RGcm96ZW5cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuXHQgICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG5cdCAgICogQGFwaSBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgYXNzZXJ0LmlzTm90RnJvemVuID0gZnVuY3Rpb24gKG9iaiwgbXNnKSB7XG5cdCAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5ub3QuYmUuZnJvemVuO1xuXHQgIH07XG5cdFxuXHQgIC8qIVxuXHQgICAqIEFsaWFzZXMuXG5cdCAgICovXG5cdFxuXHQgIChmdW5jdGlvbiBhbGlhcyhuYW1lLCBhcyl7XG5cdCAgICBhc3NlcnRbYXNdID0gYXNzZXJ0W25hbWVdO1xuXHQgICAgcmV0dXJuIGFsaWFzO1xuXHQgIH0pXG5cdCAgKCdpc09rJywgJ29rJylcblx0ICAoJ2lzTm90T2snLCAnbm90T2snKVxuXHQgICgndGhyb3dzJywgJ3Rocm93Jylcblx0ICAoJ3Rocm93cycsICdUaHJvdycpXG5cdCAgKCdpc0V4dGVuc2libGUnLCAnZXh0ZW5zaWJsZScpXG5cdCAgKCdpc05vdEV4dGVuc2libGUnLCAnbm90RXh0ZW5zaWJsZScpXG5cdCAgKCdpc1NlYWxlZCcsICdzZWFsZWQnKVxuXHQgICgnaXNOb3RTZWFsZWQnLCAnbm90U2VhbGVkJylcblx0ICAoJ2lzRnJvemVuJywgJ2Zyb3plbicpXG5cdCAgKCdpc05vdEZyb3plbicsICdub3RGcm96ZW4nKTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHRlc3RzLmpzXG4gKiovIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCBjNTczZTFlNWQ3NDk2YTMxNTFjYVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIGNvbmZpZ18xID0gcmVxdWlyZShcIi4vY29uZmlnXCIpO1xudmFyIENsaWVudF8xID0gcmVxdWlyZShcIi4uL0NsaWVudFwiKTtcbnZhciBjaGFpXzEgPSByZXF1aXJlKFwiY2hhaVwiKTtcbnZhciBmc18xID0gcmVxdWlyZShcImZzXCIpO1xudmFyIGNvbmZpZztcbnZhciBjbGllbnQ7XG52YXIgYVllYXJBZ28gPSBuZXcgRGF0ZSgpO1xuYVllYXJBZ28uc2V0RnVsbFllYXIoYVllYXJBZ28uZ2V0RnVsbFllYXIoKSAtIDEpO1xuYmVmb3JlKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBydW5zIGJlZm9yZSBhbGwgdGVzdHMgaW4gdGhpcyBibG9ja1xuICAgIHJldHVybiBjb25maWdfMS5kZWZhdWx0LnRoZW4oZnVuY3Rpb24gKGNvbmYpIHtcbiAgICAgICAgY29uZmlnID0gY29uZjtcbiAgICAgICAgY2xpZW50ID0gbmV3IENsaWVudF8xLmRlZmF1bHQoY29uZmlnLmFwcCk7XG4gICAgICAgIHJldHVybiBjbGllbnQubG9naW4oY29uZmlnLnVzZXIpO1xuICAgIH0pO1xufSk7XG5kZXNjcmliZShcIkFjY291bnRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGl0KFwiR2V0IEFjY291bnQgaW5mb1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjbGllbnQuYWNjb3VudCgpLmdldCgpLnRoZW4oZnVuY3Rpb24gKGFjY291bnQpIHtcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoYWNjb3VudCkudG8uY29udGFpbi5rZXlzKFtcImlkXCIsIFwidXJpXCIsIFwibWFpbk51bWJlclwiLCBcIm9wZXJhdG9yXCIsIFwic2VydmljZUluZm9cIiwgXCJzZXR1cFdpemFyZFN0YXRlXCIsIFwic3RhdHVzXCJdKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgaXQoXCJHZXQgQWNjb3VudCBpbmZvIHdpdGggaWQgbm90IGV4aXN0cyBzaG91bGQgcmV0dXJuIDQwNFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjbGllbnQuYWNjb3VudChcImFjY291bnRJZE5vdEV4aXN0XCIpLmdldCgpLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGUuYXBpUmVzcG9uc2UucmVzcG9uc2UoKS5zdGF0dXMpLnRvLmVxKDQwNCk7XG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGUuYXBpUmVzcG9uc2UuanNvbigpLmVycm9yQ29kZSkudG8uZXF1YWwoXCJJbnZhbGlkUGFyYW1ldGVyXCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuZGVzY3JpYmUoXCJFeHRlbnNpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbnNpb25Qcm9wcyA9IFtcInVyaVwiLCBcImlkXCIsIFwiZXh0ZW5zaW9uTnVtYmVyXCIsIFwiY29udGFjdFwiLCBcIm5hbWVcIiwgXCJ0eXBlXCIsIFwic3RhdHVzXCIsIFwicGVybWlzc2lvbnNcIiwgXCJwcm9maWxlSW1hZ2VcIl07XG4gICAgaXQoXCJnZXQgY3VycmVudCBleHRlbnNpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2xpZW50LmFjY291bnQoKS5leHRlbnNpb24oKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChleHQpIHtcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZXh0KS50by5jb250YWluLmtleXMoZXh0ZW5zaW9uUHJvcHMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBpdChcIkdldCBleHRlbnNpb24gbGlzdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjbGllbnQuYWNjb3VudCgpLmV4dGVuc2lvbigpLmxpc3QoKS50aGVuKGZ1bmN0aW9uIChleHRzKSB7XG4gICAgICAgICAgICBzaG91bGRCZVBhZ2luZ1Jlc3VsdChleHRzKTtcbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoZXh0cy5yZWNvcmRzWzBdKS50by5oYXMua2V5cyhleHRlbnNpb25Qcm9wcyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KFwiVW5pb24gdHlwZSBwYXJhbWV0ZXJzLCB1cGRhdGUgZXh0ZW5zaW9uIGluZm9cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2xpZW50LmFjY291bnQoKS5leHRlbnNpb24oKS5wdXQoeyBzdGF0dXM6IFwiRW5hYmxlZFwiIH0pLnRoZW4oZnVuY3Rpb24gKGV4dCkge1xuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChleHQpLnRvLmNvbnRhaW4ua2V5cyhleHRlbnNpb25Qcm9wcyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5kZXNjcmliZShcIkJpbmFyeSByZXNwb25zZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoXCJHZXQgbWVzc2FnZSBjb250ZW50IGFzIGJpbmFyeVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBleHQgPSBjbGllbnQuYWNjb3VudCgpLmV4dGVuc2lvbigpO1xuICAgICAgICByZXR1cm4gZXh0Lm1lc3NhZ2VTdG9yZSgpLmxpc3QoeyBkYXRlRnJvbTogYVllYXJBZ28udG9JU09TdHJpbmcoKSB9KS50aGVuKGZ1bmN0aW9uIChtc2dzKSB7XG4gICAgICAgICAgICBpZiAobXNncy5yZWNvcmRzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbWVzc2FnZXMgZm91bmQgZm9yIHRoaXMgZXh0ZW5zaW9uLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtc2dzLnJlY29yZHNbMF07XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgcmV0dXJuIGV4dC5tZXNzYWdlU3RvcmUobXNnLmlkKS5jb250ZW50KG1zZy5hdHRhY2htZW50c1swXS5pZCkuZ2V0KCkudGhlbihmdW5jdGlvbiAoYXRjaCkge1xuICAgICAgICAgICAgICAgIC8vIGV4cGVjdChhdGNoLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpKS50by5oYXMuc3RyaW5nKFwidGV4dC9wbGFpblwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBpdChcIkdldCByZWNvcmRpbmcgY29udGVudFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBleHQgPSBjbGllbnQuYWNjb3VudCgpLmV4dGVuc2lvbigpO1xuICAgICAgICByZXR1cm4gZXh0LmNhbGxMb2coKS5saXN0KHsgZGF0ZUZyb206IGFZZWFyQWdvLnRvSVNPU3RyaW5nKCksIHdpdGhSZWNvcmRpbmc6IHRydWUgfSkudGhlbihmdW5jdGlvbiAoY2FsbExvZ3MpIHtcbiAgICAgICAgICAgIGlmIChjYWxsTG9ncy5yZWNvcmRzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmVjb3JkaW5ncyBmb3VuZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2FsbExvZ3MucmVjb3Jkc1swXS5yZWNvcmRpbmc7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlY29yZGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkucmVjb3JkaW5nKHJlY29yZGluZy5pZCArIFwiXCIpLmNvbnRlbnQoKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChjb250ZW50LmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpKS50by5oYXMuc3RyaW5nKFwiYXVkaW8vbXBlZ1wiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xudmFyIGltZ1BhdGggPSBfX2Rpcm5hbWUgKyBcIi9yZXMvYmFubmVyX2luZGV4X2xvZ2dlZC5wbmdcIjtcbmRlc2NyaWJlKFwiQmluYXJ5IHJlcXVlc3RcIiwgZnVuY3Rpb24gKCkge1xuICAgIGlmICghZnNfMS5jcmVhdGVSZWFkU3RyZWFtKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaXQoXCJQdXQgcHJvZmlsZSBpbWFnZSwgaW5wdXQgYmluYXJ5LCByZXNwb25zZSBpcyBlbXB0eS5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2xpZW50LmFjY291bnQoKS5leHRlbnNpb24oKS5wcm9maWxlSW1hZ2UoKS5wdXQoZnNfMS5jcmVhdGVSZWFkU3RyZWFtKGltZ1BhdGgpKTtcbiAgICB9KTtcbiAgICBpdChcIlBvc3QgcHJvZmlsZSBpbWFnZSwgaW5wdXQgYmluYXJ5LCByZXNwb25zZSBpcyBlbXB0eS5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2xpZW50LmFjY291bnQoKS5leHRlbnNpb24oKS5wcm9maWxlSW1hZ2UoKS5wb3N0KGZzXzEuY3JlYXRlUmVhZFN0cmVhbShpbWdQYXRoKSk7XG4gICAgfSk7XG59KTtcbmRlc2NyaWJlKFwiRmF4XCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpdChcInNlbmQgZmF4LCBwb3N0IGZvcm0gZGF0YVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhdHRhY2htZW50cztcbiAgICAgICAgaWYgKGZzXzEuY3JlYXRlUmVhZFN0cmVhbSkge1xuICAgICAgICAgICAgYXR0YWNobWVudHMgPSBbXCJUZXh0IGF0dGVudG1lbnQgZm9yIHRlc3QuIEZvbGxvd2VkIGJ5IGEgcG5nIHBpY3R1cmUuXCIsIGZzXzEuY3JlYXRlUmVhZFN0cmVhbShpbWdQYXRoKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhdHRhY2htZW50cyA9IFtcIlRlc3QgZmF4IHRlc3Qgc2VudCBmcm9tIGJyb3dzZXIsIFwiICsgbmF2aWdhdG9yLnVzZXJBZ2VudF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCkuZmF4KCkucG9zdCh7IHRvOiBbeyBwaG9uZU51bWJlcjogXCIrMTY1MDc0MTE2MTVcIiB9XSB9LCBhdHRhY2htZW50cyk7XG4gICAgfSk7XG4gICAgaXQoXCJzZW5kIGZheCBmYWlsLCBlbXB0eSBwYXJhbWV0ZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2xpZW50LmFjY291bnQoKS5leHRlbnNpb24oKS5mYXgoKS5wb3N0KHt9LCBbXSkudGhlbihmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzaG91bGQgbm90IHNlbmQuXCIpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChlLmFwaVJlc3BvbnNlLmpzb24oKS5lcnJvckNvZGUpLnRvLmVxKFwiSW52YWxpZFBhcmFtZXRlclwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbmRlc2NyaWJlKFwiQ2FsbCBMb2dcIiwgZnVuY3Rpb24gKCkge1xuICAgIGl0KFwiR2V0IGNhbGwgbG9nXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCkuY2FsbExvZygpLmxpc3QoeyBkYXRlRnJvbTogYVllYXJBZ28udG9JU09TdHJpbmcoKSwgcGVyUGFnZTogMiB9KS50aGVuKGZ1bmN0aW9uIChjYWxsTG9ncykge1xuICAgICAgICAgICAgc2hvdWxkQmVQYWdpbmdSZXN1bHQoY2FsbExvZ3MpO1xuICAgICAgICAgICAgaWYgKGNhbGxMb2dzLnJlY29yZHMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLndhcm4oXCJObyBjYWxsIGxvZyBpdGVtc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoYWlfMS5leHBlY3QoY2FsbExvZ3MucmVjb3Jkc1swXSkudG8uaGFzLmtleXMoW1widXJpXCIsIFwiaWRcIiwgXCJzZXNzaW9uSWRcIiwgXCJzdGFydFRpbWVcIiwgXCJkdXJhdGlvblwiLCBcInR5cGVcIiwgXCJkaXJlY3Rpb25cIiwgXCJhY3Rpb25cIiwgXCJyZXN1bHRcIiwgXCJ0b1wiLCBcImZyb21cIl0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBpdChcImRlbGV0ZSB0b2RheSdzIGNhbGwgbG9nXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCkuY2FsbExvZygpLmRlbGV0ZSgpO1xuICAgIH0pO1xufSk7XG5kZXNjcmliZShcInBvc3RcIiwgZnVuY3Rpb24gKCkge1xuICAgIGl0KFwic2VuZCBzbXMsIHBvc3QgcGxhaW4gb2JqZWN0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNsaWVudC5hY2NvdW50KCkuZXh0ZW5zaW9uKCkuc21zKCkucG9zdCh7XG4gICAgICAgICAgICBmcm9tOiB7IHBob25lTnVtYmVyOiBjb25maWcudXNlci51c2VybmFtZSB9LFxuICAgICAgICAgICAgdGV4dDogXCJ0ZXN0IHNtcyB0ZXh0IGNvbnRlbnQuXCIsXG4gICAgICAgICAgICB0bzogW3sgcGhvbmVOdW1iZXI6IFwiKzE2NTA3NDExNjE1XCIgfV0sXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNtcykge1xuICAgICAgICAgICAgY2hhaV8xLmV4cGVjdChzbXMpLnRvLmhhcy5rZXlzKFtcInVyaVwiLCBcImlkXCIsIFwidG9cIiwgXCJmcm9tXCIsIFwidHlwZVwiLCBcImNyZWF0aW9uVGltZVwiLCBcInJlYWRTdGF0dXNcIiwgXCJwcmlvcml0eVwiLCBcImF0dGFjaG1lbnRzXCIsIFwiZGlyZWN0aW9uXCIsIFwiYXZhaWxhYmlsaXR5XCIsIFwic3ViamVjdFwiLCBcIm1lc3NhZ2VTdGF0dXNcIiwgXCJzbXNTZW5kaW5nQXR0ZW1wdHNDb3VudFwiLCBcImNvbnZlcnNhdGlvbklkXCIsIFwiY29udmVyc2F0aW9uXCIsIFwibGFzdE1vZGlmaWVkVGltZVwiXSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KFwic2VuZCBzbXMsIHdpdGhvdXQgZnJvbVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjbGllbnQuYWNjb3VudCgpLmV4dGVuc2lvbigpLnNtcygpLnBvc3QoeyB0ZXh0OiBcInRlc3Qgc21zIHRleHQgY29udGVudC5cIiwgdG86IFt7IHBob25lTnVtYmVyOiBcIisxNjUwNzQxMTYxNVwiIH1dIH0pLnRoZW4oZnVuY3Rpb24gKHNtcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwic2hvdWxkIGZhaWxcIik7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBjaGFpXzEuZXhwZWN0KGUuYXBpUmVzcG9uc2UuanNvbigpLmVycm9yQ29kZSkudG8uZXEoXCJJbnZhbGlkUGFyYW1ldGVyXCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuZnVuY3Rpb24gc2hvdWxkQmVQYWdpbmdSZXN1bHQobGlzdCkge1xuICAgIGNoYWlfMS5leHBlY3QobGlzdCkudG8uaGFzLmtleXMoW1wibmF2aWdhdGlvblwiLCBcInBhZ2luZ1wiLCBcInJlY29yZHNcIiwgXCJ1cmlcIl0pO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy90ZXN0L3Rlc3RzLmpzXG4gKiogbW9kdWxlIGlkID0gMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5yZXF1aXJlKFwiZXM2LXByb21pc2VcIik7XG52YXIgZmV0Y2ggPSByZXF1aXJlKFwiaXNvbW9ycGhpYy1mZXRjaFwiKTtcbnZhciBhdXRoRGF0YVVybCA9IFwiL2RhdGEvcmMtYXV0aC5qc29uXCI7XG5pZiAodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgIXByb2Nlc3NbXCJicm93c2VyXCJdKSB7XG4gICAgYXV0aERhdGFVcmwgPSBcImh0dHA6Ly9sb2NhbGhvc3RcIiArIGF1dGhEYXRhVXJsO1xufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZmV0Y2goYXV0aERhdGFVcmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcmVzLmpzb24oKTsgfSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3Rlc3QvY29uZmlnLmpzXG4gKiogbW9kdWxlIGlkID0gMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgMy4zLjFcbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxudmFyIF9pc0FycmF5ID0gdW5kZWZpbmVkO1xuaWYgKCFBcnJheS5pc0FycmF5KSB7XG4gIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xufSBlbHNlIHtcbiAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xufVxuXG52YXIgaXNBcnJheSA9IF9pc0FycmF5O1xuXG52YXIgbGVuID0gMDtcbnZhciB2ZXJ0eE5leHQgPSB1bmRlZmluZWQ7XG52YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB1bmRlZmluZWQ7XG5cbnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcbiAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG4gIGxlbiArPSAyO1xuICBpZiAobGVuID09PSAyKSB7XG4gICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZUZsdXNoKCk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG59XG5cbmZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XG4gIGFzYXAgPSBhc2FwRm47XG59XG5cbnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG52YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xudmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHt9KS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbi8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG52YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4vLyBub2RlXG5mdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcbiAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgfTtcbn1cblxuLy8gdmVydHhcbmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmVydHhOZXh0KGZsdXNoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcbiAgfTtcbn1cblxuLy8gd2ViIHdvcmtlclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG4gICAgY2FsbGJhY2soYXJnKTtcblxuICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgciA9IHJlcXVpcmU7XG4gICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcbiAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xuICB9XG59XG5cbnZhciBzY2hlZHVsZUZsdXNoID0gdW5kZWZpbmVkO1xuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbmlmIChpc05vZGUpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7XG59IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG59IGVsc2UgaWYgKGlzV29ya2VyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cztcblxuICB2YXIgcGFyZW50ID0gdGhpcztcblxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgfVxuXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gIGlmIChfc3RhdGUpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTtcbiAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUob2JqZWN0KSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIFBFTkRJTkcgPSB2b2lkIDA7XG52YXIgRlVMRklMTEVEID0gMTtcbnZhciBSRUpFQ1RFRCA9IDI7XG5cbnZhciBHRVRfVEhFTl9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbn1cblxuZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgcmV0dXJuIEdFVF9USEVOX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICB0cnkge1xuICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgIHZhciBlcnJvciA9IHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9XG4gIH0sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCkge1xuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlKSB7XG4gICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoZW4kJCA9PT0gR0VUX1RIRU5fRVJST1IpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAodGhlbiQkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJCkpIHtcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcblxuICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2hpbGQgPSB1bmRlZmluZWQsXG4gICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCxcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIEVycm9yT2JqZWN0KCkge1xuICB0aGlzLmVycm9yID0gbnVsbDtcbn1cblxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdW5kZWZpbmVkLFxuICAgICAgZXJyb3IgPSB1bmRlZmluZWQsXG4gICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXG4gICAgICBmYWlsZWQgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgLy8gbm9vcFxuICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICB0cnkge1xuICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG4gICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZWplY3QocHJvbWlzZSwgZSk7XG4gIH1cbn1cblxudmFyIGlkID0gMDtcbmZ1bmN0aW9uIG5leHRJZCgpIHtcbiAgcmV0dXJuIGlkKys7XG59XG5cbmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcbiAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XG4gIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG59XG5cbmZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG4gICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgIHRoaXMuX2VudW1lcmF0ZSgpO1xuICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgX3JlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICB2YXIgX2lucHV0ID0gdGhpcy5faW5wdXQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRoaXMuX2VhY2hFbnRyeShfaW5wdXRbaV0sIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG4gIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgdmFyIHJlc29sdmUkJCA9IGMucmVzb2x2ZTtcblxuICBpZiAocmVzb2x2ZSQkID09PSByZXNvbHZlKSB7XG4gICAgdmFyIF90aGVuID0gZ2V0VGhlbihlbnRyeSk7XG5cbiAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG4gICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlJCQoZW50cnkpO1xuICAgICAgfSksIGkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkKGVudHJ5KSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG4gIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkge1xuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gIH0pO1xufTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsKGVudHJpZXMpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxuICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlXG4gIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcbiAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmVcbiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuICB9KTtcbiAgYGBgXG5cbiAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblxuICBgYGBqYXZhc2NyaXB0XG4gIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXG4gIGBgYFxuXG4gIEBtZXRob2QgcmFjZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxuICBwcm9taXNlIHRvIHNldHRsZS5cbiovXG5mdW5jdGlvbiByYWNlKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG59XG5cbmZ1bmN0aW9uIG5lZWRzTmV3KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xufVxuXG4vKipcbiAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgVGVybWlub2xvZ3lcbiAgLS0tLS0tLS0tLS1cblxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICBCYXNpYyBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tXG5cbiAgYGBganNcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvLyBvbiBzdWNjZXNzXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAvLyBvbiBmYWlsdXJlXG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgQWR2YW5jZWQgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLS0tLVxuXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgYGBganNcbiAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gIGBgYGpzXG4gIFByb21pc2UuYWxsKFtcbiAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0pO1xuICBgYGBcblxuICBAY2xhc3MgUHJvbWlzZVxuICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEBjb25zdHJ1Y3RvclxuKi9cbmZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgfVxufVxuXG5Qcm9taXNlLmFsbCA9IGFsbDtcblByb21pc2UucmFjZSA9IHJhY2U7XG5Qcm9taXNlLnJlc29sdmUgPSByZXNvbHZlO1xuUHJvbWlzZS5yZWplY3QgPSByZWplY3Q7XG5Qcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlLl9zZXRBc2FwID0gc2V0QXNhcDtcblByb21pc2UuX2FzYXAgPSBhc2FwO1xuXG5Qcm9taXNlLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFByb21pc2UsXG5cbiAgLyoqXG4gICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG4gICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQ2hhaW5pbmdcbiAgICAtLS0tLS0tLVxuICBcbiAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiB1c2VyLm5hbWU7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgICB9KTtcbiAgXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG4gICAgfSk7XG4gICAgYGBgXG4gICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFzc2ltaWxhdGlvblxuICAgIC0tLS0tLS0tLS0tLVxuICBcbiAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcbiAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBTaW1wbGUgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCByZXN1bHQ7XG4gIFxuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCBhdXRob3IsIGJvb2tzO1xuICBcbiAgICB0cnkge1xuICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgRXJyYmFjayBFeGFtcGxlXG4gIFxuICAgIGBgYGpzXG4gIFxuICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgXG4gICAgfVxuICBcbiAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuICBcbiAgICB9XG4gIFxuICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgZmluZEF1dGhvcigpLlxuICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG4gICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCB0aGVuXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gIHRoZW46IHRoZW4sXG5cbiAgLyoqXG4gICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG4gIFxuICAgIGBgYGpzXG4gICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG4gICAgfVxuICBcbiAgICAvLyBzeW5jaHJvbm91c1xuICAgIHRyeSB7XG4gICAgICBmaW5kQXV0aG9yKCk7XG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfVxuICBcbiAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG4gICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIGNhdGNoXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cbiAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IGdsb2JhbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IHNlbGY7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgIGlmIChQKSB7XG4gICAgICAgIHZhciBwcm9taXNlVG9TdHJpbmcgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvY2FsLlByb21pc2UgPSBQcm9taXNlO1xufVxuXG5wb2x5ZmlsbCgpO1xuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZS5wb2x5ZmlsbCA9IHBvbHlmaWxsO1xuUHJvbWlzZS5Qcm9taXNlID0gUHJvbWlzZTtcblxucmV0dXJuIFByb21pc2U7XG5cbn0pKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lczYtcHJvbWlzZS5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9lczYtcHJvbWlzZS9kaXN0L2VzNi1wcm9taXNlLmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gdGhlIHdoYXR3Zy1mZXRjaCBwb2x5ZmlsbCBpbnN0YWxscyB0aGUgZmV0Y2goKSBmdW5jdGlvblxuLy8gb24gdGhlIGdsb2JhbCBvYmplY3QgKHdpbmRvdyBvciBzZWxmKVxuLy9cbi8vIFJldHVybiB0aGF0IGFzIHRoZSBleHBvcnQgZm9yIHVzZSBpbiBXZWJwYWNrLCBCcm93c2VyaWZ5IGV0Yy5cbnJlcXVpcmUoJ3doYXR3Zy1mZXRjaCcpO1xubW9kdWxlLmV4cG9ydHMgPSBzZWxmLmZldGNoLmJpbmQoc2VsZik7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9pc29tb3JwaGljLWZldGNoL2ZldGNoLW5wbS1icm93c2VyaWZ5LmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiKGZ1bmN0aW9uKHNlbGYpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGlmIChzZWxmLmZldGNoKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG4gICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIHNlbGYgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gICAgYmxvYjogJ0ZpbGVSZWFkZXInIGluIHNlbGYgJiYgJ0Jsb2InIGluIHNlbGYgJiYgKGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbmV3IEJsb2IoKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pKCksXG4gICAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gc2VsZixcbiAgICBhcnJheUJ1ZmZlcjogJ0FycmF5QnVmZmVyJyBpbiBzZWxmXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG4gICAgfVxuICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUnKVxuICAgIH1cbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICAvLyBCdWlsZCBhIGRlc3RydWN0aXZlIGl0ZXJhdG9yIGZvciB0aGUgdmFsdWUgbGlzdFxuICBmdW5jdGlvbiBpdGVyYXRvckZvcihpdGVtcykge1xuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBpdGVtcy5zaGlmdCgpXG4gICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvclxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpdGVyYXRvclxuICB9XG5cbiAgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG4gICAgdGhpcy5tYXAgPSB7fVxuXG4gICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG4gICAgICB9LCB0aGlzKVxuXG4gICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcbiAgICAgIH0sIHRoaXMpXG4gICAgfVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gICAgdmFyIGxpc3QgPSB0aGlzLm1hcFtuYW1lXVxuICAgIGlmICghbGlzdCkge1xuICAgICAgbGlzdCA9IFtdXG4gICAgICB0aGlzLm1hcFtuYW1lXSA9IGxpc3RcbiAgICB9XG4gICAgbGlzdC5wdXNoKHZhbHVlKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICAgIHJldHVybiB2YWx1ZXMgPyB2YWx1ZXNbMF0gOiBudWxsXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldIHx8IFtdXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gW25vcm1hbGl6ZVZhbHVlKHZhbHVlKV1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMubWFwKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHRoaXMubWFwW25hbWVdLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcylcbiAgICAgIH0sIHRoaXMpXG4gICAgfSwgdGhpcylcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKG5hbWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsgaXRlbXMucHVzaCh2YWx1ZSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuICAgICAgfVxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYilcbiAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgfVxuXG4gIGZ1bmN0aW9uIEJvZHkoKSB7XG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cbiAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keVxuICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcbiAgICAgIH0gZWxzZSBpZiAoIWJvZHkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSAnJ1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIC8vIE9ubHkgc3VwcG9ydCBBcnJheUJ1ZmZlcnMgZm9yIFBPU1QgbWV0aG9kLlxuICAgICAgICAvLyBSZWNlaXZpbmcgQXJyYXlCdWZmZXJzIGhhcHBlbnMgdmlhIEJsb2JzLCBpbnN0ZWFkLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBCb2R5SW5pdCB0eXBlJylcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsIHRoaXMuX2JvZHlCbG9iLnR5cGUpXG4gICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG4gICAgICB9XG5cbiAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkID8gcmVqZWN0ZWQgOiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG4gIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICByZXR1cm4gKG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xKSA/IHVwY2FzZWQgOiBtZXRob2RcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG4gICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpKSB7XG4gICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICAgIH1cbiAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG4gICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG4gICAgICB9XG4gICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXJsID0gaW5wdXRcbiAgICB9XG5cbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIH1cbiAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJylcbiAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcbiAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXG4gICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICAgIH1cbiAgICB0aGlzLl9pbml0Qm9keShib2R5KVxuICB9XG5cbiAgUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZm9ybVxuICB9XG5cbiAgZnVuY3Rpb24gaGVhZGVycyh4aHIpIHtcbiAgICB2YXIgaGVhZCA9IG5ldyBIZWFkZXJzKClcbiAgICB2YXIgcGFpcnMgPSAoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKS50cmltKCkuc3BsaXQoJ1xcbicpXG4gICAgcGFpcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgIHZhciBzcGxpdCA9IGhlYWRlci50cmltKCkuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG4gICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc6JykudHJpbSgpXG4gICAgICBoZWFkLmFwcGVuZChrZXksIHZhbHVlKVxuICAgIH0pXG4gICAgcmV0dXJuIGhlYWRcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSlcblxuICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9XG4gICAgfVxuXG4gICAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG4gICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgICB0aGlzLnN0YXR1c1RleHQgPSBvcHRpb25zLnN0YXR1c1RleHRcbiAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIHRoaXMudXJsID0gb3B0aW9ucy51cmwgfHwgJydcbiAgICB0aGlzLl9pbml0Qm9keShib2R5SW5pdClcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpXG5cbiAgUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZSh0aGlzLl9ib2R5SW5pdCwge1xuICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyksXG4gICAgICB1cmw6IHRoaXMudXJsXG4gICAgfSlcbiAgfVxuXG4gIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDAsIHN0YXR1c1RleHQ6ICcnfSlcbiAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cbiAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbiAgfVxuXG4gIHNlbGYuSGVhZGVycyA9IEhlYWRlcnNcbiAgc2VsZi5SZXF1ZXN0ID0gUmVxdWVzdFxuICBzZWxmLlJlc3BvbnNlID0gUmVzcG9uc2VcblxuICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVxdWVzdFxuICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG4gICAgICAgIHJlcXVlc3QgPSBpbnB1dFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuICAgICAgfVxuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgICAgZnVuY3Rpb24gcmVzcG9uc2VVUkwoKSB7XG4gICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VVUkxcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF2b2lkIHNlY3VyaXR5IHdhcm5pbmdzIG9uIGdldFJlc3BvbnNlSGVhZGVyIHdoZW4gbm90IGFsbG93ZWQgYnkgQ09SU1xuICAgICAgICBpZiAoL15YLVJlcXVlc3QtVVJMOi9tLnRlc3QoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSkge1xuICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoeGhyKSxcbiAgICAgICAgICB1cmw6IHJlc3BvbnNlVVJMKClcbiAgICAgICAgfVxuICAgICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dFxuICAgICAgICByZXNvbHZlKG5ldyBSZXNwb25zZShib2R5LCBvcHRpb25zKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC51cmwsIHRydWUpXG5cbiAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJ1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcbiAgICAgIH0pXG5cbiAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG4gICAgfSlcbiAgfVxuICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vd2hhdHdnLWZldGNoL2ZldGNoLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgdXJsXzEgPSByZXF1aXJlKFwidXJsXCIpO1xudmFyIEFjY291bnRfMSA9IHJlcXVpcmUoXCIuL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQWNjb3VudFwiKTtcbnZhciBDbGllbnRJbmZvXzEgPSByZXF1aXJlKFwiLi9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0NsaWVudEluZm9cIik7XG52YXIgTnVtYmVyUG9vbF8xID0gcmVxdWlyZShcIi4vZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9OdW1iZXJQb29sXCIpO1xudmFyIFJpbmdjZW50cmFsID0gcmVxdWlyZShcInJpbmdjZW50cmFsXCIpO1xudmFyIENsaWVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2xpZW50KG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMgaW5zdGFuY2VvZiBSaW5nY2VudHJhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlID0gb3B0cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdHMuc2VydmVyID0gb3B0cy5zZXJ2ZXIgfHwgU0VSVkVSX1BST0RVQ1RJT047XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2UgPSBuZXcgUmluZ2NlbnRyYWwob3B0cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRklYTUU6IEFsbG93IGFkZGl0aW9uYWwgb3B0aW9uczogYnJhbmRfaWQsIGRpc3BsYXksIHByb21wdGU/XG4gICAgICovXG4gICAgQ2xpZW50LnByb3RvdHlwZS5sb2dpblVybCA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2UucGxhdGZvcm0oKS5sb2dpblVybChvcHRzKTtcbiAgICB9O1xuICAgIENsaWVudC5wcm90b3R5cGUubG9naW4gPSBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLnBsYXRmb3JtKCkubG9naW4ob3B0cyk7XG4gICAgfTtcbiAgICBDbGllbnQucHJvdG90eXBlLmdldEF1dGhDb2RlID0gZnVuY3Rpb24gKGNhbGxiYWNrVXJsKSB7XG4gICAgICAgIHZhciByZXMgPSB1cmxfMS5wYXJzZShjYWxsYmFja1VybCwgdHJ1ZSkucXVlcnk7XG4gICAgICAgIHZhciBjb2RlID0gcmVzW1wiY29kZVwiXTtcbiAgICAgICAgaWYgKGNvZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc1tcImVycm9yX2Rlc2NyaXB0aW9uXCJdKSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKHJlc1tcImVycm9yX2Rlc2NyaXB0aW9uXCJdKTtcbiAgICAgICAgICAgIGVyci5uYW1lID0gcmVzW1wiZXJyb3JcIl07XG4gICAgICAgICAgICBlcnJbXCJlcnJvcnNcIl0gPSByZXNbXCJlcnJvcnNcIl07XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENsaWVudC5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLnBsYXRmb3JtKCkubG9nb3V0KCk7XG4gICAgfTtcbiAgICBDbGllbnQucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2dE5hbWUsIGhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlLnBsYXRmb3JtKCkub24oZXZ0TmFtZSwgaGFuZGxlcik7XG4gICAgfTtcbiAgICBDbGllbnQucHJvdG90eXBlLmNyZWF0ZVN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5jcmVhdGVTdWJzY3JpcHRpb24oKTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc292bGVzIGlmIGFjY2VzcyB0b2tlbiBpcyB2YWxpZCBvciByZWZyZXNoIHRva2VuIGlzIHZhbGlkLCBhbmQgcmVmcmVzaCB0aGUgdG9rZW4gaWYgbmVlZGVkLiAqL1xuICAgIENsaWVudC5wcm90b3R5cGUuZW5zdXJlTG9nZ2VkSW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2UucGxhdGZvcm0oKS5lbnN1cmVMb2dnZWRJbigpO1xuICAgIH07XG4gICAgQ2xpZW50LnByb3RvdHlwZS5hY2NvdW50ID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWNjb3VudF8xLmRlZmF1bHQobnVsbCwgaWQsIHRoaXMuc2VydmljZS5wbGF0Zm9ybSgpKTtcbiAgICB9O1xuICAgIENsaWVudC5wcm90b3R5cGUuY2xpZW50SW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDbGllbnRJbmZvXzEuZGVmYXVsdChudWxsLCBudWxsLCB0aGlzLnNlcnZpY2UucGxhdGZvcm0oKSk7XG4gICAgfTtcbiAgICBDbGllbnQucHJvdG90eXBlLm51bWJlclBvb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTnVtYmVyUG9vbF8xLmRlZmF1bHQobnVsbCwgbnVsbCwgdGhpcy5zZXJ2aWNlLnBsYXRmb3JtKCkpO1xuICAgIH07XG4gICAgcmV0dXJuIENsaWVudDtcbn0oKSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBDbGllbnQ7XG5leHBvcnRzLkNsaWVudCA9IENsaWVudDtcbnZhciBTRVJWRVJfUFJPRFVDVElPTiA9IFwiaHR0cHM6Ly9wbGF0Zm9ybS5yaW5nY2VudHJhbC5jb21cIjtcbmV4cG9ydHMuU0VSVkVSX1BST0RVQ1RJT04gPSBTRVJWRVJfUFJPRFVDVElPTjtcbnZhciBTRVJWRVJfU0FOREJPWCA9IFwiaHR0cHM6Ly9wbGF0Zm9ybS5kZXZ0ZXN0LnJpbmdjZW50cmFsLmNvbVwiO1xuZXhwb3J0cy5TRVJWRVJfU0FOREJPWCA9IFNFUlZFUl9TQU5EQk9YO1xuLy8gQXV0aCBldmVudHNcbnZhciBFVkVOVF9MT0dJTl9TVEFSVCA9IFwiYmVmb3JlTG9naW5cIjtcbmV4cG9ydHMuRVZFTlRfTE9HSU5fU1RBUlQgPSBFVkVOVF9MT0dJTl9TVEFSVDtcbnZhciBFVkVOVF9MT0dJTl9TVUNDRVNTID0gXCJsb2dpblN1Y2Nlc3NcIjtcbmV4cG9ydHMuRVZFTlRfTE9HSU5fU1VDQ0VTUyA9IEVWRU5UX0xPR0lOX1NVQ0NFU1M7XG52YXIgRVZFTlRfTE9HSU5fRVJST1IgPSBcImxvZ2luRXJyb3JcIjtcbmV4cG9ydHMuRVZFTlRfTE9HSU5fRVJST1IgPSBFVkVOVF9MT0dJTl9FUlJPUjtcbnZhciBFVkVOVF9SRUZSRVNIX1NUQVJUID0gXCJiZWZvcmVSZWZyZXNoXCI7XG5leHBvcnRzLkVWRU5UX1JFRlJFU0hfU1RBUlQgPSBFVkVOVF9SRUZSRVNIX1NUQVJUO1xudmFyIEVWRU5UX1JFRlJFU0hfU1VDQ0VTUyA9IFwicmVmcmVzaFN1Y2Nlc3NcIjtcbmV4cG9ydHMuRVZFTlRfUkVGUkVTSF9TVUNDRVNTID0gRVZFTlRfUkVGUkVTSF9TVUNDRVNTO1xudmFyIEVWRU5UX1JFRlJFU0hfRVJST1IgPSBcInJlZnJlc2hFcnJvclwiO1xuZXhwb3J0cy5FVkVOVF9SRUZSRVNIX0VSUk9SID0gRVZFTlRfUkVGUkVTSF9FUlJPUjtcbnZhciBFVkVOVF9MT0dPVVRfU1RBUlQgPSBcImJlZm9yZUxvZ291dFwiO1xuZXhwb3J0cy5FVkVOVF9MT0dPVVRfU1RBUlQgPSBFVkVOVF9MT0dPVVRfU1RBUlQ7XG52YXIgRVZFTlRfTE9HT1VUX1NVQ0NFU1MgPSBcImxvZ291dFN1Y2Nlc3NcIjtcbmV4cG9ydHMuRVZFTlRfTE9HT1VUX1NVQ0NFU1MgPSBFVkVOVF9MT0dPVVRfU1VDQ0VTUztcbnZhciBFVkVOVF9MT0dPVVRfRVJST1IgPSBcImxvZ291dEVycm9yXCI7XG5leHBvcnRzLkVWRU5UX0xPR09VVF9FUlJPUiA9IEVWRU5UX0xPR09VVF9FUlJPUjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvQ2xpZW50LmpzXG4gKiogbW9kdWxlIGlkID0gN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciBwdW55Y29kZSA9IHJlcXVpcmUoJ3B1bnljb2RlJyk7XG5cbmV4cG9ydHMucGFyc2UgPSB1cmxQYXJzZTtcbmV4cG9ydHMucmVzb2x2ZSA9IHVybFJlc29sdmU7XG5leHBvcnRzLnJlc29sdmVPYmplY3QgPSB1cmxSZXNvbHZlT2JqZWN0O1xuZXhwb3J0cy5mb3JtYXQgPSB1cmxGb3JtYXQ7XG5cbmV4cG9ydHMuVXJsID0gVXJsO1xuXG5mdW5jdGlvbiBVcmwoKSB7XG4gIHRoaXMucHJvdG9jb2wgPSBudWxsO1xuICB0aGlzLnNsYXNoZXMgPSBudWxsO1xuICB0aGlzLmF1dGggPSBudWxsO1xuICB0aGlzLmhvc3QgPSBudWxsO1xuICB0aGlzLnBvcnQgPSBudWxsO1xuICB0aGlzLmhvc3RuYW1lID0gbnVsbDtcbiAgdGhpcy5oYXNoID0gbnVsbDtcbiAgdGhpcy5zZWFyY2ggPSBudWxsO1xuICB0aGlzLnF1ZXJ5ID0gbnVsbDtcbiAgdGhpcy5wYXRobmFtZSA9IG51bGw7XG4gIHRoaXMucGF0aCA9IG51bGw7XG4gIHRoaXMuaHJlZiA9IG51bGw7XG59XG5cbi8vIFJlZmVyZW5jZTogUkZDIDM5ODYsIFJGQyAxODA4LCBSRkMgMjM5NlxuXG4vLyBkZWZpbmUgdGhlc2UgaGVyZSBzbyBhdCBsZWFzdCB0aGV5IG9ubHkgaGF2ZSB0byBiZVxuLy8gY29tcGlsZWQgb25jZSBvbiB0aGUgZmlyc3QgbW9kdWxlIGxvYWQuXG52YXIgcHJvdG9jb2xQYXR0ZXJuID0gL14oW2EtejAtOS4rLV0rOikvaSxcbiAgICBwb3J0UGF0dGVybiA9IC86WzAtOV0qJC8sXG5cbiAgICAvLyBSRkMgMjM5NjogY2hhcmFjdGVycyByZXNlcnZlZCBmb3IgZGVsaW1pdGluZyBVUkxzLlxuICAgIC8vIFdlIGFjdHVhbGx5IGp1c3QgYXV0by1lc2NhcGUgdGhlc2UuXG4gICAgZGVsaW1zID0gWyc8JywgJz4nLCAnXCInLCAnYCcsICcgJywgJ1xccicsICdcXG4nLCAnXFx0J10sXG5cbiAgICAvLyBSRkMgMjM5NjogY2hhcmFjdGVycyBub3QgYWxsb3dlZCBmb3IgdmFyaW91cyByZWFzb25zLlxuICAgIHVud2lzZSA9IFsneycsICd9JywgJ3wnLCAnXFxcXCcsICdeJywgJ2AnXS5jb25jYXQoZGVsaW1zKSxcblxuICAgIC8vIEFsbG93ZWQgYnkgUkZDcywgYnV0IGNhdXNlIG9mIFhTUyBhdHRhY2tzLiAgQWx3YXlzIGVzY2FwZSB0aGVzZS5cbiAgICBhdXRvRXNjYXBlID0gWydcXCcnXS5jb25jYXQodW53aXNlKSxcbiAgICAvLyBDaGFyYWN0ZXJzIHRoYXQgYXJlIG5ldmVyIGV2ZXIgYWxsb3dlZCBpbiBhIGhvc3RuYW1lLlxuICAgIC8vIE5vdGUgdGhhdCBhbnkgaW52YWxpZCBjaGFycyBhcmUgYWxzbyBoYW5kbGVkLCBidXQgdGhlc2VcbiAgICAvLyBhcmUgdGhlIG9uZXMgdGhhdCBhcmUgKmV4cGVjdGVkKiB0byBiZSBzZWVuLCBzbyB3ZSBmYXN0LXBhdGhcbiAgICAvLyB0aGVtLlxuICAgIG5vbkhvc3RDaGFycyA9IFsnJScsICcvJywgJz8nLCAnOycsICcjJ10uY29uY2F0KGF1dG9Fc2NhcGUpLFxuICAgIGhvc3RFbmRpbmdDaGFycyA9IFsnLycsICc/JywgJyMnXSxcbiAgICBob3N0bmFtZU1heExlbiA9IDI1NSxcbiAgICBob3N0bmFtZVBhcnRQYXR0ZXJuID0gL15bYS16MC05QS1aXy1dezAsNjN9JC8sXG4gICAgaG9zdG5hbWVQYXJ0U3RhcnQgPSAvXihbYS16MC05QS1aXy1dezAsNjN9KSguKikkLyxcbiAgICAvLyBwcm90b2NvbHMgdGhhdCBjYW4gYWxsb3cgXCJ1bnNhZmVcIiBhbmQgXCJ1bndpc2VcIiBjaGFycy5cbiAgICB1bnNhZmVQcm90b2NvbCA9IHtcbiAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcbiAgICAgICdqYXZhc2NyaXB0Oic6IHRydWVcbiAgICB9LFxuICAgIC8vIHByb3RvY29scyB0aGF0IG5ldmVyIGhhdmUgYSBob3N0bmFtZS5cbiAgICBob3N0bGVzc1Byb3RvY29sID0ge1xuICAgICAgJ2phdmFzY3JpcHQnOiB0cnVlLFxuICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZVxuICAgIH0sXG4gICAgLy8gcHJvdG9jb2xzIHRoYXQgYWx3YXlzIGNvbnRhaW4gYSAvLyBiaXQuXG4gICAgc2xhc2hlZFByb3RvY29sID0ge1xuICAgICAgJ2h0dHAnOiB0cnVlLFxuICAgICAgJ2h0dHBzJzogdHJ1ZSxcbiAgICAgICdmdHAnOiB0cnVlLFxuICAgICAgJ2dvcGhlcic6IHRydWUsXG4gICAgICAnZmlsZSc6IHRydWUsXG4gICAgICAnaHR0cDonOiB0cnVlLFxuICAgICAgJ2h0dHBzOic6IHRydWUsXG4gICAgICAnZnRwOic6IHRydWUsXG4gICAgICAnZ29waGVyOic6IHRydWUsXG4gICAgICAnZmlsZTonOiB0cnVlXG4gICAgfSxcbiAgICBxdWVyeXN0cmluZyA9IHJlcXVpcmUoJ3F1ZXJ5c3RyaW5nJyk7XG5cbmZ1bmN0aW9uIHVybFBhcnNlKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpIHtcbiAgaWYgKHVybCAmJiBpc09iamVjdCh1cmwpICYmIHVybCBpbnN0YW5jZW9mIFVybCkgcmV0dXJuIHVybDtcblxuICB2YXIgdSA9IG5ldyBVcmw7XG4gIHUucGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCk7XG4gIHJldHVybiB1O1xufVxuXG5VcmwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24odXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuICBpZiAoIWlzU3RyaW5nKHVybCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUGFyYW1ldGVyICd1cmwnIG11c3QgYmUgYSBzdHJpbmcsIG5vdCBcIiArIHR5cGVvZiB1cmwpO1xuICB9XG5cbiAgdmFyIHJlc3QgPSB1cmw7XG5cbiAgLy8gdHJpbSBiZWZvcmUgcHJvY2VlZGluZy5cbiAgLy8gVGhpcyBpcyB0byBzdXBwb3J0IHBhcnNlIHN0dWZmIGxpa2UgXCIgIGh0dHA6Ly9mb28uY29tICBcXG5cIlxuICByZXN0ID0gcmVzdC50cmltKCk7XG5cbiAgdmFyIHByb3RvID0gcHJvdG9jb2xQYXR0ZXJuLmV4ZWMocmVzdCk7XG4gIGlmIChwcm90bykge1xuICAgIHByb3RvID0gcHJvdG9bMF07XG4gICAgdmFyIGxvd2VyUHJvdG8gPSBwcm90by50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMucHJvdG9jb2wgPSBsb3dlclByb3RvO1xuICAgIHJlc3QgPSByZXN0LnN1YnN0cihwcm90by5sZW5ndGgpO1xuICB9XG5cbiAgLy8gZmlndXJlIG91dCBpZiBpdCdzIGdvdCBhIGhvc3RcbiAgLy8gdXNlckBzZXJ2ZXIgaXMgKmFsd2F5cyogaW50ZXJwcmV0ZWQgYXMgYSBob3N0bmFtZSwgYW5kIHVybFxuICAvLyByZXNvbHV0aW9uIHdpbGwgdHJlYXQgLy9mb28vYmFyIGFzIGhvc3Q9Zm9vLHBhdGg9YmFyIGJlY2F1c2UgdGhhdCdzXG4gIC8vIGhvdyB0aGUgYnJvd3NlciByZXNvbHZlcyByZWxhdGl2ZSBVUkxzLlxuICBpZiAoc2xhc2hlc0Rlbm90ZUhvc3QgfHwgcHJvdG8gfHwgcmVzdC5tYXRjaCgvXlxcL1xcL1teQFxcL10rQFteQFxcL10rLykpIHtcbiAgICB2YXIgc2xhc2hlcyA9IHJlc3Quc3Vic3RyKDAsIDIpID09PSAnLy8nO1xuICAgIGlmIChzbGFzaGVzICYmICEocHJvdG8gJiYgaG9zdGxlc3NQcm90b2NvbFtwcm90b10pKSB7XG4gICAgICByZXN0ID0gcmVzdC5zdWJzdHIoMik7XG4gICAgICB0aGlzLnNsYXNoZXMgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICghaG9zdGxlc3NQcm90b2NvbFtwcm90b10gJiZcbiAgICAgIChzbGFzaGVzIHx8IChwcm90byAmJiAhc2xhc2hlZFByb3RvY29sW3Byb3RvXSkpKSB7XG5cbiAgICAvLyB0aGVyZSdzIGEgaG9zdG5hbWUuXG4gICAgLy8gdGhlIGZpcnN0IGluc3RhbmNlIG9mIC8sID8sIDssIG9yICMgZW5kcyB0aGUgaG9zdC5cbiAgICAvL1xuICAgIC8vIElmIHRoZXJlIGlzIGFuIEAgaW4gdGhlIGhvc3RuYW1lLCB0aGVuIG5vbi1ob3N0IGNoYXJzICphcmUqIGFsbG93ZWRcbiAgICAvLyB0byB0aGUgbGVmdCBvZiB0aGUgbGFzdCBAIHNpZ24sIHVubGVzcyBzb21lIGhvc3QtZW5kaW5nIGNoYXJhY3RlclxuICAgIC8vIGNvbWVzICpiZWZvcmUqIHRoZSBALXNpZ24uXG4gICAgLy8gVVJMcyBhcmUgb2Jub3hpb3VzLlxuICAgIC8vXG4gICAgLy8gZXg6XG4gICAgLy8gaHR0cDovL2FAYkBjLyA9PiB1c2VyOmFAYiBob3N0OmNcbiAgICAvLyBodHRwOi8vYUBiP0BjID0+IHVzZXI6YSBob3N0OmMgcGF0aDovP0BjXG5cbiAgICAvLyB2MC4xMiBUT0RPKGlzYWFjcyk6IFRoaXMgaXMgbm90IHF1aXRlIGhvdyBDaHJvbWUgZG9lcyB0aGluZ3MuXG4gICAgLy8gUmV2aWV3IG91ciB0ZXN0IGNhc2UgYWdhaW5zdCBicm93c2VycyBtb3JlIGNvbXByZWhlbnNpdmVseS5cblxuICAgIC8vIGZpbmQgdGhlIGZpcnN0IGluc3RhbmNlIG9mIGFueSBob3N0RW5kaW5nQ2hhcnNcbiAgICB2YXIgaG9zdEVuZCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9zdEVuZGluZ0NoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKGhvc3RFbmRpbmdDaGFyc1tpXSk7XG4gICAgICBpZiAoaGVjICE9PSAtMSAmJiAoaG9zdEVuZCA9PT0gLTEgfHwgaGVjIDwgaG9zdEVuZCkpXG4gICAgICAgIGhvc3RFbmQgPSBoZWM7XG4gICAgfVxuXG4gICAgLy8gYXQgdGhpcyBwb2ludCwgZWl0aGVyIHdlIGhhdmUgYW4gZXhwbGljaXQgcG9pbnQgd2hlcmUgdGhlXG4gICAgLy8gYXV0aCBwb3J0aW9uIGNhbm5vdCBnbyBwYXN0LCBvciB0aGUgbGFzdCBAIGNoYXIgaXMgdGhlIGRlY2lkZXIuXG4gICAgdmFyIGF1dGgsIGF0U2lnbjtcbiAgICBpZiAoaG9zdEVuZCA9PT0gLTEpIHtcbiAgICAgIC8vIGF0U2lnbiBjYW4gYmUgYW55d2hlcmUuXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGF0U2lnbiBtdXN0IGJlIGluIGF1dGggcG9ydGlvbi5cbiAgICAgIC8vIGh0dHA6Ly9hQGIvY0BkID0+IGhvc3Q6YiBhdXRoOmEgcGF0aDovY0BkXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJywgaG9zdEVuZCk7XG4gICAgfVxuXG4gICAgLy8gTm93IHdlIGhhdmUgYSBwb3J0aW9uIHdoaWNoIGlzIGRlZmluaXRlbHkgdGhlIGF1dGguXG4gICAgLy8gUHVsbCB0aGF0IG9mZi5cbiAgICBpZiAoYXRTaWduICE9PSAtMSkge1xuICAgICAgYXV0aCA9IHJlc3Quc2xpY2UoMCwgYXRTaWduKTtcbiAgICAgIHJlc3QgPSByZXN0LnNsaWNlKGF0U2lnbiArIDEpO1xuICAgICAgdGhpcy5hdXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KGF1dGgpO1xuICAgIH1cblxuICAgIC8vIHRoZSBob3N0IGlzIHRoZSByZW1haW5pbmcgdG8gdGhlIGxlZnQgb2YgdGhlIGZpcnN0IG5vbi1ob3N0IGNoYXJcbiAgICBob3N0RW5kID0gLTE7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub25Ib3N0Q2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBoZWMgPSByZXN0LmluZGV4T2Yobm9uSG9zdENoYXJzW2ldKTtcbiAgICAgIGlmIChoZWMgIT09IC0xICYmIChob3N0RW5kID09PSAtMSB8fCBoZWMgPCBob3N0RW5kKSlcbiAgICAgICAgaG9zdEVuZCA9IGhlYztcbiAgICB9XG4gICAgLy8gaWYgd2Ugc3RpbGwgaGF2ZSBub3QgaGl0IGl0LCB0aGVuIHRoZSBlbnRpcmUgdGhpbmcgaXMgYSBob3N0LlxuICAgIGlmIChob3N0RW5kID09PSAtMSlcbiAgICAgIGhvc3RFbmQgPSByZXN0Lmxlbmd0aDtcblxuICAgIHRoaXMuaG9zdCA9IHJlc3Quc2xpY2UoMCwgaG9zdEVuZCk7XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoaG9zdEVuZCk7XG5cbiAgICAvLyBwdWxsIG91dCBwb3J0LlxuICAgIHRoaXMucGFyc2VIb3N0KCk7XG5cbiAgICAvLyB3ZSd2ZSBpbmRpY2F0ZWQgdGhhdCB0aGVyZSBpcyBhIGhvc3RuYW1lLFxuICAgIC8vIHNvIGV2ZW4gaWYgaXQncyBlbXB0eSwgaXQgaGFzIHRvIGJlIHByZXNlbnQuXG4gICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7XG5cbiAgICAvLyBpZiBob3N0bmFtZSBiZWdpbnMgd2l0aCBbIGFuZCBlbmRzIHdpdGggXVxuICAgIC8vIGFzc3VtZSB0aGF0IGl0J3MgYW4gSVB2NiBhZGRyZXNzLlxuICAgIHZhciBpcHY2SG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lWzBdID09PSAnWycgJiZcbiAgICAgICAgdGhpcy5ob3N0bmFtZVt0aGlzLmhvc3RuYW1lLmxlbmd0aCAtIDFdID09PSAnXSc7XG5cbiAgICAvLyB2YWxpZGF0ZSBhIGxpdHRsZS5cbiAgICBpZiAoIWlwdjZIb3N0bmFtZSkge1xuICAgICAgdmFyIGhvc3RwYXJ0cyA9IHRoaXMuaG9zdG5hbWUuc3BsaXQoL1xcLi8pO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBob3N0cGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBwYXJ0ID0gaG9zdHBhcnRzW2ldO1xuICAgICAgICBpZiAoIXBhcnQpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIXBhcnQubWF0Y2goaG9zdG5hbWVQYXJ0UGF0dGVybikpIHtcbiAgICAgICAgICB2YXIgbmV3cGFydCA9ICcnO1xuICAgICAgICAgIGZvciAodmFyIGogPSAwLCBrID0gcGFydC5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LmNoYXJDb2RlQXQoaikgPiAxMjcpIHtcbiAgICAgICAgICAgICAgLy8gd2UgcmVwbGFjZSBub24tQVNDSUkgY2hhciB3aXRoIGEgdGVtcG9yYXJ5IHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhpcyB0byBtYWtlIHN1cmUgc2l6ZSBvZiBob3N0bmFtZSBpcyBub3RcbiAgICAgICAgICAgICAgLy8gYnJva2VuIGJ5IHJlcGxhY2luZyBub24tQVNDSUkgYnkgbm90aGluZ1xuICAgICAgICAgICAgICBuZXdwYXJ0ICs9ICd4JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5ld3BhcnQgKz0gcGFydFtqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gd2UgdGVzdCBhZ2FpbiB3aXRoIEFTQ0lJIGNoYXIgb25seVxuICAgICAgICAgIGlmICghbmV3cGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkge1xuICAgICAgICAgICAgdmFyIHZhbGlkUGFydHMgPSBob3N0cGFydHMuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICB2YXIgbm90SG9zdCA9IGhvc3RwYXJ0cy5zbGljZShpICsgMSk7XG4gICAgICAgICAgICB2YXIgYml0ID0gcGFydC5tYXRjaChob3N0bmFtZVBhcnRTdGFydCk7XG4gICAgICAgICAgICBpZiAoYml0KSB7XG4gICAgICAgICAgICAgIHZhbGlkUGFydHMucHVzaChiaXRbMV0pO1xuICAgICAgICAgICAgICBub3RIb3N0LnVuc2hpZnQoYml0WzJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub3RIb3N0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXN0ID0gJy8nICsgbm90SG9zdC5qb2luKCcuJykgKyByZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ob3N0bmFtZSA9IHZhbGlkUGFydHMuam9pbignLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9zdG5hbWUubGVuZ3RoID4gaG9zdG5hbWVNYXhMZW4pIHtcbiAgICAgIHRoaXMuaG9zdG5hbWUgPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaG9zdG5hbWVzIGFyZSBhbHdheXMgbG93ZXIgY2FzZS5cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcbiAgICAgIC8vIElETkEgU3VwcG9ydDogUmV0dXJucyBhIHB1bnkgY29kZWQgcmVwcmVzZW50YXRpb24gb2YgXCJkb21haW5cIi5cbiAgICAgIC8vIEl0IG9ubHkgY29udmVydHMgdGhlIHBhcnQgb2YgdGhlIGRvbWFpbiBuYW1lIHRoYXRcbiAgICAgIC8vIGhhcyBub24gQVNDSUkgY2hhcmFjdGVycy4gSS5lLiBpdCBkb3NlbnQgbWF0dGVyIGlmXG4gICAgICAvLyB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQgYWxyZWFkeSBpcyBpbiBBU0NJSS5cbiAgICAgIHZhciBkb21haW5BcnJheSA9IHRoaXMuaG9zdG5hbWUuc3BsaXQoJy4nKTtcbiAgICAgIHZhciBuZXdPdXQgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9tYWluQXJyYXkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHMgPSBkb21haW5BcnJheVtpXTtcbiAgICAgICAgbmV3T3V0LnB1c2gocy5tYXRjaCgvW15BLVphLXowLTlfLV0vKSA/XG4gICAgICAgICAgICAneG4tLScgKyBwdW55Y29kZS5lbmNvZGUocykgOiBzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSBuZXdPdXQuam9pbignLicpO1xuICAgIH1cblxuICAgIHZhciBwID0gdGhpcy5wb3J0ID8gJzonICsgdGhpcy5wb3J0IDogJyc7XG4gICAgdmFyIGggPSB0aGlzLmhvc3RuYW1lIHx8ICcnO1xuICAgIHRoaXMuaG9zdCA9IGggKyBwO1xuICAgIHRoaXMuaHJlZiArPSB0aGlzLmhvc3Q7XG5cbiAgICAvLyBzdHJpcCBbIGFuZCBdIGZyb20gdGhlIGhvc3RuYW1lXG4gICAgLy8gdGhlIGhvc3QgZmllbGQgc3RpbGwgcmV0YWlucyB0aGVtLCB0aG91Z2hcbiAgICBpZiAoaXB2Nkhvc3RuYW1lKSB7XG4gICAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZS5zdWJzdHIoMSwgdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAyKTtcbiAgICAgIGlmIChyZXN0WzBdICE9PSAnLycpIHtcbiAgICAgICAgcmVzdCA9ICcvJyArIHJlc3Q7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gbm93IHJlc3QgaXMgc2V0IHRvIHRoZSBwb3N0LWhvc3Qgc3R1ZmYuXG4gIC8vIGNob3Agb2ZmIGFueSBkZWxpbSBjaGFycy5cbiAgaWYgKCF1bnNhZmVQcm90b2NvbFtsb3dlclByb3RvXSkge1xuXG4gICAgLy8gRmlyc3QsIG1ha2UgMTAwJSBzdXJlIHRoYXQgYW55IFwiYXV0b0VzY2FwZVwiIGNoYXJzIGdldFxuICAgIC8vIGVzY2FwZWQsIGV2ZW4gaWYgZW5jb2RlVVJJQ29tcG9uZW50IGRvZXNuJ3QgdGhpbmsgdGhleVxuICAgIC8vIG5lZWQgdG8gYmUuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdXRvRXNjYXBlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGFlID0gYXV0b0VzY2FwZVtpXTtcbiAgICAgIHZhciBlc2MgPSBlbmNvZGVVUklDb21wb25lbnQoYWUpO1xuICAgICAgaWYgKGVzYyA9PT0gYWUpIHtcbiAgICAgICAgZXNjID0gZXNjYXBlKGFlKTtcbiAgICAgIH1cbiAgICAgIHJlc3QgPSByZXN0LnNwbGl0KGFlKS5qb2luKGVzYyk7XG4gICAgfVxuICB9XG5cblxuICAvLyBjaG9wIG9mZiBmcm9tIHRoZSB0YWlsIGZpcnN0LlxuICB2YXIgaGFzaCA9IHJlc3QuaW5kZXhPZignIycpO1xuICBpZiAoaGFzaCAhPT0gLTEpIHtcbiAgICAvLyBnb3QgYSBmcmFnbWVudCBzdHJpbmcuXG4gICAgdGhpcy5oYXNoID0gcmVzdC5zdWJzdHIoaGFzaCk7XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoMCwgaGFzaCk7XG4gIH1cbiAgdmFyIHFtID0gcmVzdC5pbmRleE9mKCc/Jyk7XG4gIGlmIChxbSAhPT0gLTEpIHtcbiAgICB0aGlzLnNlYXJjaCA9IHJlc3Quc3Vic3RyKHFtKTtcbiAgICB0aGlzLnF1ZXJ5ID0gcmVzdC5zdWJzdHIocW0gKyAxKTtcbiAgICBpZiAocGFyc2VRdWVyeVN0cmluZykge1xuICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHRoaXMucXVlcnkpO1xuICAgIH1cbiAgICByZXN0ID0gcmVzdC5zbGljZSgwLCBxbSk7XG4gIH0gZWxzZSBpZiAocGFyc2VRdWVyeVN0cmluZykge1xuICAgIC8vIG5vIHF1ZXJ5IHN0cmluZywgYnV0IHBhcnNlUXVlcnlTdHJpbmcgc3RpbGwgcmVxdWVzdGVkXG4gICAgdGhpcy5zZWFyY2ggPSAnJztcbiAgICB0aGlzLnF1ZXJ5ID0ge307XG4gIH1cbiAgaWYgKHJlc3QpIHRoaXMucGF0aG5hbWUgPSByZXN0O1xuICBpZiAoc2xhc2hlZFByb3RvY29sW2xvd2VyUHJvdG9dICYmXG4gICAgICB0aGlzLmhvc3RuYW1lICYmICF0aGlzLnBhdGhuYW1lKSB7XG4gICAgdGhpcy5wYXRobmFtZSA9ICcvJztcbiAgfVxuXG4gIC8vdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgaWYgKHRoaXMucGF0aG5hbWUgfHwgdGhpcy5zZWFyY2gpIHtcbiAgICB2YXIgcCA9IHRoaXMucGF0aG5hbWUgfHwgJyc7XG4gICAgdmFyIHMgPSB0aGlzLnNlYXJjaCB8fCAnJztcbiAgICB0aGlzLnBhdGggPSBwICsgcztcbiAgfVxuXG4gIC8vIGZpbmFsbHksIHJlY29uc3RydWN0IHRoZSBocmVmIGJhc2VkIG9uIHdoYXQgaGFzIGJlZW4gdmFsaWRhdGVkLlxuICB0aGlzLmhyZWYgPSB0aGlzLmZvcm1hdCgpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGZvcm1hdCBhIHBhcnNlZCBvYmplY3QgaW50byBhIHVybCBzdHJpbmdcbmZ1bmN0aW9uIHVybEZvcm1hdChvYmopIHtcbiAgLy8gZW5zdXJlIGl0J3MgYW4gb2JqZWN0LCBhbmQgbm90IGEgc3RyaW5nIHVybC5cbiAgLy8gSWYgaXQncyBhbiBvYmosIHRoaXMgaXMgYSBuby1vcC5cbiAgLy8gdGhpcyB3YXksIHlvdSBjYW4gY2FsbCB1cmxfZm9ybWF0KCkgb24gc3RyaW5nc1xuICAvLyB0byBjbGVhbiB1cCBwb3RlbnRpYWxseSB3b25reSB1cmxzLlxuICBpZiAoaXNTdHJpbmcob2JqKSkgb2JqID0gdXJsUGFyc2Uob2JqKTtcbiAgaWYgKCEob2JqIGluc3RhbmNlb2YgVXJsKSkgcmV0dXJuIFVybC5wcm90b3R5cGUuZm9ybWF0LmNhbGwob2JqKTtcbiAgcmV0dXJuIG9iai5mb3JtYXQoKTtcbn1cblxuVXJsLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGF1dGggPSB0aGlzLmF1dGggfHwgJyc7XG4gIGlmIChhdXRoKSB7XG4gICAgYXV0aCA9IGVuY29kZVVSSUNvbXBvbmVudChhdXRoKTtcbiAgICBhdXRoID0gYXV0aC5yZXBsYWNlKC8lM0EvaSwgJzonKTtcbiAgICBhdXRoICs9ICdAJztcbiAgfVxuXG4gIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2wgfHwgJycsXG4gICAgICBwYXRobmFtZSA9IHRoaXMucGF0aG5hbWUgfHwgJycsXG4gICAgICBoYXNoID0gdGhpcy5oYXNoIHx8ICcnLFxuICAgICAgaG9zdCA9IGZhbHNlLFxuICAgICAgcXVlcnkgPSAnJztcblxuICBpZiAodGhpcy5ob3N0KSB7XG4gICAgaG9zdCA9IGF1dGggKyB0aGlzLmhvc3Q7XG4gIH0gZWxzZSBpZiAodGhpcy5ob3N0bmFtZSkge1xuICAgIGhvc3QgPSBhdXRoICsgKHRoaXMuaG9zdG5hbWUuaW5kZXhPZignOicpID09PSAtMSA/XG4gICAgICAgIHRoaXMuaG9zdG5hbWUgOlxuICAgICAgICAnWycgKyB0aGlzLmhvc3RuYW1lICsgJ10nKTtcbiAgICBpZiAodGhpcy5wb3J0KSB7XG4gICAgICBob3N0ICs9ICc6JyArIHRoaXMucG9ydDtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5xdWVyeSAmJlxuICAgICAgaXNPYmplY3QodGhpcy5xdWVyeSkgJiZcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMucXVlcnkpLmxlbmd0aCkge1xuICAgIHF1ZXJ5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHRoaXMucXVlcnkpO1xuICB9XG5cbiAgdmFyIHNlYXJjaCA9IHRoaXMuc2VhcmNoIHx8IChxdWVyeSAmJiAoJz8nICsgcXVlcnkpKSB8fCAnJztcblxuICBpZiAocHJvdG9jb2wgJiYgcHJvdG9jb2wuc3Vic3RyKC0xKSAhPT0gJzonKSBwcm90b2NvbCArPSAnOic7XG5cbiAgLy8gb25seSB0aGUgc2xhc2hlZFByb3RvY29scyBnZXQgdGhlIC8vLiAgTm90IG1haWx0bzosIHhtcHA6LCBldGMuXG4gIC8vIHVubGVzcyB0aGV5IGhhZCB0aGVtIHRvIGJlZ2luIHdpdGguXG4gIGlmICh0aGlzLnNsYXNoZXMgfHxcbiAgICAgICghcHJvdG9jb2wgfHwgc2xhc2hlZFByb3RvY29sW3Byb3RvY29sXSkgJiYgaG9zdCAhPT0gZmFsc2UpIHtcbiAgICBob3N0ID0gJy8vJyArIChob3N0IHx8ICcnKTtcbiAgICBpZiAocGF0aG5hbWUgJiYgcGF0aG5hbWUuY2hhckF0KDApICE9PSAnLycpIHBhdGhuYW1lID0gJy8nICsgcGF0aG5hbWU7XG4gIH0gZWxzZSBpZiAoIWhvc3QpIHtcbiAgICBob3N0ID0gJyc7XG4gIH1cblxuICBpZiAoaGFzaCAmJiBoYXNoLmNoYXJBdCgwKSAhPT0gJyMnKSBoYXNoID0gJyMnICsgaGFzaDtcbiAgaWYgKHNlYXJjaCAmJiBzZWFyY2guY2hhckF0KDApICE9PSAnPycpIHNlYXJjaCA9ICc/JyArIHNlYXJjaDtcblxuICBwYXRobmFtZSA9IHBhdGhuYW1lLnJlcGxhY2UoL1s/I10vZywgZnVuY3Rpb24obWF0Y2gpIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KG1hdGNoKTtcbiAgfSk7XG4gIHNlYXJjaCA9IHNlYXJjaC5yZXBsYWNlKCcjJywgJyUyMycpO1xuXG4gIHJldHVybiBwcm90b2NvbCArIGhvc3QgKyBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XG59O1xuXG5mdW5jdGlvbiB1cmxSZXNvbHZlKHNvdXJjZSwgcmVsYXRpdmUpIHtcbiAgcmV0dXJuIHVybFBhcnNlKHNvdXJjZSwgZmFsc2UsIHRydWUpLnJlc29sdmUocmVsYXRpdmUpO1xufVxuXG5VcmwucHJvdG90eXBlLnJlc29sdmUgPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xuICByZXR1cm4gdGhpcy5yZXNvbHZlT2JqZWN0KHVybFBhcnNlKHJlbGF0aXZlLCBmYWxzZSwgdHJ1ZSkpLmZvcm1hdCgpO1xufTtcblxuZnVuY3Rpb24gdXJsUmVzb2x2ZU9iamVjdChzb3VyY2UsIHJlbGF0aXZlKSB7XG4gIGlmICghc291cmNlKSByZXR1cm4gcmVsYXRpdmU7XG4gIHJldHVybiB1cmxQYXJzZShzb3VyY2UsIGZhbHNlLCB0cnVlKS5yZXNvbHZlT2JqZWN0KHJlbGF0aXZlKTtcbn1cblxuVXJsLnByb3RvdHlwZS5yZXNvbHZlT2JqZWN0ID0gZnVuY3Rpb24ocmVsYXRpdmUpIHtcbiAgaWYgKGlzU3RyaW5nKHJlbGF0aXZlKSkge1xuICAgIHZhciByZWwgPSBuZXcgVXJsKCk7XG4gICAgcmVsLnBhcnNlKHJlbGF0aXZlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgcmVsYXRpdmUgPSByZWw7XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gbmV3IFVybCgpO1xuICBPYmplY3Qua2V5cyh0aGlzKS5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcbiAgICByZXN1bHRba10gPSB0aGlzW2tdO1xuICB9LCB0aGlzKTtcblxuICAvLyBoYXNoIGlzIGFsd2F5cyBvdmVycmlkZGVuLCBubyBtYXR0ZXIgd2hhdC5cbiAgLy8gZXZlbiBocmVmPVwiXCIgd2lsbCByZW1vdmUgaXQuXG4gIHJlc3VsdC5oYXNoID0gcmVsYXRpdmUuaGFzaDtcblxuICAvLyBpZiB0aGUgcmVsYXRpdmUgdXJsIGlzIGVtcHR5LCB0aGVuIHRoZXJlJ3Mgbm90aGluZyBsZWZ0IHRvIGRvIGhlcmUuXG4gIGlmIChyZWxhdGl2ZS5ocmVmID09PSAnJykge1xuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBocmVmcyBsaWtlIC8vZm9vL2JhciBhbHdheXMgY3V0IHRvIHRoZSBwcm90b2NvbC5cbiAgaWYgKHJlbGF0aXZlLnNsYXNoZXMgJiYgIXJlbGF0aXZlLnByb3RvY29sKSB7XG4gICAgLy8gdGFrZSBldmVyeXRoaW5nIGV4Y2VwdCB0aGUgcHJvdG9jb2wgZnJvbSByZWxhdGl2ZVxuICAgIE9iamVjdC5rZXlzKHJlbGF0aXZlKS5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcbiAgICAgIGlmIChrICE9PSAncHJvdG9jb2wnKVxuICAgICAgICByZXN1bHRba10gPSByZWxhdGl2ZVtrXTtcbiAgICB9KTtcblxuICAgIC8vdXJsUGFyc2UgYXBwZW5kcyB0cmFpbGluZyAvIHRvIHVybHMgbGlrZSBodHRwOi8vd3d3LmV4YW1wbGUuY29tXG4gICAgaWYgKHNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdICYmXG4gICAgICAgIHJlc3VsdC5ob3N0bmFtZSAmJiAhcmVzdWx0LnBhdGhuYW1lKSB7XG4gICAgICByZXN1bHQucGF0aCA9IHJlc3VsdC5wYXRobmFtZSA9ICcvJztcbiAgICB9XG5cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKHJlbGF0aXZlLnByb3RvY29sICYmIHJlbGF0aXZlLnByb3RvY29sICE9PSByZXN1bHQucHJvdG9jb2wpIHtcbiAgICAvLyBpZiBpdCdzIGEga25vd24gdXJsIHByb3RvY29sLCB0aGVuIGNoYW5naW5nXG4gICAgLy8gdGhlIHByb3RvY29sIGRvZXMgd2VpcmQgdGhpbmdzXG4gICAgLy8gZmlyc3QsIGlmIGl0J3Mgbm90IGZpbGU6LCB0aGVuIHdlIE1VU1QgaGF2ZSBhIGhvc3QsXG4gICAgLy8gYW5kIGlmIHRoZXJlIHdhcyBhIHBhdGhcbiAgICAvLyB0byBiZWdpbiB3aXRoLCB0aGVuIHdlIE1VU1QgaGF2ZSBhIHBhdGguXG4gICAgLy8gaWYgaXQgaXMgZmlsZTosIHRoZW4gdGhlIGhvc3QgaXMgZHJvcHBlZCxcbiAgICAvLyBiZWNhdXNlIHRoYXQncyBrbm93biB0byBiZSBob3N0bGVzcy5cbiAgICAvLyBhbnl0aGluZyBlbHNlIGlzIGFzc3VtZWQgdG8gYmUgYWJzb2x1dGUuXG4gICAgaWYgKCFzbGFzaGVkUHJvdG9jb2xbcmVsYXRpdmUucHJvdG9jb2xdKSB7XG4gICAgICBPYmplY3Qua2V5cyhyZWxhdGl2ZSkuZm9yRWFjaChmdW5jdGlvbihrKSB7XG4gICAgICAgIHJlc3VsdFtrXSA9IHJlbGF0aXZlW2tdO1xuICAgICAgfSk7XG4gICAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmVzdWx0LnByb3RvY29sID0gcmVsYXRpdmUucHJvdG9jb2w7XG4gICAgaWYgKCFyZWxhdGl2ZS5ob3N0ICYmICFob3N0bGVzc1Byb3RvY29sW3JlbGF0aXZlLnByb3RvY29sXSkge1xuICAgICAgdmFyIHJlbFBhdGggPSAocmVsYXRpdmUucGF0aG5hbWUgfHwgJycpLnNwbGl0KCcvJyk7XG4gICAgICB3aGlsZSAocmVsUGF0aC5sZW5ndGggJiYgIShyZWxhdGl2ZS5ob3N0ID0gcmVsUGF0aC5zaGlmdCgpKSk7XG4gICAgICBpZiAoIXJlbGF0aXZlLmhvc3QpIHJlbGF0aXZlLmhvc3QgPSAnJztcbiAgICAgIGlmICghcmVsYXRpdmUuaG9zdG5hbWUpIHJlbGF0aXZlLmhvc3RuYW1lID0gJyc7XG4gICAgICBpZiAocmVsUGF0aFswXSAhPT0gJycpIHJlbFBhdGgudW5zaGlmdCgnJyk7XG4gICAgICBpZiAocmVsUGF0aC5sZW5ndGggPCAyKSByZWxQYXRoLnVuc2hpZnQoJycpO1xuICAgICAgcmVzdWx0LnBhdGhuYW1lID0gcmVsUGF0aC5qb2luKCcvJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IHJlbGF0aXZlLnBhdGhuYW1lO1xuICAgIH1cbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICAgIHJlc3VsdC5ob3N0ID0gcmVsYXRpdmUuaG9zdCB8fCAnJztcbiAgICByZXN1bHQuYXV0aCA9IHJlbGF0aXZlLmF1dGg7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVsYXRpdmUuaG9zdG5hbWUgfHwgcmVsYXRpdmUuaG9zdDtcbiAgICByZXN1bHQucG9ydCA9IHJlbGF0aXZlLnBvcnQ7XG4gICAgLy8gdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgICBpZiAocmVzdWx0LnBhdGhuYW1lIHx8IHJlc3VsdC5zZWFyY2gpIHtcbiAgICAgIHZhciBwID0gcmVzdWx0LnBhdGhuYW1lIHx8ICcnO1xuICAgICAgdmFyIHMgPSByZXN1bHQuc2VhcmNoIHx8ICcnO1xuICAgICAgcmVzdWx0LnBhdGggPSBwICsgcztcbiAgICB9XG4gICAgcmVzdWx0LnNsYXNoZXMgPSByZXN1bHQuc2xhc2hlcyB8fCByZWxhdGl2ZS5zbGFzaGVzO1xuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB2YXIgaXNTb3VyY2VBYnMgPSAocmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyksXG4gICAgICBpc1JlbEFicyA9IChcbiAgICAgICAgICByZWxhdGl2ZS5ob3N0IHx8XG4gICAgICAgICAgcmVsYXRpdmUucGF0aG5hbWUgJiYgcmVsYXRpdmUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLydcbiAgICAgICksXG4gICAgICBtdXN0RW5kQWJzID0gKGlzUmVsQWJzIHx8IGlzU291cmNlQWJzIHx8XG4gICAgICAgICAgICAgICAgICAgIChyZXN1bHQuaG9zdCAmJiByZWxhdGl2ZS5wYXRobmFtZSkpLFxuICAgICAgcmVtb3ZlQWxsRG90cyA9IG11c3RFbmRBYnMsXG4gICAgICBzcmNQYXRoID0gcmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5zcGxpdCgnLycpIHx8IFtdLFxuICAgICAgcmVsUGF0aCA9IHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLnNwbGl0KCcvJykgfHwgW10sXG4gICAgICBwc3ljaG90aWMgPSByZXN1bHQucHJvdG9jb2wgJiYgIXNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdO1xuXG4gIC8vIGlmIHRoZSB1cmwgaXMgYSBub24tc2xhc2hlZCB1cmwsIHRoZW4gcmVsYXRpdmVcbiAgLy8gbGlua3MgbGlrZSAuLi8uLiBzaG91bGQgYmUgYWJsZVxuICAvLyB0byBjcmF3bCB1cCB0byB0aGUgaG9zdG5hbWUsIGFzIHdlbGwuICBUaGlzIGlzIHN0cmFuZ2UuXG4gIC8vIHJlc3VsdC5wcm90b2NvbCBoYXMgYWxyZWFkeSBiZWVuIHNldCBieSBub3cuXG4gIC8vIExhdGVyIG9uLCBwdXQgdGhlIGZpcnN0IHBhdGggcGFydCBpbnRvIHRoZSBob3N0IGZpZWxkLlxuICBpZiAocHN5Y2hvdGljKSB7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gJyc7XG4gICAgcmVzdWx0LnBvcnQgPSBudWxsO1xuICAgIGlmIChyZXN1bHQuaG9zdCkge1xuICAgICAgaWYgKHNyY1BhdGhbMF0gPT09ICcnKSBzcmNQYXRoWzBdID0gcmVzdWx0Lmhvc3Q7XG4gICAgICBlbHNlIHNyY1BhdGgudW5zaGlmdChyZXN1bHQuaG9zdCk7XG4gICAgfVxuICAgIHJlc3VsdC5ob3N0ID0gJyc7XG4gICAgaWYgKHJlbGF0aXZlLnByb3RvY29sKSB7XG4gICAgICByZWxhdGl2ZS5ob3N0bmFtZSA9IG51bGw7XG4gICAgICByZWxhdGl2ZS5wb3J0ID0gbnVsbDtcbiAgICAgIGlmIChyZWxhdGl2ZS5ob3N0KSB7XG4gICAgICAgIGlmIChyZWxQYXRoWzBdID09PSAnJykgcmVsUGF0aFswXSA9IHJlbGF0aXZlLmhvc3Q7XG4gICAgICAgIGVsc2UgcmVsUGF0aC51bnNoaWZ0KHJlbGF0aXZlLmhvc3QpO1xuICAgICAgfVxuICAgICAgcmVsYXRpdmUuaG9zdCA9IG51bGw7XG4gICAgfVxuICAgIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzICYmIChyZWxQYXRoWzBdID09PSAnJyB8fCBzcmNQYXRoWzBdID09PSAnJyk7XG4gIH1cblxuICBpZiAoaXNSZWxBYnMpIHtcbiAgICAvLyBpdCdzIGFic29sdXRlLlxuICAgIHJlc3VsdC5ob3N0ID0gKHJlbGF0aXZlLmhvc3QgfHwgcmVsYXRpdmUuaG9zdCA9PT0gJycpID9cbiAgICAgICAgICAgICAgICAgIHJlbGF0aXZlLmhvc3QgOiByZXN1bHQuaG9zdDtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSAocmVsYXRpdmUuaG9zdG5hbWUgfHwgcmVsYXRpdmUuaG9zdG5hbWUgPT09ICcnKSA/XG4gICAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgOiByZXN1bHQuaG9zdG5hbWU7XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICBzcmNQYXRoID0gcmVsUGF0aDtcbiAgICAvLyBmYWxsIHRocm91Z2ggdG8gdGhlIGRvdC1oYW5kbGluZyBiZWxvdy5cbiAgfSBlbHNlIGlmIChyZWxQYXRoLmxlbmd0aCkge1xuICAgIC8vIGl0J3MgcmVsYXRpdmVcbiAgICAvLyB0aHJvdyBhd2F5IHRoZSBleGlzdGluZyBmaWxlLCBhbmQgdGFrZSB0aGUgbmV3IHBhdGggaW5zdGVhZC5cbiAgICBpZiAoIXNyY1BhdGgpIHNyY1BhdGggPSBbXTtcbiAgICBzcmNQYXRoLnBvcCgpO1xuICAgIHNyY1BhdGggPSBzcmNQYXRoLmNvbmNhdChyZWxQYXRoKTtcbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICB9IGVsc2UgaWYgKCFpc051bGxPclVuZGVmaW5lZChyZWxhdGl2ZS5zZWFyY2gpKSB7XG4gICAgLy8ganVzdCBwdWxsIG91dCB0aGUgc2VhcmNoLlxuICAgIC8vIGxpa2UgaHJlZj0nP2ZvbycuXG4gICAgLy8gUHV0IHRoaXMgYWZ0ZXIgdGhlIG90aGVyIHR3byBjYXNlcyBiZWNhdXNlIGl0IHNpbXBsaWZpZXMgdGhlIGJvb2xlYW5zXG4gICAgaWYgKHBzeWNob3RpYykge1xuICAgICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBzcmNQYXRoLnNoaWZ0KCk7XG4gICAgICAvL29jY2F0aW9uYWx5IHRoZSBhdXRoIGNhbiBnZXQgc3R1Y2sgb25seSBpbiBob3N0XG4gICAgICAvL3RoaXMgZXNwZWNpYWx5IGhhcHBlbnMgaW4gY2FzZXMgbGlrZVxuICAgICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcbiAgICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ob3N0LnNwbGl0KCdAJykgOiBmYWxzZTtcbiAgICAgIGlmIChhdXRoSW5Ib3N0KSB7XG4gICAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgICByZXN1bHQuaG9zdCA9IHJlc3VsdC5ob3N0bmFtZSA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKCFpc051bGwocmVzdWx0LnBhdGhuYW1lKSB8fCAhaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7XG4gICAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgICAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7XG4gICAgfVxuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBpZiAoIXNyY1BhdGgubGVuZ3RoKSB7XG4gICAgLy8gbm8gcGF0aCBhdCBhbGwuICBlYXN5LlxuICAgIC8vIHdlJ3ZlIGFscmVhZHkgaGFuZGxlZCB0aGUgb3RoZXIgc3R1ZmYgYWJvdmUuXG4gICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDtcbiAgICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKHJlc3VsdC5zZWFyY2gpIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gJy8nICsgcmVzdWx0LnNlYXJjaDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LnBhdGggPSBudWxsO1xuICAgIH1cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gaWYgYSB1cmwgRU5EcyBpbiAuIG9yIC4uLCB0aGVuIGl0IG11c3QgZ2V0IGEgdHJhaWxpbmcgc2xhc2guXG4gIC8vIGhvd2V2ZXIsIGlmIGl0IGVuZHMgaW4gYW55dGhpbmcgZWxzZSBub24tc2xhc2h5LFxuICAvLyB0aGVuIGl0IG11c3QgTk9UIGdldCBhIHRyYWlsaW5nIHNsYXNoLlxuICB2YXIgbGFzdCA9IHNyY1BhdGguc2xpY2UoLTEpWzBdO1xuICB2YXIgaGFzVHJhaWxpbmdTbGFzaCA9IChcbiAgICAgIChyZXN1bHQuaG9zdCB8fCByZWxhdGl2ZS5ob3N0KSAmJiAobGFzdCA9PT0gJy4nIHx8IGxhc3QgPT09ICcuLicpIHx8XG4gICAgICBsYXN0ID09PSAnJyk7XG5cbiAgLy8gc3RyaXAgc2luZ2xlIGRvdHMsIHJlc29sdmUgZG91YmxlIGRvdHMgdG8gcGFyZW50IGRpclxuICAvLyBpZiB0aGUgcGF0aCB0cmllcyB0byBnbyBhYm92ZSB0aGUgcm9vdCwgYHVwYCBlbmRzIHVwID4gMFxuICB2YXIgdXAgPSAwO1xuICBmb3IgKHZhciBpID0gc3JjUGF0aC5sZW5ndGg7IGkgPj0gMDsgaS0tKSB7XG4gICAgbGFzdCA9IHNyY1BhdGhbaV07XG4gICAgaWYgKGxhc3QgPT0gJy4nKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICB9IGVsc2UgaWYgKGxhc3QgPT09ICcuLicpIHtcbiAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuICBpZiAoIW11c3RFbmRBYnMgJiYgIXJlbW92ZUFsbERvdHMpIHtcbiAgICBmb3IgKDsgdXAtLTsgdXApIHtcbiAgICAgIHNyY1BhdGgudW5zaGlmdCgnLi4nKTtcbiAgICB9XG4gIH1cblxuICBpZiAobXVzdEVuZEFicyAmJiBzcmNQYXRoWzBdICE9PSAnJyAmJlxuICAgICAgKCFzcmNQYXRoWzBdIHx8IHNyY1BhdGhbMF0uY2hhckF0KDApICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC51bnNoaWZ0KCcnKTtcbiAgfVxuXG4gIGlmIChoYXNUcmFpbGluZ1NsYXNoICYmIChzcmNQYXRoLmpvaW4oJy8nKS5zdWJzdHIoLTEpICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC5wdXNoKCcnKTtcbiAgfVxuXG4gIHZhciBpc0Fic29sdXRlID0gc3JjUGF0aFswXSA9PT0gJycgfHxcbiAgICAgIChzcmNQYXRoWzBdICYmIHNyY1BhdGhbMF0uY2hhckF0KDApID09PSAnLycpO1xuXG4gIC8vIHB1dCB0aGUgaG9zdCBiYWNrXG4gIGlmIChwc3ljaG90aWMpIHtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IGlzQWJzb2x1dGUgPyAnJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNQYXRoLmxlbmd0aCA/IHNyY1BhdGguc2hpZnQoKSA6ICcnO1xuICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3RcbiAgICAvL3RoaXMgZXNwZWNpYWx5IGhhcHBlbnMgaW4gY2FzZXMgbGlrZVxuICAgIC8vdXJsLnJlc29sdmVPYmplY3QoJ21haWx0bzpsb2NhbDFAZG9tYWluMScsICdsb2NhbDJAZG9tYWluMicpXG4gICAgdmFyIGF1dGhJbkhvc3QgPSByZXN1bHQuaG9zdCAmJiByZXN1bHQuaG9zdC5pbmRleE9mKCdAJykgPiAwID9cbiAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ob3N0LnNwbGl0KCdAJykgOiBmYWxzZTtcbiAgICBpZiAoYXV0aEluSG9zdCkge1xuICAgICAgcmVzdWx0LmF1dGggPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgICByZXN1bHQuaG9zdCA9IHJlc3VsdC5ob3N0bmFtZSA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICB9XG4gIH1cblxuICBtdXN0RW5kQWJzID0gbXVzdEVuZEFicyB8fCAocmVzdWx0Lmhvc3QgJiYgc3JjUGF0aC5sZW5ndGgpO1xuXG4gIGlmIChtdXN0RW5kQWJzICYmICFpc0Fic29sdXRlKSB7XG4gICAgc3JjUGF0aC51bnNoaWZ0KCcnKTtcbiAgfVxuXG4gIGlmICghc3JjUGF0aC5sZW5ndGgpIHtcbiAgICByZXN1bHQucGF0aG5hbWUgPSBudWxsO1xuICAgIHJlc3VsdC5wYXRoID0gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQucGF0aG5hbWUgPSBzcmNQYXRoLmpvaW4oJy8nKTtcbiAgfVxuXG4gIC8vdG8gc3VwcG9ydCByZXF1ZXN0Lmh0dHBcbiAgaWYgKCFpc051bGwocmVzdWx0LnBhdGhuYW1lKSB8fCAhaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7XG4gICAgcmVzdWx0LnBhdGggPSAocmVzdWx0LnBhdGhuYW1lID8gcmVzdWx0LnBhdGhuYW1lIDogJycpICtcbiAgICAgICAgICAgICAgICAgIChyZXN1bHQuc2VhcmNoID8gcmVzdWx0LnNlYXJjaCA6ICcnKTtcbiAgfVxuICByZXN1bHQuYXV0aCA9IHJlbGF0aXZlLmF1dGggfHwgcmVzdWx0LmF1dGg7XG4gIHJlc3VsdC5zbGFzaGVzID0gcmVzdWx0LnNsYXNoZXMgfHwgcmVsYXRpdmUuc2xhc2hlcztcbiAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5VcmwucHJvdG90eXBlLnBhcnNlSG9zdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaG9zdCA9IHRoaXMuaG9zdDtcbiAgdmFyIHBvcnQgPSBwb3J0UGF0dGVybi5leGVjKGhvc3QpO1xuICBpZiAocG9ydCkge1xuICAgIHBvcnQgPSBwb3J0WzBdO1xuICAgIGlmIChwb3J0ICE9PSAnOicpIHtcbiAgICAgIHRoaXMucG9ydCA9IHBvcnQuc3Vic3RyKDEpO1xuICAgIH1cbiAgICBob3N0ID0gaG9zdC5zdWJzdHIoMCwgaG9zdC5sZW5ndGggLSBwb3J0Lmxlbmd0aCk7XG4gIH1cbiAgaWYgKGhvc3QpIHRoaXMuaG9zdG5hbWUgPSBob3N0O1xufTtcblxuZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiAgYXJnID09IG51bGw7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi91cmwvdXJsLmpzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohIGh0dHBzOi8vbXRocy5iZS9wdW55Y29kZSB2MS4zLjIgYnkgQG1hdGhpYXMgKi9cbjsoZnVuY3Rpb24ocm9vdCkge1xuXG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZXMgKi9cblx0dmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cyAmJlxuXHRcdCFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cdHZhciBmcmVlTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiZcblx0XHQhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblx0dmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDtcblx0aWYgKFxuXHRcdGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8XG5cdFx0ZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRmcmVlR2xvYmFsLnNlbGYgPT09IGZyZWVHbG9iYWxcblx0KSB7XG5cdFx0cm9vdCA9IGZyZWVHbG9iYWw7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGBwdW55Y29kZWAgb2JqZWN0LlxuXHQgKiBAbmFtZSBwdW55Y29kZVxuXHQgKiBAdHlwZSBPYmplY3Rcblx0ICovXG5cdHZhciBwdW55Y29kZSxcblxuXHQvKiogSGlnaGVzdCBwb3NpdGl2ZSBzaWduZWQgMzItYml0IGZsb2F0IHZhbHVlICovXG5cdG1heEludCA9IDIxNDc0ODM2NDcsIC8vIGFrYS4gMHg3RkZGRkZGRiBvciAyXjMxLTFcblxuXHQvKiogQm9vdHN0cmluZyBwYXJhbWV0ZXJzICovXG5cdGJhc2UgPSAzNixcblx0dE1pbiA9IDEsXG5cdHRNYXggPSAyNixcblx0c2tldyA9IDM4LFxuXHRkYW1wID0gNzAwLFxuXHRpbml0aWFsQmlhcyA9IDcyLFxuXHRpbml0aWFsTiA9IDEyOCwgLy8gMHg4MFxuXHRkZWxpbWl0ZXIgPSAnLScsIC8vICdcXHgyRCdcblxuXHQvKiogUmVndWxhciBleHByZXNzaW9ucyAqL1xuXHRyZWdleFB1bnljb2RlID0gL154bi0tLyxcblx0cmVnZXhOb25BU0NJSSA9IC9bXlxceDIwLVxceDdFXS8sIC8vIHVucHJpbnRhYmxlIEFTQ0lJIGNoYXJzICsgbm9uLUFTQ0lJIGNoYXJzXG5cdHJlZ2V4U2VwYXJhdG9ycyA9IC9bXFx4MkVcXHUzMDAyXFx1RkYwRVxcdUZGNjFdL2csIC8vIFJGQyAzNDkwIHNlcGFyYXRvcnNcblxuXHQvKiogRXJyb3IgbWVzc2FnZXMgKi9cblx0ZXJyb3JzID0ge1xuXHRcdCdvdmVyZmxvdyc6ICdPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcycsXG5cdFx0J25vdC1iYXNpYyc6ICdJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpJyxcblx0XHQnaW52YWxpZC1pbnB1dCc6ICdJbnZhbGlkIGlucHV0J1xuXHR9LFxuXG5cdC8qKiBDb252ZW5pZW5jZSBzaG9ydGN1dHMgKi9cblx0YmFzZU1pbnVzVE1pbiA9IGJhc2UgLSB0TWluLFxuXHRmbG9vciA9IE1hdGguZmxvb3IsXG5cdHN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUsXG5cblx0LyoqIFRlbXBvcmFyeSB2YXJpYWJsZSAqL1xuXHRrZXk7XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0LyoqXG5cdCAqIEEgZ2VuZXJpYyBlcnJvciB1dGlsaXR5IGZ1bmN0aW9uLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgZXJyb3IgdHlwZS5cblx0ICogQHJldHVybnMge0Vycm9yfSBUaHJvd3MgYSBgUmFuZ2VFcnJvcmAgd2l0aCB0aGUgYXBwbGljYWJsZSBlcnJvciBtZXNzYWdlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXJyb3IodHlwZSkge1xuXHRcdHRocm93IFJhbmdlRXJyb3IoZXJyb3JzW3R5cGVdKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIGdlbmVyaWMgYEFycmF5I21hcGAgdXRpbGl0eSBmdW5jdGlvbi5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IGFycmF5XG5cdCAqIGl0ZW0uXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcChhcnJheSwgZm4pIHtcblx0XHR2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR3aGlsZSAobGVuZ3RoLS0pIHtcblx0XHRcdHJlc3VsdFtsZW5ndGhdID0gZm4oYXJyYXlbbGVuZ3RoXSk7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsXG5cdCAqIGFkZHJlc3Nlcy5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5XG5cdCAqIGNoYXJhY3Rlci5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2tcblx0ICogZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikge1xuXHRcdHZhciBwYXJ0cyA9IHN0cmluZy5zcGxpdCgnQCcpO1xuXHRcdHZhciByZXN1bHQgPSAnJztcblx0XHRpZiAocGFydHMubGVuZ3RoID4gMSkge1xuXHRcdFx0Ly8gSW4gZW1haWwgYWRkcmVzc2VzLCBvbmx5IHRoZSBkb21haW4gbmFtZSBzaG91bGQgYmUgcHVueWNvZGVkLiBMZWF2ZVxuXHRcdFx0Ly8gdGhlIGxvY2FsIHBhcnQgKGkuZS4gZXZlcnl0aGluZyB1cCB0byBgQGApIGludGFjdC5cblx0XHRcdHJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnO1xuXHRcdFx0c3RyaW5nID0gcGFydHNbMV07XG5cdFx0fVxuXHRcdC8vIEF2b2lkIGBzcGxpdChyZWdleClgIGZvciBJRTggY29tcGF0aWJpbGl0eS4gU2VlICMxNy5cblx0XHRzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShyZWdleFNlcGFyYXRvcnMsICdcXHgyRScpO1xuXHRcdHZhciBsYWJlbHMgPSBzdHJpbmcuc3BsaXQoJy4nKTtcblx0XHR2YXIgZW5jb2RlZCA9IG1hcChsYWJlbHMsIGZuKS5qb2luKCcuJyk7XG5cdFx0cmV0dXJuIHJlc3VsdCArIGVuY29kZWQ7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZVxuXHQgKiBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZy4gV2hpbGUgSmF2YVNjcmlwdCB1c2VzIFVDUy0yIGludGVybmFsbHksXG5cdCAqIHRoaXMgZnVuY3Rpb24gd2lsbCBjb252ZXJ0IGEgcGFpciBvZiBzdXJyb2dhdGUgaGFsdmVzIChlYWNoIG9mIHdoaWNoXG5cdCAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LFxuXHQgKiBtYXRjaGluZyBVVEYtMTYuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZW5jb2RlYFxuXHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlLnVjczJcblx0ICogQG5hbWUgZGVjb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gVGhlIG5ldyBhcnJheSBvZiBjb2RlIHBvaW50cy5cblx0ICovXG5cdGZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7XG5cdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdCAgICBjb3VudGVyID0gMCxcblx0XHQgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcblx0XHQgICAgdmFsdWUsXG5cdFx0ICAgIGV4dHJhO1xuXHRcdHdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHR2YWx1ZSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRpZiAodmFsdWUgPj0gMHhEODAwICYmIHZhbHVlIDw9IDB4REJGRiAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHRcdC8vIGhpZ2ggc3Vycm9nYXRlLCBhbmQgdGhlcmUgaXMgYSBuZXh0IGNoYXJhY3RlclxuXHRcdFx0XHRleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRcdGlmICgoZXh0cmEgJiAweEZDMDApID09IDB4REMwMCkgeyAvLyBsb3cgc3Vycm9nYXRlXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goKCh2YWx1ZSAmIDB4M0ZGKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNGRikgKyAweDEwMDAwKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGUgbmV4dFxuXHRcdFx0XHRcdC8vIGNvZGUgdW5pdCBpcyB0aGUgaGlnaCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpclxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRjb3VudGVyLS07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgc3RyaW5nIGJhc2VkIG9uIGFuIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZGVjb2RlYFxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBlbmNvZGVcblx0ICogQHBhcmFtIHtBcnJheX0gY29kZVBvaW50cyBUaGUgYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSkge1xuXHRcdHJldHVybiBtYXAoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR2YXIgb3V0cHV0ID0gJyc7XG5cdFx0XHRpZiAodmFsdWUgPiAweEZGRkYpIHtcblx0XHRcdFx0dmFsdWUgLT0gMHgxMDAwMDtcblx0XHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7XG5cdFx0XHRcdHZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjtcblx0XHRcdH1cblx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO1xuXHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHR9KS5qb2luKCcnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGJhc2ljIGNvZGUgcG9pbnQgaW50byBhIGRpZ2l0L2ludGVnZXIuXG5cdCAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29kZVBvaW50IFRoZSBiYXNpYyBudW1lcmljIGNvZGUgcG9pbnQgdmFsdWUuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpblxuXHQgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGluIHRoZSByYW5nZSBgMGAgdG8gYGJhc2UgLSAxYCwgb3IgYGJhc2VgIGlmXG5cdCAqIHRoZSBjb2RlIHBvaW50IGRvZXMgbm90IHJlcHJlc2VudCBhIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzaWNUb0RpZ2l0KGNvZGVQb2ludCkge1xuXHRcdGlmIChjb2RlUG9pbnQgLSA0OCA8IDEwKSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gMjI7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gNjU7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA5NyA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gOTc7XG5cdFx0fVxuXHRcdHJldHVybiBiYXNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHNlZSBgYmFzaWNUb0RpZ2l0KClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBiYXNpYyBjb2RlIHBvaW50IHdob3NlIHZhbHVlICh3aGVuIHVzZWQgZm9yXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaXMgYGRpZ2l0YCwgd2hpY2ggbmVlZHMgdG8gYmUgaW4gdGhlIHJhbmdlXG5cdCAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpc1xuXHQgKiB1c2VkOyBlbHNlLCB0aGUgbG93ZXJjYXNlIGZvcm0gaXMgdXNlZC4gVGhlIGJlaGF2aW9yIGlzIHVuZGVmaW5lZFxuXHQgKiBpZiBgZmxhZ2AgaXMgbm9uLXplcm8gYW5kIGBkaWdpdGAgaGFzIG5vIHVwcGVyY2FzZSBmb3JtLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGlnaXRUb0Jhc2ljKGRpZ2l0LCBmbGFnKSB7XG5cdFx0Ly8gIDAuLjI1IG1hcCB0byBBU0NJSSBhLi56IG9yIEEuLlpcblx0XHQvLyAyNi4uMzUgbWFwIHRvIEFTQ0lJIDAuLjlcblx0XHRyZXR1cm4gZGlnaXQgKyAyMiArIDc1ICogKGRpZ2l0IDwgMjYpIC0gKChmbGFnICE9IDApIDw8IDUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuXG5cdCAqIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGFkYXB0KGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkge1xuXHRcdHZhciBrID0gMDtcblx0XHRkZWx0YSA9IGZpcnN0VGltZSA/IGZsb29yKGRlbHRhIC8gZGFtcCkgOiBkZWx0YSA+PiAxO1xuXHRcdGRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTtcblx0XHRmb3IgKC8qIG5vIGluaXRpYWxpemF0aW9uICovOyBkZWx0YSA+IGJhc2VNaW51c1RNaW4gKiB0TWF4ID4+IDE7IGsgKz0gYmFzZSkge1xuXHRcdFx0ZGVsdGEgPSBmbG9vcihkZWx0YSAvIGJhc2VNaW51c1RNaW4pO1xuXHRcdH1cblx0XHRyZXR1cm4gZmxvb3IoayArIChiYXNlTWludXNUTWluICsgMSkgKiBkZWx0YSAvIChkZWx0YSArIHNrZXcpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZVxuXHQgKiBzeW1ib2xzLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHtcblx0XHQvLyBEb24ndCB1c2UgVUNTLTJcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxuXHRcdCAgICBvdXQsXG5cdFx0ICAgIGkgPSAwLFxuXHRcdCAgICBuID0gaW5pdGlhbE4sXG5cdFx0ICAgIGJpYXMgPSBpbml0aWFsQmlhcyxcblx0XHQgICAgYmFzaWMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIGluZGV4LFxuXHRcdCAgICBvbGRpLFxuXHRcdCAgICB3LFxuXHRcdCAgICBrLFxuXHRcdCAgICBkaWdpdCxcblx0XHQgICAgdCxcblx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0ICAgIGJhc2VNaW51c1Q7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzOiBsZXQgYGJhc2ljYCBiZSB0aGUgbnVtYmVyIG9mIGlucHV0IGNvZGVcblx0XHQvLyBwb2ludHMgYmVmb3JlIHRoZSBsYXN0IGRlbGltaXRlciwgb3IgYDBgIGlmIHRoZXJlIGlzIG5vbmUsIHRoZW4gY29weVxuXHRcdC8vIHRoZSBmaXJzdCBiYXNpYyBjb2RlIHBvaW50cyB0byB0aGUgb3V0cHV0LlxuXG5cdFx0YmFzaWMgPSBpbnB1dC5sYXN0SW5kZXhPZihkZWxpbWl0ZXIpO1xuXHRcdGlmIChiYXNpYyA8IDApIHtcblx0XHRcdGJhc2ljID0gMDtcblx0XHR9XG5cblx0XHRmb3IgKGogPSAwOyBqIDwgYmFzaWM7ICsraikge1xuXHRcdFx0Ly8gaWYgaXQncyBub3QgYSBiYXNpYyBjb2RlIHBvaW50XG5cdFx0XHRpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7XG5cdFx0XHRcdGVycm9yKCdub3QtYmFzaWMnKTtcblx0XHRcdH1cblx0XHRcdG91dHB1dC5wdXNoKGlucHV0LmNoYXJDb2RlQXQoaikpO1xuXHRcdH1cblxuXHRcdC8vIE1haW4gZGVjb2RpbmcgbG9vcDogc3RhcnQganVzdCBhZnRlciB0aGUgbGFzdCBkZWxpbWl0ZXIgaWYgYW55IGJhc2ljIGNvZGVcblx0XHQvLyBwb2ludHMgd2VyZSBjb3BpZWQ7IHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb3RoZXJ3aXNlLlxuXG5cdFx0Zm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHtcblxuXHRcdFx0Ly8gYGluZGV4YCBpcyB0aGUgaW5kZXggb2YgdGhlIG5leHQgY2hhcmFjdGVyIHRvIGJlIGNvbnN1bWVkLlxuXHRcdFx0Ly8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLFxuXHRcdFx0Ly8gd2hpY2ggZ2V0cyBhZGRlZCB0byBgaWAuIFRoZSBvdmVyZmxvdyBjaGVja2luZyBpcyBlYXNpZXJcblx0XHRcdC8vIGlmIHdlIGluY3JlYXNlIGBpYCBhcyB3ZSBnbywgdGhlbiBzdWJ0cmFjdCBvZmYgaXRzIHN0YXJ0aW5nXG5cdFx0XHQvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLlxuXHRcdFx0Zm9yIChvbGRpID0gaSwgdyA9IDEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXG5cdFx0XHRcdGlmIChpbmRleCA+PSBpbnB1dExlbmd0aCkge1xuXHRcdFx0XHRcdGVycm9yKCdpbnZhbGlkLWlucHV0Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTtcblxuXHRcdFx0XHRpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpICs9IGRpZ2l0ICogdztcblx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cblx0XHRcdFx0aWYgKGRpZ2l0IDwgdCkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YmFzZU1pbnVzVCA9IGJhc2UgLSB0O1xuXHRcdFx0XHRpZiAodyA+IGZsb29yKG1heEludCAvIGJhc2VNaW51c1QpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR3ICo9IGJhc2VNaW51c1Q7XG5cblx0XHRcdH1cblxuXHRcdFx0b3V0ID0gb3V0cHV0Lmxlbmd0aCArIDE7XG5cdFx0XHRiaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTtcblxuXHRcdFx0Ly8gYGlgIHdhcyBzdXBwb3NlZCB0byB3cmFwIGFyb3VuZCBmcm9tIGBvdXRgIHRvIGAwYCxcblx0XHRcdC8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6XG5cdFx0XHRpZiAoZmxvb3IoaSAvIG91dCkgPiBtYXhJbnQgLSBuKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRuICs9IGZsb29yKGkgLyBvdXQpO1xuXHRcdFx0aSAlPSBvdXQ7XG5cblx0XHRcdC8vIEluc2VydCBgbmAgYXQgcG9zaXRpb24gYGlgIG9mIHRoZSBvdXRwdXRcblx0XHRcdG91dHB1dC5zcGxpY2UoaSsrLCAwLCBuKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzIChlLmcuIGEgZG9tYWluIG5hbWUgbGFiZWwpIHRvIGFcblx0ICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZW5jb2RlKGlucHV0KSB7XG5cdFx0dmFyIG4sXG5cdFx0ICAgIGRlbHRhLFxuXHRcdCAgICBoYW5kbGVkQ1BDb3VudCxcblx0XHQgICAgYmFzaWNMZW5ndGgsXG5cdFx0ICAgIGJpYXMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIG0sXG5cdFx0ICAgIHEsXG5cdFx0ICAgIGssXG5cdFx0ICAgIHQsXG5cdFx0ICAgIGN1cnJlbnRWYWx1ZSxcblx0XHQgICAgb3V0cHV0ID0gW10sXG5cdFx0ICAgIC8qKiBgaW5wdXRMZW5ndGhgIHdpbGwgaG9sZCB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIGluIGBpbnB1dGAuICovXG5cdFx0ICAgIGlucHV0TGVuZ3RoLFxuXHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHQgICAgaGFuZGxlZENQQ291bnRQbHVzT25lLFxuXHRcdCAgICBiYXNlTWludXNULFxuXHRcdCAgICBxTWludXNUO1xuXG5cdFx0Ly8gQ29udmVydCB0aGUgaW5wdXQgaW4gVUNTLTIgdG8gVW5pY29kZVxuXHRcdGlucHV0ID0gdWNzMmRlY29kZShpbnB1dCk7XG5cblx0XHQvLyBDYWNoZSB0aGUgbGVuZ3RoXG5cdFx0aW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBzdGF0ZVxuXHRcdG4gPSBpbml0aWFsTjtcblx0XHRkZWx0YSA9IDA7XG5cdFx0YmlhcyA9IGluaXRpYWxCaWFzO1xuXG5cdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50c1xuXHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCAweDgwKSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRoYW5kbGVkQ1BDb3VudCA9IGJhc2ljTGVuZ3RoID0gb3V0cHV0Lmxlbmd0aDtcblxuXHRcdC8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkO1xuXHRcdC8vIGBiYXNpY0xlbmd0aGAgaXMgdGhlIG51bWJlciBvZiBiYXNpYyBjb2RlIHBvaW50cy5cblxuXHRcdC8vIEZpbmlzaCB0aGUgYmFzaWMgc3RyaW5nIC0gaWYgaXQgaXMgbm90IGVtcHR5IC0gd2l0aCBhIGRlbGltaXRlclxuXHRcdGlmIChiYXNpY0xlbmd0aCkge1xuXHRcdFx0b3V0cHV0LnB1c2goZGVsaW1pdGVyKTtcblx0XHR9XG5cblx0XHQvLyBNYWluIGVuY29kaW5nIGxvb3A6XG5cdFx0d2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHtcblxuXHRcdFx0Ly8gQWxsIG5vbi1iYXNpYyBjb2RlIHBvaW50cyA8IG4gaGF2ZSBiZWVuIGhhbmRsZWQgYWxyZWFkeS4gRmluZCB0aGUgbmV4dFxuXHRcdFx0Ly8gbGFyZ2VyIG9uZTpcblx0XHRcdGZvciAobSA9IG1heEludCwgaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID49IG4gJiYgY3VycmVudFZhbHVlIDwgbSkge1xuXHRcdFx0XHRcdG0gPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LFxuXHRcdFx0Ly8gYnV0IGd1YXJkIGFnYWluc3Qgb3ZlcmZsb3dcblx0XHRcdGhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTtcblx0XHRcdGlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lO1xuXHRcdFx0biA9IG07XG5cblx0XHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCBuICYmICsrZGVsdGEgPiBtYXhJbnQpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPT0gbikge1xuXHRcdFx0XHRcdC8vIFJlcHJlc2VudCBkZWx0YSBhcyBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyXG5cdFx0XHRcdFx0Zm9yIChxID0gZGVsdGEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXHRcdFx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cdFx0XHRcdFx0XHRpZiAocSA8IHQpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRxTWludXNUID0gcSAtIHQ7XG5cdFx0XHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdFx0XHRvdXRwdXQucHVzaChcblx0XHRcdFx0XHRcdFx0c3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyh0ICsgcU1pbnVzVCAlIGJhc2VNaW51c1QsIDApKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHEgPSBmbG9vcihxTWludXNUIC8gYmFzZU1pbnVzVCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyhxLCAwKSkpO1xuXHRcdFx0XHRcdGJpYXMgPSBhZGFwdChkZWx0YSwgaGFuZGxlZENQQ291bnRQbHVzT25lLCBoYW5kbGVkQ1BDb3VudCA9PSBiYXNpY0xlbmd0aCk7XG5cdFx0XHRcdFx0ZGVsdGEgPSAwO1xuXHRcdFx0XHRcdCsraGFuZGxlZENQQ291bnQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0KytkZWx0YTtcblx0XHRcdCsrbjtcblxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3Ncblx0ICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLlxuXHQgKiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCBvbiBhIHN0cmluZyB0aGF0IGhhcyBhbHJlYWR5IGJlZW5cblx0ICogY29udmVydGVkIHRvIFVuaWNvZGUuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlZCBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvXG5cdCAqIGNvbnZlcnQgdG8gVW5pY29kZS5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlXG5cdCAqIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkge1xuXHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0cmV0dXJuIHJlZ2V4UHVueWNvZGUudGVzdChzdHJpbmcpXG5cdFx0XHRcdD8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG9cblx0ICogUHVueWNvZGUuIE9ubHkgdGhlIG5vbi1BU0NJSSBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgd2lsbCBiZSBjb252ZXJ0ZWQsXG5cdCAqIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0J3MgYWxyZWFkeSBpblxuXHQgKiBBU0NJSS5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0byBjb252ZXJ0LCBhcyBhXG5cdCAqIFVuaWNvZGUgc3RyaW5nLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgUHVueWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGRvbWFpbiBuYW1lIG9yXG5cdCAqIGVtYWlsIGFkZHJlc3MuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0FTQ0lJKGlucHV0KSB7XG5cdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZylcblx0XHRcdFx0PyAneG4tLScgKyBlbmNvZGUoc3RyaW5nKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdC8qKiBEZWZpbmUgdGhlIHB1YmxpYyBBUEkgKi9cblx0cHVueWNvZGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IFB1bnljb2RlLmpzIHZlcnNpb24gbnVtYmVyLlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEB0eXBlIFN0cmluZ1xuXHRcdCAqL1xuXHRcdCd2ZXJzaW9uJzogJzEuMy4yJyxcblx0XHQvKipcblx0XHQgKiBBbiBvYmplY3Qgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGZyb20gSmF2YVNjcmlwdCdzIGludGVybmFsIGNoYXJhY3RlclxuXHRcdCAqIHJlcHJlc2VudGF0aW9uIChVQ1MtMikgdG8gVW5pY29kZSBjb2RlIHBvaW50cywgYW5kIGJhY2suXG5cdFx0ICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+XG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgT2JqZWN0XG5cdFx0ICovXG5cdFx0J3VjczInOiB7XG5cdFx0XHQnZGVjb2RlJzogdWNzMmRlY29kZSxcblx0XHRcdCdlbmNvZGUnOiB1Y3MyZW5jb2RlXG5cdFx0fSxcblx0XHQnZGVjb2RlJzogZGVjb2RlLFxuXHRcdCdlbmNvZGUnOiBlbmNvZGUsXG5cdFx0J3RvQVNDSUknOiB0b0FTQ0lJLFxuXHRcdCd0b1VuaWNvZGUnOiB0b1VuaWNvZGVcblx0fTtcblxuXHQvKiogRXhwb3NlIGBwdW55Y29kZWAgKi9cblx0Ly8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zXG5cdC8vIGxpa2UgdGhlIGZvbGxvd2luZzpcblx0aWYgKFxuXHRcdHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmXG5cdFx0ZGVmaW5lLmFtZFxuXHQpIHtcblx0XHRkZWZpbmUoJ3B1bnljb2RlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gcHVueWNvZGU7XG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuXHRcdGlmIChtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cykgeyAvLyBpbiBOb2RlLmpzIG9yIFJpbmdvSlMgdjAuOC4wK1xuXHRcdFx0ZnJlZU1vZHVsZS5leHBvcnRzID0gcHVueWNvZGU7XG5cdFx0fSBlbHNlIHsgLy8gaW4gTmFyd2hhbCBvciBSaW5nb0pTIHYwLjcuMC1cblx0XHRcdGZvciAoa2V5IGluIHB1bnljb2RlKSB7XG5cdFx0XHRcdHB1bnljb2RlLmhhc093blByb3BlcnR5KGtleSkgJiYgKGZyZWVFeHBvcnRzW2tleV0gPSBwdW55Y29kZVtrZXldKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSB7IC8vIGluIFJoaW5vIG9yIGEgd2ViIGJyb3dzZXJcblx0XHRyb290LnB1bnljb2RlID0gcHVueWNvZGU7XG5cdH1cblxufSh0aGlzKSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi91cmwvfi9wdW55Y29kZS9wdW55Y29kZS5qc1xuICoqIG1vZHVsZSBpZCA9IDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0fVxyXG5cdHJldHVybiBtb2R1bGU7XHJcbn1cclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmRlY29kZSA9IGV4cG9ydHMucGFyc2UgPSByZXF1aXJlKCcuL2RlY29kZScpO1xuZXhwb3J0cy5lbmNvZGUgPSBleHBvcnRzLnN0cmluZ2lmeSA9IHJlcXVpcmUoJy4vZW5jb2RlJyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9xdWVyeXN0cmluZy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vLyBJZiBvYmouaGFzT3duUHJvcGVydHkgaGFzIGJlZW4gb3ZlcnJpZGRlbiwgdGhlbiBjYWxsaW5nXG4vLyBvYmouaGFzT3duUHJvcGVydHkocHJvcCkgd2lsbCBicmVhay5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2lzc3Vlcy8xNzA3XG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHFzLCBzZXAsIGVxLCBvcHRpb25zKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICB2YXIgb2JqID0ge307XG5cbiAgaWYgKHR5cGVvZiBxcyAhPT0gJ3N0cmluZycgfHwgcXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHZhciByZWdleHAgPSAvXFwrL2c7XG4gIHFzID0gcXMuc3BsaXQoc2VwKTtcblxuICB2YXIgbWF4S2V5cyA9IDEwMDA7XG4gIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLm1heEtleXMgPT09ICdudW1iZXInKSB7XG4gICAgbWF4S2V5cyA9IG9wdGlvbnMubWF4S2V5cztcbiAgfVxuXG4gIHZhciBsZW4gPSBxcy5sZW5ndGg7XG4gIC8vIG1heEtleXMgPD0gMCBtZWFucyB0aGF0IHdlIHNob3VsZCBub3QgbGltaXQga2V5cyBjb3VudFxuICBpZiAobWF4S2V5cyA+IDAgJiYgbGVuID4gbWF4S2V5cykge1xuICAgIGxlbiA9IG1heEtleXM7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIHggPSBxc1tpXS5yZXBsYWNlKHJlZ2V4cCwgJyUyMCcpLFxuICAgICAgICBpZHggPSB4LmluZGV4T2YoZXEpLFxuICAgICAgICBrc3RyLCB2c3RyLCBrLCB2O1xuXG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICBrc3RyID0geC5zdWJzdHIoMCwgaWR4KTtcbiAgICAgIHZzdHIgPSB4LnN1YnN0cihpZHggKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAga3N0ciA9IHg7XG4gICAgICB2c3RyID0gJyc7XG4gICAgfVxuXG4gICAgayA9IGRlY29kZVVSSUNvbXBvbmVudChrc3RyKTtcbiAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZzdHIpO1xuXG4gICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShvYmosIGspKSB7XG4gICAgICBvYmpba10gPSB2O1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmpba10pKSB7XG4gICAgICBvYmpba10ucHVzaCh2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqW2tdID0gW29ialtrXSwgdl07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9xdWVyeXN0cmluZy9kZWNvZGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgc3dpdGNoICh0eXBlb2Ygdikge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gdjtcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIHYgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSA/IHYgOiAnJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgb2JqID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uKGspIHtcbiAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmpba10pKSB7XG4gICAgICAgIHJldHVybiBvYmpba10ubWFwKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKHYpKTtcbiAgICAgICAgfSkuam9pbihzZXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmpba10pKTtcbiAgICAgIH1cbiAgICB9KS5qb2luKHNlcCk7XG5cbiAgfVxuXG4gIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShuYW1lKSkgKyBlcSArXG4gICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9iaikpO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3F1ZXJ5c3RyaW5nL2VuY29kZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEFjdGl2ZUNhbGxzXzEgPSByZXF1aXJlKFwiLi9BY3RpdmVDYWxsc1wiKTtcbnZhciBCdXNpbmVzc0FkZHJlc3NfMSA9IHJlcXVpcmUoXCIuL0J1c2luZXNzQWRkcmVzc1wiKTtcbnZhciBDYWxsTG9nXzEgPSByZXF1aXJlKFwiLi9DYWxsTG9nXCIpO1xudmFyIERlcGFydG1lbnRfMSA9IHJlcXVpcmUoXCIuL0RlcGFydG1lbnRcIik7XG52YXIgRGV2aWNlXzEgPSByZXF1aXJlKFwiLi9EZXZpY2VcIik7XG52YXIgRGlhbGluZ1BsYW5fMSA9IHJlcXVpcmUoXCIuL0RpYWxpbmdQbGFuXCIpO1xudmFyIEV4dGVuc2lvbl8xID0gcmVxdWlyZShcIi4vRXh0ZW5zaW9uXCIpO1xudmFyIE9yZGVyXzEgPSByZXF1aXJlKFwiLi9PcmRlclwiKTtcbnZhciBQaG9uZU51bWJlcl8xID0gcmVxdWlyZShcIi4vUGhvbmVOdW1iZXJcIik7XG52YXIgUmVjb3JkaW5nXzEgPSByZXF1aXJlKFwiLi9SZWNvcmRpbmdcIik7XG52YXIgU2VydmljZUluZm9fMSA9IHJlcXVpcmUoXCIuL1NlcnZpY2VJbmZvXCIpO1xudmFyIEFjY291bnQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBY2NvdW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFjY291bnQocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImFjY291bnRcIiwgaWQgfHwgXCJ+XCIsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgQWNjb3VudC5wcm90b3R5cGUuYWN0aXZlQ2FsbHMgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVDYWxsc18xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBBY2NvdW50LnByb3RvdHlwZS5idXNpbmVzc0FkZHJlc3MgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCdXNpbmVzc0FkZHJlc3NfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBjYWxsIGxvZyByZWNvcmRcbiAgICAgKi9cbiAgICBBY2NvdW50LnByb3RvdHlwZS5jYWxsTG9nID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbExvZ18xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIERlcGFydG1lbnQgZXh0ZW5zaW9uIChzYW1lIGFzIGV4dGVuc2lvbklkIGJ1dCBvbmx5IHRoZSBJRCBvZiBhIGRlcGFydG1lbnQgZXh0ZW5zaW9uIGlzIHZhbGlkKVxuICAgICAqL1xuICAgIEFjY291bnQucHJvdG90eXBlLmRlcGFydG1lbnQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEZXBhcnRtZW50XzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGEgZGV2aWNlXG4gICAgICovXG4gICAgQWNjb3VudC5wcm90b3R5cGUuZGV2aWNlID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGV2aWNlXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEFjY291bnQucHJvdG90eXBlLmRpYWxpbmdQbGFuID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGlhbGluZ1BsYW5fMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYW4gZXh0ZW5zaW9uIG9yIHRpbGRlICh+KSB0byBpbmRpY2F0ZSB0aGUgZXh0ZW5zaW9uIGFzc2lnbmVkIHRvIHRoZSBhY2NvdW50IGxvZ2dlZC1pbiB3aXRoaW4gdGhlIGN1cnJlbnQgc2Vzc2lvblxuICAgICAqL1xuICAgIEFjY291bnQucHJvdG90eXBlLmV4dGVuc2lvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IEV4dGVuc2lvbl8xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhbiBvcmRlclxuICAgICAqL1xuICAgIEFjY291bnQucHJvdG90eXBlLm9yZGVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgT3JkZXJfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBwaG9uZSBudW1iZXJcbiAgICAgKi9cbiAgICBBY2NvdW50LnByb3RvdHlwZS5waG9uZU51bWJlciA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IFBob25lTnVtYmVyXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIHJlY29yZGluZyAocmV0dXJuZWQgaW4gQ2FsbCBMb2cpXG4gICAgICovXG4gICAgQWNjb3VudC5wcm90b3R5cGUucmVjb3JkaW5nID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb3JkaW5nXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEFjY291bnQucHJvdG90eXBlLnNlcnZpY2VJbmZvID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VydmljZUluZm9fMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBHZXQgQWNjb3VudCBJbmZvIGJ5IElEXG4gICAgKi9cbiAgICBBY2NvdW50LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBBY2NvdW50O1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gQWNjb3VudDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9BY2NvdW50LmpzXG4gKiogbW9kdWxlIGlkID0gMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBVcmxQYXJ0c1xuICovXG52YXIgVXJsU2VjdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVXJsU2VjdGlvbihuYW1lLCB2YWx1ZSwgcHJ2LCBzZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuX3NlcnZpY2UgPSBzZXJ2aWNlO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUgfHwgbnVsbDtcbiAgICAgICAgdGhpcy5wcmV2aW91cyA9IHBydjtcbiAgICB9XG4gICAgVXJsU2VjdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAod2l0aFZhbHVlKSB7XG4gICAgICAgIGlmICh3aXRoVmFsdWUgPT09IHZvaWQgMCkgeyB3aXRoVmFsdWUgPSB0cnVlOyB9XG4gICAgICAgIHZhciBzdHIgPSBcIi9cIiArIHRoaXMubmFtZTtcbiAgICAgICAgaWYgKHdpdGhWYWx1ZSAmJiB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICBzdHIgKz0gXCIvXCIgKyB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfTtcbiAgICBVcmxTZWN0aW9uLnByb3RvdHlwZS5nZXRFbmRwb2ludCA9IGZ1bmN0aW9uICh3aXRoVmFsdWUpIHtcbiAgICAgICAgaWYgKHdpdGhWYWx1ZSA9PT0gdm9pZCAwKSB7IHdpdGhWYWx1ZSA9IHRydWU7IH1cbiAgICAgICAgdmFyIGVuZCA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLnByZXZpb3VzKSB7XG4gICAgICAgICAgICBlbmQgPSB0aGlzLnByZXZpb3VzLmdldEVuZHBvaW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuZCArIHRoaXMudG9TdHJpbmcod2l0aFZhbHVlKTtcbiAgICB9O1xuICAgIFVybFNlY3Rpb24ucHJvdG90eXBlLmdldFNlcnZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWMgPSB0aGlzO1xuICAgICAgICB3aGlsZSAoc2VjKSB7XG4gICAgICAgICAgICBpZiAoc2VjLl9zZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlYy5fc2VydmljZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWMucHJldmlvdXMpIHtcbiAgICAgICAgICAgICAgICBzZWMgPSBzZWMucHJldmlvdXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBVcmxTZWN0aW9uO1xufSgpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IFVybFNlY3Rpb247XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL1VybFNlY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cbnZhciBVcmxTZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vLi4vVXJsU2VjdGlvblwiKTtcbnZhciBBY3RpdmVDYWxscyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFjdGl2ZUNhbGxzLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFjdGl2ZUNhbGxzKHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJhY3RpdmUtY2FsbHNcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBHZXQgQWNjb3VudCBBY3RpdmUgKFJlY2VudCkgQ2FsbHNcbiAgICAqL1xuICAgIEFjdGl2ZUNhbGxzLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBxdWVyeTogcXVlcnksIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBBY3RpdmVDYWxscztcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IEFjdGl2ZUNhbGxzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0FjdGl2ZUNhbGxzLmpzXG4gKiogbW9kdWxlIGlkID0gMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgQnVzaW5lc3NBZGRyZXNzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQnVzaW5lc3NBZGRyZXNzLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJ1c2luZXNzQWRkcmVzcyhwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiYnVzaW5lc3MtYWRkcmVzc1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICAgIEdldCBDb21wYW55IEJ1c2luZXNzIEFkZHJlc3NcbiAgICAqL1xuICAgIEJ1c2luZXNzQWRkcmVzcy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgVXBkYXRlIENvbXBhbnkgQnVzaW5lc3MgQWRkcmVzc1xuICAgICovXG4gICAgQnVzaW5lc3NBZGRyZXNzLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoYm9keSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwdXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1c2luZXNzQWRkcmVzcztcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IEJ1c2luZXNzQWRkcmVzcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9CdXNpbmVzc0FkZHJlc3MuanNcbiAqKiBtb2R1bGUgaWQgPSAxN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cbnZhciBVcmxTZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vLi4vVXJsU2VjdGlvblwiKTtcbnZhciBDYWxsTG9nID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FsbExvZywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDYWxsTG9nKHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJjYWxsLWxvZ1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICAgIEdldCBBY2NvdW50IENhbGwgTG9nXG4gICAgKi9cbiAgICBDYWxsTG9nLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBxdWVyeTogcXVlcnksIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBHZXQgQWNjb3VudCBDYWxsIExvZyBSZWNvcmQgYnkgSURcbiAgICAqL1xuICAgIENhbGxMb2cucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIERlbGV0ZSBFeHRlbnNpb24gQ2FsbCBMb2dcbiAgICAqL1xuICAgIENhbGxMb2cucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJkZWxldGVcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogcXVlcnksIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FsbExvZztcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IENhbGxMb2c7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQ2FsbExvZy5qc1xuICoqIG1vZHVsZSBpZCA9IDE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIE1lbWJlcnNfMSA9IHJlcXVpcmUoXCIuL01lbWJlcnNcIik7XG52YXIgRGVwYXJ0bWVudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERlcGFydG1lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVwYXJ0bWVudChwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiZGVwYXJ0bWVudFwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBEZXBhcnRtZW50LnByb3RvdHlwZS5tZW1iZXJzID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWVtYmVyc18xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgcmV0dXJuIERlcGFydG1lbnQ7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBEZXBhcnRtZW50O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0RlcGFydG1lbnQuanNcbiAqKiBtb2R1bGUgaWQgPSAxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cbnZhciBVcmxTZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vLi4vVXJsU2VjdGlvblwiKTtcbnZhciBNZW1iZXJzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWVtYmVycywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNZW1iZXJzKHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJtZW1iZXJzXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgR2V0IERlcGFydG1lbnQgTWVtYmVyc1xuICAgICovXG4gICAgTWVtYmVycy5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWVtYmVycztcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1lbWJlcnM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvTWVtYmVycy5qc1xuICoqIG1vZHVsZSBpZCA9IDIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIERldmljZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERldmljZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEZXZpY2UocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImRldmljZVwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICAgIEdldCBBY2NvdW50IERldmljZSBMaXN0XG4gICAgKi9cbiAgICBEZXZpY2UucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgR2V0IERldmljZSBieSBJRFxuICAgICovXG4gICAgRGV2aWNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBEZXZpY2U7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBEZXZpY2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvRGV2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gMjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgRGlhbGluZ1BsYW4gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEaWFsaW5nUGxhbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEaWFsaW5nUGxhbihwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiZGlhbGluZy1wbGFuXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgR2V0IElCTyBEaWFsaW5nIFBsYW5zXG4gICAgKi9cbiAgICBEaWFsaW5nUGxhbi5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGlhbGluZ1BsYW47XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBEaWFsaW5nUGxhbjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9EaWFsaW5nUGxhbi5qc1xuICoqIG1vZHVsZSBpZCA9IDIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEFjdGl2ZUNhbGxzXzEgPSByZXF1aXJlKFwiLi9BY3RpdmVDYWxsc1wiKTtcbnZhciBBZGRyZXNzQm9va1N5bmNfMSA9IHJlcXVpcmUoXCIuL0FkZHJlc3NCb29rU3luY1wiKTtcbnZhciBBZGRyZXNzQm9va18xID0gcmVxdWlyZShcIi4vQWRkcmVzc0Jvb2tcIik7XG52YXIgQW5zd2VyaW5nUnVsZV8xID0gcmVxdWlyZShcIi4vQW5zd2VyaW5nUnVsZVwiKTtcbnZhciBBdXRoelByb2ZpbGVfMSA9IHJlcXVpcmUoXCIuL0F1dGh6UHJvZmlsZVwiKTtcbnZhciBCbG9ja2VkTnVtYmVyXzEgPSByZXF1aXJlKFwiLi9CbG9ja2VkTnVtYmVyXCIpO1xudmFyIEJ1c2luZXNzSG91cnNfMSA9IHJlcXVpcmUoXCIuL0J1c2luZXNzSG91cnNcIik7XG52YXIgQ2FsbExvZ18xID0gcmVxdWlyZShcIi4vQ2FsbExvZ1wiKTtcbnZhciBDYWxsTG9nU3luY18xID0gcmVxdWlyZShcIi4vQ2FsbExvZ1N5bmNcIik7XG52YXIgQ29tcGFueVBhZ2VyXzEgPSByZXF1aXJlKFwiLi9Db21wYW55UGFnZXJcIik7XG52YXIgQ29uZmVyZW5jaW5nXzEgPSByZXF1aXJlKFwiLi9Db25mZXJlbmNpbmdcIik7XG52YXIgRGV2aWNlXzEgPSByZXF1aXJlKFwiLi9EZXZpY2VcIik7XG52YXIgRmF4XzEgPSByZXF1aXJlKFwiLi9GYXhcIik7XG52YXIgRm9yd2FyZGluZ051bWJlcl8xID0gcmVxdWlyZShcIi4vRm9yd2FyZGluZ051bWJlclwiKTtcbnZhciBHcmFudF8xID0gcmVxdWlyZShcIi4vR3JhbnRcIik7XG52YXIgR3JlZXRpbmdfMSA9IHJlcXVpcmUoXCIuL0dyZWV0aW5nXCIpO1xudmFyIE1lZXRpbmdfMSA9IHJlcXVpcmUoXCIuL01lZXRpbmdcIik7XG52YXIgTWVzc2FnZVN0b3JlXzEgPSByZXF1aXJlKFwiLi9NZXNzYWdlU3RvcmVcIik7XG52YXIgTWVzc2FnZVN5bmNfMSA9IHJlcXVpcmUoXCIuL01lc3NhZ2VTeW5jXCIpO1xudmFyIFBob25lTnVtYmVyXzEgPSByZXF1aXJlKFwiLi9QaG9uZU51bWJlclwiKTtcbnZhciBQcmVzZW5jZV8xID0gcmVxdWlyZShcIi4vUHJlc2VuY2VcIik7XG52YXIgUHJvZmlsZUltYWdlXzEgPSByZXF1aXJlKFwiLi9Qcm9maWxlSW1hZ2VcIik7XG52YXIgUmluZ291dF8xID0gcmVxdWlyZShcIi4vUmluZ291dFwiKTtcbnZhciBTbXNfMSA9IHJlcXVpcmUoXCIuL1Ntc1wiKTtcbnZhciBFeHRlbnNpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFeHRlbnNpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRXh0ZW5zaW9uKHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJleHRlbnNpb25cIiwgaWQgfHwgXCJ+XCIsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5hY3RpdmVDYWxscyA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZUNhbGxzXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEV4dGVuc2lvbi5wcm90b3R5cGUuYWRkcmVzc0Jvb2tTeW5jID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWRkcmVzc0Jvb2tTeW5jXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEV4dGVuc2lvbi5wcm90b3R5cGUuYWRkcmVzc0Jvb2sgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZGRyZXNzQm9va18xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhbiBhbnN3ZXJpbmcgcnVsZS4gVGhlIHZhbHVlIGNhbiBiZSBzdGFuZGFyZCBkaWdpdGFsIElEIG9yIHNwZWNpZmljIElEIC0gZWl0aGVyIGJ1c2luZXNzLWhvdXJzLXJ1bGUgb3IgYWZ0ZXItaG91cnMtcnVsZVxuICAgICAqL1xuICAgIEV4dGVuc2lvbi5wcm90b3R5cGUuYW5zd2VyaW5nUnVsZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IEFuc3dlcmluZ1J1bGVfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5hdXRoelByb2ZpbGUgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdXRoelByb2ZpbGVfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBibG9ja2VkIG51bWJlciBsaXN0IGVudHJ5XG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5ibG9ja2VkTnVtYmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmxvY2tlZE51bWJlcl8xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBFeHRlbnNpb24ucHJvdG90eXBlLmJ1c2luZXNzSG91cnMgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCdXNpbmVzc0hvdXJzXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGEgY2FsbCBsb2cgcmVjb3JkXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5jYWxsTG9nID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbExvZ18xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBFeHRlbnNpb24ucHJvdG90eXBlLmNhbGxMb2dTeW5jID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbExvZ1N5bmNfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5jb21wYW55UGFnZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wYW55UGFnZXJfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5jb25mZXJlbmNpbmcgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb25mZXJlbmNpbmdfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBkZXZpY2VcbiAgICAgKi9cbiAgICBFeHRlbnNpb24ucHJvdG90eXBlLmRldmljZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IERldmljZV8xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBFeHRlbnNpb24ucHJvdG90eXBlLmZheCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IEZheF8xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBFeHRlbnNpb24ucHJvdG90eXBlLmZvcndhcmRpbmdOdW1iZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGb3J3YXJkaW5nTnVtYmVyXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEV4dGVuc2lvbi5wcm90b3R5cGUuZ3JhbnQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcmFudF8xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIGdyZWV0aW5nXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5ncmVldGluZyA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IEdyZWV0aW5nXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGEgbWVldGluZ1xuICAgICAqL1xuICAgIEV4dGVuc2lvbi5wcm90b3R5cGUubWVldGluZyA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IE1lZXRpbmdfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBtZXNzYWdlXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5tZXNzYWdlU3RvcmUgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlU3RvcmVfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5tZXNzYWdlU3luYyA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VTeW5jXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBpZGVudGlmaWVyIG9mIGEgcGhvbmUgbnVtYmVyXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5waG9uZU51bWJlciA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IFBob25lTnVtYmVyXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEV4dGVuc2lvbi5wcm90b3R5cGUucHJlc2VuY2UgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVzZW5jZV8xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGltZW5zaW9ucyBvZiBhIHByb2ZpbGUgaW1hZ2Ugd2hpY2ggd2lsbCBiZSByZXR1cm5lZCBpbiByZXNwb25zZS5cbiAgICAgKi9cbiAgICBFeHRlbnNpb24ucHJvdG90eXBlLnByb2ZpbGVJbWFnZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb2ZpbGVJbWFnZV8xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIFJpbmdPdXQgY2FsbFxuICAgICAqL1xuICAgIEV4dGVuc2lvbi5wcm90b3R5cGUucmluZ291dCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IFJpbmdvdXRfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRXh0ZW5zaW9uLnByb3RvdHlwZS5zbXMgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTbXNfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBHZXQgRXh0ZW5zaW9uIExpc3RcbiAgICAqL1xuICAgIEV4dGVuc2lvbi5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgR2V0IEV4dGVuc2lvbiBJbmZvIGJ5IElEXG4gICAgKi9cbiAgICBFeHRlbnNpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIFVwZGF0ZSBFeHRlbnNpb24gYnkgSURcbiAgICAqL1xuICAgIEV4dGVuc2lvbi5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBFeHRlbnNpb247XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBFeHRlbnNpb247XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvRXh0ZW5zaW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgQWRkcmVzc0Jvb2tTeW5jID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQWRkcmVzc0Jvb2tTeW5jLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFkZHJlc3NCb29rU3luYyhwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiYWRkcmVzcy1ib29rLXN5bmNcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBDb250YWN0cyBTeW5jaHJvbml6YXRpb25cbiAgICAqL1xuICAgIEFkZHJlc3NCb29rU3luYy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEFkZHJlc3NCb29rU3luYztcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IEFkZHJlc3NCb29rU3luYztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9BZGRyZXNzQm9va1N5bmMuanNcbiAqKiBtb2R1bGUgaWQgPSAyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cbnZhciBVcmxTZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vLi4vVXJsU2VjdGlvblwiKTtcbnZhciBDb250YWN0XzEgPSByZXF1aXJlKFwiLi9Db250YWN0XCIpO1xudmFyIEdyb3VwXzEgPSByZXF1aXJlKFwiLi9Hcm91cFwiKTtcbnZhciBBZGRyZXNzQm9vayA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFkZHJlc3NCb29rLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFkZHJlc3NCb29rKHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJhZGRyZXNzLWJvb2tcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBjb250YWN0IHJlY29yZCBpbiB0aGUgUmluZ0NlbnRyYWwgZGF0YWJhc2VcbiAgICAgKi9cbiAgICBBZGRyZXNzQm9vay5wcm90b3R5cGUuY29udGFjdCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbnRhY3RfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEludGVybmFsIGlkZW50aWZpZXIgb2YgYSBncm91cCBpbiBhbiBhZGRyZXNzIGJvb2tcbiAgICAgKi9cbiAgICBBZGRyZXNzQm9vay5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcm91cF8xLmRlZmF1bHQodGhpcywgaWQpO1xuICAgIH07XG4gICAgcmV0dXJuIEFkZHJlc3NCb29rO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gQWRkcmVzc0Jvb2s7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQWRkcmVzc0Jvb2suanNcbiAqKiBtb2R1bGUgaWQgPSAyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cbnZhciBVcmxTZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vLi4vVXJsU2VjdGlvblwiKTtcbnZhciBDb250YWN0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29udGFjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb250YWN0KHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJjb250YWN0XCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgQ3JlYXRlIE5ldyBDb250YWN0XG4gICAgKi9cbiAgICBDb250YWN0LnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicG9zdFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgR2V0IENvbnRhY3QgTGlzdFxuICAgICovXG4gICAgQ29udGFjdC5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgRGVsZXRlIENvbnRhY3QgYnkgSURcbiAgICAqL1xuICAgIENvbnRhY3QucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZGVsZXRlXCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5yZXNwb25zZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBHZXQgQ29udGFjdCBieSBJRFxuICAgICovXG4gICAgQ29udGFjdC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgVXBkYXRlIENvbnRhY3QgYnkgSURcbiAgICAqL1xuICAgIENvbnRhY3QucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChib2R5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInB1dFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29udGFjdDtcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IENvbnRhY3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQ29udGFjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEdyb3VwID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR3JvdXAsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR3JvdXAocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImdyb3VwXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgR2V0IENvbnRhY3QgR3JvdXAgTGlzdFxuICAgICovXG4gICAgR3JvdXAucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgR2V0IENvbnRhY3QgR3JvdXAgYnkgSURcbiAgICAqL1xuICAgIEdyb3VwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBHcm91cDtcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IEdyb3VwO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0dyb3VwLmpzXG4gKiogbW9kdWxlIGlkID0gMjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgQW5zd2VyaW5nUnVsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFuc3dlcmluZ1J1bGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5zd2VyaW5nUnVsZShwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiYW5zd2VyaW5nLXJ1bGVcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBDcmVhdGUgQ3VzdG9tIEFuc3dlcmluZyBSdWxlXG4gICAgKi9cbiAgICBBbnN3ZXJpbmdSdWxlLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicG9zdFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgR2V0IEFuc3dlcmluZyBSdWxlcyBMaXN0XG4gICAgKi9cbiAgICBBbnN3ZXJpbmdSdWxlLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIERlbGV0ZSBBbnN3ZXJpbmcgUnVsZSBieSBJRFxuICAgICovXG4gICAgQW5zd2VyaW5nUnVsZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJkZWxldGVcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnJlc3BvbnNlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIEdldCBDdXN0b20gQW5zd2VyaW5nIFJ1bGUgYnkgSURcbiAgICAqL1xuICAgIEFuc3dlcmluZ1J1bGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIFVwZGF0ZSBBbnN3ZXJpbmcgUnVsZSBieSBJRFxuICAgICovXG4gICAgQW5zd2VyaW5nUnVsZS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBBbnN3ZXJpbmdSdWxlO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gQW5zd2VyaW5nUnVsZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9BbnN3ZXJpbmdSdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgQ2hlY2tfMSA9IHJlcXVpcmUoXCIuL0NoZWNrXCIpO1xudmFyIEF1dGh6UHJvZmlsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF1dGh6UHJvZmlsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBdXRoelByb2ZpbGUocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImF1dGh6LXByb2ZpbGVcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgQXV0aHpQcm9maWxlLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IENoZWNrXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgR2V0IFVzZXIgUGVybWlzc2lvbnNcbiAgICAqL1xuICAgIEF1dGh6UHJvZmlsZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQXV0aHpQcm9maWxlO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gQXV0aHpQcm9maWxlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0F1dGh6UHJvZmlsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIENoZWNrID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2hlY2ssIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ2hlY2socHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImNoZWNrXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgQ2hlY2sgVXNlciBQZXJtaXNzaW9uc1xuICAgICovXG4gICAgQ2hlY2sucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogcXVlcnksIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDaGVjaztcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IENoZWNrO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0NoZWNrLmpzXG4gKiogbW9kdWxlIGlkID0gMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgQmxvY2tlZE51bWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJsb2NrZWROdW1iZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQmxvY2tlZE51bWJlcihwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiYmxvY2tlZC1udW1iZXJcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBBZGQgTmV3IEJsb2NrZWQgTnVtYmVyXG4gICAgKi9cbiAgICBCbG9ja2VkTnVtYmVyLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicG9zdFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgR2V0IEJsb2NrZWQgTnVtYmVyIExpc3RcbiAgICAqL1xuICAgIEJsb2NrZWROdW1iZXIucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgRGVsZXRlIEJsb2NrZWQgTnVtYmVyIGJ5IElEXG4gICAgKi9cbiAgICBCbG9ja2VkTnVtYmVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImRlbGV0ZVwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgR2V0IEJsb2NrZWQgTnVtYmVyIGJ5IElEXG4gICAgKi9cbiAgICBCbG9ja2VkTnVtYmVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBVcGRhdGUgQmxvY2tlZCBOdW1iZXIgTGFiZWxcbiAgICAqL1xuICAgIEJsb2NrZWROdW1iZXIucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChib2R5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInB1dFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQmxvY2tlZE51bWJlcjtcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IEJsb2NrZWROdW1iZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQmxvY2tlZE51bWJlci5qc1xuICoqIG1vZHVsZSBpZCA9IDMxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEJ1c2luZXNzSG91cnMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCdXNpbmVzc0hvdXJzLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJ1c2luZXNzSG91cnMocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImJ1c2luZXNzLWhvdXJzXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgR2V0IFVzZXIgSG91cnMgU2V0dGluZ1xuICAgICovXG4gICAgQnVzaW5lc3NIb3Vycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQnVzaW5lc3NIb3Vycztcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IEJ1c2luZXNzSG91cnM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQnVzaW5lc3NIb3Vycy5qc1xuICoqIG1vZHVsZSBpZCA9IDMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIENhbGxMb2dTeW5jID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FsbExvZ1N5bmMsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ2FsbExvZ1N5bmMocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImNhbGwtbG9nLXN5bmNcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBDYWxsIExvZyBTeW5jaHJvbml6YXRpb25cbiAgICAqL1xuICAgIENhbGxMb2dTeW5jLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FsbExvZ1N5bmM7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBDYWxsTG9nU3luYztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9DYWxsTG9nU3luYy5qc1xuICoqIG1vZHVsZSBpZCA9IDMzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIENvbXBhbnlQYWdlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbXBhbnlQYWdlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb21wYW55UGFnZXIocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImNvbXBhbnktcGFnZXJcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBDcmVhdGUgYW5kIFNlbmQgUGFnZXIgTWVzc2FnZVxuICAgICovXG4gICAgQ29tcGFueVBhZ2VyLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicG9zdFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tcGFueVBhZ2VyO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gQ29tcGFueVBhZ2VyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0NvbXBhbnlQYWdlci5qc1xuICoqIG1vZHVsZSBpZCA9IDM0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIENvbmZlcmVuY2luZyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbmZlcmVuY2luZywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb25mZXJlbmNpbmcocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImNvbmZlcmVuY2luZ1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICAgIEdldCBDb25mZXJlbmNpbmcgaW5mb1xuICAgICovXG4gICAgQ29uZmVyZW5jaW5nLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgVXBkYXRlIENvbmZlcmVuY2luZyBpbmZvXG4gICAgKi9cbiAgICBDb25mZXJlbmNpbmcucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChib2R5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInB1dFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29uZmVyZW5jaW5nO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gQ29uZmVyZW5jaW5nO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0NvbmZlcmVuY2luZy5qc1xuICoqIG1vZHVsZSBpZCA9IDM1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEZvcm1EYXRhID0gcmVxdWlyZShcImZvcm0tZGF0YVwiKTtcbnZhciBGYXggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGYXgsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRmF4KHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJmYXhcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBDcmVhdGUgYW5kIFNlbmQgRmF4IE1lc3NhZ2VcbiAgICAqL1xuICAgIEZheC5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChib2R5LCBhdHRhY2htZW50cykge1xuICAgICAgICBmdW5jdGlvbiBpbk5vZGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHByb2Nlc3MgIT0gXCJ1bmRlZmluZWRcIiAmJiAhcHJvY2Vzc1tcImJyb3dzZXJcIl07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYnJvd3NlclN1cHBvcnRCbG9iKCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBCbG9iID09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWV0YSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuICAgICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICB2YXIganNvblR5cGUgPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcbiAgICAgICAgaWYgKGluTm9kZSgpKSB7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZChcImpzb25cIiwgbWV0YSwgeyBmaWxlbmFtZTogJ3JlcXVlc3QuanNvbicsIGNvbnRlbnRUeXBlOiBqc29uVHlwZSB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0YWNobWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYXRjaCA9IGF0dGFjaG1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXRjaCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kKFwiYXR0YWNobWVudFwiLCBhdGNoLCB7IGNvbnRlbnRUeXBlOiBcInRleHQvcGxhaW5cIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kKFwiYXR0YWNobWVudFwiLCBhdGNoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYnJvd3NlclN1cHBvcnRCbG9iKCkpIHtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kKFwianNvblwiLCBuZXcgQmxvYihbbWV0YV0sIHsgdHlwZToganNvblR5cGUgfSkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRhY2htZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBhdGNoID0gYXR0YWNobWVudHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhdGNoID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoXCJhdHRhY2htZW50XCIsIG5ldyBCbG9iKFthdGNoXSwgeyB0eXBlOiBcInRleHQvcGxhaW5cIiB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChcImF0dGFjaG1lbnRcIiwgYXRjaCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiWW91cidyZSBub3QgaW4gbm9kZSBhbmQgeW91ciBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IEJsb2Igb3IgRmlsZSBBUEkuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5wb3N0KHRoaXMuZ2V0RW5kcG9pbnQoZmFsc2UpLCBmb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5qc29uKCk7IH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEZheDtcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IEZheDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9GYXguanNcbiAqKiBtb2R1bGUgaWQgPSAzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyogZXNsaW50LWVudiBicm93c2VyICovXG5tb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5Gb3JtRGF0YTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Zvcm0tZGF0YS9saWIvYnJvd3Nlci5qc1xuICoqIG1vZHVsZSBpZCA9IDM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEZvcndhcmRpbmdOdW1iZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGb3J3YXJkaW5nTnVtYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZvcndhcmRpbmdOdW1iZXIocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImZvcndhcmRpbmctbnVtYmVyXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgQWRkIE5ldyBGb3J3YXJkaW5nIE51bWJlclxuICAgICovXG4gICAgRm9yd2FyZGluZ051bWJlci5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChib2R5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIEdldCBGb3J3YXJkaW5nIE51bWJlcnNcbiAgICAqL1xuICAgIEZvcndhcmRpbmdOdW1iZXIucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEZvcndhcmRpbmdOdW1iZXI7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBGb3J3YXJkaW5nTnVtYmVyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0ZvcndhcmRpbmdOdW1iZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cbnZhciBVcmxTZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vLi4vVXJsU2VjdGlvblwiKTtcbnZhciBHcmFudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdyYW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEdyYW50KHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJncmFudFwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICAgIEdldCBFeHRlbnNpb24gR3JhbnRzXG4gICAgKi9cbiAgICBHcmFudC5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KGZhbHNlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gR3JhbnQ7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBHcmFudDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9HcmFudC5qc1xuICoqIG1vZHVsZSBpZCA9IDM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEdyZWV0aW5nID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR3JlZXRpbmcsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR3JlZXRpbmcocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImdyZWV0aW5nXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgQ3JlYXRlIEN1c3RvbSBHcmVldGluZ1xuICAgICovXG4gICAgR3JlZXRpbmcucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwb3N0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBHZXQgQ3VzdG9tIEdyZWV0aW5nIGJ5IElEXG4gICAgKi9cbiAgICBHcmVldGluZy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gR3JlZXRpbmc7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBHcmVldGluZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9HcmVldGluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDQwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIFNlcnZpY2VJbmZvXzEgPSByZXF1aXJlKFwiLi9TZXJ2aWNlSW5mb1wiKTtcbnZhciBFbmRfMSA9IHJlcXVpcmUoXCIuL0VuZFwiKTtcbnZhciBNZWV0aW5nID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWVldGluZywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNZWV0aW5nKHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJtZWV0aW5nXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIE1lZXRpbmcucHJvdG90eXBlLnNlcnZpY2VJbmZvID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VydmljZUluZm9fMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgTWVldGluZy5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW5kXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgQ3JlYXRlIE1lZXRpbmdcbiAgICAqL1xuICAgIE1lZXRpbmcucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwb3N0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBHZXQgTWVldGluZ3MgTGlzdFxuICAgICovXG4gICAgTWVldGluZy5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBEZWxldGUgTWVldGluZ1xuICAgICovXG4gICAgTWVldGluZy5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJkZWxldGVcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnJlc3BvbnNlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIEdldCBNZWV0aW5nXG4gICAgKi9cbiAgICBNZWV0aW5nLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBVcGRhdGUgTWVldGluZ1xuICAgICovXG4gICAgTWVldGluZy5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBNZWV0aW5nO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gTWVldGluZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9NZWV0aW5nLmpzXG4gKiogbW9kdWxlIGlkID0gNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgU2VydmljZUluZm8gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTZXJ2aWNlSW5mbywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTZXJ2aWNlSW5mbyhwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwic2VydmljZS1pbmZvXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgR2V0IE1lZXRpbmcgU2VydmljZSBJbmZvXG4gICAgKi9cbiAgICBTZXJ2aWNlSW5mby5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2VydmljZUluZm87XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBTZXJ2aWNlSW5mbztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9TZXJ2aWNlSW5mby5qc1xuICoqIG1vZHVsZSBpZCA9IDQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEVuZCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVuZCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbmQocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImVuZFwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICAgIEVuZCBDdXJyZW50IE1lZXRpbmdcbiAgICAqL1xuICAgIEVuZC5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicG9zdFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gRW5kO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gRW5kO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0VuZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIENvbnRlbnRfMSA9IHJlcXVpcmUoXCIuL0NvbnRlbnRcIik7XG52YXIgTWVzc2FnZVN0b3JlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWVzc2FnZVN0b3JlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1lc3NhZ2VTdG9yZShwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwibWVzc2FnZS1zdG9yZVwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIG1lc3NhZ2UgYXR0YWNobWVudFxuICAgICAqL1xuICAgIE1lc3NhZ2VTdG9yZS5wcm90b3R5cGUuY29udGVudCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbnRlbnRfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBHZXQgTWVzc2FnZSBMaXN0XG4gICAgKi9cbiAgICBNZXNzYWdlU3RvcmUucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIERlbGV0ZSBNZXNzYWdlIGJ5IElEXG4gICAgKi9cbiAgICBNZXNzYWdlU3RvcmUucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJkZWxldGVcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogcXVlcnksIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMucmVzcG9uc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgR2V0IE1lc3NhZ2UgYnkgSURcbiAgICAqL1xuICAgIE1lc3NhZ2VTdG9yZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgVXBkYXRlIE1lc3NhZ2UgYnkgSURcbiAgICAqL1xuICAgIE1lc3NhZ2VTdG9yZS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBNZXNzYWdlU3RvcmU7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBNZXNzYWdlU3RvcmU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvTWVzc2FnZVN0b3JlLmpzXG4gKiogbW9kdWxlIGlkID0gNDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgQ29udGVudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbnRlbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29udGVudChwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiY29udGVudFwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICAgIEdldCBNZXNzYWdlIEF0dGFjaG1lbnRcbiAgICAqL1xuICAgIENvbnRlbnQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5yZXNwb25zZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb250ZW50O1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gQ29udGVudDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9Db250ZW50LmpzXG4gKiogbW9kdWxlIGlkID0gNDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgTWVzc2FnZVN5bmMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZXNzYWdlU3luYywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNZXNzYWdlU3luYyhwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwibWVzc2FnZS1zeW5jXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgTWVzc2FnZSBTeW5jaHJvbml6YXRpb25cbiAgICAqL1xuICAgIE1lc3NhZ2VTeW5jLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWVzc2FnZVN5bmM7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBNZXNzYWdlU3luYztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9NZXNzYWdlU3luYy5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIFBob25lTnVtYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGhvbmVOdW1iZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUGhvbmVOdW1iZXIocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcInBob25lLW51bWJlclwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICAgIEdldCBFeHRlbnNpb24gUGhvbmUgTnVtYmVyc1xuICAgICovXG4gICAgUGhvbmVOdW1iZXIucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludChmYWxzZSksIHF1ZXJ5OiBxdWVyeSwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIEdldCBQaG9uZSBOdW1iZXIgYnkgSURcbiAgICAqL1xuICAgIFBob25lTnVtYmVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBQaG9uZU51bWJlcjtcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IFBob25lTnVtYmVyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL1Bob25lTnVtYmVyLmpzXG4gKiogbW9kdWxlIGlkID0gNDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgUHJlc2VuY2UgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcmVzZW5jZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQcmVzZW5jZShwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwicHJlc2VuY2VcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBHZXQgRXh0ZW5zaW9uIFByZXNlbmNlXG4gICAgKi9cbiAgICBQcmVzZW5jZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUHJlc2VuY2U7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBQcmVzZW5jZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9QcmVzZW5jZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEZvcm1EYXRhID0gcmVxdWlyZShcImZvcm0tZGF0YVwiKTtcbnZhciBQcm9maWxlSW1hZ2UgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcm9maWxlSW1hZ2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUHJvZmlsZUltYWdlKHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJwcm9maWxlLWltYWdlXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgR2V0IFByb2ZpbGUgSW1hZ2VcbiAgICAqL1xuICAgIFByb2ZpbGVJbWFnZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnJlc3BvbnNlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIFVwZGF0ZSBQcm9maWxlIEltYWdlXG4gICAgKi9cbiAgICBQcm9maWxlSW1hZ2UucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChpbWFnZURhdGEsIGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIGlmIChjb250ZW50VHlwZSA9PT0gdm9pZCAwKSB7IGNvbnRlbnRUeXBlID0gXCJpbWFnZS9wbmdcIjsgfVxuICAgICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtLmFwcGVuZChcImltYWdlXCIsIGltYWdlRGF0YSwgeyBjb250ZW50VHlwZTogY29udGVudFR5cGUsIGZpbGVuYW1lOiBcInByb2ZpbGUuXCIgKyBjb250ZW50VHlwZS5zcGxpdCgnLycpLnBvcCgpIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkucHV0KHRoaXMuZ2V0RW5kcG9pbnQoKSwgZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIFVwZGF0ZSBQcm9maWxlIEltYWdlIChzYW1lIGFzIFBVVClcbiAgICAqL1xuICAgIFByb2ZpbGVJbWFnZS5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChpbWFnZURhdGEsIGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIGlmIChjb250ZW50VHlwZSA9PT0gdm9pZCAwKSB7IGNvbnRlbnRUeXBlID0gXCJpbWFnZS9wbmdcIjsgfVxuICAgICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtLmFwcGVuZChcImltYWdlXCIsIGltYWdlRGF0YSwgeyBjb250ZW50VHlwZTogY29udGVudFR5cGUsIGZpbGVuYW1lOiBcInByb2ZpbGUuXCIgKyBjb250ZW50VHlwZS5zcGxpdCgnLycpLnBvcCgpIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkucHV0KHRoaXMuZ2V0RW5kcG9pbnQoKSwgZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7IH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFByb2ZpbGVJbWFnZTtcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IFByb2ZpbGVJbWFnZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9Qcm9maWxlSW1hZ2UuanNcbiAqKiBtb2R1bGUgaWQgPSA0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cbnZhciBVcmxTZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vLi4vVXJsU2VjdGlvblwiKTtcbnZhciBSaW5nb3V0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmluZ291dCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSaW5nb3V0KHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJyaW5nb3V0XCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgSW5pdGlhdGUgUmluZ091dCBDYWxsXG4gICAgKi9cbiAgICBSaW5nb3V0LnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicG9zdFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICAgQ2FuY2VsIFJpbmdPdXQgQ2FsbFxuICAgICovXG4gICAgUmluZ291dC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJkZWxldGVcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnJlc3BvbnNlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIEdldCBSaW5nT3V0IENhbGwgU3RhdHVzXG4gICAgKi9cbiAgICBSaW5nb3V0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcImdldFwiLCB1cmw6IHRoaXMuZ2V0RW5kcG9pbnQodHJ1ZSksIHF1ZXJ5OiB1bmRlZmluZWQsIGJvZHk6IHVuZGVmaW5lZCB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBSaW5nb3V0O1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gUmluZ291dDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9SaW5nb3V0LmpzXG4gKiogbW9kdWxlIGlkID0gNTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgU21zID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU21zLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNtcyhwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwic21zXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgQ3JlYXRlIGFuZCBTZW5kIFNNUyBNZXNzYWdlXG4gICAgKi9cbiAgICBTbXMucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoYm9keSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwb3N0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBTbXM7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBTbXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvU21zLmpzXG4gKiogbW9kdWxlIGlkID0gNTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgT3JkZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPcmRlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPcmRlcihwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwib3JkZXJcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBDcmVhdGUgTmV3IE9yZGVyXG4gICAgKi9cbiAgICBPcmRlci5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChib2R5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAgIEdldCBPcmRlciBieSBJRFxuICAgICovXG4gICAgT3JkZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwiZ2V0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogdW5kZWZpbmVkIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIE9yZGVyO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gT3JkZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvT3JkZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8vIFRoaXMgaXMgR2VuZXJhdGVkIFNvdXJjZS5cbnZhciBVcmxTZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vLi4vVXJsU2VjdGlvblwiKTtcbnZhciBDb250ZW50XzEgPSByZXF1aXJlKFwiLi9Db250ZW50XCIpO1xudmFyIFJlY29yZGluZyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlY29yZGluZywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZWNvcmRpbmcocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcInJlY29yZGluZ1wiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgaWRlbnRpZmllciBvZiBhIG1lc3NhZ2UgYXR0YWNobWVudFxuICAgICAqL1xuICAgIFJlY29yZGluZy5wcm90b3R5cGUuY29udGVudCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbnRlbnRfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgICBHZXQgQ2FsbCBSZWNvcmRpbmcgTWV0YWRhdGFcbiAgICAqL1xuICAgIFJlY29yZGluZy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJnZXRcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVjb3JkaW5nO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gUmVjb3JkaW5nO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL1JlY29yZGluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDUzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEN1c3RvbURhdGFfMSA9IHJlcXVpcmUoXCIuL0N1c3RvbURhdGFcIik7XG52YXIgQ2xpZW50SW5mbyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENsaWVudEluZm8sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ2xpZW50SW5mbyhwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwiY2xpZW50LWluZm9cIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEN1c3RvbSBkYXRhIGFjY2VzcyBrZXkuIFRoZSBudW1iZXIgb2YgdW5pcXVlIGN1c3RvbSBkYXRhIGtleXMgaXMgbGltaXRlZCB0byAxMDAga2V5cyBwZXIgZXh0ZW5zaW9uLCBzdW1tYXJpemVkIGZvciBhbGwgdGhlIGFwcGxpY2F0aW9ucy4gRm9yIGV4YW1wbGUsIGlmIHlvdSBoYXZlIGNyZWF0ZWQgNTAgY3VzdG9tIGRhdGEga2V5cyB1bmRlciB0aGUgQW5kcm9pZCBtb2JpbGUgY2xpZW50IGFwcGxpY2F0aW9uIGZvciB0aGUgcGFydGljdWxhciBleHRlbnNpb24sIHRoZW4gbG9nZ2VkIGluIHRoZSBpT1MgYXBwbGljYXRpb24gYW5kIGNyZWF0ZWQgYW5vdGhlciA1MCBrZXlzLCB0aGUgd2ViIGNsaWVudCBhcHBsaWNhdGlvbiB3b24ndCBiZSBhbGxvd2VkIHRvIGNyZWF0ZSBhbnkgY3VzdG9tIGRhdGEga2V5IGZvciB0aGF0IGV4dGVuc2lvblxuICAgICAqL1xuICAgIENsaWVudEluZm8ucHJvdG90eXBlLmN1c3RvbURhdGEgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21EYXRhXzEuZGVmYXVsdCh0aGlzLCBpZCk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2xpZW50SW5mbztcbn0oVXJsU2VjdGlvbl8xLmRlZmF1bHQpKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IENsaWVudEluZm87XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2dlbmVyYXRlZC91cmwtc2VnbWVudHMvQ2xpZW50SW5mby5qc1xuICoqIG1vZHVsZSBpZCA9IDU0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIEN1c3RvbURhdGEgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDdXN0b21EYXRhLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEN1c3RvbURhdGEocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcImN1c3RvbS1kYXRhXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgVXBkYXRlIEN1c3RvbSBEYXRhIGJ5IEtleVxuICAgICovXG4gICAgQ3VzdG9tRGF0YS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VydmljZSgpLnNlbmQoeyBtZXRob2Q6IFwicHV0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHVuZGVmaW5lZCwgYm9keTogYm9keSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDdXN0b21EYXRhO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gQ3VzdG9tRGF0YTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9DdXN0b21EYXRhLmpzXG4gKiogbW9kdWxlIGlkID0gNTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgTG9va3VwXzEgPSByZXF1aXJlKFwiLi9Mb29rdXBcIik7XG52YXIgUmVzZXJ2ZV8xID0gcmVxdWlyZShcIi4vUmVzZXJ2ZVwiKTtcbnZhciBOdW1iZXJQb29sID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTnVtYmVyUG9vbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOdW1iZXJQb29sKHBydiwgaWQsIHNlcnZpY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgXCJudW1iZXItcG9vbFwiLCBpZCwgcHJ2LCBzZXJ2aWNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBOdW1iZXJQb29sLnByb3RvdHlwZS5sb29rdXAgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMb29rdXBfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgTnVtYmVyUG9vbC5wcm90b3R5cGUucmVzZXJ2ZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc2VydmVfMS5kZWZhdWx0KHRoaXMsIGlkKTtcbiAgICB9O1xuICAgIHJldHVybiBOdW1iZXJQb29sO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gTnVtYmVyUG9vbDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ2VuZXJhdGVkL3VybC1zZWdtZW50cy9OdW1iZXJQb29sLmpzXG4gKiogbW9kdWxlIGlkID0gNTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLyBUaGlzIGlzIEdlbmVyYXRlZCBTb3VyY2UuXG52YXIgVXJsU2VjdGlvbl8xID0gcmVxdWlyZShcIi4uLy4uL1VybFNlY3Rpb25cIik7XG52YXIgTG9va3VwID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTG9va3VwLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIExvb2t1cChwcnYsIGlkLCBzZXJ2aWNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIFwibG9va3VwXCIsIGlkLCBwcnYsIHNlcnZpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgICAgTG9vayB1cCBQaG9uZSBOdW1iZXJcbiAgICAqL1xuICAgIExvb2t1cC5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChxdWVyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXJ2aWNlKCkuc2VuZCh7IG1ldGhvZDogXCJwb3N0XCIsIHVybDogdGhpcy5nZXRFbmRwb2ludCh0cnVlKSwgcXVlcnk6IHF1ZXJ5LCBib2R5OiB1bmRlZmluZWQgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gTG9va3VwO1xufShVcmxTZWN0aW9uXzEuZGVmYXVsdCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gTG9va3VwO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL0xvb2t1cC5qc1xuICoqIG1vZHVsZSBpZCA9IDU3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8gVGhpcyBpcyBHZW5lcmF0ZWQgU291cmNlLlxudmFyIFVybFNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9VcmxTZWN0aW9uXCIpO1xudmFyIFJlc2VydmUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZXNlcnZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlc2VydmUocHJ2LCBpZCwgc2VydmljZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBcInJlc2VydmVcIiwgaWQsIHBydiwgc2VydmljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgICBSZXNlcnZlIFBob25lIE51bWJlclxuICAgICovXG4gICAgUmVzZXJ2ZS5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChib2R5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2UoKS5zZW5kKHsgbWV0aG9kOiBcInBvc3RcIiwgdXJsOiB0aGlzLmdldEVuZHBvaW50KHRydWUpLCBxdWVyeTogdW5kZWZpbmVkLCBib2R5OiBib2R5IH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFJlc2VydmU7XG59KFVybFNlY3Rpb25fMS5kZWZhdWx0KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBSZXNlcnZlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9nZW5lcmF0ZWQvdXJsLXNlZ21lbnRzL1Jlc2VydmUuanNcbiAqKiBtb2R1bGUgaWQgPSA1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiZXM2LXByb21pc2VcIiksIHJlcXVpcmUoXCJmZXRjaC1wb255ZmlsbFwiKSwgcmVxdWlyZShcInB1Ym51YlwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbLCAsIFwicHVibnViXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlNES1wiXSA9IGZhY3RvcnkocmVxdWlyZShcImVzNi1wcm9taXNlXCIpLCByZXF1aXJlKFwiZmV0Y2gtcG9ueWZpbGxcIiksIHJlcXVpcmUoXCJwdWJudWJcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlJpbmdDZW50cmFsXCJdID0gcm9vdFtcIlJpbmdDZW50cmFsXCJdIHx8IHt9LCByb290W1wiUmluZ0NlbnRyYWxcIl1bXCJTREtcIl0gPSBmYWN0b3J5KHJvb3RbdW5kZWZpbmVkXSwgcm9vdFt1bmRlZmluZWRdLCByb290W3VuZGVmaW5lZF0pO1xufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXykge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9idWlsZC9cIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBVdGlscyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9VdGlscyk7XG5cbnZhciBfQ2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblxudmFyIF9DYWNoZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DYWNoZSk7XG5cbnZhciBfRXh0ZXJuYWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIEV4dGVybmFscyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9FeHRlcm5hbHMpO1xuXG52YXIgX2V2ZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXG52YXIgX0NsaWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXG52YXIgX0NsaWVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DbGllbnQpO1xuXG52YXIgX0FwaVJlc3BvbnNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cbnZhciBfQXBpUmVzcG9uc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXBpUmVzcG9uc2UpO1xuXG52YXIgX0NsaWVudE1vY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxudmFyIF9DbGllbnRNb2NrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NsaWVudE1vY2spO1xuXG52YXIgX01vY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblxudmFyIF9Nb2NrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01vY2spO1xuXG52YXIgX1JlZ2lzdHJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cbnZhciBfUmVnaXN0cnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVnaXN0cnkpO1xuXG52YXIgX1BsYXRmb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cbnZhciBfUGxhdGZvcm0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGxhdGZvcm0pO1xuXG52YXIgX0F1dGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9BdXRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0F1dGgpO1xuXG52YXIgX1B1Ym51YkZhY3RvcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblxudmFyIF9QdWJudWJGYWN0b3J5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1B1Ym51YkZhY3RvcnkpO1xuXG52YXIgX1N1YnNjcmlwdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXG52YXIgX1N1YnNjcmlwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdWJzY3JpcHRpb24pO1xuXG52YXIgX0NhY2hlZFN1YnNjcmlwdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX0NhY2hlZFN1YnNjcmlwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DYWNoZWRTdWJzY3JpcHRpb24pO1xuXG52YXIgX0NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXG52YXIgX0NvbnN0YW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25zdGFudHMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU0RLID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZSBSaW5nQ2VudHJhbFxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc2VydmVyXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jYWNoZVByZWZpeF1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuYXBwU2VjcmV0XVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5hcHBLZXldXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmFwcE5hbWVdXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmFwcFZlcnNpb25dXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnB1Ym51YkZhY3RvcnldXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNsaWVudF1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucmVkaXJlY3RVcmldXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBTREsoX3JlZikge1xuICAgICAgICB2YXIgc2VydmVyID0gX3JlZi5zZXJ2ZXI7XG4gICAgICAgIHZhciBjYWNoZVByZWZpeCA9IF9yZWYuY2FjaGVQcmVmaXg7XG4gICAgICAgIHZhciBhcHBTZWNyZXQgPSBfcmVmLmFwcFNlY3JldDtcbiAgICAgICAgdmFyIGFwcEtleSA9IF9yZWYuYXBwS2V5O1xuICAgICAgICB2YXIgYXBwTmFtZSA9IF9yZWYuYXBwTmFtZTtcbiAgICAgICAgdmFyIGFwcFZlcnNpb24gPSBfcmVmLmFwcFZlcnNpb247XG4gICAgICAgIHZhciBwdWJudWJGYWN0b3J5ID0gX3JlZi5wdWJudWJGYWN0b3J5O1xuICAgICAgICB2YXIgY2xpZW50ID0gX3JlZi5jbGllbnQ7XG4gICAgICAgIHZhciByZWRpcmVjdFVyaSA9IF9yZWYucmVkaXJlY3RVcmk7XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNESyk7XG5cbiAgICAgICAgaWYgKCFFeHRlcm5hbHMuZmV0Y2gpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTmF0aXZlIEZldGNoIGlzIG1pc3NpbmcsIHNldCBSaW5nQ2VudHJhbC5TREsuY29yZS5FeHRlcm5hbHMuZmV0Y2ggdG8geW91ciBmYXZvcml0ZSBhbHRlcm5hdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFFeHRlcm5hbHMuUHJvbWlzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOYXRpdmUgUHJvbWlzZSBpcyBtaXNzaW5nLCBzZXQgUmluZ0NlbnRyYWwuU0RLLmNvcmUuRXh0ZXJuYWxzLlByb21pc2UgdG8geW91ciBmYXZvcml0ZSBhbHRlcm5hdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgX0NhY2hlMi5kZWZhdWx0KEV4dGVybmFscy5sb2NhbFN0b3JhZ2UsIGNhY2hlUHJlZml4KTtcblxuICAgICAgICB0aGlzLl9jbGllbnQgPSBjbGllbnQgfHwgbmV3IF9DbGllbnQyLmRlZmF1bHQoKTtcblxuICAgICAgICB0aGlzLl9wbGF0Zm9ybSA9IG5ldyBfUGxhdGZvcm0yLmRlZmF1bHQoe1xuICAgICAgICAgICAgY2xpZW50OiB0aGlzLl9jbGllbnQsXG4gICAgICAgICAgICBjYWNoZTogdGhpcy5fY2FjaGUsXG4gICAgICAgICAgICB2ZXJzaW9uOiBTREsudmVyc2lvbixcbiAgICAgICAgICAgIHNlcnZlcjogc2VydmVyLFxuICAgICAgICAgICAgYXBwS2V5OiBhcHBLZXksXG4gICAgICAgICAgICBhcHBTZWNyZXQ6IGFwcFNlY3JldCxcbiAgICAgICAgICAgIGFwcE5hbWU6IGFwcE5hbWUsXG4gICAgICAgICAgICBhcHBWZXJzaW9uOiBhcHBWZXJzaW9uLFxuICAgICAgICAgICAgcmVkaXJlY3RVcmk6IHJlZGlyZWN0VXJpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX3B1Ym51YkZhY3RvcnkgPSBwdWJudWJGYWN0b3J5IHx8IEV4dGVybmFscy5QVUJOVUI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7UGxhdGZvcm19XG4gICAgICovXG5cblxuICAgIFNESy5wcm90b3R5cGUucGxhdGZvcm0gPSBmdW5jdGlvbiBwbGF0Zm9ybSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXRmb3JtO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtTdWJzY3JpcHRpb259XG4gICAgICovXG5cblxuICAgIFNESy5wcm90b3R5cGUuY3JlYXRlU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gY3JlYXRlU3Vic2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IF9TdWJzY3JpcHRpb24yLmRlZmF1bHQodGhpcy5fcHVibnViRmFjdG9yeSwgdGhpcy5fcGxhdGZvcm0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtDYWNoZWRTdWJzY3JpcHRpb259XG4gICAgICovXG5cblxuICAgIFNESy5wcm90b3R5cGUuY3JlYXRlQ2FjaGVkU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gY3JlYXRlQ2FjaGVkU3Vic2NyaXB0aW9uKGNhY2hlS2V5KSB7XG4gICAgICAgIHJldHVybiBuZXcgX0NhY2hlZFN1YnNjcmlwdGlvbjIuZGVmYXVsdCh0aGlzLl9wdWJudWJGYWN0b3J5LCB0aGlzLl9wbGF0Zm9ybSwgdGhpcy5fY2FjaGUsIGNhY2hlS2V5KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Q2FjaGV9XG4gICAgICovXG5cblxuICAgIFNESy5wcm90b3R5cGUuY2FjaGUgPSBmdW5jdGlvbiBjYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlO1xuICAgIH07XG5cbiAgICBTREsuaGFuZGxlTG9naW5SZWRpcmVjdCA9IGZ1bmN0aW9uIGhhbmRsZUxvZ2luUmVkaXJlY3Qob3JpZ2luKSB7XG4gICAgICAgIHZhciBfd2luZG93JG9wZW5lciRwb3N0TWU7XG5cbiAgICAgICAgdmFyIHJlc3BvbnNlID0gd2luZG93LmxvY2F0aW9uLmhhc2ggPyB3aW5kb3cubG9jYXRpb24uaGFzaCA6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG4gICAgICAgIHdpbmRvdy5vcGVuZXIucG9zdE1lc3NhZ2UoKF93aW5kb3ckb3BlbmVyJHBvc3RNZSA9IHt9LCBfd2luZG93JG9wZW5lciRwb3N0TWVbX0NvbnN0YW50czIuZGVmYXVsdC5hdXRoUmVzcG9uc2VQcm9wZXJ0eV0gPSByZXNwb25zZSwgX3dpbmRvdyRvcGVuZXIkcG9zdE1lKSwgb3JpZ2luIHx8IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pO1xuICAgIH07XG5cbiAgICByZXR1cm4gU0RLO1xufSgpO1xuXG5TREsudmVyc2lvbiA9IF9Db25zdGFudHMyLmRlZmF1bHQudmVyc2lvbjtcblNESy5zZXJ2ZXIgPSB7XG4gICAgc2FuZGJveDogJ2h0dHBzOi8vcGxhdGZvcm0uZGV2dGVzdC5yaW5nY2VudHJhbC5jb20nLFxuICAgIHByb2R1Y3Rpb246ICdodHRwczovL3BsYXRmb3JtLnJpbmdjZW50cmFsLmNvbSdcbn07XG5TREsuY29yZSA9IHtcbiAgICBDYWNoZTogX0NhY2hlMi5kZWZhdWx0LFxuICAgIEV2ZW50RW1pdHRlcjogX2V2ZW50czIuZGVmYXVsdCxcbiAgICBVdGlsczogVXRpbHMsXG4gICAgRXh0ZXJuYWxzOiBFeHRlcm5hbHNcbn07XG5TREsuaHR0cCA9IHtcbiAgICBDbGllbnQ6IF9DbGllbnQyLmRlZmF1bHQsXG4gICAgQXBpUmVzcG9uc2U6IF9BcGlSZXNwb25zZTIuZGVmYXVsdFxufTtcblNESy5wbGF0Zm9ybSA9IHtcbiAgICBBdXRoOiBfQXV0aDIuZGVmYXVsdCxcbiAgICBQbGF0Zm9ybTogX1BsYXRmb3JtMi5kZWZhdWx0XG59O1xuU0RLLnN1YnNjcmlwdGlvbiA9IHtcbiAgICBTdWJzY3JpcHRpb246IF9TdWJzY3JpcHRpb24yLmRlZmF1bHRcbn07XG5TREsubW9ja3MgPSB7XG4gICAgQ2xpZW50OiBfQ2xpZW50TW9jazIuZGVmYXVsdCxcbiAgICBSZWdpc3RyeTogX1JlZ2lzdHJ5Mi5kZWZhdWx0LFxuICAgIE1vY2s6IF9Nb2NrMi5kZWZhdWx0XG59O1xuU0RLLnB1Ym51YiA9IHtcbiAgICBQdWJudWJNb2NrRmFjdG9yeTogX1B1Ym51YkZhY3RvcnkyLmRlZmF1bHRcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBTREs7XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvbWFzdGVyL0xJQ0VOU0UgZmlsZS4gQW5cbiAqIGFkZGl0aW9uYWwgZ3JhbnQgb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpblxuICogdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbiEoZnVuY3Rpb24oZ2xvYmFsKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID1cbiAgICB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiO1xuXG4gIHZhciBpbk1vZHVsZSA9IHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCI7XG4gIHZhciBydW50aW1lID0gZ2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZTtcbiAgaWYgKHJ1bnRpbWUpIHtcbiAgICBpZiAoaW5Nb2R1bGUpIHtcbiAgICAgIC8vIElmIHJlZ2VuZXJhdG9yUnVudGltZSBpcyBkZWZpbmVkIGdsb2JhbGx5IGFuZCB3ZSdyZSBpbiBhIG1vZHVsZSxcbiAgICAgIC8vIG1ha2UgdGhlIGV4cG9ydHMgb2JqZWN0IGlkZW50aWNhbCB0byByZWdlbmVyYXRvclJ1bnRpbWUuXG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IHJ1bnRpbWU7XG4gICAgfVxuICAgIC8vIERvbid0IGJvdGhlciBldmFsdWF0aW5nIHRoZSByZXN0IG9mIHRoaXMgZmlsZSBpZiB0aGUgcnVudGltZSB3YXNcbiAgICAvLyBhbHJlYWR5IGRlZmluZWQgZ2xvYmFsbHkuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRGVmaW5lIHRoZSBydW50aW1lIGdsb2JhbGx5IChhcyBleHBlY3RlZCBieSBnZW5lcmF0ZWQgY29kZSkgYXMgZWl0aGVyXG4gIC8vIG1vZHVsZS5leHBvcnRzIChpZiB3ZSdyZSBpbiBhIG1vZHVsZSkgb3IgYSBuZXcsIGVtcHR5IG9iamVjdC5cbiAgcnVudGltZSA9IGdsb2JhbC5yZWdlbmVyYXRvclJ1bnRpbWUgPSBpbk1vZHVsZSA/IG1vZHVsZS5leHBvcnRzIDoge307XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUoKG91dGVyRm4gfHwgR2VuZXJhdG9yKS5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIHJ1bnRpbWUud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9IEdlbmVyYXRvci5wcm90b3R5cGU7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdwLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb247XG4gIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIHJ1bnRpbWUuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIHJ1bnRpbWUubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYHZhbHVlIGluc3RhbmNlb2YgQXdhaXRBcmd1bWVudGAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuIFNvbWUgbWF5IGNvbnNpZGVyIHRoZSBuYW1lIG9mIHRoaXMgbWV0aG9kIHRvb1xuICAvLyBjdXRlc3ksIGJ1dCB0aGV5IGFyZSBjdXJtdWRnZW9ucy5cbiAgcnVudGltZS5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBuZXcgQXdhaXRBcmd1bWVudChhcmcpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIEF3YWl0QXJndW1lbnQoYXJnKSB7XG4gICAgdGhpcy5hcmcgPSBhcmc7XG4gIH1cblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvcikge1xuICAgIC8vIFRoaXMgaW52b2tlIGZ1bmN0aW9uIGlzIHdyaXR0ZW4gaW4gYSBzdHlsZSB0aGF0IGFzc3VtZXMgc29tZVxuICAgIC8vIGNhbGxpbmcgZnVuY3Rpb24gKG9yIFByb21pc2UpIHdpbGwgaGFuZGxlIGV4Y2VwdGlvbnMuXG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gZ2VuZXJhdG9yW21ldGhvZF0oYXJnKTtcbiAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIEF3YWl0QXJndW1lbnRcbiAgICAgICAgPyBQcm9taXNlLnJlc29sdmUodmFsdWUuYXJnKS50aGVuKGludm9rZU5leHQsIGludm9rZVRocm93KVxuICAgICAgICA6IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLiBJZiB0aGUgUHJvbWlzZSBpcyByZWplY3RlZCwgaG93ZXZlciwgdGhlXG4gICAgICAgICAgICAvLyByZXN1bHQgZm9yIHRoaXMgaXRlcmF0aW9uIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgc2FtZVxuICAgICAgICAgICAgLy8gcmVhc29uLiBOb3RlIHRoYXQgcmVqZWN0aW9ucyBvZiB5aWVsZGVkIFByb21pc2VzIGFyZSBub3RcbiAgICAgICAgICAgIC8vIHRocm93biBiYWNrIGludG8gdGhlIGdlbmVyYXRvciBmdW5jdGlvbiwgYXMgaXMgdGhlIGNhc2VcbiAgICAgICAgICAgIC8vIHdoZW4gYW4gYXdhaXRlZCBQcm9taXNlIGlzIHJlamVjdGVkLiBUaGlzIGRpZmZlcmVuY2UgaW5cbiAgICAgICAgICAgIC8vIGJlaGF2aW9yIGJldHdlZW4geWllbGQgYW5kIGF3YWl0IGlzIGltcG9ydGFudCwgYmVjYXVzZSBpdFxuICAgICAgICAgICAgLy8gYWxsb3dzIHRoZSBjb25zdW1lciB0byBkZWNpZGUgd2hhdCB0byBkbyB3aXRoIHRoZSB5aWVsZGVkXG4gICAgICAgICAgICAvLyByZWplY3Rpb24gKHN3YWxsb3cgaXQgYW5kIGNvbnRpbnVlLCBtYW51YWxseSAudGhyb3cgaXQgYmFja1xuICAgICAgICAgICAgLy8gaW50byB0aGUgZ2VuZXJhdG9yLCBhYmFuZG9uIGl0ZXJhdGlvbiwgd2hhdGV2ZXIpLiBXaXRoXG4gICAgICAgICAgICAvLyBhd2FpdCwgYnkgY29udHJhc3QsIHRoZXJlIGlzIG5vIG9wcG9ydHVuaXR5IHRvIGV4YW1pbmUgdGhlXG4gICAgICAgICAgICAvLyByZWplY3Rpb24gcmVhc29uIG91dHNpZGUgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiwgc28gdGhlXG4gICAgICAgICAgICAvLyBvbmx5IG9wdGlvbiBpcyB0byB0aHJvdyBpdCBmcm9tIHRoZSBhd2FpdCBleHByZXNzaW9uLCBhbmRcbiAgICAgICAgICAgIC8vIGxldCB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhbmRsZSB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgcHJvY2Vzcy5kb21haW4pIHtcbiAgICAgIGludm9rZSA9IHByb2Nlc3MuZG9tYWluLmJpbmQoaW52b2tlKTtcbiAgICB9XG5cbiAgICB2YXIgaW52b2tlTmV4dCA9IGludm9rZS5iaW5kKGdlbmVyYXRvciwgXCJuZXh0XCIpO1xuICAgIHZhciBpbnZva2VUaHJvdyA9IGludm9rZS5iaW5kKGdlbmVyYXRvciwgXCJ0aHJvd1wiKTtcbiAgICB2YXIgaW52b2tlUmV0dXJuID0gaW52b2tlLmJpbmQoZ2VuZXJhdG9yLCBcInJldHVyblwiKTtcbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBpbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgIHJlc29sdmUoY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIHJ1bnRpbWUuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KVxuICAgICk7XG5cbiAgICByZXR1cm4gcnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJyZXR1cm5cIiB8fFxuICAgICAgICAgICAgICAobWV0aG9kID09PSBcInRocm93XCIgJiYgZGVsZWdhdGUuaXRlcmF0b3JbbWV0aG9kXSA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgLy8gQSByZXR1cm4gb3IgdGhyb3cgKHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyB0aHJvd1xuICAgICAgICAgICAgLy8gbWV0aG9kKSBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYVxuICAgICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgICAgdmFyIHJldHVybk1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW1wicmV0dXJuXCJdO1xuICAgICAgICAgICAgaWYgKHJldHVybk1ldGhvZCkge1xuICAgICAgICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gocmV0dXJuTWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgYXJnKTtcbiAgICAgICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmV0dXJuIG1ldGhvZCB0aHJldyBhbiBleGNlcHRpb24sIGxldCB0aGF0XG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIHByZXZhaWwgb3ZlciB0aGUgb3JpZ2luYWwgcmV0dXJuIG9yIHRocm93LlxuICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICAgICAgICBhcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICAgICAgLy8gQ29udGludWUgd2l0aCB0aGUgb3V0ZXIgcmV0dXJuLCBub3cgdGhhdCB0aGUgZGVsZWdhdGVcbiAgICAgICAgICAgICAgLy8gaXRlcmF0b3IgaGFzIGJlZW4gdGVybWluYXRlZC5cbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKFxuICAgICAgICAgICAgZGVsZWdhdGUuaXRlcmF0b3JbbWV0aG9kXSxcbiAgICAgICAgICAgIGRlbGVnYXRlLml0ZXJhdG9yLFxuICAgICAgICAgICAgYXJnXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gTGlrZSByZXR1cm5pbmcgZ2VuZXJhdG9yLnRocm93KHVuY2F1Z2h0KSwgYnV0IHdpdGhvdXQgdGhlXG4gICAgICAgICAgICAvLyBvdmVyaGVhZCBvZiBhbiBleHRyYSBmdW5jdGlvbiBjYWxsLlxuICAgICAgICAgICAgbWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgICAgYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIERlbGVnYXRlIGdlbmVyYXRvciByYW4gYW5kIGhhbmRsZWQgaXRzIG93biBleGNlcHRpb25zIHNvXG4gICAgICAgICAgLy8gcmVnYXJkbGVzcyBvZiB3aGF0IHRoZSBtZXRob2Qgd2FzLCB3ZSBjb250aW51ZSBhcyBpZiBpdCBpc1xuICAgICAgICAgIC8vIFwibmV4dFwiIHdpdGggYW4gdW5kZWZpbmVkIGFyZy5cbiAgICAgICAgICBtZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBhcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7XG4gICAgICAgICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgY29udGV4dC5fc2VudCA9IGFyZztcblxuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCkge1xuICAgICAgICAgICAgY29udGV4dC5zZW50ID0gYXJnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0LnNlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGFyZykpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgICAgbWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgICBhcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICB2YXIgaW5mbyA9IHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBpZiAoY29udGV4dC5kZWxlZ2F0ZSAmJiBtZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgICAgICAgYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihhcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgbWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH07XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBydW50aW1lLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgcnVudGltZS52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIHRoaXMuc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcbiAgICAgICAgcmV0dXJuICEhY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcbn0pKFxuICAvLyBBbW9uZyB0aGUgdmFyaW91cyB0cmlja3MgZm9yIG9idGFpbmluZyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsXG4gIC8vIG9iamVjdCwgdGhpcyBzZWVtcyB0byBiZSB0aGUgbW9zdCByZWxpYWJsZSB0ZWNobmlxdWUgdGhhdCBkb2VzIG5vdFxuICAvLyB1c2UgaW5kaXJlY3QgZXZhbCAod2hpY2ggdmlvbGF0ZXMgQ29udGVudCBTZWN1cml0eSBQb2xpY3kpLlxuICB0eXBlb2YgZ2xvYmFsID09PSBcIm9iamVjdFwiID8gZ2xvYmFsIDpcbiAgdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiA/IHdpbmRvdyA6XG4gIHR5cGVvZiBzZWxmID09PSBcIm9iamVjdFwiID8gc2VsZiA6IHRoaXNcbik7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmV4cG9ydHMucXVlcnlTdHJpbmdpZnkgPSBxdWVyeVN0cmluZ2lmeTtcbmV4cG9ydHMucGFyc2VRdWVyeVN0cmluZyA9IHBhcnNlUXVlcnlTdHJpbmc7XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcbmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcbmV4cG9ydHMuaXNPYmplY3RPYmplY3QgPSBpc09iamVjdE9iamVjdDtcbmV4cG9ydHMuaXNQbGFpbk9iamVjdCA9IGlzUGxhaW5PYmplY3Q7XG5leHBvcnRzLmlzTm9kZUpTID0gaXNOb2RlSlM7XG5leHBvcnRzLmlzQnJvd3NlciA9IGlzQnJvd3NlcjtcbmV4cG9ydHMuZGVsYXkgPSBkZWxheTtcblxudmFyIF9FeHRlcm5hbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX3F1ZXJ5c3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9xdWVyeXN0cmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9xdWVyeXN0cmluZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IHBhcmFtZXRlcnNcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5U3RyaW5naWZ5KHBhcmFtZXRlcnMpIHtcbiAgICByZXR1cm4gX3F1ZXJ5c3RyaW5nMi5kZWZhdWx0LnN0cmluZ2lmeShwYXJhbWV0ZXJzKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmdcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpIHtcbiAgICByZXR1cm4gX3F1ZXJ5c3RyaW5nMi5kZWZhdWx0LnBhcnNlKHF1ZXJ5U3RyaW5nKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gb2JqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbi8qKlxuICogQHBhcmFtIG9ialxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNBcnJheShvYmopIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSA/IEFycmF5LmlzQXJyYXkob2JqKSA6IHR5cGVvZiBvYmogPT09IFwiYXJyYXlcIjtcbn1cblxuZnVuY3Rpb24gaXNPYmplY3Qobykge1xuICAgIHJldHVybiBvICE9IG51bGwgJiYgKHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YobykpID09PSAnb2JqZWN0JyAmJiAhaXNBcnJheShvKTtcbn1cblxuZnVuY3Rpb24gaXNPYmplY3RPYmplY3Qobykge1xuICAgIHJldHVybiBpc09iamVjdChvKSA9PT0gdHJ1ZSAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG8pIHtcbiAgICB2YXIgY3RvciwgcHJvdDtcblxuICAgIGlmIChpc09iamVjdE9iamVjdChvKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIElmIGhhcyBtb2RpZmllZCBjb25zdHJ1Y3RvclxuICAgIGN0b3IgPSBvLmNvbnN0cnVjdG9yO1xuICAgIGlmICh0eXBlb2YgY3RvciAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gSWYgaGFzIG1vZGlmaWVkIHByb3RvdHlwZVxuICAgIHByb3QgPSBjdG9yLnByb3RvdHlwZTtcbiAgICBpZiAoaXNPYmplY3RPYmplY3QocHJvdCkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBJZiBjb25zdHJ1Y3RvciBkb2VzIG5vdCBoYXZlIGFuIE9iamVjdC1zcGVjaWZpYyBtZXRob2RcbiAgICBpZiAocHJvdC5oYXNPd25Qcm9wZXJ0eSgnaXNQcm90b3R5cGVPZicpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gTW9zdCBsaWtlbHkgYSBwbGFpbiBPYmplY3RcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNOb2RlSlMoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gZGVsYXkodGltZW91dCkge1xuICAgIHJldHVybiBuZXcgX0V4dGVybmFscy5Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICB9KTtcbn1cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmxvY2FsU3RvcmFnZSA9IGV4cG9ydHMuUFVCTlVCID0gZXhwb3J0cy5IZWFkZXJzID0gZXhwb3J0cy5SZXNwb25zZSA9IGV4cG9ydHMuUmVxdWVzdCA9IGV4cG9ydHMuZmV0Y2ggPSBleHBvcnRzLlByb21pc2UgPSB1bmRlZmluZWQ7XG5cbnZhciBfZXM2UHJvbWlzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfZXM2UHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lczZQcm9taXNlKTtcblxudmFyIF9mZXRjaFBvbnlmaWxsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9mZXRjaFBvbnlmaWxsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZldGNoUG9ueWZpbGwpO1xuXG52YXIgX3B1Ym51YiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfcHVibnViMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1Ym51Yik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciByb290ID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cgfHwgdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpcztcIikoKTtcblxudmFyIFByb21pc2UgPSBfZXM2UHJvbWlzZTIuZGVmYXVsdCAmJiBfZXM2UHJvbWlzZTIuZGVmYXVsdC5Qcm9taXNlIHx8IHJvb3QuUHJvbWlzZTtcblxudmFyIGZldGNoUGFydHMgPSBfZmV0Y2hQb255ZmlsbDIuZGVmYXVsdCA/ICgwLCBfZmV0Y2hQb255ZmlsbDIuZGVmYXVsdCkoeyBQcm9taXNlOiBQcm9taXNlIH0pIDoge307XG5cbnZhciBmZXRjaCA9IGZldGNoUGFydHMuZmV0Y2ggfHwgcm9vdC5mZXRjaDtcbnZhciBSZXF1ZXN0ID0gZmV0Y2hQYXJ0cy5SZXF1ZXN0IHx8IHJvb3QuUmVxdWVzdDtcbnZhciBSZXNwb25zZSA9IGZldGNoUGFydHMuUmVzcG9uc2UgfHwgcm9vdC5SZXNwb25zZTtcbnZhciBIZWFkZXJzID0gZmV0Y2hQYXJ0cy5IZWFkZXJzIHx8IHJvb3QuSGVhZGVycztcblxudmFyIFBVQk5VQiA9IF9wdWJudWIyLmRlZmF1bHQgfHwgcm9vdC5QVUJOVUI7XG5cbnZhciBsb2NhbFN0b3JhZ2UgPSB0eXBlb2Ygcm9vdC5sb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnID8gcm9vdC5sb2NhbFN0b3JhZ2UgOiB7fTtcblxuZXhwb3J0cy5Qcm9taXNlID0gUHJvbWlzZTtcbmV4cG9ydHMuZmV0Y2ggPSBmZXRjaDtcbmV4cG9ydHMuUmVxdWVzdCA9IFJlcXVlc3Q7XG5leHBvcnRzLlJlc3BvbnNlID0gUmVzcG9uc2U7XG5leHBvcnRzLkhlYWRlcnMgPSBIZWFkZXJzO1xuZXhwb3J0cy5QVUJOVUIgPSBQVUJOVUI7XG5leHBvcnRzLmxvY2FsU3RvcmFnZSA9IGxvY2FsU3RvcmFnZTtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNV9fO1xuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X187XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXztcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuZGVjb2RlID0gZXhwb3J0cy5wYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5leHBvcnRzLmVuY29kZSA9IGV4cG9ydHMuc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vLyBJZiBvYmouaGFzT3duUHJvcGVydHkgaGFzIGJlZW4gb3ZlcnJpZGRlbiwgdGhlbiBjYWxsaW5nXG4vLyBvYmouaGFzT3duUHJvcGVydHkocHJvcCkgd2lsbCBicmVhay5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2lzc3Vlcy8xNzA3XG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHFzLCBzZXAsIGVxLCBvcHRpb25zKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICB2YXIgb2JqID0ge307XG5cbiAgaWYgKHR5cGVvZiBxcyAhPT0gJ3N0cmluZycgfHwgcXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHZhciByZWdleHAgPSAvXFwrL2c7XG4gIHFzID0gcXMuc3BsaXQoc2VwKTtcblxuICB2YXIgbWF4S2V5cyA9IDEwMDA7XG4gIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLm1heEtleXMgPT09ICdudW1iZXInKSB7XG4gICAgbWF4S2V5cyA9IG9wdGlvbnMubWF4S2V5cztcbiAgfVxuXG4gIHZhciBsZW4gPSBxcy5sZW5ndGg7XG4gIC8vIG1heEtleXMgPD0gMCBtZWFucyB0aGF0IHdlIHNob3VsZCBub3QgbGltaXQga2V5cyBjb3VudFxuICBpZiAobWF4S2V5cyA+IDAgJiYgbGVuID4gbWF4S2V5cykge1xuICAgIGxlbiA9IG1heEtleXM7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIHggPSBxc1tpXS5yZXBsYWNlKHJlZ2V4cCwgJyUyMCcpLFxuICAgICAgICBpZHggPSB4LmluZGV4T2YoZXEpLFxuICAgICAgICBrc3RyLCB2c3RyLCBrLCB2O1xuXG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICBrc3RyID0geC5zdWJzdHIoMCwgaWR4KTtcbiAgICAgIHZzdHIgPSB4LnN1YnN0cihpZHggKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAga3N0ciA9IHg7XG4gICAgICB2c3RyID0gJyc7XG4gICAgfVxuXG4gICAgayA9IGRlY29kZVVSSUNvbXBvbmVudChrc3RyKTtcbiAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZzdHIpO1xuXG4gICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShvYmosIGspKSB7XG4gICAgICBvYmpba10gPSB2O1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmpba10pKSB7XG4gICAgICBvYmpba10ucHVzaCh2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqW2tdID0gW29ialtrXSwgdl07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn07XG5cblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgc3dpdGNoICh0eXBlb2Ygdikge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gdjtcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIHYgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSA/IHYgOiAnJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgb2JqID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uKGspIHtcbiAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmpba10pKSB7XG4gICAgICAgIHJldHVybiBvYmpba10ubWFwKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKHYpKTtcbiAgICAgICAgfSkuam9pbihzZXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmpba10pKTtcbiAgICAgIH1cbiAgICB9KS5qb2luKHNlcCk7XG5cbiAgfVxuXG4gIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShuYW1lKSkgKyBlcSArXG4gICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9iaikpO1xufTtcblxuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYWNoZShzdG9yYWdlLCBwcmVmaXgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhY2hlKTtcblxuICAgICAgICB0aGlzLnNldFByZWZpeChwcmVmaXgpO1xuICAgICAgICB0aGlzLl9zdG9yYWdlID0gc3RvcmFnZTtcbiAgICB9XG5cbiAgICBDYWNoZS5wcm90b3R5cGUuc2V0UHJlZml4ID0gZnVuY3Rpb24gc2V0UHJlZml4KHByZWZpeCkge1xuICAgICAgICB0aGlzLl9wcmVmaXggPSBwcmVmaXggfHwgQ2FjaGUuZGVmYXVsdFByZWZpeDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIENhY2hlLnByb3RvdHlwZS5zZXRJdGVtID0gZnVuY3Rpb24gc2V0SXRlbShrZXksIGRhdGEpIHtcbiAgICAgICAgdGhpcy5fc3RvcmFnZVt0aGlzLl9wcmVmaXhLZXkoa2V5KV0gPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIENhY2hlLnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3N0b3JhZ2VbdGhpcy5fcHJlZml4S2V5KGtleSldO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQ2FjaGUucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbiBnZXRJdGVtKGtleSkge1xuICAgICAgICB2YXIgaXRlbSA9IHRoaXMuX3N0b3JhZ2VbdGhpcy5fcHJlZml4S2V5KGtleSldO1xuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtKTtcbiAgICB9O1xuXG4gICAgQ2FjaGUucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24gY2xlYW4oKSB7XG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX3N0b3JhZ2UpIHtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zdG9yYWdlLmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBpZiAoa2V5LmluZGV4T2YodGhpcy5fcHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9zdG9yYWdlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQ2FjaGUucHJvdG90eXBlLl9wcmVmaXhLZXkgPSBmdW5jdGlvbiBfcHJlZml4S2V5KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJlZml4ICsga2V5O1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2FjaGU7XG59KCk7XG5cbkNhY2hlLmRlZmF1bHRQcmVmaXggPSAncmMtJztcbmV4cG9ydHMuZGVmYXVsdCA9IENhY2hlO1xuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbkV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcbiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcbiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG4gICAgICBlciA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LiAoJyArIGVyICsgJyknKTtcbiAgICAgICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgICAgY2FzZSAxOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gc2xvd2VyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHtcbiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG4gICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKVxuICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/XG4gICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2VcbiAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cbiAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHtcbiAgICAgIG0gPSB0aGlzLl9tYXhMaXN0ZW5lcnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgICB9XG5cbiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkge1xuICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwXG4gICAgICAgIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgdmFyIGZpcmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZygpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHRoaXMub24odHlwZSwgZyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICBwb3NpdGlvbiA9IC0xO1xuXG4gIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykge1xuICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG4gICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uIDwgMClcbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICBsaXN0Lmxlbmd0aCA9IDA7XG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxuICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICB9IGVsc2UgaWYgKGxpc3RlbmVycykge1xuICAgIC8vIExJRk8gb3JkZXJcbiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aClcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7XG4gIH1cbiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgcmV0O1xuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldCA9IFtdO1xuICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgcmV0ID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07XG4gIGVsc2VcbiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgaWYgKHRoaXMuX2V2ZW50cykge1xuICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG4gICAgICByZXR1cm4gMTtcbiAgICBlbHNlIGlmIChldmxpc3RlbmVyKVxuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG59O1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5cblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmZpbmRIZWFkZXJOYW1lID0gZmluZEhlYWRlck5hbWU7XG5cbnZhciBfRXh0ZXJuYWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfZXZlbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfZXZlbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V2ZW50cyk7XG5cbnZhciBfQXBpUmVzcG9uc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblxudmFyIF9BcGlSZXNwb25zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BcGlSZXNwb25zZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBnZW4gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyBmdW5jdGlvbiBzdGVwKGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBzdGVwKFwibmV4dFwiLCB2YWx1ZSk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHN0ZXAoXCJ0aHJvd1wiLCBlcnIpOyB9KTsgfSB9IHJldHVybiBzdGVwKFwibmV4dFwiKTsgfSk7IH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQ2xpZW50ID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcbiAgICBfaW5oZXJpdHMoQ2xpZW50LCBfRXZlbnRFbWl0dGVyKTtcblxuICAgIGZ1bmN0aW9uIENsaWVudCgpIHtcbiAgICAgICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2xpZW50KTtcblxuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0V2ZW50RW1pdHRlci5jYWxsLmFwcGx5KF9FdmVudEVtaXR0ZXIsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5ldmVudHMgPSB7XG4gICAgICAgICAgICBiZWZvcmVSZXF1ZXN0OiAnYmVmb3JlUmVxdWVzdCcsXG4gICAgICAgICAgICByZXF1ZXN0U3VjY2VzczogJ3JlcXVlc3RTdWNjZXNzJyxcbiAgICAgICAgICAgIHJlcXVlc3RFcnJvcjogJ3JlcXVlc3RFcnJvcidcbiAgICAgICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0XG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG4gICAgICovXG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNlbmRSZXF1ZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVxdWVzdCkge1xuICAgICAgICAgICAgdmFyIGFwaVJlc3BvbnNlO1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlc3BvbnNlID0gbmV3IF9BcGlSZXNwb25zZTIuZGVmYXVsdChyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPIFN0b3AgcmVxdWVzdCBpZiBsaXN0ZW5lcnMgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmJlZm9yZVJlcXVlc3QsIGFwaVJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkUmVzcG9uc2UocmVxdWVzdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZXNwb25zZS5fcmVzcG9uc2UgPSBfY29udGV4dC5zZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlSZXNwb25zZS5faW5pdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwaVJlc3BvbnNlLm9rKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3BvbnNlIGhhcyB1bnN1Y2Nlc3NmdWwgc3RhdHVzJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5ldmVudHMucmVxdWVzdFN1Y2Nlc3MsIGFwaVJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgYXBpUmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0W1wiY2F0Y2hcIl0oMSk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2NvbnRleHQudDAuYXBpUmVzcG9uc2UpIF9jb250ZXh0LnQwID0gdGhpcy5tYWtlRXJyb3IoX2NvbnRleHQudDAsIGFwaVJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmV2ZW50cy5yZXF1ZXN0RXJyb3IsIF9jb250ZXh0LnQwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0LnQwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE5OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzEsIDE0XV0pO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgZnVuY3Rpb24gc2VuZFJlcXVlc3QoX3gpIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VuZFJlcXVlc3Q7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0XG4gICAgICogQHJldHVybiB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5fbG9hZFJlc3BvbnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihyZXF1ZXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0Mikge1xuICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX0V4dGVybmFscy5mZXRjaC5jYWxsKG51bGwsIHJlcXVlc3QpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoXCJyZXR1cm5cIiwgX2NvbnRleHQyLnNlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmdW5jdGlvbiBfbG9hZFJlc3BvbnNlKF94Mikge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX2xvYWRSZXNwb25zZTtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcyB0aGUgSlMgRXJyb3Igb2JqZWN0IHdpdGggdHJhbnNhY3Rpb24gaW5mb3JtYXRpb25cbiAgICAgKiBAcGFyYW0ge0Vycm9yfElBcGlFcnJvcn0gZVxuICAgICAqIEBwYXJhbSB7QXBpUmVzcG9uc2V9IGFwaVJlc3BvbnNlXG4gICAgICogQHJldHVybiB7SUFwaUVycm9yfVxuICAgICAqL1xuXG5cbiAgICBDbGllbnQucHJvdG90eXBlLm1ha2VFcnJvciA9IGZ1bmN0aW9uIG1ha2VFcnJvcihlLCBhcGlSZXNwb25zZSkge1xuXG4gICAgICAgIC8vIFdyYXAgb25seSBpZiByZWd1bGFyIGVycm9yXG4gICAgICAgIGlmICghZS5oYXNPd25Qcm9wZXJ0eSgnYXBpUmVzcG9uc2UnKSAmJiAhZS5oYXNPd25Qcm9wZXJ0eSgnb3JpZ2luYWxNZXNzYWdlJykpIHtcblxuICAgICAgICAgICAgZS5hcGlSZXNwb25zZSA9IGFwaVJlc3BvbnNlO1xuICAgICAgICAgICAgZS5vcmlnaW5hbE1lc3NhZ2UgPSBlLm1lc3NhZ2U7XG4gICAgICAgICAgICBlLm1lc3NhZ2UgPSBhcGlSZXNwb25zZSAmJiBhcGlSZXNwb25zZS5lcnJvcih0cnVlKSB8fCBlLm9yaWdpbmFsTWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpbml0XG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtpbml0LnVybF1cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW2luaXQuYm9keV1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2luaXQubWV0aG9kXVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbaW5pdC5xdWVyeV1cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW2luaXQuaGVhZGVyc11cbiAgICAgKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICAgICAqL1xuXG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNyZWF0ZVJlcXVlc3QgPSBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KGluaXQpIHtcblxuICAgICAgICBpbml0ID0gaW5pdCB8fCB7fTtcbiAgICAgICAgaW5pdC5oZWFkZXJzID0gaW5pdC5oZWFkZXJzIHx8IHt9O1xuXG4gICAgICAgIC8vIFNhbml0eSBjaGVja3NcbiAgICAgICAgaWYgKCFpbml0LnVybCkgdGhyb3cgbmV3IEVycm9yKCdVcmwgaXMgbm90IGRlZmluZWQnKTtcbiAgICAgICAgaWYgKCFpbml0Lm1ldGhvZCkgaW5pdC5tZXRob2QgPSAnR0VUJztcbiAgICAgICAgaW5pdC5tZXRob2QgPSBpbml0Lm1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAoaW5pdC5tZXRob2QgJiYgQ2xpZW50Ll9hbGxvd2VkTWV0aG9kcy5pbmRleE9mKGluaXQubWV0aG9kKSA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIGhhcyB3cm9uZyB2YWx1ZTogJyArIGluaXQubWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmF1bHRzXG4gICAgICAgIGluaXQuY3JlZGVudGlhbHMgPSBpbml0LmNyZWRlbnRpYWxzIHx8ICdpbmNsdWRlJztcbiAgICAgICAgaW5pdC5tb2RlID0gaW5pdC5tb2RlIHx8ICdjb3JzJztcblxuICAgICAgICAvLyBBcHBlbmQgUXVlcnkgU3RyaW5nXG4gICAgICAgIGlmIChpbml0LnF1ZXJ5KSB7XG4gICAgICAgICAgICBpbml0LnVybCA9IGluaXQudXJsICsgKGluaXQudXJsLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnIDogJz8nKSArICgwLCBfVXRpbHMucXVlcnlTdHJpbmdpZnkpKGluaXQucXVlcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFmaW5kSGVhZGVyTmFtZSgnQWNjZXB0JywgaW5pdC5oZWFkZXJzKSkge1xuICAgICAgICAgICAgaW5pdC5oZWFkZXJzWydBY2NlcHQnXSA9IF9BcGlSZXNwb25zZTIuZGVmYXVsdC5fanNvbkNvbnRlbnRUeXBlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VyaWFsaXplIGJvZHlcbiAgICAgICAgaWYgKCgwLCBfVXRpbHMuaXNQbGFpbk9iamVjdCkoaW5pdC5ib2R5KSB8fCAhaW5pdC5ib2R5KSB7XG5cbiAgICAgICAgICAgIHZhciBjb250ZW50VHlwZUhlYWRlck5hbWUgPSBmaW5kSGVhZGVyTmFtZShfQXBpUmVzcG9uc2UyLmRlZmF1bHQuX2NvbnRlbnRUeXBlLCBpbml0LmhlYWRlcnMpO1xuXG4gICAgICAgICAgICBpZiAoIWNvbnRlbnRUeXBlSGVhZGVyTmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlSGVhZGVyTmFtZSA9IF9BcGlSZXNwb25zZTIuZGVmYXVsdC5fY29udGVudFR5cGU7XG4gICAgICAgICAgICAgICAgaW5pdC5oZWFkZXJzW2NvbnRlbnRUeXBlSGVhZGVyTmFtZV0gPSBfQXBpUmVzcG9uc2UyLmRlZmF1bHQuX2pzb25Db250ZW50VHlwZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGNvbnRlbnRUeXBlID0gaW5pdC5oZWFkZXJzW2NvbnRlbnRUeXBlSGVhZGVyTmFtZV07XG5cbiAgICAgICAgICAgIC8vIEFzc2lnbiBhIG5ldyBlbmNvZGVkIGJvZHlcbiAgICAgICAgICAgIGlmIChjb250ZW50VHlwZS5pbmRleE9mKF9BcGlSZXNwb25zZTIuZGVmYXVsdC5fanNvbkNvbnRlbnRUeXBlKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgaWYgKChpbml0Lm1ldGhvZCA9PT0gJ0dFVCcgfHwgaW5pdC5tZXRob2QgPT09ICdIRUFEJykgJiYgISFpbml0LmJvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gb2RkbHkgc2V0dGluZyBib2R5IHRvIG51bGwgc3RpbGwgcmVzdWx0IGluIFR5cGVFcnJvciBpbiBwaGFudG9tanNcbiAgICAgICAgICAgICAgICAgICAgaW5pdC5ib2R5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluaXQuYm9keSA9IEpTT04uc3RyaW5naWZ5KGluaXQuYm9keSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb250ZW50VHlwZS5pbmRleE9mKF9BcGlSZXNwb25zZTIuZGVmYXVsdC5fdXJsZW5jb2RlZENvbnRlbnRUeXBlKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgaW5pdC5ib2R5ID0gKDAsIF9VdGlscy5xdWVyeVN0cmluZ2lmeSkoaW5pdC5ib2R5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBhIHJlcXVlc3Qgd2l0aCBlbmNvZGVkIGJvZHlcbiAgICAgICAgdmFyIHJlcSA9IG5ldyBfRXh0ZXJuYWxzLlJlcXVlc3QoaW5pdC51cmwsIGluaXQpO1xuXG4gICAgICAgIC8vIEtlZXAgdGhlIG9yaWdpbmFsIGJvZHkgYWNjZXNzaWJsZSBkaXJlY3RseSAoZm9yIG1vY2tzKVxuICAgICAgICByZXEub3JpZ2luYWxCb2R5ID0gaW5pdC5ib2R5O1xuXG4gICAgICAgIHJldHVybiByZXE7XG4gICAgfTtcblxuICAgIHJldHVybiBDbGllbnQ7XG59KF9ldmVudHMyLmRlZmF1bHQpO1xuXG5DbGllbnQuX2FsbG93ZWRNZXRob2RzID0gWydHRVQnLCAnUE9TVCcsICdQVVQnLCAnREVMRVRFJywgJ1BBVENIJywgJ09QVElPTlMnLCAnSEVBRCddO1xuZXhwb3J0cy5kZWZhdWx0ID0gQ2xpZW50O1xuZnVuY3Rpb24gZmluZEhlYWRlck5hbWUobmFtZSwgaGVhZGVycykge1xuICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGhlYWRlcnMpLnJlZHVjZShmdW5jdGlvbiAocmVzLCBrZXkpIHtcbiAgICAgICAgaWYgKHJlcykgcmV0dXJuIHJlcztcbiAgICAgICAgaWYgKG5hbWUgPT0ga2V5LnRvTG93ZXJDYXNlKCkpIHJldHVybiBrZXk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfSwgbnVsbCk7XG59XG5cbi8qKlxuICogQG5hbWUgSUFwaUVycm9yXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc3RhY2tcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBvcmlnaW5hbE1lc3NhZ2VcbiAqIEBwcm9wZXJ0eSB7QXBpUmVzcG9uc2V9IGFwaVJlc3BvbnNlXG4gKi9cblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX0V4dGVybmFscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBnZW4gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyByZXR1cm4gbmV3IF9FeHRlcm5hbHMuUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IGZ1bmN0aW9uIHN0ZXAoa2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgcmV0dXJuIF9FeHRlcm5hbHMuUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gc3RlcChcIm5leHRcIiwgdmFsdWUpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBzdGVwKFwidGhyb3dcIiwgZXJyKTsgfSk7IH0gfSByZXR1cm4gc3RlcChcIm5leHRcIik7IH0pOyB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBBcGlSZXNwb25zZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlc3BvbnNlVGV4dFxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gQXBpUmVzcG9uc2UocmVxdWVzdCwgcmVzcG9uc2UsIHJlc3BvbnNlVGV4dCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXBpUmVzcG9uc2UpO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7UmVxdWVzdH0gKi9cbiAgICAgICAgdGhpcy5fcmVxdWVzdCA9IHJlcXVlc3Q7XG5cbiAgICAgICAgLyoqIEB0eXBlIHtSZXNwb25zZX0gKi9cbiAgICAgICAgdGhpcy5fcmVzcG9uc2UgPSByZXNwb25zZTtcblxuICAgICAgICB0aGlzLl90ZXh0ID0gcmVzcG9uc2VUZXh0O1xuICAgICAgICB0aGlzLl9qc29uID0gbnVsbDtcbiAgICAgICAgdGhpcy5fbXVsdGlwYXJ0ID0gW107XG4gICAgfVxuXG4gICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5faXNNdWx0aXBhcnQoKSB8fCB0aGlzLl9pc0pzb24oKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlKCkudGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGV4dCA9IF9jb250ZXh0LnNlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCdyZXR1cm4nLCB0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmdW5jdGlvbiBfaW5pdCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX2luaXQ7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7UmVzcG9uc2V9XG4gICAgICovXG5cblxuICAgIEFwaVJlc3BvbnNlLnByb3RvdHlwZS5yZXNwb25zZSA9IGZ1bmN0aW9uIHJlc3BvbnNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1JlcXVlc3R9XG4gICAgICovXG5cblxuICAgIEFwaVJlc3BvbnNlLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3Q7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG5cblxuICAgIEFwaVJlc3BvbnNlLnByb3RvdHlwZS5vayA9IGZ1bmN0aW9uIG9rKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2UgJiYgdGhpcy5fcmVzcG9uc2Uub2s7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblxuXG4gICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbiB0ZXh0KCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzSnNvbigpICYmICF0aGlzLl9pc011bHRpcGFydCgpKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3BvbnNlIGlzIG5vdCB0ZXh0Jyk7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXh0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG5cblxuICAgIEFwaVJlc3BvbnNlLnByb3RvdHlwZS5qc29uID0gZnVuY3Rpb24ganNvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0pzb24oKSkgdGhyb3cgbmV3IEVycm9yKCdSZXNwb25zZSBpcyBub3QgSlNPTicpO1xuICAgICAgICBpZiAoIXRoaXMuX2pzb24pIHtcbiAgICAgICAgICAgIHRoaXMuX2pzb24gPSB0aGlzLl90ZXh0ID8gSlNPTi5wYXJzZSh0aGlzLl90ZXh0KSA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2pzb247XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBbc2tpcE9LQ2hlY2tdXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXG5cbiAgICBBcGlSZXNwb25zZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihza2lwT0tDaGVjaykge1xuXG4gICAgICAgIGlmICh0aGlzLm9rKCkgJiYgIXNraXBPS0NoZWNrKSByZXR1cm4gbnVsbDtcblxuICAgICAgICB2YXIgbWVzc2FnZSA9ICh0aGlzLl9yZXNwb25zZSAmJiB0aGlzLl9yZXNwb25zZS5zdGF0dXMgPyB0aGlzLl9yZXNwb25zZS5zdGF0dXMgKyAnICcgOiAnJykgKyAodGhpcy5fcmVzcG9uc2UgJiYgdGhpcy5fcmVzcG9uc2Uuc3RhdHVzVGV4dCA/IHRoaXMuX3Jlc3BvbnNlLnN0YXR1c1RleHQgOiAnJyk7XG5cbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgaWYgKHRoaXMuanNvbigpLm1lc3NhZ2UpIG1lc3NhZ2UgPSB0aGlzLmpzb24oKS5tZXNzYWdlO1xuICAgICAgICAgICAgaWYgKHRoaXMuanNvbigpLmVycm9yX2Rlc2NyaXB0aW9uKSBtZXNzYWdlID0gdGhpcy5qc29uKCkuZXJyb3JfZGVzY3JpcHRpb247XG4gICAgICAgICAgICBpZiAodGhpcy5qc29uKCkuZGVzY3JpcHRpb24pIG1lc3NhZ2UgPSB0aGlzLmpzb24oKS5kZXNjcmlwdGlvbjtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXBpUmVzcG9uc2VbXX1cbiAgICAgKi9cblxuXG4gICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLm11bHRpcGFydCA9IGZ1bmN0aW9uIG11bHRpcGFydCgpIHtcblxuICAgICAgICBpZiAoIXRoaXMuX2lzTXVsdGlwYXJ0KCkpIHRocm93IG5ldyBFcnJvcignUmVzcG9uc2UgaXMgbm90IG11bHRpcGFydCcpO1xuXG4gICAgICAgIGlmICghdGhpcy5fbXVsdGlwYXJ0Lmxlbmd0aCkge1xuXG4gICAgICAgICAgICAvLyBTdGVwIDEuIFNwbGl0IG11bHRpcGFydCByZXNwb25zZVxuXG4gICAgICAgICAgICB2YXIgdGV4dCA9IHRoaXMudGV4dCgpO1xuXG4gICAgICAgICAgICBpZiAoIXRleHQpIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgYm9keScpO1xuXG4gICAgICAgICAgICB2YXIgYm91bmRhcnkgPSB0aGlzLl9nZXRDb250ZW50VHlwZSgpLm1hdGNoKC9ib3VuZGFyeT0oW147XSspL2kpWzFdO1xuXG4gICAgICAgICAgICBpZiAoIWJvdW5kYXJ5KSB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIGJvdW5kYXJ5Jyk7XG5cbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IHRleHQudG9TdHJpbmcoKS5zcGxpdChBcGlSZXNwb25zZS5fYm91bmRhcnlTZXBhcmF0b3IgKyBib3VuZGFyeSk7XG5cbiAgICAgICAgICAgIGlmIChwYXJ0c1swXS50cmltKCkgPT09ICcnKSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdLnRyaW0oKSA9PSBBcGlSZXNwb25zZS5fYm91bmRhcnlTZXBhcmF0b3IpIHBhcnRzLnBvcCgpO1xuXG4gICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMSkgdGhyb3cgbmV3IEVycm9yKCdObyBwYXJ0cyBpbiBib2R5Jyk7XG5cbiAgICAgICAgICAgIC8vIFN0ZXAgMi4gUGFyc2Ugc3RhdHVzIGluZm9cblxuICAgICAgICAgICAgdmFyIHN0YXR1c0luZm8gPSBBcGlSZXNwb25zZS5jcmVhdGUocGFydHMuc2hpZnQoKSwgdGhpcy5fcmVzcG9uc2Uuc3RhdHVzLCB0aGlzLl9yZXNwb25zZS5zdGF0dXNUZXh0KS5qc29uKCk7XG5cbiAgICAgICAgICAgIC8vIFN0ZXAgMy4gUGFyc2UgYWxsIG90aGVyIHBhcnRzXG5cbiAgICAgICAgICAgIHRoaXMuX211bHRpcGFydCA9IHBhcnRzLm1hcChmdW5jdGlvbiAocGFydCwgaSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IHN0YXR1c0luZm8ucmVzcG9uc2VbaV0uc3RhdHVzO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFwaVJlc3BvbnNlLmNyZWF0ZShwYXJ0LCBzdGF0dXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fbXVsdGlwYXJ0O1xuICAgIH07XG5cbiAgICBBcGlSZXNwb25zZS5wcm90b3R5cGUuX2lzQ29udGVudFR5cGUgPSBmdW5jdGlvbiBfaXNDb250ZW50VHlwZShjb250ZW50VHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q29udGVudFR5cGUoKS5pbmRleE9mKGNvbnRlbnRUeXBlKSA+IC0xO1xuICAgIH07XG5cbiAgICBBcGlSZXNwb25zZS5wcm90b3R5cGUuX2dldENvbnRlbnRUeXBlID0gZnVuY3Rpb24gX2dldENvbnRlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2UuaGVhZGVycy5nZXQoQXBpUmVzcG9uc2UuX2NvbnRlbnRUeXBlKSB8fCAnJztcbiAgICB9O1xuXG4gICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLl9pc011bHRpcGFydCA9IGZ1bmN0aW9uIF9pc011bHRpcGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzQ29udGVudFR5cGUoQXBpUmVzcG9uc2UuX211bHRpcGFydENvbnRlbnRUeXBlKTtcbiAgICB9O1xuXG4gICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLl9pc1VybEVuY29kZWQgPSBmdW5jdGlvbiBfaXNVcmxFbmNvZGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNDb250ZW50VHlwZShBcGlSZXNwb25zZS5fdXJsZW5jb2RlZENvbnRlbnRUeXBlKTtcbiAgICB9O1xuXG4gICAgQXBpUmVzcG9uc2UucHJvdG90eXBlLl9pc0pzb24gPSBmdW5jdGlvbiBfaXNKc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNDb250ZW50VHlwZShBcGlSZXNwb25zZS5fanNvbkNvbnRlbnRUeXBlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIEFwaVJlc3BvbnNlIG9iamVjdCBmcm9tIHN0cmluZyBwYXJ0cyBvZiBtdWx0aXBhcnQvbWl4ZWQgcmVzcG9uc2VcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3RleHRdXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGF0dXNdXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdGF0dXNUZXh0XVxuICAgICAqIEByZXR1cm4ge0FwaVJlc3BvbnNlfVxuICAgICAqL1xuXG5cbiAgICBBcGlSZXNwb25zZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUodGV4dCwgc3RhdHVzLCBzdGF0dXNUZXh0KSB7XG5cbiAgICAgICAgdGV4dCA9IHRleHQgfHwgJyc7XG4gICAgICAgIHN0YXR1cyA9IHN0YXR1cyB8fCAyMDA7XG4gICAgICAgIHN0YXR1c1RleHQgPSBzdGF0dXNUZXh0IHx8ICdPSyc7XG5cbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFxyL2csICcnKTtcblxuICAgICAgICB2YXIgaGVhZGVycyA9IG5ldyBfRXh0ZXJuYWxzLkhlYWRlcnMoKSxcbiAgICAgICAgICAgIGhlYWRlcnNBbmRCb2R5ID0gdGV4dC5zcGxpdChBcGlSZXNwb25zZS5fYm9keVNlcGFyYXRvciksXG4gICAgICAgICAgICBoZWFkZXJzVGV4dCA9IGhlYWRlcnNBbmRCb2R5Lmxlbmd0aCA+IDEgPyBoZWFkZXJzQW5kQm9keS5zaGlmdCgpIDogJyc7XG5cbiAgICAgICAgdGV4dCA9IGhlYWRlcnNBbmRCb2R5Lmxlbmd0aCA+IDAgPyBoZWFkZXJzQW5kQm9keS5qb2luKEFwaVJlc3BvbnNlLl9ib2R5U2VwYXJhdG9yKSA6IG51bGw7XG5cbiAgICAgICAgKGhlYWRlcnNUZXh0IHx8ICcnKS5zcGxpdCgnXFxuJykuZm9yRWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7XG5cbiAgICAgICAgICAgIHZhciBzcGxpdCA9IGhlYWRlci50cmltKCkuc3BsaXQoQXBpUmVzcG9uc2UuX2hlYWRlclNlcGFyYXRvciksXG4gICAgICAgICAgICAgICAga2V5ID0gc3BsaXQuc2hpZnQoKS50cmltKCksXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBzcGxpdC5qb2luKEFwaVJlc3BvbnNlLl9oZWFkZXJTZXBhcmF0b3IpLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKGtleSkgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZXcgQXBpUmVzcG9uc2UobnVsbCwgbmV3IF9FeHRlcm5hbHMuUmVzcG9uc2UodGV4dCA/IHRleHQgOiB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgICAgICAgIHN0YXR1c1RleHQ6IHN0YXR1c1RleHRcbiAgICAgICAgfSksIHRleHQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXBpUmVzcG9uc2U7XG59KCk7XG5cbkFwaVJlc3BvbnNlLl9jb250ZW50VHlwZSA9ICdDb250ZW50LVR5cGUnO1xuQXBpUmVzcG9uc2UuX2pzb25Db250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbkFwaVJlc3BvbnNlLl9tdWx0aXBhcnRDb250ZW50VHlwZSA9ICdtdWx0aXBhcnQvbWl4ZWQnO1xuQXBpUmVzcG9uc2UuX3VybGVuY29kZWRDb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xuQXBpUmVzcG9uc2UuX2hlYWRlclNlcGFyYXRvciA9ICc6JztcbkFwaVJlc3BvbnNlLl9ib2R5U2VwYXJhdG9yID0gJ1xcblxcbic7XG5BcGlSZXNwb25zZS5fYm91bmRhcnlTZXBhcmF0b3IgPSAnLS0nO1xuZXhwb3J0cy5kZWZhdWx0ID0gQXBpUmVzcG9uc2U7XG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9SZWdpc3RyeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG52YXIgX1JlZ2lzdHJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JlZ2lzdHJ5KTtcblxudmFyIF9DbGllbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblxudmFyIF9DbGllbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2xpZW50KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IGZ1bmN0aW9uIHN0ZXAoa2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHN0ZXAoXCJuZXh0XCIsIHZhbHVlKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gc3RlcChcInRocm93XCIsIGVycik7IH0pOyB9IH0gcmV0dXJuIHN0ZXAoXCJuZXh0XCIpOyB9KTsgfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBDbGllbnQgPSBmdW5jdGlvbiAoX0h0dHBDbGllbnQpIHtcbiAgICBfaW5oZXJpdHMoQ2xpZW50LCBfSHR0cENsaWVudCk7XG5cbiAgICBmdW5jdGlvbiBDbGllbnQoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGllbnQpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9IdHRwQ2xpZW50LmNhbGwodGhpcykpO1xuXG4gICAgICAgIF90aGlzLl9yZWdpc3RyeSA9IG5ldyBfUmVnaXN0cnkyLmRlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIENsaWVudC5wcm90b3R5cGUucmVnaXN0cnkgPSBmdW5jdGlvbiByZWdpc3RyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lzdHJ5O1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLl9sb2FkUmVzcG9uc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXF1ZXN0KSB7XG4gICAgICAgICAgICB2YXIgbW9jaztcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2NrID0gdGhpcy5fcmVnaXN0cnkuZmluZChyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9jay5nZXRSZXNwb25zZShyZXF1ZXN0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoJ3JldHVybicsIF9jb250ZXh0LnNlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIF9sb2FkUmVzcG9uc2UoX3gpIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX2xvYWRSZXNwb25zZTtcbiAgICB9KCk7XG5cbiAgICByZXR1cm4gQ2xpZW50O1xufShfQ2xpZW50Mi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ2xpZW50O1xuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfTW9jayA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXG52YXIgX01vY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTW9jayk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBSZWdpc3RyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZWdpc3RyeSgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlZ2lzdHJ5KTtcblxuICAgICAgICB0aGlzLl9tb2NrcyA9IFtdO1xuICAgIH1cblxuICAgIFJlZ2lzdHJ5LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQobW9jaykge1xuICAgICAgICB0aGlzLl9tb2Nrcy5wdXNoKG1vY2spO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgUmVnaXN0cnkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuX21vY2tzID0gW107XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBSZWdpc3RyeS5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uIGZpbmQocmVxdWVzdCkge1xuXG4gICAgICAgIC8vY29uc29sZS5sb2coJ1JlZ2lzdHJ5IGlzIGxvb2tpbmcgZm9yJywgcmVxdWVzdCk7XG5cbiAgICAgICAgdmFyIG1vY2sgPSB0aGlzLl9tb2Nrcy5zaGlmdCgpO1xuXG4gICAgICAgIGlmICghbW9jaykgdGhyb3cgbmV3IEVycm9yKCdObyBtb2NrIGluIHJlZ2lzdHJ5IGZvciByZXF1ZXN0ICcgKyByZXF1ZXN0Lm1ldGhvZCArICcgJyArIHJlcXVlc3QudXJsKTtcblxuICAgICAgICBpZiAoIW1vY2sudGVzdChyZXF1ZXN0KSkgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyByZXF1ZXN0ICcgKyByZXF1ZXN0Lm1ldGhvZCArICcgJyArIHJlcXVlc3QudXJsICsgJyBmb3IgZXhwZWN0ZWQgbW9jayAnICsgbW9jay5tZXRob2QoKSArICcgJyArIG1vY2sucGF0aCgpKTtcblxuICAgICAgICByZXR1cm4gbW9jaztcbiAgICB9O1xuXG4gICAgUmVnaXN0cnkucHJvdG90eXBlLmFwaUNhbGwgPSBmdW5jdGlvbiBhcGlDYWxsKG1ldGhvZCwgcGF0aCwgcmVzcG9uc2UsIHN0YXR1cywgc3RhdHVzVGV4dCwgZGVsYXkpIHtcblxuICAgICAgICB0aGlzLmFkZChuZXcgX01vY2syLmRlZmF1bHQobWV0aG9kLCBwYXRoLCByZXNwb25zZSwgc3RhdHVzLCBzdGF0dXNUZXh0LCBkZWxheSkpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBSZWdpc3RyeS5wcm90b3R5cGUuYXV0aGVudGljYXRpb24gPSBmdW5jdGlvbiBhdXRoZW50aWNhdGlvbigpIHtcblxuICAgICAgICB0aGlzLmFwaUNhbGwoJ1BPU1QnLCAnL3Jlc3RhcGkvb2F1dGgvdG9rZW4nLCB7XG4gICAgICAgICAgICAnYWNjZXNzX3Rva2VuJzogJ0FDQ0VTU19UT0tFTicsXG4gICAgICAgICAgICAndG9rZW5fdHlwZSc6ICdiZWFyZXInLFxuICAgICAgICAgICAgJ2V4cGlyZXNfaW4nOiAzNjAwLFxuICAgICAgICAgICAgJ3JlZnJlc2hfdG9rZW4nOiAnUkVGUkVTSF9UT0tFTicsXG4gICAgICAgICAgICAncmVmcmVzaF90b2tlbl9leHBpcmVzX2luJzogNjA0ODAsXG4gICAgICAgICAgICAnc2NvcGUnOiAnU01TIFJDTSBGb28gQm9vJyxcbiAgICAgICAgICAgICdleHBpcmVUaW1lJzogbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAzNjAwMDAwXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBSZWdpc3RyeS5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gbG9nb3V0KCkge1xuXG4gICAgICAgIHRoaXMuYXBpQ2FsbCgnUE9TVCcsICcvcmVzdGFwaS9vYXV0aC9yZXZva2UnLCB7fSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFJlZ2lzdHJ5LnByb3RvdHlwZS5wcmVzZW5jZUxvYWQgPSBmdW5jdGlvbiBwcmVzZW5jZUxvYWQoaWQpIHtcblxuICAgICAgICB0aGlzLmFwaUNhbGwoJ0dFVCcsICcvcmVzdGFwaS92MS4wL2FjY291bnQvfi9leHRlbnNpb24vJyArIGlkICsgJy9wcmVzZW5jZScsIHtcbiAgICAgICAgICAgIFwidXJpXCI6IFwiaHR0cHM6Ly9wbGF0Zm9ybS5yaW5nY2VudHJhbC5jb20vcmVzdGFwaS92MS4wL2FjY291bnQvMTIzL2V4dGVuc2lvbi9cIiArIGlkICsgXCIvcHJlc2VuY2VcIixcbiAgICAgICAgICAgIFwiZXh0ZW5zaW9uXCI6IHtcbiAgICAgICAgICAgICAgICBcInVyaVwiOiBcImh0dHBzOi8vcGxhdGZvcm0ucmluZ2NlbnRyYWwuY29tL3Jlc3RhcGkvdjEuMC9hY2NvdW50LzEyMy9leHRlbnNpb24vXCIgKyBpZCxcbiAgICAgICAgICAgICAgICBcImlkXCI6IGlkLFxuICAgICAgICAgICAgICAgIFwiZXh0ZW5zaW9uTnVtYmVyXCI6IFwiMTAxXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImFjdGl2ZUNhbGxzXCI6IFtdLFxuICAgICAgICAgICAgXCJwcmVzZW5jZVN0YXR1c1wiOiBcIkF2YWlsYWJsZVwiLFxuICAgICAgICAgICAgXCJ0ZWxlcGhvbnlTdGF0dXNcIjogXCJSaW5naW5nXCIsXG4gICAgICAgICAgICBcInVzZXJTdGF0dXNcIjogXCJBdmFpbGFibGVcIixcbiAgICAgICAgICAgIFwiZG5kU3RhdHVzXCI6IFwiVGFrZUFsbENhbGxzXCIsXG4gICAgICAgICAgICBcImV4dGVuc2lvbklkXCI6IGlkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBSZWdpc3RyeS5wcm90b3R5cGUuc3Vic2NyaWJlR2VuZXJpYyA9IGZ1bmN0aW9uIHN1YnNjcmliZUdlbmVyaWMoZXhwaXJlc0luKSB7XG5cbiAgICAgICAgZXhwaXJlc0luID0gZXhwaXJlc0luIHx8IDE1ICogNjAgKiA2MDtcblxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgdGhpcy5hcGlDYWxsKCdQT1NUJywgJy9yZXN0YXBpL3YxLjAvc3Vic2NyaXB0aW9uJywge1xuICAgICAgICAgICAgJ2V2ZW50RmlsdGVycyc6IFsnL3Jlc3RhcGkvdjEuMC9hY2NvdW50L34vZXh0ZW5zaW9uL34vcHJlc2VuY2UnXSxcbiAgICAgICAgICAgICdleHBpcmF0aW9uVGltZSc6IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpICsgZXhwaXJlc0luICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICdleHBpcmVzSW4nOiBleHBpcmVzSW4sXG4gICAgICAgICAgICAnZGVsaXZlcnlNb2RlJzoge1xuICAgICAgICAgICAgICAgICd0cmFuc3BvcnRUeXBlJzogJ1B1Yk51YicsXG4gICAgICAgICAgICAgICAgJ2VuY3J5cHRpb24nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAnYWRkcmVzcyc6ICcxMjNfZm9vJyxcbiAgICAgICAgICAgICAgICAnc3Vic2NyaWJlcktleSc6ICdzdWItYy1mb28nLFxuICAgICAgICAgICAgICAgICdzZWNyZXRLZXknOiAnc2VjLWMtYmFyJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdpZCc6ICdmb28tYmFyLWJheicsXG4gICAgICAgICAgICAnY3JlYXRpb25UaW1lJzogZGF0ZS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgJ3N0YXR1cyc6ICdBY3RpdmUnLFxuICAgICAgICAgICAgJ3VyaSc6ICdodHRwczovL3BsYXRmb3JtLnJpbmdjZW50cmFsLmNvbS9yZXN0YXBpL3YxLjAvc3Vic2NyaXB0aW9uL2Zvby1iYXItYmF6J1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgUmVnaXN0cnkucHJvdG90eXBlLnN1YnNjcmliZU9uUHJlc2VuY2UgPSBmdW5jdGlvbiBzdWJzY3JpYmVPblByZXNlbmNlKGlkLCBkZXRhaWxlZCkge1xuXG4gICAgICAgIGlkID0gaWQgfHwgJzEnO1xuXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcblxuICAgICAgICB0aGlzLmFwaUNhbGwoJ1BPU1QnLCAnL3Jlc3RhcGkvdjEuMC9zdWJzY3JpcHRpb24nLCB7XG4gICAgICAgICAgICAnZXZlbnRGaWx0ZXJzJzogWycvcmVzdGFwaS92MS4wL2FjY291bnQvfi9leHRlbnNpb24vJyArIGlkICsgJy9wcmVzZW5jZScgKyAoZGV0YWlsZWQgPyAnP2RldGFpbGVkVGVsZXBob255U3RhdGU9dHJ1ZScgOiAnJyldLFxuICAgICAgICAgICAgJ2V4cGlyYXRpb25UaW1lJzogbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgKyAxNSAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgJ2RlbGl2ZXJ5TW9kZSc6IHtcbiAgICAgICAgICAgICAgICAndHJhbnNwb3J0VHlwZSc6ICdQdWJOdWInLFxuICAgICAgICAgICAgICAgICdlbmNyeXB0aW9uJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAnYWRkcmVzcyc6ICcxMjNfZm9vJyxcbiAgICAgICAgICAgICAgICAnc3Vic2NyaWJlcktleSc6ICdzdWItYy1mb28nLFxuICAgICAgICAgICAgICAgICdzZWNyZXRLZXknOiAnc2VjLWMtYmFyJyxcbiAgICAgICAgICAgICAgICAnZW5jcnlwdGlvbkFsZ29yaXRobSc6ICdBRVMnLFxuICAgICAgICAgICAgICAgICdlbmNyeXB0aW9uS2V5JzogJ1ZRd2I2RVZOY1FQQmhFL0pnRloyenc9PSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnY3JlYXRpb25UaW1lJzogZGF0ZS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgJ2lkJzogJ2Zvby1iYXItYmF6JyxcbiAgICAgICAgICAgICdzdGF0dXMnOiAnQWN0aXZlJyxcbiAgICAgICAgICAgICd1cmknOiAnaHR0cHM6Ly9wbGF0Zm9ybS5yaW5nY2VudHJhbC5jb20vcmVzdGFwaS92MS4wL3N1YnNjcmlwdGlvbi9mb28tYmFyLWJheidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFJlZ2lzdHJ5LnByb3RvdHlwZS50b2tlblJlZnJlc2ggPSBmdW5jdGlvbiB0b2tlblJlZnJlc2goZmFpbHVyZSkge1xuXG4gICAgICAgIGlmICghZmFpbHVyZSkge1xuXG4gICAgICAgICAgICB0aGlzLmFwaUNhbGwoJ1BPU1QnLCAnL3Jlc3RhcGkvb2F1dGgvdG9rZW4nLCB7XG4gICAgICAgICAgICAgICAgJ2FjY2Vzc190b2tlbic6ICdBQ0NFU1NfVE9LRU5fRlJPTV9SRUZSRVNIJyxcbiAgICAgICAgICAgICAgICAndG9rZW5fdHlwZSc6ICdiZWFyZXInLFxuICAgICAgICAgICAgICAgICdleHBpcmVzX2luJzogMzYwMCxcbiAgICAgICAgICAgICAgICAncmVmcmVzaF90b2tlbic6ICdSRUZSRVNIX1RPS0VOX0ZST01fUkVGUkVTSCcsXG4gICAgICAgICAgICAgICAgJ3JlZnJlc2hfdG9rZW5fZXhwaXJlc19pbic6IDYwNDgwLFxuICAgICAgICAgICAgICAgICdzY29wZSc6ICdTTVMgUkNNIEZvbyBCb28nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgdGhpcy5hcGlDYWxsKCdQT1NUJywgJy9yZXN0YXBpL29hdXRoL3Rva2VuJywge1xuICAgICAgICAgICAgICAgICdtZXNzYWdlJzogJ1dyb25nIHRva2VuJyxcbiAgICAgICAgICAgICAgICAnZXJyb3JfZGVzY3JpcHRpb24nOiAnV3JvbmcgdG9rZW4nLFxuICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6ICdXcm9uZyB0b2tlbidcbiAgICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlZ2lzdHJ5O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBSZWdpc3RyeTtcblxuLyoqKi8gfSxcbi8qIDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX0V4dGVybmFscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfQXBpUmVzcG9uc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblxudmFyIF9BcGlSZXNwb25zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BcGlSZXNwb25zZSk7XG5cbnZhciBfVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsgcmV0dXJuIG5ldyBfRXh0ZXJuYWxzLlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyBmdW5jdGlvbiBzdGVwKGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IHJldHVybiBfRXh0ZXJuYWxzLlByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHN0ZXAoXCJuZXh0XCIsIHZhbHVlKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gc3RlcChcInRocm93XCIsIGVycik7IH0pOyB9IH0gcmV0dXJuIHN0ZXAoXCJuZXh0XCIpOyB9KTsgfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgTW9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNb2NrKG1ldGhvZCwgcGF0aCwganNvbiwgc3RhdHVzLCBzdGF0dXNUZXh0LCBkZWxheSkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9jayk7XG5cbiAgICAgICAgdGhpcy5fbWV0aG9kID0gbWV0aG9kLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIHRoaXMuX3BhdGggPSBwYXRoO1xuICAgICAgICB0aGlzLl9qc29uID0ganNvbiB8fCB7fTtcbiAgICAgICAgdGhpcy5fZGVsYXkgPSBkZWxheSB8fCAxMDtcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gc3RhdHVzIHx8IDIwMDtcbiAgICAgICAgdGhpcy5fc3RhdHVzVGV4dCA9IHN0YXR1c1RleHQgfHwgJ09LJztcbiAgICB9XG5cbiAgICBNb2NrLnByb3RvdHlwZS5wYXRoID0gZnVuY3Rpb24gcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhdGg7XG4gICAgfTtcblxuICAgIE1vY2sucHJvdG90eXBlLm1ldGhvZCA9IGZ1bmN0aW9uIG1ldGhvZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21ldGhvZDtcbiAgICB9O1xuXG4gICAgTW9jay5wcm90b3R5cGUudGVzdCA9IGZ1bmN0aW9uIHRlc3QocmVxdWVzdCkge1xuXG4gICAgICAgIHJldHVybiByZXF1ZXN0LnVybC5pbmRleE9mKHRoaXMuX3BhdGgpID4gLTEgJiYgcmVxdWVzdC5tZXRob2QudG9VcHBlckNhc2UoKSA9PSB0aGlzLl9tZXRob2Q7XG4gICAgfTtcblxuICAgIE1vY2sucHJvdG90eXBlLmdldFJlc3BvbnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX1V0aWxzLmRlbGF5KSh0aGlzLl9kZWxheSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCdyZXR1cm4nLCB0aGlzLmNyZWF0ZVJlc3BvbnNlKHRoaXMuX2pzb24pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRSZXNwb25zZShfeCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZXRSZXNwb25zZTtcbiAgICB9KCk7XG5cbiAgICBNb2NrLnByb3RvdHlwZS5jcmVhdGVSZXNwb25zZSA9IGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlKGpzb24sIGluaXQpIHtcblxuICAgICAgICBpbml0ID0gaW5pdCB8fCB7fTtcblxuICAgICAgICBpbml0LnN0YXR1cyA9IGluaXQuc3RhdHVzIHx8IHRoaXMuX3N0YXR1cztcbiAgICAgICAgaW5pdC5zdGF0dXNUZXh0ID0gaW5pdC5zdGF0dXNUZXh0IHx8IHRoaXMuX3N0YXR1c1RleHQ7XG5cbiAgICAgICAgdmFyIHN0ciA9IEpTT04uc3RyaW5naWZ5KGpzb24pLFxuICAgICAgICAgICAgcmVzID0gbmV3IF9FeHRlcm5hbHMuUmVzcG9uc2Uoc3RyLCBpbml0KTtcblxuICAgICAgICByZXMuaGVhZGVycy5zZXQoX0FwaVJlc3BvbnNlMi5kZWZhdWx0Ll9jb250ZW50VHlwZSwgX0FwaVJlc3BvbnNlMi5kZWZhdWx0Ll9qc29uQ29udGVudFR5cGUpO1xuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcblxuICAgIHJldHVybiBNb2NrO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBNb2NrO1xuXG4vKioqLyB9LFxuLyogMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9FeHRlcm5hbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2V2ZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXG52YXIgX0F1dGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxudmFyIF9BdXRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0F1dGgpO1xuXG52YXIgX1V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9Db25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxudmFyIF9Db25zdGFudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29uc3RhbnRzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybiBuZXcgX0V4dGVybmFscy5Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgZnVuY3Rpb24gc3RlcChrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyByZXR1cm4gX0V4dGVybmFscy5Qcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBzdGVwKFwibmV4dFwiLCB2YWx1ZSk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHN0ZXAoXCJ0aHJvd1wiLCBlcnIpOyB9KTsgfSB9IHJldHVybiBzdGVwKFwibmV4dFwiKTsgfSk7IH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUGxhdGZvcm0gPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikge1xuICAgIF9pbmhlcml0cyhQbGF0Zm9ybSwgX0V2ZW50RW1pdHRlcik7XG5cbiAgICBmdW5jdGlvbiBQbGF0Zm9ybShfcmVmKSB7XG4gICAgICAgIHZhciBjbGllbnQgPSBfcmVmLmNsaWVudDtcbiAgICAgICAgdmFyIGNhY2hlID0gX3JlZi5jYWNoZTtcbiAgICAgICAgdmFyIHNlcnZlciA9IF9yZWYuc2VydmVyO1xuICAgICAgICB2YXIgYXBwS2V5ID0gX3JlZi5hcHBLZXk7XG4gICAgICAgIHZhciBhcHBTZWNyZXQgPSBfcmVmLmFwcFNlY3JldDtcbiAgICAgICAgdmFyIGFwcE5hbWUgPSBfcmVmLmFwcE5hbWU7XG4gICAgICAgIHZhciBhcHBWZXJzaW9uID0gX3JlZi5hcHBWZXJzaW9uO1xuICAgICAgICB2YXIgc2RrVmVyc2lvbiA9IF9yZWYuc2RrVmVyc2lvbjtcbiAgICAgICAgdmFyIHJlZGlyZWN0VXJpID0gX3JlZi5yZWRpcmVjdFVyaTtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGxhdGZvcm0pO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKSk7XG5cbiAgICAgICAgX3RoaXMuZXZlbnRzID0ge1xuICAgICAgICAgICAgYmVmb3JlTG9naW46ICdiZWZvcmVMb2dpbicsXG4gICAgICAgICAgICBsb2dpblN1Y2Nlc3M6ICdsb2dpblN1Y2Nlc3MnLFxuICAgICAgICAgICAgbG9naW5FcnJvcjogJ2xvZ2luRXJyb3InLFxuICAgICAgICAgICAgYmVmb3JlUmVmcmVzaDogJ2JlZm9yZVJlZnJlc2gnLFxuICAgICAgICAgICAgcmVmcmVzaFN1Y2Nlc3M6ICdyZWZyZXNoU3VjY2VzcycsXG4gICAgICAgICAgICByZWZyZXNoRXJyb3I6ICdyZWZyZXNoRXJyb3InLFxuICAgICAgICAgICAgYmVmb3JlTG9nb3V0OiAnYmVmb3JlTG9nb3V0JyxcbiAgICAgICAgICAgIGxvZ291dFN1Y2Nlc3M6ICdsb2dvdXRTdWNjZXNzJyxcbiAgICAgICAgICAgIGxvZ291dEVycm9yOiAnbG9nb3V0RXJyb3InXG4gICAgICAgIH07XG5cblxuICAgICAgICBfdGhpcy5fc2VydmVyID0gc2VydmVyO1xuICAgICAgICBfdGhpcy5fYXBwS2V5ID0gYXBwS2V5O1xuICAgICAgICBfdGhpcy5fYXBwU2VjcmV0ID0gYXBwU2VjcmV0O1xuXG4gICAgICAgIC8qKiBAdHlwZSB7Q2FjaGV9ICovXG4gICAgICAgIF90aGlzLl9jYWNoZSA9IGNhY2hlO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7Q2xpZW50fSAqL1xuICAgICAgICBfdGhpcy5fY2xpZW50ID0gY2xpZW50O1xuXG4gICAgICAgIC8qKiBAdHlwZSB7UHJvbWlzZTxBcGlSZXNwb25zZT59ICovXG4gICAgICAgIF90aGlzLl9yZWZyZXNoUHJvbWlzZSA9IG51bGw7XG5cbiAgICAgICAgX3RoaXMuX2F1dGggPSBuZXcgX0F1dGgyLmRlZmF1bHQoX3RoaXMuX2NhY2hlLCBQbGF0Zm9ybS5fY2FjaGVJZCk7XG5cbiAgICAgICAgX3RoaXMuX3VzZXJBZ2VudCA9IChhcHBOYW1lID8gYXBwTmFtZSArIChhcHBWZXJzaW9uID8gJy8nICsgYXBwVmVyc2lvbiA6ICcnKSArICcgJyA6ICcnKSArICdSQ0pTU0RLLycgKyBzZGtWZXJzaW9uO1xuXG4gICAgICAgIF90aGlzLl9yZWRpcmVjdFVyaSA9IHJlZGlyZWN0VXJpIHx8ICcnO1xuXG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBdXRofVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUuYXV0aCA9IGZ1bmN0aW9uIGF1dGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRoO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtDbGllbnR9XG4gICAgICovXG5cblxuICAgIFBsYXRmb3JtLnByb3RvdHlwZS5jbGllbnQgPSBmdW5jdGlvbiBjbGllbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYWRkU2VydmVyXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5hZGRNZXRob2RdXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hZGRUb2tlbl1cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cblxuICAgIFBsYXRmb3JtLnByb3RvdHlwZS5jcmVhdGVVcmwgPSBmdW5jdGlvbiBjcmVhdGVVcmwocGF0aCwgb3B0aW9ucykge1xuXG4gICAgICAgIHBhdGggPSBwYXRoIHx8ICcnO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICB2YXIgYnVpbHRVcmwgPSAnJyxcbiAgICAgICAgICAgIGhhc0h0dHAgPSBwYXRoLmluZGV4T2YoJ2h0dHA6Ly8nKSAhPSAtMSB8fCBwYXRoLmluZGV4T2YoJ2h0dHBzOi8vJykgIT0gLTE7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYWRkU2VydmVyICYmICFoYXNIdHRwKSBidWlsdFVybCArPSB0aGlzLl9zZXJ2ZXI7XG5cbiAgICAgICAgaWYgKHBhdGguaW5kZXhPZihQbGF0Zm9ybS5fdXJsUHJlZml4KSA9PSAtMSAmJiAhaGFzSHR0cCkgYnVpbHRVcmwgKz0gUGxhdGZvcm0uX3VybFByZWZpeCArICcvJyArIFBsYXRmb3JtLl9hcGlWZXJzaW9uO1xuXG4gICAgICAgIGJ1aWx0VXJsICs9IHBhdGg7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYWRkTWV0aG9kIHx8IG9wdGlvbnMuYWRkVG9rZW4pIGJ1aWx0VXJsICs9IHBhdGguaW5kZXhPZignPycpID4gLTEgPyAnJicgOiAnPyc7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYWRkTWV0aG9kKSBidWlsdFVybCArPSAnX21ldGhvZD0nICsgb3B0aW9ucy5hZGRNZXRob2Q7XG4gICAgICAgIGlmIChvcHRpb25zLmFkZFRva2VuKSBidWlsdFVybCArPSAob3B0aW9ucy5hZGRNZXRob2QgPyAnJicgOiAnJykgKyAnYWNjZXNzX3Rva2VuPScgKyB0aGlzLl9hdXRoLmFjY2Vzc1Rva2VuKCk7XG5cbiAgICAgICAgcmV0dXJuIGJ1aWx0VXJsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5yZWRpcmVjdFVyaVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnN0YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuYnJhbmRJZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmRpc3BsYXlcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5wcm9tcHRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuaW1wbGljaXRcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUubG9naW5VcmwgPSBmdW5jdGlvbiBsb2dpblVybChvcHRpb25zKSB7XG5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVXJsKFBsYXRmb3JtLl9hdXRob3JpemVFbmRwb2ludCArICc/JyArICgwLCBfVXRpbHMucXVlcnlTdHJpbmdpZnkpKHtcbiAgICAgICAgICAgICdyZXNwb25zZV90eXBlJzogb3B0aW9ucy5pbXBsaWNpdCA/ICd0b2tlbicgOiAnY29kZScsXG4gICAgICAgICAgICAncmVkaXJlY3RfdXJpJzogb3B0aW9ucy5yZWRpcmVjdFVyaSB8fCB0aGlzLl9yZWRpcmVjdFVyaSxcbiAgICAgICAgICAgICdjbGllbnRfaWQnOiB0aGlzLl9hcHBLZXksXG4gICAgICAgICAgICAnc3RhdGUnOiBvcHRpb25zLnN0YXRlIHx8ICcnLFxuICAgICAgICAgICAgJ2JyYW5kX2lkJzogb3B0aW9ucy5icmFuZElkIHx8ICcnLFxuICAgICAgICAgICAgJ2Rpc3BsYXknOiBvcHRpb25zLmRpc3BsYXkgfHwgJycsXG4gICAgICAgICAgICAncHJvbXB0Jzogb3B0aW9ucy5wcm9tcHQgfHwgJydcbiAgICAgICAgfSksIHsgYWRkU2VydmVyOiB0cnVlIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUucGFyc2VMb2dpblJlZGlyZWN0ID0gZnVuY3Rpb24gcGFyc2VMb2dpblJlZGlyZWN0KHVybCkge1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldFBhcnRzKHVybCwgc2VwYXJhdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsLnNwbGl0KHNlcGFyYXRvcikucmV2ZXJzZSgpWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlc3BvbnNlID0gdXJsLmluZGV4T2YoJyMnKSA9PT0gMCAmJiBnZXRQYXJ0cyh1cmwsICcjJykgfHwgdXJsLmluZGV4T2YoJz8nKSA9PT0gMCAmJiBnZXRQYXJ0cyh1cmwsICc/JykgfHwgbnVsbDtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlKSB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBwYXJzZSByZXNwb25zZScpO1xuXG4gICAgICAgIHZhciBxcyA9ICgwLCBfVXRpbHMucGFyc2VRdWVyeVN0cmluZykocmVzcG9uc2UpO1xuXG4gICAgICAgIGlmICghcXMpIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHBhcnNlIHJlc3BvbnNlJyk7XG5cbiAgICAgICAgdmFyIGVycm9yID0gcXMuZXJyb3JfZGVzY3JpcHRpb24gfHwgcXMuZXJyb3I7XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICBlLmVycm9yID0gcXMuZXJyb3I7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHFzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gaGFuZGxlIDMtbGVnZ2VkIE9BdXRoXG4gICAgICpcbiAgICAgKiBBdHRlbnRpb24hIFRoaXMgaXMgYW4gZXhwZXJpbWVudGFsIG1ldGhvZCBhbmQgaXQncyBzaWduYXR1cmUgYW5kIGJlaGF2aW9yIG1heSBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gICAgICpcbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLndpZHRoXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5oZWlnaHRdXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmxvZ2luXSBhZGRpdGlvbmFsIG9wdGlvbnMgZm9yIGxvZ2luKClcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3JpZ2luXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wcm9wZXJ0eV0gbmFtZSBvZiB3aW5kb3cucG9zdE1lc3NhZ2UncyBldmVudCBkYXRhIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnRhcmdldF0gdGFyZ2V0IGZvciB3aW5kb3cub3BlbigpXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudXJsXG4gICAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICAgKi9cblxuXG4gICAgUGxhdGZvcm0ucHJvdG90eXBlLmxvZ2luV2luZG93ID0gZnVuY3Rpb24gbG9naW5XaW5kb3cob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICByZXR1cm4gbmV3IF9FeHRlcm5hbHMuUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cbiAgICAgICAgICAgIGlmICghKDAsIF9VdGlscy5pc0Jyb3dzZXIpKCkpIHRocm93IG5ldyBFcnJvcignVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgb25seSBpbiBicm93c2VyJyk7XG5cbiAgICAgICAgICAgIGlmICghb3B0aW9ucy51cmwpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYW5kYXRvcnkgVVJMIHBhcmFtZXRlcicpO1xuXG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICAgIG9wdGlvbnMudXJsID0gb3B0aW9ucy51cmwgfHwgNDAwO1xuICAgICAgICAgICAgb3B0aW9ucy53aWR0aCA9IG9wdGlvbnMud2lkdGggfHwgNDAwO1xuICAgICAgICAgICAgb3B0aW9ucy5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCA2MDA7XG4gICAgICAgICAgICBvcHRpb25zLm9yaWdpbiA9IG9wdGlvbnMub3JpZ2luIHx8IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgICAgICAgICBvcHRpb25zLnByb3BlcnR5ID0gb3B0aW9ucy5wcm9wZXJ0eSB8fCBfQ29uc3RhbnRzMi5kZWZhdWx0LmF1dGhSZXNwb25zZVByb3BlcnR5O1xuICAgICAgICAgICAgb3B0aW9ucy50YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCAnX2JsYW5rJztcblxuICAgICAgICAgICAgdmFyIGR1YWxTY3JlZW5MZWZ0ID0gd2luZG93LnNjcmVlbkxlZnQgIT0gdW5kZWZpbmVkID8gd2luZG93LnNjcmVlbkxlZnQgOiBzY3JlZW4ubGVmdDtcbiAgICAgICAgICAgIHZhciBkdWFsU2NyZWVuVG9wID0gd2luZG93LnNjcmVlblRvcCAhPSB1bmRlZmluZWQgPyB3aW5kb3cuc2NyZWVuVG9wIDogc2NyZWVuLnRvcDtcblxuICAgICAgICAgICAgdmFyIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGggPyB3aW5kb3cuaW5uZXJXaWR0aCA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA6IHNjcmVlbi53aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCA6IHNjcmVlbi5oZWlnaHQ7XG5cbiAgICAgICAgICAgIHZhciBsZWZ0ID0gd2lkdGggLyAyIC0gb3B0aW9ucy53aWR0aCAvIDIgKyBkdWFsU2NyZWVuTGVmdDtcbiAgICAgICAgICAgIHZhciB0b3AgPSBoZWlnaHQgLyAyIC0gb3B0aW9ucy5oZWlnaHQgLyAyICsgZHVhbFNjcmVlblRvcDtcbiAgICAgICAgICAgIHZhciB3aW4gPSB3aW5kb3cub3BlbihvcHRpb25zLnVybCwgJ19ibGFuaycsIG9wdGlvbnMudGFyZ2V0ID09ICdfYmxhbmsnID8gJ3Njcm9sbGJhcnM9eWVzLCBzdGF0dXM9eWVzLCB3aWR0aD0nICsgb3B0aW9ucy53aWR0aCArICcsIGhlaWdodD0nICsgb3B0aW9ucy5oZWlnaHQgKyAnLCBsZWZ0PScgKyBsZWZ0ICsgJywgdG9wPScgKyB0b3AgOiAnJyk7XG5cbiAgICAgICAgICAgIGlmICh3aW5kb3cuZm9jdXMpIHdpbi5mb2N1cygpO1xuXG4gICAgICAgICAgICB2YXIgZXZlbnRNZXRob2QgPSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA/ICdhZGRFdmVudExpc3RlbmVyJyA6ICdhdHRhY2hFdmVudCc7XG4gICAgICAgICAgICB2YXIgZXZlbnRSZW1vdmVNZXRob2QgPSBldmVudE1ldGhvZCA9PSAnYWRkRXZlbnRMaXN0ZW5lcicgPyAncmVtb3ZlRXZlbnRMaXN0ZW5lcicgOiAnZGV0YWNoRXZlbnQnO1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2VFdmVudCA9IGV2ZW50TWV0aG9kID09ICdhZGRFdmVudExpc3RlbmVyJyA/ICdtZXNzYWdlJyA6ICdvbm1lc3NhZ2UnO1xuXG4gICAgICAgICAgICB2YXIgZXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIGV2ZW50TGlzdGVuZXIoZSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGUub3JpZ2luICE9IG9wdGlvbnMub3JpZ2luKSByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKCFlLmRhdGEgfHwgIWUuZGF0YVtvcHRpb25zLnByb3BlcnR5XSkgcmV0dXJuOyAvLyBrZWVwIHdhaXRpbmdcblxuICAgICAgICAgICAgICAgIHdpbi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHdpbmRvd1tldmVudFJlbW92ZU1ldGhvZF0obWVzc2FnZUV2ZW50LCBldmVudExpc3RlbmVyKTtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ2luT3B0aW9ucyA9IF90aGlzMi5wYXJzZUxvZ2luUmVkaXJlY3QoZS5kYXRhW29wdGlvbnMucHJvcGVydHldKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxvZ2luT3B0aW9ucy5jb2RlICYmICFsb2dpbk9wdGlvbnMuYWNjZXNzX3Rva2VuKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGF1dGhvcml6YXRpb24gY29kZSBvciB0b2tlbicpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobG9naW5PcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB3aW5kb3dbZXZlbnRNZXRob2RdKG1lc3NhZ2VFdmVudCwgZXZlbnRMaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxib29sZWFuPn1cbiAgICAgKi9cblxuXG4gICAgUGxhdGZvcm0ucHJvdG90eXBlLmxvZ2dlZEluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuc3VyZUxvZ2dlZEluKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFtcImNhdGNoXCJdKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMCwgNl1dKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2dlZEluKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbG9nZ2VkSW47XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudXNlcm5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5wYXNzd29yZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmV4dGVuc2lvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmNvZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5yZWRpcmVjdFVyaVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmVuZHBvaW50SWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5yZW1lbWJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmFjY2Vzc1Rva2VuVHRsXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMucmVmcmVzaFRva2VuVHRsXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuYWNjZXNzX3Rva2VuXG4gICAgICogQHJldHVybnMge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBib2R5LCBhcGlSZXNwb25zZSwganNvbjtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmV2ZW50cy5iZWZvcmVMb2dpbik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0ge307XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5jb2RlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5ncmFudF90eXBlID0gJ3Bhc3N3b3JkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keS51c2VybmFtZSA9IG9wdGlvbnMudXNlcm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkucGFzc3dvcmQgPSBvcHRpb25zLnBhc3N3b3JkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5LmV4dGVuc2lvbiA9IG9wdGlvbnMuZXh0ZW5zaW9uIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5jb2RlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5ncmFudF90eXBlID0gJ2F1dGhvcml6YXRpb25fY29kZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkuY29kZSA9IG9wdGlvbnMuY29kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5yZWRpcmVjdF91cmkgPSBvcHRpb25zLnJlZGlyZWN0VXJpIHx8IHRoaXMuX3JlZGlyZWN0VXJpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2JvZHkuY2xpZW50X2lkID0gdGhpcy5nZXRDcmVkZW50aWFscygpLmtleTsgLy8gbm90IG5lZWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE8gUG90ZW50aWFsbHkgbWFrZSBhIHJlcXVlc3QgdG8gL29hdXRoL3Rva2VuaW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSBvcHRpb25zO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW5kcG9pbnRJZCkgYm9keS5lbmRwb2ludF9pZCA9IG9wdGlvbnMuZW5kcG9pbnRJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hY2Nlc3NUb2tlblR0bCkgYm9keS5hY2Nlc3NUb2tlblR0bCA9IG9wdGlvbnMuYWNjZXNzVG9rZW5UdGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVmcmVzaFRva2VuVHRsKSBib2R5LnJlZnJlc2hUb2tlblR0bCA9IG9wdGlvbnMucmVmcmVzaFRva2VuVHRsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdG9rZW5SZXF1ZXN0KFBsYXRmb3JtLl90b2tlbkVuZHBvaW50LCBib2R5KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGFwaVJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1dGguc2V0RGF0YShqc29uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmV2ZW50cy5sb2dpblN1Y2Nlc3MsIGFwaVJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KFwicmV0dXJuXCIsIGFwaVJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDIxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MltcImNhdGNoXCJdKDApO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZS5jbGVhbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmxvZ2luRXJyb3IsIF9jb250ZXh0Mi50MCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDIudDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcywgW1swLCAyMV1dKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luKF94KSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsb2dpbjtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuXG4gICAgUGxhdGZvcm0ucHJvdG90eXBlLl9yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHtcbiAgICAgICAgICAgIHZhciByZXMsIGpzb247XG4gICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0Mykge1xuICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMDtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmJlZm9yZVJlZnJlc2gpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX1V0aWxzLmRlbGF5KShQbGF0Zm9ybS5fcmVmcmVzaERlbGF5TXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2F1dGgucmVmcmVzaFRva2VuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZnJlc2ggdG9rZW4gaXMgbWlzc2luZycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2F1dGgucmVmcmVzaFRva2VuVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVmcmVzaCB0b2tlbiBoYXMgZXhwaXJlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdG9rZW5SZXF1ZXN0KFBsYXRmb3JtLl90b2tlbkVuZHBvaW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZ3JhbnRfdHlwZVwiOiBcInJlZnJlc2hfdG9rZW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZWZyZXNoX3Rva2VuXCI6IHRoaXMuX2F1dGgucmVmcmVzaFRva2VuKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNjZXNzX3Rva2VuX3R0bFwiOiB0aGlzLl9hdXRoLmRhdGEoKS5leHBpcmVzX2luICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZWZyZXNoX3Rva2VuX3R0bFwiOiB0aGlzLl9hdXRoLmRhdGEoKS5yZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW4gKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IHJlcy5qc29uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5fY2xpZW50Lm1ha2VFcnJvcihuZXcgRXJyb3IoJ01hbGZvcm1lZCBPQXV0aCByZXNwb25zZScpLCByZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXV0aC5zZXREYXRhKGpzb24pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLnJlZnJlc2hTdWNjZXNzLCByZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1tcImNhdGNoXCJdKDApO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSB0aGlzLl9jbGllbnQubWFrZUVycm9yKF9jb250ZXh0My50MCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUGxhdGZvcm0uX2NsZWFyQ2FjaGVPblJlZnJlc2hFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZS5jbGVhbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmV2ZW50cy5yZWZyZXNoRXJyb3IsIF9jb250ZXh0My50MCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDMudDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBfY2FsbGVlMywgdGhpcywgW1swLCAxOV1dKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIF9yZWZyZXNoKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX3JlZnJlc2g7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3JlZnJlc2hQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoXCJyZXR1cm5cIiwgdGhpcy5fcmVmcmVzaFByb21pc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAyO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoUHJvbWlzZSA9IHRoaXMuX3JlZnJlc2goKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLl9yZWZyZXNoUHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdChcInJldHVyblwiLCB0aGlzLl9yZWZyZXNoUHJvbWlzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0W1wiY2F0Y2hcIl0oMik7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDQudDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcywgW1syLCA3XV0pO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlZnJlc2g7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHtcbiAgICAgICAgICAgIHZhciByZXM7XG4gICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkge1xuICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMDtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmJlZm9yZUxvZ291dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Rva2VuUmVxdWVzdChQbGF0Zm9ybS5fcmV2b2tlRW5kcG9pbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuX2F1dGguYWNjZXNzVG9rZW4oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ1LnNlbnQ7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlLmNsZWFuKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5ldmVudHMubG9nb3V0U3VjY2VzcywgcmVzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbXCJjYXRjaFwiXSgwKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLmxvZ291dEVycm9yLCBfY29udGV4dDUudDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQ1LnQwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMsIFtbMCwgMTBdXSk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsb2dvdXQ7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2tpcEF1dGhDaGVja11cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlcXVlc3Q+fVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUuaW5mbGF0ZVJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcmVmNyA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5za2lwQXV0aENoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVxdWVzdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5zdXJlTG9nZ2VkSW4oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5oZWFkZXJzLnNldCgnWC1Vc2VyLUFnZW50JywgdGhpcy5fdXNlckFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMuc2V0KCdDbGllbnQtSWQnLCB0aGlzLl9hcHBLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCB0aGlzLl9hdXRoSGVhZGVyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVxdWVzdC51cmwgPSB0aGlzLmNyZWF0ZVVybChyZXF1ZXN0LnVybCwge2FkZFNlcnZlcjogdHJ1ZX0pOyAvL0ZJWE1FIFNwZWMgcHJldmVudHMgdGhpcy4uLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVxdWVzdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIF9jYWxsZWU2LCB0aGlzKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluZmxhdGVSZXF1ZXN0KF94MiwgX3gzKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlZjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbmZsYXRlUmVxdWVzdDtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3RcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5za2lwQXV0aENoZWNrXVxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUuc2VuZFJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcmVmOCA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmZsYXRlUmVxdWVzdChyZXF1ZXN0LCBvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSBfY29udGV4dDcuc2VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NsaWVudC5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0Ny5zZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gOTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcudDAgPSBfY29udGV4dDdbXCJjYXRjaFwiXSgwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFfY29udGV4dDcudDAuYXBpUmVzcG9uc2UgfHwgIV9jb250ZXh0Ny50MC5hcGlSZXNwb25zZS5yZXNwb25zZSgpIHx8IF9jb250ZXh0Ny50MC5hcGlSZXNwb25zZS5yZXNwb25zZSgpLnN0YXR1cyAhPSA0MDEgfHwgb3B0aW9ucy5yZXRyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQ3LnQwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXV0aC5jYW5jZWxBY2Nlc3NUb2tlbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5yZXRyeSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KHJlcXVlc3QsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0Ny5zZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxODpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIF9jYWxsZWU3LCB0aGlzLCBbWzAsIDldXSk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmdW5jdGlvbiBzZW5kUmVxdWVzdChfeDQsIF94NSkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWY4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VuZFJlcXVlc3Q7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogR2VuZXJhbCBwdXJwb3NlIGZ1bmN0aW9uIHRvIHNlbmQgYW55dGhpbmcgdG8gc2VydmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudXJsXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmJvZHldXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm1ldGhvZF1cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMucXVlcnldXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5za2lwQXV0aENoZWNrXVxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9yZWY5ID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRklYTUUgaHR0cHM6Ly9naXRodWIuY29tL2JpdGlubi9ub2RlLWZldGNoL2lzc3Vlcy80M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudXJsID0gdGhpcy5jcmVhdGVVcmwob3B0aW9ucy51cmwsIHsgYWRkU2VydmVyOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KHRoaXMuX2NsaWVudC5jcmVhdGVSZXF1ZXN0KG9wdGlvbnMpLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0OC5zZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZTgsIHRoaXMpO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgZnVuY3Rpb24gc2VuZChfeDYpIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVmOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbmQ7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbcXVlcnldXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5oZWFkZXJzXVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2tpcEF1dGhDaGVja11cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFwaVJlc3BvbnNlPn1cbiAgICAgKi9cblxuXG4gICAgUGxhdGZvcm0ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9yZWYxMCA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KHVybCwgcXVlcnksIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5tZXRob2QgPSAnR0VUJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnVybCA9IHVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdChcInJldHVyblwiLCBfY29udGV4dDkuc2VudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIF9jYWxsZWU5LCB0aGlzKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldChfeDgsIF94OSwgX3gxMCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWYxMC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdldDtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGJvZHlcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW3F1ZXJ5XVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuaGVhZGVyc11cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNraXBBdXRoQ2hlY2tdXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG4gICAgICovXG5cblxuICAgIFBsYXRmb3JtLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjExID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKHVybCwgYm9keSwgcXVlcnksIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ1BPU1QnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudXJsID0gdXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmJvZHkgPSBib2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZChvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdChcInJldHVyblwiLCBfY29udGV4dDEwLnNlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZTEwLCB0aGlzKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHBvc3QoX3gxMSwgX3gxMiwgX3gxMywgX3gxNCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWYxMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBvc3Q7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbYm9keV1cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW3F1ZXJ5XVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuaGVhZGVyc11cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNraXBBdXRoQ2hlY2tdXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG4gICAgICovXG5cblxuICAgIFBsYXRmb3JtLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcmVmMTIgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEodXJsLCBib2R5LCBxdWVyeSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkge1xuICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5tZXRob2QgPSAnUFVUJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnVybCA9IHVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gYm9keTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoXCJyZXR1cm5cIiwgX2NvbnRleHQxMS5zZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIF9jYWxsZWUxMSwgdGhpcyk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmdW5jdGlvbiBwdXQoX3gxNSwgX3gxNiwgX3gxNywgX3gxOCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWYxMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHB1dDtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtxdWVyeV1cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5za2lwQXV0aENoZWNrXVxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuICAgICAqL1xuXG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjEzID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKHVybCwgcXVlcnksIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ0RFTEVURSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy51cmwgPSB1cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5xdWVyeSA9IHF1ZXJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZChvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdChcInJldHVyblwiLCBfY29udGV4dDEyLnNlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZTEyLCB0aGlzKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIF9kZWxldGUoX3gxOSwgX3gyMCwgX3gyMSkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWYxMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9kZWxldGU7XG4gICAgfSgpO1xuXG4gICAgUGxhdGZvcm0ucHJvdG90eXBlLl90b2tlblJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcmVmMTQgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMocGF0aCwgYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykge1xuICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwQXV0aENoZWNrOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmFzaWMgJyArIHRoaXMuX2FwaUtleSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdChcInJldHVyblwiLCBfY29udGV4dDEzLnNlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZTEzLCB0aGlzKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIF90b2tlblJlcXVlc3QoX3gyMiwgX3gyMykge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWYxNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF90b2tlblJlcXVlc3Q7XG4gICAgfSgpO1xuXG4gICAgUGxhdGZvcm0ucHJvdG90eXBlLmVuc3VyZUxvZ2dlZEluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjE1ID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkge1xuICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0FjY2Vzc1Rva2VuVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoXCJyZXR1cm5cIiwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnJlc2goKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LmFicnVwdChcInJldHVyblwiLCBfY29udGV4dDE0LnNlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZTE0LCB0aGlzKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGVuc3VyZUxvZ2dlZEluKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWYxNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVuc3VyZUxvZ2dlZEluO1xuICAgIH0oKTtcblxuICAgIFBsYXRmb3JtLnByb3RvdHlwZS5faXNBY2Nlc3NUb2tlblZhbGlkID0gZnVuY3Rpb24gX2lzQWNjZXNzVG9rZW5WYWxpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dGguYWNjZXNzVG9rZW5WYWxpZCgpO1xuICAgIH07XG5cbiAgICBQbGF0Zm9ybS5wcm90b3R5cGUuX2FwaUtleSA9IGZ1bmN0aW9uIF9hcGlLZXkoKSB7XG4gICAgICAgIHZhciBhcGlLZXkgPSB0aGlzLl9hcHBLZXkgKyAnOicgKyB0aGlzLl9hcHBTZWNyZXQ7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYnRvYSA9PSAnZnVuY3Rpb24nID8gYnRvYShhcGlLZXkpIDogbmV3IEJ1ZmZlcihhcGlLZXkpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICB9O1xuXG4gICAgUGxhdGZvcm0ucHJvdG90eXBlLl9hdXRoSGVhZGVyID0gZnVuY3Rpb24gX2F1dGhIZWFkZXIoKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuX2F1dGguYWNjZXNzVG9rZW4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dGgudG9rZW5UeXBlKCkgKyAodG9rZW4gPyAnICcgKyB0b2tlbiA6ICcnKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBsYXRmb3JtO1xufShfZXZlbnRzMi5kZWZhdWx0KTtcblxuUGxhdGZvcm0uX3VybFByZWZpeCA9ICcvcmVzdGFwaSc7XG5QbGF0Zm9ybS5fYXBpVmVyc2lvbiA9ICd2MS4wJztcblBsYXRmb3JtLl90b2tlbkVuZHBvaW50ID0gJy9yZXN0YXBpL29hdXRoL3Rva2VuJztcblBsYXRmb3JtLl9yZXZva2VFbmRwb2ludCA9ICcvcmVzdGFwaS9vYXV0aC9yZXZva2UnO1xuUGxhdGZvcm0uX2F1dGhvcml6ZUVuZHBvaW50ID0gJy9yZXN0YXBpL29hdXRoL2F1dGhvcml6ZSc7XG5QbGF0Zm9ybS5fcmVmcmVzaERlbGF5TXMgPSAxMDA7XG5QbGF0Zm9ybS5fY2FjaGVJZCA9ICdwbGF0Zm9ybSc7XG5QbGF0Zm9ybS5fY2xlYXJDYWNoZU9uUmVmcmVzaEVycm9yID0gZmFsc2U7XG5leHBvcnRzLmRlZmF1bHQgPSBQbGF0Zm9ybTtcblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgQXV0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBdXRoKGNhY2hlLCBjYWNoZUlkKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoKTtcblxuICAgICAgICAvKiogQHR5cGUge0NhY2hlfSAqL1xuICAgICAgICB0aGlzLl9jYWNoZSA9IGNhY2hlO1xuICAgICAgICB0aGlzLl9jYWNoZUlkID0gY2FjaGVJZDtcbiAgICB9IC8vIDEgbWludXRlXG5cblxuICAgIEF1dGgucHJvdG90eXBlLmFjY2Vzc1Rva2VuID0gZnVuY3Rpb24gYWNjZXNzVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEoKS5hY2Nlc3NfdG9rZW47XG4gICAgfTtcblxuICAgIEF1dGgucHJvdG90eXBlLnJlZnJlc2hUb2tlbiA9IGZ1bmN0aW9uIHJlZnJlc2hUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgpLnJlZnJlc2hfdG9rZW47XG4gICAgfTtcblxuICAgIEF1dGgucHJvdG90eXBlLnRva2VuVHlwZSA9IGZ1bmN0aW9uIHRva2VuVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgpLnRva2VuX3R5cGU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3t0b2tlbl90eXBlOiBzdHJpbmcsIGFjY2Vzc190b2tlbjogc3RyaW5nLCBleHBpcmVzX2luOiBudW1iZXIsIHJlZnJlc2hfdG9rZW46IHN0cmluZywgcmVmcmVzaF90b2tlbl9leHBpcmVzX2luOiBudW1iZXJ9fVxuICAgICAqL1xuXG5cbiAgICBBdXRoLnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gZGF0YSgpIHtcblxuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGUuZ2V0SXRlbSh0aGlzLl9jYWNoZUlkKSB8fCB7XG4gICAgICAgICAgICB0b2tlbl90eXBlOiAnJyxcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogJycsXG4gICAgICAgICAgICBleHBpcmVzX2luOiAwLFxuICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogJycsXG4gICAgICAgICAgICByZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW46IDBcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG5ld0RhdGFcbiAgICAgKiBAcmV0dXJuIHtBdXRofVxuICAgICAqL1xuXG5cbiAgICBBdXRoLnByb3RvdHlwZS5zZXREYXRhID0gZnVuY3Rpb24gc2V0RGF0YShuZXdEYXRhKSB7XG5cbiAgICAgICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG5cbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGEoKTtcblxuICAgICAgICBPYmplY3Qua2V5cyhuZXdEYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IG5ld0RhdGFba2V5XTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGF0YS5leHBpcmVfdGltZSA9IERhdGUubm93KCkgKyBkYXRhLmV4cGlyZXNfaW4gKiAxMDAwO1xuICAgICAgICBkYXRhLnJlZnJlc2hfdG9rZW5fZXhwaXJlX3RpbWUgPSBEYXRlLm5vdygpICsgZGF0YS5yZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW4gKiAxMDAwO1xuXG4gICAgICAgIHRoaXMuX2NhY2hlLnNldEl0ZW0odGhpcy5fY2FjaGVJZCwgZGF0YSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZXJlIGlzIGEgdmFsaWQgKG5vdCBleHBpcmVkKSBhY2Nlc3MgdG9rZW5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuXG5cbiAgICBBdXRoLnByb3RvdHlwZS5hY2Nlc3NUb2tlblZhbGlkID0gZnVuY3Rpb24gYWNjZXNzVG9rZW5WYWxpZCgpIHtcblxuICAgICAgICB2YXIgYXV0aERhdGEgPSB0aGlzLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIGF1dGhEYXRhLnRva2VuX3R5cGUgPT09IEF1dGguZm9yY2VkVG9rZW5UeXBlIHx8IGF1dGhEYXRhLmV4cGlyZV90aW1lIC0gQXV0aC5yZWZyZXNoSGFuZGljYXBNcyA+IERhdGUubm93KCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZXJlIGlzIGEgdmFsaWQgKG5vdCBleHBpcmVkKSBhY2Nlc3MgdG9rZW5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuXG5cbiAgICBBdXRoLnByb3RvdHlwZS5yZWZyZXNoVG9rZW5WYWxpZCA9IGZ1bmN0aW9uIHJlZnJlc2hUb2tlblZhbGlkKCkge1xuXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEoKS5yZWZyZXNoX3Rva2VuX2V4cGlyZV90aW1lID4gRGF0ZS5ub3coKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXV0aH1cbiAgICAgKi9cblxuXG4gICAgQXV0aC5wcm90b3R5cGUuY2FuY2VsQWNjZXNzVG9rZW4gPSBmdW5jdGlvbiBjYW5jZWxBY2Nlc3NUb2tlbigpIHtcblxuICAgICAgICByZXR1cm4gdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogJycsXG4gICAgICAgICAgICBleHBpcmVzX2luOiAwXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBzZXRzIGEgc3BlY2lhbCBhdXRoZW50aWNhdGlvbiBtb2RlIHVzZWQgaW4gU2VydmljZSBXZWJcbiAgICAgKiBAcmV0dXJuIHtBdXRofVxuICAgICAqL1xuXG5cbiAgICBBdXRoLnByb3RvdHlwZS5mb3JjZUF1dGhlbnRpY2F0aW9uID0gZnVuY3Rpb24gZm9yY2VBdXRoZW50aWNhdGlvbigpIHtcblxuICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgICAgdG9rZW5fdHlwZTogQXV0aC5mb3JjZWRUb2tlblR5cGUsXG4gICAgICAgICAgICBhY2Nlc3NfdG9rZW46ICcnLFxuICAgICAgICAgICAgZXhwaXJlc19pbjogMCxcbiAgICAgICAgICAgIHJlZnJlc2hfdG9rZW46ICcnLFxuICAgICAgICAgICAgcmVmcmVzaF90b2tlbl9leHBpcmVzX2luOiAwXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXV0aDtcbn0oKTtcblxuLy9leHBvcnQgaW50ZXJmYWNlIElBdXRoRGF0YSB7XG4vLyAgICByZW1lbWJlcj86Ym9vbGVhbjtcbi8vICAgIHRva2VuX3R5cGU/OnN0cmluZztcbi8vICAgIGFjY2Vzc190b2tlbj86c3RyaW5nO1xuLy8gICAgZXhwaXJlc19pbj86bnVtYmVyOyAvLyBhY3R1YWxseSBpdCdzIHN0cmluZ1xuLy8gICAgZXhwaXJlX3RpbWU/Om51bWJlcjtcbi8vICAgIHJlZnJlc2hfdG9rZW4/OnN0cmluZztcbi8vICAgIHJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbj86bnVtYmVyOyAvLyBhY3R1YWxseSBpdCdzIHN0cmluZ1xuLy8gICAgcmVmcmVzaF90b2tlbl9leHBpcmVfdGltZT86bnVtYmVyO1xuLy8gICAgc2NvcGU/OnN0cmluZztcbi8vfVxuXG5cbkF1dGgucmVmcmVzaEhhbmRpY2FwTXMgPSA2MCAqIDEwMDA7XG5BdXRoLmZvcmNlZFRva2VuVHlwZSA9ICdmb3JjZWQnO1xuZXhwb3J0cy5kZWZhdWx0ID0gQXV0aDtcblxuLyoqKi8gfSxcbi8qIDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5kZWZhdWx0ID0ge1xuICAgIGF1dGhSZXNwb25zZVByb3BlcnR5OiAnUkNBdXRob3JpemF0aW9uUmVzcG9uc2UnLFxuICAgIHZlcnNpb246ICB0cnVlID8gKFwiMy4wLjAtcmMyXCIpIDogJ3gueC54J1xufTtcblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX1B1Ym51Yk1vY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblxudmFyIF9QdWJudWJNb2NrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1B1Ym51Yk1vY2spO1xuXG52YXIgX0V4dGVybmFscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBQdWJudWJNb2NrRmFjdG9yeSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQdWJudWJNb2NrRmFjdG9yeSgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFB1Ym51Yk1vY2tGYWN0b3J5KTtcblxuICAgICAgICB0aGlzLmNyeXB0b19vYmogPSBfRXh0ZXJuYWxzLlBVQk5VQi5jcnlwdG9fb2JqO1xuICAgIH1cblxuICAgIFB1Ym51Yk1vY2tGYWN0b3J5LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgX1B1Ym51Yk1vY2syLmRlZmF1bHQob3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBQdWJudWJNb2NrRmFjdG9yeTtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHVibnViTW9ja0ZhY3Rvcnk7XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V2ZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG52YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXG52YXIgX0V4dGVybmFscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFB1Ym51Yk1vY2sgPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikge1xuICAgIF9pbmhlcml0cyhQdWJudWJNb2NrLCBfRXZlbnRFbWl0dGVyKTtcblxuICAgIGZ1bmN0aW9uIFB1Ym51Yk1vY2sob3B0aW9ucykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHVibnViTW9jayk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0V2ZW50RW1pdHRlci5jYWxsKHRoaXMpKTtcblxuICAgICAgICBfdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgX3RoaXMuY3J5cHRvX29iaiA9IF9FeHRlcm5hbHMuUFVCTlVCLmNyeXB0b19vYmo7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBQdWJudWJNb2NrLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfTtcblxuICAgIFB1Ym51Yk1vY2sucHJvdG90eXBlLnJlYWR5ID0gZnVuY3Rpb24gcmVhZHkoKSB7fTtcblxuICAgIFB1Ym51Yk1vY2sucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZShvcHRpb25zKSB7XG4gICAgICAgIHRoaXMub24oJ21lc3NhZ2UtJyArIG9wdGlvbnMuY2hhbm5lbCwgb3B0aW9ucy5tZXNzYWdlKTtcbiAgICB9O1xuXG4gICAgUHVibnViTW9jay5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiB1bnN1YnNjcmliZShvcHRpb25zKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdtZXNzYWdlLScgKyBvcHRpb25zLmNoYW5uZWwpO1xuICAgIH07XG5cbiAgICBQdWJudWJNb2NrLnByb3RvdHlwZS5yZWNlaXZlTWVzc2FnZSA9IGZ1bmN0aW9uIHJlY2VpdmVNZXNzYWdlKG1zZywgY2hhbm5lbCkge1xuICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UtJyArIGNoYW5uZWwsIG1zZywgJ2VudicsIGNoYW5uZWwpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUHVibnViTW9jaztcbn0oX2V2ZW50czIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFB1Ym51Yk1vY2s7XG5cbi8qKiovIH0sXG4vKiAyMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9ldmVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxudmFyIF9ldmVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXZlbnRzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IGZ1bmN0aW9uIHN0ZXAoa2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHN0ZXAoXCJuZXh0XCIsIHZhbHVlKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gc3RlcChcInRocm93XCIsIGVycik7IH0pOyB9IH0gcmV0dXJuIHN0ZXAoXCJuZXh0XCIpOyB9KTsgfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikge1xuICAgIF9pbmhlcml0cyhTdWJzY3JpcHRpb24sIF9FdmVudEVtaXR0ZXIpO1xuXG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKHB1Ym51YkZhY3RvcnksIHBsYXRmb3JtKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWJzY3JpcHRpb24pO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKSk7XG5cbiAgICAgICAgX3RoaXMuZXZlbnRzID0ge1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uOiAnbm90aWZpY2F0aW9uJyxcbiAgICAgICAgICAgIHJlbW92ZVN1Y2Nlc3M6ICdyZW1vdmVTdWNjZXNzJyxcbiAgICAgICAgICAgIHJlbW92ZUVycm9yOiAncmVtb3ZlRXJyb3InLFxuICAgICAgICAgICAgcmVuZXdTdWNjZXNzOiAncmVuZXdTdWNjZXNzJyxcbiAgICAgICAgICAgIHJlbmV3RXJyb3I6ICdyZW5ld0Vycm9yJyxcbiAgICAgICAgICAgIHN1YnNjcmliZVN1Y2Nlc3M6ICdzdWJzY3JpYmVTdWNjZXNzJyxcbiAgICAgICAgICAgIHN1YnNjcmliZUVycm9yOiAnc3Vic2NyaWJlRXJyb3InXG4gICAgICAgIH07XG5cblxuICAgICAgICBfdGhpcy5fcHVibnViRmFjdG9yeSA9IHB1Ym51YkZhY3Rvcnk7XG4gICAgICAgIF90aGlzLl9wbGF0Zm9ybSA9IHBsYXRmb3JtO1xuICAgICAgICBfdGhpcy5fcHVibnViID0gbnVsbDtcbiAgICAgICAgX3RoaXMuX3B1Ym51Ykxhc3RDaGFubmVsID0gbnVsbDtcbiAgICAgICAgX3RoaXMuX3RpbWVvdXQgPSBudWxsO1xuICAgICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uID0gbnVsbDtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5zdWJzY3JpYmVkID0gZnVuY3Rpb24gc3Vic2NyaWJlZCgpIHtcblxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb24oKTtcblxuICAgICAgICByZXR1cm4gISEoc3Vic2NyaXB0aW9uLmlkICYmIHN1YnNjcmlwdGlvbi5kZWxpdmVyeU1vZGUgJiYgc3Vic2NyaXB0aW9uLmRlbGl2ZXJ5TW9kZS5zdWJzY3JpYmVyS2V5ICYmIHN1YnNjcmlwdGlvbi5kZWxpdmVyeU1vZGUuYWRkcmVzcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG5cblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuYWxpdmUgPSBmdW5jdGlvbiBhbGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlZCgpICYmIERhdGUubm93KCkgPCB0aGlzLmV4cGlyYXRpb25UaW1lKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG5cblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuZXhwaXJlZCA9IGZ1bmN0aW9uIGV4cGlyZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdWJzY3JpYmVkKCkpIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gIXRoaXMuc3Vic2NyaWJlZCgpIHx8IERhdGUubm93KCkgPiB0aGlzLnN1YnNjcmlwdGlvbigpLmV4cGlyYXRpb25UaW1lO1xuICAgIH07XG5cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLmV4cGlyYXRpb25UaW1lID0gZnVuY3Rpb24gZXhwaXJhdGlvblRpbWUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnN1YnNjcmlwdGlvbigpLmV4cGlyYXRpb25UaW1lIHx8IDApLmdldFRpbWUoKSAtIFN1YnNjcmlwdGlvbi5fcmVuZXdIYW5kaWNhcE1zO1xuICAgIH07XG5cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnNldFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIHNldFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pIHtcblxuICAgICAgICBzdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb24gfHwge307XG5cbiAgICAgICAgdGhpcy5fY2xlYXJUaW1lb3V0KCk7XG4gICAgICAgIHRoaXMuX3NldFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmVBdFB1Ym51YigpO1xuICAgICAgICB0aGlzLl9zZXRUaW1lb3V0KCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuc3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gc3Vic2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uIHx8IHt9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9yIHVwZGF0ZXMgc3Vic2NyaXB0aW9uIGlmIHRoZXJlIGlzIGFuIGFjdGl2ZSBvbmVcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG4gICAgICovXG5cblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWxpdmUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZXcoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoJ3JldHVybicsIF9jb250ZXh0LnNlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCdyZXR1cm4nLCBfY29udGV4dC5zZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmdW5jdGlvbiByZWdpc3RlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVnaXN0ZXI7XG4gICAgfSgpO1xuXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5ldmVudEZpbHRlcnMgPSBmdW5jdGlvbiBldmVudEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbigpLmV2ZW50RmlsdGVycyB8fCBbXTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gZXZlbnRzXG4gICAgICogQHJldHVybiB7U3Vic2NyaXB0aW9ufVxuICAgICAqL1xuXG5cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLmFkZEV2ZW50RmlsdGVycyA9IGZ1bmN0aW9uIGFkZEV2ZW50RmlsdGVycyhldmVudHMpIHtcbiAgICAgICAgdGhpcy5zZXRFdmVudEZpbHRlcnModGhpcy5ldmVudEZpbHRlcnMoKS5jb25jYXQoZXZlbnRzKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBldmVudHNcbiAgICAgKiBAcmV0dXJuIHtTdWJzY3JpcHRpb259XG4gICAgICovXG5cblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuc2V0RXZlbnRGaWx0ZXJzID0gZnVuY3Rpb24gc2V0RXZlbnRGaWx0ZXJzKGV2ZW50cykge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb24oKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLmV2ZW50RmlsdGVycyA9IGV2ZW50cztcbiAgICAgICAgdGhpcy5fc2V0U3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG4gICAgICovXG5cblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwganNvbjtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGVhclRpbWVvdXQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50RmlsdGVycygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXZlbnRzIGFyZSB1bmRlZmluZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGxhdGZvcm0ucG9zdCgnL3N1YnNjcmlwdGlvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRGaWx0ZXJzOiB0aGlzLl9nZXRGdWxsRXZlbnRGaWx0ZXJzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGl2ZXJ5TW9kZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0VHlwZTogJ1B1Yk51YidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gcmVzcG9uc2UuanNvbigpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN1YnNjcmlwdGlvbihqc29uKS5lbWl0KHRoaXMuZXZlbnRzLnN1YnNjcmliZVN1Y2Nlc3MsIHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCdyZXR1cm4nLCByZXNwb25zZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbJ2NhdGNoJ10oMCk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IHRoaXMuX3BsYXRmb3JtLmNsaWVudCgpLm1ha2VFcnJvcihfY29udGV4dDIudDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpLmVtaXQodGhpcy5ldmVudHMuc3Vic2NyaWJlRXJyb3IsIF9jb250ZXh0Mi50MCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDIudDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbMCwgMTJdXSk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmdW5jdGlvbiBzdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWJzY3JpYmU7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge1Byb21pc2U8QXBpUmVzcG9uc2U+fVxuICAgICAqL1xuXG5cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlbmV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwganNvbjtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAwO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGVhclRpbWVvdXQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmliZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc3Vic2NyaXB0aW9uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ldmVudEZpbHRlcnMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50cyBhcmUgdW5kZWZpbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXRmb3JtLnB1dCgnL3N1YnNjcmlwdGlvbi8nICsgdGhpcy5zdWJzY3JpcHRpb24oKS5pZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudEZpbHRlcnM6IHRoaXMuX2dldEZ1bGxFdmVudEZpbHRlcnMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gcmVzcG9uc2UuanNvbigpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN1YnNjcmlwdGlvbihqc29uKS5lbWl0KHRoaXMuZXZlbnRzLnJlbmV3U3VjY2VzcywgcmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoJ3JldHVybicsIHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1snY2F0Y2gnXSgwKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gdGhpcy5fcGxhdGZvcm0uY2xpZW50KCkubWFrZUVycm9yKF9jb250ZXh0My50MCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCkuZW1pdCh0aGlzLmV2ZW50cy5yZW5ld0Vycm9yLCBfY29udGV4dDMudDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQzLnQwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE5OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzLCBbWzAsIDE0XV0pO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgZnVuY3Rpb24gcmVuZXcoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZW5ldztcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcGlSZXNwb25zZT59XG4gICAgICovXG5cblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZTtcbiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3Vic2NyaWJlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzdWJzY3JpcHRpb24nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGxhdGZvcm0uZGVsZXRlKCcvc3Vic2NyaXB0aW9uLycgKyB0aGlzLnN1YnNjcmlwdGlvbigpLmlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0LnNlbnQ7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKS5lbWl0KHRoaXMuZXZlbnRzLnJlbW92ZVN1Y2Nlc3MsIHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCdyZXR1cm4nLCByZXNwb25zZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbJ2NhdGNoJ10oMCk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IHRoaXMuX3BsYXRmb3JtLmNsaWVudCgpLm1ha2VFcnJvcihfY29udGV4dDQudDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuZXZlbnRzLnJlbW92ZUVycm9yLCBfY29udGV4dDQudDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQ0LnQwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzLCBbWzAsIDEwXV0pO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVtb3ZlO1xuICAgIH0oKTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFwaVJlc3BvbnNlPn1cbiAgICAgKi9cblxuXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5yZXN1YnNjcmliZSA9IGZ1bmN0aW9uIHJlc3Vic2NyaWJlKCkge1xuICAgICAgICB2YXIgZmlsdGVycyA9IHRoaXMuZXZlbnRGaWx0ZXJzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc2V0KCkuc2V0RXZlbnRGaWx0ZXJzKGZpbHRlcnMpLnN1YnNjcmliZSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgc3Vic2NyaXB0aW9uIGFuZCBkaXNjb25uZWN0IGZyb20gUFVCTlVCXG4gICAgICogVGhpcyBtZXRob2QgcmVzZXRzIHN1YnNjcmlwdGlvbiBhdCBjbGllbnQgc2lkZSBidXQgYmFja2VuZCBpcyBub3Qgbm90aWZpZWRcbiAgICAgKi9cblxuXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICB0aGlzLl9jbGVhclRpbWVvdXQoKTtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaWJlZCgpICYmIHRoaXMuX3B1Ym51YikgdGhpcy5fcHVibnViLnVuc3Vic2NyaWJlKHsgY2hhbm5lbDogdGhpcy5zdWJzY3JpcHRpb24oKS5kZWxpdmVyeU1vZGUuYWRkcmVzcyB9KTtcbiAgICAgICAgdGhpcy5fc2V0U3Vic2NyaXB0aW9uKG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fc2V0U3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gX3NldFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uO1xuICAgIH07XG5cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9nZXRGdWxsRXZlbnRGaWx0ZXJzID0gZnVuY3Rpb24gX2dldEZ1bGxFdmVudEZpbHRlcnMoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RmlsdGVycygpLm1hcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczIuX3BsYXRmb3JtLmNyZWF0ZVVybChldmVudCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9zZXRUaW1lb3V0ID0gZnVuY3Rpb24gX3NldFRpbWVvdXQoKSB7XG4gICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2NsZWFyVGltZW91dCgpO1xuXG4gICAgICAgIGlmICghdGhpcy5hbGl2ZSgpKSB0aHJvdyBuZXcgRXJyb3IoJ1N1YnNjcmlwdGlvbiBpcyBub3QgYWxpdmUnKTtcblxuICAgICAgICB0aGlzLl90aW1lb3V0ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAoX3RoaXMzLmFsaXZlKCkpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKF90aGlzMy5leHBpcmVkKCkpIHtcbiAgICAgICAgICAgICAgICBfdGhpczMuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzMy5yZW5ldygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBTdWJzY3JpcHRpb24uX3BvbGxJbnRlcnZhbCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX2NsZWFyVGltZW91dCA9IGZ1bmN0aW9uIF9jbGVhclRpbWVvdXQoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fdGltZW91dCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9kZWNyeXB0ID0gZnVuY3Rpb24gX2RlY3J5cHQobWVzc2FnZSkge1xuXG4gICAgICAgIGlmICghdGhpcy5zdWJzY3JpYmVkKCkpIHRocm93IG5ldyBFcnJvcignTm8gc3Vic2NyaXB0aW9uJyk7XG5cbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKCkuZGVsaXZlcnlNb2RlLmVuY3J5cHRpb25LZXkpIHtcblxuICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMuX3B1Ym51YkZhY3RvcnkuY3J5cHRvX29iai5kZWNyeXB0KG1lc3NhZ2UsIHRoaXMuc3Vic2NyaXB0aW9uKCkuZGVsaXZlcnlNb2RlLmVuY3J5cHRpb25LZXksIHtcbiAgICAgICAgICAgICAgICBlbmNyeXB0S2V5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBrZXlFbmNvZGluZzogJ2Jhc2U2NCcsXG4gICAgICAgICAgICAgICAga2V5TGVuZ3RoOiAxMjgsXG4gICAgICAgICAgICAgICAgbW9kZTogJ2VjYidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX25vdGlmeSA9IGZ1bmN0aW9uIF9ub3RpZnkobWVzc2FnZSkge1xuICAgICAgICB0aGlzLmVtaXQodGhpcy5ldmVudHMubm90aWZpY2F0aW9uLCB0aGlzLl9kZWNyeXB0KG1lc3NhZ2UpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3N1YnNjcmliZUF0UHVibnViID0gZnVuY3Rpb24gX3N1YnNjcmliZUF0UHVibnViKCkge1xuXG4gICAgICAgIGlmICghdGhpcy5hbGl2ZSgpKSB0aHJvdyBuZXcgRXJyb3IoJ1N1YnNjcmlwdGlvbiBpcyBub3QgYWxpdmUnKTtcblxuICAgICAgICB2YXIgZGVsaXZlcnlNb2RlID0gdGhpcy5zdWJzY3JpcHRpb24oKS5kZWxpdmVyeU1vZGU7XG5cbiAgICAgICAgaWYgKHRoaXMuX3B1Ym51Yikge1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fcHVibnViTGFzdENoYW5uZWwgPT0gZGVsaXZlcnlNb2RlLmFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAvLyBOb3RoaW5nIHRvIHVwZGF0ZSwga2VlcCBsaXN0ZW5pbmcgdG8gc2FtZSBjaGFubmVsXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3B1Ym51Ykxhc3RDaGFubmVsKSB7XG4gICAgICAgICAgICAgICAgLy8gTmVlZCB0byBzdWJzY3JpYmUgdG8gbmV3IGNoYW5uZWxcbiAgICAgICAgICAgICAgICB0aGlzLl9wdWJudWIudW5zdWJzY3JpYmUoeyBjaGFubmVsOiB0aGlzLl9wdWJudWJMYXN0Q2hhbm5lbCB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmUtaW5pdCBmb3IgbmV3IGRhdGFcbiAgICAgICAgICAgIHRoaXMuX3B1Ym51YiA9IHRoaXMuX3B1Ym51Yi5pbml0KHtcbiAgICAgICAgICAgICAgICBzc2w6IHRydWUsXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlX2tleTogZGVsaXZlcnlNb2RlLnN1YnNjcmliZXJLZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAvLyBJbml0IGZyb20gc2NyYXRjaFxuICAgICAgICAgICAgdGhpcy5fcHVibnViID0gdGhpcy5fcHVibnViRmFjdG9yeS5pbml0KHtcbiAgICAgICAgICAgICAgICBzc2w6IHRydWUsXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlX2tleTogZGVsaXZlcnlNb2RlLnN1YnNjcmliZXJLZXlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLl9wdWJudWIucmVhZHkoKTsgLy9UT0RPIFRoaXMgbWF5IGJlIG5vdCBuZWVkZWQgYW55bW9yZVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcHVibnViTGFzdENoYW5uZWwgPSBkZWxpdmVyeU1vZGUuYWRkcmVzcztcblxuICAgICAgICB0aGlzLl9wdWJudWIuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIGNoYW5uZWw6IGRlbGl2ZXJ5TW9kZS5hZGRyZXNzLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5fbm90aWZ5LmJpbmQodGhpcyksXG4gICAgICAgICAgICBjb25uZWN0OiBmdW5jdGlvbiBjb25uZWN0KCkge31cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHJldHVybiBTdWJzY3JpcHRpb247XG59KF9ldmVudHMyLmRlZmF1bHQpO1xuXG4vL2V4cG9ydCBpbnRlcmZhY2UgSVN1YnNjcmlwdGlvbiB7XG4vLyAgICBpZD86c3RyaW5nO1xuLy8gICAgdXJpPzogc3RyaW5nO1xuLy8gICAgZXZlbnRGaWx0ZXJzPzpzdHJpbmdbXTtcbi8vICAgIGV4cGlyYXRpb25UaW1lPzpzdHJpbmc7IC8vIDIwMTQtMDMtMTJUMTk6NTQ6MzUuNjEzWlxuLy8gICAgZXhwaXJlc0luPzpudW1iZXI7XG4vLyAgICBkZWxpdmVyeU1vZGU/OiB7XG4vLyAgICAgICAgdHJhbnNwb3J0VHlwZT86c3RyaW5nO1xuLy8gICAgICAgIGVuY3J5cHRpb24/OmJvb2xlYW47XG4vLyAgICAgICAgYWRkcmVzcz86c3RyaW5nO1xuLy8gICAgICAgIHN1YnNjcmliZXJLZXk/OnN0cmluZztcbi8vICAgICAgICBlbmNyeXB0aW9uS2V5PzpzdHJpbmc7XG4vLyAgICAgICAgc2VjcmV0S2V5PzpzdHJpbmc7XG4vLyAgICB9O1xuLy8gICAgY3JlYXRpb25UaW1lPzpzdHJpbmc7IC8vIDIwMTQtMDMtMTJUMTk6NTQ6MzUuNjEzWlxuLy8gICAgc3RhdHVzPzpzdHJpbmc7IC8vIEFjdGl2ZVxuLy99XG5cblxuU3Vic2NyaXB0aW9uLl9yZW5ld0hhbmRpY2FwTXMgPSAyICogNjAgKiAxMDAwO1xuU3Vic2NyaXB0aW9uLl9wb2xsSW50ZXJ2YWwgPSAxMCAqIDEwMDA7XG5leHBvcnRzLmRlZmF1bHQgPSBTdWJzY3JpcHRpb247XG5cbi8qKiovIH0sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX1N1YnNjcmlwdGlvbjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblxudmFyIF9TdWJzY3JpcHRpb24zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3Vic2NyaXB0aW9uMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIENhY2hlZFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChfU3Vic2NyaXB0aW9uKSB7XG4gICAgX2luaGVyaXRzKENhY2hlZFN1YnNjcmlwdGlvbiwgX1N1YnNjcmlwdGlvbik7XG5cbiAgICBmdW5jdGlvbiBDYWNoZWRTdWJzY3JpcHRpb24ocHVibnViRmFjdG9yeSwgcGxhdGZvcm0sIGNhY2hlLCBjYWNoZUtleSkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FjaGVkU3Vic2NyaXB0aW9uKTtcblxuICAgICAgICAvKiogQHR5cGUge0NhY2hlfSAqL1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9TdWJzY3JpcHRpb24uY2FsbCh0aGlzLCBwdWJudWJGYWN0b3J5LCBwbGF0Zm9ybSkpO1xuXG4gICAgICAgIF90aGlzLl9jYWNoZSA9IGNhY2hlO1xuICAgICAgICBfdGhpcy5fY2FjaGVLZXkgPSBjYWNoZUtleTtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgQ2FjaGVkU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5zdWJzY3JpcHRpb24gPSBmdW5jdGlvbiBzdWJzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZS5nZXRJdGVtKHRoaXMuX2NhY2hlS2V5KSB8fCB7fTtcbiAgICB9O1xuXG4gICAgQ2FjaGVkU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fc2V0U3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gX3NldFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLnNldEl0ZW0odGhpcy5fY2FjaGVLZXksIHN1YnNjcmlwdGlvbik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2hlY2tzIHdoZXRoZXIgdGhlcmUgYXJlIGFueSBwcmUtZGVmaW5lZCBldmVudEZpbHRlcnMgaW4gY2FjaGUgYW5kIGlmIG5vdCAtLSB1c2VzIHByb3ZpZGVkIGFzIGRlZmF1bHRzXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gZXZlbnRzXG4gICAgICogQHJldHVybiB7Q2FjaGVkU3Vic2NyaXB0aW9ufVxuICAgICAqL1xuXG5cbiAgICBDYWNoZWRTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbiByZXN0b3JlKGV2ZW50cykge1xuXG4gICAgICAgIGlmICghdGhpcy5ldmVudEZpbHRlcnMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RXZlbnRGaWx0ZXJzKGV2ZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgcmV0dXJuIENhY2hlZFN1YnNjcmlwdGlvbjtcbn0oX1N1YnNjcmlwdGlvbjMuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IENhY2hlZFN1YnNjcmlwdGlvbjtcblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmluZ2NlbnRyYWwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmluZ2NlbnRyYWwvYnVpbGQvcmluZ2NlbnRyYWwuanNcbiAqKiBtb2R1bGUgaWQgPSA1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbi8qXG4gKiBFeHBvcnQga01heExlbmd0aCBhZnRlciB0eXBlZCBhcnJheSBzdXBwb3J0IGlzIGRldGVybWluZWQuXG4gKi9cbmV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCcpXG4gIH1cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgaWYgKHRoYXQgPT09IG51bGwpIHtcbiAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgICB9XG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZylcbiAgfVxuICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbi8vIFRPRE86IExlZ2FjeSwgbm90IG5lZWRlZCBhbnltb3JlLiBSZW1vdmUgaW4gbmV4dCBtYWpvciB2ZXJzaW9uLlxuQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcbn1cblxuLyoqXG4gKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG4gKiBCdWZmZXIuZnJvbShhcnJheSlcbiAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuICoqL1xuQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcbiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG4gICAgICA/IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgICAgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKVxuICB9XG4gIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG4gKiovXG5CdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcblxuICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXJcblxuICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnb2Zmc2V0XFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdsZW5ndGhcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG4gIH0gZWxzZSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IGFycmF5XG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHtcbiAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblxuICAgIGlmICh0aGF0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoYXRcbiAgICB9XG5cbiAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG4gICAgcmV0dXJuIHRoYXRcbiAgfVxuXG4gIGlmIChvYmopIHtcbiAgICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCAwKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKVxuICAgIH1cblxuICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKVxuICAgIH1cbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aCgpYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG4gIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAgIGxlbmd0aCA9IDBcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXVxuICAgICAgeSA9IGJbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICAgIH1cbiAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICBwb3MgKz0gYnVmLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZmZXJcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuICB9XG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG4gIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cbiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG4gIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cbiAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcbiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG4gIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwXG4gIHN0YXJ0ID4+Pj0gMFxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG4vLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdFxuLy8gQnVmZmVyIGluc3RhbmNlcy5cbkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgMiAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNTdGFydCA9IDBcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuICAgIHJldHVybiAtMVxuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgc3RhcnQgPj4+PSAwXG4gIGVuZCA+Pj49IDBcbiAgdGhpc1N0YXJ0ID4+Pj0gMFxuICB0aGlzRW5kID4+Pj0gMFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cbiAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG4gIHZhciB5ID0gZW5kIC0gc3RhcnRcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG5cbiAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG4gIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuICAgICAgeCA9IHRoaXNDb3B5W2ldXG4gICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuICAgIGJ5dGVPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICB9XG4gIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAgLy8gQ29lcmNlIHRvIE51bWJlci5cbiAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG4gICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG4gICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpXG4gIH1cblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgaWYgKGRpcikgcmV0dXJuIC0xXG4gICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwXG4gICAgZWxzZSByZXR1cm4gLTFcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSB2YWxcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcbiAgfVxuXG4gIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiZcbiAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgdmFyIGluZGV4U2l6ZSA9IDFcbiAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGRpcikge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCdcbiAgICApXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpXG4gICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG4gICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcbiAgcmV0dXJuIG9mZnNldCArIDhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuICB9XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG4gIHZhciBpXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksXG4gICAgICB0YXJnZXRTdGFydFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gVXNhZ2U6XG4vLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7XG4gIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IHN0YXJ0XG4gICAgICBzdGFydCA9IDBcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBlbmRcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoY29kZSA8IDI1Nikge1xuICAgICAgICB2YWwgPSBjb2RlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMjU1XG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuICAgICAgPyB2YWxcbiAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBpc25hbiAodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYnVmZmVyL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0J1xuXG5leHBvcnRzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5leHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXlcbmV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IGZyb21CeXRlQXJyYXlcblxudmFyIGxvb2t1cCA9IFtdXG52YXIgcmV2TG9va3VwID0gW11cbnZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXlcblxudmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLydcbmZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gIGxvb2t1cFtpXSA9IGNvZGVbaV1cbiAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpXG59XG5cbnJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MlxucmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzXG5cbmZ1bmN0aW9uIHBsYWNlSG9sZGVyc0NvdW50IChiNjQpIHtcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIHRoZSBudW1iZXIgb2YgZXF1YWwgc2lnbnMgKHBsYWNlIGhvbGRlcnMpXG4gIC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcbiAgLy8gcmVwcmVzZW50IG9uZSBieXRlXG4gIC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lLCB0aGVuIHRoZSB0aHJlZSBjaGFyYWN0ZXJzIGJlZm9yZSBpdCByZXByZXNlbnQgMiBieXRlc1xuICAvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG4gIHJldHVybiBiNjRbbGVuIC0gMl0gPT09ICc9JyA/IDIgOiBiNjRbbGVuIC0gMV0gPT09ICc9JyA/IDEgOiAwXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkge1xuICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcbiAgcmV0dXJuIGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVyc0NvdW50KGI2NClcbn1cblxuZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkge1xuICB2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuICBwbGFjZUhvbGRlcnMgPSBwbGFjZUhvbGRlcnNDb3VudChiNjQpXG5cbiAgYXJyID0gbmV3IEFycihsZW4gKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gbGVuIC0gNCA6IGxlblxuXG4gIHZhciBMID0gMFxuXG4gIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KVxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA+PiAyKVxuICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcbiAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICsgbG9va3VwW251bSAmIDB4M0ZdXG59XG5cbmZ1bmN0aW9uIGVuY29kZUNodW5rICh1aW50OCwgc3RhcnQsIGVuZCkge1xuICB2YXIgdG1wXG4gIHZhciBvdXRwdXQgPSBbXVxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykge1xuICAgIHRtcCA9ICh1aW50OFtpXSA8PCAxNikgKyAodWludDhbaSArIDFdIDw8IDgpICsgKHVpbnQ4W2kgKyAyXSlcbiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aFxuICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIG91dHB1dCA9ICcnXG4gIHZhciBwYXJ0cyA9IFtdXG4gIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzIC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgM1xuXG4gIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcbiAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkge1xuICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpXG4gIH1cblxuICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG4gIGlmIChleHRyYUJ5dGVzID09PSAxKSB7XG4gICAgdG1wID0gdWludDhbbGVuIC0gMV1cbiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXVxuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdXG4gICAgb3V0cHV0ICs9ICc9PSdcbiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7XG4gICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgKHVpbnQ4W2xlbiAtIDFdKVxuICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDEwXVxuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gJz0nXG4gIH1cblxuICBwYXJ0cy5wdXNoKG91dHB1dClcblxuICByZXR1cm4gcGFydHMuam9pbignJylcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Jhc2U2NC1qcy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbVxuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIG5CaXRzID0gLTdcbiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMFxuICB2YXIgZCA9IGlzTEUgPyAtMSA6IDFcbiAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblxuICBpICs9IGRcblxuICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBzID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBlTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgZSA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gbUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhc1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG4gICAgZSA9IGUgLSBlQmlhc1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG59XG5cbmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGNcbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcbiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKVxuICB2YXIgZCA9IGlzTEUgPyAxIDogLTFcbiAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKVxuXG4gIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwXG4gICAgZSA9IGVNYXhcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMilcbiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG4gICAgICBlLS1cbiAgICAgIGMgKj0gMlxuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gY1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcbiAgICB9XG4gICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG4gICAgICBlKytcbiAgICAgIGMgLz0gMlxuICAgIH1cblxuICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuICAgICAgbSA9IDBcbiAgICAgIGUgPSBlTWF4XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2llZWU3NTQvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA2MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9pc2FycmF5L2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBmdW5jdGlvbiBmZXRjaFBvbnlmaWxsKG9wdGlvbnMpIHtcbiAgICB2YXIgUHJvbWlzZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5Qcm9taXNlIHx8IHNlbGYuUHJvbWlzZTtcbiAgICB2YXIgWE1MSHR0cFJlcXVlc3QgPSBvcHRpb25zICYmIG9wdGlvbnMuWE1MSHR0cFJlcXVlc3QgfHwgc2VsZi5YTUxIdHRwUmVxdWVzdDtcbiAgICB2YXIgZ2xvYmFsID0gc2VsZjtcblxuICAgIHJldHVybiAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNlbGYgPSBPYmplY3QuY3JlYXRlKGdsb2JhbCwge1xuICAgICAgICBmZXRjaDoge1xuICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIChmdW5jdGlvbihzZWxmKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICBpZiAoc2VsZi5mZXRjaCkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN1cHBvcnQgPSB7XG4gICAgICAgICAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBzZWxmLFxuICAgICAgICAgIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBzZWxmICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuICAgICAgICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIG5ldyBCbG9iKClcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSgpLFxuICAgICAgICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG4gICAgICAgICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB2YWx1ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQnVpbGQgYSBkZXN0cnVjdGl2ZSBpdGVyYXRvciBmb3IgdGhlIHZhbHVlIGxpc3RcbiAgICAgICAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcbiAgICAgICAgICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuICAgICAgICAgICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgICAgICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICAgICAgICAgIHRoaXMubWFwID0ge31cblxuICAgICAgICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuICAgICAgICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuICAgICAgICAgICAgfSwgdGhpcylcblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG4gICAgICAgICAgICB9LCB0aGlzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgICAgICAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuICAgICAgICAgIHZhciBsaXN0ID0gdGhpcy5tYXBbbmFtZV1cbiAgICAgICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgICAgIGxpc3QgPSBbXVxuICAgICAgICAgICAgdGhpcy5tYXBbbmFtZV0gPSBsaXN0XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpc3QucHVzaCh2YWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbiAgICAgICAgfVxuXG4gICAgICAgIEhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbiAgICAgICAgICByZXR1cm4gdmFsdWVzID8gdmFsdWVzWzBdIDogbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSB8fCBbXVxuICAgICAgICB9XG5cbiAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShub3JtYWxpemVOYW1lKG5hbWUpKVxuICAgICAgICB9XG5cbiAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IFtub3JtYWxpemVWYWx1ZSh2YWx1ZSldXG4gICAgICAgIH1cblxuICAgICAgICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLm1hcCkuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB0aGlzLm1hcFtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWUsIG5hbWUsIHRoaXMpXG4gICAgICAgICAgICB9LCB0aGlzKVxuICAgICAgICAgIH0sIHRoaXMpXG4gICAgICAgIH1cblxuICAgICAgICBIZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGl0ZW1zID0gW11cbiAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChuYW1lKSB9KVxuICAgICAgICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgICAgICAgfVxuXG4gICAgICAgIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBpdGVtcyA9IFtdXG4gICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW1zLnB1c2godmFsdWUpIH0pXG4gICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICAgICAgICB9XG5cbiAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBpdGVtcyA9IFtdXG4gICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSkgfSlcbiAgICAgICAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgICAgICAgIEhlYWRlcnMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG4gICAgICAgICAgaWYgKGJvZHkuYm9keVVzZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYm9keS5ib2R5VXNlZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcihibG9iKSB7XG4gICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgICAgICAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0KGJsb2IpIHtcbiAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG4gICAgICAgICAgcmV0dXJuIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBCb2R5KCkge1xuICAgICAgICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZVxuXG4gICAgICAgICAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgICAgICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYiAmJiBCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmZvcm1EYXRhICYmIEZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFib2R5KSB7XG4gICAgICAgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICAgICAgICAvLyBPbmx5IHN1cHBvcnQgQXJyYXlCdWZmZXJzIGZvciBQT1NUIG1ldGhvZC5cbiAgICAgICAgICAgICAgLy8gUmVjZWl2aW5nIEFycmF5QnVmZmVycyBoYXBwZW5zIHZpYSBCbG9icywgaW5zdGVhZC5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgQm9keUluaXQgdHlwZScpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlCbG9iICYmIHRoaXMuX2JvZHlCbG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCcpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgICAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iJylcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgICAgICAgIHJldHVybiByZWplY3RlZCA/IHJlamVjdGVkIDogUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhUVFAgbWV0aG9kcyB3aG9zZSBjYXBpdGFsaXphdGlvbiBzaG91bGQgYmUgbm9ybWFsaXplZFxuICAgICAgICB2YXIgbWV0aG9kcyA9IFsnREVMRVRFJywgJ0dFVCcsICdIRUFEJywgJ09QVElPTlMnLCAnUE9TVCcsICdQVVQnXVxuXG4gICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcbiAgICAgICAgICB2YXIgdXBjYXNlZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgcmV0dXJuIChtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSkgPyB1cGNhc2VkIDogbWV0aG9kXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICAgICAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keVxuICAgICAgICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSkge1xuICAgICAgICAgICAgaWYgKGlucHV0LmJvZHlVc2VkKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVybCA9IGlucHV0LnVybFxuICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGlucHV0LmNyZWRlbnRpYWxzXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbnB1dC5oZWFkZXJzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2RcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IGlucHV0Lm1vZGVcbiAgICAgICAgICAgIGlmICghYm9keSkge1xuICAgICAgICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG4gICAgICAgICAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVybCA9IGlucHV0XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnb21pdCdcbiAgICAgICAgICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG4gICAgICAgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG4gICAgICAgICAgdGhpcy5yZWZlcnJlciA9IG51bGxcblxuICAgICAgICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5faW5pdEJvZHkoYm9keSlcbiAgICAgICAgfVxuXG4gICAgICAgIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMpXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWNvZGUoYm9keSkge1xuICAgICAgICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKClcbiAgICAgICAgICBib2R5LnRyaW0oKS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcbiAgICAgICAgICAgIGlmIChieXRlcykge1xuICAgICAgICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpXG4gICAgICAgICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIGZvcm1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhlYWRlcnMoeGhyKSB7XG4gICAgICAgICAgdmFyIGhlYWQgPSBuZXcgSGVhZGVycygpXG4gICAgICAgICAgdmFyIHBhaXJzID0gKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJykudHJpbSgpLnNwbGl0KCdcXG4nKVxuICAgICAgICAgIHBhaXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgICAgICB2YXIgc3BsaXQgPSBoZWFkZXIudHJpbSgpLnNwbGl0KCc6JylcbiAgICAgICAgICAgIHZhciBrZXkgPSBzcGxpdC5zaGlmdCgpLnRyaW0oKVxuICAgICAgICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignOicpLnRyaW0oKVxuICAgICAgICAgICAgaGVhZC5hcHBlbmQoa2V5LCB2YWx1ZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVybiBoZWFkXG4gICAgICAgIH1cblxuICAgICAgICBCb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpXG5cbiAgICAgICAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcbiAgICAgICAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuICAgICAgICAgIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXNcbiAgICAgICAgICB0aGlzLm9rID0gdGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwXG4gICAgICAgICAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0XG4gICAgICAgICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycyA/IG9wdGlvbnMuaGVhZGVycyA6IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICAgICAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnXG4gICAgICAgICAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG4gICAgICAgIH1cblxuICAgICAgICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXG4gICAgICAgIFJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICAgICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgICAgICAgICAgdXJsOiB0aGlzLnVybFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBSZXNwb25zZS5lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG4gICAgICAgICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWRpcmVjdFN0YXR1c2VzID0gWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XVxuXG4gICAgICAgIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgICAgICAgICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzXG4gICAgICAgIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3RcbiAgICAgICAgc2VsZi5SZXNwb25zZSA9IFJlc3BvbnNlXG5cbiAgICAgICAgc2VsZi5mZXRjaCA9IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHJlcXVlc3RcbiAgICAgICAgICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSAmJiAhaW5pdCkge1xuICAgICAgICAgICAgICByZXF1ZXN0ID0gaW5wdXRcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlVVJMKCkge1xuICAgICAgICAgICAgICBpZiAoJ3Jlc3BvbnNlVVJMJyBpbiB4aHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geGhyLnJlc3BvbnNlVVJMXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBBdm9pZCBzZWN1cml0eSB3YXJuaW5ncyBvbiBnZXRSZXNwb25zZUhlYWRlciB3aGVuIG5vdCBhbGxvd2VkIGJ5IENPUlNcbiAgICAgICAgICAgICAgaWYgKC9eWC1SZXF1ZXN0LVVSTDovbS50ZXN0KHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLVJlcXVlc3QtVVJMJylcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKHhociksXG4gICAgICAgICAgICAgICAgdXJsOiByZXNwb25zZVVSTCgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHRcbiAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKVxuXG4gICAgICAgICAgICBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ2luY2x1ZGUnKSB7XG4gICAgICAgICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcbiAgICAgIH0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzKTtcblxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBmZXRjaDogc2VsZi5mZXRjaCxcbiAgICAgICAgSGVhZGVyczogc2VsZi5IZWFkZXJzLFxuICAgICAgICBSZXF1ZXN0OiBzZWxmLlJlcXVlc3QsXG4gICAgICAgIFJlc3BvbnNlOiBzZWxmLlJlc3BvbnNlXG4gICAgICB9O1xuICAgIH0oKSk7XG4gIH1cblxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmZXRjaFBvbnlmaWxsO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmV0Y2hQb255ZmlsbDtcbiAgfSBlbHNlIHtcbiAgICBzZWxmLmZldGNoUG9ueWZpbGwgPSBmZXRjaFBvbnlmaWxsO1xuICB9XG59KCkpO1xuXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9mZXRjaC1wb255ZmlsbC9idWlsZC9mZXRjaC1icm93c2VyLmpzXG4gKiogbW9kdWxlIGlkID0gNjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qISAzLjE2LjMgLyBtb2Rlcm4gKi9cbihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlBVQk5VQlwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJQVUJOVUJcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuXG5cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogZXNsaW50IGN1cmx5OiAwLCBjYW1lbGNhc2U6IDAsIGRvdC1ub3RhdGlvbjogMCAqL1xuXG5cdHZhciBwdWJOdWJDb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0dmFyIGNyeXB0b19vYmogPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgQ3J5cHRvSlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHR2YXIgV1MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG5cblx0LyoqXG5cdCAqIExPQ0FMIFNUT1JBR0Vcblx0ICovXG5cdHZhciBkYiA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGxzO1xuXG5cdCAgdHJ5IHtcblx0ICAgIGxzID0gdHlwZW9mIGxvY2FsU3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbG9jYWxTdG9yYWdlO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGxzID0ge1xuXHQgICAgICBfZGF0YToge30sXG5cdCAgICAgIHNldEl0ZW06IGZ1bmN0aW9uIChpZCwgdmFsKSB7XG5cdCAgICAgICAgdGhpcy5fZGF0YVtpZF0gPSBTdHJpbmcodmFsKTtcblx0ICAgICAgfSxcblx0ICAgICAgZ2V0SXRlbTogZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGEuaGFzT3duUHJvcGVydHkoaWQpID8gdGhpcy5fZGF0YVtpZF0gOiB1bmRlZmluZWQ7XG5cdCAgICAgIH0sXG5cdCAgICAgIHJlbW92ZUl0ZW06IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiBkZWxldGUgdGhpcy5fZGF0YVtpZF07XG5cdCAgICAgIH0sXG5cdCAgICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5fZGF0YSA9IHt9O1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKGxzKSByZXR1cm4gbHMuZ2V0SXRlbShrZXkpO1xuXHQgICAgICAgIGlmIChkb2N1bWVudC5jb29raWUuaW5kZXhPZihrZXkpID09PSAtMSkgcmV0dXJuIG51bGw7XG5cdCAgICAgICAgcmV0dXJuICgoZG9jdW1lbnQuY29va2llIHx8ICcnKS5tYXRjaChcblx0ICAgICAgICAgICAgUmVnRXhwKGtleSArICc9KFteO10rKScpXG5cdCAgICAgICAgICApIHx8IFtdKVsxXSB8fCBudWxsO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmIChscykgcmV0dXJuIGxzLnNldEl0ZW0oa2V5LCB2YWx1ZSkgJiYgMDtcblx0ICAgICAgICBkb2N1bWVudC5jb29raWUgPSBrZXkgKyAnPScgKyB2YWx1ZSArXG5cdCAgICAgICAgICAnOyBleHBpcmVzPVRodSwgMSBBdWcgMjAzMCAyMDowMDowMCBVVEM7IHBhdGg9Lyc7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9KSgpO1xuXG5cblx0LyoqXG5cdCAqIENPUlMgWEhSIFJlcXVlc3Rcblx0ICogPT09PT09PT09PT09PT09PVxuXHQgKiAgeGRyKHtcblx0ICogICAgIHVybCAgICAgOiBbJ2h0dHA6Ly93d3cuYmxhaC5jb20vdXJsJ10sXG5cdCAqICAgICBzdWNjZXNzIDogZnVuY3Rpb24ocmVzcG9uc2UpIHt9LFxuXHQgKiAgICAgZmFpbCAgICA6IGZ1bmN0aW9uKCkge31cblx0ICogIH0pO1xuXHQgKi9cblx0ZnVuY3Rpb24geGRyKHNldHVwKSB7XG5cdCAgdmFyIHhocjtcblx0ICB2YXIgdGltZXI7XG5cdCAgdmFyIGNvbXBsZXRlID0gMDtcblx0ICB2YXIgbG9hZGVkID0gMDtcblx0ICB2YXIgYXN5bmMgPSB0cnVlOyAvKiBkbyBub3QgYWxsb3cgc3luYyBvcGVyYXRpb25zIGluIG1vZGVybiBidWlsZHMgKi9cblx0ICB2YXIgeGhydG1lID0gc2V0dXAudGltZW91dCB8fCBwdWJOdWJDb3JlLkRFRl9USU1FT1VUO1xuXHQgIHZhciBkYXRhID0gc2V0dXAuZGF0YSB8fCB7fTtcblx0ICB2YXIgZmFpbCA9IHNldHVwLmZhaWwgfHwgZnVuY3Rpb24gKCkge307XG5cdCAgdmFyIHN1Y2Nlc3MgPSBzZXR1cC5zdWNjZXNzIHx8IGZ1bmN0aW9uICgpIHt9O1xuXG5cdCAgdmFyIGRvbmUgPSBmdW5jdGlvbiAoZmFpbGVkLCByZXNwb25zZSkge1xuXHQgICAgaWYgKGNvbXBsZXRlKSByZXR1cm47XG5cdCAgICBjb21wbGV0ZSA9IDE7XG5cblx0ICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG5cblx0ICAgIGlmICh4aHIpIHtcblx0ICAgICAgeGhyLm9uZXJyb3IgPSB4aHIub25sb2FkID0gbnVsbDtcblx0ICAgICAgaWYgKHhoci5hYm9ydCkgeGhyLmFib3J0KCk7XG5cdCAgICAgIHhociA9IG51bGw7XG5cdCAgICB9XG5cblx0ICAgIGlmIChmYWlsZWQpIGZhaWwocmVzcG9uc2UpO1xuXHQgIH07XG5cblx0ICB2YXIgZmluaXNoZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAobG9hZGVkKSByZXR1cm47XG5cdCAgICB2YXIgcmVzcG9uc2U7XG5cdCAgICBsb2FkZWQgPSAxO1xuXG5cdCAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuXG5cdCAgICB0cnkge1xuXHQgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG5cdCAgICB9IGNhdGNoIChyKSB7XG5cdCAgICAgIHJldHVybiBkb25lKDEpO1xuXHQgICAgfVxuXG5cdCAgICBzdWNjZXNzKHJlc3BvbnNlKTtcblx0ICB9O1xuXG5cdCAgdGltZXIgPSBwdWJOdWJDb3JlLnRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgZG9uZSgxKTtcblx0ICB9LCB4aHJ0bWUpO1xuXG5cdCAgLy8gU2VuZFxuXHQgIHRyeSB7XG5cdCAgICB4aHIgPSB0eXBlb2YgWERvbWFpblJlcXVlc3QgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgIG5ldyBYRG9tYWluUmVxdWVzdCgpIHx8XG5cdCAgICAgIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdCAgICB4aHIub25lcnJvciA9IHhoci5vbmFib3J0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBkb25lKDEsIHhoci5yZXNwb25zZVRleHQgfHwgeyBlcnJvcjogJ05ldHdvcmsgQ29ubmVjdGlvbiBFcnJvcicgfSk7XG5cdCAgICB9O1xuXHQgICAgeGhyLm9ubG9hZCA9IHhoci5vbmxvYWRlbmQgPSBmaW5pc2hlZDtcblxuXHQgICAgdmFyIHVybCA9IHB1Yk51YkNvcmUuYnVpbGRfdXJsKHNldHVwLnVybCwgZGF0YSk7XG5cdCAgICB4aHIub3BlbignR0VUJywgdXJsLCBhc3luYyk7XG5cdCAgICBpZiAoYXN5bmMpIHhoci50aW1lb3V0ID0geGhydG1lO1xuXHQgICAgeGhyLnNlbmQoKTtcblx0ICB9IGNhdGNoIChlZWUpIHtcblx0ICAgIGRvbmUoMSwgeyBlcnJvcjogJ1hIUiBGYWlsZWQnLCBzdGFja3RyYWNlOiBlZWUgfSk7XG5cdCAgfVxuXG5cdCAgLy8gUmV0dXJuICdkb25lJ1xuXHQgIHJldHVybiBkb25lO1xuXHR9XG5cblx0LyoqXG5cdCAqIEJJTkRcblx0ICogPT09PVxuXHQgKiBiaW5kKCAna2V5ZG93bicsIHNlYXJjaCgnYScpWzBdLCBmdW5jdGlvbihlbGVtZW50KSB7XG5cdCAqICAgICAuLi5cblx0ICogfSApO1xuXHQgKi9cblx0ZnVuY3Rpb24gYmluZCh0eXBlLCBlbCwgZnVuKSB7XG5cdCAgcHViTnViQ29yZS5lYWNoKHR5cGUuc3BsaXQoJywnKSwgZnVuY3Rpb24gKGV0eXBlKSB7XG5cdCAgICB2YXIgcmFwZnVuID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgaWYgKCFlKSBlID0gd2luZG93LmV2ZW50O1xuXHQgICAgICBpZiAoIWZ1bihlKSkge1xuXHQgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0ICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cblx0ICAgIGlmIChlbC5hZGRFdmVudExpc3RlbmVyKSBlbC5hZGRFdmVudExpc3RlbmVyKGV0eXBlLCByYXBmdW4sIGZhbHNlKTtcblx0ICAgIGVsc2UgaWYgKGVsLmF0dGFjaEV2ZW50KSBlbC5hdHRhY2hFdmVudCgnb24nICsgZXR5cGUsIHJhcGZ1bik7XG5cdCAgICBlbHNlIGVsWydvbicgKyBldHlwZV0gPSByYXBmdW47XG5cdCAgfSk7XG5cdH1cblxuXHQvKipcblx0ICogRVJST1Jcblx0ICogPT09XG5cdCAqIGVycm9yKCdtZXNzYWdlJyk7XG5cdCAqL1xuXHRmdW5jdGlvbiBlcnJvcihtZXNzYWdlKSB7XG5cdCAgY29uc29sZS5lcnJvcihtZXNzYWdlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG5cdH1cblxuXHQvKipcblx0ICogRVZFTlRTXG5cdCAqID09PT09PVxuXHQgKiBQVUJOVUIuZXZlbnRzLmJpbmQoICd5b3Utc3RlcHBlZC1vbi1mbG93ZXInLCBmdW5jdGlvbihtZXNzYWdlKSB7XG5cdCAqICAgICAvLyBEbyBTdHVmZiB3aXRoIG1lc3NhZ2Vcblx0ICogfSApO1xuXHQgKlxuXHQgKiBQVUJOVUIuZXZlbnRzLmZpcmUoICd5b3Utc3RlcHBlZC1vbi1mbG93ZXInLCBcIm1lc3NhZ2UtZGF0YVwiICk7XG5cdCAqIFBVQk5VQi5ldmVudHMuZmlyZSggJ3lvdS1zdGVwcGVkLW9uLWZsb3dlcicsIHttZXNzYWdlOlwiZGF0YVwifSApO1xuXHQgKiBQVUJOVUIuZXZlbnRzLmZpcmUoICd5b3Utc3RlcHBlZC1vbi1mbG93ZXInLCBbMSwyLDNdICk7XG5cdCAqXG5cdCAqL1xuXHR2YXIgZXZlbnRzID0ge1xuXHQgIGxpc3Q6IHt9LFxuXHQgIHVuYmluZDogZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIGV2ZW50cy5saXN0W25hbWVdID0gW107XG5cdCAgfSxcblx0ICBiaW5kOiBmdW5jdGlvbiAobmFtZSwgZnVuKSB7XG5cdCAgICAoZXZlbnRzLmxpc3RbbmFtZV0gPSBldmVudHMubGlzdFtuYW1lXSB8fCBbXSkucHVzaChmdW4pO1xuXHQgIH0sXG5cdCAgZmlyZTogZnVuY3Rpb24gKG5hbWUsIGRhdGEpIHtcblx0ICAgIHB1Yk51YkNvcmUuZWFjaChcblx0ICAgICAgZXZlbnRzLmxpc3RbbmFtZV0gfHwgW10sXG5cdCAgICAgIGZ1bmN0aW9uIChmdW4pIHtcblx0ICAgICAgICBmdW4oZGF0YSk7XG5cdCAgICAgIH1cblx0ICAgICk7XG5cdCAgfVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBBVFRSXG5cdCAqID09PT1cblx0ICogdmFyIGF0dHJpYnV0ZSA9IGF0dHIoIG5vZGUsICdhdHRyaWJ1dGUnICk7XG5cdCAqL1xuXHRmdW5jdGlvbiBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcblx0ICBpZiAodmFsdWUpIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xuXHQgIGVsc2UgcmV0dXJuIG5vZGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiAkXG5cdCAqID1cblx0ICogdmFyIGRpdiA9ICQoJ2RpdmlkJyk7XG5cdCAqL1xuXHRmdW5jdGlvbiAkKGlkKSB7XG5cdCAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcblx0fVxuXG5cblx0LyoqXG5cdCAqIFNFQVJDSFxuXHQgKiA9PT09PT1cblx0ICogdmFyIGVsZW1lbnRzID0gc2VhcmNoKCdhIGRpdiBzcGFuJyk7XG5cdCAqL1xuXHRmdW5jdGlvbiBzZWFyY2goZWxlbWVudHMsIHN0YXJ0KSB7XG5cdCAgdmFyIGxpc3QgPSBbXTtcblx0ICBwdWJOdWJDb3JlLmVhY2goZWxlbWVudHMuc3BsaXQoL1xccysvKSwgZnVuY3Rpb24gKGVsKSB7XG5cdCAgICBwdWJOdWJDb3JlLmVhY2goKHN0YXJ0IHx8IGRvY3VtZW50KS5nZXRFbGVtZW50c0J5VGFnTmFtZShlbCksIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICAgIGxpc3QucHVzaChub2RlKTtcblx0ICAgIH0pO1xuXHQgIH0pO1xuXHQgIHJldHVybiBsaXN0O1xuXHR9XG5cblx0LyoqXG5cdCAqIENTU1xuXHQgKiA9PT1cblx0ICogdmFyIG9iaiA9IGNyZWF0ZSgnZGl2Jyk7XG5cdCAqL1xuXHRmdW5jdGlvbiBjc3MoZWxlbWVudCwgc3R5bGVzKSB7XG5cdCAgZm9yICh2YXIgc3R5bGUgaW4gc3R5bGVzKSBpZiAoc3R5bGVzLmhhc093blByb3BlcnR5KHN0eWxlKSlcblx0ICAgIHRyeSB7XG5cdCAgICAgIGVsZW1lbnQuc3R5bGVbc3R5bGVdID0gc3R5bGVzW3N0eWxlXSArIChcblx0ICAgICAgICAgICd8d2lkdGh8aGVpZ2h0fHRvcHxsZWZ0fCcuaW5kZXhPZihzdHlsZSkgPiAwICYmXG5cdCAgICAgICAgICB0eXBlb2Ygc3R5bGVzW3N0eWxlXSA9PT0gJ251bWJlcidcblx0ICAgICAgICAgICAgPyAncHgnIDogJydcblx0ICAgICAgICApO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdH1cblxuXHQvKipcblx0ICogQ1JFQVRFXG5cdCAqID09PT09PVxuXHQgKiB2YXIgb2JqID0gY3JlYXRlKCdkaXYnKTtcblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZShlbGVtZW50KSB7XG5cdCAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGdldF9obWFjX1NIQTI1NihkYXRhLCBrZXkpIHtcblx0ICB2YXIgaGFzaCA9IENyeXB0b0pTWydIbWFjU0hBMjU2J10oZGF0YSwga2V5KTtcblx0ICByZXR1cm4gaGFzaC50b1N0cmluZyhDcnlwdG9KU1snZW5jJ11bJ0Jhc2U2NCddKTtcblx0fVxuXG5cdC8qID0tPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0tPSAqL1xuXHQvKiA9LT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09LT0gKi9cblx0LyogPS09PT09PT09PT09PT09PT09PT09PT09PT09ICAgICBQVUJOVUIgICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PS09ICovXG5cdC8qID0tPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0tPSAqL1xuXHQvKiA9LT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09LT0gKi9cblxuXHRmdW5jdGlvbiBDUkVBVEVfUFVCTlVCKHNldHVwKSB7XG5cdCAgc2V0dXAuZGIgPSBkYjtcblx0ICBzZXR1cC54ZHIgPSB4ZHI7XG5cdCAgc2V0dXAuZXJyb3IgPSBzZXR1cC5lcnJvciB8fCBlcnJvcjtcblx0ICBzZXR1cC5obWFjX1NIQTI1NiA9IGdldF9obWFjX1NIQTI1Njtcblx0ICBzZXR1cC5jcnlwdG9fb2JqID0gY3J5cHRvX29iaigpO1xuXHQgIHNldHVwLldTID0gV1M7XG5cdCAgc2V0dXAuc2RrX2ZhbWlseSA9ICdNb2Rlcm4nO1xuXG5cdCAgdmFyIFNFTEYgPSBmdW5jdGlvbiAoc2V0dXApIHtcblx0ICAgIHJldHVybiBDUkVBVEVfUFVCTlVCKHNldHVwKTtcblx0ICB9O1xuXG5cdCAgdmFyIFBOID0gcHViTnViQ29yZS5QTl9BUEkoc2V0dXApO1xuXHQgIGZvciAodmFyIHByb3AgaW4gUE4pIHtcblx0ICAgIGlmIChQTi5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuXHQgICAgICBTRUxGW3Byb3BdID0gUE5bcHJvcF07XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgU0VMRi5pbml0ID0gU0VMRjtcblx0ICBTRUxGLiQgPSAkO1xuXHQgIFNFTEYuYXR0ciA9IGF0dHI7XG5cdCAgU0VMRi5zZWFyY2ggPSBzZWFyY2g7XG5cdCAgU0VMRi5iaW5kID0gYmluZDtcblx0ICBTRUxGLmNzcyA9IGNzcztcblx0ICBTRUxGLmNyZWF0ZSA9IGNyZWF0ZTtcblx0ICBTRUxGLmNyeXB0b19vYmogPSBjcnlwdG9fb2JqKCk7XG5cdCAgU0VMRi5XUyA9IFdTO1xuXHQgIFNFTEYuUE5tZXNzYWdlID0gcHViTnViQ29yZS5QTm1lc3NhZ2U7XG5cdCAgU0VMRi5zdXBwbGFudCA9IHB1Yk51YkNvcmUuc3VwcGxhbnQ7XG5cblx0ICBpZiAodHlwZW9mKHdpbmRvdykgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICBiaW5kKCdiZWZvcmV1bmxvYWQnLCB3aW5kb3csIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgU0VMRlsnZWFjaC1jaGFubmVsJ10oZnVuY3Rpb24gKGNoKSB7XG5cdCAgICAgICAgU0VMRlsnTEVBVkUnXShjaC5uYW1lLCAxKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSk7XG5cdCAgfVxuXG5cdCAgU0VMRi5yZWFkeSgpO1xuXG5cdCAgLy8gUmV0dXJuIHdpdGhvdXQgVGVzdGluZ1xuXHQgIGlmIChzZXR1cC5ub3Rlc3QpIHJldHVybiBTRUxGO1xuXG5cdCAgaWYgKHR5cGVvZih3aW5kb3cpICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgYmluZCgnb2ZmbGluZScsIHdpbmRvdywgU0VMRlsnb2ZmbGluZSddKTtcblx0ICB9XG5cblx0ICBpZiAodHlwZW9mKGRvY3VtZW50KSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGJpbmQoJ29mZmxpbmUnLCBkb2N1bWVudCwgU0VMRlsnb2ZmbGluZSddKTtcblx0ICB9XG5cblx0ICByZXR1cm4gU0VMRjtcblx0fVxuXG5cdENSRUFURV9QVUJOVUIuaW5pdCA9IENSRUFURV9QVUJOVUI7XG5cdENSRUFURV9QVUJOVUIuc2VjdXJlID0gQ1JFQVRFX1BVQk5VQjtcblx0Q1JFQVRFX1BVQk5VQi5jcnlwdG9fb2JqID0gY3J5cHRvX29iaigpO1xuXHRDUkVBVEVfUFVCTlVCLldTID0gV1M7XG5cdENSRUFURV9QVUJOVUIuZGIgPSBkYjtcblx0Q1JFQVRFX1BVQk5VQi5QTm1lc3NhZ2UgPSBwdWJOdWJDb3JlLlBObWVzc2FnZTtcblx0Q1JFQVRFX1BVQk5VQi51dWlkID0gcHViTnViQ29yZS51dWlkO1xuXG5cdENSRUFURV9QVUJOVUIuY3NzID0gY3NzO1xuXHRDUkVBVEVfUFVCTlVCLiQgPSAkO1xuXHRDUkVBVEVfUFVCTlVCLmNyZWF0ZSA9ICQ7XG5cdENSRUFURV9QVUJOVUIuYmluZCA9IGJpbmQ7XG5cdENSRUFURV9QVUJOVUIuc2VhcmNoID0gc2VhcmNoO1xuXHRDUkVBVEVfUFVCTlVCLmF0dHIgPSBhdHRyO1xuXHRDUkVBVEVfUFVCTlVCLmV2ZW50cyA9IGV2ZW50cztcblxuXHRDUkVBVEVfUFVCTlVCLm1hcCA9IHB1Yk51YkNvcmUubWFwO1xuXHRDUkVBVEVfUFVCTlVCLmVhY2ggPSBwdWJOdWJDb3JlLmVhY2g7XG5cdENSRUFURV9QVUJOVUIuZ3JlcCA9IHB1Yk51YkNvcmUuZ3JlcDtcblx0Q1JFQVRFX1BVQk5VQi5zdXBwbGFudCA9IHB1Yk51YkNvcmUuc3VwcGxhbnQ7XG5cdENSRUFURV9QVUJOVUIubm93ID0gcHViTnViQ29yZS5ub3c7XG5cdENSRUFURV9QVUJOVUIudW5pcXVlID0gcHViTnViQ29yZS51bmlxdWU7XG5cdENSRUFURV9QVUJOVUIudXBkYXRlciA9IHB1Yk51YkNvcmUudXBkYXRlcjtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IENSRUFURV9QVUJOVUI7XG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIGVzbGludCBjYW1lbGNhc2U6IDAsIG5vLXVzZS1iZWZvcmUtZGVmaW5lOiAwLCBuby11bnVzZWQtZXhwcmVzc2lvbnM6IDAgICovXG5cdC8qIGVzbGludCBlcWVxZXE6IDAsIG9uZS12YXI6IDAgKi9cblx0LyogZXNsaW50IG5vLXJlZGVjbGFyZTogMCAqL1xuXHQvKiBlc2xpbnQgZ3VhcmQtZm9yLWluOiAwICovXG5cdC8qIGVzbGludCBibG9jay1zY29wZWQtdmFyOiAwIHNwYWNlLXJldHVybi10aHJvdy1jYXNlOiAwLCBuby11bnVzZWQtdmFyczogMCAqL1xuXG5cdHZhciBwYWNrYWdlSlNPTiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBkZWZhdWx0Q29uZmlndXJhdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cblx0dmFyIE5PVyA9IDE7XG5cdHZhciBSRUFEWSA9IGZhbHNlO1xuXHR2YXIgUkVBRFlfQlVGRkVSID0gW107XG5cdHZhciBQUkVTRU5DRV9TVUZGSVggPSAnLXBucHJlcyc7XG5cdHZhciBERUZfV0lORE9XSU5HID0gMTA7IC8vIE1JTExJU0VDT05EUy5cblx0dmFyIERFRl9USU1FT1VUID0gMTUwMDA7IC8vIE1JTExJU0VDT05EUy5cblx0dmFyIERFRl9TVUJfVElNRU9VVCA9IDMxMDsgLy8gU0VDT05EUy5cblx0dmFyIERFRl9LRUVQQUxJVkUgPSA2MDsgLy8gU0VDT05EUyAoRk9SIFRJTUVTWU5DKS5cblx0dmFyIFNFQ09ORCA9IDEwMDA7IC8vIEEgVEhPVVNBTkQgTUlMTElTRUNPTkRTLlxuXHR2YXIgUFJFU0VOQ0VfSEJfVEhSRVNIT0xEID0gNTtcblx0dmFyIFBSRVNFTkNFX0hCX0RFRkFVTFQgPSAzMDtcblx0dmFyIFNES19WRVIgPSBwYWNrYWdlSlNPTi52ZXJzaW9uO1xuXG5cdC8qKlxuXHQgKiBVVElMSVRJRVNcblx0ICovXG5cdGZ1bmN0aW9uIHVuaXF1ZSgpIHtcblx0ICByZXR1cm4gJ3gnICsgKytOT1cgKyAnJyArICgrbmV3IERhdGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIE5FWFRPUklHSU5cblx0ICogPT09PT09PT09PVxuXHQgKiB2YXIgbmV4dF9vcmlnaW4gPSBuZXh0b3JpZ2luKCk7XG5cdCAqL1xuXHR2YXIgbmV4dG9yaWdpbiA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIG1heCA9IDIwO1xuXHQgIHZhciBvcmkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpO1xuXHQgIHJldHVybiBmdW5jdGlvbiAob3JpZ2luLCBmYWlsb3Zlcikge1xuXHQgICAgcmV0dXJuIG9yaWdpbi5pbmRleE9mKCdwdWJzdWIuJykgPiAwXG5cdCAgICAgICYmIG9yaWdpbi5yZXBsYWNlKFxuXHQgICAgICAgICdwdWJzdWInLCAncHMnICsgKFxuXHQgICAgICAgICAgZmFpbG92ZXIgPyB1dGlscy5nZW5lcmF0ZVVVSUQoKS5zcGxpdCgnLScpWzBdIDpcblx0ICAgICAgICAgICAgKCsrb3JpIDwgbWF4ID8gb3JpIDogb3JpID0gMSlcblx0ICAgICAgICApKSB8fCBvcmlnaW47XG5cdCAgfTtcblx0fSkoKTtcblxuXG5cdC8qKlxuXHQgKiBHZW5lcmF0ZSBTdWJzY3JpcHRpb24gQ2hhbm5lbCBMaXN0XG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0ICogZ2VuZXJhdGVfY2hhbm5lbF9saXN0KGNoYW5uZWxzX29iamVjdCk7XG5cdCAqL1xuXHRmdW5jdGlvbiBnZW5lcmF0ZV9jaGFubmVsX2xpc3QoY2hhbm5lbHMsIG5vcHJlc2VuY2UpIHtcblx0ICB2YXIgbGlzdCA9IFtdO1xuXHQgIHV0aWxzLmVhY2goY2hhbm5lbHMsIGZ1bmN0aW9uIChjaGFubmVsLCBzdGF0dXMpIHtcblx0ICAgIGlmIChub3ByZXNlbmNlKSB7XG5cdCAgICAgIGlmIChjaGFubmVsLnNlYXJjaCgnLXBucHJlcycpIDwgMCkge1xuXHQgICAgICAgIGlmIChzdGF0dXMuc3Vic2NyaWJlZCkgbGlzdC5wdXNoKGNoYW5uZWwpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoc3RhdHVzLnN1YnNjcmliZWQpIGxpc3QucHVzaChjaGFubmVsKTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gbGlzdC5zb3J0KCk7XG5cdH1cblxuXHQvKipcblx0ICogR2VuZXJhdGUgU3Vic2NyaXB0aW9uIENoYW5uZWwgR3JvdXBzIExpc3Rcblx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQgKiBnZW5lcmF0ZV9jaGFubmVsX2dyb3VwX2xpc3QoY2hhbm5lbHNfZ3JvdXBzIG9iamVjdCk7XG5cdCAqL1xuXHRmdW5jdGlvbiBnZW5lcmF0ZV9jaGFubmVsX2dyb3VwX2xpc3QoY2hhbm5lbF9ncm91cHMsIG5vcHJlc2VuY2UpIHtcblx0ICB2YXIgbGlzdCA9IFtdO1xuXHQgIHV0aWxzLmVhY2goY2hhbm5lbF9ncm91cHMsIGZ1bmN0aW9uIChjaGFubmVsX2dyb3VwLCBzdGF0dXMpIHtcblx0ICAgIGlmIChub3ByZXNlbmNlKSB7XG5cdCAgICAgIGlmIChjaGFubmVsX2dyb3VwLnNlYXJjaCgnLXBucHJlcycpIDwgMCkge1xuXHQgICAgICAgIGlmIChzdGF0dXMuc3Vic2NyaWJlZCkgbGlzdC5wdXNoKGNoYW5uZWxfZ3JvdXApO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoc3RhdHVzLnN1YnNjcmliZWQpIGxpc3QucHVzaChjaGFubmVsX2dyb3VwKTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gbGlzdC5zb3J0KCk7XG5cdH1cblxuXHQvLyBQVUJOVUIgUkVBRFkgVE8gQ09OTkVDVFxuXHRmdW5jdGlvbiByZWFkeSgpIHtcblx0ICBpZiAoUkVBRFkpIHJldHVybjtcblx0ICBSRUFEWSA9IDE7XG5cdCAgdXRpbHMuZWFjaChSRUFEWV9CVUZGRVIsIGZ1bmN0aW9uIChjb25uZWN0KSB7XG5cdCAgICBjb25uZWN0KCk7XG5cdCAgfSk7XG5cdH1cblxuXHRmdW5jdGlvbiBQTm1lc3NhZ2UoYXJncykge1xuXHQgIHZhciBtc2cgPSBhcmdzIHx8IHsgYXBuczoge30gfTtcblxuXHQgIG1zZ1snZ2V0UHVibnViTWVzc2FnZSddID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG0gPSB7fTtcblxuXHQgICAgaWYgKE9iamVjdC5rZXlzKG1zZ1snYXBucyddKS5sZW5ndGgpIHtcblx0ICAgICAgbVsncG5fYXBucyddID0ge1xuXHQgICAgICAgIGFwczoge1xuXHQgICAgICAgICAgYWxlcnQ6IG1zZ1snYXBucyddWydhbGVydCddLFxuXHQgICAgICAgICAgYmFkZ2U6IG1zZ1snYXBucyddWydiYWRnZSddLFxuXHQgICAgICAgICAgc291bmQ6IG1zZ1snYXBucyddWydzb3VuZCddXG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgICBmb3IgKHZhciBrIGluIG1zZ1snYXBucyddKSB7XG5cdCAgICAgICAgbVsncG5fYXBucyddW2tdID0gbXNnWydhcG5zJ11ba107XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGV4Y2x1ZGUxID0gWydiYWRnZScsICdhbGVydCcsICdzb3VuZCddO1xuXHQgICAgICBmb3IgKHZhciBrIGluIGV4Y2x1ZGUxKSB7XG5cdCAgICAgICAgZGVsZXRlIG1bJ3BuX2FwbnMnXVtleGNsdWRlMVtrXV07XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgaWYgKG1zZ1snZ2NtJ10pIHtcblx0ICAgICAgbVsncG5fZ2NtJ10gPSB7XG5cdCAgICAgICAgZGF0YTogbXNnWydnY20nXVxuXHQgICAgICB9O1xuXHQgICAgfVxuXG5cdCAgICBmb3IgKHZhciBrIGluIG1zZykge1xuXHQgICAgICBtW2tdID0gbXNnW2tdO1xuXHQgICAgfVxuXHQgICAgdmFyIGV4Y2x1ZGUgPSBbJ2FwbnMnLCAnZ2NtJywgJ3B1Ymxpc2gnLCAnY2hhbm5lbCcsICdjYWxsYmFjaycsICdlcnJvciddO1xuXHQgICAgZm9yICh2YXIgayBpbiBleGNsdWRlKSB7XG5cdCAgICAgIGRlbGV0ZSBtW2V4Y2x1ZGVba11dO1xuXHQgICAgfVxuXG5cdCAgICByZXR1cm4gbTtcblx0ICB9O1xuXHQgIG1zZ1sncHVibGlzaCddID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG0gPSBtc2cuZ2V0UHVibnViTWVzc2FnZSgpO1xuXG5cdCAgICBpZiAobXNnWydwdWJudWInXSAmJiBtc2dbJ2NoYW5uZWwnXSkge1xuXHQgICAgICBtc2dbJ3B1Ym51YiddLnB1Ymxpc2goe1xuXHQgICAgICAgIG1lc3NhZ2U6IG0sXG5cdCAgICAgICAgY2hhbm5lbDogbXNnWydjaGFubmVsJ10sXG5cdCAgICAgICAgY2FsbGJhY2s6IG1zZ1snY2FsbGJhY2snXSxcblx0ICAgICAgICBlcnJvcjogbXNnWydlcnJvciddXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgcmV0dXJuIG1zZztcblx0fVxuXG5cdGZ1bmN0aW9uIFBOX0FQSShzZXR1cCkge1xuXHQgIHZhciBTVUJfV0lORE9XSU5HID0gK3NldHVwWyd3aW5kb3dpbmcnXSB8fCBERUZfV0lORE9XSU5HO1xuXHQgIHZhciBTVUJfVElNRU9VVCA9ICgrc2V0dXBbJ3RpbWVvdXQnXSB8fCBERUZfU1VCX1RJTUVPVVQpICogU0VDT05EO1xuXHQgIHZhciBLRUVQQUxJVkUgPSAoK3NldHVwWydrZWVwYWxpdmUnXSB8fCBERUZfS0VFUEFMSVZFKSAqIFNFQ09ORDtcblx0ICB2YXIgVElNRV9DSEVDSyA9IHNldHVwWyd0aW1lY2hlY2snXSB8fCAwO1xuXHQgIHZhciBOT0xFQVZFID0gc2V0dXBbJ25vbGVhdmUnXSB8fCAwO1xuXHQgIHZhciBQVUJMSVNIX0tFWSA9IHNldHVwWydwdWJsaXNoX2tleSddO1xuXHQgIHZhciBTVUJTQ1JJQkVfS0VZID0gc2V0dXBbJ3N1YnNjcmliZV9rZXknXTtcblx0ICB2YXIgQVVUSF9LRVkgPSBzZXR1cFsnYXV0aF9rZXknXSB8fCAnJztcblx0ICB2YXIgU0VDUkVUX0tFWSA9IHNldHVwWydzZWNyZXRfa2V5J10gfHwgJyc7XG5cdCAgdmFyIGhtYWNfU0hBMjU2ID0gc2V0dXBbJ2htYWNfU0hBMjU2J107XG5cdCAgdmFyIFNTTCA9IHNldHVwWydzc2wnXSA/ICdzJyA6ICcnO1xuXHQgIHZhciBPUklHSU4gPSAnaHR0cCcgKyBTU0wgKyAnOi8vJyArIChzZXR1cFsnb3JpZ2luJ10gfHwgJ3B1YnN1Yi5wdWJudWIuY29tJyk7XG5cdCAgdmFyIFNURF9PUklHSU4gPSBuZXh0b3JpZ2luKE9SSUdJTik7XG5cdCAgdmFyIFNVQl9PUklHSU4gPSBuZXh0b3JpZ2luKE9SSUdJTik7XG5cdCAgdmFyIENPTk5FQ1QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgfTtcblx0ICB2YXIgUFVCX1FVRVVFID0gW107XG5cdCAgdmFyIENMT0FLID0gdHJ1ZTtcblx0ICB2YXIgVElNRV9EUklGVCA9IDA7XG5cdCAgdmFyIFNVQl9DQUxMQkFDSyA9IDA7XG5cdCAgdmFyIFNVQl9DSEFOTkVMID0gMDtcblx0ICB2YXIgU1VCX1JFQ0VJVkVSID0gMDtcblx0ICB2YXIgU1VCX1JFU1RPUkUgPSBzZXR1cFsncmVzdG9yZSddIHx8IDA7XG5cdCAgdmFyIFNVQl9CVUZGX1dBSVQgPSAwO1xuXHQgIHZhciBUSU1FVE9LRU4gPSAwO1xuXHQgIHZhciBSRVNVTUVEID0gZmFsc2U7XG5cdCAgdmFyIENIQU5ORUxTID0ge307XG5cdCAgdmFyIENIQU5ORUxfR1JPVVBTID0ge307XG5cdCAgdmFyIFNVQl9FUlJPUiA9IGZ1bmN0aW9uICgpIHtcblx0ICB9O1xuXHQgIHZhciBTVEFURSA9IHt9O1xuXHQgIHZhciBQUkVTRU5DRV9IQl9USU1FT1VUID0gbnVsbDtcblx0ICB2YXIgUFJFU0VOQ0VfSEIgPSB2YWxpZGF0ZV9wcmVzZW5jZV9oZWFydGJlYXQoXG5cdCAgICBzZXR1cFsnaGVhcnRiZWF0J10gfHwgc2V0dXBbJ3BuZXhwaXJlcyddIHx8IDAsIHNldHVwWydlcnJvciddXG5cdCAgKTtcblx0ICB2YXIgUFJFU0VOQ0VfSEJfSU5URVJWQUwgPSBzZXR1cFsnaGVhcnRiZWF0X2ludGVydmFsJ10gfHwgKFBSRVNFTkNFX0hCIC8gMikgLSAxO1xuXHQgIHZhciBQUkVTRU5DRV9IQl9SVU5OSU5HID0gZmFsc2U7XG5cdCAgdmFyIE5PX1dBSVRfRk9SX1BFTkRJTkcgPSBzZXR1cFsnbm9fd2FpdF9mb3JfcGVuZGluZyddO1xuXHQgIHZhciBDT01QQVRJQkxFXzM1ID0gc2V0dXBbJ2NvbXBhdGlibGVfMy41J10gfHwgZmFsc2U7XG5cdCAgdmFyIHhkciA9IHNldHVwWyd4ZHInXTtcblx0ICB2YXIgcGFyYW1zID0gc2V0dXBbJ3BhcmFtcyddIHx8IHt9O1xuXHQgIHZhciBlcnJvciA9IHNldHVwWydlcnJvciddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgIHZhciBfaXNfb25saW5lID0gc2V0dXBbJ19pc19vbmxpbmUnXSB8fCBmdW5jdGlvbiAoKSB7IHJldHVybiAxO307XG5cdCAgdmFyIGpzb25wX2NiID0gc2V0dXBbJ2pzb25wX2NiJ10gfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gMDsgfTtcblx0ICB2YXIgZGIgPSBzZXR1cFsnZGInXSB8fCB7IGdldDogZnVuY3Rpb24gKCkge30sIHNldDogZnVuY3Rpb24gKCkge30gfTtcblx0ICB2YXIgQ0lQSEVSX0tFWSA9IHNldHVwWydjaXBoZXJfa2V5J107XG5cdCAgdmFyIFVVSUQgPSBzZXR1cFsndXVpZCddIHx8ICghc2V0dXBbJ3VuaXF1ZV91dWlkJ10gJiYgZGIgJiYgZGJbJ2dldCddKFNVQlNDUklCRV9LRVkgKyAndXVpZCcpIHx8ICcnKTtcblx0ICB2YXIgVVNFX0lOU1RBTkNFSUQgPSBzZXR1cFsnaW5zdGFuY2VfaWQnXSB8fCBmYWxzZTtcblx0ICB2YXIgUEFSVE5FUl9JRCA9IHNldHVwWydwYXJ0bmVyX2lkJ107XG5cdCAgdmFyIFNES19GQU1JTFkgPSBzZXR1cFsnc2RrX2ZhbWlseSddO1xuXHQgIHZhciBJTlNUQU5DRUlEID0gJyc7XG5cdCAgdmFyIHNodXRkb3duID0gc2V0dXBbJ3NodXRkb3duJ107XG5cdCAgdmFyIHVzZV9zZW5kX2JlYWNvbiA9ICh0eXBlb2Ygc2V0dXBbJ3VzZV9zZW5kX2JlYWNvbiddICE9ICd1bmRlZmluZWQnKSA/IHNldHVwWyd1c2Vfc2VuZF9iZWFjb24nXSA6IHRydWU7XG5cdCAgdmFyIHNlbmRCZWFjb24gPSAodXNlX3NlbmRfYmVhY29uKSA/IHNldHVwWydzZW5kQmVhY29uJ10gOiBudWxsO1xuXHQgIHZhciBfcG9sbF90aW1lcjtcblx0ICB2YXIgX3BvbGxfdGltZXIyO1xuXG5cdCAgaWYgKFBSRVNFTkNFX0hCID09PSAyKSBQUkVTRU5DRV9IQl9JTlRFUlZBTCA9IDE7XG5cblx0ICB2YXIgY3J5cHRvX29iaiA9IHNldHVwWydjcnlwdG9fb2JqJ10gfHwge1xuXHQgICAgZW5jcnlwdDogZnVuY3Rpb24gKGEsIGtleSkge1xuXHQgICAgICByZXR1cm4gYTtcblx0ICAgIH0sXG5cdCAgICBkZWNyeXB0OiBmdW5jdGlvbiAoYiwga2V5KSB7XG5cdCAgICAgIHJldHVybiBiO1xuXHQgICAgfVxuXHQgIH07XG5cblx0ICBmdW5jdGlvbiBfcHJlcGFyZUNsaWVudElkZW50aWZpZXIoKSB7XG5cdCAgICB2YXIgYmFzZSA9ICdQdWJOdWItSlMtJyArIFNES19GQU1JTFk7XG5cblx0ICAgIGlmIChQQVJUTkVSX0lEKSB7XG5cdCAgICAgIGJhc2UgKz0gJy0nICsgUEFSVE5FUl9JRDtcblx0ICAgIH1cblxuXHQgICAgYmFzZSArPSAnLycgKyBTREtfVkVSO1xuXHQgICAgcmV0dXJuIGJhc2U7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gX2dldF91cmxfcGFyYW1zKGRhdGEpIHtcblx0ICAgIGlmICghZGF0YSkgZGF0YSA9IHt9O1xuXHQgICAgdXRpbHMuZWFjaChwYXJhbXMsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgIGlmICghKGtleSBpbiBkYXRhKSkgZGF0YVtrZXldID0gdmFsdWU7XG5cdCAgICB9KTtcblxuXHQgICAgLy8gYWRkIFBOU0RLIHRvIHRoZSBtaXguXG5cdCAgICBkYXRhLnBuc2RrID0gX3ByZXBhcmVDbGllbnRJZGVudGlmaWVyKCk7XG5cblx0ICAgIHJldHVybiBkYXRhO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIF9vYmplY3RfdG9fa2V5X2xpc3Qobykge1xuXHQgICAgdmFyIGwgPSBbXTtcblx0ICAgIHV0aWxzLmVhY2gobywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICAgICAgbC5wdXNoKGtleSk7XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBsO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIF9vYmplY3RfdG9fa2V5X2xpc3Rfc29ydGVkKG8pIHtcblx0ICAgIHJldHVybiBfb2JqZWN0X3RvX2tleV9saXN0KG8pLnNvcnQoKTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBfZ2V0X3BhbV9zaWduX2lucHV0X2Zyb21fcGFyYW1zKHBhcmFtcykge1xuXHQgICAgdmFyIHNpID0gJyc7XG5cdCAgICB2YXIgbCA9IF9vYmplY3RfdG9fa2V5X2xpc3Rfc29ydGVkKHBhcmFtcyk7XG5cblx0ICAgIGZvciAodmFyIGkgaW4gbCkge1xuXHQgICAgICB2YXIgayA9IGxbaV07XG5cdCAgICAgIHNpICs9IGsgKyAnPScgKyB1dGlscy5wYW1FbmNvZGUocGFyYW1zW2tdKTtcblx0ICAgICAgaWYgKGkgIT0gbC5sZW5ndGggLSAxKSBzaSArPSAnJic7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc2k7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gdmFsaWRhdGVfcHJlc2VuY2VfaGVhcnRiZWF0KGhlYXJ0YmVhdCwgY3VyX2hlYXJ0YmVhdCwgZXJyb3IpIHtcblx0ICAgIHZhciBlcnIgPSBmYWxzZTtcblxuXHQgICAgaWYgKHR5cGVvZiBoZWFydGJlYXQgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIHJldHVybiBjdXJfaGVhcnRiZWF0O1xuXHQgICAgfVxuXG5cdCAgICBpZiAodHlwZW9mIGhlYXJ0YmVhdCA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgaWYgKGhlYXJ0YmVhdCA+IFBSRVNFTkNFX0hCX1RIUkVTSE9MRCB8fCBoZWFydGJlYXQgPT0gMCkge1xuXHQgICAgICAgIGVyciA9IGZhbHNlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGVyciA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIGhlYXJ0YmVhdCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICAgIGlmICghaGVhcnRiZWF0KSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIFBSRVNFTkNFX0hCX0RFRkFVTFQ7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVyciA9IHRydWU7XG5cdCAgICB9XG5cblx0ICAgIGlmIChlcnIpIHtcblx0ICAgICAgZXJyb3IgJiYgZXJyb3IoJ1ByZXNlbmNlIEhlYXJ0YmVhdCB2YWx1ZSBpbnZhbGlkLiBWYWxpZCByYW5nZSAoIHggPiAnICsgUFJFU0VOQ0VfSEJfVEhSRVNIT0xEICsgJyBvciB4ID0gMCkuIEN1cnJlbnQgVmFsdWUgOiAnICsgKGN1cl9oZWFydGJlYXQgfHwgUFJFU0VOQ0VfSEJfVEhSRVNIT0xEKSk7XG5cdCAgICAgIHJldHVybiBjdXJfaGVhcnRiZWF0IHx8IFBSRVNFTkNFX0hCX1RIUkVTSE9MRDtcblx0ICAgIH0gZWxzZSByZXR1cm4gaGVhcnRiZWF0O1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGVuY3J5cHQoaW5wdXQsIGtleSkge1xuXHQgICAgcmV0dXJuIGNyeXB0b19vYmpbJ2VuY3J5cHQnXShpbnB1dCwga2V5IHx8IENJUEhFUl9LRVkpIHx8IGlucHV0O1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGRlY3J5cHQoaW5wdXQsIGtleSkge1xuXHQgICAgcmV0dXJuIGNyeXB0b19vYmpbJ2RlY3J5cHQnXShpbnB1dCwga2V5IHx8IENJUEhFUl9LRVkpIHx8XG5cdCAgICAgIGNyeXB0b19vYmpbJ2RlY3J5cHQnXShpbnB1dCwgQ0lQSEVSX0tFWSkgfHxcblx0ICAgICAgaW5wdXQ7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gZXJyb3JfY29tbW9uKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG5cdCAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7IGVycm9yOiBtZXNzYWdlIHx8ICdlcnJvciBvY2N1cnJlZCcgfSk7XG5cdCAgICBlcnJvciAmJiBlcnJvcihtZXNzYWdlKTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBfcHJlc2VuY2VfaGVhcnRiZWF0KCkge1xuXHQgICAgY2xlYXJUaW1lb3V0KFBSRVNFTkNFX0hCX1RJTUVPVVQpO1xuXG5cdCAgICBpZiAoIVBSRVNFTkNFX0hCX0lOVEVSVkFMIHx8IFBSRVNFTkNFX0hCX0lOVEVSVkFMID49IDUwMCB8fFxuXHQgICAgICBQUkVTRU5DRV9IQl9JTlRFUlZBTCA8IDEgfHxcblx0ICAgICAgKCFnZW5lcmF0ZV9jaGFubmVsX2xpc3QoQ0hBTk5FTFMsIHRydWUpLmxlbmd0aCAmJiAhZ2VuZXJhdGVfY2hhbm5lbF9ncm91cF9saXN0KENIQU5ORUxfR1JPVVBTLCB0cnVlKS5sZW5ndGgpKSB7XG5cdCAgICAgIFBSRVNFTkNFX0hCX1JVTk5JTkcgPSBmYWxzZTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXG5cdCAgICBQUkVTRU5DRV9IQl9SVU5OSU5HID0gdHJ1ZTtcblx0ICAgIFNFTEZbJ3ByZXNlbmNlX2hlYXJ0YmVhdCddKHtcblx0ICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgUFJFU0VOQ0VfSEJfVElNRU9VVCA9IHV0aWxzLnRpbWVvdXQoX3ByZXNlbmNlX2hlYXJ0YmVhdCwgKFBSRVNFTkNFX0hCX0lOVEVSVkFMKSAqIFNFQ09ORCk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGVycm9yICYmIGVycm9yKCdQcmVzZW5jZSBIZWFydGJlYXQgdW5hYmxlIHRvIHJlYWNoIFB1Ym51YiBzZXJ2ZXJzLicgKyBKU09OLnN0cmluZ2lmeShlKSk7XG5cdCAgICAgICAgUFJFU0VOQ0VfSEJfVElNRU9VVCA9IHV0aWxzLnRpbWVvdXQoX3ByZXNlbmNlX2hlYXJ0YmVhdCwgKFBSRVNFTkNFX0hCX0lOVEVSVkFMKSAqIFNFQ09ORCk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIHN0YXJ0X3ByZXNlbmNlX2hlYXJ0YmVhdCgpIHtcblx0ICAgICFQUkVTRU5DRV9IQl9SVU5OSU5HICYmIF9wcmVzZW5jZV9oZWFydGJlYXQoKTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBwdWJsaXNoKG5leHQpIHtcblx0ICAgIGlmIChOT19XQUlUX0ZPUl9QRU5ESU5HKSB7XG5cdCAgICAgIGlmICghUFVCX1FVRVVFLmxlbmd0aCkgcmV0dXJuO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKG5leHQpIFBVQl9RVUVVRS5zZW5kaW5nID0gMDtcblx0ICAgICAgaWYgKFBVQl9RVUVVRS5zZW5kaW5nIHx8ICFQVUJfUVVFVUUubGVuZ3RoKSByZXR1cm47XG5cdCAgICAgIFBVQl9RVUVVRS5zZW5kaW5nID0gMTtcblx0ICAgIH1cblxuXHQgICAgZXhlY3V0ZVJlcXVlc3QoUFVCX1FVRVVFLnNoaWZ0KCkpO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGVhY2hfY2hhbm5lbF9ncm91cChjYWxsYmFjaykge1xuXHQgICAgdmFyIGNvdW50ID0gMDtcblxuXHQgICAgdXRpbHMuZWFjaChnZW5lcmF0ZV9jaGFubmVsX2dyb3VwX2xpc3QoQ0hBTk5FTF9HUk9VUFMpLCBmdW5jdGlvbiAoY2hhbm5lbF9ncm91cCkge1xuXHQgICAgICB2YXIgY2hhbmcgPSBDSEFOTkVMX0dST1VQU1tjaGFubmVsX2dyb3VwXTtcblxuXHQgICAgICBpZiAoIWNoYW5nKSByZXR1cm47XG5cblx0ICAgICAgY291bnQrKztcblx0ICAgICAgKGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgfSkoY2hhbmcpO1xuXHQgICAgfSk7XG5cblx0ICAgIHJldHVybiBjb3VudDtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBlYWNoX2NoYW5uZWwoY2FsbGJhY2spIHtcblx0ICAgIHZhciBjb3VudCA9IDA7XG5cblx0ICAgIHV0aWxzLmVhY2goZ2VuZXJhdGVfY2hhbm5lbF9saXN0KENIQU5ORUxTKSwgZnVuY3Rpb24gKGNoYW5uZWwpIHtcblx0ICAgICAgdmFyIGNoYW4gPSBDSEFOTkVMU1tjaGFubmVsXTtcblxuXHQgICAgICBpZiAoIWNoYW4pIHJldHVybjtcblxuXHQgICAgICBjb3VudCsrO1xuXHQgICAgICAoY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge1xuXHQgICAgICB9KShjaGFuKTtcblx0ICAgIH0pO1xuXG5cdCAgICByZXR1cm4gY291bnQ7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gX2ludm9rZV9jYWxsYmFjayhyZXNwb25zZSwgY2FsbGJhY2ssIGVycikge1xuXHQgICAgaWYgKHR5cGVvZiByZXNwb25zZSA9PSAnb2JqZWN0Jykge1xuXHQgICAgICBpZiAocmVzcG9uc2VbJ2Vycm9yJ10pIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2tfZGF0YSA9IHt9O1xuXG5cdCAgICAgICAgaWYgKHJlc3BvbnNlWydtZXNzYWdlJ10pIHtcblx0ICAgICAgICAgIGNhbGxiYWNrX2RhdGFbJ21lc3NhZ2UnXSA9IHJlc3BvbnNlWydtZXNzYWdlJ107XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgaWYgKHJlc3BvbnNlWydwYXlsb2FkJ10pIHtcblx0ICAgICAgICAgIGNhbGxiYWNrX2RhdGFbJ3BheWxvYWQnXSA9IHJlc3BvbnNlWydwYXlsb2FkJ107XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgZXJyICYmIGVycihjYWxsYmFja19kYXRhKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHJlc3BvbnNlWydwYXlsb2FkJ10pIHtcblx0ICAgICAgICBpZiAocmVzcG9uc2VbJ25leHRfcGFnZSddKSB7XG5cdCAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZVsncGF5bG9hZCddLCByZXNwb25zZVsnbmV4dF9wYWdlJ10pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZVsncGF5bG9hZCddKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gX2ludm9rZV9lcnJvcihyZXNwb25zZSwgZXJyKSB7XG5cdCAgICBpZiAodHlwZW9mIHJlc3BvbnNlID09ICdvYmplY3QnICYmIHJlc3BvbnNlWydlcnJvciddKSB7XG5cdCAgICAgIHZhciBjYWxsYmFja19kYXRhID0ge307XG5cblx0ICAgICAgaWYgKHJlc3BvbnNlWydtZXNzYWdlJ10pIHtcblx0ICAgICAgICBjYWxsYmFja19kYXRhWydtZXNzYWdlJ10gPSByZXNwb25zZVsnbWVzc2FnZSddO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKHJlc3BvbnNlWydwYXlsb2FkJ10pIHtcblx0ICAgICAgICBjYWxsYmFja19kYXRhWydwYXlsb2FkJ10gPSByZXNwb25zZVsncGF5bG9hZCddO1xuXHQgICAgICB9XG5cblx0ICAgICAgZXJyICYmIGVycihjYWxsYmFja19kYXRhKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZXJyICYmIGVycihyZXNwb25zZSk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgLypcblx0ICAgIEFic3RyYWN0aW9uIG92ZXIgWEhSIHRvIGFsbG93IGNvbW1vbiBwYXJhbWV0ZXIgbW9kaWZpY2F0aW9uIGJlZm9yZVxuXHQgICAgZGlzcGF0Y2hpbmcgdG8gdGhlIG5ldHdvcmtpbmcgbGF5ZXIuXG5cdCAgKi9cblx0ICBmdW5jdGlvbiBleGVjdXRlUmVxdWVzdChyZXF1ZXN0Q29uZmlnKSB7XG5cdCAgICB2YXIgb3BlcmF0aW9uVHlwZSA9IHJlcXVlc3RDb25maWdbJ29wZXJhdGlvbiddO1xuXHQgICAgdmFyIHRpbWVzdGFtcCA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcblx0ICAgIHZhciByZXF1ZXN0RGF0YSA9IHJlcXVlc3RDb25maWdbJ2RhdGEnXSB8fCB7fTtcblxuXHQgICAgaWYgKFNFQ1JFVF9LRVkpIHtcblx0ICAgICAgLy8gZGVsZXRlIHRoZSBhdXRoIGtleSBpZiBpdCBjb21lcyB1cCBlbXB0eS5cblx0ICAgICAgaWYgKCFyZXF1ZXN0RGF0YVsnYXV0aCddKSB7XG5cdCAgICAgICAgZGVsZXRlIHJlcXVlc3REYXRhWydhdXRoJ107XG5cdCAgICAgIH1cblxuXHQgICAgICByZXF1ZXN0RGF0YVsndGltZXN0YW1wJ10gPSB0aW1lc3RhbXA7XG5cdCAgICAgIHZhciBzaWduSW5wdXQgPSBTVUJTQ1JJQkVfS0VZICsgJ1xcbicgKyBQVUJMSVNIX0tFWSArICdcXG4nO1xuXG5cdCAgICAgIGlmIChvcGVyYXRpb25UeXBlID09PSAnUE5BY2Nlc3NNYW5hZ2VyR3JhbnQnKSB7XG5cdCAgICAgICAgc2lnbklucHV0ICs9ICdncmFudCcgKyAnXFxuJztcblx0ICAgICAgfSBlbHNlIGlmIChvcGVyYXRpb25UeXBlID09PSAnUE5BY2Nlc3NNYW5hZ2VyQXVkaXQnKSB7XG5cdCAgICAgICAgc2lnbklucHV0ICs9ICdhdWRpdCcgKyAnXFxuJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgbmV3UGF0aCA9IHJlcXVlc3RDb25maWdbJ3VybCddLnNsaWNlKCk7XG5cdCAgICAgICAgbmV3UGF0aC5zaGlmdCgpO1xuXHQgICAgICAgIHNpZ25JbnB1dCArPSAnLycgKyBuZXdQYXRoLmpvaW4oJy8nKSArICdcXG4nO1xuXHQgICAgICB9XG5cblx0ICAgICAgc2lnbklucHV0ICs9IF9nZXRfcGFtX3NpZ25faW5wdXRfZnJvbV9wYXJhbXMocmVxdWVzdERhdGEpO1xuXHQgICAgICB2YXIgc2lnbmF0dXJlID0gaG1hY19TSEEyNTYoc2lnbklucHV0LCBTRUNSRVRfS0VZKTtcblxuXHQgICAgICBzaWduYXR1cmUgPSBzaWduYXR1cmUucmVwbGFjZSgvXFwrL2csICctJyk7XG5cdCAgICAgIHNpZ25hdHVyZSA9IHNpZ25hdHVyZS5yZXBsYWNlKC9cXC8vZywgJ18nKTtcblxuXHQgICAgICByZXF1ZXN0RGF0YVsnc2lnbmF0dXJlJ10gPSBzaWduYXR1cmU7XG5cdCAgICAgIHJlcXVlc3RDb25maWdbJ2RhdGEnXSA9IHJlcXVlc3REYXRhO1xuXHQgICAgfVxuXG5cdCAgICByZXR1cm4geGRyKHJlcXVlc3RDb25maWcpO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIENSKGFyZ3MsIGNhbGxiYWNrLCB1cmwxLCBkYXRhKSB7XG5cdCAgICB2YXIgY2FsbGJhY2sgPSBhcmdzWydjYWxsYmFjayddIHx8IGNhbGxiYWNrO1xuXHQgICAgdmFyIGVyciA9IGFyZ3NbJ2Vycm9yJ10gfHwgZXJyb3I7XG5cdCAgICB2YXIganNvbnAgPSBqc29ucF9jYigpO1xuXG5cdCAgICBkYXRhID0gZGF0YSB8fCB7fTtcblxuXHQgICAgaWYgKCFkYXRhWydhdXRoJ10pIHtcblx0ICAgICAgZGF0YVsnYXV0aCddID0gYXJnc1snYXV0aF9rZXknXSB8fCBBVVRIX0tFWTtcblx0ICAgIH1cblxuXHQgICAgdmFyIHVybCA9IFtcblx0ICAgICAgU1REX09SSUdJTiwgJ3YxJywgJ2NoYW5uZWwtcmVnaXN0cmF0aW9uJyxcblx0ICAgICAgJ3N1Yi1rZXknLCBTVUJTQ1JJQkVfS0VZXG5cdCAgICBdO1xuXG5cdCAgICB1cmwucHVzaC5hcHBseSh1cmwsIHVybDEpO1xuXG5cdCAgICBpZiAoanNvbnApIGRhdGFbJ2NhbGxiYWNrJ10gPSBqc29ucDtcblxuXHQgICAgZXhlY3V0ZVJlcXVlc3Qoe1xuXHQgICAgICBjYWxsYmFjazoganNvbnAsXG5cdCAgICAgIGRhdGE6IF9nZXRfdXJsX3BhcmFtcyhkYXRhKSxcblx0ICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgX2ludm9rZV9jYWxsYmFjayhyZXNwb25zZSwgY2FsbGJhY2ssIGVycik7XG5cdCAgICAgIH0sXG5cdCAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgIF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIGVycik7XG5cdCAgICAgIH0sXG5cdCAgICAgIHVybDogdXJsXG5cdCAgICB9KTtcblx0ICB9XG5cblx0ICAvLyBBbm5vdW5jZSBMZWF2ZSBFdmVudFxuXHQgIHZhciBTRUxGID0ge1xuXHQgICAgTEVBVkU6IGZ1bmN0aW9uIChjaGFubmVsLCBibG9ja2luZywgYXV0aF9rZXksIGNhbGxiYWNrLCBlcnJvcikge1xuXHQgICAgICB2YXIgZGF0YSA9IHsgdXVpZDogVVVJRCwgYXV0aDogYXV0aF9rZXkgfHwgQVVUSF9LRVkgfTtcblx0ICAgICAgdmFyIG9yaWdpbiA9IG5leHRvcmlnaW4oT1JJR0lOKTtcblx0ICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge307XG5cdCAgICAgIHZhciBlcnIgPSBlcnJvciB8fCBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgdmFyIHVybDtcblx0ICAgICAgdmFyIHBhcmFtcztcblx0ICAgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblxuXHQgICAgICAvLyBQcmV2ZW50IExlYXZpbmcgYSBQcmVzZW5jZSBDaGFubmVsXG5cdCAgICAgIGlmIChjaGFubmVsLmluZGV4T2YoUFJFU0VOQ0VfU1VGRklYKSA+IDApIHJldHVybiB0cnVlO1xuXG5cblx0ICAgICAgaWYgKENPTVBBVElCTEVfMzUpIHtcblx0ICAgICAgICBpZiAoIVNTTCkgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIGlmIChqc29ucCA9PSAnMCcpIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmIChOT0xFQVZFKSByZXR1cm4gZmFsc2U7XG5cblx0ICAgICAgaWYgKGpzb25wICE9ICcwJykgZGF0YVsnY2FsbGJhY2snXSA9IGpzb25wO1xuXG5cdCAgICAgIGlmIChVU0VfSU5TVEFOQ0VJRCkgZGF0YVsnaW5zdGFuY2VpZCddID0gSU5TVEFOQ0VJRDtcblxuXHQgICAgICB1cmwgPSBbXG5cdCAgICAgICAgb3JpZ2luLCAndjInLCAncHJlc2VuY2UnLCAnc3ViX2tleScsXG5cdCAgICAgICAgU1VCU0NSSUJFX0tFWSwgJ2NoYW5uZWwnLCB1dGlscy5lbmNvZGUoY2hhbm5lbCksICdsZWF2ZSdcblx0ICAgICAgXTtcblxuXHQgICAgICBwYXJhbXMgPSBfZ2V0X3VybF9wYXJhbXMoZGF0YSk7XG5cblxuXHQgICAgICBpZiAoc2VuZEJlYWNvbikge1xuXHQgICAgICAgIHZhciB1cmxfc3RyaW5nID0gdXRpbHMuYnVpbGRVUkwodXJsLCBwYXJhbXMpO1xuXHQgICAgICAgIGlmIChzZW5kQmVhY29uKHVybF9zdHJpbmcpKSB7XG5cdCAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7IHN0YXR1czogMjAwLCBhY3Rpb246ICdsZWF2ZScsIG1lc3NhZ2U6ICdPSycsIHNlcnZpY2U6ICdQcmVzZW5jZScgfSk7XG5cdCAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblxuXG5cdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0ICAgICAgICBibG9ja2luZzogYmxvY2tpbmcgfHwgU1NMLFxuXHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0ICAgICAgICBkYXRhOiBwYXJhbXMsXG5cdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgICAgX2ludm9rZV9lcnJvcihyZXNwb25zZSwgZXJyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHVybDogdXJsXG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0sXG5cblx0ICAgIExFQVZFX0dST1VQOiBmdW5jdGlvbiAoY2hhbm5lbF9ncm91cCwgYmxvY2tpbmcsIGF1dGhfa2V5LCBjYWxsYmFjaywgZXJyb3IpIHtcblx0ICAgICAgdmFyIGRhdGEgPSB7IHV1aWQ6IFVVSUQsIGF1dGg6IGF1dGhfa2V5IHx8IEFVVEhfS0VZIH07XG5cdCAgICAgIHZhciBvcmlnaW4gPSBuZXh0b3JpZ2luKE9SSUdJTik7XG5cdCAgICAgIHZhciB1cmw7XG5cdCAgICAgIHZhciBwYXJhbXM7XG5cdCAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgICB2YXIgZXJyID0gZXJyb3IgfHwgZnVuY3Rpb24gKCkge307XG5cdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cblx0ICAgICAgLy8gUHJldmVudCBMZWF2aW5nIGEgUHJlc2VuY2UgQ2hhbm5lbCBHcm91cFxuXHQgICAgICBpZiAoY2hhbm5lbF9ncm91cC5pbmRleE9mKFBSRVNFTkNFX1NVRkZJWCkgPiAwKSByZXR1cm4gdHJ1ZTtcblxuXHQgICAgICBpZiAoQ09NUEFUSUJMRV8zNSkge1xuXHQgICAgICAgIGlmICghU1NMKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgaWYgKGpzb25wID09ICcwJykgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKE5PTEVBVkUpIHJldHVybiBmYWxzZTtcblxuXHQgICAgICBpZiAoanNvbnAgIT0gJzAnKSBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cblx0ICAgICAgaWYgKGNoYW5uZWxfZ3JvdXAgJiYgY2hhbm5lbF9ncm91cC5sZW5ndGggPiAwKSBkYXRhWydjaGFubmVsLWdyb3VwJ10gPSBjaGFubmVsX2dyb3VwO1xuXG5cdCAgICAgIGlmIChVU0VfSU5TVEFOQ0VJRCkgZGF0YVsnaW5zdGFuY2VpZCddID0gSU5TVEFOQ0VJRDtcblxuXHQgICAgICB1cmwgPSBbXG5cdCAgICAgICAgb3JpZ2luLCAndjInLCAncHJlc2VuY2UnLCAnc3ViX2tleScsXG5cdCAgICAgICAgU1VCU0NSSUJFX0tFWSwgJ2NoYW5uZWwnLCB1dGlscy5lbmNvZGUoJywnKSwgJ2xlYXZlJ1xuXHQgICAgICBdO1xuXG5cdCAgICAgIHBhcmFtcyA9IF9nZXRfdXJsX3BhcmFtcyhkYXRhKTtcblxuXHQgICAgICBpZiAoc2VuZEJlYWNvbikge1xuXHQgICAgICAgIHZhciB1cmxfc3RyaW5nID0gdXRpbHMuYnVpbGRVUkwodXJsLCBwYXJhbXMpO1xuXHQgICAgICAgIGlmIChzZW5kQmVhY29uKHVybF9zdHJpbmcpKSB7XG5cdCAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7IHN0YXR1czogMjAwLCBhY3Rpb246ICdsZWF2ZScsIG1lc3NhZ2U6ICdPSycsIHNlcnZpY2U6ICdQcmVzZW5jZScgfSk7XG5cdCAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblxuXHQgICAgICBleGVjdXRlUmVxdWVzdCh7XG5cdCAgICAgICAgYmxvY2tpbmc6IGJsb2NraW5nIHx8IFNTTCxcblx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdCAgICAgICAgZGF0YTogcGFyYW1zLFxuXHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgICAgX2ludm9rZV9jYWxsYmFjayhyZXNwb25zZSwgY2FsbGJhY2ssIGVycik7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICAgIF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIGVycik7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICB1cmw6IHVybFxuXHQgICAgICB9KTtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9LFxuXG5cdCAgICBzZXRfcmVzdW1lZDogZnVuY3Rpb24gKHJlc3VtZWQpIHtcblx0ICAgICAgUkVTVU1FRCA9IHJlc3VtZWQ7XG5cdCAgICB9LFxuXG5cdCAgICBnZXRfY2lwaGVyX2tleTogZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gQ0lQSEVSX0tFWTtcblx0ICAgIH0sXG5cblx0ICAgIHNldF9jaXBoZXJfa2V5OiBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIENJUEhFUl9LRVkgPSBrZXk7XG5cdCAgICB9LFxuXG5cdCAgICByYXdfZW5jcnlwdDogZnVuY3Rpb24gKGlucHV0LCBrZXkpIHtcblx0ICAgICAgcmV0dXJuIGVuY3J5cHQoaW5wdXQsIGtleSk7XG5cdCAgICB9LFxuXG5cdCAgICByYXdfZGVjcnlwdDogZnVuY3Rpb24gKGlucHV0LCBrZXkpIHtcblx0ICAgICAgcmV0dXJuIGRlY3J5cHQoaW5wdXQsIGtleSk7XG5cdCAgICB9LFxuXG5cdCAgICBnZXRfaGVhcnRiZWF0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBQUkVTRU5DRV9IQjtcblx0ICAgIH0sXG5cblx0ICAgIHNldF9oZWFydGJlYXQ6IGZ1bmN0aW9uIChoZWFydGJlYXQsIGhlYXJ0YmVhdF9pbnRlcnZhbCkge1xuXHQgICAgICBQUkVTRU5DRV9IQiA9IHZhbGlkYXRlX3ByZXNlbmNlX2hlYXJ0YmVhdChoZWFydGJlYXQsIFBSRVNFTkNFX0hCLCBlcnJvcik7XG5cdCAgICAgIFBSRVNFTkNFX0hCX0lOVEVSVkFMID0gaGVhcnRiZWF0X2ludGVydmFsIHx8IChQUkVTRU5DRV9IQiAvIDIpIC0gMTtcblx0ICAgICAgaWYgKFBSRVNFTkNFX0hCID09IDIpIHtcblx0ICAgICAgICBQUkVTRU5DRV9IQl9JTlRFUlZBTCA9IDE7XG5cdCAgICAgIH1cblx0ICAgICAgQ09OTkVDVCgpO1xuXHQgICAgICBfcHJlc2VuY2VfaGVhcnRiZWF0KCk7XG5cdCAgICB9LFxuXG5cdCAgICBnZXRfaGVhcnRiZWF0X2ludGVydmFsOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBQUkVTRU5DRV9IQl9JTlRFUlZBTDtcblx0ICAgIH0sXG5cblx0ICAgIHNldF9oZWFydGJlYXRfaW50ZXJ2YWw6IGZ1bmN0aW9uIChoZWFydGJlYXRfaW50ZXJ2YWwpIHtcblx0ICAgICAgUFJFU0VOQ0VfSEJfSU5URVJWQUwgPSBoZWFydGJlYXRfaW50ZXJ2YWw7XG5cdCAgICAgIF9wcmVzZW5jZV9oZWFydGJlYXQoKTtcblx0ICAgIH0sXG5cblx0ICAgIGdldF92ZXJzaW9uOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBTREtfVkVSO1xuXHQgICAgfSxcblxuXHQgICAgZ2V0R2NtTWVzc2FnZU9iamVjdDogZnVuY3Rpb24gKG9iaikge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGRhdGE6IG9ialxuXHQgICAgICB9O1xuXHQgICAgfSxcblxuXHQgICAgZ2V0QXBuc01lc3NhZ2VPYmplY3Q6IGZ1bmN0aW9uIChvYmopIHtcblx0ICAgICAgdmFyIHggPSB7XG5cdCAgICAgICAgYXBzOiB7IGJhZGdlOiAxLCBhbGVydDogJycgfVxuXHQgICAgICB9O1xuXHQgICAgICBmb3IgKHZhciBrIGluIG9iaikge1xuXHQgICAgICAgIGtbeF0gPSBvYmpba107XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHg7XG5cdCAgICB9LFxuXG5cdCAgICBfYWRkX3BhcmFtOiBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcblx0ICAgICAgcGFyYW1zW2tleV0gPSB2YWw7XG5cdCAgICB9LFxuXG5cdCAgICBjaGFubmVsX2dyb3VwOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIG5zX2NoID0gYXJnc1snY2hhbm5lbF9ncm91cCddO1xuXHQgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBhcmdzWydjYWxsYmFjayddO1xuXHQgICAgICB2YXIgY2hhbm5lbHMgPSBhcmdzWydjaGFubmVscyddIHx8IGFyZ3NbJ2NoYW5uZWwnXTtcblx0ICAgICAgdmFyIGNsb2FrID0gYXJnc1snY2xvYWsnXTtcblx0ICAgICAgdmFyIG5hbWVzcGFjZTtcblx0ICAgICAgdmFyIGNoYW5uZWxfZ3JvdXA7XG5cdCAgICAgIHZhciB1cmwgPSBbXTtcblx0ICAgICAgdmFyIGRhdGEgPSB7fTtcblx0ICAgICAgdmFyIG1vZGUgPSBhcmdzWydtb2RlJ10gfHwgJ2FkZCc7XG5cblxuXHQgICAgICBpZiAobnNfY2gpIHtcblx0ICAgICAgICB2YXIgbnNfY2hfYSA9IG5zX2NoLnNwbGl0KCc6Jyk7XG5cblx0ICAgICAgICBpZiAobnNfY2hfYS5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgICBuYW1lc3BhY2UgPSAobnNfY2hfYVswXSA9PT0gJyonKSA/IG51bGwgOiBuc19jaF9hWzBdO1xuXG5cdCAgICAgICAgICBjaGFubmVsX2dyb3VwID0gbnNfY2hfYVsxXTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY2hhbm5lbF9ncm91cCA9IG5zX2NoX2FbMF07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cblx0ICAgICAgbmFtZXNwYWNlICYmIHVybC5wdXNoKCduYW1lc3BhY2UnKSAmJiB1cmwucHVzaCh1dGlscy5lbmNvZGUobmFtZXNwYWNlKSk7XG5cblx0ICAgICAgdXJsLnB1c2goJ2NoYW5uZWwtZ3JvdXAnKTtcblxuXHQgICAgICBpZiAoY2hhbm5lbF9ncm91cCAmJiBjaGFubmVsX2dyb3VwICE9PSAnKicpIHtcblx0ICAgICAgICB1cmwucHVzaChjaGFubmVsX2dyb3VwKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmIChjaGFubmVscykge1xuXHQgICAgICAgIGlmICh1dGlscy5pc0FycmF5KGNoYW5uZWxzKSkge1xuXHQgICAgICAgICAgY2hhbm5lbHMgPSBjaGFubmVscy5qb2luKCcsJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRhdGFbbW9kZV0gPSBjaGFubmVscztcblx0ICAgICAgICBkYXRhWydjbG9hayddID0gKENMT0FLKSA/ICd0cnVlJyA6ICdmYWxzZSc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKG1vZGUgPT09ICdyZW1vdmUnKSB1cmwucHVzaCgncmVtb3ZlJyk7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAodHlwZW9mIGNsb2FrICE9ICd1bmRlZmluZWQnKSBkYXRhWydjbG9hayddID0gKGNsb2FrKSA/ICd0cnVlJyA6ICdmYWxzZSc7XG5cblx0ICAgICAgQ1IoYXJncywgY2FsbGJhY2ssIHVybCwgZGF0YSk7XG5cdCAgICB9LFxuXG5cdCAgICBjaGFubmVsX2dyb3VwX2xpc3RfZ3JvdXBzOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIG5hbWVzcGFjZTtcblxuXHQgICAgICBuYW1lc3BhY2UgPSBhcmdzWyduYW1lc3BhY2UnXSB8fCBhcmdzWyducyddIHx8IGFyZ3NbJ2NoYW5uZWxfZ3JvdXAnXSB8fCBudWxsO1xuXHQgICAgICBpZiAobmFtZXNwYWNlKSB7XG5cdCAgICAgICAgYXJnc1snY2hhbm5lbF9ncm91cCddID0gbmFtZXNwYWNlICsgJzoqJztcblx0ICAgICAgfVxuXG5cdCAgICAgIFNFTEZbJ2NoYW5uZWxfZ3JvdXAnXShhcmdzLCBjYWxsYmFjayk7XG5cdCAgICB9LFxuXG5cdCAgICBjaGFubmVsX2dyb3VwX2xpc3RfY2hhbm5lbHM6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHQgICAgICBpZiAoIWFyZ3NbJ2NoYW5uZWxfZ3JvdXAnXSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENoYW5uZWwgR3JvdXAnKTtcblx0ICAgICAgU0VMRlsnY2hhbm5lbF9ncm91cCddKGFyZ3MsIGNhbGxiYWNrKTtcblx0ICAgIH0sXG5cblx0ICAgIGNoYW5uZWxfZ3JvdXBfcmVtb3ZlX2NoYW5uZWw6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHQgICAgICBpZiAoIWFyZ3NbJ2NoYW5uZWxfZ3JvdXAnXSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENoYW5uZWwgR3JvdXAnKTtcblx0ICAgICAgaWYgKCFhcmdzWydjaGFubmVsJ10gJiYgIWFyZ3NbJ2NoYW5uZWxzJ10pIHJldHVybiBlcnJvcignTWlzc2luZyBDaGFubmVsJyk7XG5cblx0ICAgICAgYXJnc1snbW9kZSddID0gJ3JlbW92ZSc7XG5cdCAgICAgIFNFTEZbJ2NoYW5uZWxfZ3JvdXAnXShhcmdzLCBjYWxsYmFjayk7XG5cdCAgICB9LFxuXG5cdCAgICBjaGFubmVsX2dyb3VwX3JlbW92ZV9ncm91cDogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdCAgICAgIGlmICghYXJnc1snY2hhbm5lbF9ncm91cCddKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2hhbm5lbCBHcm91cCcpO1xuXHQgICAgICBpZiAoYXJnc1snY2hhbm5lbCddKSByZXR1cm4gZXJyb3IoJ1VzZSBjaGFubmVsX2dyb3VwX3JlbW92ZV9jaGFubmVsIGlmIHlvdSB3YW50IHRvIHJlbW92ZSBhIGNoYW5uZWwgZnJvbSBhIGdyb3VwLicpO1xuXG5cdCAgICAgIGFyZ3NbJ21vZGUnXSA9ICdyZW1vdmUnO1xuXHQgICAgICBTRUxGWydjaGFubmVsX2dyb3VwJ10oYXJncywgY2FsbGJhY2spO1xuXHQgICAgfSxcblxuXHQgICAgY2hhbm5lbF9ncm91cF9hZGRfY2hhbm5lbDogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdCAgICAgIGlmICghYXJnc1snY2hhbm5lbF9ncm91cCddKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2hhbm5lbCBHcm91cCcpO1xuXHQgICAgICBpZiAoIWFyZ3NbJ2NoYW5uZWwnXSAmJiAhYXJnc1snY2hhbm5lbHMnXSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENoYW5uZWwnKTtcblx0ICAgICAgU0VMRlsnY2hhbm5lbF9ncm91cCddKGFyZ3MsIGNhbGxiYWNrKTtcblx0ICAgIH0sXG5cblx0ICAgIGNoYW5uZWxfZ3JvdXBfY2xvYWs6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHQgICAgICBpZiAodHlwZW9mIGFyZ3NbJ2Nsb2FrJ10gPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICBjYWxsYmFjayhDTE9BSyk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIENMT0FLID0gYXJnc1snY2xvYWsnXTtcblx0ICAgICAgU0VMRlsnY2hhbm5lbF9ncm91cCddKGFyZ3MsIGNhbGxiYWNrKTtcblx0ICAgIH0sXG5cblx0ICAgIGNoYW5uZWxfZ3JvdXBfbGlzdF9uYW1lc3BhY2VzOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIHVybCA9IFsnbmFtZXNwYWNlJ107XG5cdCAgICAgIENSKGFyZ3MsIGNhbGxiYWNrLCB1cmwpO1xuXHQgICAgfSxcblxuXHQgICAgY2hhbm5lbF9ncm91cF9yZW1vdmVfbmFtZXNwYWNlOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIHVybCA9IFsnbmFtZXNwYWNlJywgYXJnc1snbmFtZXNwYWNlJ10sICdyZW1vdmUnXTtcblx0ICAgICAgQ1IoYXJncywgY2FsbGJhY2ssIHVybCk7XG5cdCAgICB9LFxuXG5cdCAgICAvKlxuXHQgICAgIFBVQk5VQi5oaXN0b3J5KHtcblx0ICAgICBjaGFubmVsICA6ICdteV9jaGF0X2NoYW5uZWwnLFxuXHQgICAgIGxpbWl0ICAgIDogMTAwLFxuXHQgICAgIGNhbGxiYWNrIDogZnVuY3Rpb24oaGlzdG9yeSkgeyB9XG5cdCAgICAgfSk7XG5cdCAgICAgKi9cblx0ICAgIGhpc3Rvcnk6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHQgICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzWydjYWxsYmFjayddIHx8IGNhbGxiYWNrO1xuXHQgICAgICB2YXIgY291bnQgPSBhcmdzWydjb3VudCddIHx8IGFyZ3NbJ2xpbWl0J10gfHwgMTAwO1xuXHQgICAgICB2YXIgcmV2ZXJzZSA9IGFyZ3NbJ3JldmVyc2UnXSB8fCAnZmFsc2UnO1xuXHQgICAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgdmFyIGF1dGhfa2V5ID0gYXJnc1snYXV0aF9rZXknXSB8fCBBVVRIX0tFWTtcblx0ICAgICAgdmFyIGNpcGhlcl9rZXkgPSBhcmdzWydjaXBoZXJfa2V5J107XG5cdCAgICAgIHZhciBjaGFubmVsID0gYXJnc1snY2hhbm5lbCddO1xuXHQgICAgICB2YXIgY2hhbm5lbF9ncm91cCA9IGFyZ3NbJ2NoYW5uZWxfZ3JvdXAnXTtcblx0ICAgICAgdmFyIHN0YXJ0ID0gYXJnc1snc3RhcnQnXTtcblx0ICAgICAgdmFyIGVuZCA9IGFyZ3NbJ2VuZCddO1xuXHQgICAgICB2YXIgaW5jbHVkZV90b2tlbiA9IGFyZ3NbJ2luY2x1ZGVfdG9rZW4nXTtcblx0ICAgICAgdmFyIHN0cmluZ19tc2dfdG9rZW4gPSBhcmdzWydzdHJpbmdfbWVzc2FnZV90b2tlbiddIHx8IGZhbHNlO1xuXHQgICAgICB2YXIgcGFyYW1zID0ge307XG5cdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cblx0ICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBDaGFubmVsXG5cdCAgICAgIGlmICghY2hhbm5lbCAmJiAhY2hhbm5lbF9ncm91cCkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENoYW5uZWwnKTtcblx0ICAgICAgaWYgKCFjYWxsYmFjaykgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENhbGxiYWNrJyk7XG5cdCAgICAgIGlmICghU1VCU0NSSUJFX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFN1YnNjcmliZSBLZXknKTtcblxuXHQgICAgICBwYXJhbXNbJ3N0cmluZ3Rva2VuJ10gPSAndHJ1ZSc7XG5cdCAgICAgIHBhcmFtc1snY291bnQnXSA9IGNvdW50O1xuXHQgICAgICBwYXJhbXNbJ3JldmVyc2UnXSA9IHJldmVyc2U7XG5cdCAgICAgIHBhcmFtc1snYXV0aCddID0gYXV0aF9rZXk7XG5cblx0ICAgICAgaWYgKGNoYW5uZWxfZ3JvdXApIHtcblx0ICAgICAgICBwYXJhbXNbJ2NoYW5uZWwtZ3JvdXAnXSA9IGNoYW5uZWxfZ3JvdXA7XG5cdCAgICAgICAgaWYgKCFjaGFubmVsKSB7XG5cdCAgICAgICAgICBjaGFubmVsID0gJywnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAoanNvbnApIHBhcmFtc1snY2FsbGJhY2snXSA9IGpzb25wO1xuXHQgICAgICBpZiAoc3RhcnQpIHBhcmFtc1snc3RhcnQnXSA9IHN0YXJ0O1xuXHQgICAgICBpZiAoZW5kKSBwYXJhbXNbJ2VuZCddID0gZW5kO1xuXHQgICAgICBpZiAoaW5jbHVkZV90b2tlbikgcGFyYW1zWydpbmNsdWRlX3Rva2VuJ10gPSAndHJ1ZSc7XG5cdCAgICAgIGlmIChzdHJpbmdfbXNnX3Rva2VuKSBwYXJhbXNbJ3N0cmluZ19tZXNzYWdlX3Rva2VuJ10gPSAndHJ1ZSc7XG5cblx0ICAgICAgLy8gU2VuZCBNZXNzYWdlXG5cdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdCAgICAgICAgZGF0YTogX2dldF91cmxfcGFyYW1zKHBhcmFtcyksXG5cdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlID09ICdvYmplY3QnICYmIHJlc3BvbnNlWydlcnJvciddKSB7XG5cdCAgICAgICAgICAgIGVycih7IG1lc3NhZ2U6IHJlc3BvbnNlWydtZXNzYWdlJ10sIHBheWxvYWQ6IHJlc3BvbnNlWydwYXlsb2FkJ10gfSk7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHZhciBtZXNzYWdlcyA9IHJlc3BvbnNlWzBdO1xuXHQgICAgICAgICAgdmFyIGRlY3J5cHRlZF9tZXNzYWdlcyA9IFtdO1xuXHQgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBtZXNzYWdlcy5sZW5ndGg7IGErKykge1xuXHQgICAgICAgICAgICBpZiAoaW5jbHVkZV90b2tlbikge1xuXHQgICAgICAgICAgICAgIHZhciBuZXdfbWVzc2FnZSA9IGRlY3J5cHQobWVzc2FnZXNbYV1bJ21lc3NhZ2UnXSwgY2lwaGVyX2tleSk7XG5cdCAgICAgICAgICAgICAgdmFyIHRpbWV0b2tlbiA9IG1lc3NhZ2VzW2FdWyd0aW1ldG9rZW4nXTtcblx0ICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgZGVjcnlwdGVkX21lc3NhZ2VzWydwdXNoJ10oeyBtZXNzYWdlOiBKU09OWydwYXJzZSddKG5ld19tZXNzYWdlKSwgdGltZXRva2VuOiB0aW1ldG9rZW4gfSk7XG5cdCAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgZGVjcnlwdGVkX21lc3NhZ2VzWydwdXNoJ10oKHsgbWVzc2FnZTogbmV3X21lc3NhZ2UsIHRpbWV0b2tlbjogdGltZXRva2VuIH0pKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdmFyIG5ld19tZXNzYWdlID0gZGVjcnlwdChtZXNzYWdlc1thXSwgY2lwaGVyX2tleSk7XG5cdCAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIGRlY3J5cHRlZF9tZXNzYWdlc1sncHVzaCddKEpTT05bJ3BhcnNlJ10obmV3X21lc3NhZ2UpKTtcblx0ICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICBkZWNyeXB0ZWRfbWVzc2FnZXNbJ3B1c2gnXSgobmV3X21lc3NhZ2UpKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNhbGxiYWNrKFtkZWNyeXB0ZWRfbWVzc2FnZXMsIHJlc3BvbnNlWzFdLCByZXNwb25zZVsyXV0pO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBfaW52b2tlX2Vycm9yKHJlc3BvbnNlLCBlcnIpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdXJsOiBbXG5cdCAgICAgICAgICBTVERfT1JJR0lOLCAndjInLCAnaGlzdG9yeScsICdzdWIta2V5Jyxcblx0ICAgICAgICAgIFNVQlNDUklCRV9LRVksICdjaGFubmVsJywgdXRpbHMuZW5jb2RlKGNoYW5uZWwpXG5cdCAgICAgICAgXVxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cblx0ICAgIC8qXG5cdCAgICAgUFVCTlVCLnJlcGxheSh7XG5cdCAgICAgc291cmNlICAgICAgOiAnbXlfY2hhbm5lbCcsXG5cdCAgICAgZGVzdGluYXRpb24gOiAnbmV3X2NoYW5uZWwnXG5cdCAgICAgfSk7XG5cdCAgICAgKi9cblx0ICAgIHJlcGxheTogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGFyZ3NbJ2NhbGxiYWNrJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdCAgICAgIHZhciBhdXRoX2tleSA9IGFyZ3NbJ2F1dGhfa2V5J10gfHwgQVVUSF9LRVk7XG5cdCAgICAgIHZhciBzb3VyY2UgPSBhcmdzWydzb3VyY2UnXTtcblx0ICAgICAgdmFyIGRlc3RpbmF0aW9uID0gYXJnc1snZGVzdGluYXRpb24nXTtcblx0ICAgICAgdmFyIGVyciA9IGFyZ3NbJ2Vycm9yJ10gfHwgYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgdmFyIHN0b3AgPSBhcmdzWydzdG9wJ107XG5cdCAgICAgIHZhciBzdGFydCA9IGFyZ3NbJ3N0YXJ0J107XG5cdCAgICAgIHZhciBlbmQgPSBhcmdzWydlbmQnXTtcblx0ICAgICAgdmFyIHJldmVyc2UgPSBhcmdzWydyZXZlcnNlJ107XG5cdCAgICAgIHZhciBsaW1pdCA9IGFyZ3NbJ2xpbWl0J107XG5cdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdCAgICAgIHZhciBkYXRhID0ge307XG5cdCAgICAgIHZhciB1cmw7XG5cblx0ICAgICAgLy8gQ2hlY2sgVXNlciBJbnB1dFxuXHQgICAgICBpZiAoIXNvdXJjZSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFNvdXJjZSBDaGFubmVsJyk7XG5cdCAgICAgIGlmICghZGVzdGluYXRpb24pIHJldHVybiBlcnJvcignTWlzc2luZyBEZXN0aW5hdGlvbiBDaGFubmVsJyk7XG5cdCAgICAgIGlmICghUFVCTElTSF9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBQdWJsaXNoIEtleScpO1xuXHQgICAgICBpZiAoIVNVQlNDUklCRV9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBTdWJzY3JpYmUgS2V5Jyk7XG5cblx0ICAgICAgLy8gU2V0dXAgVVJMIFBhcmFtc1xuXHQgICAgICBpZiAoanNvbnAgIT0gJzAnKSBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cdCAgICAgIGlmIChzdG9wKSBkYXRhWydzdG9wJ10gPSAnYWxsJztcblx0ICAgICAgaWYgKHJldmVyc2UpIGRhdGFbJ3JldmVyc2UnXSA9ICd0cnVlJztcblx0ICAgICAgaWYgKHN0YXJ0KSBkYXRhWydzdGFydCddID0gc3RhcnQ7XG5cdCAgICAgIGlmIChlbmQpIGRhdGFbJ2VuZCddID0gZW5kO1xuXHQgICAgICBpZiAobGltaXQpIGRhdGFbJ2NvdW50J10gPSBsaW1pdDtcblxuXHQgICAgICBkYXRhWydhdXRoJ10gPSBhdXRoX2tleTtcblxuXHQgICAgICAvLyBDb21wb3NlIFVSTCBQYXJ0c1xuXHQgICAgICB1cmwgPSBbXG5cdCAgICAgICAgU1REX09SSUdJTiwgJ3YxJywgJ3JlcGxheScsXG5cdCAgICAgICAgUFVCTElTSF9LRVksIFNVQlNDUklCRV9LRVksXG5cdCAgICAgICAgc291cmNlLCBkZXN0aW5hdGlvblxuXHQgICAgICBdO1xuXG5cdCAgICAgIC8vIFN0YXJ0IChvciBTdG9wKSBSZXBsYXkhXG5cdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrKFswLCAnRGlzY29ubmVjdGVkJ10pO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdXJsOiB1cmwsXG5cdCAgICAgICAgZGF0YTogX2dldF91cmxfcGFyYW1zKGRhdGEpXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblxuXHQgICAgLypcblx0ICAgICBQVUJOVUIuYXV0aCgnQUpGTEtBSlNES0xBJyk7XG5cdCAgICAgKi9cblx0ICAgIGF1dGg6IGZ1bmN0aW9uIChhdXRoKSB7XG5cdCAgICAgIEFVVEhfS0VZID0gYXV0aDtcblx0ICAgICAgQ09OTkVDVCgpO1xuXHQgICAgfSxcblxuXHQgICAgLypcblx0ICAgICBQVUJOVUIudGltZShmdW5jdGlvbih0aW1lKXsgfSk7XG5cdCAgICAgKi9cblx0ICAgIHRpbWU6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgICB2YXIganNvbnAgPSBqc29ucF9jYigpO1xuXG5cdCAgICAgIHZhciBkYXRhID0geyB1dWlkOiBVVUlELCBhdXRoOiBBVVRIX0tFWSB9O1xuXG5cdCAgICAgIGlmIChVU0VfSU5TVEFOQ0VJRCkgZGF0YVsnaW5zdGFuY2VpZCddID0gSU5TVEFOQ0VJRDtcblxuXHQgICAgICBleGVjdXRlUmVxdWVzdCh7XG5cdCAgICAgICAgY2FsbGJhY2s6IGpzb25wLFxuXHQgICAgICAgIGRhdGE6IF9nZXRfdXJsX3BhcmFtcyhkYXRhKSxcblx0ICAgICAgICB1cmw6IFtTVERfT1JJR0lOLCAndGltZScsIGpzb25wXSxcblx0ICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrKHJlc3BvbnNlWzBdKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrKDApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXG5cdCAgICAvKlxuXHQgICAgIFBVQk5VQi5wdWJsaXNoKHtcblx0ICAgICBjaGFubmVsIDogJ215X2NoYXRfY2hhbm5lbCcsXG5cdCAgICAgbWVzc2FnZSA6ICdoZWxsbyEnXG5cdCAgICAgfSk7XG5cdCAgICAgKi9cblx0ICAgIHB1Ymxpc2g6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHQgICAgICB2YXIgbXNnID0gYXJnc1snbWVzc2FnZSddO1xuXHQgICAgICBpZiAoIW1zZykgcmV0dXJuIGVycm9yKCdNaXNzaW5nIE1lc3NhZ2UnKTtcblxuXHQgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBhcmdzWydjYWxsYmFjayddIHx8IG1zZ1snY2FsbGJhY2snXSB8fCBhcmdzWydzdWNjZXNzJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdCAgICAgIHZhciBjaGFubmVsID0gYXJnc1snY2hhbm5lbCddIHx8IG1zZ1snY2hhbm5lbCddO1xuXHQgICAgICB2YXIgbWV0YSA9IGFyZ3NbJ21ldGEnXSB8fCBhcmdzWydtZXRhZGF0YSddO1xuXHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHQgICAgICB2YXIgY2lwaGVyX2tleSA9IGFyZ3NbJ2NpcGhlcl9rZXknXTtcblx0ICAgICAgdmFyIGVyciA9IGFyZ3NbJ2Vycm9yJ10gfHwgbXNnWydlcnJvciddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgICB2YXIgcG9zdCA9IGFyZ3NbJ3Bvc3QnXSB8fCBmYWxzZTtcblx0ICAgICAgdmFyIHN0b3JlID0gKCdzdG9yZV9pbl9oaXN0b3J5JyBpbiBhcmdzKSA/IGFyZ3NbJ3N0b3JlX2luX2hpc3RvcnknXSA6IHRydWU7XG5cdCAgICAgIHZhciByZXBsaWNhdGUgPSAoJ3JlcGxpY2F0ZScgaW4gYXJncykgPyBhcmdzWydyZXBsaWNhdGUnXSA6IHRydWU7XG5cdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdCAgICAgIHZhciBhZGRfbXNnID0gJ3B1c2gnO1xuXHQgICAgICB2YXIgcGFyYW1zO1xuXHQgICAgICB2YXIgdXJsO1xuXG5cdCAgICAgIGlmIChhcmdzWydwcmVwZW5kJ10pIGFkZF9tc2cgPSAndW5zaGlmdCc7XG5cblx0ICAgICAgaWYgKCFjaGFubmVsKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2hhbm5lbCcpO1xuXHQgICAgICBpZiAoIVBVQkxJU0hfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgUHVibGlzaCBLZXknKTtcblx0ICAgICAgaWYgKCFTVUJTQ1JJQkVfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU3Vic2NyaWJlIEtleScpO1xuXG5cdCAgICAgIGlmIChtc2dbJ2dldFB1Ym51Yk1lc3NhZ2UnXSkge1xuXHQgICAgICAgIG1zZyA9IG1zZ1snZ2V0UHVibnViTWVzc2FnZSddKCk7XG5cdCAgICAgIH1cblxuXHQgICAgICAvLyBJZiB0cnlpbmcgdG8gc2VuZCBPYmplY3Rcblx0ICAgICAgbXNnID0gSlNPTlsnc3RyaW5naWZ5J10oZW5jcnlwdChtc2csIGNpcGhlcl9rZXkpKTtcblxuXHQgICAgICAvLyBDcmVhdGUgVVJMXG5cdCAgICAgIHVybCA9IFtcblx0ICAgICAgICBTVERfT1JJR0lOLCAncHVibGlzaCcsXG5cdCAgICAgICAgUFVCTElTSF9LRVksIFNVQlNDUklCRV9LRVksXG5cdCAgICAgICAgMCwgdXRpbHMuZW5jb2RlKGNoYW5uZWwpLFxuXHQgICAgICAgIGpzb25wLCB1dGlscy5lbmNvZGUobXNnKVxuXHQgICAgICBdO1xuXG5cdCAgICAgIHBhcmFtcyA9IHsgdXVpZDogVVVJRCwgYXV0aDogYXV0aF9rZXkgfTtcblxuXHQgICAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBwYXJhbXNbJ21ldGEnXSA9IEpTT04uc3RyaW5naWZ5KG1ldGEpO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKCFzdG9yZSkgcGFyYW1zWydzdG9yZSddID0gJzAnO1xuXHQgICAgICBpZiAoIXJlcGxpY2F0ZSkgcGFyYW1zWydub3JlcCddID0gJ3RydWUnO1xuXG5cdCAgICAgIGlmIChVU0VfSU5TVEFOQ0VJRCkgcGFyYW1zWydpbnN0YW5jZWlkJ10gPSBJTlNUQU5DRUlEO1xuXG5cdCAgICAgIC8vIFF1ZXVlIE1lc3NhZ2UgU2VuZFxuXHQgICAgICBQVUJfUVVFVUVbYWRkX21zZ10oe1xuXHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0ICAgICAgICB1cmw6IHVybCxcblx0ICAgICAgICBkYXRhOiBfZ2V0X3VybF9wYXJhbXMocGFyYW1zKSxcblx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICAgIF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIGVycik7XG5cdCAgICAgICAgICBwdWJsaXNoKDEpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0ICAgICAgICAgIHB1Ymxpc2goMSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBtb2RlOiAocG9zdCkgPyAnUE9TVCcgOiAnR0VUJ1xuXHQgICAgICB9KTtcblxuXHQgICAgICAvLyBTZW5kIE1lc3NhZ2Vcblx0ICAgICAgcHVibGlzaCgpO1xuXHQgICAgfSxcblxuXHQgICAgZmlyZTogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdCAgICAgIGFyZ3Muc3RvcmVfaW5faGlzdG9yeSA9IGZhbHNlO1xuXHQgICAgICBhcmdzLnJlcGxpY2F0ZSA9IGZhbHNlO1xuXHQgICAgICBTRUxGWydwdWJsaXNoJ10oYXJncywgY2FsbGJhY2spO1xuXHQgICAgfSxcblxuXHQgICAgLypcblx0ICAgICBQVUJOVUIudW5zdWJzY3JpYmUoeyBjaGFubmVsIDogJ215X2NoYXQnIH0pO1xuXHQgICAgICovXG5cdCAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBjaGFubmVsQXJnID0gYXJnc1snY2hhbm5lbCddO1xuXHQgICAgICB2YXIgY2hhbm5lbEdyb3VwQXJnID0gYXJnc1snY2hhbm5lbF9ncm91cCddO1xuXHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHQgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBhcmdzWydjYWxsYmFjayddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblxuXHQgICAgICBpZiAoIWNoYW5uZWxBcmcgJiYgIWNoYW5uZWxHcm91cEFyZykgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENoYW5uZWwgb3IgQ2hhbm5lbCBHcm91cCcpO1xuXHQgICAgICBpZiAoIVNVQlNDUklCRV9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBTdWJzY3JpYmUgS2V5Jyk7XG5cblx0ICAgICAgaWYgKGNoYW5uZWxBcmcpIHtcblx0ICAgICAgICB2YXIgY2hhbm5lbHMgPSB1dGlscy5pc0FycmF5KGNoYW5uZWxBcmcpID8gY2hhbm5lbEFyZyA6ICgnJyArIGNoYW5uZWxBcmcpLnNwbGl0KCcsJyk7XG5cdCAgICAgICAgdmFyIGV4aXN0aW5nQ2hhbm5lbHMgPSBbXTtcblx0ICAgICAgICB2YXIgcHJlc2VuY2VDaGFubmVscyA9IFtdO1xuXG5cdCAgICAgICAgdXRpbHMuZWFjaChjaGFubmVscywgZnVuY3Rpb24gKGNoYW5uZWwpIHtcblx0ICAgICAgICAgIGlmIChDSEFOTkVMU1tjaGFubmVsXSkgZXhpc3RpbmdDaGFubmVscy5wdXNoKGNoYW5uZWwpO1xuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgLy8gaWYgd2UgZG8gbm90IGhhdmUgYW55IGNoYW5uZWxzIHRvIHVuc3Vic2NyaWJlIGZyb20sIHRyaWdnZXIgYSBjYWxsYmFjay5cblx0ICAgICAgICBpZiAoZXhpc3RpbmdDaGFubmVscy5sZW5ndGggPT0gMCkge1xuXHQgICAgICAgICAgY2FsbGJhY2soeyBhY3Rpb246ICdsZWF2ZScgfSk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgLy8gUHJlcGFyZSBwcmVzZW5jZSBjaGFubmVsc1xuXHQgICAgICAgIHV0aWxzLmVhY2goZXhpc3RpbmdDaGFubmVscywgZnVuY3Rpb24gKGNoYW5uZWwpIHtcblx0ICAgICAgICAgIHByZXNlbmNlQ2hhbm5lbHMucHVzaChjaGFubmVsICsgUFJFU0VOQ0VfU1VGRklYKTtcblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIHV0aWxzLmVhY2goZXhpc3RpbmdDaGFubmVscy5jb25jYXQocHJlc2VuY2VDaGFubmVscyksIGZ1bmN0aW9uIChjaGFubmVsKSB7XG5cdCAgICAgICAgICBpZiAoY2hhbm5lbCBpbiBDSEFOTkVMUykgZGVsZXRlIENIQU5ORUxTW2NoYW5uZWxdO1xuXHQgICAgICAgICAgaWYgKGNoYW5uZWwgaW4gU1RBVEUpIGRlbGV0ZSBTVEFURVtjaGFubmVsXTtcblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIGlmIChDSEFOTkVMUy5sZW5ndGggPT09IDAgJiYgQ0hBTk5FTF9HUk9VUFMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICBUSU1FVE9LRU4gPSAwO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHZhciBDQl9DQUxMRUQgPSB0cnVlO1xuXHQgICAgICAgIGlmIChSRUFEWSkge1xuXHQgICAgICAgICAgQ0JfQ0FMTEVEID0gU0VMRlsnTEVBVkUnXShleGlzdGluZ0NoYW5uZWxzLmpvaW4oJywnKSwgMCwgYXV0aF9rZXksIGNhbGxiYWNrLCBlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIUNCX0NBTExFRCkgY2FsbGJhY2soeyBhY3Rpb246ICdsZWF2ZScgfSk7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAoY2hhbm5lbEdyb3VwQXJnKSB7XG5cdCAgICAgICAgdmFyIGNoYW5uZWxHcm91cHMgPSB1dGlscy5pc0FycmF5KGNoYW5uZWxHcm91cEFyZykgPyBjaGFubmVsR3JvdXBBcmcgOiAoJycgKyBjaGFubmVsR3JvdXBBcmcpLnNwbGl0KCcsJyk7XG5cdCAgICAgICAgdmFyIGV4aXN0aW5nQ2hhbm5lbEdyb3VwcyA9IFtdO1xuXHQgICAgICAgIHZhciBwcmVzZW5jZUNoYW5uZWxHcm91cHMgPSBbXTtcblxuXHQgICAgICAgIHV0aWxzLmVhY2goY2hhbm5lbEdyb3VwcywgZnVuY3Rpb24gKGNoYW5uZWxHcm91cCkge1xuXHQgICAgICAgICAgaWYgKENIQU5ORUxfR1JPVVBTW2NoYW5uZWxHcm91cF0pIGV4aXN0aW5nQ2hhbm5lbEdyb3Vwcy5wdXNoKGNoYW5uZWxHcm91cCk7XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICAvLyBpZiB3ZSBkbyBub3QgaGF2ZSBhbnkgY2hhbm5lbCBncm91cHMgdG8gdW5zdWJzY3JpYmUgZnJvbSwgdHJpZ2dlciBhIGNhbGxiYWNrLlxuXHQgICAgICAgIGlmIChleGlzdGluZ0NoYW5uZWxHcm91cHMubGVuZ3RoID09IDApIHtcblx0ICAgICAgICAgIGNhbGxiYWNrKHsgYWN0aW9uOiAnbGVhdmUnIH0pO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFByZXBhcmUgcHJlc2VuY2UgY2hhbm5lbHNcblx0ICAgICAgICB1dGlscy5lYWNoKGV4aXN0aW5nQ2hhbm5lbEdyb3VwcywgZnVuY3Rpb24gKGNoYW5uZWxHcm91cCkge1xuXHQgICAgICAgICAgcHJlc2VuY2VDaGFubmVsR3JvdXBzLnB1c2goY2hhbm5lbEdyb3VwICsgUFJFU0VOQ0VfU1VGRklYKTtcblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIHV0aWxzLmVhY2goZXhpc3RpbmdDaGFubmVsR3JvdXBzLmNvbmNhdChwcmVzZW5jZUNoYW5uZWxHcm91cHMpLCBmdW5jdGlvbiAoY2hhbm5lbEdyb3VwKSB7XG5cdCAgICAgICAgICBpZiAoY2hhbm5lbEdyb3VwIGluIENIQU5ORUxfR1JPVVBTKSBkZWxldGUgQ0hBTk5FTF9HUk9VUFNbY2hhbm5lbEdyb3VwXTtcblx0ICAgICAgICAgIGlmIChjaGFubmVsR3JvdXAgaW4gU1RBVEUpIGRlbGV0ZSBTVEFURVtjaGFubmVsR3JvdXBdO1xuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgaWYgKENIQU5ORUxTLmxlbmd0aCA9PT0gMCAmJiBDSEFOTkVMX0dST1VQUy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgIFRJTUVUT0tFTiA9IDA7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgdmFyIENCX0NBTExFRCA9IHRydWU7XG5cdCAgICAgICAgaWYgKFJFQURZKSB7XG5cdCAgICAgICAgICBDQl9DQUxMRUQgPSBTRUxGWydMRUFWRV9HUk9VUCddKGV4aXN0aW5nQ2hhbm5lbEdyb3Vwcy5qb2luKCcsJyksIDAsIGF1dGhfa2V5LCBjYWxsYmFjaywgZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFDQl9DQUxMRUQpIGNhbGxiYWNrKHsgYWN0aW9uOiAnbGVhdmUnIH0pO1xuXHQgICAgICB9XG5cblx0ICAgICAgLy8gUmVzZXQgQ29ubmVjdGlvbiBpZiBDb3VudCBMZXNzXG5cdCAgICAgIENPTk5FQ1QoKTtcblx0ICAgIH0sXG5cblx0ICAgIC8qXG5cdCAgICAgUFVCTlVCLnN1YnNjcmliZSh7XG5cdCAgICAgY2hhbm5lbCAgOiAnbXlfY2hhdCdcblx0ICAgICBjYWxsYmFjayA6IGZ1bmN0aW9uKG1lc3NhZ2UpIHsgfVxuXHQgICAgIH0pO1xuXHQgICAgICovXG5cdCAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHQgICAgICB2YXIgY2hhbm5lbCA9IGFyZ3NbJ2NoYW5uZWwnXTtcblx0ICAgICAgdmFyIGNoYW5uZWxfZ3JvdXAgPSBhcmdzWydjaGFubmVsX2dyb3VwJ107XG5cdCAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGFyZ3NbJ2NhbGxiYWNrJ107XG5cdCAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGFyZ3NbJ21lc3NhZ2UnXTtcblx0ICAgICAgdmFyIGNvbm5lY3QgPSBhcmdzWydjb25uZWN0J10gfHwgZnVuY3Rpb24gKCkge307XG5cdCAgICAgIHZhciByZWNvbm5lY3QgPSBhcmdzWydyZWNvbm5lY3QnXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgdmFyIGRpc2Nvbm5lY3QgPSBhcmdzWydkaXNjb25uZWN0J10gfHwgZnVuY3Rpb24gKCkge307XG5cdCAgICAgIHZhciBTVUJfRVJST1IgPSBhcmdzWydlcnJvciddIHx8IFNVQl9FUlJPUiB8fCBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgdmFyIGlkbGVjYiA9IGFyZ3NbJ2lkbGUnXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgdmFyIHByZXNlbmNlID0gYXJnc1sncHJlc2VuY2UnXSB8fCAwO1xuXHQgICAgICB2YXIgbm9oZXJlc3luYyA9IGFyZ3NbJ25vaGVyZXN5bmMnXSB8fCAwO1xuXHQgICAgICB2YXIgYmFja2ZpbGwgPSBhcmdzWydiYWNrZmlsbCddIHx8IDA7XG5cdCAgICAgIHZhciB0aW1ldG9rZW4gPSBhcmdzWyd0aW1ldG9rZW4nXSB8fCAwO1xuXHQgICAgICB2YXIgc3ViX3RpbWVvdXQgPSBhcmdzWyd0aW1lb3V0J10gfHwgU1VCX1RJTUVPVVQ7XG5cdCAgICAgIHZhciB3aW5kb3dpbmcgPSBhcmdzWyd3aW5kb3dpbmcnXSB8fCBTVUJfV0lORE9XSU5HO1xuXHQgICAgICB2YXIgc3RhdGUgPSBhcmdzWydzdGF0ZSddO1xuXHQgICAgICB2YXIgaGVhcnRiZWF0ID0gYXJnc1snaGVhcnRiZWF0J10gfHwgYXJnc1sncG5leHBpcmVzJ107XG5cdCAgICAgIHZhciBoZWFydGJlYXRfaW50ZXJ2YWwgPSBhcmdzWydoZWFydGJlYXRfaW50ZXJ2YWwnXTtcblx0ICAgICAgdmFyIHJlc3RvcmUgPSBhcmdzWydyZXN0b3JlJ10gfHwgU1VCX1JFU1RPUkU7XG5cblx0ICAgICAgQVVUSF9LRVkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXG5cdCAgICAgIC8vIFJlc3RvcmUgRW5hYmxlZD9cblx0ICAgICAgU1VCX1JFU1RPUkUgPSByZXN0b3JlO1xuXG5cdCAgICAgIC8vIEFsd2F5cyBSZXNldCB0aGUgVFRcblx0ICAgICAgVElNRVRPS0VOID0gdGltZXRva2VuO1xuXG5cdCAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgQ2hhbm5lbFxuXHQgICAgICBpZiAoIWNoYW5uZWwgJiYgIWNoYW5uZWxfZ3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2hhbm5lbCcpO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKCFjYWxsYmFjaykgcmV0dXJuIGVycm9yKCdNaXNzaW5nIENhbGxiYWNrJyk7XG5cdCAgICAgIGlmICghU1VCU0NSSUJFX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFN1YnNjcmliZSBLZXknKTtcblxuXHQgICAgICBpZiAoaGVhcnRiZWF0IHx8IGhlYXJ0YmVhdCA9PT0gMCB8fCBoZWFydGJlYXRfaW50ZXJ2YWwgfHwgaGVhcnRiZWF0X2ludGVydmFsID09PSAwKSB7XG5cdCAgICAgICAgU0VMRlsnc2V0X2hlYXJ0YmVhdCddKGhlYXJ0YmVhdCwgaGVhcnRiZWF0X2ludGVydmFsKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIC8vIFNldHVwIENoYW5uZWwocylcblx0ICAgICAgaWYgKGNoYW5uZWwpIHtcblx0ICAgICAgICB1dGlscy5lYWNoKChjaGFubmVsLmpvaW4gPyBjaGFubmVsLmpvaW4oJywnKSA6ICcnICsgY2hhbm5lbCkuc3BsaXQoJywnKSxcblx0ICAgICAgICAgIGZ1bmN0aW9uIChjaGFubmVsKSB7XG5cdCAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IENIQU5ORUxTW2NoYW5uZWxdIHx8IHt9O1xuXG5cdCAgICAgICAgICAgIC8vIFN0b3JlIENoYW5uZWwgU3RhdGVcblx0ICAgICAgICAgICAgQ0hBTk5FTFNbU1VCX0NIQU5ORUwgPSBjaGFubmVsXSA9IHtcblx0ICAgICAgICAgICAgICBuYW1lOiBjaGFubmVsLFxuXHQgICAgICAgICAgICAgIGNvbm5lY3RlZDogc2V0dGluZ3MuY29ubmVjdGVkLFxuXHQgICAgICAgICAgICAgIGRpc2Nvbm5lY3RlZDogc2V0dGluZ3MuZGlzY29ubmVjdGVkLFxuXHQgICAgICAgICAgICAgIHN1YnNjcmliZWQ6IDEsXG5cdCAgICAgICAgICAgICAgY2FsbGJhY2s6IFNVQl9DQUxMQkFDSyA9IGNhbGxiYWNrLFxuXHQgICAgICAgICAgICAgIGNpcGhlcl9rZXk6IGFyZ3NbJ2NpcGhlcl9rZXknXSxcblx0ICAgICAgICAgICAgICBjb25uZWN0OiBjb25uZWN0LFxuXHQgICAgICAgICAgICAgIGRpc2Nvbm5lY3Q6IGRpc2Nvbm5lY3QsXG5cdCAgICAgICAgICAgICAgcmVjb25uZWN0OiByZWNvbm5lY3Rcblx0ICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICBpZiAoc3RhdGUpIHtcblx0ICAgICAgICAgICAgICBpZiAoY2hhbm5lbCBpbiBzdGF0ZSkge1xuXHQgICAgICAgICAgICAgICAgU1RBVEVbY2hhbm5lbF0gPSBzdGF0ZVtjaGFubmVsXTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgU1RBVEVbY2hhbm5lbF0gPSBzdGF0ZTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAvLyBQcmVzZW5jZSBFbmFibGVkP1xuXHQgICAgICAgICAgICBpZiAoIXByZXNlbmNlKSByZXR1cm47XG5cblx0ICAgICAgICAgICAgLy8gU3Vic2NyaWJlIFByZXNlbmNlIENoYW5uZWxcblx0ICAgICAgICAgICAgU0VMRlsnc3Vic2NyaWJlJ10oe1xuXHQgICAgICAgICAgICAgIGNoYW5uZWw6IGNoYW5uZWwgKyBQUkVTRU5DRV9TVUZGSVgsXG5cdCAgICAgICAgICAgICAgY2FsbGJhY2s6IHByZXNlbmNlLFxuXHQgICAgICAgICAgICAgIHJlc3RvcmU6IHJlc3RvcmVcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgLy8gUHJlc2VuY2UgU3Vic2NyaWJlZD9cblx0ICAgICAgICAgICAgaWYgKHNldHRpbmdzLnN1YnNjcmliZWQpIHJldHVybjtcblxuXHQgICAgICAgICAgICAvLyBTZWUgV2hvJ3MgSGVyZSBOb3c/XG5cdCAgICAgICAgICAgIGlmIChub2hlcmVzeW5jKSByZXR1cm47XG5cdCAgICAgICAgICAgIFNFTEZbJ2hlcmVfbm93J10oe1xuXHQgICAgICAgICAgICAgIGNoYW5uZWw6IGNoYW5uZWwsXG5cdCAgICAgICAgICAgICAgZGF0YTogX2dldF91cmxfcGFyYW1zKHsgdXVpZDogVVVJRCwgYXV0aDogQVVUSF9LRVkgfSksXG5cdCAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChoZXJlKSB7XG5cdCAgICAgICAgICAgICAgICB1dGlscy5lYWNoKCd1dWlkcycgaW4gaGVyZSA/IGhlcmVbJ3V1aWRzJ10gOiBbXSwgZnVuY3Rpb24gKHVpZCkge1xuXHQgICAgICAgICAgICAgICAgICBwcmVzZW5jZSh7XG5cdCAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnam9pbicsXG5cdCAgICAgICAgICAgICAgICAgICAgdXVpZDogdWlkLFxuXHQgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogTWF0aC5mbG9vcih1dGlscy5ybm93KCkgLyAxMDAwKSxcblx0ICAgICAgICAgICAgICAgICAgICBvY2N1cGFuY3k6IGhlcmVbJ29jY3VwYW5jeSddIHx8IDFcblx0ICAgICAgICAgICAgICAgICAgfSwgaGVyZSwgY2hhbm5lbCk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgIH1cblxuXHQgICAgICAvLyBTZXR1cCBDaGFubmVsIEdyb3Vwc1xuXHQgICAgICBpZiAoY2hhbm5lbF9ncm91cCkge1xuXHQgICAgICAgIHV0aWxzLmVhY2goKGNoYW5uZWxfZ3JvdXAuam9pbiA/IGNoYW5uZWxfZ3JvdXAuam9pbignLCcpIDogJycgKyBjaGFubmVsX2dyb3VwKS5zcGxpdCgnLCcpLFxuXHQgICAgICAgICAgZnVuY3Rpb24gKGNoYW5uZWxfZ3JvdXApIHtcblx0ICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gQ0hBTk5FTF9HUk9VUFNbY2hhbm5lbF9ncm91cF0gfHwge307XG5cblx0ICAgICAgICAgICAgQ0hBTk5FTF9HUk9VUFNbY2hhbm5lbF9ncm91cF0gPSB7XG5cdCAgICAgICAgICAgICAgbmFtZTogY2hhbm5lbF9ncm91cCxcblx0ICAgICAgICAgICAgICBjb25uZWN0ZWQ6IHNldHRpbmdzLmNvbm5lY3RlZCxcblx0ICAgICAgICAgICAgICBkaXNjb25uZWN0ZWQ6IHNldHRpbmdzLmRpc2Nvbm5lY3RlZCxcblx0ICAgICAgICAgICAgICBzdWJzY3JpYmVkOiAxLFxuXHQgICAgICAgICAgICAgIGNhbGxiYWNrOiBTVUJfQ0FMTEJBQ0sgPSBjYWxsYmFjayxcblx0ICAgICAgICAgICAgICBjaXBoZXJfa2V5OiBhcmdzWydjaXBoZXJfa2V5J10sXG5cdCAgICAgICAgICAgICAgY29ubmVjdDogY29ubmVjdCxcblx0ICAgICAgICAgICAgICBkaXNjb25uZWN0OiBkaXNjb25uZWN0LFxuXHQgICAgICAgICAgICAgIHJlY29ubmVjdDogcmVjb25uZWN0XG5cdCAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgLy8gUHJlc2VuY2UgRW5hYmxlZD9cblx0ICAgICAgICAgICAgaWYgKCFwcmVzZW5jZSkgcmV0dXJuO1xuXG5cdCAgICAgICAgICAgIC8vIFN1YnNjcmliZSBQcmVzZW5jZSBDaGFubmVsXG5cdCAgICAgICAgICAgIFNFTEZbJ3N1YnNjcmliZSddKHtcblx0ICAgICAgICAgICAgICBjaGFubmVsX2dyb3VwOiBjaGFubmVsX2dyb3VwICsgUFJFU0VOQ0VfU1VGRklYLFxuXHQgICAgICAgICAgICAgIGNhbGxiYWNrOiBwcmVzZW5jZSxcblx0ICAgICAgICAgICAgICByZXN0b3JlOiByZXN0b3JlLFxuXHQgICAgICAgICAgICAgIGF1dGhfa2V5OiBBVVRIX0tFWVxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAvLyBQcmVzZW5jZSBTdWJzY3JpYmVkP1xuXHQgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc3Vic2NyaWJlZCkgcmV0dXJuO1xuXG5cdCAgICAgICAgICAgIC8vIFNlZSBXaG8ncyBIZXJlIE5vdz9cblx0ICAgICAgICAgICAgaWYgKG5vaGVyZXN5bmMpIHJldHVybjtcblx0ICAgICAgICAgICAgU0VMRlsnaGVyZV9ub3cnXSh7XG5cdCAgICAgICAgICAgICAgY2hhbm5lbF9ncm91cDogY2hhbm5lbF9ncm91cCxcblx0ICAgICAgICAgICAgICBkYXRhOiBfZ2V0X3VybF9wYXJhbXMoeyB1dWlkOiBVVUlELCBhdXRoOiBBVVRIX0tFWSB9KSxcblx0ICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGhlcmUpIHtcblx0ICAgICAgICAgICAgICAgIHV0aWxzLmVhY2goJ3V1aWRzJyBpbiBoZXJlID8gaGVyZVsndXVpZHMnXSA6IFtdLCBmdW5jdGlvbiAodWlkKSB7XG5cdCAgICAgICAgICAgICAgICAgIHByZXNlbmNlKHtcblx0ICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdqb2luJyxcblx0ICAgICAgICAgICAgICAgICAgICB1dWlkOiB1aWQsXG5cdCAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBNYXRoLmZsb29yKHV0aWxzLnJub3coKSAvIDEwMDApLFxuXHQgICAgICAgICAgICAgICAgICAgIG9jY3VwYW5jeTogaGVyZVsnb2NjdXBhbmN5J10gfHwgMVxuXHQgICAgICAgICAgICAgICAgICB9LCBoZXJlLCBjaGFubmVsX2dyb3VwKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgfVxuXG5cblx0ICAgICAgLy8gVGVzdCBOZXR3b3JrIENvbm5lY3Rpb25cblx0ICAgICAgZnVuY3Rpb24gX3Rlc3RfY29ubmVjdGlvbihzdWNjZXNzKSB7XG5cdCAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcblx0ICAgICAgICAgIC8vIEJlZ2luIE5leHQgU29ja2V0IENvbm5lY3Rpb25cblx0ICAgICAgICAgIHV0aWxzLnRpbWVvdXQoQ09OTkVDVCwgd2luZG93aW5nKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gTmV3IE9yaWdpbiBvbiBGYWlsZWQgQ29ubmVjdGlvblxuXHQgICAgICAgICAgU1REX09SSUdJTiA9IG5leHRvcmlnaW4oT1JJR0lOLCAxKTtcblx0ICAgICAgICAgIFNVQl9PUklHSU4gPSBuZXh0b3JpZ2luKE9SSUdJTiwgMSk7XG5cblx0ICAgICAgICAgIC8vIFJlLXRlc3QgQ29ubmVjdGlvblxuXHQgICAgICAgICAgdXRpbHMudGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIFNFTEZbJ3RpbWUnXShfdGVzdF9jb25uZWN0aW9uKTtcblx0ICAgICAgICAgIH0sIFNFQ09ORCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgLy8gRGlzY29ubmVjdCAmIFJlY29ubmVjdFxuXHQgICAgICAgIGVhY2hfY2hhbm5lbChmdW5jdGlvbiAoY2hhbm5lbCkge1xuXHQgICAgICAgICAgLy8gUmVjb25uZWN0XG5cdCAgICAgICAgICBpZiAoc3VjY2VzcyAmJiBjaGFubmVsLmRpc2Nvbm5lY3RlZCkge1xuXHQgICAgICAgICAgICBjaGFubmVsLmRpc2Nvbm5lY3RlZCA9IDA7XG5cdCAgICAgICAgICAgIHJldHVybiBjaGFubmVsLnJlY29ubmVjdChjaGFubmVsLm5hbWUpO1xuXHQgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAvLyBEaXNjb25uZWN0XG5cdCAgICAgICAgICBpZiAoIXN1Y2Nlc3MgJiYgIWNoYW5uZWwuZGlzY29ubmVjdGVkKSB7XG5cdCAgICAgICAgICAgIGNoYW5uZWwuZGlzY29ubmVjdGVkID0gMTtcblx0ICAgICAgICAgICAgY2hhbm5lbC5kaXNjb25uZWN0KGNoYW5uZWwubmFtZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICAvLyBEaXNjb25uZWN0ICYgUmVjb25uZWN0IGZvciBjaGFubmVsIGdyb3Vwc1xuXHQgICAgICAgIGVhY2hfY2hhbm5lbF9ncm91cChmdW5jdGlvbiAoY2hhbm5lbF9ncm91cCkge1xuXHQgICAgICAgICAgLy8gUmVjb25uZWN0XG5cdCAgICAgICAgICBpZiAoc3VjY2VzcyAmJiBjaGFubmVsX2dyb3VwLmRpc2Nvbm5lY3RlZCkge1xuXHQgICAgICAgICAgICBjaGFubmVsX2dyb3VwLmRpc2Nvbm5lY3RlZCA9IDA7XG5cdCAgICAgICAgICAgIHJldHVybiBjaGFubmVsX2dyb3VwLnJlY29ubmVjdChjaGFubmVsX2dyb3VwLm5hbWUpO1xuXHQgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAvLyBEaXNjb25uZWN0XG5cdCAgICAgICAgICBpZiAoIXN1Y2Nlc3MgJiYgIWNoYW5uZWxfZ3JvdXAuZGlzY29ubmVjdGVkKSB7XG5cdCAgICAgICAgICAgIGNoYW5uZWxfZ3JvdXAuZGlzY29ubmVjdGVkID0gMTtcblx0ICAgICAgICAgICAgY2hhbm5lbF9ncm91cC5kaXNjb25uZWN0KGNoYW5uZWxfZ3JvdXAubmFtZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblxuXHQgICAgICAvLyBFdmVudGVkIFN1YnNjcmliZVxuXHQgICAgICBmdW5jdGlvbiBfY29ubmVjdCgpIHtcblx0ICAgICAgICB2YXIganNvbnAgPSBqc29ucF9jYigpO1xuXHQgICAgICAgIHZhciBjaGFubmVscyA9IGdlbmVyYXRlX2NoYW5uZWxfbGlzdChDSEFOTkVMUykuam9pbignLCcpO1xuXHQgICAgICAgIHZhciBjaGFubmVsX2dyb3VwcyA9IGdlbmVyYXRlX2NoYW5uZWxfZ3JvdXBfbGlzdChDSEFOTkVMX0dST1VQUykuam9pbignLCcpO1xuXG5cdCAgICAgICAgLy8gU3RvcCBDb25uZWN0aW9uXG5cdCAgICAgICAgaWYgKCFjaGFubmVscyAmJiAhY2hhbm5lbF9ncm91cHMpIHJldHVybjtcblxuXHQgICAgICAgIGlmICghY2hhbm5lbHMpIGNoYW5uZWxzID0gJywnO1xuXG5cdCAgICAgICAgLy8gQ29ubmVjdCB0byBQdWJOdWIgU3Vic2NyaWJlIFNlcnZlcnNcblx0ICAgICAgICBfcmVzZXRfb2ZmbGluZSgpO1xuXG5cdCAgICAgICAgdmFyIGRhdGEgPSBfZ2V0X3VybF9wYXJhbXMoeyB1dWlkOiBVVUlELCBhdXRoOiBBVVRIX0tFWSB9KTtcblxuXHQgICAgICAgIGlmIChjaGFubmVsX2dyb3Vwcykge1xuXHQgICAgICAgICAgZGF0YVsnY2hhbm5lbC1ncm91cCddID0gY2hhbm5lbF9ncm91cHM7XG5cdCAgICAgICAgfVxuXG5cblx0ICAgICAgICB2YXIgc3QgPSBKU09OLnN0cmluZ2lmeShTVEFURSk7XG5cdCAgICAgICAgaWYgKHN0Lmxlbmd0aCA+IDIpIGRhdGFbJ3N0YXRlJ10gPSBKU09OLnN0cmluZ2lmeShTVEFURSk7XG5cblx0ICAgICAgICBpZiAoUFJFU0VOQ0VfSEIpIGRhdGFbJ2hlYXJ0YmVhdCddID0gUFJFU0VOQ0VfSEI7XG5cblx0ICAgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cblx0ICAgICAgICBzdGFydF9wcmVzZW5jZV9oZWFydGJlYXQoKTtcblx0ICAgICAgICBTVUJfUkVDRUlWRVIgPSBleGVjdXRlUmVxdWVzdCh7XG5cdCAgICAgICAgICB0aW1lb3V0OiBzdWJfdGltZW91dCxcblx0ICAgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0ICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2VbJ2Vycm9yJ10gJiYgcmVzcG9uc2VbJ3NlcnZpY2UnXSkge1xuXHQgICAgICAgICAgICAgIF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIFNVQl9FUlJPUik7XG5cdCAgICAgICAgICAgICAgX3Rlc3RfY29ubmVjdGlvbihmYWxzZSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgU0VMRlsndGltZSddKGZ1bmN0aW9uIChzdWNjZXNzKSB7XG5cdCAgICAgICAgICAgICAgICAhc3VjY2VzcyAmJiAoX2ludm9rZV9lcnJvcihyZXNwb25zZSwgU1VCX0VSUk9SKSk7XG5cdCAgICAgICAgICAgICAgICBfdGVzdF9jb25uZWN0aW9uKHN1Y2Nlc3MpO1xuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgZGF0YTogX2dldF91cmxfcGFyYW1zKGRhdGEpLFxuXHQgICAgICAgICAgdXJsOiBbXG5cdCAgICAgICAgICAgIFNVQl9PUklHSU4sICdzdWJzY3JpYmUnLFxuXHQgICAgICAgICAgICBTVUJTQ1JJQkVfS0VZLCB1dGlscy5lbmNvZGUoY2hhbm5lbHMpLFxuXHQgICAgICAgICAgICBqc29ucCwgVElNRVRPS0VOXG5cdCAgICAgICAgICBdLFxuXHQgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKG1lc3NhZ2VzKSB7XG5cdCAgICAgICAgICAgIC8vIENoZWNrIGZvciBFcnJvcnNcblx0ICAgICAgICAgICAgaWYgKCFtZXNzYWdlcyB8fCAodHlwZW9mIG1lc3NhZ2VzID09ICdvYmplY3QnICYmICdlcnJvcicgaW4gbWVzc2FnZXMgJiYgbWVzc2FnZXNbJ2Vycm9yJ10pKSB7XG5cdCAgICAgICAgICAgICAgU1VCX0VSUk9SKG1lc3NhZ2VzKTtcblx0ICAgICAgICAgICAgICByZXR1cm4gdXRpbHMudGltZW91dChDT05ORUNULCBTRUNPTkQpO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgLy8gVXNlciBJZGxlIENhbGxiYWNrXG5cdCAgICAgICAgICAgIGlkbGVjYihtZXNzYWdlc1sxXSk7XG5cblx0ICAgICAgICAgICAgLy8gUmVzdG9yZSBQcmV2aW91cyBDb25uZWN0aW9uIFBvaW50IGlmIE5lZWRlZFxuXHQgICAgICAgICAgICBUSU1FVE9LRU4gPSAhVElNRVRPS0VOICYmIFNVQl9SRVNUT1JFICYmIGRiWydnZXQnXShTVUJTQ1JJQkVfS0VZKSB8fCBtZXNzYWdlc1sxXTtcblxuXHQgICAgICAgICAgICAvKlxuXHQgICAgICAgICAgICAgLy8gQ29ubmVjdFxuXHQgICAgICAgICAgICAgZWFjaF9jaGFubmVsX3JlZ2lzdHJ5KGZ1bmN0aW9uKHJlZ2lzdHJ5KXtcblx0ICAgICAgICAgICAgIGlmIChyZWdpc3RyeS5jb25uZWN0ZWQpIHJldHVybjtcblx0ICAgICAgICAgICAgIHJlZ2lzdHJ5LmNvbm5lY3RlZCA9IDE7XG5cdCAgICAgICAgICAgICByZWdpc3RyeS5jb25uZWN0KGNoYW5uZWwubmFtZSk7XG5cdCAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgLy8gQ29ubmVjdFxuXHQgICAgICAgICAgICBlYWNoX2NoYW5uZWwoZnVuY3Rpb24gKGNoYW5uZWwpIHtcblx0ICAgICAgICAgICAgICBpZiAoY2hhbm5lbC5jb25uZWN0ZWQpIHJldHVybjtcblx0ICAgICAgICAgICAgICBjaGFubmVsLmNvbm5lY3RlZCA9IDE7XG5cdCAgICAgICAgICAgICAgY2hhbm5lbC5jb25uZWN0KGNoYW5uZWwubmFtZSk7XG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIC8vIENvbm5lY3QgZm9yIGNoYW5uZWwgZ3JvdXBzXG5cdCAgICAgICAgICAgIGVhY2hfY2hhbm5lbF9ncm91cChmdW5jdGlvbiAoY2hhbm5lbF9ncm91cCkge1xuXHQgICAgICAgICAgICAgIGlmIChjaGFubmVsX2dyb3VwLmNvbm5lY3RlZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICAgIGNoYW5uZWxfZ3JvdXAuY29ubmVjdGVkID0gMTtcblx0ICAgICAgICAgICAgICBjaGFubmVsX2dyb3VwLmNvbm5lY3QoY2hhbm5lbF9ncm91cC5uYW1lKTtcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgaWYgKFJFU1VNRUQgJiYgIVNVQl9SRVNUT1JFKSB7XG5cdCAgICAgICAgICAgICAgVElNRVRPS0VOID0gMDtcblx0ICAgICAgICAgICAgICBSRVNVTUVEID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgLy8gVXBkYXRlIFNhdmVkIFRpbWV0b2tlblxuXHQgICAgICAgICAgICAgIGRiWydzZXQnXShTVUJTQ1JJQkVfS0VZLCAwKTtcblx0ICAgICAgICAgICAgICB1dGlscy50aW1lb3V0KF9jb25uZWN0LCB3aW5kb3dpbmcpO1xuXHQgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIC8vIEludm9rZSBNZW1vcnkgQ2F0Y2h1cCBhbmQgUmVjZWl2ZSBVcCB0byAxMDBcblx0ICAgICAgICAgICAgLy8gUHJldmlvdXMgTWVzc2FnZXMgZnJvbSB0aGUgUXVldWUuXG5cdCAgICAgICAgICAgIGlmIChiYWNrZmlsbCkge1xuXHQgICAgICAgICAgICAgIFRJTUVUT0tFTiA9IDEwMDAwO1xuXHQgICAgICAgICAgICAgIGJhY2tmaWxsID0gMDtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIC8vIFVwZGF0ZSBTYXZlZCBUaW1ldG9rZW5cblx0ICAgICAgICAgICAgZGJbJ3NldCddKFNVQlNDUklCRV9LRVksIG1lc3NhZ2VzWzFdKTtcblxuXHQgICAgICAgICAgICAvLyBSb3V0ZSBDaGFubmVsIDwtLS0+IENhbGxiYWNrIGZvciBNZXNzYWdlXG5cdCAgICAgICAgICAgIHZhciBuZXh0X2NhbGxiYWNrID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICB2YXIgY2hhbm5lbHMgPSAnJztcblx0ICAgICAgICAgICAgICB2YXIgY2hhbm5lbHMyID0gJyc7XG5cblx0ICAgICAgICAgICAgICBpZiAobWVzc2FnZXMubGVuZ3RoID4gMykge1xuXHQgICAgICAgICAgICAgICAgY2hhbm5lbHMgPSBtZXNzYWdlc1szXTtcblx0ICAgICAgICAgICAgICAgIGNoYW5uZWxzMiA9IG1lc3NhZ2VzWzJdO1xuXHQgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZXMubGVuZ3RoID4gMikge1xuXHQgICAgICAgICAgICAgICAgY2hhbm5lbHMgPSBtZXNzYWdlc1syXTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgY2hhbm5lbHMgPSB1dGlscy5tYXAoXG5cdCAgICAgICAgICAgICAgICAgIGdlbmVyYXRlX2NoYW5uZWxfbGlzdChDSEFOTkVMUyksIGZ1bmN0aW9uIChjaGFuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLm1hcChcblx0ICAgICAgICAgICAgICAgICAgICAgIEFycmF5KG1lc3NhZ2VzWzBdLmxlbmd0aClcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJywnKS5zcGxpdCgnLCcpLFxuXHQgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hhbjtcblx0ICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICAgICAgICB9KS5qb2luKCcsJyk7XG5cdCAgICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgICAgdmFyIGxpc3QgPSBjaGFubmVscy5zcGxpdCgnLCcpO1xuXHQgICAgICAgICAgICAgIHZhciBsaXN0MiA9IChjaGFubmVsczIpID8gY2hhbm5lbHMyLnNwbGl0KCcsJykgOiBbXTtcblxuXHQgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY2hhbm5lbCA9IGxpc3Quc2hpZnQoKSB8fCBTVUJfQ0hBTk5FTDtcblx0ICAgICAgICAgICAgICAgIHZhciBjaGFubmVsMiA9IGxpc3QyLnNoaWZ0KCk7XG5cblx0ICAgICAgICAgICAgICAgIHZhciBjaG9iaiA9IHt9O1xuXHQgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRfY2hvYmogPSB7IGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7fSB9O1xuXG5cdCAgICAgICAgICAgICAgICBpZiAoY2hhbm5lbDIpIHtcblx0ICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwgJiYgY2hhbm5lbC5pbmRleE9mKCctcG5wcmVzJykgPj0gMFxuXHQgICAgICAgICAgICAgICAgICAgICYmIGNoYW5uZWwyLmluZGV4T2YoJy1wbnByZXMnKSA8IDApIHtcblx0ICAgICAgICAgICAgICAgICAgICBjaGFubmVsMiArPSAnLXBucHJlcyc7XG5cdCAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgY2hvYmogPSBDSEFOTkVMX0dST1VQU1tjaGFubmVsMl0gfHwgQ0hBTk5FTFNbY2hhbm5lbDJdIHx8IGRlZmF1bHRfY2hvYmo7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICBjaG9iaiA9IENIQU5ORUxTW2NoYW5uZWxdIHx8IGRlZmF1bHRfY2hvYmo7XG5cdCAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgIHZhciByID0gW1xuXHQgICAgICAgICAgICAgICAgICBjaG9ialxuXHQgICAgICAgICAgICAgICAgICAgIC5jYWxsYmFjayB8fCBTVUJfQ0FMTEJBQ0ssXG5cdCAgICAgICAgICAgICAgICAgIGNoYW5uZWwuc3BsaXQoUFJFU0VOQ0VfU1VGRklYKVswXVxuXHQgICAgICAgICAgICAgICAgXTtcblx0ICAgICAgICAgICAgICAgIGNoYW5uZWwyICYmIHIucHVzaChjaGFubmVsMi5zcGxpdChQUkVTRU5DRV9TVUZGSVgpWzBdKTtcblx0ICAgICAgICAgICAgICAgIHJldHVybiByO1xuXHQgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIH0pKCk7XG5cblx0ICAgICAgICAgICAgdmFyIGxhdGVuY3kgPSBkZXRlY3RfbGF0ZW5jeSgrbWVzc2FnZXNbMV0pO1xuXHQgICAgICAgICAgICB1dGlscy5lYWNoKG1lc3NhZ2VzWzBdLCBmdW5jdGlvbiAobXNnKSB7XG5cdCAgICAgICAgICAgICAgdmFyIG5leHQgPSBuZXh0X2NhbGxiYWNrKCk7XG5cdCAgICAgICAgICAgICAgdmFyIGRlY3J5cHRlZF9tc2cgPSBkZWNyeXB0KG1zZyxcblx0ICAgICAgICAgICAgICAgIChDSEFOTkVMU1tuZXh0WzFdXSkgPyBDSEFOTkVMU1tuZXh0WzFdXVsnY2lwaGVyX2tleSddIDogbnVsbCk7XG5cdCAgICAgICAgICAgICAgbmV4dFswXSAmJiBuZXh0WzBdKGRlY3J5cHRlZF9tc2csIG1lc3NhZ2VzLCBuZXh0WzJdIHx8IG5leHRbMV0sIGxhdGVuY3ksIG5leHRbMV0pO1xuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICB1dGlscy50aW1lb3V0KF9jb25uZWN0LCB3aW5kb3dpbmcpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cblx0ICAgICAgQ09OTkVDVCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfcmVzZXRfb2ZmbGluZSgpO1xuXHQgICAgICAgIHV0aWxzLnRpbWVvdXQoX2Nvbm5lY3QsIHdpbmRvd2luZyk7XG5cdCAgICAgIH07XG5cblx0ICAgICAgLy8gUmVkdWNlIFN0YXR1cyBGbGlja2VyXG5cdCAgICAgIGlmICghUkVBRFkpIHJldHVybiBSRUFEWV9CVUZGRVIucHVzaChDT05ORUNUKTtcblxuXHQgICAgICAvLyBDb25uZWN0IE5vd1xuXHQgICAgICBDT05ORUNUKCk7XG5cdCAgICB9LFxuXG5cdCAgICAvKlxuXHQgICAgIFBVQk5VQi5oZXJlX25vdyh7IGNoYW5uZWwgOiAnbXlfY2hhdCcsIGNhbGxiYWNrIDogZnVuIH0pO1xuXHQgICAgICovXG5cdCAgICBoZXJlX25vdzogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbJ2NhbGxiYWNrJ10gfHwgY2FsbGJhY2s7XG5cdCAgICAgIHZhciBkZWJ1ZyA9IGFyZ3NbJ2RlYnVnJ107XG5cdCAgICAgIHZhciBlcnIgPSBhcmdzWydlcnJvciddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHQgICAgICB2YXIgY2hhbm5lbCA9IGFyZ3NbJ2NoYW5uZWwnXTtcblx0ICAgICAgdmFyIGNoYW5uZWxfZ3JvdXAgPSBhcmdzWydjaGFubmVsX2dyb3VwJ107XG5cdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdCAgICAgIHZhciB1dWlkcyA9ICgndXVpZHMnIGluIGFyZ3MpID8gYXJnc1sndXVpZHMnXSA6IHRydWU7XG5cdCAgICAgIHZhciBzdGF0ZSA9IGFyZ3NbJ3N0YXRlJ107XG5cdCAgICAgIHZhciBkYXRhID0geyB1dWlkOiBVVUlELCBhdXRoOiBhdXRoX2tleSB9O1xuXG5cdCAgICAgIGlmICghdXVpZHMpIGRhdGFbJ2Rpc2FibGVfdXVpZHMnXSA9IDE7XG5cdCAgICAgIGlmIChzdGF0ZSkgZGF0YVsnc3RhdGUnXSA9IDE7XG5cblx0ICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBDaGFubmVsXG5cdCAgICAgIGlmICghY2FsbGJhY2spIHJldHVybiBlcnJvcignTWlzc2luZyBDYWxsYmFjaycpO1xuXHQgICAgICBpZiAoIVNVQlNDUklCRV9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBTdWJzY3JpYmUgS2V5Jyk7XG5cblx0ICAgICAgdmFyIHVybCA9IFtcblx0ICAgICAgICBTVERfT1JJR0lOLCAndjInLCAncHJlc2VuY2UnLFxuXHQgICAgICAgICdzdWJfa2V5JywgU1VCU0NSSUJFX0tFWVxuXHQgICAgICBdO1xuXG5cdCAgICAgIGNoYW5uZWwgJiYgdXJsLnB1c2goJ2NoYW5uZWwnKSAmJiB1cmwucHVzaCh1dGlscy5lbmNvZGUoY2hhbm5lbCkpO1xuXG5cdCAgICAgIGlmIChqc29ucCAhPSAnMCcpIHtcblx0ICAgICAgICBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAoY2hhbm5lbF9ncm91cCkge1xuXHQgICAgICAgIGRhdGFbJ2NoYW5uZWwtZ3JvdXAnXSA9IGNoYW5uZWxfZ3JvdXA7XG5cdCAgICAgICAgIWNoYW5uZWwgJiYgdXJsLnB1c2goJ2NoYW5uZWwnKSAmJiB1cmwucHVzaCgnLCcpO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKFVTRV9JTlNUQU5DRUlEKSBkYXRhWydpbnN0YW5jZWlkJ10gPSBJTlNUQU5DRUlEO1xuXG5cdCAgICAgIGV4ZWN1dGVSZXF1ZXN0KHtcblx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdCAgICAgICAgZGF0YTogX2dldF91cmxfcGFyYW1zKGRhdGEpLFxuXHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgICAgX2ludm9rZV9jYWxsYmFjayhyZXNwb25zZSwgY2FsbGJhY2ssIGVycik7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICAgIF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIGVycik7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBkZWJ1ZzogZGVidWcsXG5cdCAgICAgICAgdXJsOiB1cmxcblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXG5cdCAgICAvKlxuXHQgICAgIFBVQk5VQi5jdXJyZW50X2NoYW5uZWxzX2J5X3V1aWQoeyBjaGFubmVsIDogJ215X2NoYXQnLCBjYWxsYmFjayA6IGZ1biB9KTtcblx0ICAgICAqL1xuXHQgICAgd2hlcmVfbm93OiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGNhbGxiYWNrID0gYXJnc1snY2FsbGJhY2snXSB8fCBjYWxsYmFjaztcblx0ICAgICAgdmFyIGVyciA9IGFyZ3NbJ2Vycm9yJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdCAgICAgIHZhciBhdXRoX2tleSA9IGFyZ3NbJ2F1dGhfa2V5J10gfHwgQVVUSF9LRVk7XG5cdCAgICAgIHZhciBqc29ucCA9IGpzb25wX2NiKCk7XG5cdCAgICAgIHZhciB1dWlkID0gYXJnc1sndXVpZCddIHx8IFVVSUQ7XG5cdCAgICAgIHZhciBkYXRhID0geyBhdXRoOiBhdXRoX2tleSB9O1xuXG5cdCAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgQ2hhbm5lbFxuXHQgICAgICBpZiAoIWNhbGxiYWNrKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2FsbGJhY2snKTtcblx0ICAgICAgaWYgKCFTVUJTQ1JJQkVfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU3Vic2NyaWJlIEtleScpO1xuXG5cdCAgICAgIGlmIChqc29ucCAhPSAnMCcpIHtcblx0ICAgICAgICBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cblx0ICAgICAgZXhlY3V0ZVJlcXVlc3Qoe1xuXHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0ICAgICAgICBkYXRhOiBfZ2V0X3VybF9wYXJhbXMoZGF0YSksXG5cdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgICAgX2ludm9rZV9lcnJvcihyZXNwb25zZSwgZXJyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHVybDogW1xuXHQgICAgICAgICAgU1REX09SSUdJTiwgJ3YyJywgJ3ByZXNlbmNlJyxcblx0ICAgICAgICAgICdzdWJfa2V5JywgU1VCU0NSSUJFX0tFWSxcblx0ICAgICAgICAgICd1dWlkJywgdXRpbHMuZW5jb2RlKHV1aWQpXG5cdCAgICAgICAgXVxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cblx0ICAgIHN0YXRlOiBmdW5jdGlvbiAoYXJncywgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGNhbGxiYWNrID0gYXJnc1snY2FsbGJhY2snXSB8fCBjYWxsYmFjayB8fCBmdW5jdGlvbiAocikge307XG5cdCAgICAgIHZhciBlcnIgPSBhcmdzWydlcnJvciddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IEFVVEhfS0VZO1xuXHQgICAgICB2YXIganNvbnAgPSBqc29ucF9jYigpO1xuXHQgICAgICB2YXIgc3RhdGUgPSBhcmdzWydzdGF0ZSddO1xuXHQgICAgICB2YXIgdXVpZCA9IGFyZ3NbJ3V1aWQnXSB8fCBVVUlEO1xuXHQgICAgICB2YXIgY2hhbm5lbCA9IGFyZ3NbJ2NoYW5uZWwnXTtcblx0ICAgICAgdmFyIGNoYW5uZWxfZ3JvdXAgPSBhcmdzWydjaGFubmVsX2dyb3VwJ107XG5cdCAgICAgIHZhciB1cmw7XG5cdCAgICAgIHZhciBkYXRhID0gX2dldF91cmxfcGFyYW1zKHsgYXV0aDogYXV0aF9rZXkgfSk7XG5cblx0ICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBDaGFubmVsXG5cdCAgICAgIGlmICghU1VCU0NSSUJFX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFN1YnNjcmliZSBLZXknKTtcblx0ICAgICAgaWYgKCF1dWlkKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgVVVJRCcpO1xuXHQgICAgICBpZiAoIWNoYW5uZWwgJiYgIWNoYW5uZWxfZ3JvdXApIHJldHVybiBlcnJvcignTWlzc2luZyBDaGFubmVsJyk7XG5cblx0ICAgICAgaWYgKGpzb25wICE9ICcwJykge1xuXHQgICAgICAgIGRhdGFbJ2NhbGxiYWNrJ10gPSBqc29ucDtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmICh0eXBlb2YgY2hhbm5lbCAhPSAndW5kZWZpbmVkJ1xuXHQgICAgICAgICYmIENIQU5ORUxTW2NoYW5uZWxdICYmIENIQU5ORUxTW2NoYW5uZWxdLnN1YnNjcmliZWQpIHtcblx0ICAgICAgICBpZiAoc3RhdGUpIFNUQVRFW2NoYW5uZWxdID0gc3RhdGU7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAodHlwZW9mIGNoYW5uZWxfZ3JvdXAgIT0gJ3VuZGVmaW5lZCdcblx0ICAgICAgICAmJiBDSEFOTkVMX0dST1VQU1tjaGFubmVsX2dyb3VwXVxuXHQgICAgICAgICYmIENIQU5ORUxfR1JPVVBTW2NoYW5uZWxfZ3JvdXBdLnN1YnNjcmliZWRcblx0ICAgICAgKSB7XG5cdCAgICAgICAgaWYgKHN0YXRlKSBTVEFURVtjaGFubmVsX2dyb3VwXSA9IHN0YXRlO1xuXHQgICAgICAgIGRhdGFbJ2NoYW5uZWwtZ3JvdXAnXSA9IGNoYW5uZWxfZ3JvdXA7XG5cblx0ICAgICAgICBpZiAoIWNoYW5uZWwpIHtcblx0ICAgICAgICAgIGNoYW5uZWwgPSAnLCc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cblx0ICAgICAgZGF0YVsnc3RhdGUnXSA9IEpTT04uc3RyaW5naWZ5KHN0YXRlKTtcblxuXHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cblx0ICAgICAgaWYgKHN0YXRlKSB7XG5cdCAgICAgICAgdXJsID0gW1xuXHQgICAgICAgICAgU1REX09SSUdJTiwgJ3YyJywgJ3ByZXNlbmNlJyxcblx0ICAgICAgICAgICdzdWIta2V5JywgU1VCU0NSSUJFX0tFWSxcblx0ICAgICAgICAgICdjaGFubmVsJywgY2hhbm5lbCxcblx0ICAgICAgICAgICd1dWlkJywgdXVpZCwgJ2RhdGEnXG5cdCAgICAgICAgXTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB1cmwgPSBbXG5cdCAgICAgICAgICBTVERfT1JJR0lOLCAndjInLCAncHJlc2VuY2UnLFxuXHQgICAgICAgICAgJ3N1Yi1rZXknLCBTVUJTQ1JJQkVfS0VZLFxuXHQgICAgICAgICAgJ2NoYW5uZWwnLCBjaGFubmVsLFxuXHQgICAgICAgICAgJ3V1aWQnLCB1dGlscy5lbmNvZGUodXVpZClcblx0ICAgICAgICBdO1xuXHQgICAgICB9XG5cblx0ICAgICAgZXhlY3V0ZVJlcXVlc3Qoe1xuXHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0ICAgICAgICBkYXRhOiBfZ2V0X3VybF9wYXJhbXMoZGF0YSksXG5cdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgICAgX2ludm9rZV9lcnJvcihyZXNwb25zZSwgZXJyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHVybDogdXJsXG5cblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXG5cdCAgICAvKlxuXHQgICAgIFBVQk5VQi5ncmFudCh7XG5cdCAgICAgY2hhbm5lbCAgOiAnbXlfY2hhdCcsXG5cdCAgICAgY2FsbGJhY2sgOiBmdW4sXG5cdCAgICAgZXJyb3IgICAgOiBmdW4sXG5cdCAgICAgdHRsICAgICAgOiAyNCAqIDYwLCAvLyBNaW51dGVzXG5cdCAgICAgcmVhZCAgICAgOiB0cnVlLFxuXHQgICAgIHdyaXRlICAgIDogdHJ1ZSxcblx0ICAgICBhdXRoX2tleSA6ICczeTh1aWFqZGtseXRvd3NqJ1xuXHQgICAgIH0pO1xuXHQgICAgICovXG5cdCAgICBncmFudDogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbJ2NhbGxiYWNrJ10gfHwgY2FsbGJhY2s7XG5cdCAgICAgIHZhciBlcnIgPSBhcmdzWydlcnJvciddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgICB2YXIgY2hhbm5lbCA9IGFyZ3NbJ2NoYW5uZWwnXSB8fCBhcmdzWydjaGFubmVscyddO1xuXHQgICAgICB2YXIgY2hhbm5lbF9ncm91cCA9IGFyZ3NbJ2NoYW5uZWxfZ3JvdXAnXTtcblx0ICAgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblx0ICAgICAgdmFyIHR0bCA9IGFyZ3NbJ3R0bCddO1xuXHQgICAgICB2YXIgciA9IChhcmdzWydyZWFkJ10pID8gJzEnIDogJzAnO1xuXHQgICAgICB2YXIgdyA9IChhcmdzWyd3cml0ZSddKSA/ICcxJyA6ICcwJztcblx0ICAgICAgdmFyIG0gPSAoYXJnc1snbWFuYWdlJ10pID8gJzEnIDogJzAnO1xuXHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddIHx8IGFyZ3NbJ2F1dGhfa2V5cyddO1xuXG5cdCAgICAgIGlmICghY2FsbGJhY2spIHJldHVybiBlcnJvcignTWlzc2luZyBDYWxsYmFjaycpO1xuXHQgICAgICBpZiAoIVNVQlNDUklCRV9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBTdWJzY3JpYmUgS2V5Jyk7XG5cdCAgICAgIGlmICghUFVCTElTSF9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBQdWJsaXNoIEtleScpO1xuXHQgICAgICBpZiAoIVNFQ1JFVF9LRVkpIHJldHVybiBlcnJvcignTWlzc2luZyBTZWNyZXQgS2V5Jyk7XG5cblx0ICAgICAgdmFyIGRhdGEgPSB7IHc6IHcsIHI6IHIgfTtcblxuXHQgICAgICBpZiAoYXJnc1snbWFuYWdlJ10pIHtcblx0ICAgICAgICBkYXRhWydtJ10gPSBtO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh1dGlscy5pc0FycmF5KGNoYW5uZWwpKSB7XG5cdCAgICAgICAgY2hhbm5lbCA9IGNoYW5uZWxbJ2pvaW4nXSgnLCcpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh1dGlscy5pc0FycmF5KGF1dGhfa2V5KSkge1xuXHQgICAgICAgIGF1dGhfa2V5ID0gYXV0aF9rZXlbJ2pvaW4nXSgnLCcpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh0eXBlb2YgY2hhbm5lbCAhPSAndW5kZWZpbmVkJyAmJiBjaGFubmVsICE9IG51bGwgJiYgY2hhbm5lbC5sZW5ndGggPiAwKSBkYXRhWydjaGFubmVsJ10gPSBjaGFubmVsO1xuXHQgICAgICBpZiAodHlwZW9mIGNoYW5uZWxfZ3JvdXAgIT0gJ3VuZGVmaW5lZCcgJiYgY2hhbm5lbF9ncm91cCAhPSBudWxsICYmIGNoYW5uZWxfZ3JvdXAubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGRhdGFbJ2NoYW5uZWwtZ3JvdXAnXSA9IGNoYW5uZWxfZ3JvdXA7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGpzb25wICE9ICcwJykge1xuXHQgICAgICAgIGRhdGFbJ2NhbGxiYWNrJ10gPSBqc29ucDtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodHRsIHx8IHR0bCA9PT0gMCkgZGF0YVsndHRsJ10gPSB0dGw7XG5cblx0ICAgICAgaWYgKGF1dGhfa2V5KSBkYXRhWydhdXRoJ10gPSBhdXRoX2tleTtcblxuXHQgICAgICBkYXRhID0gX2dldF91cmxfcGFyYW1zKGRhdGEpO1xuXG5cdCAgICAgIGlmICghYXV0aF9rZXkpIGRlbGV0ZSBkYXRhWydhdXRoJ107XG5cblx0ICAgICAgZXhlY3V0ZVJlcXVlc3Qoe1xuXHQgICAgICAgIG9wZXJhdGlvbjogJ1BOQWNjZXNzTWFuYWdlckdyYW50Jyxcblx0ICAgICAgICBjYWxsYmFjazoganNvbnAsXG5cdCAgICAgICAgZGF0YTogZGF0YSxcblx0ICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICAgIF9pbnZva2VfY2FsbGJhY2socmVzcG9uc2UsIGNhbGxiYWNrLCBlcnIpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBfaW52b2tlX2Vycm9yKHJlc3BvbnNlLCBlcnIpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdXJsOiBbXG5cdCAgICAgICAgICBTVERfT1JJR0lOLCAndjEnLCAnYXV0aCcsICdncmFudCcsXG5cdCAgICAgICAgICAnc3ViLWtleScsIFNVQlNDUklCRV9LRVlcblx0ICAgICAgICBdXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblxuXHQgICAgLypcblx0ICAgICBQVUJOVUIubW9iaWxlX2d3X3Byb3Zpc2lvbiAoe1xuXHQgICAgIGRldmljZV9pZDogJ0E2NTVGQkE5OTMxQUInLFxuXHQgICAgIG9wICAgICAgIDogJ2FkZCcgfCAncmVtb3ZlJyxcblx0ICAgICBnd190eXBlICA6ICdhcG5zJyB8ICdnY20nLFxuXHQgICAgIGNoYW5uZWwgIDogJ215X2NoYXQnLFxuXHQgICAgIGNhbGxiYWNrIDogZnVuLFxuXHQgICAgIGVycm9yICAgIDogZnVuLFxuXHQgICAgIH0pO1xuXHQgICAgICovXG5cblx0ICAgIG1vYmlsZV9nd19wcm92aXNpb246IGZ1bmN0aW9uIChhcmdzKSB7XG5cdCAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbJ2NhbGxiYWNrJ10gfHwgZnVuY3Rpb24gKCkge307XG5cdCAgICAgIHZhciBhdXRoX2tleSA9IGFyZ3NbJ2F1dGhfa2V5J10gfHwgQVVUSF9LRVk7XG5cdCAgICAgIHZhciBlcnIgPSBhcmdzWydlcnJvciddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgICB2YXIganNvbnAgPSBqc29ucF9jYigpO1xuXHQgICAgICB2YXIgY2hhbm5lbCA9IGFyZ3NbJ2NoYW5uZWwnXTtcblx0ICAgICAgdmFyIG9wID0gYXJnc1snb3AnXTtcblx0ICAgICAgdmFyIGd3X3R5cGUgPSBhcmdzWydnd190eXBlJ107XG5cdCAgICAgIHZhciBkZXZpY2VfaWQgPSBhcmdzWydkZXZpY2VfaWQnXTtcblx0ICAgICAgdmFyIHBhcmFtcztcblx0ICAgICAgdmFyIHVybDtcblxuXHQgICAgICBpZiAoIWRldmljZV9pZCkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIERldmljZSBJRCAoZGV2aWNlX2lkKScpO1xuXHQgICAgICBpZiAoIWd3X3R5cGUpIHJldHVybiBlcnJvcignTWlzc2luZyBHVyBUeXBlIChnd190eXBlOiBnY20gb3IgYXBucyknKTtcblx0ICAgICAgaWYgKCFvcCkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIEdXIE9wZXJhdGlvbiAob3A6IGFkZCBvciByZW1vdmUpJyk7XG5cdCAgICAgIGlmICghY2hhbm5lbCkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIGd3IGRlc3RpbmF0aW9uIENoYW5uZWwgKGNoYW5uZWwpJyk7XG5cdCAgICAgIGlmICghU1VCU0NSSUJFX0tFWSkgcmV0dXJuIGVycm9yKCdNaXNzaW5nIFN1YnNjcmliZSBLZXknKTtcblxuXHQgICAgICAvLyBDcmVhdGUgVVJMXG5cdCAgICAgIHVybCA9IFtcblx0ICAgICAgICBTVERfT1JJR0lOLCAndjEvcHVzaC9zdWIta2V5Jyxcblx0ICAgICAgICBTVUJTQ1JJQkVfS0VZLCAnZGV2aWNlcycsIGRldmljZV9pZFxuXHQgICAgICBdO1xuXG5cdCAgICAgIHBhcmFtcyA9IHsgdXVpZDogVVVJRCwgYXV0aDogYXV0aF9rZXksIHR5cGU6IGd3X3R5cGUgfTtcblxuXHQgICAgICBpZiAob3AgPT0gJ2FkZCcpIHtcblx0ICAgICAgICBwYXJhbXNbJ2FkZCddID0gY2hhbm5lbDtcblx0ICAgICAgfSBlbHNlIGlmIChvcCA9PSAncmVtb3ZlJykge1xuXHQgICAgICAgIHBhcmFtc1sncmVtb3ZlJ10gPSBjaGFubmVsO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKFVTRV9JTlNUQU5DRUlEKSBwYXJhbXNbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cblx0ICAgICAgZXhlY3V0ZVJlcXVlc3Qoe1xuXHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0ICAgICAgICBkYXRhOiBwYXJhbXMsXG5cdCAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBfaW52b2tlX2NhbGxiYWNrKHJlc3BvbnNlLCBjYWxsYmFjaywgZXJyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgICAgX2ludm9rZV9lcnJvcihyZXNwb25zZSwgZXJyKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHVybDogdXJsXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblxuXHQgICAgLypcblx0ICAgICBQVUJOVUIuYXVkaXQoe1xuXHQgICAgIGNoYW5uZWwgIDogJ215X2NoYXQnLFxuXHQgICAgIGNhbGxiYWNrIDogZnVuLFxuXHQgICAgIGVycm9yICAgIDogZnVuLFxuXHQgICAgIHJlYWQgICAgIDogdHJ1ZSxcblx0ICAgICB3cml0ZSAgICA6IHRydWUsXG5cdCAgICAgYXV0aF9rZXkgOiAnM3k4dWlhamRrbHl0b3dzaidcblx0ICAgICB9KTtcblx0ICAgICAqL1xuXHQgICAgYXVkaXQ6IGZ1bmN0aW9uIChhcmdzLCBjYWxsYmFjaykge1xuXHQgICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzWydjYWxsYmFjayddIHx8IGNhbGxiYWNrO1xuXHQgICAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgdmFyIGNoYW5uZWwgPSBhcmdzWydjaGFubmVsJ107XG5cdCAgICAgIHZhciBjaGFubmVsX2dyb3VwID0gYXJnc1snY2hhbm5lbF9ncm91cCddO1xuXHQgICAgICB2YXIgYXV0aF9rZXkgPSBhcmdzWydhdXRoX2tleSddO1xuXHQgICAgICB2YXIganNvbnAgPSBqc29ucF9jYigpO1xuXG5cdCAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgQ2hhbm5lbFxuXHQgICAgICBpZiAoIWNhbGxiYWNrKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgQ2FsbGJhY2snKTtcblx0ICAgICAgaWYgKCFTVUJTQ1JJQkVfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU3Vic2NyaWJlIEtleScpO1xuXHQgICAgICBpZiAoIVBVQkxJU0hfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgUHVibGlzaCBLZXknKTtcblx0ICAgICAgaWYgKCFTRUNSRVRfS0VZKSByZXR1cm4gZXJyb3IoJ01pc3NpbmcgU2VjcmV0IEtleScpO1xuXG5cdCAgICAgIHZhciBkYXRhID0ge307XG5cdCAgICAgIGlmIChqc29ucCAhPSAnMCcpIHtcblx0ICAgICAgICBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHR5cGVvZiBjaGFubmVsICE9ICd1bmRlZmluZWQnICYmIGNoYW5uZWwgIT0gbnVsbCAmJiBjaGFubmVsLmxlbmd0aCA+IDApIGRhdGFbJ2NoYW5uZWwnXSA9IGNoYW5uZWw7XG5cdCAgICAgIGlmICh0eXBlb2YgY2hhbm5lbF9ncm91cCAhPSAndW5kZWZpbmVkJyAmJiBjaGFubmVsX2dyb3VwICE9IG51bGwgJiYgY2hhbm5lbF9ncm91cC5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgZGF0YVsnY2hhbm5lbC1ncm91cCddID0gY2hhbm5lbF9ncm91cDtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoYXV0aF9rZXkpIGRhdGFbJ2F1dGgnXSA9IGF1dGhfa2V5O1xuXG5cdCAgICAgIGRhdGEgPSBfZ2V0X3VybF9wYXJhbXMoZGF0YSk7XG5cblx0ICAgICAgaWYgKCFhdXRoX2tleSkgZGVsZXRlIGRhdGFbJ2F1dGgnXTtcblxuXHQgICAgICBleGVjdXRlUmVxdWVzdCh7XG5cdCAgICAgICAgb3BlcmF0aW9uOiAnUE5BY2Nlc3NNYW5hZ2VyQXVkaXQnLFxuXHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0ICAgICAgICBkYXRhOiBkYXRhLFxuXHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgICAgX2ludm9rZV9jYWxsYmFjayhyZXNwb25zZSwgY2FsbGJhY2ssIGVycik7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICAgIF9pbnZva2VfZXJyb3IocmVzcG9uc2UsIGVycik7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICB1cmw6IFtcblx0ICAgICAgICAgIFNURF9PUklHSU4sICd2MScsICdhdXRoJywgJ2F1ZGl0Jyxcblx0ICAgICAgICAgICdzdWIta2V5JywgU1VCU0NSSUJFX0tFWVxuXHQgICAgICAgIF1cblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXG5cdCAgICAvKlxuXHQgICAgIFBVQk5VQi5yZXZva2Uoe1xuXHQgICAgIGNoYW5uZWwgIDogJ215X2NoYXQnLFxuXHQgICAgIGNhbGxiYWNrIDogZnVuLFxuXHQgICAgIGVycm9yICAgIDogZnVuLFxuXHQgICAgIGF1dGhfa2V5IDogJzN5OHVpYWpka2x5dG93c2onXG5cdCAgICAgfSk7XG5cdCAgICAgKi9cblx0ICAgIHJldm9rZTogZnVuY3Rpb24gKGFyZ3MsIGNhbGxiYWNrKSB7XG5cdCAgICAgIGFyZ3NbJ3JlYWQnXSA9IGZhbHNlO1xuXHQgICAgICBhcmdzWyd3cml0ZSddID0gZmFsc2U7XG5cdCAgICAgIFNFTEZbJ2dyYW50J10oYXJncywgY2FsbGJhY2spO1xuXHQgICAgfSxcblxuXHQgICAgc2V0X3V1aWQ6IGZ1bmN0aW9uICh1dWlkKSB7XG5cdCAgICAgIFVVSUQgPSB1dWlkO1xuXHQgICAgICBDT05ORUNUKCk7XG5cdCAgICB9LFxuXG5cdCAgICBnZXRfdXVpZDogZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gVVVJRDtcblx0ICAgIH0sXG5cblx0ICAgIGlzQXJyYXk6IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgcmV0dXJuIHV0aWxzLmlzQXJyYXkoYXJnKTtcblx0ICAgIH0sXG5cblx0ICAgIGdldF9zdWJzY3JpYmVkX2NoYW5uZWxzOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBnZW5lcmF0ZV9jaGFubmVsX2xpc3QoQ0hBTk5FTFMsIHRydWUpO1xuXHQgICAgfSxcblxuXHQgICAgcHJlc2VuY2VfaGVhcnRiZWF0OiBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzWydjYWxsYmFjayddIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgICB2YXIgZXJyID0gYXJnc1snZXJyb3InXSB8fCBmdW5jdGlvbiAoKSB7fTtcblx0ICAgICAgdmFyIGpzb25wID0ganNvbnBfY2IoKTtcblx0ICAgICAgdmFyIGRhdGEgPSB7IHV1aWQ6IFVVSUQsIGF1dGg6IEFVVEhfS0VZIH07XG5cblx0ICAgICAgdmFyIHN0ID0gSlNPTlsnc3RyaW5naWZ5J10oU1RBVEUpO1xuXHQgICAgICBpZiAoc3QubGVuZ3RoID4gMikgZGF0YVsnc3RhdGUnXSA9IEpTT05bJ3N0cmluZ2lmeSddKFNUQVRFKTtcblxuXHQgICAgICBpZiAoUFJFU0VOQ0VfSEIgPiAwICYmIFBSRVNFTkNFX0hCIDwgMzIwKSBkYXRhWydoZWFydGJlYXQnXSA9IFBSRVNFTkNFX0hCO1xuXG5cdCAgICAgIGlmIChqc29ucCAhPSAnMCcpIHtcblx0ICAgICAgICBkYXRhWydjYWxsYmFjayddID0ganNvbnA7XG5cdCAgICAgIH1cblxuXHQgICAgICB2YXIgY2hhbm5lbHMgPSB1dGlscy5lbmNvZGUoZ2VuZXJhdGVfY2hhbm5lbF9saXN0KENIQU5ORUxTLCB0cnVlKVsnam9pbiddKCcsJykpO1xuXHQgICAgICB2YXIgY2hhbm5lbF9ncm91cHMgPSBnZW5lcmF0ZV9jaGFubmVsX2dyb3VwX2xpc3QoQ0hBTk5FTF9HUk9VUFMsIHRydWUpWydqb2luJ10oJywnKTtcblxuXHQgICAgICBpZiAoIWNoYW5uZWxzKSBjaGFubmVscyA9ICcsJztcblx0ICAgICAgaWYgKGNoYW5uZWxfZ3JvdXBzKSBkYXRhWydjaGFubmVsLWdyb3VwJ10gPSBjaGFubmVsX2dyb3VwcztcblxuXHQgICAgICBpZiAoVVNFX0lOU1RBTkNFSUQpIGRhdGFbJ2luc3RhbmNlaWQnXSA9IElOU1RBTkNFSUQ7XG5cblx0ICAgICAgZXhlY3V0ZVJlcXVlc3Qoe1xuXHQgICAgICAgIGNhbGxiYWNrOiBqc29ucCxcblx0ICAgICAgICBkYXRhOiBfZ2V0X3VybF9wYXJhbXMoZGF0YSksXG5cdCAgICAgICAgdXJsOiBbXG5cdCAgICAgICAgICBTVERfT1JJR0lOLCAndjInLCAncHJlc2VuY2UnLFxuXHQgICAgICAgICAgJ3N1Yi1rZXknLCBTVUJTQ1JJQkVfS0VZLFxuXHQgICAgICAgICAgJ2NoYW5uZWwnLCBjaGFubmVscyxcblx0ICAgICAgICAgICdoZWFydGJlYXQnXG5cdCAgICAgICAgXSxcblx0ICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICAgIF9pbnZva2VfY2FsbGJhY2socmVzcG9uc2UsIGNhbGxiYWNrLCBlcnIpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICBfaW52b2tlX2Vycm9yKHJlc3BvbnNlLCBlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXG5cdCAgICBzdG9wX3RpbWVyczogZnVuY3Rpb24gKCkge1xuXHQgICAgICBjbGVhclRpbWVvdXQoX3BvbGxfdGltZXIpO1xuXHQgICAgICBjbGVhclRpbWVvdXQoX3BvbGxfdGltZXIyKTtcblx0ICAgICAgY2xlYXJUaW1lb3V0KFBSRVNFTkNFX0hCX1RJTUVPVVQpO1xuXHQgICAgfSxcblxuXHQgICAgc2h1dGRvd246IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgU0VMRlsnc3RvcF90aW1lcnMnXSgpO1xuXHQgICAgICBzaHV0ZG93biAmJiBzaHV0ZG93bigpO1xuXHQgICAgfSxcblxuXHQgICAgLy8gRXhwb3NlIFBVQk5VQiBGdW5jdGlvbnNcblx0ICAgIHhkcjogeGRyLFxuXHQgICAgcmVhZHk6IHJlYWR5LFxuXHQgICAgZGI6IGRiLFxuXHQgICAgdXVpZDogdXRpbHMuZ2VuZXJhdGVVVUlELFxuXHQgICAgbWFwOiB1dGlscy5tYXAsXG5cdCAgICBlYWNoOiB1dGlscy5lYWNoLFxuXHQgICAgJ2VhY2gtY2hhbm5lbCc6IGVhY2hfY2hhbm5lbCxcblx0ICAgIGdyZXA6IHV0aWxzLmdyZXAsXG5cdCAgICBvZmZsaW5lOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9yZXNldF9vZmZsaW5lKDEsIHsgbWVzc2FnZTogJ09mZmxpbmUuIFBsZWFzZSBjaGVjayB5b3VyIG5ldHdvcmsgc2V0dGluZ3MuJyB9KTtcblx0ICAgIH0sXG5cdCAgICBzdXBwbGFudDogdXRpbHMuc3VwcGxhbnQsXG5cdCAgICBub3c6IHV0aWxzLnJub3csXG5cdCAgICB1bmlxdWU6IHVuaXF1ZSxcblx0ICAgIHVwZGF0ZXI6IHV0aWxzLnVwZGF0ZXJcblx0ICB9O1xuXG5cdCAgZnVuY3Rpb24gX3BvbGxfb25saW5lKCkge1xuXHQgICAgX2lzX29ubGluZSgpIHx8IF9yZXNldF9vZmZsaW5lKDEsIHsgZXJyb3I6ICdPZmZsaW5lLiBQbGVhc2UgY2hlY2sgeW91ciBuZXR3b3JrIHNldHRpbmdzLicgfSk7XG5cdCAgICBfcG9sbF90aW1lciAmJiBjbGVhclRpbWVvdXQoX3BvbGxfdGltZXIpO1xuXHQgICAgX3BvbGxfdGltZXIgPSB1dGlscy50aW1lb3V0KF9wb2xsX29ubGluZSwgU0VDT05EKTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBfcG9sbF9vbmxpbmUyKCkge1xuXHQgICAgaWYgKCFUSU1FX0NIRUNLKSByZXR1cm47XG5cdCAgICBTRUxGWyd0aW1lJ10oZnVuY3Rpb24gKHN1Y2Nlc3MpIHtcblx0ICAgICAgZGV0ZWN0X3RpbWVfZGV0bGEoZnVuY3Rpb24gKCkge1xuXHQgICAgICB9LCBzdWNjZXNzKTtcblx0ICAgICAgc3VjY2VzcyB8fCBfcmVzZXRfb2ZmbGluZSgxLCB7XG5cdCAgICAgICAgZXJyb3I6ICdIZWFydGJlYXQgZmFpbGVkIHRvIGNvbm5lY3QgdG8gUHVibnViIFNlcnZlcnMuJyArXG5cdCAgICAgICAgJ1BsZWFzZSBjaGVjayB5b3VyIG5ldHdvcmsgc2V0dGluZ3MuJ1xuXHQgICAgICB9KTtcblx0ICAgICAgX3BvbGxfdGltZXIyICYmIGNsZWFyVGltZW91dChfcG9sbF90aW1lcjIpO1xuXHQgICAgICBfcG9sbF90aW1lcjIgPSB1dGlscy50aW1lb3V0KF9wb2xsX29ubGluZTIsIEtFRVBBTElWRSk7XG5cdCAgICB9KTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBfcmVzZXRfb2ZmbGluZShlcnIsIG1zZykge1xuXHQgICAgU1VCX1JFQ0VJVkVSICYmIFNVQl9SRUNFSVZFUihlcnIsIG1zZyk7XG5cdCAgICBTVUJfUkVDRUlWRVIgPSBudWxsO1xuXG5cdCAgICBjbGVhclRpbWVvdXQoX3BvbGxfdGltZXIpO1xuXHQgICAgY2xlYXJUaW1lb3V0KF9wb2xsX3RpbWVyMik7XG5cdCAgfVxuXG5cdCAgaWYgKCFVVUlEKSBVVUlEID0gU0VMRlsndXVpZCddKCk7XG5cdCAgaWYgKCFJTlNUQU5DRUlEKSBJTlNUQU5DRUlEID0gU0VMRlsndXVpZCddKCk7XG5cdCAgZGJbJ3NldCddKFNVQlNDUklCRV9LRVkgKyAndXVpZCcsIFVVSUQpO1xuXG5cdCAgX3BvbGxfdGltZXIgPSB1dGlscy50aW1lb3V0KF9wb2xsX29ubGluZSwgU0VDT05EKTtcblx0ICBfcG9sbF90aW1lcjIgPSB1dGlscy50aW1lb3V0KF9wb2xsX29ubGluZTIsIEtFRVBBTElWRSk7XG5cdCAgUFJFU0VOQ0VfSEJfVElNRU9VVCA9IHV0aWxzLnRpbWVvdXQoXG5cdCAgICBzdGFydF9wcmVzZW5jZV9oZWFydGJlYXQsXG5cdCAgICAoUFJFU0VOQ0VfSEJfSU5URVJWQUwgLSAzKSAqIFNFQ09ORFxuXHQgICk7XG5cblx0ICAvLyBEZXRlY3QgQWdlIG9mIE1lc3NhZ2Vcblx0ICBmdW5jdGlvbiBkZXRlY3RfbGF0ZW5jeSh0dCkge1xuXHQgICAgdmFyIGFkanVzdGVkX3RpbWUgPSB1dGlscy5ybm93KCkgLSBUSU1FX0RSSUZUO1xuXHQgICAgcmV0dXJuIGFkanVzdGVkX3RpbWUgLSB0dCAvIDEwMDAwO1xuXHQgIH1cblxuXHQgIGRldGVjdF90aW1lX2RldGxhKCk7XG5cdCAgZnVuY3Rpb24gZGV0ZWN0X3RpbWVfZGV0bGEoY2IsIHRpbWUpIHtcblx0ICAgIHZhciBzdGltZSA9IHV0aWxzLnJub3coKTtcblxuXHQgICAgdGltZSAmJiBjYWxjdWxhdGUodGltZSkgfHwgU0VMRlsndGltZSddKGNhbGN1bGF0ZSk7XG5cblx0ICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZSh0aW1lKSB7XG5cdCAgICAgIGlmICghdGltZSkgcmV0dXJuO1xuXHQgICAgICB2YXIgcHRpbWUgPSB0aW1lIC8gMTAwMDA7XG5cdCAgICAgIHZhciBsYXRlbmN5ID0gKHV0aWxzLnJub3coKSAtIHN0aW1lKSAvIDI7XG5cdCAgICAgIFRJTUVfRFJJRlQgPSB1dGlscy5ybm93KCkgLSAocHRpbWUgKyBsYXRlbmN5KTtcblx0ICAgICAgY2IgJiYgY2IoVElNRV9EUklGVCk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgcmV0dXJuIFNFTEY7XG5cdH1cblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBQTl9BUEk6IFBOX0FQSSxcblx0ICB1bmlxdWU6IHVuaXF1ZSxcblx0ICBQTm1lc3NhZ2U6IFBObWVzc2FnZSxcblx0ICBERUZfVElNRU9VVDogREVGX1RJTUVPVVQsXG5cdCAgdGltZW91dDogdXRpbHMudGltZW91dCxcblx0ICBidWlsZF91cmw6IHV0aWxzLmJ1aWxkVVJMLFxuXHQgIGVhY2g6IHV0aWxzLmVhY2gsXG5cdCAgdXVpZDogdXRpbHMuZ2VuZXJhdGVVVUlELFxuXHQgIFVSTEJJVDogZGVmYXVsdENvbmZpZ3VyYXRpb24uVVJMQklULFxuXHQgIGdyZXA6IHV0aWxzLmdyZXAsXG5cdCAgc3VwcGxhbnQ6IHV0aWxzLnN1cHBsYW50LFxuXHQgIG5vdzogdXRpbHMucm5vdyxcblx0ICB1cGRhdGVyOiB1dGlscy51cGRhdGVyLFxuXHQgIG1hcDogdXRpbHMubWFwXG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHRcdFwibmFtZVwiOiBcInB1Ym51YlwiLFxuXHRcdFwicHJlZmVyR2xvYmFsXCI6IGZhbHNlLFxuXHRcdFwidmVyc2lvblwiOiBcIjMuMTYuM1wiLFxuXHRcdFwiYXV0aG9yXCI6IFwiUHViTnViIDxzdXBwb3J0QHB1Ym51Yi5jb20+XCIsXG5cdFx0XCJkZXNjcmlwdGlvblwiOiBcIlB1Ymxpc2ggJiBTdWJzY3JpYmUgUmVhbC10aW1lIE1lc3NhZ2luZyB3aXRoIFB1Yk51YlwiLFxuXHRcdFwiY29udHJpYnV0b3JzXCI6IFtcblx0XHRcdHtcblx0XHRcdFx0XCJuYW1lXCI6IFwiU3RlcGhlbiBCbHVtXCIsXG5cdFx0XHRcdFwiZW1haWxcIjogXCJzdGVwaGVuQHB1Ym51Yi5jb21cIlxuXHRcdFx0fVxuXHRcdF0sXG5cdFx0XCJiaW5cIjoge30sXG5cdFx0XCJzY3JpcHRzXCI6IHtcblx0XHRcdFwidGVzdFwiOiBcImdydW50IHRlc3QgLS1mb3JjZVwiXG5cdFx0fSxcblx0XHRcIm1haW5cIjogXCIuL25vZGUuanMvcHVibnViLmpzXCIsXG5cdFx0XCJicm93c2VyXCI6IFwiLi9tb2Rlcm4vZGlzdC9wdWJudWIuanNcIixcblx0XHRcInJlcG9zaXRvcnlcIjoge1xuXHRcdFx0XCJ0eXBlXCI6IFwiZ2l0XCIsXG5cdFx0XHRcInVybFwiOiBcImdpdDovL2dpdGh1Yi5jb20vcHVibnViL2phdmFzY3JpcHQuZ2l0XCJcblx0XHR9LFxuXHRcdFwia2V5d29yZHNcIjogW1xuXHRcdFx0XCJjbG91ZFwiLFxuXHRcdFx0XCJwdWJsaXNoXCIsXG5cdFx0XHRcInN1YnNjcmliZVwiLFxuXHRcdFx0XCJ3ZWJzb2NrZXRzXCIsXG5cdFx0XHRcImNvbWV0XCIsXG5cdFx0XHRcImJvc2hcIixcblx0XHRcdFwieG1wcFwiLFxuXHRcdFx0XCJyZWFsLXRpbWVcIixcblx0XHRcdFwibWVzc2FnaW5nXCJcblx0XHRdLFxuXHRcdFwiZGVwZW5kZW5jaWVzXCI6IHtcblx0XHRcdFwiYWdlbnRrZWVwYWxpdmVcIjogXCJ+MC4yXCIsXG5cdFx0XHRcImxvZGFzaFwiOiBcIl40LjEuMFwiXG5cdFx0fSxcblx0XHRcIm5vQW5hbHl6ZVwiOiBmYWxzZSxcblx0XHRcImRldkRlcGVuZGVuY2llc1wiOiB7XG5cdFx0XHRcImNoYWlcIjogXCJeMy41LjBcIixcblx0XHRcdFwiZXNsaW50XCI6IFwiMi40LjBcIixcblx0XHRcdFwiZXNsaW50LWNvbmZpZy1haXJibmJcIjogXCJeNi4wLjJcIixcblx0XHRcdFwiZXNsaW50LXBsdWdpbi1mbG93dHlwZVwiOiBcIl4yLjEuMFwiLFxuXHRcdFx0XCJlc2xpbnQtcGx1Z2luLW1vY2hhXCI6IFwiXjIuMC4wXCIsXG5cdFx0XHRcImVzbGludC1wbHVnaW4tcmVhY3RcIjogXCJeNC4xLjBcIixcblx0XHRcdFwiZmxvdy1iaW5cIjogXCJeMC4yMi4wXCIsXG5cdFx0XHRcImdydW50XCI6IFwiXjAuNC41XCIsXG5cdFx0XHRcImdydW50LWNvbnRyaWItY2xlYW5cIjogXCJeMS4wLjBcIixcblx0XHRcdFwiZ3J1bnQtY29udHJpYi1jb3B5XCI6IFwiXjAuOC4yXCIsXG5cdFx0XHRcImdydW50LWNvbnRyaWItdWdsaWZ5XCI6IFwiXjAuMTEuMVwiLFxuXHRcdFx0XCJncnVudC1lbnZcIjogXCJeMC40LjRcIixcblx0XHRcdFwiZ3J1bnQtZXNsaW50XCI6IFwiXjE4LjAuMFwiLFxuXHRcdFx0XCJncnVudC1mbG93XCI6IFwiXjEuMC4zXCIsXG5cdFx0XHRcImdydW50LWthcm1hXCI6IFwiXjAuMTIuMVwiLFxuXHRcdFx0XCJncnVudC1tb2NoYS1pc3RhbmJ1bFwiOiBcIl4zLjAuMVwiLFxuXHRcdFx0XCJncnVudC10ZXh0LXJlcGxhY2VcIjogXCJeMC40LjBcIixcblx0XHRcdFwiZ3J1bnQtd2VicGFja1wiOiBcIl4xLjAuMTFcIixcblx0XHRcdFwiaW1wb3J0cy1sb2FkZXJcIjogXCJeMC42LjVcIixcblx0XHRcdFwiaXNwYXJ0YVwiOiBcIl40LjAuMFwiLFxuXHRcdFx0XCJqc29uLWxvYWRlclwiOiBcIl4wLjUuNFwiLFxuXHRcdFx0XCJrYXJtYVwiOiBcIl4wLjEzLjIxXCIsXG5cdFx0XHRcImthcm1hLWNoYWlcIjogXCJeMC4xLjBcIixcblx0XHRcdFwia2FybWEtbW9jaGFcIjogXCJeMC4yLjFcIixcblx0XHRcdFwia2FybWEtcGhhbnRvbWpzLWxhdW5jaGVyXCI6IFwiXjEuMC4wXCIsXG5cdFx0XHRcImthcm1hLXNwZWMtcmVwb3J0ZXJcIjogXCIwLjAuMjRcIixcblx0XHRcdFwibG9hZC1ncnVudC10YXNrc1wiOiBcIl4zLjQuMFwiLFxuXHRcdFx0XCJtb2NoYVwiOiBcIl4yLjQuNVwiLFxuXHRcdFx0XCJub2NrXCI6IFwiXjEuMS4wXCIsXG5cdFx0XHRcIm5vZGUtdXVpZFwiOiBcIl4xLjQuN1wiLFxuXHRcdFx0XCJub2RldW5pdFwiOiBcIl4wLjkuMFwiLFxuXHRcdFx0XCJwaGFudG9tanMtcHJlYnVpbHRcIjogXCJeMi4xLjRcIixcblx0XHRcdFwicHJveHlxdWlyZVwiOiBcIl4xLjcuNFwiLFxuXHRcdFx0XCJzaW5vblwiOiBcIl4xLjE3LjJcIixcblx0XHRcdFwidWdsaWZ5LWpzXCI6IFwiXjIuNi4xXCIsXG5cdFx0XHRcInVuZGVyc2NvcmVcIjogXCJeMS43LjBcIixcblx0XHRcdFwid2VicGFja1wiOiBcIl4xLjEyLjEzXCIsXG5cdFx0XHRcIndlYnBhY2stZGV2LXNlcnZlclwiOiBcIl4xLjE0LjFcIlxuXHRcdH0sXG5cdFx0XCJidW5kbGVEZXBlbmRlbmNpZXNcIjogW10sXG5cdFx0XCJsaWNlbnNlXCI6IFwiTUlUXCIsXG5cdFx0XCJlbmdpbmVcIjoge1xuXHRcdFx0XCJub2RlXCI6IFwiPj0wLjhcIlxuXHRcdH0sXG5cdFx0XCJmaWxlc1wiOiBbXG5cdFx0XHRcImNvcmVcIixcblx0XHRcdFwibm9kZS5qc1wiLFxuXHRcdFx0XCJtb2Rlcm5cIixcblx0XHRcdFwiQ0hBTkdFTE9HXCIsXG5cdFx0XHRcIkZVVFVSRS5tZFwiLFxuXHRcdFx0XCJMSUNFTlNFXCIsXG5cdFx0XHRcIlJFQURNRS5tZFwiXG5cdFx0XVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdFx0XCJQQVJBTVNCSVRcIjogXCImXCIsXG5cdFx0XCJVUkxCSVRcIjogXCIvXCJcblx0fTtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIGVzbGludCBuby11bnVzZWQtZXhwcmVzc2lvbnM6IDAsIGJsb2NrLXNjb3BlZC12YXI6IDAsIG5vLXJlZGVjbGFyZTogMCwgZ3VhcmQtZm9yLWluOiAwICovXG5cblx0dmFyIGRlZmF1bHRDb25maWd1cmF0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIFJFUEwgPSAveyhbXFx3XFwtXSspfS9nO1xuXG5cdGZ1bmN0aW9uIHJub3coKSB7XG5cdCAgcmV0dXJuICtuZXcgRGF0ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGlzQXJyYXkoYXJnKSB7XG5cdCAgcmV0dXJuICEhYXJnICYmIHR5cGVvZiBhcmcgIT09ICdzdHJpbmcnICYmIChBcnJheS5pc0FycmF5ICYmIEFycmF5LmlzQXJyYXkoYXJnKSB8fCB0eXBlb2YoYXJnLmxlbmd0aCkgPT09ICdudW1iZXInKTtcblx0ICAvLyByZXR1cm4gISFhcmcgJiYgKEFycmF5LmlzQXJyYXkgJiYgQXJyYXkuaXNBcnJheShhcmcpIHx8IHR5cGVvZihhcmcubGVuZ3RoKSA9PT0gXCJudW1iZXJcIilcblx0fVxuXG5cdC8qKlxuXHQgKiBFQUNIXG5cdCAqID09PT1cblx0ICogZWFjaCggWzEsMiwzXSwgZnVuY3Rpb24oaXRlbSkgeyB9IClcblx0ICovXG5cdGZ1bmN0aW9uIGVhY2gobywgZikge1xuXHQgIGlmICghbyB8fCAhZikge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblxuXHQgIGlmIChpc0FycmF5KG8pKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IG8ubGVuZ3RoOyBpIDwgbDspIHtcblx0ICAgICAgZi5jYWxsKG9baV0sIG9baV0sIGkrKyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGZvciAodmFyIGkgaW4gbykge1xuXHQgICAgICBvLmhhc093blByb3BlcnR5ICYmXG5cdCAgICAgIG8uaGFzT3duUHJvcGVydHkoaSkgJiZcblx0ICAgICAgZi5jYWxsKG9baV0sIGksIG9baV0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXG5cdC8qKlxuXHQgKiBFTkNPREVcblx0ICogPT09PT09XG5cdCAqIHZhciBlbmNvZGVkX2RhdGEgPSBlbmNvZGUoJ3BhdGgnKTtcblx0ICovXG5cdGZ1bmN0aW9uIGVuY29kZShwYXRoKSB7IHJldHVybiBlbmNvZGVVUklDb21wb25lbnQocGF0aCk7IH1cblxuXHQvKipcblx0ICogQnVpbGQgVXJsXG5cdCAqID09PT09PT1cblx0ICpcblx0ICovXG5cdGZ1bmN0aW9uIGJ1aWxkVVJMKHVybENvbXBvbmVudHMsIHVybFBhcmFtcykge1xuXHQgIHZhciB1cmwgPSB1cmxDb21wb25lbnRzLmpvaW4oZGVmYXVsdENvbmZpZ3VyYXRpb24uVVJMQklUKTtcblx0ICB2YXIgcGFyYW1zID0gW107XG5cblx0ICBpZiAoIXVybFBhcmFtcykgcmV0dXJuIHVybDtcblxuXHQgIGVhY2godXJsUGFyYW1zLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgdmFyIHZhbHVlU3RyID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpID8gSlNPTlsnc3RyaW5naWZ5J10odmFsdWUpIDogdmFsdWU7XG5cdCAgICAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICB2YWx1ZSAhPT0gbnVsbCAmJiBlbmNvZGUodmFsdWVTdHIpLmxlbmd0aCA+IDBcblx0ICAgICkgJiYgcGFyYW1zLnB1c2goa2V5ICsgJz0nICsgZW5jb2RlKHZhbHVlU3RyKSk7XG5cdCAgfSk7XG5cblx0ICB1cmwgKz0gJz8nICsgcGFyYW1zLmpvaW4oZGVmYXVsdENvbmZpZ3VyYXRpb24uUEFSQU1TQklUKTtcblx0ICByZXR1cm4gdXJsO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVQREFURVJcblx0ICogPT09PT09PVxuXHQgKiB2YXIgdGltZXN0YW1wID0gdW5pcXVlKCk7XG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGVyKGZ1biwgcmF0ZSkge1xuXHQgIHZhciB0aW1lb3V0O1xuXHQgIHZhciBsYXN0ID0gMDtcblx0ICB2YXIgcnVubml0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGxhc3QgKyByYXRlID4gcm5vdygpKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0ICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQocnVubml0LCByYXRlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxhc3QgPSBybm93KCk7XG5cdCAgICAgIGZ1bigpO1xuXHQgICAgfVxuXHQgIH07XG5cblx0ICByZXR1cm4gcnVubml0O1xuXHR9XG5cblx0LyoqXG5cdCAqIEdSRVBcblx0ICogPT09PVxuXHQgKiB2YXIgbGlzdCA9IGdyZXAoIFsxLDIsM10sIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0gJSAyIH0gKVxuXHQgKi9cblx0ZnVuY3Rpb24gZ3JlcChsaXN0LCBmdW4pIHtcblx0ICB2YXIgZmluID0gW107XG5cdCAgZWFjaChsaXN0IHx8IFtdLCBmdW5jdGlvbiAobCkge1xuXHQgICAgZnVuKGwpICYmIGZpbi5wdXNoKGwpO1xuXHQgIH0pO1xuXHQgIHJldHVybiBmaW47XG5cdH1cblxuXHQvKipcblx0ICogU1VQUExBTlRcblx0ICogPT09PT09PT1cblx0ICogdmFyIHRleHQgPSBzdXBwbGFudCggJ0hlbGxvIHtuYW1lfSEnLCB7IG5hbWUgOiAnSm9obicgfSApXG5cdCAqL1xuXHRmdW5jdGlvbiBzdXBwbGFudChzdHIsIHZhbHVlcykge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShSRVBMLCBmdW5jdGlvbiAoXywgbWF0Y2gpIHtcblx0ICAgIHJldHVybiB2YWx1ZXNbbWF0Y2hdIHx8IF87XG5cdCAgfSk7XG5cdH1cblxuXHQvKipcblx0ICogdGltZW91dFxuXHQgKiA9PT09PT09XG5cdCAqIHRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMTAwICk7XG5cdCAqL1xuXHRmdW5jdGlvbiB0aW1lb3V0KGZ1biwgd2FpdCkge1xuXHQgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cblx0ICByZXR1cm4gc2V0VGltZW91dChmdW4sIHdhaXQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIHV1aWRcblx0ICogPT09PVxuXHQgKiB2YXIgbXlfdXVpZCA9IGdlbmVyYXRlVVVJRCgpO1xuXHQgKi9cblx0ZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKGNhbGxiYWNrKSB7XG5cdCAgdmFyIHUgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csXG5cdCAgICBmdW5jdGlvbiAoYykge1xuXHQgICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDA7XG5cdCAgICAgIHZhciB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KTtcblx0ICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuXHQgICAgfSk7XG5cdCAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayh1KTtcblx0ICByZXR1cm4gdTtcblx0fVxuXG5cdC8qKlxuXHQgKiBNQVBcblx0ICogPT09XG5cdCAqIHZhciBsaXN0ID0gbWFwKCBbMSwyLDNdLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtICsgMSB9IClcblx0ICovXG5cdGZ1bmN0aW9uIG1hcChsaXN0LCBmdW4pIHtcblx0ICB2YXIgZmluID0gW107XG5cdCAgZWFjaChsaXN0IHx8IFtdLCBmdW5jdGlvbiAoaywgdikge1xuXHQgICAgZmluLnB1c2goZnVuKGssIHYpKTtcblx0ICB9KTtcblx0ICByZXR1cm4gZmluO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBwYW1FbmNvZGUoc3RyKSB7XG5cdCAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoL1shJygpKn5dL2csIGZ1bmN0aW9uIChjKSB7XG5cdCAgICByZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHQgIH0pO1xuXHR9XG5cblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBidWlsZFVSTDogYnVpbGRVUkwsXG5cdCAgZW5jb2RlOiBlbmNvZGUsXG5cdCAgZWFjaDogZWFjaCxcblx0ICB1cGRhdGVyOiB1cGRhdGVyLFxuXHQgIHJub3c6IHJub3csXG5cdCAgaXNBcnJheTogaXNBcnJheSxcblx0ICBtYXA6IG1hcCxcblx0ICBwYW1FbmNvZGU6IHBhbUVuY29kZSxcblx0ICBnZW5lcmF0ZVVVSUQ6IGdlbmVyYXRlVVVJRCxcblx0ICB0aW1lb3V0OiB0aW1lb3V0LFxuXHQgIHN1cHBsYW50OiBzdXBwbGFudCxcblx0ICBncmVwOiBncmVwXG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIGVzbGludCBjYW1lbGNhc2U6IDAgZXFlcWVxOiAwICovXG5cblx0dmFyIENyeXB0b0pTID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxuXHRmdW5jdGlvbiBjcnlwdG9fb2JqKCkge1xuXHQgIGZ1bmN0aW9uIFNIQTI1NihzKSB7XG5cdCAgICByZXR1cm4gQ3J5cHRvSlNbJ1NIQTI1NiddKHMpWyd0b1N0cmluZyddKENyeXB0b0pTWydlbmMnXVsnSGV4J10pO1xuXHQgIH1cblxuXHQgIHZhciBpdiA9ICcwMTIzNDU2Nzg5MDEyMzQ1JztcblxuXHQgIHZhciBhbGxvd2VkS2V5RW5jb2RpbmdzID0gWydoZXgnLCAndXRmOCcsICdiYXNlNjQnLCAnYmluYXJ5J107XG5cdCAgdmFyIGFsbG93ZWRLZXlMZW5ndGhzID0gWzEyOCwgMjU2XTtcblx0ICB2YXIgYWxsb3dlZE1vZGVzID0gWydlY2InLCAnY2JjJ107XG5cblx0ICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG5cdCAgICBlbmNyeXB0S2V5OiB0cnVlLFxuXHQgICAga2V5RW5jb2Rpbmc6ICd1dGY4Jyxcblx0ICAgIGtleUxlbmd0aDogMjU2LFxuXHQgICAgbW9kZTogJ2NiYydcblx0ICB9O1xuXG5cdCAgZnVuY3Rpb24gcGFyc2Vfb3B0aW9ucyhvcHRpb25zKSB7XG5cdCAgICAvLyBEZWZhdWx0c1xuXHQgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgICBpZiAoIW9wdGlvbnNbJ2hhc093blByb3BlcnR5J10oJ2VuY3J5cHRLZXknKSkgb3B0aW9uc1snZW5jcnlwdEtleSddID0gZGVmYXVsdE9wdGlvbnNbJ2VuY3J5cHRLZXknXTtcblx0ICAgIGlmICghb3B0aW9uc1snaGFzT3duUHJvcGVydHknXSgna2V5RW5jb2RpbmcnKSkgb3B0aW9uc1sna2V5RW5jb2RpbmcnXSA9IGRlZmF1bHRPcHRpb25zWydrZXlFbmNvZGluZyddO1xuXHQgICAgaWYgKCFvcHRpb25zWydoYXNPd25Qcm9wZXJ0eSddKCdrZXlMZW5ndGgnKSkgb3B0aW9uc1sna2V5TGVuZ3RoJ10gPSBkZWZhdWx0T3B0aW9uc1sna2V5TGVuZ3RoJ107XG5cdCAgICBpZiAoIW9wdGlvbnNbJ2hhc093blByb3BlcnR5J10oJ21vZGUnKSkgb3B0aW9uc1snbW9kZSddID0gZGVmYXVsdE9wdGlvbnNbJ21vZGUnXTtcblxuXHQgICAgLy8gVmFsaWRhdGlvblxuXHQgICAgaWYgKGFsbG93ZWRLZXlFbmNvZGluZ3NbJ2luZGV4T2YnXShvcHRpb25zWydrZXlFbmNvZGluZyddWyd0b0xvd2VyQ2FzZSddKCkpID09IC0xKSBvcHRpb25zWydrZXlFbmNvZGluZyddID0gZGVmYXVsdE9wdGlvbnNbJ2tleUVuY29kaW5nJ107XG5cdCAgICBpZiAoYWxsb3dlZEtleUxlbmd0aHNbJ2luZGV4T2YnXShwYXJzZUludChvcHRpb25zWydrZXlMZW5ndGgnXSwgMTApKSA9PSAtMSkgb3B0aW9uc1sna2V5TGVuZ3RoJ10gPSBkZWZhdWx0T3B0aW9uc1sna2V5TGVuZ3RoJ107XG5cdCAgICBpZiAoYWxsb3dlZE1vZGVzWydpbmRleE9mJ10ob3B0aW9uc1snbW9kZSddWyd0b0xvd2VyQ2FzZSddKCkpID09IC0xKSBvcHRpb25zWydtb2RlJ10gPSBkZWZhdWx0T3B0aW9uc1snbW9kZSddO1xuXG5cdCAgICByZXR1cm4gb3B0aW9ucztcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBkZWNvZGVfa2V5KGtleSwgb3B0aW9ucykge1xuXHQgICAgaWYgKG9wdGlvbnNbJ2tleUVuY29kaW5nJ10gPT09ICdiYXNlNjQnKSB7XG5cdCAgICAgIHJldHVybiBDcnlwdG9KU1snZW5jJ11bJ0Jhc2U2NCddWydwYXJzZSddKGtleSk7XG5cdCAgICB9IGVsc2UgaWYgKG9wdGlvbnNbJ2tleUVuY29kaW5nJ10gPT09ICdoZXgnKSB7XG5cdCAgICAgIHJldHVybiBDcnlwdG9KU1snZW5jJ11bJ0hleCddWydwYXJzZSddKGtleSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4ga2V5O1xuXHQgICAgfVxuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGdldF9wYWRkZWRfa2V5KGtleSwgb3B0aW9ucykge1xuXHQgICAga2V5ID0gZGVjb2RlX2tleShrZXksIG9wdGlvbnMpO1xuXHQgICAgaWYgKG9wdGlvbnNbJ2VuY3J5cHRLZXknXSkge1xuXHQgICAgICByZXR1cm4gQ3J5cHRvSlNbJ2VuYyddWydVdGY4J11bJ3BhcnNlJ10oU0hBMjU2KGtleSlbJ3NsaWNlJ10oMCwgMzIpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBrZXk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gZ2V0X21vZGUob3B0aW9ucykge1xuXHQgICAgaWYgKG9wdGlvbnNbJ21vZGUnXSA9PT0gJ2VjYicpIHtcblx0ICAgICAgcmV0dXJuIENyeXB0b0pTWydtb2RlJ11bJ0VDQiddO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIENyeXB0b0pTWydtb2RlJ11bJ0NCQyddO1xuXHQgICAgfVxuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGdldF9pdihvcHRpb25zKSB7XG5cdCAgICByZXR1cm4gKG9wdGlvbnNbJ21vZGUnXSA9PT0gJ2NiYycpID8gQ3J5cHRvSlNbJ2VuYyddWydVdGY4J11bJ3BhcnNlJ10oaXYpIDogbnVsbDtcblx0ICB9XG5cblx0ICByZXR1cm4ge1xuXHQgICAgZW5jcnlwdDogZnVuY3Rpb24gKGRhdGEsIGtleSwgb3B0aW9ucykge1xuXHQgICAgICBpZiAoIWtleSkgcmV0dXJuIGRhdGE7XG5cdCAgICAgIG9wdGlvbnMgPSBwYXJzZV9vcHRpb25zKG9wdGlvbnMpO1xuXHQgICAgICB2YXIgaXYgPSBnZXRfaXYob3B0aW9ucyk7XG5cdCAgICAgIHZhciBtb2RlID0gZ2V0X21vZGUob3B0aW9ucyk7XG5cdCAgICAgIHZhciBjaXBoZXJfa2V5ID0gZ2V0X3BhZGRlZF9rZXkoa2V5LCBvcHRpb25zKTtcblx0ICAgICAgdmFyIGhleF9tZXNzYWdlID0gSlNPTlsnc3RyaW5naWZ5J10oZGF0YSk7XG5cdCAgICAgIHZhciBlbmNyeXB0ZWRIZXhBcnJheSA9IENyeXB0b0pTWydBRVMnXVsnZW5jcnlwdCddKGhleF9tZXNzYWdlLCBjaXBoZXJfa2V5LCB7IGl2OiBpdiwgbW9kZTogbW9kZSB9KVsnY2lwaGVydGV4dCddO1xuXHQgICAgICB2YXIgYmFzZV82NF9lbmNyeXB0ZWQgPSBlbmNyeXB0ZWRIZXhBcnJheVsndG9TdHJpbmcnXShDcnlwdG9KU1snZW5jJ11bJ0Jhc2U2NCddKTtcblx0ICAgICAgcmV0dXJuIGJhc2VfNjRfZW5jcnlwdGVkIHx8IGRhdGE7XG5cdCAgICB9LFxuXG5cdCAgICBkZWNyeXB0OiBmdW5jdGlvbiAoZGF0YSwga2V5LCBvcHRpb25zKSB7XG5cdCAgICAgIGlmICgha2V5KSByZXR1cm4gZGF0YTtcblx0ICAgICAgb3B0aW9ucyA9IHBhcnNlX29wdGlvbnMob3B0aW9ucyk7XG5cdCAgICAgIHZhciBpdiA9IGdldF9pdihvcHRpb25zKTtcblx0ICAgICAgdmFyIG1vZGUgPSBnZXRfbW9kZShvcHRpb25zKTtcblx0ICAgICAgdmFyIGNpcGhlcl9rZXkgPSBnZXRfcGFkZGVkX2tleShrZXksIG9wdGlvbnMpO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBiaW5hcnlfZW5jID0gQ3J5cHRvSlNbJ2VuYyddWydCYXNlNjQnXVsncGFyc2UnXShkYXRhKTtcblx0ICAgICAgICB2YXIganNvbl9wbGFpbiA9IENyeXB0b0pTWydBRVMnXVsnZGVjcnlwdCddKHsgY2lwaGVydGV4dDogYmluYXJ5X2VuYyB9LCBjaXBoZXJfa2V5LCB7IGl2OiBpdiwgbW9kZTogbW9kZSB9KVsndG9TdHJpbmcnXShDcnlwdG9KU1snZW5jJ11bJ1V0ZjgnXSk7XG5cdCAgICAgICAgdmFyIHBsYWludGV4dCA9IEpTT05bJ3BhcnNlJ10oanNvbl9wbGFpbik7XG5cdCAgICAgICAgcmV0dXJuIHBsYWludGV4dDtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBjcnlwdG9fb2JqO1xuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKlxuXHQgQ3J5cHRvSlMgdjMuMS4yXG5cdCBjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanNcblx0IChjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXHQgY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZVxuXHQgKi9cblx0dmFyIENyeXB0b0pTPUNyeXB0b0pTfHxmdW5jdGlvbihoLHMpe3ZhciBmPXt9LGc9Zi5saWI9e30scT1mdW5jdGlvbigpe30sbT1nLkJhc2U9e2V4dGVuZDpmdW5jdGlvbihhKXtxLnByb3RvdHlwZT10aGlzO3ZhciBjPW5ldyBxO2EmJmMubWl4SW4oYSk7Yy5oYXNPd25Qcm9wZXJ0eShcImluaXRcIil8fChjLmluaXQ9ZnVuY3Rpb24oKXtjLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2MuaW5pdC5wcm90b3R5cGU9YztjLiRzdXBlcj10aGlzO3JldHVybiBjfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dGVuZCgpO2EuaW5pdC5hcHBseShhLGFyZ3VtZW50cyk7cmV0dXJuIGF9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJih0aGlzW2NdPWFbY10pO2EuaGFzT3duUHJvcGVydHkoXCJ0b1N0cmluZ1wiKSYmKHRoaXMudG9TdHJpbmc9YS50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX0sXG5cdCAgICByPWcuV29yZEFycmF5PW0uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEsYyl7YT10aGlzLndvcmRzPWF8fFtdO3RoaXMuc2lnQnl0ZXM9YyE9cz9jOjQqYS5sZW5ndGh9LHRvU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybihhfHxrKS5zdHJpbmdpZnkodGhpcyl9LGNvbmNhdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLndvcmRzLGQ9YS53b3JkcyxiPXRoaXMuc2lnQnl0ZXM7YT1hLnNpZ0J5dGVzO3RoaXMuY2xhbXAoKTtpZihiJTQpZm9yKHZhciBlPTA7ZTxhO2UrKyljW2IrZT4+PjJdfD0oZFtlPj4+Ml0+Pj4yNC04KihlJTQpJjI1NSk8PDI0LTgqKChiK2UpJTQpO2Vsc2UgaWYoNjU1MzU8ZC5sZW5ndGgpZm9yKGU9MDtlPGE7ZSs9NCljW2IrZT4+PjJdPWRbZT4+PjJdO2Vsc2UgYy5wdXNoLmFwcGx5KGMsZCk7dGhpcy5zaWdCeXRlcys9YTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndvcmRzLGM9dGhpcy5zaWdCeXRlczthW2M+Pj4yXSY9NDI5NDk2NzI5NTw8XG5cdCAgICAgIDMyLTgqKGMlNCk7YS5sZW5ndGg9aC5jZWlsKGMvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bS5jbG9uZS5jYWxsKHRoaXMpO2Eud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKTtyZXR1cm4gYX0scmFuZG9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhO2QrPTQpYy5wdXNoKDQyOTQ5NjcyOTYqaC5yYW5kb20oKXwwKTtyZXR1cm4gbmV3IHIuaW5pdChjLGEpfX0pLGw9Zi5lbmM9e30saz1sLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBjPWEud29yZHM7YT1hLnNpZ0J5dGVzO2Zvcih2YXIgZD1bXSxiPTA7YjxhO2IrKyl7dmFyIGU9Y1tiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NTtkLnB1c2goKGU+Pj40KS50b1N0cmluZygxNikpO2QucHVzaCgoZSYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gZC5qb2luKFwiXCIpfSxwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGM9YS5sZW5ndGgsZD1bXSxiPTA7YjxjO2IrPTIpZFtiPj4+M118PXBhcnNlSW50KGEuc3Vic3RyKGIsXG5cdCAgICAgICAgMiksMTYpPDwyNC00KihiJTgpO3JldHVybiBuZXcgci5pbml0KGQsYy8yKX19LG49bC5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt2YXIgYz1hLndvcmRzO2E9YS5zaWdCeXRlcztmb3IodmFyIGQ9W10sYj0wO2I8YTtiKyspZC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoY1tiPj4+Ml0+Pj4yNC04KihiJTQpJjI1NSkpO3JldHVybiBkLmpvaW4oXCJcIil9LHBhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPVtdLGI9MDtiPGM7YisrKWRbYj4+PjJdfD0oYS5jaGFyQ29kZUF0KGIpJjI1NSk8PDI0LTgqKGIlNCk7cmV0dXJuIG5ldyByLmluaXQoZCxjKX19LGo9bC5VdGY4PXtzdHJpbmdpZnk6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKG4uc3RyaW5naWZ5KGEpKSl9Y2F0Y2goYyl7dGhyb3cgRXJyb3IoXCJNYWxmb3JtZWQgVVRGLTggZGF0YVwiKTt9fSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gbi5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpKX19LFxuXHQgICAgdT1nLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09bS5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgci5pbml0O3RoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihhKXtcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9ai5wYXJzZShhKSk7dGhpcy5fZGF0YS5jb25jYXQoYSk7dGhpcy5fbkRhdGFCeXRlcys9YS5zaWdCeXRlc30sX3Byb2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5fZGF0YSxkPWMud29yZHMsYj1jLnNpZ0J5dGVzLGU9dGhpcy5ibG9ja1NpemUsZj1iLyg0KmUpLGY9YT9oLmNlaWwoZik6aC5tYXgoKGZ8MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKTthPWYqZTtiPWgubWluKDQqYSxiKTtpZihhKXtmb3IodmFyIGc9MDtnPGE7Zys9ZSl0aGlzLl9kb1Byb2Nlc3NCbG9jayhkLGcpO2c9ZC5zcGxpY2UoMCxhKTtjLnNpZ0J5dGVzLT1ifXJldHVybiBuZXcgci5pbml0KGcsYil9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bS5jbG9uZS5jYWxsKHRoaXMpO1xuXHQgICAgICBhLl9kYXRhPXRoaXMuX2RhdGEuY2xvbmUoKTtyZXR1cm4gYX0sX21pbkJ1ZmZlclNpemU6MH0pO2cuSGFzaGVyPXUuZXh0ZW5kKHtjZmc6bS5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKTt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dS5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKGEpe3RoaXMuX2FwcGVuZChhKTt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpfSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXtyZXR1cm4obmV3IGEuaW5pdChkKSkuZmluYWxpemUoYyl9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXtyZXR1cm4obmV3IHQuSE1BQy5pbml0KGEsXG5cdCAgICBkKSkuZmluYWxpemUoYyl9fX0pO3ZhciB0PWYuYWxnbz17fTtyZXR1cm4gZn0oTWF0aCk7XG5cblx0Ly8gU0hBMjU2XG5cdChmdW5jdGlvbihoKXtmb3IodmFyIHM9Q3J5cHRvSlMsZj1zLmxpYixnPWYuV29yZEFycmF5LHE9Zi5IYXNoZXIsZj1zLmFsZ28sbT1bXSxyPVtdLGw9ZnVuY3Rpb24oYSl7cmV0dXJuIDQyOTQ5NjcyOTYqKGEtKGF8MCkpfDB9LGs9MixuPTA7NjQ+bjspe3ZhciBqO2E6e2o9aztmb3IodmFyIHU9aC5zcXJ0KGopLHQ9Mjt0PD11O3QrKylpZighKGoldCkpe2o9ITE7YnJlYWsgYX1qPSEwfWomJig4Pm4mJihtW25dPWwoaC5wb3coaywwLjUpKSkscltuXT1sKGgucG93KGssMS8zKSksbisrKTtrKyt9dmFyIGE9W10sZj1mLlNIQTI1Nj1xLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBnLmluaXQobS5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj10aGlzLl9oYXNoLndvcmRzLGU9YlswXSxmPWJbMV0sZz1iWzJdLGo9YlszXSxoPWJbNF0sbT1iWzVdLG49Yls2XSxxPWJbN10scD0wOzY0PnA7cCsrKXtpZigxNj5wKWFbcF09XG5cdCAgY1tkK3BdfDA7ZWxzZXt2YXIgaz1hW3AtMTVdLGw9YVtwLTJdO2FbcF09KChrPDwyNXxrPj4+NyleKGs8PDE0fGs+Pj4xOCleaz4+PjMpK2FbcC03XSsoKGw8PDE1fGw+Pj4xNyleKGw8PDEzfGw+Pj4xOSlebD4+PjEwKSthW3AtMTZdfWs9cSsoKGg8PDI2fGg+Pj42KV4oaDw8MjF8aD4+PjExKV4oaDw8N3xoPj4+MjUpKSsoaCZtXn5oJm4pK3JbcF0rYVtwXTtsPSgoZTw8MzB8ZT4+PjIpXihlPDwxOXxlPj4+MTMpXihlPDwxMHxlPj4+MjIpKSsoZSZmXmUmZ15mJmcpO3E9bjtuPW07bT1oO2g9aitrfDA7aj1nO2c9ZjtmPWU7ZT1rK2x8MH1iWzBdPWJbMF0rZXwwO2JbMV09YlsxXStmfDA7YlsyXT1iWzJdK2d8MDtiWzNdPWJbM10ranwwO2JbNF09Yls0XStofDA7Yls1XT1iWzVdK218MDtiWzZdPWJbNl0rbnwwO2JbN109Yls3XStxfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZGF0YSxkPWEud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsZT04KmEuc2lnQnl0ZXM7XG5cdCAgZFtlPj4+NV18PTEyODw8MjQtZSUzMjtkWyhlKzY0Pj4+OTw8NCkrMTRdPWguZmxvb3IoYi80Mjk0OTY3Mjk2KTtkWyhlKzY0Pj4+OTw8NCkrMTVdPWI7YS5zaWdCeXRlcz00KmQubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1xLmNsb25lLmNhbGwodGhpcyk7YS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGF9fSk7cy5TSEEyNTY9cS5fY3JlYXRlSGVscGVyKGYpO3MuSG1hY1NIQTI1Nj1xLl9jcmVhdGVIbWFjSGVscGVyKGYpfSkoTWF0aCk7XG5cblx0Ly8gSE1BQyBTSEEyNTZcblx0KGZ1bmN0aW9uKCl7dmFyIGg9Q3J5cHRvSlMscz1oLmVuYy5VdGY4O2guYWxnby5ITUFDPWgubGliLkJhc2UuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGYsZyl7Zj10aGlzLl9oYXNoZXI9bmV3IGYuaW5pdDtcInN0cmluZ1wiPT10eXBlb2YgZyYmKGc9cy5wYXJzZShnKSk7dmFyIGg9Zi5ibG9ja1NpemUsbT00Kmg7Zy5zaWdCeXRlcz5tJiYoZz1mLmZpbmFsaXplKGcpKTtnLmNsYW1wKCk7Zm9yKHZhciByPXRoaXMuX29LZXk9Zy5jbG9uZSgpLGw9dGhpcy5faUtleT1nLmNsb25lKCksaz1yLndvcmRzLG49bC53b3JkcyxqPTA7ajxoO2orKylrW2pdXj0xNTQ5NTU2ODI4LG5bal1ePTkwOTUyMjQ4NjtyLnNpZ0J5dGVzPWwuc2lnQnl0ZXM9bTt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5faGFzaGVyO2YucmVzZXQoKTtmLnVwZGF0ZSh0aGlzLl9pS2V5KX0sdXBkYXRlOmZ1bmN0aW9uKGYpe3RoaXMuX2hhc2hlci51cGRhdGUoZik7cmV0dXJuIHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKGYpe3ZhciBnPVxuXHQgIHRoaXMuX2hhc2hlcjtmPWcuZmluYWxpemUoZik7Zy5yZXNldCgpO3JldHVybiBnLmZpbmFsaXplKHRoaXMuX29LZXkuY2xvbmUoKS5jb25jYXQoZikpfX0pfSkoKTtcblxuXHQvLyBCYXNlNjRcblx0KGZ1bmN0aW9uKCl7dmFyIHU9Q3J5cHRvSlMscD11LmxpYi5Xb3JkQXJyYXk7dS5lbmMuQmFzZTY0PXtzdHJpbmdpZnk6ZnVuY3Rpb24oZCl7dmFyIGw9ZC53b3JkcyxwPWQuc2lnQnl0ZXMsdD10aGlzLl9tYXA7ZC5jbGFtcCgpO2Q9W107Zm9yKHZhciByPTA7cjxwO3IrPTMpZm9yKHZhciB3PShsW3I+Pj4yXT4+PjI0LTgqKHIlNCkmMjU1KTw8MTZ8KGxbcisxPj4+Ml0+Pj4yNC04KigocisxKSU0KSYyNTUpPDw4fGxbcisyPj4+Ml0+Pj4yNC04KigocisyKSU0KSYyNTUsdj0wOzQ+diYmciswLjc1KnY8cDt2KyspZC5wdXNoKHQuY2hhckF0KHc+Pj42KigzLXYpJjYzKSk7aWYobD10LmNoYXJBdCg2NCkpZm9yKDtkLmxlbmd0aCU0OylkLnB1c2gobCk7cmV0dXJuIGQuam9pbihcIlwiKX0scGFyc2U6ZnVuY3Rpb24oZCl7dmFyIGw9ZC5sZW5ndGgscz10aGlzLl9tYXAsdD1zLmNoYXJBdCg2NCk7dCYmKHQ9ZC5pbmRleE9mKHQpLC0xIT10JiYobD10KSk7Zm9yKHZhciB0PVtdLHI9MCx3PTA7dzxcblx0bDt3KyspaWYodyU0KXt2YXIgdj1zLmluZGV4T2YoZC5jaGFyQXQody0xKSk8PDIqKHclNCksYj1zLmluZGV4T2YoZC5jaGFyQXQodykpPj4+Ni0yKih3JTQpO3Rbcj4+PjJdfD0odnxiKTw8MjQtOCoociU0KTtyKyt9cmV0dXJuIHAuY3JlYXRlKHQscil9LF9tYXA6XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwifX0pKCk7XG5cblx0Ly8gQmxvY2tDaXBoZXJcblx0KGZ1bmN0aW9uKHUpe2Z1bmN0aW9uIHAoYixuLGEsYyxlLGosayl7Yj1iKyhuJmF8fm4mYykrZStrO3JldHVybihiPDxqfGI+Pj4zMi1qKStufWZ1bmN0aW9uIGQoYixuLGEsYyxlLGosayl7Yj1iKyhuJmN8YSZ+YykrZStrO3JldHVybihiPDxqfGI+Pj4zMi1qKStufWZ1bmN0aW9uIGwoYixuLGEsYyxlLGosayl7Yj1iKyhuXmFeYykrZStrO3JldHVybihiPDxqfGI+Pj4zMi1qKStufWZ1bmN0aW9uIHMoYixuLGEsYyxlLGosayl7Yj1iKyhhXihufH5jKSkrZStrO3JldHVybihiPDxqfGI+Pj4zMi1qKStufWZvcih2YXIgdD1DcnlwdG9KUyxyPXQubGliLHc9ci5Xb3JkQXJyYXksdj1yLkhhc2hlcixyPXQuYWxnbyxiPVtdLHg9MDs2ND54O3grKyliW3hdPTQyOTQ5NjcyOTYqdS5hYnModS5zaW4oeCsxKSl8MDtyPXIuTUQ1PXYuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IHcuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4XSl9LFxuXHQgIF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihxLG4pe2Zvcih2YXIgYT0wOzE2PmE7YSsrKXt2YXIgYz1uK2EsZT1xW2NdO3FbY109KGU8PDh8ZT4+PjI0KSYxNjcxMTkzNXwoZTw8MjR8ZT4+PjgpJjQyNzgyNTUzNjB9dmFyIGE9dGhpcy5faGFzaC53b3JkcyxjPXFbbiswXSxlPXFbbisxXSxqPXFbbisyXSxrPXFbbiszXSx6PXFbbis0XSxyPXFbbis1XSx0PXFbbis2XSx3PXFbbis3XSx2PXFbbis4XSxBPXFbbis5XSxCPXFbbisxMF0sQz1xW24rMTFdLHU9cVtuKzEyXSxEPXFbbisxM10sRT1xW24rMTRdLHg9cVtuKzE1XSxmPWFbMF0sbT1hWzFdLGc9YVsyXSxoPWFbM10sZj1wKGYsbSxnLGgsYyw3LGJbMF0pLGg9cChoLGYsbSxnLGUsMTIsYlsxXSksZz1wKGcsaCxmLG0saiwxNyxiWzJdKSxtPXAobSxnLGgsZixrLDIyLGJbM10pLGY9cChmLG0sZyxoLHosNyxiWzRdKSxoPXAoaCxmLG0sZyxyLDEyLGJbNV0pLGc9cChnLGgsZixtLHQsMTcsYls2XSksbT1wKG0sZyxoLGYsdywyMixiWzddKSxcblx0ICAgIGY9cChmLG0sZyxoLHYsNyxiWzhdKSxoPXAoaCxmLG0sZyxBLDEyLGJbOV0pLGc9cChnLGgsZixtLEIsMTcsYlsxMF0pLG09cChtLGcsaCxmLEMsMjIsYlsxMV0pLGY9cChmLG0sZyxoLHUsNyxiWzEyXSksaD1wKGgsZixtLGcsRCwxMixiWzEzXSksZz1wKGcsaCxmLG0sRSwxNyxiWzE0XSksbT1wKG0sZyxoLGYseCwyMixiWzE1XSksZj1kKGYsbSxnLGgsZSw1LGJbMTZdKSxoPWQoaCxmLG0sZyx0LDksYlsxN10pLGc9ZChnLGgsZixtLEMsMTQsYlsxOF0pLG09ZChtLGcsaCxmLGMsMjAsYlsxOV0pLGY9ZChmLG0sZyxoLHIsNSxiWzIwXSksaD1kKGgsZixtLGcsQiw5LGJbMjFdKSxnPWQoZyxoLGYsbSx4LDE0LGJbMjJdKSxtPWQobSxnLGgsZix6LDIwLGJbMjNdKSxmPWQoZixtLGcsaCxBLDUsYlsyNF0pLGg9ZChoLGYsbSxnLEUsOSxiWzI1XSksZz1kKGcsaCxmLG0saywxNCxiWzI2XSksbT1kKG0sZyxoLGYsdiwyMCxiWzI3XSksZj1kKGYsbSxnLGgsRCw1LGJbMjhdKSxoPWQoaCxmLFxuXHQgICAgICBtLGcsaiw5LGJbMjldKSxnPWQoZyxoLGYsbSx3LDE0LGJbMzBdKSxtPWQobSxnLGgsZix1LDIwLGJbMzFdKSxmPWwoZixtLGcsaCxyLDQsYlszMl0pLGg9bChoLGYsbSxnLHYsMTEsYlszM10pLGc9bChnLGgsZixtLEMsMTYsYlszNF0pLG09bChtLGcsaCxmLEUsMjMsYlszNV0pLGY9bChmLG0sZyxoLGUsNCxiWzM2XSksaD1sKGgsZixtLGcseiwxMSxiWzM3XSksZz1sKGcsaCxmLG0sdywxNixiWzM4XSksbT1sKG0sZyxoLGYsQiwyMyxiWzM5XSksZj1sKGYsbSxnLGgsRCw0LGJbNDBdKSxoPWwoaCxmLG0sZyxjLDExLGJbNDFdKSxnPWwoZyxoLGYsbSxrLDE2LGJbNDJdKSxtPWwobSxnLGgsZix0LDIzLGJbNDNdKSxmPWwoZixtLGcsaCxBLDQsYls0NF0pLGg9bChoLGYsbSxnLHUsMTEsYls0NV0pLGc9bChnLGgsZixtLHgsMTYsYls0Nl0pLG09bChtLGcsaCxmLGosMjMsYls0N10pLGY9cyhmLG0sZyxoLGMsNixiWzQ4XSksaD1zKGgsZixtLGcsdywxMCxiWzQ5XSksZz1zKGcsaCxmLG0sXG5cdCAgICAgIEUsMTUsYls1MF0pLG09cyhtLGcsaCxmLHIsMjEsYls1MV0pLGY9cyhmLG0sZyxoLHUsNixiWzUyXSksaD1zKGgsZixtLGcsaywxMCxiWzUzXSksZz1zKGcsaCxmLG0sQiwxNSxiWzU0XSksbT1zKG0sZyxoLGYsZSwyMSxiWzU1XSksZj1zKGYsbSxnLGgsdiw2LGJbNTZdKSxoPXMoaCxmLG0sZyx4LDEwLGJbNTddKSxnPXMoZyxoLGYsbSx0LDE1LGJbNThdKSxtPXMobSxnLGgsZixELDIxLGJbNTldKSxmPXMoZixtLGcsaCx6LDYsYls2MF0pLGg9cyhoLGYsbSxnLEMsMTAsYls2MV0pLGc9cyhnLGgsZixtLGosMTUsYls2Ml0pLG09cyhtLGcsaCxmLEEsMjEsYls2M10pO2FbMF09YVswXStmfDA7YVsxXT1hWzFdK218MDthWzJdPWFbMl0rZ3wwO2FbM109YVszXStofDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fZGF0YSxuPWIud29yZHMsYT04KnRoaXMuX25EYXRhQnl0ZXMsYz04KmIuc2lnQnl0ZXM7bltjPj4+NV18PTEyODw8MjQtYyUzMjt2YXIgZT11LmZsb29yKGEvXG5cdCAgICA0Mjk0OTY3Mjk2KTtuWyhjKzY0Pj4+OTw8NCkrMTVdPShlPDw4fGU+Pj4yNCkmMTY3MTE5MzV8KGU8PDI0fGU+Pj44KSY0Mjc4MjU1MzYwO25bKGMrNjQ+Pj45PDw0KSsxNF09KGE8PDh8YT4+PjI0KSYxNjcxMTkzNXwoYTw8MjR8YT4+PjgpJjQyNzgyNTUzNjA7Yi5zaWdCeXRlcz00KihuLmxlbmd0aCsxKTt0aGlzLl9wcm9jZXNzKCk7Yj10aGlzLl9oYXNoO249Yi53b3Jkcztmb3IoYT0wOzQ+YTthKyspYz1uW2FdLG5bYV09KGM8PDh8Yz4+PjI0KSYxNjcxMTkzNXwoYzw8MjR8Yz4+PjgpJjQyNzgyNTUzNjA7cmV0dXJuIGJ9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGI9di5jbG9uZS5jYWxsKHRoaXMpO2IuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBifX0pO3QuTUQ1PXYuX2NyZWF0ZUhlbHBlcihyKTt0LkhtYWNNRDU9di5fY3JlYXRlSG1hY0hlbHBlcihyKX0pKE1hdGgpO1xuXHQoZnVuY3Rpb24oKXt2YXIgdT1DcnlwdG9KUyxwPXUubGliLGQ9cC5CYXNlLGw9cC5Xb3JkQXJyYXkscD11LmFsZ28scz1wLkV2cEtERj1kLmV4dGVuZCh7Y2ZnOmQuZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOnAuTUQ1LGl0ZXJhdGlvbnM6MX0pLGluaXQ6ZnVuY3Rpb24oZCl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGQpfSxjb21wdXRlOmZ1bmN0aW9uKGQscil7Zm9yKHZhciBwPXRoaXMuY2ZnLHM9cC5oYXNoZXIuY3JlYXRlKCksYj1sLmNyZWF0ZSgpLHU9Yi53b3JkcyxxPXAua2V5U2l6ZSxwPXAuaXRlcmF0aW9uczt1Lmxlbmd0aDxxOyl7biYmcy51cGRhdGUobik7dmFyIG49cy51cGRhdGUoZCkuZmluYWxpemUocik7cy5yZXNldCgpO2Zvcih2YXIgYT0xO2E8cDthKyspbj1zLmZpbmFsaXplKG4pLHMucmVzZXQoKTtiLmNvbmNhdChuKX1iLnNpZ0J5dGVzPTQqcTtyZXR1cm4gYn19KTt1LkV2cEtERj1mdW5jdGlvbihkLGwscCl7cmV0dXJuIHMuY3JlYXRlKHApLmNvbXB1dGUoZCxcblx0ICBsKX19KSgpO1xuXG5cdC8vIENpcGhlclxuXHRDcnlwdG9KUy5saWIuQ2lwaGVyfHxmdW5jdGlvbih1KXt2YXIgcD1DcnlwdG9KUyxkPXAubGliLGw9ZC5CYXNlLHM9ZC5Xb3JkQXJyYXksdD1kLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0scj1wLmVuYy5CYXNlNjQsdz1wLmFsZ28uRXZwS0RGLHY9ZC5DaXBoZXI9dC5leHRlbmQoe2NmZzpsLmV4dGVuZCgpLGNyZWF0ZUVuY3J5cHRvcjpmdW5jdGlvbihlLGEpe3JldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9FTkNfWEZPUk1fTU9ERSxlLGEpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24oZSxhKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fREVDX1hGT1JNX01PREUsZSxhKX0saW5pdDpmdW5jdGlvbihlLGEsYil7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKGIpO3RoaXMuX3hmb3JtTW9kZT1lO3RoaXMuX2tleT1hO3RoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt0LnJlc2V0LmNhbGwodGhpcyk7dGhpcy5fZG9SZXNldCgpfSxwcm9jZXNzOmZ1bmN0aW9uKGUpe3RoaXMuX2FwcGVuZChlKTtyZXR1cm4gdGhpcy5fcHJvY2VzcygpfSxcblx0ICBmaW5hbGl6ZTpmdW5jdGlvbihlKXtlJiZ0aGlzLl9hcHBlbmQoZSk7cmV0dXJuIHRoaXMuX2RvRmluYWxpemUoKX0sa2V5U2l6ZTo0LGl2U2l6ZTo0LF9FTkNfWEZPUk1fTU9ERToxLF9ERUNfWEZPUk1fTU9ERToyLF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oZSl7cmV0dXJue2VuY3J5cHQ6ZnVuY3Rpb24oYixrLGQpe3JldHVybihcInN0cmluZ1wiPT10eXBlb2Ygaz9jOmEpLmVuY3J5cHQoZSxiLGssZCl9LGRlY3J5cHQ6ZnVuY3Rpb24oYixrLGQpe3JldHVybihcInN0cmluZ1wiPT10eXBlb2Ygaz9jOmEpLmRlY3J5cHQoZSxiLGssZCl9fX19KTtkLlN0cmVhbUNpcGhlcj12LmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvY2VzcyghMCl9LGJsb2NrU2l6ZToxfSk7dmFyIGI9cC5tb2RlPXt9LHg9ZnVuY3Rpb24oZSxhLGIpe3ZhciBjPXRoaXMuX2l2O2M/dGhpcy5faXY9dTpjPXRoaXMuX3ByZXZCbG9jaztmb3IodmFyIGQ9MDtkPGI7ZCsrKWVbYStkXV49XG5cdCAgY1tkXX0scT0oZC5CbG9ja0NpcGhlck1vZGU9bC5leHRlbmQoe2NyZWF0ZUVuY3J5cHRvcjpmdW5jdGlvbihlLGEpe3JldHVybiB0aGlzLkVuY3J5cHRvci5jcmVhdGUoZSxhKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKGUsYSl7cmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZShlLGEpfSxpbml0OmZ1bmN0aW9uKGUsYSl7dGhpcy5fY2lwaGVyPWU7dGhpcy5faXY9YX19KSkuZXh0ZW5kKCk7cS5FbmNyeXB0b3I9cS5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbihlLGEpe3ZhciBiPXRoaXMuX2NpcGhlcixjPWIuYmxvY2tTaXplO3guY2FsbCh0aGlzLGUsYSxjKTtiLmVuY3J5cHRCbG9jayhlLGEpO3RoaXMuX3ByZXZCbG9jaz1lLnNsaWNlKGEsYStjKX19KTtxLkRlY3J5cHRvcj1xLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGUsYSl7dmFyIGI9dGhpcy5fY2lwaGVyLGM9Yi5ibG9ja1NpemUsZD1lLnNsaWNlKGEsYStjKTtiLmRlY3J5cHRCbG9jayhlLGEpO3guY2FsbCh0aGlzLFxuXHQgIGUsYSxjKTt0aGlzLl9wcmV2QmxvY2s9ZH19KTtiPWIuQ0JDPXE7cT0ocC5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9NCpiLGM9Yy1hLnNpZ0J5dGVzJWMsZD1jPDwyNHxjPDwxNnxjPDw4fGMsbD1bXSxuPTA7bjxjO24rPTQpbC5wdXNoKGQpO2M9cy5jcmVhdGUobCxjKTthLmNvbmNhdChjKX0sdW5wYWQ6ZnVuY3Rpb24oYSl7YS5zaWdCeXRlcy09YS53b3Jkc1thLnNpZ0J5dGVzLTE+Pj4yXSYyNTV9fTtkLkJsb2NrQ2lwaGVyPXYuZXh0ZW5kKHtjZmc6di5jZmcuZXh0ZW5kKHttb2RlOmIscGFkZGluZzpxfSkscmVzZXQ6ZnVuY3Rpb24oKXt2LnJlc2V0LmNhbGwodGhpcyk7dmFyIGE9dGhpcy5jZmcsYj1hLml2LGE9YS5tb2RlO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpdmFyIGM9YS5jcmVhdGVFbmNyeXB0b3I7ZWxzZSBjPWEuY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MTt0aGlzLl9tb2RlPWMuY2FsbChhLFxuXHQgIHRoaXMsYiYmYi53b3Jkcyl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihhLGIpe3RoaXMuX21vZGUucHJvY2Vzc0Jsb2NrKGEsYil9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jZmcucGFkZGluZztpZih0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFKXthLnBhZCh0aGlzLl9kYXRhLHRoaXMuYmxvY2tTaXplKTt2YXIgYj10aGlzLl9wcm9jZXNzKCEwKX1lbHNlIGI9dGhpcy5fcHJvY2VzcyghMCksYS51bnBhZChiKTtyZXR1cm4gYn0sYmxvY2tTaXplOjR9KTt2YXIgbj1kLkNpcGhlclBhcmFtcz1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhKXt0aGlzLm1peEluKGEpfSx0b1N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4oYXx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19KSxiPShwLmZvcm1hdD17fSkuT3BlblNTTD17c3RyaW5naWZ5OmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2lwaGVydGV4dDthPWEuc2FsdDtyZXR1cm4oYT9zLmNyZWF0ZShbMTM5ODg5MzY4NCxcblx0ICAxNzAxMDc2ODMxXSkuY29uY2F0KGEpLmNvbmNhdChiKTpiKS50b1N0cmluZyhyKX0scGFyc2U6ZnVuY3Rpb24oYSl7YT1yLnBhcnNlKGEpO3ZhciBiPWEud29yZHM7aWYoMTM5ODg5MzY4ND09YlswXSYmMTcwMTA3NjgzMT09YlsxXSl7dmFyIGM9cy5jcmVhdGUoYi5zbGljZSgyLDQpKTtiLnNwbGljZSgwLDQpO2Euc2lnQnl0ZXMtPTE2fXJldHVybiBuLmNyZWF0ZSh7Y2lwaGVydGV4dDphLHNhbHQ6Y30pfX0sYT1kLlNlcmlhbGl6YWJsZUNpcGhlcj1sLmV4dGVuZCh7Y2ZnOmwuZXh0ZW5kKHtmb3JtYXQ6Yn0pLGVuY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZD10aGlzLmNmZy5leHRlbmQoZCk7dmFyIGw9YS5jcmVhdGVFbmNyeXB0b3IoYyxkKTtiPWwuZmluYWxpemUoYik7bD1sLmNmZztyZXR1cm4gbi5jcmVhdGUoe2NpcGhlcnRleHQ6YixrZXk6YyxpdjpsLml2LGFsZ29yaXRobTphLG1vZGU6bC5tb2RlLHBhZGRpbmc6bC5wYWRkaW5nLGJsb2NrU2l6ZTphLmJsb2NrU2l6ZSxmb3JtYXR0ZXI6ZC5mb3JtYXR9KX0sXG5cdCAgZGVjcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTtiPXRoaXMuX3BhcnNlKGIsZC5mb3JtYXQpO3JldHVybiBhLmNyZWF0ZURlY3J5cHRvcihjLGQpLmZpbmFsaXplKGIuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbihhLGIpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhP2IucGFyc2UoYSx0aGlzKTphfX0pLHA9KHAua2RmPXt9KS5PcGVuU1NMPXtleGVjdXRlOmZ1bmN0aW9uKGEsYixjLGQpe2R8fChkPXMucmFuZG9tKDgpKTthPXcuY3JlYXRlKHtrZXlTaXplOmIrY30pLmNvbXB1dGUoYSxkKTtjPXMuY3JlYXRlKGEud29yZHMuc2xpY2UoYiksNCpjKTthLnNpZ0J5dGVzPTQqYjtyZXR1cm4gbi5jcmVhdGUoe2tleTphLGl2OmMsc2FsdDpkfSl9fSxjPWQuUGFzc3dvcmRCYXNlZENpcGhlcj1hLmV4dGVuZCh7Y2ZnOmEuY2ZnLmV4dGVuZCh7a2RmOnB9KSxlbmNyeXB0OmZ1bmN0aW9uKGIsYyxkLGwpe2w9dGhpcy5jZmcuZXh0ZW5kKGwpO2Q9bC5rZGYuZXhlY3V0ZShkLFxuXHQgIGIua2V5U2l6ZSxiLml2U2l6ZSk7bC5pdj1kLml2O2I9YS5lbmNyeXB0LmNhbGwodGhpcyxiLGMsZC5rZXksbCk7Yi5taXhJbihkKTtyZXR1cm4gYn0sZGVjcnlwdDpmdW5jdGlvbihiLGMsZCxsKXtsPXRoaXMuY2ZnLmV4dGVuZChsKTtjPXRoaXMuX3BhcnNlKGMsbC5mb3JtYXQpO2Q9bC5rZGYuZXhlY3V0ZShkLGIua2V5U2l6ZSxiLml2U2l6ZSxjLnNhbHQpO2wuaXY9ZC5pdjtyZXR1cm4gYS5kZWNyeXB0LmNhbGwodGhpcyxiLGMsZC5rZXksbCl9fSl9KCk7XG5cblx0Ly8gQUVTXG5cdChmdW5jdGlvbigpe2Zvcih2YXIgdT1DcnlwdG9KUyxwPXUubGliLkJsb2NrQ2lwaGVyLGQ9dS5hbGdvLGw9W10scz1bXSx0PVtdLHI9W10sdz1bXSx2PVtdLGI9W10seD1bXSxxPVtdLG49W10sYT1bXSxjPTA7MjU2PmM7YysrKWFbY109MTI4PmM/Yzw8MTpjPDwxXjI4Mztmb3IodmFyIGU9MCxqPTAsYz0wOzI1Nj5jO2MrKyl7dmFyIGs9al5qPDwxXmo8PDJeajw8M15qPDw0LGs9az4+PjheayYyNTVeOTk7bFtlXT1rO3Nba109ZTt2YXIgej1hW2VdLEY9YVt6XSxHPWFbRl0seT0yNTcqYVtrXV4xNjg0MzAwOCprO3RbZV09eTw8MjR8eT4+Pjg7cltlXT15PDwxNnx5Pj4+MTY7d1tlXT15PDw4fHk+Pj4yNDt2W2VdPXk7eT0xNjg0MzAwOSpHXjY1NTM3KkZeMjU3KnpeMTY4NDMwMDgqZTtiW2tdPXk8PDI0fHk+Pj44O3hba109eTw8MTZ8eT4+PjE2O3Fba109eTw8OHx5Pj4+MjQ7bltrXT15O2U/KGU9el5hW2FbYVtHXnpdXV0sal49YVthW2pdXSk6ZT1qPTF9dmFyIEg9WzAsMSwyLDQsOCxcblx0ICAxNiwzMiw2NCwxMjgsMjcsNTRdLGQ9ZC5BRVM9cC5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuX2tleSxjPWEud29yZHMsZD1hLnNpZ0J5dGVzLzQsYT00KigodGhpcy5fblJvdW5kcz1kKzYpKzEpLGU9dGhpcy5fa2V5U2NoZWR1bGU9W10saj0wO2o8YTtqKyspaWYoajxkKWVbal09Y1tqXTtlbHNle3ZhciBrPWVbai0xXTtqJWQ/NjxkJiY0PT1qJWQmJihrPWxbaz4+PjI0XTw8MjR8bFtrPj4+MTYmMjU1XTw8MTZ8bFtrPj4+OCYyNTVdPDw4fGxbayYyNTVdKTooaz1rPDw4fGs+Pj4yNCxrPWxbaz4+PjI0XTw8MjR8bFtrPj4+MTYmMjU1XTw8MTZ8bFtrPj4+OCYyNTVdPDw4fGxbayYyNTVdLGtePUhbai9kfDBdPDwyNCk7ZVtqXT1lW2otZF1ea31jPXRoaXMuX2ludktleVNjaGVkdWxlPVtdO2ZvcihkPTA7ZDxhO2QrKylqPWEtZCxrPWQlND9lW2pdOmVbai00XSxjW2RdPTQ+ZHx8ND49aj9rOmJbbFtrPj4+MjRdXV54W2xbaz4+PjE2JjI1NV1dXnFbbFtrPj4+XG5cdDgmMjU1XV1ebltsW2smMjU1XV19LGVuY3J5cHRCbG9jazpmdW5jdGlvbihhLGIpe3RoaXMuX2RvQ3J5cHRCbG9jayhhLGIsdGhpcy5fa2V5U2NoZWR1bGUsdCxyLHcsdixsKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YVtjKzFdO2FbYysxXT1hW2MrM107YVtjKzNdPWQ7dGhpcy5fZG9DcnlwdEJsb2NrKGEsYyx0aGlzLl9pbnZLZXlTY2hlZHVsZSxiLHgscSxuLHMpO2Q9YVtjKzFdO2FbYysxXT1hW2MrM107YVtjKzNdPWR9LF9kb0NyeXB0QmxvY2s6ZnVuY3Rpb24oYSxiLGMsZCxlLGosbCxmKXtmb3IodmFyIG09dGhpcy5fblJvdW5kcyxnPWFbYl1eY1swXSxoPWFbYisxXV5jWzFdLGs9YVtiKzJdXmNbMl0sbj1hW2IrM11eY1szXSxwPTQscj0xO3I8bTtyKyspdmFyIHE9ZFtnPj4+MjRdXmVbaD4+PjE2JjI1NV1ealtrPj4+OCYyNTVdXmxbbiYyNTVdXmNbcCsrXSxzPWRbaD4+PjI0XV5lW2s+Pj4xNiYyNTVdXmpbbj4+PjgmMjU1XV5sW2cmMjU1XV5jW3ArK10sdD1cblx0ICBkW2s+Pj4yNF1eZVtuPj4+MTYmMjU1XV5qW2c+Pj44JjI1NV1ebFtoJjI1NV1eY1twKytdLG49ZFtuPj4+MjRdXmVbZz4+PjE2JjI1NV1ealtoPj4+OCYyNTVdXmxbayYyNTVdXmNbcCsrXSxnPXEsaD1zLGs9dDtxPShmW2c+Pj4yNF08PDI0fGZbaD4+PjE2JjI1NV08PDE2fGZbaz4+PjgmMjU1XTw8OHxmW24mMjU1XSleY1twKytdO3M9KGZbaD4+PjI0XTw8MjR8ZltrPj4+MTYmMjU1XTw8MTZ8ZltuPj4+OCYyNTVdPDw4fGZbZyYyNTVdKV5jW3ArK107dD0oZltrPj4+MjRdPDwyNHxmW24+Pj4xNiYyNTVdPDwxNnxmW2c+Pj44JjI1NV08PDh8ZltoJjI1NV0pXmNbcCsrXTtuPShmW24+Pj4yNF08PDI0fGZbZz4+PjE2JjI1NV08PDE2fGZbaD4+PjgmMjU1XTw8OHxmW2smMjU1XSleY1twKytdO2FbYl09cTthW2IrMV09czthW2IrMl09dDthW2IrM109bn0sa2V5U2l6ZTo4fSk7dS5BRVM9cC5fY3JlYXRlSGVscGVyKGQpfSkoKTtcblxuXHQvLyBNb2RlIEVDQlxuXHRDcnlwdG9KUy5tb2RlLkVDQiA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIEVDQiA9IENyeXB0b0pTLmxpYi5CbG9ja0NpcGhlck1vZGUuZXh0ZW5kKCk7XG5cblx0ICBFQ0IuRW5jcnlwdG9yID0gRUNCLmV4dGVuZCh7XG5cdCAgICBwcm9jZXNzQmxvY2s6IGZ1bmN0aW9uICh3b3Jkcywgb2Zmc2V0KSB7XG5cdCAgICAgIHRoaXMuX2NpcGhlci5lbmNyeXB0QmxvY2sod29yZHMsIG9mZnNldCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cblx0ICBFQ0IuRGVjcnlwdG9yID0gRUNCLmV4dGVuZCh7XG5cdCAgICBwcm9jZXNzQmxvY2s6IGZ1bmN0aW9uICh3b3Jkcywgb2Zmc2V0KSB7XG5cdCAgICAgIHRoaXMuX2NpcGhlci5kZWNyeXB0QmxvY2sod29yZHMsIG9mZnNldCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cblx0ICByZXR1cm4gRUNCO1xuXHR9KCkpO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gQ3J5cHRvSlM7XG5cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBXRUJTT0NLRVQgSU5URVJGQUNFXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHR2YXIgV1MgPSBmdW5jdGlvbiggdXJsLCBwcm90b2NvbHMgKSB7XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFdTKSkgcmV0dXJuIG5ldyBXUyggdXJsLCBwcm90b2NvbHMgKTtcblxuXHQgIHZhciBzZWxmICAgICA9IHRoaXNcblx0ICAgICwgICB1cmwgICAgICA9IHNlbGYudXJsICAgICAgPSB1cmwgfHwgJydcblx0ICAgICwgICBwcm90b2NvbCA9IHNlbGYucHJvdG9jb2wgPSBwcm90b2NvbHMgfHwgJ1NlYy1XZWJTb2NrZXQtUHJvdG9jb2wnXG5cdCAgICAsICAgYml0cyAgICAgPSB1cmwuc3BsaXQoJy8nKVxuXHQgICAgLCAgIHNldHVwICAgID0ge1xuXHQgICAgJ3NzbCcgICAgICAgICAgIDogYml0c1swXSA9PT0gJ3dzczonXG5cdCAgICAsJ29yaWdpbicgICAgICAgIDogYml0c1syXVxuXHQgICAgLCdwdWJsaXNoX2tleScgICA6IGJpdHNbM11cblx0ICAgICwnc3Vic2NyaWJlX2tleScgOiBiaXRzWzRdXG5cdCAgICAsJ2NoYW5uZWwnICAgICAgIDogYml0c1s1XVxuXHQgIH07XG5cblx0ICAvLyBSRUFEWSBTVEFURVNcblx0ICBzZWxmWydDT05ORUNUSU5HJ10gPSAwOyAvLyBUaGUgY29ubmVjdGlvbiBpcyBub3QgeWV0IG9wZW4uXG5cdCAgc2VsZlsnT1BFTiddICAgICAgID0gMTsgLy8gVGhlIGNvbm5lY3Rpb24gaXMgb3BlbiBhbmQgcmVhZHkgdG8gY29tbXVuaWNhdGUuXG5cdCAgc2VsZlsnQ0xPU0lORyddICAgID0gMjsgLy8gVGhlIGNvbm5lY3Rpb24gaXMgaW4gdGhlIHByb2Nlc3Mgb2YgY2xvc2luZy5cblx0ICBzZWxmWydDTE9TRUQnXSAgICAgPSAzOyAvLyBUaGUgY29ubmVjdGlvbiBpcyBjbG9zZWQgb3IgY291bGRuJ3QgYmUgb3BlbmVkLlxuXG5cdCAgLy8gQ0xPU0UgU1RBVEVTXG5cdCAgc2VsZlsnQ0xPU0VfTk9STUFMJ10gICAgICAgICA9IDEwMDA7IC8vIE5vcm1hbCBJbnRlbmRlZCBDbG9zZTsgY29tcGxldGVkLlxuXHQgIHNlbGZbJ0NMT1NFX0dPSU5HX0FXQVknXSAgICAgPSAxMDAxOyAvLyBDbG9zZWQgVW5leHBlY3R0ZWRseS5cblx0ICBzZWxmWydDTE9TRV9QUk9UT0NPTF9FUlJPUiddID0gMTAwMjsgLy8gU2VydmVyOiBOb3QgU3VwcG9ydGVkLlxuXHQgIHNlbGZbJ0NMT1NFX1VOU1VQUE9SVEVEJ10gICAgPSAxMDAzOyAvLyBTZXJ2ZXI6IFVuc3VwcG9ydGVkIFByb3RvY29sLlxuXHQgIHNlbGZbJ0NMT1NFX1RPT19MQVJHRSddICAgICAgPSAxMDA0OyAvLyBTZXJ2ZXI6IFRvbyBNdWNoIERhdGEuXG5cdCAgc2VsZlsnQ0xPU0VfTk9fU1RBVFVTJ10gICAgICA9IDEwMDU7IC8vIFNlcnZlcjogTm8gcmVhc29uLlxuXHQgIHNlbGZbJ0NMT1NFX0FCTk9STUFMJ10gICAgICAgPSAxMDA2OyAvLyBBYm5vcm1hbCBEaXNjb25uZWN0LlxuXG5cdCAgLy8gRXZlbnRzIERlZmF1bHRcblx0ICBzZWxmWydvbmNsb3NlJ10gICA9IHNlbGZbJ29uZXJyb3InXSA9XG5cdCAgICBzZWxmWydvbm1lc3NhZ2UnXSA9IHNlbGZbJ29ub3BlbiddICA9XG5cdCAgICAgIHNlbGZbJ29uc2VuZCddICAgID0gIGZ1bmN0aW9uKCl7fTtcblxuXHQgIC8vIEF0dHJpYnV0ZXNcblx0ICBzZWxmWydiaW5hcnlUeXBlJ10gICAgID0gJyc7XG5cdCAgc2VsZlsnZXh0ZW5zaW9ucyddICAgICA9ICcnO1xuXHQgIHNlbGZbJ2J1ZmZlcmVkQW1vdW50J10gPSAwO1xuXHQgIHNlbGZbJ3RyYXNubWl0dGluZyddICAgPSBmYWxzZTtcblx0ICBzZWxmWydidWZmZXInXSAgICAgICAgID0gW107XG5cdCAgc2VsZlsncmVhZHlTdGF0ZSddICAgICA9IHNlbGZbJ0NPTk5FQ1RJTkcnXTtcblxuXHQgIC8vIENsb3NlIGlmIG5vIHNldHVwLlxuXHQgIGlmICghdXJsKSB7XG5cdCAgICBzZWxmWydyZWFkeVN0YXRlJ10gPSBzZWxmWydDTE9TRUQnXTtcblx0ICAgIHNlbGZbJ29uY2xvc2UnXSh7XG5cdCAgICAgICdjb2RlJyAgICAgOiBzZWxmWydDTE9TRV9BQk5PUk1BTCddLFxuXHQgICAgICAncmVhc29uJyAgIDogJ01pc3NpbmcgVVJMJyxcblx0ICAgICAgJ3dhc0NsZWFuJyA6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIHNlbGY7XG5cdCAgfVxuXG5cdCAgLy8gUHViTnViIFdlYlNvY2tldCBFbXVsYXRpb25cblx0ICBzZWxmLnB1Ym51YiAgICAgICA9IFBVQk5VQlsnaW5pdCddKHNldHVwKTtcblx0ICBzZWxmLnB1Ym51Yi5zZXR1cCA9IHNldHVwO1xuXHQgIHNlbGYuc2V0dXAgICAgICAgID0gc2V0dXA7XG5cblx0ICBzZWxmLnB1Ym51Ylsnc3Vic2NyaWJlJ10oe1xuXHQgICAgJ3Jlc3RvcmUnICAgIDogZmFsc2UsXG5cdCAgICAnY2hhbm5lbCcgICAgOiBzZXR1cFsnY2hhbm5lbCddLFxuXHQgICAgJ2Rpc2Nvbm5lY3QnIDogc2VsZlsnb25lcnJvciddLFxuXHQgICAgJ3JlY29ubmVjdCcgIDogc2VsZlsnb25vcGVuJ10sXG5cdCAgICAnZXJyb3InICAgICAgOiBmdW5jdGlvbigpIHtcblx0ICAgICAgc2VsZlsnb25jbG9zZSddKHtcblx0ICAgICAgICAnY29kZScgICAgIDogc2VsZlsnQ0xPU0VfQUJOT1JNQUwnXSxcblx0ICAgICAgICAncmVhc29uJyAgIDogJ01pc3NpbmcgVVJMJyxcblx0ICAgICAgICAnd2FzQ2xlYW4nIDogZmFsc2Vcblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgJ2NhbGxiYWNrJyAgIDogZnVuY3Rpb24obWVzc2FnZSkge1xuXHQgICAgICBzZWxmWydvbm1lc3NhZ2UnXSh7ICdkYXRhJyA6IG1lc3NhZ2UgfSk7XG5cdCAgICB9LFxuXHQgICAgJ2Nvbm5lY3QnICAgIDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHNlbGZbJ3JlYWR5U3RhdGUnXSA9IHNlbGZbJ09QRU4nXTtcblx0ICAgICAgc2VsZlsnb25vcGVuJ10oKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gV0VCU09DS0VUIFNFTkRcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFdTLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBzZWxmLnB1Ym51YlsncHVibGlzaCddKHtcblx0ICAgICdjaGFubmVsJyAgOiBzZWxmLnB1Ym51Yi5zZXR1cFsnY2hhbm5lbCddLFxuXHQgICAgJ21lc3NhZ2UnICA6IGRhdGEsXG5cdCAgICAnY2FsbGJhY2snIDogZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0ICAgICAgc2VsZlsnb25zZW5kJ10oeyAnZGF0YScgOiByZXNwb25zZSB9KTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gV0VCU09DS0VUIENMT1NFXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRXUy5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgc2VsZi5wdWJudWJbJ3Vuc3Vic2NyaWJlJ10oeyAnY2hhbm5lbCcgOiBzZWxmLnB1Ym51Yi5zZXR1cFsnY2hhbm5lbCddIH0pO1xuXHQgIHNlbGZbJ3JlYWR5U3RhdGUnXSA9IHNlbGZbJ0NMT1NFRCddO1xuXHQgIHNlbGZbJ29uY2xvc2UnXSh7fSk7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBXUztcblxuXG4vKioqLyB9XG4vKioqKioqLyBdKVxufSk7XG47XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcHVibnViL21vZGVybi9kaXN0L3B1Ym51Yi5qc1xuICoqIG1vZHVsZSBpZCA9IDY1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2NoYWknKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA2NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBjaGFpXG4gKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxudmFyIHVzZWQgPSBbXVxuICAsIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vKiFcbiAqIENoYWkgdmVyc2lvblxuICovXG5cbmV4cG9ydHMudmVyc2lvbiA9ICczLjUuMCc7XG5cbi8qIVxuICogQXNzZXJ0aW9uIEVycm9yXG4gKi9cblxuZXhwb3J0cy5Bc3NlcnRpb25FcnJvciA9IHJlcXVpcmUoJ2Fzc2VydGlvbi1lcnJvcicpO1xuXG4vKiFcbiAqIFV0aWxzIGZvciBwbHVnaW5zIChub3QgZXhwb3J0ZWQpXG4gKi9cblxudmFyIHV0aWwgPSByZXF1aXJlKCcuL2NoYWkvdXRpbHMnKTtcblxuLyoqXG4gKiAjIC51c2UoZnVuY3Rpb24pXG4gKlxuICogUHJvdmlkZXMgYSB3YXkgdG8gZXh0ZW5kIHRoZSBpbnRlcm5hbHMgb2YgQ2hhaVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259XG4gKiBAcmV0dXJucyB7dGhpc30gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMudXNlID0gZnVuY3Rpb24gKGZuKSB7XG4gIGlmICghfnVzZWQuaW5kZXhPZihmbikpIHtcbiAgICBmbih0aGlzLCB1dGlsKTtcbiAgICB1c2VkLnB1c2goZm4pO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKiFcbiAqIFV0aWxpdHkgRnVuY3Rpb25zXG4gKi9cblxuZXhwb3J0cy51dGlsID0gdXRpbDtcblxuLyohXG4gKiBDb25maWd1cmF0aW9uXG4gKi9cblxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4vY2hhaS9jb25maWcnKTtcbmV4cG9ydHMuY29uZmlnID0gY29uZmlnO1xuXG4vKiFcbiAqIFByaW1hcnkgYEFzc2VydGlvbmAgcHJvdG90eXBlXG4gKi9cblxudmFyIGFzc2VydGlvbiA9IHJlcXVpcmUoJy4vY2hhaS9hc3NlcnRpb24nKTtcbmV4cG9ydHMudXNlKGFzc2VydGlvbik7XG5cbi8qIVxuICogQ29yZSBBc3NlcnRpb25zXG4gKi9cblxudmFyIGNvcmUgPSByZXF1aXJlKCcuL2NoYWkvY29yZS9hc3NlcnRpb25zJyk7XG5leHBvcnRzLnVzZShjb3JlKTtcblxuLyohXG4gKiBFeHBlY3QgaW50ZXJmYWNlXG4gKi9cblxudmFyIGV4cGVjdCA9IHJlcXVpcmUoJy4vY2hhaS9pbnRlcmZhY2UvZXhwZWN0Jyk7XG5leHBvcnRzLnVzZShleHBlY3QpO1xuXG4vKiFcbiAqIFNob3VsZCBpbnRlcmZhY2VcbiAqL1xuXG52YXIgc2hvdWxkID0gcmVxdWlyZSgnLi9jaGFpL2ludGVyZmFjZS9zaG91bGQnKTtcbmV4cG9ydHMudXNlKHNob3VsZCk7XG5cbi8qIVxuICogQXNzZXJ0IGludGVyZmFjZVxuICovXG5cbnZhciBhc3NlcnQgPSByZXF1aXJlKCcuL2NoYWkvaW50ZXJmYWNlL2Fzc2VydCcpO1xuZXhwb3J0cy51c2UoYXNzZXJ0KTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkuanNcbiAqKiBtb2R1bGUgaWQgPSA2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBhc3NlcnRpb24tZXJyb3JcbiAqIENvcHlyaWdodChjKSAyMDEzIEpha2UgTHVlciA8amFrZUBxdWFsaWFuY3kuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHdpbGwgY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIG9uZSBvYmplY3QgdG8gYW5vdGhlciBleGNsdWRpbmcgYW55IG9yaWdpbmFsbHlcbiAqIGxpc3RlZC4gUmV0dXJuZWQgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgYHt9YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhjbHVkZWQgcHJvcGVydGllcyAuLi5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGV4Y2x1ZGUgKCkge1xuICB2YXIgZXhjbHVkZXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgZnVuY3Rpb24gZXhjbHVkZVByb3BzIChyZXMsIG9iaikge1xuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoIX5leGNsdWRlcy5pbmRleE9mKGtleSkpIHJlc1trZXldID0gb2JqW2tleV07XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gZXh0ZW5kRXhjbHVkZSAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgICwgaSA9IDBcbiAgICAgICwgcmVzID0ge307XG5cbiAgICBmb3IgKDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGV4Y2x1ZGVQcm9wcyhyZXMsIGFyZ3NbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXM7XG4gIH07XG59O1xuXG4vKiFcbiAqIFByaW1hcnkgRXhwb3J0c1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gQXNzZXJ0aW9uRXJyb3I7XG5cbi8qKlxuICogIyMjIEFzc2VydGlvbkVycm9yXG4gKlxuICogQW4gZXh0ZW5zaW9uIG9mIHRoZSBKYXZhU2NyaXB0IGBFcnJvcmAgY29uc3RydWN0b3IgZm9yXG4gKiBhc3NlcnRpb24gYW5kIHZhbGlkYXRpb24gc2NlbmFyaW9zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyB0byBpbmNsdWRlIChvcHRpb25hbClcbiAqIEBwYXJhbSB7Y2FsbGVlfSBzdGFydCBzdGFjayBmdW5jdGlvbiAob3B0aW9uYWwpXG4gKi9cblxuZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3IgKG1lc3NhZ2UsIF9wcm9wcywgc3NmKSB7XG4gIHZhciBleHRlbmQgPSBleGNsdWRlKCduYW1lJywgJ21lc3NhZ2UnLCAnc3RhY2snLCAnY29uc3RydWN0b3InLCAndG9KU09OJylcbiAgICAsIHByb3BzID0gZXh0ZW5kKF9wcm9wcyB8fCB7fSk7XG5cbiAgLy8gZGVmYXVsdCB2YWx1ZXNcbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZSB8fCAnVW5zcGVjaWZpZWQgQXNzZXJ0aW9uRXJyb3InO1xuICB0aGlzLnNob3dEaWZmID0gZmFsc2U7XG5cbiAgLy8gY29weSBmcm9tIHByb3BlcnRpZXNcbiAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7XG4gICAgdGhpc1trZXldID0gcHJvcHNba2V5XTtcbiAgfVxuXG4gIC8vIGNhcHR1cmUgc3RhY2sgdHJhY2VcbiAgc3NmID0gc3NmIHx8IGFyZ3VtZW50cy5jYWxsZWU7XG4gIGlmIChzc2YgJiYgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBzc2YpO1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHRoaXMuc3RhY2sgPSBlLnN0YWNrO1xuICAgIH1cbiAgfVxufVxuXG4vKiFcbiAqIEluaGVyaXQgZnJvbSBFcnJvci5wcm90b3R5cGVcbiAqL1xuXG5Bc3NlcnRpb25FcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5cbi8qIVxuICogU3RhdGljYWxseSBzZXQgbmFtZVxuICovXG5cbkFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcblxuLyohXG4gKiBFbnN1cmUgY29ycmVjdCBjb25zdHJ1Y3RvclxuICovXG5cbkFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFzc2VydGlvbkVycm9yO1xuXG4vKipcbiAqIEFsbG93IGVycm9ycyB0byBiZSBjb252ZXJ0ZWQgdG8gSlNPTiBmb3Igc3RhdGljIHRyYW5zZmVyLlxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5jbHVkZSBzdGFjayAoZGVmYXVsdDogYHRydWVgKVxuICogQHJldHVybiB7T2JqZWN0fSBvYmplY3QgdGhhdCBjYW4gYmUgYEpTT04uc3RyaW5naWZ5YFxuICovXG5cbkFzc2VydGlvbkVycm9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoc3RhY2spIHtcbiAgdmFyIGV4dGVuZCA9IGV4Y2x1ZGUoJ2NvbnN0cnVjdG9yJywgJ3RvSlNPTicsICdzdGFjaycpXG4gICAgLCBwcm9wcyA9IGV4dGVuZCh7IG5hbWU6IHRoaXMubmFtZSB9LCB0aGlzKTtcblxuICAvLyBpbmNsdWRlIHN0YWNrIGlmIGV4aXN0cyBhbmQgbm90IHR1cm5lZCBvZmZcbiAgaWYgKGZhbHNlICE9PSBzdGFjayAmJiB0aGlzLnN0YWNrKSB7XG4gICAgcHJvcHMuc3RhY2sgPSB0aGlzLnN0YWNrO1xuICB9XG5cbiAgcmV0dXJuIHByb3BzO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Fzc2VydGlvbi1lcnJvci9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIGNoYWlcbiAqIENvcHlyaWdodChjKSAyMDExIEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBNYWluIGV4cG9ydHNcbiAqL1xuXG52YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8qIVxuICogdGVzdCB1dGlsaXR5XG4gKi9cblxuZXhwb3J0cy50ZXN0ID0gcmVxdWlyZSgnLi90ZXN0Jyk7XG5cbi8qIVxuICogdHlwZSB1dGlsaXR5XG4gKi9cblxuZXhwb3J0cy50eXBlID0gcmVxdWlyZSgndHlwZS1kZXRlY3QnKTtcblxuLyohXG4gKiBleHBlY3RUeXBlcyB1dGlsaXR5XG4gKi9cbmV4cG9ydHMuZXhwZWN0VHlwZXMgPSByZXF1aXJlKCcuL2V4cGVjdFR5cGVzJyk7XG5cbi8qIVxuICogbWVzc2FnZSB1dGlsaXR5XG4gKi9cblxuZXhwb3J0cy5nZXRNZXNzYWdlID0gcmVxdWlyZSgnLi9nZXRNZXNzYWdlJyk7XG5cbi8qIVxuICogYWN0dWFsIHV0aWxpdHlcbiAqL1xuXG5leHBvcnRzLmdldEFjdHVhbCA9IHJlcXVpcmUoJy4vZ2V0QWN0dWFsJyk7XG5cbi8qIVxuICogSW5zcGVjdCB1dGlsXG4gKi9cblxuZXhwb3J0cy5pbnNwZWN0ID0gcmVxdWlyZSgnLi9pbnNwZWN0Jyk7XG5cbi8qIVxuICogT2JqZWN0IERpc3BsYXkgdXRpbFxuICovXG5cbmV4cG9ydHMub2JqRGlzcGxheSA9IHJlcXVpcmUoJy4vb2JqRGlzcGxheScpO1xuXG4vKiFcbiAqIEZsYWcgdXRpbGl0eVxuICovXG5cbmV4cG9ydHMuZmxhZyA9IHJlcXVpcmUoJy4vZmxhZycpO1xuXG4vKiFcbiAqIEZsYWcgdHJhbnNmZXJyaW5nIHV0aWxpdHlcbiAqL1xuXG5leHBvcnRzLnRyYW5zZmVyRmxhZ3MgPSByZXF1aXJlKCcuL3RyYW5zZmVyRmxhZ3MnKTtcblxuLyohXG4gKiBEZWVwIGVxdWFsIHV0aWxpdHlcbiAqL1xuXG5leHBvcnRzLmVxbCA9IHJlcXVpcmUoJ2RlZXAtZXFsJyk7XG5cbi8qIVxuICogRGVlcCBwYXRoIHZhbHVlXG4gKi9cblxuZXhwb3J0cy5nZXRQYXRoVmFsdWUgPSByZXF1aXJlKCcuL2dldFBhdGhWYWx1ZScpO1xuXG4vKiFcbiAqIERlZXAgcGF0aCBpbmZvXG4gKi9cblxuZXhwb3J0cy5nZXRQYXRoSW5mbyA9IHJlcXVpcmUoJy4vZ2V0UGF0aEluZm8nKTtcblxuLyohXG4gKiBDaGVjayBpZiBhIHByb3BlcnR5IGV4aXN0c1xuICovXG5cbmV4cG9ydHMuaGFzUHJvcGVydHkgPSByZXF1aXJlKCcuL2hhc1Byb3BlcnR5Jyk7XG5cbi8qIVxuICogRnVuY3Rpb24gbmFtZVxuICovXG5cbmV4cG9ydHMuZ2V0TmFtZSA9IHJlcXVpcmUoJy4vZ2V0TmFtZScpO1xuXG4vKiFcbiAqIGFkZCBQcm9wZXJ0eVxuICovXG5cbmV4cG9ydHMuYWRkUHJvcGVydHkgPSByZXF1aXJlKCcuL2FkZFByb3BlcnR5Jyk7XG5cbi8qIVxuICogYWRkIE1ldGhvZFxuICovXG5cbmV4cG9ydHMuYWRkTWV0aG9kID0gcmVxdWlyZSgnLi9hZGRNZXRob2QnKTtcblxuLyohXG4gKiBvdmVyd3JpdGUgUHJvcGVydHlcbiAqL1xuXG5leHBvcnRzLm92ZXJ3cml0ZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9vdmVyd3JpdGVQcm9wZXJ0eScpO1xuXG4vKiFcbiAqIG92ZXJ3cml0ZSBNZXRob2RcbiAqL1xuXG5leHBvcnRzLm92ZXJ3cml0ZU1ldGhvZCA9IHJlcXVpcmUoJy4vb3ZlcndyaXRlTWV0aG9kJyk7XG5cbi8qIVxuICogQWRkIGEgY2hhaW5hYmxlIG1ldGhvZFxuICovXG5cbmV4cG9ydHMuYWRkQ2hhaW5hYmxlTWV0aG9kID0gcmVxdWlyZSgnLi9hZGRDaGFpbmFibGVNZXRob2QnKTtcblxuLyohXG4gKiBPdmVyd3JpdGUgY2hhaW5hYmxlIG1ldGhvZFxuICovXG5cbmV4cG9ydHMub3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kID0gcmVxdWlyZSgnLi9vdmVyd3JpdGVDaGFpbmFibGVNZXRob2QnKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBDaGFpIC0gdGVzdCB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBNb2R1bGUgZGVwZW5kYW5jaWVzXG4gKi9cblxudmFyIGZsYWcgPSByZXF1aXJlKCcuL2ZsYWcnKTtcblxuLyoqXG4gKiAjIHRlc3Qob2JqZWN0LCBleHByZXNzaW9uKVxuICpcbiAqIFRlc3QgYW5kIG9iamVjdCBmb3IgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IChjb25zdHJ1Y3RlZCBBc3NlcnRpb24pXG4gKiBAcGFyYW0ge0FyZ3VtZW50c30gY2hhaS5Bc3NlcnRpb24ucHJvdG90eXBlLmFzc2VydCBhcmd1bWVudHNcbiAqIEBuYW1lc3BhY2UgVXRpbHNcbiAqIEBuYW1lIHRlc3RcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmosIGFyZ3MpIHtcbiAgdmFyIG5lZ2F0ZSA9IGZsYWcob2JqLCAnbmVnYXRlJylcbiAgICAsIGV4cHIgPSBhcmdzWzBdO1xuICByZXR1cm4gbmVnYXRlID8gIWV4cHIgOiBleHByO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvdGVzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBmbGFnIHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKipcbiAqICMjIyBmbGFnKG9iamVjdCwga2V5LCBbdmFsdWVdKVxuICpcbiAqIEdldCBvciBzZXQgYSBmbGFnIHZhbHVlIG9uIGFuIG9iamVjdC4gSWYgYVxuICogdmFsdWUgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBzZXQsIGVsc2UgaXQgd2lsbFxuICogcmV0dXJuIHRoZSBjdXJyZW50bHkgc2V0IHZhbHVlIG9yIGB1bmRlZmluZWRgIGlmXG4gKiB0aGUgdmFsdWUgaXMgbm90IHNldC5cbiAqXG4gKiAgICAgdXRpbHMuZmxhZyh0aGlzLCAnZm9vJywgJ2JhcicpOyAvLyBzZXR0ZXJcbiAqICAgICB1dGlscy5mbGFnKHRoaXMsICdmb28nKTsgLy8gZ2V0dGVyLCByZXR1cm5zIGBiYXJgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBjb25zdHJ1Y3RlZCBBc3NlcnRpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIChvcHRpb25hbClcbiAqIEBuYW1lc3BhY2UgVXRpbHNcbiAqIEBuYW1lIGZsYWdcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwga2V5LCB2YWx1ZSkge1xuICB2YXIgZmxhZ3MgPSBvYmouX19mbGFncyB8fCAob2JqLl9fZmxhZ3MgPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcbiAgICBmbGFnc1trZXldID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZsYWdzW2tleV07XG4gIH1cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2ZsYWcuanNcbiAqKiBtb2R1bGUgaWQgPSA3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi90eXBlJyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi90eXBlLWRldGVjdC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIHR5cGUtZGV0ZWN0XG4gKiBDb3B5cmlnaHQoYykgMjAxMyBqYWtlIGx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qIVxuICogUHJpbWFyeSBFeHBvcnRzXG4gKi9cblxudmFyIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGdldFR5cGU7XG5cbi8qKlxuICogIyMjIHR5cGVPZiAob2JqKVxuICpcbiAqIFVzZSBzZXZlcmFsIGRpZmZlcmVudCB0ZWNobmlxdWVzIHRvIGRldGVybWluZVxuICogdGhlIHR5cGUgb2Ygb2JqZWN0IGJlaW5nIHRlc3RlZC5cbiAqXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0XG4gKiBAcmV0dXJuIHtTdHJpbmd9IG9iamVjdCB0eXBlXG4gKiBAYXBpIHB1YmxpY1xuICovXG52YXIgb2JqZWN0VHlwZVJlZ2V4cCA9IC9eXFxbb2JqZWN0ICguKilcXF0kLztcblxuZnVuY3Rpb24gZ2V0VHlwZShvYmopIHtcbiAgdmFyIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKS5tYXRjaChvYmplY3RUeXBlUmVnZXhwKVsxXS50b0xvd2VyQ2FzZSgpO1xuICAvLyBMZXQgXCJuZXcgU3RyaW5nKCcnKVwiIHJldHVybiAnb2JqZWN0J1xuICBpZiAodHlwZW9mIFByb21pc2UgPT09ICdmdW5jdGlvbicgJiYgb2JqIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuICdwcm9taXNlJztcbiAgLy8gUGhhbnRvbUpTIGhhcyB0eXBlIFwiRE9NV2luZG93XCIgZm9yIG51bGxcbiAgaWYgKG9iaiA9PT0gbnVsbCkgcmV0dXJuICdudWxsJztcbiAgLy8gUGhhbnRvbUpTIGhhcyB0eXBlIFwiRE9NV2luZG93XCIgZm9yIHVuZGVmaW5lZFxuICBpZiAob2JqID09PSB1bmRlZmluZWQpIHJldHVybiAndW5kZWZpbmVkJztcbiAgcmV0dXJuIHR5cGU7XG59XG5cbmV4cG9ydHMuTGlicmFyeSA9IExpYnJhcnk7XG5cbi8qKlxuICogIyMjIExpYnJhcnlcbiAqXG4gKiBDcmVhdGUgYSByZXBvc2l0b3J5IGZvciBjdXN0b20gdHlwZSBkZXRlY3Rpb24uXG4gKlxuICogYGBganNcbiAqIHZhciBsaWIgPSBuZXcgdHlwZS5MaWJyYXJ5O1xuICogYGBgXG4gKlxuICovXG5cbmZ1bmN0aW9uIExpYnJhcnkoKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBMaWJyYXJ5KSkgcmV0dXJuIG5ldyBMaWJyYXJ5KCk7XG4gIHRoaXMudGVzdHMgPSB7fTtcbn1cblxuLyoqXG4gKiAjIyMjIC5vZiAob2JqKVxuICpcbiAqIEV4cG9zZSByZXBsYWNlbWVudCBgdHlwZW9mYCBkZXRlY3Rpb24gdG8gdGhlIGxpYnJhcnkuXG4gKlxuICogYGBganNcbiAqIGlmICgnc3RyaW5nJyA9PT0gbGliLm9mKCdoZWxsbyB3b3JsZCcpKSB7XG4gKiAgIC8vIC4uLlxuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0IHRvIHRlc3RcbiAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuICovXG5cbkxpYnJhcnkucHJvdG90eXBlLm9mID0gZ2V0VHlwZTtcblxuLyoqXG4gKiAjIyMjIC5kZWZpbmUgKHR5cGUsIHRlc3QpXG4gKlxuICogQWRkIGEgdGVzdCB0byBmb3IgdGhlIGAudGVzdCgpYCBhc3NlcnRpb24uXG4gKlxuICogQ2FuIGJlIGRlZmluZWQgYXMgYSByZWd1bGFyIGV4cHJlc3Npb246XG4gKlxuICogYGBganNcbiAqIGxpYi5kZWZpbmUoJ2ludCcsIC9eWzAtOV0rJC8pO1xuICogYGBgXG4gKlxuICogLi4uIG9yIGFzIGEgZnVuY3Rpb246XG4gKlxuICogYGBganNcbiAqIGxpYi5kZWZpbmUoJ2JsbicsIGZ1bmN0aW9uIChvYmopIHtcbiAqICAgaWYgKCdib29sZWFuJyA9PT0gbGliLm9mKG9iaikpIHJldHVybiB0cnVlO1xuICogICB2YXIgYmxucyA9IFsgJ3llcycsICdubycsICd0cnVlJywgJ2ZhbHNlJywgMSwgMCBdO1xuICogICBpZiAoJ3N0cmluZycgPT09IGxpYi5vZihvYmopKSBvYmogPSBvYmoudG9Mb3dlckNhc2UoKTtcbiAqICAgcmV0dXJuICEhIH5ibG5zLmluZGV4T2Yob2JqKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7UmVnRXhwfEZ1bmN0aW9ufSB0ZXN0XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkxpYnJhcnkucHJvdG90eXBlLmRlZmluZSA9IGZ1bmN0aW9uKHR5cGUsIHRlc3QpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHJldHVybiB0aGlzLnRlc3RzW3R5cGVdO1xuICB0aGlzLnRlc3RzW3R5cGVdID0gdGVzdDtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqICMjIyMgLnRlc3QgKG9iaiwgdGVzdClcbiAqXG4gKiBBc3NlcnQgdGhhdCBhbiBvYmplY3QgaXMgb2YgdHlwZS4gV2lsbCBmaXJzdFxuICogY2hlY2sgbmF0aXZlcywgYW5kIGlmIHRoYXQgZG9lcyBub3QgcGFzcyBpdCB3aWxsXG4gKiB1c2UgdGhlIHVzZXIgZGVmaW5lZCBjdXN0b20gdGVzdHMuXG4gKlxuICogYGBganNcbiAqIGFzc2VydChsaWIudGVzdCgnMScsICdpbnQnKSk7XG4gKiBhc3NlcnQobGliLnRlc3QoJ3llcycsICdibG4nKSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge01peGVkfSBvYmplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuTGlicmFyeS5wcm90b3R5cGUudGVzdCA9IGZ1bmN0aW9uKG9iaiwgdHlwZSkge1xuICBpZiAodHlwZSA9PT0gZ2V0VHlwZShvYmopKSByZXR1cm4gdHJ1ZTtcbiAgdmFyIHRlc3QgPSB0aGlzLnRlc3RzW3R5cGVdO1xuXG4gIGlmICh0ZXN0ICYmICdyZWdleHAnID09PSBnZXRUeXBlKHRlc3QpKSB7XG4gICAgcmV0dXJuIHRlc3QudGVzdChvYmopO1xuICB9IGVsc2UgaWYgKHRlc3QgJiYgJ2Z1bmN0aW9uJyA9PT0gZ2V0VHlwZSh0ZXN0KSkge1xuICAgIHJldHVybiB0ZXN0KG9iaik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdUeXBlIHRlc3QgXCInICsgdHlwZSArICdcIiBub3QgZGVmaW5lZCBvciBpbnZhbGlkLicpO1xuICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdHlwZS1kZXRlY3QvbGliL3R5cGUuanNcbiAqKiBtb2R1bGUgaWQgPSA3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBDaGFpIC0gZXhwZWN0VHlwZXMgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qKlxuICogIyMjIGV4cGVjdFR5cGVzKG9iaiwgdHlwZXMpXG4gKlxuICogRW5zdXJlcyB0aGF0IHRoZSBvYmplY3QgYmVpbmcgdGVzdGVkIGFnYWluc3QgaXMgb2YgYSB2YWxpZCB0eXBlLlxuICpcbiAqICAgICB1dGlscy5leHBlY3RUeXBlcyh0aGlzLCBbJ2FycmF5JywgJ29iamVjdCcsICdzdHJpbmcnXSk7XG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqIGNvbnN0cnVjdGVkIEFzc2VydGlvblxuICogQHBhcmFtIHtBcnJheX0gdHlwZSBBIGxpc3Qgb2YgYWxsb3dlZCB0eXBlcyBmb3IgdGhpcyBhc3NlcnRpb25cbiAqIEBuYW1lc3BhY2UgVXRpbHNcbiAqIEBuYW1lIGV4cGVjdFR5cGVzXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnZhciBBc3NlcnRpb25FcnJvciA9IHJlcXVpcmUoJ2Fzc2VydGlvbi1lcnJvcicpO1xudmFyIGZsYWcgPSByZXF1aXJlKCcuL2ZsYWcnKTtcbnZhciB0eXBlID0gcmVxdWlyZSgndHlwZS1kZXRlY3QnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCB0eXBlcykge1xuICB2YXIgb2JqID0gZmxhZyhvYmosICdvYmplY3QnKTtcbiAgdHlwZXMgPSB0eXBlcy5tYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQudG9Mb3dlckNhc2UoKTsgfSk7XG4gIHR5cGVzLnNvcnQoKTtcblxuICAvLyBUcmFuc2Zvcm1zIFsnbG9yZW0nLCAnaXBzdW0nXSBpbnRvICdhIGxpcnVtLCBvciBhbiBpcHN1bSdcbiAgdmFyIHN0ciA9IHR5cGVzLm1hcChmdW5jdGlvbiAodCwgaW5kZXgpIHtcbiAgICB2YXIgYXJ0ID0gflsgJ2EnLCAnZScsICdpJywgJ28nLCAndScgXS5pbmRleE9mKHQuY2hhckF0KDApKSA/ICdhbicgOiAnYSc7XG4gICAgdmFyIG9yID0gdHlwZXMubGVuZ3RoID4gMSAmJiBpbmRleCA9PT0gdHlwZXMubGVuZ3RoIC0gMSA/ICdvciAnIDogJyc7XG4gICAgcmV0dXJuIG9yICsgYXJ0ICsgJyAnICsgdDtcbiAgfSkuam9pbignLCAnKTtcblxuICBpZiAoIXR5cGVzLnNvbWUoZnVuY3Rpb24gKGV4cGVjdGVkKSB7IHJldHVybiB0eXBlKG9iaikgPT09IGV4cGVjdGVkOyB9KSkge1xuICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcihcbiAgICAgICdvYmplY3QgdGVzdGVkIG11c3QgYmUgJyArIHN0ciArICcsIGJ1dCAnICsgdHlwZShvYmopICsgJyBnaXZlbidcbiAgICApO1xuICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy9leHBlY3RUeXBlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBtZXNzYWdlIGNvbXBvc2l0aW9uIHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKiFcbiAqIE1vZHVsZSBkZXBlbmRhbmNpZXNcbiAqL1xuXG52YXIgZmxhZyA9IHJlcXVpcmUoJy4vZmxhZycpXG4gICwgZ2V0QWN0dWFsID0gcmVxdWlyZSgnLi9nZXRBY3R1YWwnKVxuICAsIGluc3BlY3QgPSByZXF1aXJlKCcuL2luc3BlY3QnKVxuICAsIG9iakRpc3BsYXkgPSByZXF1aXJlKCcuL29iakRpc3BsYXknKTtcblxuLyoqXG4gKiAjIyMgLmdldE1lc3NhZ2Uob2JqZWN0LCBtZXNzYWdlLCBuZWdhdGVNZXNzYWdlKVxuICpcbiAqIENvbnN0cnVjdCB0aGUgZXJyb3IgbWVzc2FnZSBiYXNlZCBvbiBmbGFnc1xuICogYW5kIHRlbXBsYXRlIHRhZ3MuIFRlbXBsYXRlIHRhZ3Mgd2lsbCByZXR1cm5cbiAqIGEgc3RyaW5naWZpZWQgaW5zcGVjdGlvbiBvZiB0aGUgb2JqZWN0IHJlZmVyZW5jZWQuXG4gKlxuICogTWVzc2FnZSB0ZW1wbGF0ZSB0YWdzOlxuICogLSBgI3t0aGlzfWAgY3VycmVudCBhc3NlcnRlZCBvYmplY3RcbiAqIC0gYCN7YWN0fWAgYWN0dWFsIHZhbHVlXG4gKiAtIGAje2V4cH1gIGV4cGVjdGVkIHZhbHVlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCAoY29uc3RydWN0ZWQgQXNzZXJ0aW9uKVxuICogQHBhcmFtIHtBcmd1bWVudHN9IGNoYWkuQXNzZXJ0aW9uLnByb3RvdHlwZS5hc3NlcnQgYXJndW1lbnRzXG4gKiBAbmFtZXNwYWNlIFV0aWxzXG4gKiBAbmFtZSBnZXRNZXNzYWdlXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwgYXJncykge1xuICB2YXIgbmVnYXRlID0gZmxhZyhvYmosICduZWdhdGUnKVxuICAgICwgdmFsID0gZmxhZyhvYmosICdvYmplY3QnKVxuICAgICwgZXhwZWN0ZWQgPSBhcmdzWzNdXG4gICAgLCBhY3R1YWwgPSBnZXRBY3R1YWwob2JqLCBhcmdzKVxuICAgICwgbXNnID0gbmVnYXRlID8gYXJnc1syXSA6IGFyZ3NbMV1cbiAgICAsIGZsYWdNc2cgPSBmbGFnKG9iaiwgJ21lc3NhZ2UnKTtcblxuICBpZih0eXBlb2YgbXNnID09PSBcImZ1bmN0aW9uXCIpIG1zZyA9IG1zZygpO1xuICBtc2cgPSBtc2cgfHwgJyc7XG4gIG1zZyA9IG1zZ1xuICAgIC5yZXBsYWNlKC8jXFx7dGhpc1xcfS9nLCBmdW5jdGlvbiAoKSB7IHJldHVybiBvYmpEaXNwbGF5KHZhbCk7IH0pXG4gICAgLnJlcGxhY2UoLyNcXHthY3RcXH0vZywgZnVuY3Rpb24gKCkgeyByZXR1cm4gb2JqRGlzcGxheShhY3R1YWwpOyB9KVxuICAgIC5yZXBsYWNlKC8jXFx7ZXhwXFx9L2csIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9iakRpc3BsYXkoZXhwZWN0ZWQpOyB9KTtcblxuICByZXR1cm4gZmxhZ01zZyA/IGZsYWdNc2cgKyAnOiAnICsgbXNnIDogbXNnO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZ2V0TWVzc2FnZS5qc1xuICoqIG1vZHVsZSBpZCA9IDc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBnZXRBY3R1YWwgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qKlxuICogIyBnZXRBY3R1YWwob2JqZWN0LCBbYWN0dWFsXSlcbiAqXG4gKiBSZXR1cm5zIHRoZSBgYWN0dWFsYCB2YWx1ZSBmb3IgYW4gQXNzZXJ0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCAoY29uc3RydWN0ZWQgQXNzZXJ0aW9uKVxuICogQHBhcmFtIHtBcmd1bWVudHN9IGNoYWkuQXNzZXJ0aW9uLnByb3RvdHlwZS5hc3NlcnQgYXJndW1lbnRzXG4gKiBAbmFtZXNwYWNlIFV0aWxzXG4gKiBAbmFtZSBnZXRBY3R1YWxcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmosIGFyZ3MpIHtcbiAgcmV0dXJuIGFyZ3MubGVuZ3RoID4gNCA/IGFyZ3NbNF0gOiBvYmouX29iajtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2dldEFjdHVhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDc2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBUaGlzIGlzIChhbG1vc3QpIGRpcmVjdGx5IGZyb20gTm9kZS5qcyB1dGlsc1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2Jsb2IvZjhjMzM1ZDBjYWY0N2YxNmQzMTQxM2Y4OWFhMjhlZGEzODc4ZTNhYS9saWIvdXRpbC5qc1xuXG52YXIgZ2V0TmFtZSA9IHJlcXVpcmUoJy4vZ2V0TmFtZScpO1xudmFyIGdldFByb3BlcnRpZXMgPSByZXF1aXJlKCcuL2dldFByb3BlcnRpZXMnKTtcbnZhciBnZXRFbnVtZXJhYmxlUHJvcGVydGllcyA9IHJlcXVpcmUoJy4vZ2V0RW51bWVyYWJsZVByb3BlcnRpZXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbnNwZWN0O1xuXG4vKipcbiAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcbiAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNob3dIaWRkZW4gRmxhZyB0aGF0IHNob3dzIGhpZGRlbiAobm90IGVudW1lcmFibGUpXG4gKiAgICBwcm9wZXJ0aWVzIG9mIG9iamVjdHMuXG4gKiBAcGFyYW0ge051bWJlcn0gZGVwdGggRGVwdGggaW4gd2hpY2ggdG8gZGVzY2VuZCBpbiBvYmplY3QuIERlZmF1bHQgaXMgMi5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gY29sb3JzIEZsYWcgdG8gdHVybiBvbiBBTlNJIGVzY2FwZSBjb2RlcyB0byBjb2xvciB0aGVcbiAqICAgIG91dHB1dC4gRGVmYXVsdCBpcyBmYWxzZSAobm8gY29sb3JpbmcpLlxuICogQG5hbWVzcGFjZSBVdGlsc1xuICogQG5hbWUgaW5zcGVjdFxuICovXG5mdW5jdGlvbiBpbnNwZWN0KG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycykge1xuICB2YXIgY3R4ID0ge1xuICAgIHNob3dIaWRkZW46IHNob3dIaWRkZW4sXG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyOyB9XG4gIH07XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgKHR5cGVvZiBkZXB0aCA9PT0gJ3VuZGVmaW5lZCcgPyAyIDogZGVwdGgpKTtcbn1cblxuLy8gUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhIERPTSBlbGVtZW50LlxudmFyIGlzRE9NRWxlbWVudCA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG9iamVjdCAmJlxuICAgICAgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiZcbiAgICAgIG9iamVjdC5ub2RlVHlwZSA9PT0gMSAmJlxuICAgICAgdHlwZW9mIG9iamVjdC5ub2RlTmFtZSA9PT0gJ3N0cmluZyc7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuICAvLyBQcm92aWRlIGEgaG9vayBmb3IgdXNlci1zcGVjaWZpZWQgaW5zcGVjdCBmdW5jdGlvbnMuXG4gIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLmluc3BlY3QgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuICAgICAgdmFsdWUuaW5zcGVjdCAhPT0gZXhwb3J0cy5pbnNwZWN0ICYmXG4gICAgICAvLyBBbHNvIGZpbHRlciBvdXQgYW55IHByb3RvdHlwZSBvYmplY3RzIHVzaW5nIHRoZSBjaXJjdWxhciBjaGVjay5cbiAgICAgICEodmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlID09PSB2YWx1ZSkpIHtcbiAgICB2YXIgcmV0ID0gdmFsdWUuaW5zcGVjdChyZWN1cnNlVGltZXMpO1xuICAgIGlmICh0eXBlb2YgcmV0ICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuICBpZiAocHJpbWl0aXZlKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8vIElmIHRoaXMgaXMgYSBET00gZWxlbWVudCwgdHJ5IHRvIGdldCB0aGUgb3V0ZXIgSFRNTC5cbiAgaWYgKGlzRE9NRWxlbWVudCh2YWx1ZSkpIHtcbiAgICBpZiAoJ291dGVySFRNTCcgaW4gdmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5vdXRlckhUTUw7XG4gICAgICAvLyBUaGlzIHZhbHVlIGRvZXMgbm90IGhhdmUgYW4gb3V0ZXJIVE1MIGF0dHJpYnV0ZSxcbiAgICAgIC8vICAgaXQgY291bGQgc3RpbGwgYmUgYW4gWE1MIGVsZW1lbnRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQXR0ZW1wdCB0byBzZXJpYWxpemUgaXRcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChkb2N1bWVudC54bWxWZXJzaW9uKSB7XG4gICAgICAgICAgdmFyIHhtbFNlcmlhbGl6ZXIgPSBuZXcgWE1MU2VyaWFsaXplcigpO1xuICAgICAgICAgIHJldHVybiB4bWxTZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGaXJlZm94IDExLSBkbyBub3Qgc3VwcG9ydCBvdXRlckhUTUxcbiAgICAgICAgICAvLyAgIEl0IGRvZXMsIGhvd2V2ZXIsIHN1cHBvcnQgaW5uZXJIVE1MXG4gICAgICAgICAgLy8gICBVc2UgdGhlIGZvbGxvd2luZyB0byByZW5kZXIgdGhlIGVsZW1lbnRcbiAgICAgICAgICB2YXIgbnMgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIjtcbiAgICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnXycpO1xuXG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHZhbHVlLmNsb25lTm9kZShmYWxzZSkpO1xuICAgICAgICAgIGh0bWwgPSBjb250YWluZXIuaW5uZXJIVE1MXG4gICAgICAgICAgICAucmVwbGFjZSgnPjwnLCAnPicgKyB2YWx1ZS5pbm5lckhUTUwgKyAnPCcpO1xuICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICByZXR1cm4gaHRtbDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIFRoaXMgY291bGQgYmUgYSBub24tbmF0aXZlIERPTSBpbXBsZW1lbnRhdGlvbixcbiAgICAgICAgLy8gICBjb250aW51ZSB3aXRoIHRoZSBub3JtYWwgZmxvdzpcbiAgICAgICAgLy8gICBwcmludGluZyB0aGUgZWxlbWVudCBhcyBpZiBpdCBpcyBhbiBvYmplY3QuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gTG9vayB1cCB0aGUga2V5cyBvZiB0aGUgb2JqZWN0LlxuICB2YXIgdmlzaWJsZUtleXMgPSBnZXRFbnVtZXJhYmxlUHJvcGVydGllcyh2YWx1ZSk7XG4gIHZhciBrZXlzID0gY3R4LnNob3dIaWRkZW4gPyBnZXRQcm9wZXJ0aWVzKHZhbHVlKSA6IHZpc2libGVLZXlzO1xuXG4gIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cbiAgLy8gSW4gSUUsIGVycm9ycyBoYXZlIGEgc2luZ2xlIGBzdGFja2AgcHJvcGVydHksIG9yIGlmIHRoZXkgYXJlIHZhbmlsbGEgYEVycm9yYCxcbiAgLy8gYSBgc3RhY2tgIHBsdXMgYGRlc2NyaXB0aW9uYCBwcm9wZXJ0eTsgaWdub3JlIHRob3NlIGZvciBjb25zaXN0ZW5jeS5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwIHx8IChpc0Vycm9yKHZhbHVlKSAmJiAoXG4gICAgICAoa2V5cy5sZW5ndGggPT09IDEgJiYga2V5c1swXSA9PT0gJ3N0YWNrJykgfHxcbiAgICAgIChrZXlzLmxlbmd0aCA9PT0gMiAmJiBrZXlzWzBdID09PSAnZGVzY3JpcHRpb24nICYmIGtleXNbMV0gPT09ICdzdGFjaycpXG4gICAgICkpKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFyIG5hbWUgPSBnZXROYW1lKHZhbHVlKTtcbiAgICAgIHZhciBuYW1lU3VmZml4ID0gbmFtZSA/ICc6ICcgKyBuYW1lIDogJyc7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lU3VmZml4ICsgJ10nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH1cbiAgICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpO1xuICAgIH1cbiAgICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTtcblxuICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGFycmF5ID0gdHJ1ZTtcbiAgICBicmFjZXMgPSBbJ1snLCAnXSddO1xuICB9XG5cbiAgLy8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgbmFtZSA9IGdldE5hbWUodmFsdWUpO1xuICAgIHZhciBuYW1lU3VmZml4ID0gbmFtZSA/ICc6ICcgKyBuYW1lIDogJyc7XG4gICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG5hbWVTdWZmaXggKyAnXSc7XG4gIH1cblxuICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIH1cblxuICAvLyBNYWtlIGRhdGVzIHdpdGggcHJvcGVydGllcyBmaXJzdCBzYXkgdGhlIGRhdGVcbiAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIH1cblxuICAvLyBNYWtlIGVycm9yIHdpdGggbWVzc2FnZSBmaXJzdCBzYXkgdGhlIGVycm9yXG4gIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArIGJyYWNlc1sxXTtcbiAgfVxuXG4gIGlmIChyZWN1cnNlVGltZXMgPCAwKSB7XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbT2JqZWN0XScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG5cbiAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cbiAgdmFyIG91dHB1dDtcbiAgaWYgKGFycmF5KSB7XG4gICAgb3V0cHV0ID0gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cyk7XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSk7XG4gICAgfSk7XG4gIH1cblxuICBjdHguc2Vlbi5wb3AoKTtcblxuICByZXR1cm4gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKSB7XG4gIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuXG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykgKyAnXFwnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcblxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICBpZiAodmFsdWUgPT09IDAgJiYgKDEvdmFsdWUpID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCctMCcsICdudW1iZXInKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG5cbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICB9XG4gIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cbiAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKSB7XG4gIHJldHVybiAnWycgKyBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgKyAnXSc7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cykge1xuICB2YXIgb3V0cHV0ID0gW107XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LnB1c2goJycpO1xuICAgIH1cbiAgfVxuICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIGtleSwgdHJ1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuICB2YXIgbmFtZSwgc3RyO1xuICBpZiAodmFsdWUuX19sb29rdXBHZXR0ZXJfXykge1xuICAgIGlmICh2YWx1ZS5fX2xvb2t1cEdldHRlcl9fKGtleSkpIHtcbiAgICAgIGlmICh2YWx1ZS5fX2xvb2t1cFNldHRlcl9fKGtleSkpIHtcbiAgICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodmFsdWUuX19sb29rdXBTZXR0ZXJfXyhrZXkpKSB7XG4gICAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICh2aXNpYmxlS2V5cy5pbmRleE9mKGtleSkgPCAwKSB7XG4gICAgbmFtZSA9ICdbJyArIGtleSArICddJztcbiAgfVxuICBpZiAoIXN0cikge1xuICAgIGlmIChjdHguc2Vlbi5pbmRleE9mKHZhbHVlW2tleV0pIDwgMCkge1xuICAgICAgaWYgKHJlY3Vyc2VUaW1lcyA9PT0gbnVsbCkge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlW2tleV0sIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZVtrZXldLCByZWN1cnNlVGltZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9ICdcXG4nICsgc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIubGVuZ3RoICsgMTtcbiAgfSwgMCk7XG5cbiAgaWYgKGxlbmd0aCA+IDYwKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArXG4gICAgICAgICAgIChiYXNlID09PSAnJyA/ICcnIDogYmFzZSArICdcXG4gJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBicmFjZXNbMV07XG4gIH1cblxuICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArICcgJyArIG91dHB1dC5qb2luKCcsICcpICsgJyAnICsgYnJhY2VzWzFdO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5KGFyKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGFyKSB8fFxuICAgICAgICAgKHR5cGVvZiBhciA9PT0gJ29iamVjdCcgJiYgb2JqZWN0VG9TdHJpbmcoYXIpID09PSAnW29iamVjdCBBcnJheV0nKTtcbn1cblxuZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcbiAgcmV0dXJuIHR5cGVvZiByZSA9PT0gJ29iamVjdCcgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cblxuZnVuY3Rpb24gaXNEYXRlKGQpIHtcbiAgcmV0dXJuIHR5cGVvZiBkID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIHR5cGVvZiBlID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJztcbn1cblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy9pbnNwZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gNzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogQ2hhaSAtIGdldE5hbWUgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qKlxuICogIyBnZXROYW1lKGZ1bmMpXG4gKlxuICogR2V0cyB0aGUgbmFtZSBvZiBhIGZ1bmN0aW9uLCBpbiBhIGNyb3NzLWJyb3dzZXIgd2F5LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGEgZnVuY3Rpb24gKHVzdWFsbHkgYSBjb25zdHJ1Y3RvcilcbiAqIEBuYW1lc3BhY2UgVXRpbHNcbiAqIEBuYW1lIGdldE5hbWVcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gIGlmIChmdW5jLm5hbWUpIHJldHVybiBmdW5jLm5hbWU7XG5cbiAgdmFyIG1hdGNoID0gL15cXHM/ZnVuY3Rpb24gKFteKF0qKVxcKC8uZXhlYyhmdW5jKTtcbiAgcmV0dXJuIG1hdGNoICYmIG1hdGNoWzFdID8gbWF0Y2hbMV0gOiBcIlwiO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvZ2V0TmFtZS5qc1xuICoqIG1vZHVsZSBpZCA9IDc4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBnZXRQcm9wZXJ0aWVzIHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKipcbiAqICMjIyAuZ2V0UHJvcGVydGllcyhvYmplY3QpXG4gKlxuICogVGhpcyBhbGxvd3MgdGhlIHJldHJpZXZhbCBvZiBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QsIGVudW1lcmFibGUgb3Igbm90LFxuICogaW5oZXJpdGVkIG9yIG5vdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKiBAbmFtZXNwYWNlIFV0aWxzXG4gKiBAbmFtZSBnZXRQcm9wZXJ0aWVzXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0UHJvcGVydGllcyhvYmplY3QpIHtcbiAgdmFyIHJlc3VsdCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iamVjdCk7XG5cbiAgZnVuY3Rpb24gYWRkUHJvcGVydHkocHJvcGVydHkpIHtcbiAgICBpZiAocmVzdWx0LmluZGV4T2YocHJvcGVydHkpID09PSAtMSkge1xuICAgICAgcmVzdWx0LnB1c2gocHJvcGVydHkpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpO1xuICB3aGlsZSAocHJvdG8gIT09IG51bGwpIHtcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90bykuZm9yRWFjaChhZGRQcm9wZXJ0eSk7XG4gICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2dldFByb3BlcnRpZXMuanNcbiAqKiBtb2R1bGUgaWQgPSA3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBDaGFpIC0gZ2V0RW51bWVyYWJsZVByb3BlcnRpZXMgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qKlxuICogIyMjIC5nZXRFbnVtZXJhYmxlUHJvcGVydGllcyhvYmplY3QpXG4gKlxuICogVGhpcyBhbGxvd3MgdGhlIHJldHJpZXZhbCBvZiBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdCxcbiAqIGluaGVyaXRlZCBvciBub3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICogQHJldHVybnMge0FycmF5fVxuICogQG5hbWVzcGFjZSBVdGlsc1xuICogQG5hbWUgZ2V0RW51bWVyYWJsZVByb3BlcnRpZXNcbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRFbnVtZXJhYmxlUHJvcGVydGllcyhvYmplY3QpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBmb3IgKHZhciBuYW1lIGluIG9iamVjdCkge1xuICAgIHJlc3VsdC5wdXNoKG5hbWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXRFbnVtZXJhYmxlUHJvcGVydGllcy5qc1xuICoqIG1vZHVsZSBpZCA9IDgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBmbGFnIHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKiFcbiAqIE1vZHVsZSBkZXBlbmRhbmNpZXNcbiAqL1xuXG52YXIgaW5zcGVjdCA9IHJlcXVpcmUoJy4vaW5zcGVjdCcpO1xudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uL2NvbmZpZycpO1xuXG4vKipcbiAqICMjIyAub2JqRGlzcGxheSAob2JqZWN0KVxuICpcbiAqIERldGVybWluZXMgaWYgYW4gb2JqZWN0IG9yIGFuIGFycmF5IG1hdGNoZXNcbiAqIGNyaXRlcmlhIHRvIGJlIGluc3BlY3RlZCBpbi1saW5lIGZvciBlcnJvclxuICogbWVzc2FnZXMgb3Igc2hvdWxkIGJlIHRydW5jYXRlZC5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSBqYXZhc2NyaXB0IG9iamVjdCB0byBpbnNwZWN0XG4gKiBAbmFtZSBvYmpEaXNwbGF5XG4gKiBAbmFtZXNwYWNlIFV0aWxzXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIgc3RyID0gaW5zcGVjdChvYmopXG4gICAgLCB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7XG5cbiAgaWYgKGNvbmZpZy50cnVuY2F0ZVRocmVzaG9sZCAmJiBzdHIubGVuZ3RoID49IGNvbmZpZy50cnVuY2F0ZVRocmVzaG9sZCkge1xuICAgIGlmICh0eXBlID09PSAnW29iamVjdCBGdW5jdGlvbl0nKSB7XG4gICAgICByZXR1cm4gIW9iai5uYW1lIHx8IG9iai5uYW1lID09PSAnJ1xuICAgICAgICA/ICdbRnVuY3Rpb25dJ1xuICAgICAgICA6ICdbRnVuY3Rpb246ICcgKyBvYmoubmFtZSArICddJztcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybiAnWyBBcnJheSgnICsgb2JqLmxlbmd0aCArICcpIF0nO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKVxuICAgICAgICAsIGtzdHIgPSBrZXlzLmxlbmd0aCA+IDJcbiAgICAgICAgICA/IGtleXMuc3BsaWNlKDAsIDIpLmpvaW4oJywgJykgKyAnLCAuLi4nXG4gICAgICAgICAgOiBrZXlzLmpvaW4oJywgJyk7XG4gICAgICByZXR1cm4gJ3sgT2JqZWN0ICgnICsga3N0ciArICcpIH0nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy9vYmpEaXNwbGF5LmpzXG4gKiogbW9kdWxlIGlkID0gODFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIC8qKlxuICAgKiAjIyMgY29uZmlnLmluY2x1ZGVTdGFja1xuICAgKlxuICAgKiBVc2VyIGNvbmZpZ3VyYWJsZSBwcm9wZXJ0eSwgaW5mbHVlbmNlcyB3aGV0aGVyIHN0YWNrIHRyYWNlXG4gICAqIGlzIGluY2x1ZGVkIGluIEFzc2VydGlvbiBlcnJvciBtZXNzYWdlLiBEZWZhdWx0IG9mIGZhbHNlXG4gICAqIHN1cHByZXNzZXMgc3RhY2sgdHJhY2UgaW4gdGhlIGVycm9yIG1lc3NhZ2UuXG4gICAqXG4gICAqICAgICBjaGFpLmNvbmZpZy5pbmNsdWRlU3RhY2sgPSB0cnVlOyAgLy8gZW5hYmxlIHN0YWNrIG9uIGVycm9yXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn1cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgIGluY2x1ZGVTdGFjazogZmFsc2UsXG5cbiAgLyoqXG4gICAqICMjIyBjb25maWcuc2hvd0RpZmZcbiAgICpcbiAgICogVXNlciBjb25maWd1cmFibGUgcHJvcGVydHksIGluZmx1ZW5jZXMgd2hldGhlciBvciBub3RcbiAgICogdGhlIGBzaG93RGlmZmAgZmxhZyBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIHRocm93blxuICAgKiBBc3NlcnRpb25FcnJvcnMuIGBmYWxzZWAgd2lsbCBhbHdheXMgYmUgYGZhbHNlYDsgYHRydWVgXG4gICAqIHdpbGwgYmUgdHJ1ZSB3aGVuIHRoZSBhc3NlcnRpb24gaGFzIHJlcXVlc3RlZCBhIGRpZmZcbiAgICogYmUgc2hvd24uXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn1cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgc2hvd0RpZmY6IHRydWUsXG5cbiAgLyoqXG4gICAqICMjIyBjb25maWcudHJ1bmNhdGVUaHJlc2hvbGRcbiAgICpcbiAgICogVXNlciBjb25maWd1cmFibGUgcHJvcGVydHksIHNldHMgbGVuZ3RoIHRocmVzaG9sZCBmb3IgYWN0dWFsIGFuZFxuICAgKiBleHBlY3RlZCB2YWx1ZXMgaW4gYXNzZXJ0aW9uIGVycm9ycy4gSWYgdGhpcyB0aHJlc2hvbGQgaXMgZXhjZWVkZWQsIGZvclxuICAgKiBleGFtcGxlIGZvciBsYXJnZSBkYXRhIHN0cnVjdHVyZXMsIHRoZSB2YWx1ZSBpcyByZXBsYWNlZCB3aXRoIHNvbWV0aGluZ1xuICAgKiBsaWtlIGBbIEFycmF5KDMpIF1gIG9yIGB7IE9iamVjdCAocHJvcDEsIHByb3AyKSB9YC5cbiAgICpcbiAgICogU2V0IGl0IHRvIHplcm8gaWYgeW91IHdhbnQgdG8gZGlzYWJsZSB0cnVuY2F0aW5nIGFsdG9nZXRoZXIuXG4gICAqXG4gICAqIFRoaXMgaXMgZXNwZWNpYWxseSB1c2VyZnVsIHdoZW4gZG9pbmcgYXNzZXJ0aW9ucyBvbiBhcnJheXM6IGhhdmluZyB0aGlzXG4gICAqIHNldCB0byBhIHJlYXNvbmFibGUgbGFyZ2UgdmFsdWUgbWFrZXMgdGhlIGZhaWx1cmUgbWVzc2FnZXMgcmVhZGlseVxuICAgKiBpbnNwZWN0YWJsZS5cbiAgICpcbiAgICogICAgIGNoYWkuY29uZmlnLnRydW5jYXRlVGhyZXNob2xkID0gMDsgIC8vIGRpc2FibGUgdHJ1bmNhdGluZ1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn1cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgdHJ1bmNhdGVUaHJlc2hvbGQ6IDQwXG5cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL2NvbmZpZy5qc1xuICoqIG1vZHVsZSBpZCA9IDgyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSB0cmFuc2ZlckZsYWdzIHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4vKipcbiAqICMjIyB0cmFuc2ZlckZsYWdzKGFzc2VydGlvbiwgb2JqZWN0LCBpbmNsdWRlQWxsID0gdHJ1ZSlcbiAqXG4gKiBUcmFuc2ZlciBhbGwgdGhlIGZsYWdzIGZvciBgYXNzZXJ0aW9uYCB0byBgb2JqZWN0YC4gSWZcbiAqIGBpbmNsdWRlQWxsYCBpcyBzZXQgdG8gYGZhbHNlYCwgdGhlbiB0aGUgYmFzZSBDaGFpXG4gKiBhc3NlcnRpb24gZmxhZ3MgKG5hbWVseSBgb2JqZWN0YCwgYHNzZmlgLCBhbmQgYG1lc3NhZ2VgKVxuICogd2lsbCBub3QgYmUgdHJhbnNmZXJyZWQuXG4gKlxuICpcbiAqICAgICB2YXIgbmV3QXNzZXJ0aW9uID0gbmV3IEFzc2VydGlvbigpO1xuICogICAgIHV0aWxzLnRyYW5zZmVyRmxhZ3MoYXNzZXJ0aW9uLCBuZXdBc3NlcnRpb24pO1xuICpcbiAqICAgICB2YXIgYW5vdGhlckFzc2VyaXRvbiA9IG5ldyBBc3NlcnRpb24obXlPYmopO1xuICogICAgIHV0aWxzLnRyYW5zZmVyRmxhZ3MoYXNzZXJ0aW9uLCBhbm90aGVyQXNzZXJ0aW9uLCBmYWxzZSk7XG4gKlxuICogQHBhcmFtIHtBc3NlcnRpb259IGFzc2VydGlvbiB0aGUgYXNzZXJ0aW9uIHRvIHRyYW5zZmVyIHRoZSBmbGFncyBmcm9tXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IHRoZSBvYmplY3QgdG8gdHJhbnNmZXIgdGhlIGZsYWdzIHRvOyB1c3VhbGx5IGEgbmV3IGFzc2VydGlvblxuICogQHBhcmFtIHtCb29sZWFufSBpbmNsdWRlQWxsXG4gKiBAbmFtZXNwYWNlIFV0aWxzXG4gKiBAbmFtZSB0cmFuc2ZlckZsYWdzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG9iamVjdCwgaW5jbHVkZUFsbCkge1xuICB2YXIgZmxhZ3MgPSBhc3NlcnRpb24uX19mbGFncyB8fCAoYXNzZXJ0aW9uLl9fZmxhZ3MgPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcblxuICBpZiAoIW9iamVjdC5fX2ZsYWdzKSB7XG4gICAgb2JqZWN0Ll9fZmxhZ3MgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG5cbiAgaW5jbHVkZUFsbCA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDMgPyBpbmNsdWRlQWxsIDogdHJ1ZTtcblxuICBmb3IgKHZhciBmbGFnIGluIGZsYWdzKSB7XG4gICAgaWYgKGluY2x1ZGVBbGwgfHxcbiAgICAgICAgKGZsYWcgIT09ICdvYmplY3QnICYmIGZsYWcgIT09ICdzc2ZpJyAmJiBmbGFnICE9ICdtZXNzYWdlJykpIHtcbiAgICAgIG9iamVjdC5fX2ZsYWdzW2ZsYWddID0gZmxhZ3NbZmxhZ107XG4gICAgfVxuICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy90cmFuc2ZlckZsYWdzLmpzXG4gKiogbW9kdWxlIGlkID0gODNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvZXFsJyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9kZWVwLWVxbC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDg0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIGRlZXAtZXFsXG4gKiBDb3B5cmlnaHQoYykgMjAxMyBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbi8qIVxuICogTW9kdWxlIGRlcGVuZGVuY2llc1xuICovXG5cbnZhciB0eXBlID0gcmVxdWlyZSgndHlwZS1kZXRlY3QnKTtcblxuLyohXG4gKiBCdWZmZXIuaXNCdWZmZXIgYnJvd3NlciBzaGltXG4gKi9cblxudmFyIEJ1ZmZlcjtcbnRyeSB7IEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsgfVxuY2F0Y2goZXgpIHtcbiAgQnVmZmVyID0ge307XG4gIEJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2U7IH1cbn1cblxuLyohXG4gKiBQcmltYXJ5IEV4cG9ydFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZGVlcEVxdWFsO1xuXG4vKipcbiAqIEFzc2VydCBzdXBlci1zdHJpY3QgKGVnYWwpIGVxdWFsaXR5IGJldHdlZW5cbiAqIHR3byBvYmplY3RzIG9mIGFueSB0eXBlLlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IGFcbiAqIEBwYXJhbSB7TWl4ZWR9IGJcbiAqIEBwYXJhbSB7QXJyYXl9IG1lbW9pc2VkIChvcHRpb25hbClcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGVxdWFsIG1hdGNoXG4gKi9cblxuZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIsIG0pIHtcbiAgaWYgKHNhbWVWYWx1ZShhLCBiKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKCdkYXRlJyA9PT0gdHlwZShhKSkge1xuICAgIHJldHVybiBkYXRlRXF1YWwoYSwgYik7XG4gIH0gZWxzZSBpZiAoJ3JlZ2V4cCcgPT09IHR5cGUoYSkpIHtcbiAgICByZXR1cm4gcmVnZXhwRXF1YWwoYSwgYik7XG4gIH0gZWxzZSBpZiAoQnVmZmVyLmlzQnVmZmVyKGEpKSB7XG4gICAgcmV0dXJuIGJ1ZmZlckVxdWFsKGEsIGIpO1xuICB9IGVsc2UgaWYgKCdhcmd1bWVudHMnID09PSB0eXBlKGEpKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50c0VxdWFsKGEsIGIsIG0pO1xuICB9IGVsc2UgaWYgKCF0eXBlRXF1YWwoYSwgYikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSBpZiAoKCdvYmplY3QnICE9PSB0eXBlKGEpICYmICdvYmplY3QnICE9PSB0eXBlKGIpKVxuICAmJiAoJ2FycmF5JyAhPT0gdHlwZShhKSAmJiAnYXJyYXknICE9PSB0eXBlKGIpKSkge1xuICAgIHJldHVybiBzYW1lVmFsdWUoYSwgYik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG9iamVjdEVxdWFsKGEsIGIsIG0pO1xuICB9XG59XG5cbi8qIVxuICogU3RyaWN0IChlZ2FsKSBlcXVhbGl0eSB0ZXN0LiBFbnN1cmVzIHRoYXQgTmFOIGFsd2F5c1xuICogZXF1YWxzIE5hTiBhbmQgYC0wYCBkb2VzIG5vdCBlcXVhbCBgKzBgLlxuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IGFcbiAqIEBwYXJhbSB7TWl4ZWR9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGVxdWFsIG1hdGNoXG4gKi9cblxuZnVuY3Rpb24gc2FtZVZhbHVlKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09PSAxIC8gYjtcbiAgcmV0dXJuIGEgIT09IGEgJiYgYiAhPT0gYjtcbn1cblxuLyohXG4gKiBDb21wYXJlIHRoZSB0eXBlcyBvZiB0d28gZ2l2ZW4gb2JqZWN0cyBhbmRcbiAqIHJldHVybiBpZiB0aGV5IGFyZSBlcXVhbC4gTm90ZSB0aGF0IGFuIEFycmF5XG4gKiBoYXMgYSB0eXBlIG9mIGBhcnJheWAgKG5vdCBgb2JqZWN0YCkgYW5kIGFyZ3VtZW50c1xuICogaGF2ZSBhIHR5cGUgb2YgYGFyZ3VtZW50c2AgKG5vdCBgYXJyYXlgL2BvYmplY3RgKS5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSBhXG4gKiBAcGFyYW0ge01peGVkfSBiXG4gKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcbiAqL1xuXG5mdW5jdGlvbiB0eXBlRXF1YWwoYSwgYikge1xuICByZXR1cm4gdHlwZShhKSA9PT0gdHlwZShiKTtcbn1cblxuLyohXG4gKiBDb21wYXJlIHR3byBEYXRlIG9iamVjdHMgYnkgYXNzZXJ0aW5nIHRoYXRcbiAqIHRoZSB0aW1lIHZhbHVlcyBhcmUgZXF1YWwgdXNpbmcgYHNhdmVWYWx1ZWAuXG4gKlxuICogQHBhcmFtIHtEYXRlfSBhXG4gKiBAcGFyYW0ge0RhdGV9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuICovXG5cbmZ1bmN0aW9uIGRhdGVFcXVhbChhLCBiKSB7XG4gIGlmICgnZGF0ZScgIT09IHR5cGUoYikpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHNhbWVWYWx1ZShhLmdldFRpbWUoKSwgYi5nZXRUaW1lKCkpO1xufVxuXG4vKiFcbiAqIENvbXBhcmUgdHdvIHJlZ3VsYXIgZXhwcmVzc2lvbnMgYnkgY29udmVydGluZyB0aGVtXG4gKiB0byBzdHJpbmcgYW5kIGNoZWNraW5nIGZvciBgc2FtZVZhbHVlYC5cbiAqXG4gKiBAcGFyYW0ge1JlZ0V4cH0gYVxuICogQHBhcmFtIHtSZWdFeHB9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuICovXG5cbmZ1bmN0aW9uIHJlZ2V4cEVxdWFsKGEsIGIpIHtcbiAgaWYgKCdyZWdleHAnICE9PSB0eXBlKGIpKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBzYW1lVmFsdWUoYS50b1N0cmluZygpLCBiLnRvU3RyaW5nKCkpO1xufVxuXG4vKiFcbiAqIEFzc2VydCBkZWVwIGVxdWFsaXR5IG9mIHR3byBgYXJndW1lbnRzYCBvYmplY3RzLlxuICogVW5mb3J0dW5hdGVseSwgdGhlc2UgbXVzdCBiZSBzbGljZWQgdG8gYXJyYXlzXG4gKiBwcmlvciB0byB0ZXN0IHRvIGVuc3VyZSBubyBiYWQgYmVoYXZpb3IuXG4gKlxuICogQHBhcmFtIHtBcmd1bWVudHN9IGFcbiAqIEBwYXJhbSB7QXJndW1lbnRzfSBiXG4gKiBAcGFyYW0ge0FycmF5fSBtZW1vaXplIChvcHRpb25hbClcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuICovXG5cbmZ1bmN0aW9uIGFyZ3VtZW50c0VxdWFsKGEsIGIsIG0pIHtcbiAgaWYgKCdhcmd1bWVudHMnICE9PSB0eXBlKGIpKSByZXR1cm4gZmFsc2U7XG4gIGEgPSBbXS5zbGljZS5jYWxsKGEpO1xuICBiID0gW10uc2xpY2UuY2FsbChiKTtcbiAgcmV0dXJuIGRlZXBFcXVhbChhLCBiLCBtKTtcbn1cblxuLyohXG4gKiBHZXQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGEgZ2l2ZW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gKiBAcmV0dXJuIHtBcnJheX0gcHJvcGVydHkgbmFtZXNcbiAqL1xuXG5mdW5jdGlvbiBlbnVtZXJhYmxlKGEpIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gYSkgcmVzLnB1c2goa2V5KTtcbiAgcmV0dXJuIHJlcztcbn1cblxuLyohXG4gKiBTaW1wbGUgZXF1YWxpdHkgZm9yIGZsYXQgaXRlcmFibGUgb2JqZWN0c1xuICogc3VjaCBhcyBBcnJheXMgb3IgTm9kZS5qcyBidWZmZXJzLlxuICpcbiAqIEBwYXJhbSB7SXRlcmFibGV9IGFcbiAqIEBwYXJhbSB7SXRlcmFibGV9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHJlc3VsdFxuICovXG5cbmZ1bmN0aW9uIGl0ZXJhYmxlRXF1YWwoYSwgYikge1xuICBpZiAoYS5sZW5ndGggIT09ICBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBpID0gMDtcbiAgdmFyIG1hdGNoID0gdHJ1ZTtcblxuICBmb3IgKDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgbWF0Y2ggPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtYXRjaDtcbn1cblxuLyohXG4gKiBFeHRlbnNpb24gdG8gYGl0ZXJhYmxlRXF1YWxgIHNwZWNpZmljYWxseVxuICogZm9yIE5vZGUuanMgQnVmZmVycy5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcn0gYVxuICogQHBhcmFtIHtNaXhlZH0gYlxuICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG4gKi9cblxuZnVuY3Rpb24gYnVmZmVyRXF1YWwoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gaXRlcmFibGVFcXVhbChhLCBiKTtcbn1cblxuLyohXG4gKiBCbG9jayBmb3IgYG9iamVjdEVxdWFsYCBlbnN1cmluZyBub24tZXhpc3RpbmdcbiAqIHZhbHVlcyBkb24ndCBnZXQgaW4uXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0XG4gKiBAcmV0dXJuIHtCb29sZWFufSByZXN1bHRcbiAqL1xuXG5mdW5jdGlvbiBpc1ZhbHVlKGEpIHtcbiAgcmV0dXJuIGEgIT09IG51bGwgJiYgYSAhPT0gdW5kZWZpbmVkO1xufVxuXG4vKiFcbiAqIFJlY3Vyc2l2ZWx5IGNoZWNrIHRoZSBlcXVhbGl0eSBvZiB0d28gb2JqZWN0cy5cbiAqIE9uY2UgYmFzaWMgc2FtZW5lc3MgaGFzIGJlZW4gZXN0YWJsaXNoZWQgaXQgd2lsbFxuICogZGVmZXIgdG8gYGRlZXBFcXVhbGAgZm9yIGVhY2ggZW51bWVyYWJsZSBrZXlcbiAqIGluIHRoZSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gYVxuICogQHBhcmFtIHtNaXhlZH0gYlxuICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG4gKi9cblxuZnVuY3Rpb24gb2JqZWN0RXF1YWwoYSwgYiwgbSkge1xuICBpZiAoIWlzVmFsdWUoYSkgfHwgIWlzVmFsdWUoYikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoYS5wcm90b3R5cGUgIT09IGIucHJvdG90eXBlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGk7XG4gIGlmIChtKSB7XG4gICAgZm9yIChpID0gMDsgaSA8IG0ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICgobVtpXVswXSA9PT0gYSAmJiBtW2ldWzFdID09PSBiKVxuICAgICAgfHwgIChtW2ldWzBdID09PSBiICYmIG1baV1bMV0gPT09IGEpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBtID0gW107XG4gIH1cblxuICB0cnkge1xuICAgIHZhciBrYSA9IGVudW1lcmFibGUoYSk7XG4gICAgdmFyIGtiID0gZW51bWVyYWJsZShiKTtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBrYS5zb3J0KCk7XG4gIGtiLnNvcnQoKTtcblxuICBpZiAoIWl0ZXJhYmxlRXF1YWwoa2EsIGtiKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIG0ucHVzaChbIGEsIGIgXSk7XG5cbiAgdmFyIGtleTtcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBrZXkgPSBrYVtpXTtcbiAgICBpZiAoIWRlZXBFcXVhbChhW2tleV0sIGJba2V5XSwgbSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2RlZXAtZXFsL2xpYi9lcWwuanNcbiAqKiBtb2R1bGUgaWQgPSA4NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi90eXBlJyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9kZWVwLWVxbC9+L3R5cGUtZGV0ZWN0L2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogdHlwZS1kZXRlY3RcbiAqIENvcHlyaWdodChjKSAyMDEzIGpha2UgbHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBQcmltYXJ5IEV4cG9ydHNcbiAqL1xuXG52YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZ2V0VHlwZTtcblxuLyohXG4gKiBEZXRlY3RhYmxlIGphdmFzY3JpcHQgbmF0aXZlc1xuICovXG5cbnZhciBuYXRpdmVzID0ge1xuICAgICdbb2JqZWN0IEFycmF5XSc6ICdhcnJheSdcbiAgLCAnW29iamVjdCBSZWdFeHBdJzogJ3JlZ2V4cCdcbiAgLCAnW29iamVjdCBGdW5jdGlvbl0nOiAnZnVuY3Rpb24nXG4gICwgJ1tvYmplY3QgQXJndW1lbnRzXSc6ICdhcmd1bWVudHMnXG4gICwgJ1tvYmplY3QgRGF0ZV0nOiAnZGF0ZSdcbn07XG5cbi8qKlxuICogIyMjIHR5cGVPZiAob2JqKVxuICpcbiAqIFVzZSBzZXZlcmFsIGRpZmZlcmVudCB0ZWNobmlxdWVzIHRvIGRldGVybWluZVxuICogdGhlIHR5cGUgb2Ygb2JqZWN0IGJlaW5nIHRlc3RlZC5cbiAqXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0XG4gKiBAcmV0dXJuIHtTdHJpbmd9IG9iamVjdCB0eXBlXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGdldFR5cGUgKG9iaikge1xuICB2YXIgc3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7XG4gIGlmIChuYXRpdmVzW3N0cl0pIHJldHVybiBuYXRpdmVzW3N0cl07XG4gIGlmIChvYmogPT09IG51bGwpIHJldHVybiAnbnVsbCc7XG4gIGlmIChvYmogPT09IHVuZGVmaW5lZCkgcmV0dXJuICd1bmRlZmluZWQnO1xuICBpZiAob2JqID09PSBPYmplY3Qob2JqKSkgcmV0dXJuICdvYmplY3QnO1xuICByZXR1cm4gdHlwZW9mIG9iajtcbn1cblxuZXhwb3J0cy5MaWJyYXJ5ID0gTGlicmFyeTtcblxuLyoqXG4gKiAjIyMgTGlicmFyeVxuICpcbiAqIENyZWF0ZSBhIHJlcG9zaXRvcnkgZm9yIGN1c3RvbSB0eXBlIGRldGVjdGlvbi5cbiAqXG4gKiBgYGBqc1xuICogdmFyIGxpYiA9IG5ldyB0eXBlLkxpYnJhcnk7XG4gKiBgYGBcbiAqXG4gKi9cblxuZnVuY3Rpb24gTGlicmFyeSAoKSB7XG4gIHRoaXMudGVzdHMgPSB7fTtcbn1cblxuLyoqXG4gKiAjIyMjIC5vZiAob2JqKVxuICpcbiAqIEV4cG9zZSByZXBsYWNlbWVudCBgdHlwZW9mYCBkZXRlY3Rpb24gdG8gdGhlIGxpYnJhcnkuXG4gKlxuICogYGBganNcbiAqIGlmICgnc3RyaW5nJyA9PT0gbGliLm9mKCdoZWxsbyB3b3JsZCcpKSB7XG4gKiAgIC8vIC4uLlxuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0IHRvIHRlc3RcbiAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuICovXG5cbkxpYnJhcnkucHJvdG90eXBlLm9mID0gZ2V0VHlwZTtcblxuLyoqXG4gKiAjIyMjIC5kZWZpbmUgKHR5cGUsIHRlc3QpXG4gKlxuICogQWRkIGEgdGVzdCB0byBmb3IgdGhlIGAudGVzdCgpYCBhc3NlcnRpb24uXG4gKlxuICogQ2FuIGJlIGRlZmluZWQgYXMgYSByZWd1bGFyIGV4cHJlc3Npb246XG4gKlxuICogYGBganNcbiAqIGxpYi5kZWZpbmUoJ2ludCcsIC9eWzAtOV0rJC8pO1xuICogYGBgXG4gKlxuICogLi4uIG9yIGFzIGEgZnVuY3Rpb246XG4gKlxuICogYGBganNcbiAqIGxpYi5kZWZpbmUoJ2JsbicsIGZ1bmN0aW9uIChvYmopIHtcbiAqICAgaWYgKCdib29sZWFuJyA9PT0gbGliLm9mKG9iaikpIHJldHVybiB0cnVlO1xuICogICB2YXIgYmxucyA9IFsgJ3llcycsICdubycsICd0cnVlJywgJ2ZhbHNlJywgMSwgMCBdO1xuICogICBpZiAoJ3N0cmluZycgPT09IGxpYi5vZihvYmopKSBvYmogPSBvYmoudG9Mb3dlckNhc2UoKTtcbiAqICAgcmV0dXJuICEhIH5ibG5zLmluZGV4T2Yob2JqKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7UmVnRXhwfEZ1bmN0aW9ufSB0ZXN0XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkxpYnJhcnkucHJvdG90eXBlLmRlZmluZSA9IGZ1bmN0aW9uICh0eXBlLCB0ZXN0KSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy50ZXN0c1t0eXBlXTtcbiAgdGhpcy50ZXN0c1t0eXBlXSA9IHRlc3Q7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiAjIyMjIC50ZXN0IChvYmosIHRlc3QpXG4gKlxuICogQXNzZXJ0IHRoYXQgYW4gb2JqZWN0IGlzIG9mIHR5cGUuIFdpbGwgZmlyc3RcbiAqIGNoZWNrIG5hdGl2ZXMsIGFuZCBpZiB0aGF0IGRvZXMgbm90IHBhc3MgaXQgd2lsbFxuICogdXNlIHRoZSB1c2VyIGRlZmluZWQgY3VzdG9tIHRlc3RzLlxuICpcbiAqIGBgYGpzXG4gKiBhc3NlcnQobGliLnRlc3QoJzEnLCAnaW50JykpO1xuICogYXNzZXJ0KGxpYi50ZXN0KCd5ZXMnLCAnYmxuJykpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHJldHVybiB7Qm9vbGVhbn0gcmVzdWx0XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkxpYnJhcnkucHJvdG90eXBlLnRlc3QgPSBmdW5jdGlvbiAob2JqLCB0eXBlKSB7XG4gIGlmICh0eXBlID09PSBnZXRUeXBlKG9iaikpIHJldHVybiB0cnVlO1xuICB2YXIgdGVzdCA9IHRoaXMudGVzdHNbdHlwZV07XG5cbiAgaWYgKHRlc3QgJiYgJ3JlZ2V4cCcgPT09IGdldFR5cGUodGVzdCkpIHtcbiAgICByZXR1cm4gdGVzdC50ZXN0KG9iaik7XG4gIH0gZWxzZSBpZiAodGVzdCAmJiAnZnVuY3Rpb24nID09PSBnZXRUeXBlKHRlc3QpKSB7XG4gICAgcmV0dXJuIHRlc3Qob2JqKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoJ1R5cGUgdGVzdCBcIicgKyB0eXBlICsgJ1wiIG5vdCBkZWZpbmVkIG9yIGludmFsaWQuJyk7XG4gIH1cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9kZWVwLWVxbC9+L3R5cGUtZGV0ZWN0L2xpYi90eXBlLmpzXG4gKiogbW9kdWxlIGlkID0gODdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogQ2hhaSAtIGdldFBhdGhWYWx1ZSB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbG9naWNhbHBhcmFkb3gvZmlsdHJcbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnZhciBnZXRQYXRoSW5mbyA9IHJlcXVpcmUoJy4vZ2V0UGF0aEluZm8nKTtcblxuLyoqXG4gKiAjIyMgLmdldFBhdGhWYWx1ZShwYXRoLCBvYmplY3QpXG4gKlxuICogVGhpcyBhbGxvd3MgdGhlIHJldHJpZXZhbCBvZiB2YWx1ZXMgaW4gYW5cbiAqIG9iamVjdCBnaXZlbiBhIHN0cmluZyBwYXRoLlxuICpcbiAqICAgICB2YXIgb2JqID0ge1xuICogICAgICAgICBwcm9wMToge1xuICogICAgICAgICAgICAgYXJyOiBbJ2EnLCAnYicsICdjJ11cbiAqICAgICAgICAgICAsIHN0cjogJ0hlbGxvJ1xuICogICAgICAgICB9XG4gKiAgICAgICAsIHByb3AyOiB7XG4gKiAgICAgICAgICAgICBhcnI6IFsgeyBuZXN0ZWQ6ICdVbml2ZXJzZScgfSBdXG4gKiAgICAgICAgICAgLCBzdHI6ICdIZWxsbyBhZ2FpbiEnXG4gKiAgICAgICAgIH1cbiAqICAgICB9XG4gKlxuICogVGhlIGZvbGxvd2luZyB3b3VsZCBiZSB0aGUgcmVzdWx0cy5cbiAqXG4gKiAgICAgZ2V0UGF0aFZhbHVlKCdwcm9wMS5zdHInLCBvYmopOyAvLyBIZWxsb1xuICogICAgIGdldFBhdGhWYWx1ZSgncHJvcDEuYXR0WzJdJywgb2JqKTsgLy8gYlxuICogICAgIGdldFBhdGhWYWx1ZSgncHJvcDIuYXJyWzBdLm5lc3RlZCcsIG9iaik7IC8vIFVuaXZlcnNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm5zIHtPYmplY3R9IHZhbHVlIG9yIGB1bmRlZmluZWRgXG4gKiBAbmFtZXNwYWNlIFV0aWxzXG4gKiBAbmFtZSBnZXRQYXRoVmFsdWVcbiAqIEBhcGkgcHVibGljXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocGF0aCwgb2JqKSB7XG4gIHZhciBpbmZvID0gZ2V0UGF0aEluZm8ocGF0aCwgb2JqKTtcbiAgcmV0dXJuIGluZm8udmFsdWU7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXRQYXRoVmFsdWUuanNcbiAqKiBtb2R1bGUgaWQgPSA4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBDaGFpIC0gZ2V0UGF0aEluZm8gdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnZhciBoYXNQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vaGFzUHJvcGVydHknKTtcblxuLyoqXG4gKiAjIyMgLmdldFBhdGhJbmZvKHBhdGgsIG9iamVjdClcbiAqXG4gKiBUaGlzIGFsbG93cyB0aGUgcmV0cmlldmFsIG9mIHByb3BlcnR5IGluZm8gaW4gYW5cbiAqIG9iamVjdCBnaXZlbiBhIHN0cmluZyBwYXRoLlxuICpcbiAqIFRoZSBwYXRoIGluZm8gY29uc2lzdHMgb2YgYW4gb2JqZWN0IHdpdGggdGhlXG4gKiBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAqIHBhcmVudCAtIFRoZSBwYXJlbnQgb2JqZWN0IG9mIHRoZSBwcm9wZXJ0eSByZWZlcmVuY2VkIGJ5IGBwYXRoYFxuICogKiBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZpbmFsIHByb3BlcnR5LCBhIG51bWJlciBpZiBpdCB3YXMgYW4gYXJyYXkgaW5kZXhlclxuICogKiB2YWx1ZSAtIFRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHksIGlmIGl0IGV4aXN0cywgb3RoZXJ3aXNlIGB1bmRlZmluZWRgXG4gKiAqIGV4aXN0cyAtIFdoZXRoZXIgdGhlIHByb3BlcnR5IGV4aXN0cyBvciBub3RcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICogQHJldHVybnMge09iamVjdH0gaW5mb1xuICogQG5hbWVzcGFjZSBVdGlsc1xuICogQG5hbWUgZ2V0UGF0aEluZm9cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRQYXRoSW5mbyhwYXRoLCBvYmopIHtcbiAgdmFyIHBhcnNlZCA9IHBhcnNlUGF0aChwYXRoKSxcbiAgICAgIGxhc3QgPSBwYXJzZWRbcGFyc2VkLmxlbmd0aCAtIDFdO1xuXG4gIHZhciBpbmZvID0ge1xuICAgIHBhcmVudDogcGFyc2VkLmxlbmd0aCA+IDEgPyBfZ2V0UGF0aFZhbHVlKHBhcnNlZCwgb2JqLCBwYXJzZWQubGVuZ3RoIC0gMSkgOiBvYmosXG4gICAgbmFtZTogbGFzdC5wIHx8IGxhc3QuaSxcbiAgICB2YWx1ZTogX2dldFBhdGhWYWx1ZShwYXJzZWQsIG9iailcbiAgfTtcbiAgaW5mby5leGlzdHMgPSBoYXNQcm9wZXJ0eShpbmZvLm5hbWUsIGluZm8ucGFyZW50KTtcblxuICByZXR1cm4gaW5mbztcbn07XG5cblxuLyohXG4gKiAjIyBwYXJzZVBhdGgocGF0aClcbiAqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdXNlZCB0byBwYXJzZSBzdHJpbmcgb2JqZWN0XG4gKiBwYXRocy4gVXNlIGluIGNvbmp1bmN0aW9uIHdpdGggYF9nZXRQYXRoVmFsdWVgLlxuICpcbiAqICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlUGF0aCgnbXlvYmplY3QucHJvcGVydHkuc3VicHJvcCcpO1xuICpcbiAqICMjIyBQYXRoczpcbiAqXG4gKiAqIENhbiBiZSBhcyBuZWFyIGluZmluaXRlbHkgZGVlcCBhbmQgbmVzdGVkXG4gKiAqIEFycmF5cyBhcmUgYWxzbyB2YWxpZCB1c2luZyB0aGUgZm9ybWFsIGBteW9iamVjdC5kb2N1bWVudFszXS5wcm9wZXJ0eWAuXG4gKiAqIExpdGVyYWwgZG90cyBhbmQgYnJhY2tldHMgKG5vdCBkZWxpbWl0ZXIpIG11c3QgYmUgYmFja3NsYXNoLWVzY2FwZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm5zIHtPYmplY3R9IHBhcnNlZFxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKSB7XG4gIHZhciBzdHIgPSBwYXRoLnJlcGxhY2UoLyhbXlxcXFxdKVxcWy9nLCAnJDEuWycpXG4gICAgLCBwYXJ0cyA9IHN0ci5tYXRjaCgvKFxcXFxcXC58W14uXSs/KSsvZyk7XG4gIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIHJlID0gL15cXFsoXFxkKylcXF0kL1xuICAgICAgLCBtQXJyID0gcmUuZXhlYyh2YWx1ZSk7XG4gICAgaWYgKG1BcnIpIHJldHVybiB7IGk6IHBhcnNlRmxvYXQobUFyclsxXSkgfTtcbiAgICBlbHNlIHJldHVybiB7IHA6IHZhbHVlLnJlcGxhY2UoL1xcXFwoWy5cXFtcXF1dKS9nLCAnJDEnKSB9O1xuICB9KTtcbn1cblxuXG4vKiFcbiAqICMjIF9nZXRQYXRoVmFsdWUocGFyc2VkLCBvYmopXG4gKlxuICogSGVscGVyIGNvbXBhbmlvbiBmdW5jdGlvbiBmb3IgYC5wYXJzZVBhdGhgIHRoYXQgcmV0dXJuc1xuICogdGhlIHZhbHVlIGxvY2F0ZWQgYXQgdGhlIHBhcnNlZCBhZGRyZXNzLlxuICpcbiAqICAgICAgdmFyIHZhbHVlID0gZ2V0UGF0aFZhbHVlKHBhcnNlZCwgb2JqKTtcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyc2VkIGRlZmluaXRpb24gZnJvbSBgcGFyc2VQYXRoYC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgdG8gc2VhcmNoIGFnYWluc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBvYmplY3QgdG8gc2VhcmNoIGFnYWluc3RcbiAqIEByZXR1cm5zIHtPYmplY3R8VW5kZWZpbmVkfSB2YWx1ZVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gX2dldFBhdGhWYWx1ZSAocGFyc2VkLCBvYmosIGluZGV4KSB7XG4gIHZhciB0bXAgPSBvYmpcbiAgICAsIHJlcztcblxuICBpbmRleCA9IChpbmRleCA9PT0gdW5kZWZpbmVkID8gcGFyc2VkLmxlbmd0aCA6IGluZGV4KTtcblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGluZGV4OyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIHBhcnQgPSBwYXJzZWRbaV07XG4gICAgaWYgKHRtcCkge1xuICAgICAgaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2YgcGFydC5wKVxuICAgICAgICB0bXAgPSB0bXBbcGFydC5wXTtcbiAgICAgIGVsc2UgaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2YgcGFydC5pKVxuICAgICAgICB0bXAgPSB0bXBbcGFydC5pXTtcbiAgICAgIGlmIChpID09IChsIC0gMSkpIHJlcyA9IHRtcDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy9nZXRQYXRoSW5mby5qc1xuICoqIG1vZHVsZSBpZCA9IDg5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBoYXNQcm9wZXJ0eSB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxudmFyIHR5cGUgPSByZXF1aXJlKCd0eXBlLWRldGVjdCcpO1xuXG4vKipcbiAqICMjIyAuaGFzUHJvcGVydHkob2JqZWN0LCBuYW1lKVxuICpcbiAqIFRoaXMgYWxsb3dzIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhc1xuICogbmFtZWQgcHJvcGVydHkgb3IgbnVtZXJpYyBhcnJheSBpbmRleC5cbiAqXG4gKiBCYXNpY2FsbHkgZG9lcyB0aGUgc2FtZSB0aGluZyBhcyB0aGUgYGluYFxuICogb3BlcmF0b3IgYnV0IHdvcmtzIHByb3Blcmx5IHdpdGggbmF0aXZlc1xuICogYW5kIG51bGwvdW5kZWZpbmVkIHZhbHVlcy5cbiAqXG4gKiAgICAgdmFyIG9iaiA9IHtcbiAqICAgICAgICAgYXJyOiBbJ2EnLCAnYicsICdjJ11cbiAqICAgICAgICwgc3RyOiAnSGVsbG8nXG4gKiAgICAgfVxuICpcbiAqIFRoZSBmb2xsb3dpbmcgd291bGQgYmUgdGhlIHJlc3VsdHMuXG4gKlxuICogICAgIGhhc1Byb3BlcnR5KCdzdHInLCBvYmopOyAgLy8gdHJ1ZVxuICogICAgIGhhc1Byb3BlcnR5KCdjb25zdHJ1Y3RvcicsIG9iaik7ICAvLyB0cnVlXG4gKiAgICAgaGFzUHJvcGVydHkoJ2JhcicsIG9iaik7ICAvLyBmYWxzZVxuICpcbiAqICAgICBoYXNQcm9wZXJ0eSgnbGVuZ3RoJywgb2JqLnN0cik7IC8vIHRydWVcbiAqICAgICBoYXNQcm9wZXJ0eSgxLCBvYmouc3RyKTsgIC8vIHRydWVcbiAqICAgICBoYXNQcm9wZXJ0eSg1LCBvYmouc3RyKTsgIC8vIGZhbHNlXG4gKlxuICogICAgIGhhc1Byb3BlcnR5KCdsZW5ndGgnLCBvYmouYXJyKTsgIC8vIHRydWVcbiAqICAgICBoYXNQcm9wZXJ0eSgyLCBvYmouYXJyKTsgIC8vIHRydWVcbiAqICAgICBoYXNQcm9wZXJ0eSgzLCBvYmouYXJyKTsgIC8vIGZhbHNlXG4gKlxuICogQHBhcmFtIHtPYmp1ZWN0fSBvYmplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gbmFtZVxuICogQHJldHVybnMge0Jvb2xlYW59IHdoZXRoZXIgaXQgZXhpc3RzXG4gKiBAbmFtZXNwYWNlIFV0aWxzXG4gKiBAbmFtZSBnZXRQYXRoSW5mb1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG52YXIgbGl0ZXJhbHMgPSB7XG4gICAgJ251bWJlcic6IE51bWJlclxuICAsICdzdHJpbmcnOiBTdHJpbmdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaGFzUHJvcGVydHkobmFtZSwgb2JqKSB7XG4gIHZhciBvdCA9IHR5cGUob2JqKTtcblxuICAvLyBCYWQgT2JqZWN0LCBvYnZpb3VzbHkgbm8gcHJvcHMgYXQgYWxsXG4gIGlmKG90ID09PSAnbnVsbCcgfHwgb3QgPT09ICd1bmRlZmluZWQnKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBUaGUgYGluYCBvcGVyYXRvciBkb2VzIG5vdCB3b3JrIHdpdGggY2VydGFpbiBsaXRlcmFsc1xuICAvLyBib3ggdGhlc2UgYmVmb3JlIHRoZSBjaGVja1xuICBpZihsaXRlcmFsc1tvdF0gJiYgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpXG4gICAgb2JqID0gbmV3IGxpdGVyYWxzW290XShvYmopO1xuXG4gIHJldHVybiBuYW1lIGluIG9iajtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2hhc1Byb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gOTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogQ2hhaSAtIGFkZFByb3BlcnR5IHV0aWxpdHlcbiAqIENvcHlyaWdodChjKSAyMDEyLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XG52YXIgZmxhZyA9IHJlcXVpcmUoJy4vZmxhZycpO1xuXG4vKipcbiAqICMjIyBhZGRQcm9wZXJ0eSAoY3R4LCBuYW1lLCBnZXR0ZXIpXG4gKlxuICogQWRkcyBhIHByb3BlcnR5IHRvIHRoZSBwcm90b3R5cGUgb2YgYW4gb2JqZWN0LlxuICpcbiAqICAgICB1dGlscy5hZGRQcm9wZXJ0eShjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdmb28nLCBmdW5jdGlvbiAoKSB7XG4gKiAgICAgICB2YXIgb2JqID0gdXRpbHMuZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gKiAgICAgICBuZXcgY2hhaS5Bc3NlcnRpb24ob2JqKS50by5iZS5pbnN0YW5jZW9mKEZvbyk7XG4gKiAgICAgfSk7XG4gKlxuICogQ2FuIGFsc28gYmUgYWNjZXNzZWQgZGlyZWN0bHkgZnJvbSBgY2hhaS5Bc3NlcnRpb25gLlxuICpcbiAqICAgICBjaGFpLkFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZm9vJywgZm4pO1xuICpcbiAqIFRoZW4gY2FuIGJlIHVzZWQgYXMgYW55IG90aGVyIGFzc2VydGlvbi5cbiAqXG4gKiAgICAgZXhwZWN0KG15Rm9vKS50by5iZS5mb287XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3QgdG8gd2hpY2ggdGhlIHByb3BlcnR5IGlzIGFkZGVkXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBwcm9wZXJ0eSB0byBhZGRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGdldHRlciBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBuYW1lXG4gKiBAbmFtZXNwYWNlIFV0aWxzXG4gKiBAbmFtZSBhZGRQcm9wZXJ0eVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIGdldHRlcikge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBuYW1lLFxuICAgIHsgZ2V0OiBmdW5jdGlvbiBhZGRQcm9wZXJ0eSgpIHtcbiAgICAgICAgdmFyIG9sZF9zc2ZpID0gZmxhZyh0aGlzLCAnc3NmaScpO1xuICAgICAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG4gICAgICAgICAgZmxhZyh0aGlzLCAnc3NmaScsIGFkZFByb3BlcnR5KTtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0dGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByZXN1bHQ7XG4gICAgICB9XG4gICAgLCBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS91dGlscy9hZGRQcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDkxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBhZGRNZXRob2QgdXRpbGl0eVxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcnKTtcblxuLyoqXG4gKiAjIyMgLmFkZE1ldGhvZCAoY3R4LCBuYW1lLCBtZXRob2QpXG4gKlxuICogQWRkcyBhIG1ldGhvZCB0byB0aGUgcHJvdG90eXBlIG9mIGFuIG9iamVjdC5cbiAqXG4gKiAgICAgdXRpbHMuYWRkTWV0aG9kKGNoYWkuQXNzZXJ0aW9uLnByb3RvdHlwZSwgJ2ZvbycsIGZ1bmN0aW9uIChzdHIpIHtcbiAqICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcbiAqICAgICAgIG5ldyBjaGFpLkFzc2VydGlvbihvYmopLnRvLmJlLmVxdWFsKHN0cik7XG4gKiAgICAgfSk7XG4gKlxuICogQ2FuIGFsc28gYmUgYWNjZXNzZWQgZGlyZWN0bHkgZnJvbSBgY2hhaS5Bc3NlcnRpb25gLlxuICpcbiAqICAgICBjaGFpLkFzc2VydGlvbi5hZGRNZXRob2QoJ2ZvbycsIGZuKTtcbiAqXG4gKiBUaGVuIGNhbiBiZSB1c2VkIGFzIGFueSBvdGhlciBhc3NlcnRpb24uXG4gKlxuICogICAgIGV4cGVjdChmb29TdHIpLnRvLmJlLmZvbygnYmFyJyk7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3QgdG8gd2hpY2ggdGhlIG1ldGhvZCBpcyBhZGRlZFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgb2YgbWV0aG9kIHRvIGFkZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIGZ1bmN0aW9uIHRvIGJlIHVzZWQgZm9yIG5hbWVcbiAqIEBuYW1lc3BhY2UgVXRpbHNcbiAqIEBuYW1lIGFkZE1ldGhvZFxuICogQGFwaSBwdWJsaWNcbiAqL1xudmFyIGZsYWcgPSByZXF1aXJlKCcuL2ZsYWcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3R4LCBuYW1lLCBtZXRob2QpIHtcbiAgY3R4W25hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvbGRfc3NmaSA9IGZsYWcodGhpcywgJ3NzZmknKTtcbiAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG4gICAgICBmbGFnKHRoaXMsICdzc2ZpJywgY3R4W25hbWVdKTtcbiAgICB2YXIgcmVzdWx0ID0gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcbiAgfTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL2FkZE1ldGhvZC5qc1xuICoqIG1vZHVsZSBpZCA9IDkyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBvdmVyd3JpdGVQcm9wZXJ0eSB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyoqXG4gKiAjIyMgb3ZlcndyaXRlUHJvcGVydHkgKGN0eCwgbmFtZSwgZm4pXG4gKlxuICogT3ZlcndpdGVzIGFuIGFscmVhZHkgZXhpc3RpbmcgcHJvcGVydHkgZ2V0dGVyIGFuZCBwcm92aWRlc1xuICogYWNjZXNzIHRvIHByZXZpb3VzIHZhbHVlLiBNdXN0IHJldHVybiBmdW5jdGlvbiB0byB1c2UgYXMgZ2V0dGVyLlxuICpcbiAqICAgICB1dGlscy5vdmVyd3JpdGVQcm9wZXJ0eShjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdvaycsIGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAqICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gKiAgICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcbiAqICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEZvbykge1xuICogICAgICAgICAgIG5ldyBjaGFpLkFzc2VydGlvbihvYmoubmFtZSkudG8uZXF1YWwoJ2JhcicpO1xuICogICAgICAgICB9IGVsc2Uge1xuICogICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICogICAgICAgICB9XG4gKiAgICAgICB9XG4gKiAgICAgfSk7XG4gKlxuICpcbiAqIENhbiBhbHNvIGJlIGFjY2Vzc2VkIGRpcmVjdGx5IGZyb20gYGNoYWkuQXNzZXJ0aW9uYC5cbiAqXG4gKiAgICAgY2hhaS5Bc3NlcnRpb24ub3ZlcndyaXRlUHJvcGVydHkoJ2ZvbycsIGZuKTtcbiAqXG4gKiBUaGVuIGNhbiBiZSB1c2VkIGFzIGFueSBvdGhlciBhc3NlcnRpb24uXG4gKlxuICogICAgIGV4cGVjdChteUZvbykudG8uYmUub2s7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3Qgd2hvc2UgcHJvcGVydHkgaXMgdG8gYmUgb3ZlcndyaXR0ZW5cbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG9mIHByb3BlcnR5IHRvIG92ZXJ3cml0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZ2V0dGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGdldHRlciBmdW5jdGlvbiB0byBiZSB1c2VkIGZvciBuYW1lXG4gKiBAbmFtZXNwYWNlIFV0aWxzXG4gKiBAbmFtZSBvdmVyd3JpdGVQcm9wZXJ0eVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIGdldHRlcikge1xuICB2YXIgX2dldCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY3R4LCBuYW1lKVxuICAgICwgX3N1cGVyID0gZnVuY3Rpb24gKCkge307XG5cbiAgaWYgKF9nZXQgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIF9nZXQuZ2V0KVxuICAgIF9zdXBlciA9IF9nZXQuZ2V0XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwgbmFtZSxcbiAgICB7IGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0dGVyKF9zdXBlcikuY2FsbCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcbiAgICAgIH1cbiAgICAsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL292ZXJ3cml0ZVByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gOTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogQ2hhaSAtIG92ZXJ3cml0ZU1ldGhvZCB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyoqXG4gKiAjIyMgb3ZlcndyaXRlTWV0aG9kIChjdHgsIG5hbWUsIGZuKVxuICpcbiAqIE92ZXJ3aXRlcyBhbiBhbHJlYWR5IGV4aXN0aW5nIG1ldGhvZCBhbmQgcHJvdmlkZXNcbiAqIGFjY2VzcyB0byBwcmV2aW91cyBmdW5jdGlvbi4gTXVzdCByZXR1cm4gZnVuY3Rpb25cbiAqIHRvIGJlIHVzZWQgZm9yIG5hbWUuXG4gKlxuICogICAgIHV0aWxzLm92ZXJ3cml0ZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdlcXVhbCcsIGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAqICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RyKSB7XG4gKiAgICAgICAgIHZhciBvYmogPSB1dGlscy5mbGFnKHRoaXMsICdvYmplY3QnKTtcbiAqICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEZvbykge1xuICogICAgICAgICAgIG5ldyBjaGFpLkFzc2VydGlvbihvYmoudmFsdWUpLnRvLmVxdWFsKHN0cik7XG4gKiAgICAgICAgIH0gZWxzZSB7XG4gKiAgICAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9KTtcbiAqXG4gKiBDYW4gYWxzbyBiZSBhY2Nlc3NlZCBkaXJlY3RseSBmcm9tIGBjaGFpLkFzc2VydGlvbmAuXG4gKlxuICogICAgIGNoYWkuQXNzZXJ0aW9uLm92ZXJ3cml0ZU1ldGhvZCgnZm9vJywgZm4pO1xuICpcbiAqIFRoZW4gY2FuIGJlIHVzZWQgYXMgYW55IG90aGVyIGFzc2VydGlvbi5cbiAqXG4gKiAgICAgZXhwZWN0KG15Rm9vKS50by5lcXVhbCgnYmFyJyk7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3Qgd2hvc2UgbWV0aG9kIGlzIHRvIGJlIG92ZXJ3cml0dGVuXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBtZXRob2QgdG8gb3ZlcndyaXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2QgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgbmFtZVxuICogQG5hbWVzcGFjZSBVdGlsc1xuICogQG5hbWUgb3ZlcndyaXRlTWV0aG9kXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGN0eCwgbmFtZSwgbWV0aG9kKSB7XG4gIHZhciBfbWV0aG9kID0gY3R4W25hbWVdXG4gICAgLCBfc3VwZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuXG4gIGlmIChfbWV0aG9kICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBfbWV0aG9kKVxuICAgIF9zdXBlciA9IF9tZXRob2Q7XG5cbiAgY3R4W25hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQgPSBtZXRob2QoX3N1cGVyKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IHRoaXMgOiByZXN1bHQ7XG4gIH1cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL3V0aWxzL292ZXJ3cml0ZU1ldGhvZC5qc1xuICoqIG1vZHVsZSBpZCA9IDk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIENoYWkgLSBhZGRDaGFpbmluZ01ldGhvZCB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyohXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzXG4gKi9cblxudmFyIHRyYW5zZmVyRmxhZ3MgPSByZXF1aXJlKCcuL3RyYW5zZmVyRmxhZ3MnKTtcbnZhciBmbGFnID0gcmVxdWlyZSgnLi9mbGFnJyk7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XG5cbi8qIVxuICogTW9kdWxlIHZhcmlhYmxlc1xuICovXG5cbi8vIENoZWNrIHdoZXRoZXIgYF9fcHJvdG9fX2AgaXMgc3VwcG9ydGVkXG52YXIgaGFzUHJvdG9TdXBwb3J0ID0gJ19fcHJvdG9fXycgaW4gT2JqZWN0O1xuXG4vLyBXaXRob3V0IGBfX3Byb3RvX19gIHN1cHBvcnQsIHRoaXMgbW9kdWxlIHdpbGwgbmVlZCB0byBhZGQgcHJvcGVydGllcyB0byBhIGZ1bmN0aW9uLlxuLy8gSG93ZXZlciwgc29tZSBGdW5jdGlvbi5wcm90b3R5cGUgbWV0aG9kcyBjYW5ub3QgYmUgb3ZlcndyaXR0ZW4sXG4vLyBhbmQgdGhlcmUgc2VlbXMgbm8gZWFzeSBjcm9zcy1wbGF0Zm9ybSB3YXkgdG8gZGV0ZWN0IHRoZW0gKEBzZWUgY2hhaWpzL2NoYWkvaXNzdWVzLzY5KS5cbnZhciBleGNsdWRlTmFtZXMgPSAvXig/Omxlbmd0aHxuYW1lfGFyZ3VtZW50c3xjYWxsZXIpJC87XG5cbi8vIENhY2hlIGBGdW5jdGlvbmAgcHJvcGVydGllc1xudmFyIGNhbGwgID0gRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsXG4gICAgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8qKlxuICogIyMjIGFkZENoYWluYWJsZU1ldGhvZCAoY3R4LCBuYW1lLCBtZXRob2QsIGNoYWluaW5nQmVoYXZpb3IpXG4gKlxuICogQWRkcyBhIG1ldGhvZCB0byBhbiBvYmplY3QsIHN1Y2ggdGhhdCB0aGUgbWV0aG9kIGNhbiBhbHNvIGJlIGNoYWluZWQuXG4gKlxuICogICAgIHV0aWxzLmFkZENoYWluYWJsZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdmb28nLCBmdW5jdGlvbiAoc3RyKSB7XG4gKiAgICAgICB2YXIgb2JqID0gdXRpbHMuZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gKiAgICAgICBuZXcgY2hhaS5Bc3NlcnRpb24ob2JqKS50by5iZS5lcXVhbChzdHIpO1xuICogICAgIH0pO1xuICpcbiAqIENhbiBhbHNvIGJlIGFjY2Vzc2VkIGRpcmVjdGx5IGZyb20gYGNoYWkuQXNzZXJ0aW9uYC5cbiAqXG4gKiAgICAgY2hhaS5Bc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdmb28nLCBmbiwgY2hhaW5pbmdCZWhhdmlvcik7XG4gKlxuICogVGhlIHJlc3VsdCBjYW4gdGhlbiBiZSB1c2VkIGFzIGJvdGggYSBtZXRob2QgYXNzZXJ0aW9uLCBleGVjdXRpbmcgYm90aCBgbWV0aG9kYCBhbmRcbiAqIGBjaGFpbmluZ0JlaGF2aW9yYCwgb3IgYXMgYSBsYW5ndWFnZSBjaGFpbiwgd2hpY2ggb25seSBleGVjdXRlcyBgY2hhaW5pbmdCZWhhdmlvcmAuXG4gKlxuICogICAgIGV4cGVjdChmb29TdHIpLnRvLmJlLmZvbygnYmFyJyk7XG4gKiAgICAgZXhwZWN0KGZvb1N0cikudG8uYmUuZm9vLmVxdWFsKCdmb28nKTtcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4IG9iamVjdCB0byB3aGljaCB0aGUgbWV0aG9kIGlzIGFkZGVkXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBvZiBtZXRob2QgdG8gYWRkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2QgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgYG5hbWVgLCB3aGVuIGNhbGxlZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2hhaW5pbmdCZWhhdmlvciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgZXZlcnkgdGltZSB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWRcbiAqIEBuYW1lc3BhY2UgVXRpbHNcbiAqIEBuYW1lIGFkZENoYWluYWJsZU1ldGhvZFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIG1ldGhvZCwgY2hhaW5pbmdCZWhhdmlvcikge1xuICBpZiAodHlwZW9mIGNoYWluaW5nQmVoYXZpb3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICBjaGFpbmluZ0JlaGF2aW9yID0gZnVuY3Rpb24gKCkgeyB9O1xuICB9XG5cbiAgdmFyIGNoYWluYWJsZUJlaGF2aW9yID0ge1xuICAgICAgbWV0aG9kOiBtZXRob2RcbiAgICAsIGNoYWluaW5nQmVoYXZpb3I6IGNoYWluaW5nQmVoYXZpb3JcbiAgfTtcblxuICAvLyBzYXZlIHRoZSBtZXRob2RzIHNvIHdlIGNhbiBvdmVyd3JpdGUgdGhlbSBsYXRlciwgaWYgd2UgbmVlZCB0by5cbiAgaWYgKCFjdHguX19tZXRob2RzKSB7XG4gICAgY3R4Ll9fbWV0aG9kcyA9IHt9O1xuICB9XG4gIGN0eC5fX21ldGhvZHNbbmFtZV0gPSBjaGFpbmFibGVCZWhhdmlvcjtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBuYW1lLFxuICAgIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYWluYWJsZUJlaGF2aW9yLmNoYWluaW5nQmVoYXZpb3IuY2FsbCh0aGlzKTtcblxuICAgICAgICB2YXIgYXNzZXJ0ID0gZnVuY3Rpb24gYXNzZXJ0KCkge1xuICAgICAgICAgIHZhciBvbGRfc3NmaSA9IGZsYWcodGhpcywgJ3NzZmknKTtcbiAgICAgICAgICBpZiAob2xkX3NzZmkgJiYgY29uZmlnLmluY2x1ZGVTdGFjayA9PT0gZmFsc2UpXG4gICAgICAgICAgICBmbGFnKHRoaXMsICdzc2ZpJywgYXNzZXJ0KTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gY2hhaW5hYmxlQmVoYXZpb3IubWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBVc2UgYF9fcHJvdG9fX2AgaWYgYXZhaWxhYmxlXG4gICAgICAgIGlmIChoYXNQcm90b1N1cHBvcnQpIHtcbiAgICAgICAgICAvLyBJbmhlcml0IGFsbCBwcm9wZXJ0aWVzIGZyb20gdGhlIG9iamVjdCBieSByZXBsYWNpbmcgdGhlIGBGdW5jdGlvbmAgcHJvdG90eXBlXG4gICAgICAgICAgdmFyIHByb3RvdHlwZSA9IGFzc2VydC5fX3Byb3RvX18gPSBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIGBjYWxsYCBhbmQgYGFwcGx5YCBtZXRob2RzIGZyb20gYEZ1bmN0aW9uYFxuICAgICAgICAgIHByb3RvdHlwZS5jYWxsID0gY2FsbDtcbiAgICAgICAgICBwcm90b3R5cGUuYXBwbHkgPSBhcHBseTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIHJlZGVmaW5lIGFsbCBwcm9wZXJ0aWVzIChzbG93ISlcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIGFzc2VydGVyTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjdHgpO1xuICAgICAgICAgIGFzc2VydGVyTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoYXNzZXJ0ZXJOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWV4Y2x1ZGVOYW1lcy50ZXN0KGFzc2VydGVyTmFtZSkpIHtcbiAgICAgICAgICAgICAgdmFyIHBkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjdHgsIGFzc2VydGVyTmFtZSk7XG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhc3NlcnQsIGFzc2VydGVyTmFtZSwgcGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJhbnNmZXJGbGFncyh0aGlzLCBhc3NlcnQpO1xuICAgICAgICByZXR1cm4gYXNzZXJ0O1xuICAgICAgfVxuICAgICwgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvYWRkQ2hhaW5hYmxlTWV0aG9kLmpzXG4gKiogbW9kdWxlIGlkID0gOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogQ2hhaSAtIG92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZCB1dGlsaXR5XG4gKiBDb3B5cmlnaHQoYykgMjAxMi0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuLyoqXG4gKiAjIyMgb3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kIChjdHgsIG5hbWUsIG1ldGhvZCwgY2hhaW5pbmdCZWhhdmlvcilcbiAqXG4gKiBPdmVyd2l0ZXMgYW4gYWxyZWFkeSBleGlzdGluZyBjaGFpbmFibGUgbWV0aG9kXG4gKiBhbmQgcHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBwcmV2aW91cyBmdW5jdGlvbiBvclxuICogcHJvcGVydHkuICBNdXN0IHJldHVybiBmdW5jdGlvbnMgdG8gYmUgdXNlZCBmb3JcbiAqIG5hbWUuXG4gKlxuICogICAgIHV0aWxzLm92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZChjaGFpLkFzc2VydGlvbi5wcm90b3R5cGUsICdsZW5ndGgnLFxuICogICAgICAgZnVuY3Rpb24gKF9zdXBlcikge1xuICogICAgICAgfVxuICogICAgICwgZnVuY3Rpb24gKF9zdXBlcikge1xuICogICAgICAgfVxuICogICAgICk7XG4gKlxuICogQ2FuIGFsc28gYmUgYWNjZXNzZWQgZGlyZWN0bHkgZnJvbSBgY2hhaS5Bc3NlcnRpb25gLlxuICpcbiAqICAgICBjaGFpLkFzc2VydGlvbi5vdmVyd3JpdGVDaGFpbmFibGVNZXRob2QoJ2ZvbycsIGZuLCBmbik7XG4gKlxuICogVGhlbiBjYW4gYmUgdXNlZCBhcyBhbnkgb3RoZXIgYXNzZXJ0aW9uLlxuICpcbiAqICAgICBleHBlY3QobXlGb28pLnRvLmhhdmUubGVuZ3RoKDMpO1xuICogICAgIGV4cGVjdChteUZvbykudG8uaGF2ZS5sZW5ndGguYWJvdmUoMyk7XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGN0eCBvYmplY3Qgd2hvc2UgbWV0aG9kIC8gcHJvcGVydHkgaXMgdG8gYmUgb3ZlcndyaXR0ZW5cbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG9mIG1ldGhvZCAvIHByb3BlcnR5IHRvIG92ZXJ3cml0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRvIGJlIHVzZWQgZm9yIG5hbWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNoYWluaW5nQmVoYXZpb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdG8gYmUgdXNlZCBmb3IgcHJvcGVydHlcbiAqIEBuYW1lc3BhY2UgVXRpbHNcbiAqIEBuYW1lIG92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjdHgsIG5hbWUsIG1ldGhvZCwgY2hhaW5pbmdCZWhhdmlvcikge1xuICB2YXIgY2hhaW5hYmxlQmVoYXZpb3IgPSBjdHguX19tZXRob2RzW25hbWVdO1xuXG4gIHZhciBfY2hhaW5pbmdCZWhhdmlvciA9IGNoYWluYWJsZUJlaGF2aW9yLmNoYWluaW5nQmVoYXZpb3I7XG4gIGNoYWluYWJsZUJlaGF2aW9yLmNoYWluaW5nQmVoYXZpb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlc3VsdCA9IGNoYWluaW5nQmVoYXZpb3IoX2NoYWluaW5nQmVoYXZpb3IpLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gdGhpcyA6IHJlc3VsdDtcbiAgfTtcblxuICB2YXIgX21ldGhvZCA9IGNoYWluYWJsZUJlaGF2aW9yLm1ldGhvZDtcbiAgY2hhaW5hYmxlQmVoYXZpb3IubWV0aG9kID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQgPSBtZXRob2QoX21ldGhvZCkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyB0aGlzIDogcmVzdWx0O1xuICB9O1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvdXRpbHMvb3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kLmpzXG4gKiogbW9kdWxlIGlkID0gOTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogY2hhaVxuICogaHR0cDovL2NoYWlqcy5jb21cbiAqIENvcHlyaWdodChjKSAyMDExLTIwMTQgSmFrZSBMdWVyIDxqYWtlQGFsb2dpY2FscGFyYWRveC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi9jb25maWcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX2NoYWksIHV0aWwpIHtcbiAgLyohXG4gICAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gICAqL1xuXG4gIHZhciBBc3NlcnRpb25FcnJvciA9IF9jaGFpLkFzc2VydGlvbkVycm9yXG4gICAgLCBmbGFnID0gdXRpbC5mbGFnO1xuXG4gIC8qIVxuICAgKiBNb2R1bGUgZXhwb3J0LlxuICAgKi9cblxuICBfY2hhaS5Bc3NlcnRpb24gPSBBc3NlcnRpb247XG5cbiAgLyohXG4gICAqIEFzc2VydGlvbiBDb25zdHJ1Y3RvclxuICAgKlxuICAgKiBDcmVhdGVzIG9iamVjdCBmb3IgY2hhaW5pbmcuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBmdW5jdGlvbiBBc3NlcnRpb24gKG9iaiwgbXNnLCBzdGFjaykge1xuICAgIGZsYWcodGhpcywgJ3NzZmknLCBzdGFjayB8fCBhcmd1bWVudHMuY2FsbGVlKTtcbiAgICBmbGFnKHRoaXMsICdvYmplY3QnLCBvYmopO1xuICAgIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICB9XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFzc2VydGlvbiwgJ2luY2x1ZGVTdGFjaycsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uaW5jbHVkZVN0YWNrIGlzIGRlcHJlY2F0ZWQsIHVzZSBjaGFpLmNvbmZpZy5pbmNsdWRlU3RhY2sgaW5zdGVhZC4nKTtcbiAgICAgIHJldHVybiBjb25maWcuaW5jbHVkZVN0YWNrO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uaW5jbHVkZVN0YWNrIGlzIGRlcHJlY2F0ZWQsIHVzZSBjaGFpLmNvbmZpZy5pbmNsdWRlU3RhY2sgaW5zdGVhZC4nKTtcbiAgICAgIGNvbmZpZy5pbmNsdWRlU3RhY2sgPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBc3NlcnRpb24sICdzaG93RGlmZicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uc2hvd0RpZmYgaXMgZGVwcmVjYXRlZCwgdXNlIGNoYWkuY29uZmlnLnNob3dEaWZmIGluc3RlYWQuJyk7XG4gICAgICByZXR1cm4gY29uZmlnLnNob3dEaWZmO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgY29uc29sZS53YXJuKCdBc3NlcnRpb24uc2hvd0RpZmYgaXMgZGVwcmVjYXRlZCwgdXNlIGNoYWkuY29uZmlnLnNob3dEaWZmIGluc3RlYWQuJyk7XG4gICAgICBjb25maWcuc2hvd0RpZmYgPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xuICAgIHV0aWwuYWRkUHJvcGVydHkodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuKTtcbiAgfTtcblxuICBBc3NlcnRpb24uYWRkTWV0aG9kID0gZnVuY3Rpb24gKG5hbWUsIGZuKSB7XG4gICAgdXRpbC5hZGRNZXRob2QodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuKTtcbiAgfTtcblxuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kID0gZnVuY3Rpb24gKG5hbWUsIGZuLCBjaGFpbmluZ0JlaGF2aW9yKSB7XG4gICAgdXRpbC5hZGRDaGFpbmFibGVNZXRob2QodGhpcy5wcm90b3R5cGUsIG5hbWUsIGZuLCBjaGFpbmluZ0JlaGF2aW9yKTtcbiAgfTtcblxuICBBc3NlcnRpb24ub3ZlcndyaXRlUHJvcGVydHkgPSBmdW5jdGlvbiAobmFtZSwgZm4pIHtcbiAgICB1dGlsLm92ZXJ3cml0ZVByb3BlcnR5KHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbik7XG4gIH07XG5cbiAgQXNzZXJ0aW9uLm92ZXJ3cml0ZU1ldGhvZCA9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xuICAgIHV0aWwub3ZlcndyaXRlTWV0aG9kKHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbik7XG4gIH07XG5cbiAgQXNzZXJ0aW9uLm92ZXJ3cml0ZUNoYWluYWJsZU1ldGhvZCA9IGZ1bmN0aW9uIChuYW1lLCBmbiwgY2hhaW5pbmdCZWhhdmlvcikge1xuICAgIHV0aWwub3ZlcndyaXRlQ2hhaW5hYmxlTWV0aG9kKHRoaXMucHJvdG90eXBlLCBuYW1lLCBmbiwgY2hhaW5pbmdCZWhhdmlvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuYXNzZXJ0KGV4cHJlc3Npb24sIG1lc3NhZ2UsIG5lZ2F0ZU1lc3NhZ2UsIGV4cGVjdGVkLCBhY3R1YWwsIHNob3dEaWZmKVxuICAgKlxuICAgKiBFeGVjdXRlcyBhbiBleHByZXNzaW9uIGFuZCBjaGVjayBleHBlY3RhdGlvbnMuIFRocm93cyBBc3NlcnRpb25FcnJvciBmb3IgcmVwb3J0aW5nIGlmIHRlc3QgZG9lc24ndCBwYXNzLlxuICAgKlxuICAgKiBAbmFtZSBhc3NlcnRcbiAgICogQHBhcmFtIHtQaGlsb3NvcGhpY2FsfSBleHByZXNzaW9uIHRvIGJlIHRlc3RlZFxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gbWVzc2FnZSBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgbWVzc2FnZSB0byBkaXNwbGF5IGlmIGV4cHJlc3Npb24gZmFpbHNcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IG5lZ2F0ZWRNZXNzYWdlIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBuZWdhdGVkTWVzc2FnZSB0byBkaXNwbGF5IGlmIG5lZ2F0ZWQgZXhwcmVzc2lvbiBmYWlsc1xuICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZCB2YWx1ZSAocmVtZW1iZXIgdG8gY2hlY2sgZm9yIG5lZ2F0aW9uKVxuICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWwgKG9wdGlvbmFsKSB3aWxsIGRlZmF1bHQgdG8gYHRoaXMub2JqYFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3dEaWZmIChvcHRpb25hbCkgd2hlbiBzZXQgdG8gYHRydWVgLCBhc3NlcnQgd2lsbCBkaXNwbGF5IGEgZGlmZiBpbiBhZGRpdGlvbiB0byB0aGUgbWVzc2FnZSBpZiBleHByZXNzaW9uIGZhaWxzXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBBc3NlcnRpb24ucHJvdG90eXBlLmFzc2VydCA9IGZ1bmN0aW9uIChleHByLCBtc2csIG5lZ2F0ZU1zZywgZXhwZWN0ZWQsIF9hY3R1YWwsIHNob3dEaWZmKSB7XG4gICAgdmFyIG9rID0gdXRpbC50ZXN0KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHRydWUgIT09IHNob3dEaWZmKSBzaG93RGlmZiA9IGZhbHNlO1xuICAgIGlmICh0cnVlICE9PSBjb25maWcuc2hvd0RpZmYpIHNob3dEaWZmID0gZmFsc2U7XG5cbiAgICBpZiAoIW9rKSB7XG4gICAgICB2YXIgbXNnID0gdXRpbC5nZXRNZXNzYWdlKHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgLCBhY3R1YWwgPSB1dGlsLmdldEFjdHVhbCh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKG1zZywge1xuICAgICAgICAgIGFjdHVhbDogYWN0dWFsXG4gICAgICAgICwgZXhwZWN0ZWQ6IGV4cGVjdGVkXG4gICAgICAgICwgc2hvd0RpZmY6IHNob3dEaWZmXG4gICAgICB9LCAoY29uZmlnLmluY2x1ZGVTdGFjaykgPyB0aGlzLmFzc2VydCA6IGZsYWcodGhpcywgJ3NzZmknKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qIVxuICAgKiAjIyMgLl9vYmpcbiAgICpcbiAgICogUXVpY2sgcmVmZXJlbmNlIHRvIHN0b3JlZCBgYWN0dWFsYCB2YWx1ZSBmb3IgcGx1Z2luIGRldmVsb3BlcnMuXG4gICAqXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXNzZXJ0aW9uLnByb3RvdHlwZSwgJ19vYmonLFxuICAgIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICAgIH1cbiAgICAsIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnLCB2YWwpO1xuICAgICAgfVxuICB9KTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jaGFpL2xpYi9jaGFpL2Fzc2VydGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIGNoYWlcbiAqIGh0dHA6Ly9jaGFpanMuY29tXG4gKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2hhaSwgXykge1xuICB2YXIgQXNzZXJ0aW9uID0gY2hhaS5Bc3NlcnRpb25cbiAgICAsIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xuICAgICwgZmxhZyA9IF8uZmxhZztcblxuICAvKipcbiAgICogIyMjIExhbmd1YWdlIENoYWluc1xuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIGFyZSBwcm92aWRlZCBhcyBjaGFpbmFibGUgZ2V0dGVycyB0b1xuICAgKiBpbXByb3ZlIHRoZSByZWFkYWJpbGl0eSBvZiB5b3VyIGFzc2VydGlvbnMuIFRoZXlcbiAgICogZG8gbm90IHByb3ZpZGUgdGVzdGluZyBjYXBhYmlsaXRpZXMgdW5sZXNzIHRoZXlcbiAgICogaGF2ZSBiZWVuIG92ZXJ3cml0dGVuIGJ5IGEgcGx1Z2luLlxuICAgKlxuICAgKiAqKkNoYWlucyoqXG4gICAqXG4gICAqIC0gdG9cbiAgICogLSBiZVxuICAgKiAtIGJlZW5cbiAgICogLSBpc1xuICAgKiAtIHRoYXRcbiAgICogLSB3aGljaFxuICAgKiAtIGFuZFxuICAgKiAtIGhhc1xuICAgKiAtIGhhdmVcbiAgICogLSB3aXRoXG4gICAqIC0gYXRcbiAgICogLSBvZlxuICAgKiAtIHNhbWVcbiAgICpcbiAgICogQG5hbWUgbGFuZ3VhZ2UgY2hhaW5zXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIFsgJ3RvJywgJ2JlJywgJ2JlZW4nXG4gICwgJ2lzJywgJ2FuZCcsICdoYXMnLCAnaGF2ZSdcbiAgLCAnd2l0aCcsICd0aGF0JywgJ3doaWNoJywgJ2F0J1xuICAsICdvZicsICdzYW1lJyBdLmZvckVhY2goZnVuY3Rpb24gKGNoYWluKSB7XG4gICAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KGNoYWluLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAubm90XG4gICAqXG4gICAqIE5lZ2F0ZXMgYW55IG9mIGFzc2VydGlvbnMgZm9sbG93aW5nIGluIHRoZSBjaGFpbi5cbiAgICpcbiAgICogICAgIGV4cGVjdChmb28pLnRvLm5vdC5lcXVhbCgnYmFyJyk7XG4gICAqICAgICBleHBlY3QoZ29vZEZuKS50by5ub3QudGhyb3coRXJyb3IpO1xuICAgKiAgICAgZXhwZWN0KHsgZm9vOiAnYmF6JyB9KS50by5oYXZlLnByb3BlcnR5KCdmb28nKVxuICAgKiAgICAgICAuYW5kLm5vdC5lcXVhbCgnYmFyJyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdFxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ25vdCcsIGZ1bmN0aW9uICgpIHtcbiAgICBmbGFnKHRoaXMsICduZWdhdGUnLCB0cnVlKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuZGVlcFxuICAgKlxuICAgKiBTZXRzIHRoZSBgZGVlcGAgZmxhZywgbGF0ZXIgdXNlZCBieSB0aGUgYGVxdWFsYCBhbmRcbiAgICogYHByb3BlcnR5YCBhc3NlcnRpb25zLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KGZvbykudG8uZGVlcC5lcXVhbCh7IGJhcjogJ2JheicgfSk7XG4gICAqICAgICBleHBlY3QoeyBmb286IHsgYmFyOiB7IGJhejogJ3F1dXgnIH0gfSB9KVxuICAgKiAgICAgICAudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCdmb28uYmFyLmJheicsICdxdXV4Jyk7XG4gICAqXG4gICAqIGAuZGVlcC5wcm9wZXJ0eWAgc3BlY2lhbCBjaGFyYWN0ZXJzIGNhbiBiZSBlc2NhcGVkXG4gICAqIGJ5IGFkZGluZyB0d28gc2xhc2hlcyBiZWZvcmUgdGhlIGAuYCBvciBgW11gLlxuICAgKlxuICAgKiAgICAgdmFyIGRlZXBDc3MgPSB7ICcubGluayc6IHsgJ1t0YXJnZXRdJzogNDIgfX07XG4gICAqICAgICBleHBlY3QoZGVlcENzcykudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCdcXFxcLmxpbmsuXFxcXFt0YXJnZXRcXFxcXScsIDQyKTtcbiAgICpcbiAgICogQG5hbWUgZGVlcFxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2RlZXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgZmxhZyh0aGlzLCAnZGVlcCcsIHRydWUpO1xuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5hbnlcbiAgICpcbiAgICogU2V0cyB0aGUgYGFueWAgZmxhZywgKG9wcG9zaXRlIG9mIHRoZSBgYWxsYCBmbGFnKVxuICAgKiBsYXRlciB1c2VkIGluIHRoZSBga2V5c2AgYXNzZXJ0aW9uLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KGZvbykudG8uaGF2ZS5hbnkua2V5cygnYmFyJywgJ2JheicpO1xuICAgKlxuICAgKiBAbmFtZSBhbnlcbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdhbnknLCBmdW5jdGlvbiAoKSB7XG4gICAgZmxhZyh0aGlzLCAnYW55JywgdHJ1ZSk7XG4gICAgZmxhZyh0aGlzLCAnYWxsJywgZmFsc2UpXG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqICMjIyAuYWxsXG4gICAqXG4gICAqIFNldHMgdGhlIGBhbGxgIGZsYWcgKG9wcG9zaXRlIG9mIHRoZSBgYW55YCBmbGFnKVxuICAgKiBsYXRlciB1c2VkIGJ5IHRoZSBga2V5c2AgYXNzZXJ0aW9uLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KGZvbykudG8uaGF2ZS5hbGwua2V5cygnYmFyJywgJ2JheicpO1xuICAgKlxuICAgKiBAbmFtZSBhbGxcbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdhbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgZmxhZyh0aGlzLCAnYWxsJywgdHJ1ZSk7XG4gICAgZmxhZyh0aGlzLCAnYW55JywgZmFsc2UpO1xuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5hKHR5cGUpXG4gICAqXG4gICAqIFRoZSBgYWAgYW5kIGBhbmAgYXNzZXJ0aW9ucyBhcmUgYWxpYXNlcyB0aGF0IGNhbiBiZVxuICAgKiB1c2VkIGVpdGhlciBhcyBsYW5ndWFnZSBjaGFpbnMgb3IgdG8gYXNzZXJ0IGEgdmFsdWUnc1xuICAgKiB0eXBlLlxuICAgKlxuICAgKiAgICAgLy8gdHlwZW9mXG4gICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5iZS5hKCdzdHJpbmcnKTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8uYmUuYW4oJ29iamVjdCcpO1xuICAgKiAgICAgZXhwZWN0KG51bGwpLnRvLmJlLmEoJ251bGwnKTtcbiAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLmJlLmFuKCd1bmRlZmluZWQnKTtcbiAgICogICAgIGV4cGVjdChuZXcgRXJyb3IpLnRvLmJlLmFuKCdlcnJvcicpO1xuICAgKiAgICAgZXhwZWN0KG5ldyBQcm9taXNlKS50by5iZS5hKCdwcm9taXNlJyk7XG4gICAqICAgICBleHBlY3QobmV3IEZsb2F0MzJBcnJheSgpKS50by5iZS5hKCdmbG9hdDMyYXJyYXknKTtcbiAgICogICAgIGV4cGVjdChTeW1ib2woKSkudG8uYmUuYSgnc3ltYm9sJyk7XG4gICAqXG4gICAqICAgICAvLyBlczYgb3ZlcnJpZGVzXG4gICAqICAgICBleHBlY3Qoe1tTeW1ib2wudG9TdHJpbmdUYWddOigpPT4nZm9vJ30pLnRvLmJlLmEoJ2ZvbycpO1xuICAgKlxuICAgKiAgICAgLy8gbGFuZ3VhZ2UgY2hhaW5cbiAgICogICAgIGV4cGVjdChmb28pLnRvLmJlLmFuLmluc3RhbmNlb2YoRm9vKTtcbiAgICpcbiAgICogQG5hbWUgYVxuICAgKiBAYWxpYXMgYW5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBhbiAodHlwZSwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0JylcbiAgICAgICwgYXJ0aWNsZSA9IH5bICdhJywgJ2UnLCAnaScsICdvJywgJ3UnIF0uaW5kZXhPZih0eXBlLmNoYXJBdCgwKSkgPyAnYW4gJyA6ICdhICc7XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgdHlwZSA9PT0gXy50eXBlKG9iailcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgJyArIGFydGljbGUgKyB0eXBlXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSAnICsgYXJ0aWNsZSArIHR5cGVcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnYW4nLCBhbik7XG4gIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2EnLCBhbik7XG5cbiAgLyoqXG4gICAqICMjIyAuaW5jbHVkZSh2YWx1ZSlcbiAgICpcbiAgICogVGhlIGBpbmNsdWRlYCBhbmQgYGNvbnRhaW5gIGFzc2VydGlvbnMgY2FuIGJlIHVzZWQgYXMgZWl0aGVyIHByb3BlcnR5XG4gICAqIGJhc2VkIGxhbmd1YWdlIGNoYWlucyBvciBhcyBtZXRob2RzIHRvIGFzc2VydCB0aGUgaW5jbHVzaW9uIG9mIGFuIG9iamVjdFxuICAgKiBpbiBhbiBhcnJheSBvciBhIHN1YnN0cmluZyBpbiBhIHN0cmluZy4gV2hlbiB1c2VkIGFzIGxhbmd1YWdlIGNoYWlucyxcbiAgICogdGhleSB0b2dnbGUgdGhlIGBjb250YWluc2AgZmxhZyBmb3IgdGhlIGBrZXlzYCBhc3NlcnRpb24uXG4gICAqXG4gICAqICAgICBleHBlY3QoWzEsMiwzXSkudG8uaW5jbHVkZSgyKTtcbiAgICogICAgIGV4cGVjdCgnZm9vYmFyJykudG8uY29udGFpbignZm9vJyk7XG4gICAqICAgICBleHBlY3QoeyBmb286ICdiYXInLCBoZWxsbzogJ3VuaXZlcnNlJyB9KS50by5pbmNsdWRlLmtleXMoJ2ZvbycpO1xuICAgKlxuICAgKiBAbmFtZSBpbmNsdWRlXG4gICAqIEBhbGlhcyBjb250YWluXG4gICAqIEBhbGlhcyBpbmNsdWRlc1xuICAgKiBAYWxpYXMgY29udGFpbnNcbiAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfE51bWJlcn0gb2JqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gaW5jbHVkZUNoYWluaW5nQmVoYXZpb3IgKCkge1xuICAgIGZsYWcodGhpcywgJ2NvbnRhaW5zJywgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbmNsdWRlICh2YWwsIG1zZykge1xuICAgIF8uZXhwZWN0VHlwZXModGhpcywgWydhcnJheScsICdvYmplY3QnLCAnc3RyaW5nJ10pO1xuXG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIHZhciBleHBlY3RlZCA9IGZhbHNlO1xuXG4gICAgaWYgKF8udHlwZShvYmopID09PSAnYXJyYXknICYmIF8udHlwZSh2YWwpID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgICAgaWYgKF8uZXFsKG9ialtpXSwgdmFsKSkge1xuICAgICAgICAgIGV4cGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXy50eXBlKHZhbCkgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAoIWZsYWcodGhpcywgJ25lZ2F0ZScpKSB7XG4gICAgICAgIGZvciAodmFyIGsgaW4gdmFsKSBuZXcgQXNzZXJ0aW9uKG9iaikucHJvcGVydHkoaywgdmFsW2tdKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHN1YnNldCA9IHt9O1xuICAgICAgZm9yICh2YXIgayBpbiB2YWwpIHN1YnNldFtrXSA9IG9ialtrXTtcbiAgICAgIGV4cGVjdGVkID0gXy5lcWwoc3Vic2V0LCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHBlY3RlZCA9IChvYmogIT0gdW5kZWZpbmVkKSAmJiB+b2JqLmluZGV4T2YodmFsKTtcbiAgICB9XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIGV4cGVjdGVkXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGluY2x1ZGUgJyArIF8uaW5zcGVjdCh2YWwpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBpbmNsdWRlICcgKyBfLmluc3BlY3QodmFsKSk7XG4gIH1cblxuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdpbmNsdWRlJywgaW5jbHVkZSwgaW5jbHVkZUNoYWluaW5nQmVoYXZpb3IpO1xuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdjb250YWluJywgaW5jbHVkZSwgaW5jbHVkZUNoYWluaW5nQmVoYXZpb3IpO1xuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdjb250YWlucycsIGluY2x1ZGUsIGluY2x1ZGVDaGFpbmluZ0JlaGF2aW9yKTtcbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnaW5jbHVkZXMnLCBpbmNsdWRlLCBpbmNsdWRlQ2hhaW5pbmdCZWhhdmlvcik7XG5cbiAgLyoqXG4gICAqICMjIyAub2tcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgdHJ1dGh5LlxuICAgKlxuICAgKiAgICAgZXhwZWN0KCdldmVyeXRoaW5nJykudG8uYmUub2s7XG4gICAqICAgICBleHBlY3QoMSkudG8uYmUub2s7XG4gICAqICAgICBleHBlY3QoZmFsc2UpLnRvLm5vdC5iZS5vaztcbiAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLm5vdC5iZS5vaztcbiAgICogICAgIGV4cGVjdChudWxsKS50by5ub3QuYmUub2s7XG4gICAqXG4gICAqIEBuYW1lIG9rXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnb2snLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIHRydXRoeSdcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgZmFsc3knKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAudHJ1ZVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgdHJ1ZWAuXG4gICAqXG4gICAqICAgICBleHBlY3QodHJ1ZSkudG8uYmUudHJ1ZTtcbiAgICogICAgIGV4cGVjdCgxKS50by5ub3QuYmUudHJ1ZTtcbiAgICpcbiAgICogQG5hbWUgdHJ1ZVxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ3RydWUnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIHRydWUgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIHRydWUnXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGZhbHNlJ1xuICAgICAgLCB0aGlzLm5lZ2F0ZSA/IGZhbHNlIDogdHJ1ZVxuICAgICk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAjIyMgLmZhbHNlXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGBmYWxzZWAuXG4gICAqXG4gICAqICAgICBleHBlY3QoZmFsc2UpLnRvLmJlLmZhbHNlO1xuICAgKiAgICAgZXhwZWN0KDApLnRvLm5vdC5iZS5mYWxzZTtcbiAgICpcbiAgICogQG5hbWUgZmFsc2VcbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdmYWxzZScsIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgZmFsc2UgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGZhbHNlJ1xuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSB0cnVlJ1xuICAgICAgLCB0aGlzLm5lZ2F0ZSA/IHRydWUgOiBmYWxzZVxuICAgICk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAjIyMgLm51bGxcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgYG51bGxgLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KG51bGwpLnRvLmJlLm51bGw7XG4gICAqICAgICBleHBlY3QodW5kZWZpbmVkKS50by5ub3QuYmUubnVsbDtcbiAgICpcbiAgICogQG5hbWUgbnVsbFxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ251bGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIG51bGwgPT09IGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIG51bGwnXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSBudWxsJ1xuICAgICk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAjIyMgLnVuZGVmaW5lZFxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgdW5kZWZpbmVkYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCh1bmRlZmluZWQpLnRvLmJlLnVuZGVmaW5lZDtcbiAgICogICAgIGV4cGVjdChudWxsKS50by5ub3QuYmUudW5kZWZpbmVkO1xuICAgKlxuICAgKiBAbmFtZSB1bmRlZmluZWRcbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCd1bmRlZmluZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIHVuZGVmaW5lZCA9PT0gZmxhZyh0aGlzLCAnb2JqZWN0JylcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgdW5kZWZpbmVkJ1xuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gYmUgdW5kZWZpbmVkJ1xuICAgICk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAjIyMgLk5hTlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBgTmFOYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCgnZm9vJykudG8uYmUuTmFOO1xuICAgKiAgICAgZXhwZWN0KDQpLm5vdC50by5iZS5OYU47XG4gICAqXG4gICAqIEBuYW1lIE5hTlxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ05hTicsIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgaXNOYU4oZmxhZyh0aGlzLCAnb2JqZWN0JykpXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgTmFOJ1xuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBiZSBOYU4nXG4gICAgKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuZXhpc3RcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgbmVpdGhlciBgbnVsbGAgbm9yIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiAgICAgdmFyIGZvbyA9ICdoaSdcbiAgICogICAgICAgLCBiYXIgPSBudWxsXG4gICAqICAgICAgICwgYmF6O1xuICAgKlxuICAgKiAgICAgZXhwZWN0KGZvbykudG8uZXhpc3Q7XG4gICAqICAgICBleHBlY3QoYmFyKS50by5ub3QuZXhpc3Q7XG4gICAqICAgICBleHBlY3QoYmF6KS50by5ub3QuZXhpc3Q7XG4gICAqXG4gICAqIEBuYW1lIGV4aXN0XG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnZXhpc3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIG51bGwgIT0gZmxhZyh0aGlzLCAnb2JqZWN0JylcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gZXhpc3QnXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBleGlzdCdcbiAgICApO1xuICB9KTtcblxuXG4gIC8qKlxuICAgKiAjIyMgLmVtcHR5XG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0J3MgbGVuZ3RoIGlzIGAwYC4gRm9yIGFycmF5cyBhbmQgc3RyaW5ncywgaXQgY2hlY2tzXG4gICAqIHRoZSBgbGVuZ3RoYCBwcm9wZXJ0eS4gRm9yIG9iamVjdHMsIGl0IGdldHMgdGhlIGNvdW50IG9mXG4gICAqIGVudW1lcmFibGUga2V5cy5cbiAgICpcbiAgICogICAgIGV4cGVjdChbXSkudG8uYmUuZW1wdHk7XG4gICAqICAgICBleHBlY3QoJycpLnRvLmJlLmVtcHR5O1xuICAgKiAgICAgZXhwZWN0KHt9KS50by5iZS5lbXB0eTtcbiAgICpcbiAgICogQG5hbWUgZW1wdHlcbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdlbXB0eScsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0JylcbiAgICAgICwgZXhwZWN0ZWQgPSBvYmo7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopIHx8ICdzdHJpbmcnID09PSB0eXBlb2Ygb2JqZWN0KSB7XG4gICAgICBleHBlY3RlZCA9IG9iai5sZW5ndGg7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgZXhwZWN0ZWQgPSBPYmplY3Qua2V5cyhvYmopLmxlbmd0aDtcbiAgICB9XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgIWV4cGVjdGVkXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGVtcHR5J1xuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSBub3QgdG8gYmUgZW1wdHknXG4gICAgKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuYXJndW1lbnRzXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGFuIGFyZ3VtZW50cyBvYmplY3QuXG4gICAqXG4gICAqICAgICBmdW5jdGlvbiB0ZXN0ICgpIHtcbiAgICogICAgICAgZXhwZWN0KGFyZ3VtZW50cykudG8uYmUuYXJndW1lbnRzO1xuICAgKiAgICAgfVxuICAgKlxuICAgKiBAbmFtZSBhcmd1bWVudHNcbiAgICogQGFsaWFzIEFyZ3VtZW50c1xuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBjaGVja0FyZ3VtZW50cyAoKSB7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpXG4gICAgICAsIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTtcbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgJ1tvYmplY3QgQXJndW1lbnRzXScgPT09IHR5cGVcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYXJndW1lbnRzIGJ1dCBnb3QgJyArIHR5cGVcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGFyZ3VtZW50cydcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZFByb3BlcnR5KCdhcmd1bWVudHMnLCBjaGVja0FyZ3VtZW50cyk7XG4gIEFzc2VydGlvbi5hZGRQcm9wZXJ0eSgnQXJndW1lbnRzJywgY2hlY2tBcmd1bWVudHMpO1xuXG4gIC8qKlxuICAgKiAjIyMgLmVxdWFsKHZhbHVlKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBzdHJpY3RseSBlcXVhbCAoYD09PWApIHRvIGB2YWx1ZWAuXG4gICAqIEFsdGVybmF0ZWx5LCBpZiB0aGUgYGRlZXBgIGZsYWcgaXMgc2V0LCBhc3NlcnRzIHRoYXRcbiAgICogdGhlIHRhcmdldCBpcyBkZWVwbHkgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCgnaGVsbG8nKS50by5lcXVhbCgnaGVsbG8nKTtcbiAgICogICAgIGV4cGVjdCg0MikudG8uZXF1YWwoNDIpO1xuICAgKiAgICAgZXhwZWN0KDEpLnRvLm5vdC5lcXVhbCh0cnVlKTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8ubm90LmVxdWFsKHsgZm9vOiAnYmFyJyB9KTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8uZGVlcC5lcXVhbCh7IGZvbzogJ2JhcicgfSk7XG4gICAqXG4gICAqIEBuYW1lIGVxdWFsXG4gICAqIEBhbGlhcyBlcXVhbHNcbiAgICogQGFsaWFzIGVxXG4gICAqIEBhbGlhcyBkZWVwLmVxdWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0RXF1YWwgKHZhbCwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIGlmIChmbGFnKHRoaXMsICdkZWVwJykpIHtcbiAgICAgIHJldHVybiB0aGlzLmVxbCh2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICB2YWwgPT09IG9ialxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGVxdWFsICN7ZXhwfSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgZXF1YWwgI3tleHB9J1xuICAgICAgICAsIHZhbFxuICAgICAgICAsIHRoaXMuX29ialxuICAgICAgICAsIHRydWVcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXF1YWwnLCBhc3NlcnRFcXVhbCk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2VxdWFscycsIGFzc2VydEVxdWFsKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXEnLCBhc3NlcnRFcXVhbCk7XG5cbiAgLyoqXG4gICAqICMjIyAuZXFsKHZhbHVlKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBkZWVwbHkgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCh7IGZvbzogJ2JhcicgfSkudG8uZXFsKHsgZm9vOiAnYmFyJyB9KTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uZXFsKFsgMSwgMiwgMyBdKTtcbiAgICpcbiAgICogQG5hbWUgZXFsXG4gICAqIEBhbGlhcyBlcWxzXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0RXFsKG9iaiwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIF8uZXFsKG9iaiwgZmxhZyh0aGlzLCAnb2JqZWN0JykpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGRlZXBseSBlcXVhbCAje2V4cH0nXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBkZWVwbHkgZXF1YWwgI3tleHB9J1xuICAgICAgLCBvYmpcbiAgICAgICwgdGhpcy5fb2JqXG4gICAgICAsIHRydWVcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXFsJywgYXNzZXJ0RXFsKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZXFscycsIGFzc2VydEVxbCk7XG5cbiAgLyoqXG4gICAqICMjIyAuYWJvdmUodmFsdWUpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGdyZWF0ZXIgdGhhbiBgdmFsdWVgLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KDEwKS50by5iZS5hYm92ZSg1KTtcbiAgICpcbiAgICogQ2FuIGFsc28gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBsZW5ndGhgIHRvXG4gICAqIGFzc2VydCBhIG1pbmltdW0gbGVuZ3RoLiBUaGUgYmVuZWZpdCBiZWluZyBhXG4gICAqIG1vcmUgaW5mb3JtYXRpdmUgZXJyb3IgbWVzc2FnZSB0aGFuIGlmIHRoZSBsZW5ndGhcbiAgICogd2FzIHN1cHBsaWVkIGRpcmVjdGx5LlxuICAgKlxuICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC5hYm92ZSgyKTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uaGF2ZS5sZW5ndGguYWJvdmUoMik7XG4gICAqXG4gICAqIEBuYW1lIGFib3ZlXG4gICAqIEBhbGlhcyBndFxuICAgKiBAYWxpYXMgZ3JlYXRlclRoYW5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0QWJvdmUgKG4sIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICBpZiAoZmxhZyh0aGlzLCAnZG9MZW5ndGgnKSkge1xuICAgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcbiAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgIGxlbiA+IG5cbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGFib3ZlICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSBhIGxlbmd0aCBhYm92ZSAje2V4cH0nXG4gICAgICAgICwgblxuICAgICAgICAsIGxlblxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgb2JqID4gblxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGFib3ZlICcgKyBuXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYXQgbW9zdCAnICsgblxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdhYm92ZScsIGFzc2VydEFib3ZlKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnZ3QnLCBhc3NlcnRBYm92ZSk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2dyZWF0ZXJUaGFuJywgYXNzZXJ0QWJvdmUpO1xuXG4gIC8qKlxuICAgKiAjIyMgLmxlYXN0KHZhbHVlKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICpcbiAgICogICAgIGV4cGVjdCgxMCkudG8uYmUuYXQubGVhc3QoMTApO1xuICAgKlxuICAgKiBDYW4gYWxzbyBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYGxlbmd0aGAgdG9cbiAgICogYXNzZXJ0IGEgbWluaW11bSBsZW5ndGguIFRoZSBiZW5lZml0IGJlaW5nIGFcbiAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuICAgKiB3YXMgc3VwcGxpZWQgZGlyZWN0bHkuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLm9mLmF0LmxlYXN0KDIpO1xuICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5vZi5hdC5sZWFzdCgzKTtcbiAgICpcbiAgICogQG5hbWUgbGVhc3RcbiAgICogQGFsaWFzIGd0ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBhc3NlcnRMZWFzdCAobiwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5oYXZlLnByb3BlcnR5KCdsZW5ndGgnKTtcbiAgICAgIHZhciBsZW4gPSBvYmoubGVuZ3RoO1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgbGVuID49IG5cbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGF0IGxlYXN0ICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGJlbG93ICN7ZXhwfSdcbiAgICAgICAgLCBuXG4gICAgICAgICwgbGVuXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICBvYmogPj0gblxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGF0IGxlYXN0ICcgKyBuXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYmVsb3cgJyArIG5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbGVhc3QnLCBhc3NlcnRMZWFzdCk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2d0ZScsIGFzc2VydExlYXN0KTtcblxuICAvKipcbiAgICogIyMjIC5iZWxvdyh2YWx1ZSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgbGVzcyB0aGFuIGB2YWx1ZWAuXG4gICAqXG4gICAqICAgICBleHBlY3QoNSkudG8uYmUuYmVsb3coMTApO1xuICAgKlxuICAgKiBDYW4gYWxzbyBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYGxlbmd0aGAgdG9cbiAgICogYXNzZXJ0IGEgbWF4aW11bSBsZW5ndGguIFRoZSBiZW5lZml0IGJlaW5nIGFcbiAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuICAgKiB3YXMgc3VwcGxpZWQgZGlyZWN0bHkuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLmJlbG93KDQpO1xuICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5iZWxvdyg0KTtcbiAgICpcbiAgICogQG5hbWUgYmVsb3dcbiAgICogQGFsaWFzIGx0XG4gICAqIEBhbGlhcyBsZXNzVGhhblxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBhc3NlcnRCZWxvdyAobiwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIGlmIChmbGFnKHRoaXMsICdkb0xlbmd0aCcpKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5oYXZlLnByb3BlcnR5KCdsZW5ndGgnKTtcbiAgICAgIHZhciBsZW4gPSBvYmoubGVuZ3RoO1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgbGVuIDwgblxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYSBsZW5ndGggYmVsb3cgI3tleHB9IGJ1dCBnb3QgI3thY3R9J1xuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgbGVuZ3RoIGJlbG93ICN7ZXhwfSdcbiAgICAgICAgLCBuXG4gICAgICAgICwgbGVuXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICBvYmogPCBuXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYmVsb3cgJyArIG5cbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhdCBsZWFzdCAnICsgblxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdiZWxvdycsIGFzc2VydEJlbG93KTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbHQnLCBhc3NlcnRCZWxvdyk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2xlc3NUaGFuJywgYXNzZXJ0QmVsb3cpO1xuXG4gIC8qKlxuICAgKiAjIyMgLm1vc3QodmFsdWUpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgdmFsdWVgLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KDUpLnRvLmJlLmF0Lm1vc3QoNSk7XG4gICAqXG4gICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuICAgKiBhc3NlcnQgYSBtYXhpbXVtIGxlbmd0aC4gVGhlIGJlbmVmaXQgYmVpbmcgYVxuICAgKiBtb3JlIGluZm9ybWF0aXZlIGVycm9yIG1lc3NhZ2UgdGhhbiBpZiB0aGUgbGVuZ3RoXG4gICAqIHdhcyBzdXBwbGllZCBkaXJlY3RseS5cbiAgICpcbiAgICogICAgIGV4cGVjdCgnZm9vJykudG8uaGF2ZS5sZW5ndGgub2YuYXQubW9zdCg0KTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uaGF2ZS5sZW5ndGgub2YuYXQubW9zdCgzKTtcbiAgICpcbiAgICogQG5hbWUgbW9zdFxuICAgKiBAYWxpYXMgbHRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydE1vc3QgKG4sIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICBpZiAoZmxhZyh0aGlzLCAnZG9MZW5ndGgnKSkge1xuICAgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcbiAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgIGxlbiA8PSBuXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCBhdCBtb3N0ICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgbGVuZ3RoIGFib3ZlICN7ZXhwfSdcbiAgICAgICAgLCBuXG4gICAgICAgICwgbGVuXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICBvYmogPD0gblxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGF0IG1vc3QgJyArIG5cbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBhYm92ZSAnICsgblxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdtb3N0JywgYXNzZXJ0TW9zdCk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2x0ZScsIGFzc2VydE1vc3QpO1xuXG4gIC8qKlxuICAgKiAjIyMgLndpdGhpbihzdGFydCwgZmluaXNoKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyB3aXRoaW4gYSByYW5nZS5cbiAgICpcbiAgICogICAgIGV4cGVjdCg3KS50by5iZS53aXRoaW4oNSwxMCk7XG4gICAqXG4gICAqIENhbiBhbHNvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgbGVuZ3RoYCB0b1xuICAgKiBhc3NlcnQgYSBsZW5ndGggcmFuZ2UuIFRoZSBiZW5lZml0IGJlaW5nIGFcbiAgICogbW9yZSBpbmZvcm1hdGl2ZSBlcnJvciBtZXNzYWdlIHRoYW4gaWYgdGhlIGxlbmd0aFxuICAgKiB3YXMgc3VwcGxpZWQgZGlyZWN0bHkuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLndpdGhpbigyLDQpO1xuICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcbiAgICpcbiAgICogQG5hbWUgd2l0aGluXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCBsb3dlcmJvdW5kIGluY2x1c2l2ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gZmluaXNoIHVwcGVyYm91bmQgaW5jbHVzaXZlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnd2l0aGluJywgZnVuY3Rpb24gKHN0YXJ0LCBmaW5pc2gsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuICAgICAgLCByYW5nZSA9IHN0YXJ0ICsgJy4uJyArIGZpbmlzaDtcbiAgICBpZiAoZmxhZyh0aGlzLCAnZG9MZW5ndGgnKSkge1xuICAgICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gICAgICB2YXIgbGVuID0gb2JqLmxlbmd0aDtcbiAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgIGxlbiA+PSBzdGFydCAmJiBsZW4gPD0gZmluaXNoXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCB3aXRoaW4gJyArIHJhbmdlXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGhhdmUgYSBsZW5ndGggd2l0aGluICcgKyByYW5nZVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgb2JqID49IHN0YXJ0ICYmIG9iaiA8PSBmaW5pc2hcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSB3aXRoaW4gJyArIHJhbmdlXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIHdpdGhpbiAnICsgcmFuZ2VcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5pbnN0YW5jZW9mKGNvbnN0cnVjdG9yKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuICAgKlxuICAgKiAgICAgdmFyIFRlYSA9IGZ1bmN0aW9uIChuYW1lKSB7IHRoaXMubmFtZSA9IG5hbWU7IH1cbiAgICogICAgICAgLCBDaGFpID0gbmV3IFRlYSgnY2hhaScpO1xuICAgKlxuICAgKiAgICAgZXhwZWN0KENoYWkpLnRvLmJlLmFuLmluc3RhbmNlb2YoVGVhKTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uYmUuaW5zdGFuY2VvZihBcnJheSk7XG4gICAqXG4gICAqIEBuYW1lIGluc3RhbmNlb2ZcbiAgICogQHBhcmFtIHtDb25zdHJ1Y3Rvcn0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAYWxpYXMgaW5zdGFuY2VPZlxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBmdW5jdGlvbiBhc3NlcnRJbnN0YW5jZU9mIChjb25zdHJ1Y3RvciwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG5hbWUgPSBfLmdldE5hbWUoY29uc3RydWN0b3IpO1xuICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnKSBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIGFuIGluc3RhbmNlIG9mICcgKyBuYW1lXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBiZSBhbiBpbnN0YW5jZSBvZiAnICsgbmFtZVxuICAgICk7XG4gIH07XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnaW5zdGFuY2VvZicsIGFzc2VydEluc3RhbmNlT2YpO1xuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdpbnN0YW5jZU9mJywgYXNzZXJ0SW5zdGFuY2VPZik7XG5cbiAgLyoqXG4gICAqICMjIyAucHJvcGVydHkobmFtZSwgW3ZhbHVlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaGFzIGEgcHJvcGVydHkgYG5hbWVgLCBvcHRpb25hbGx5IGFzc2VydGluZyB0aGF0XG4gICAqIHRoZSB2YWx1ZSBvZiB0aGF0IHByb3BlcnR5IGlzIHN0cmljdGx5IGVxdWFsIHRvICBgdmFsdWVgLlxuICAgKiBJZiB0aGUgYGRlZXBgIGZsYWcgaXMgc2V0LCB5b3UgY2FuIHVzZSBkb3QtIGFuZCBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwXG4gICAqIHJlZmVyZW5jZXMgaW50byBvYmplY3RzIGFuZCBhcnJheXMuXG4gICAqXG4gICAqICAgICAvLyBzaW1wbGUgcmVmZXJlbmNpbmdcbiAgICogICAgIHZhciBvYmogPSB7IGZvbzogJ2JhcicgfTtcbiAgICogICAgIGV4cGVjdChvYmopLnRvLmhhdmUucHJvcGVydHkoJ2ZvbycpO1xuICAgKiAgICAgZXhwZWN0KG9iaikudG8uaGF2ZS5wcm9wZXJ0eSgnZm9vJywgJ2JhcicpO1xuICAgKlxuICAgKiAgICAgLy8gZGVlcCByZWZlcmVuY2luZ1xuICAgKiAgICAgdmFyIGRlZXBPYmogPSB7XG4gICAqICAgICAgICAgZ3JlZW46IHsgdGVhOiAnbWF0Y2hhJyB9XG4gICAqICAgICAgICwgdGVhczogWyAnY2hhaScsICdtYXRjaGEnLCB7IHRlYTogJ2tvbmFjaGEnIH0gXVxuICAgKiAgICAgfTtcbiAgICpcbiAgICogICAgIGV4cGVjdChkZWVwT2JqKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ2dyZWVuLnRlYScsICdtYXRjaGEnKTtcbiAgICogICAgIGV4cGVjdChkZWVwT2JqKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ3RlYXNbMV0nLCAnbWF0Y2hhJyk7XG4gICAqICAgICBleHBlY3QoZGVlcE9iaikudG8uaGF2ZS5kZWVwLnByb3BlcnR5KCd0ZWFzWzJdLnRlYScsICdrb25hY2hhJyk7XG4gICAqXG4gICAqIFlvdSBjYW4gYWxzbyB1c2UgYW4gYXJyYXkgYXMgdGhlIHN0YXJ0aW5nIHBvaW50IG9mIGEgYGRlZXAucHJvcGVydHlgXG4gICAqIGFzc2VydGlvbiwgb3IgdHJhdmVyc2UgbmVzdGVkIGFycmF5cy5cbiAgICpcbiAgICogICAgIHZhciBhcnIgPSBbXG4gICAqICAgICAgICAgWyAnY2hhaScsICdtYXRjaGEnLCAna29uYWNoYScgXVxuICAgKiAgICAgICAsIFsgeyB0ZWE6ICdjaGFpJyB9XG4gICAqICAgICAgICAgLCB7IHRlYTogJ21hdGNoYScgfVxuICAgKiAgICAgICAgICwgeyB0ZWE6ICdrb25hY2hhJyB9IF1cbiAgICogICAgIF07XG4gICAqXG4gICAqICAgICBleHBlY3QoYXJyKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ1swXVsxXScsICdtYXRjaGEnKTtcbiAgICogICAgIGV4cGVjdChhcnIpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSgnWzFdWzJdLnRlYScsICdrb25hY2hhJyk7XG4gICAqXG4gICAqIEZ1cnRoZXJtb3JlLCBgcHJvcGVydHlgIGNoYW5nZXMgdGhlIHN1YmplY3Qgb2YgdGhlIGFzc2VydGlvblxuICAgKiB0byBiZSB0aGUgdmFsdWUgb2YgdGhhdCBwcm9wZXJ0eSBmcm9tIHRoZSBvcmlnaW5hbCBvYmplY3QuIFRoaXNcbiAgICogcGVybWl0cyBmb3IgZnVydGhlciBjaGFpbmFibGUgYXNzZXJ0aW9ucyBvbiB0aGF0IHByb3BlcnR5LlxuICAgKlxuICAgKiAgICAgZXhwZWN0KG9iaikudG8uaGF2ZS5wcm9wZXJ0eSgnZm9vJylcbiAgICogICAgICAgLnRoYXQuaXMuYSgnc3RyaW5nJyk7XG4gICAqICAgICBleHBlY3QoZGVlcE9iaikudG8uaGF2ZS5wcm9wZXJ0eSgnZ3JlZW4nKVxuICAgKiAgICAgICAudGhhdC5pcy5hbignb2JqZWN0JylcbiAgICogICAgICAgLnRoYXQuZGVlcC5lcXVhbHMoeyB0ZWE6ICdtYXRjaGEnIH0pO1xuICAgKiAgICAgZXhwZWN0KGRlZXBPYmopLnRvLmhhdmUucHJvcGVydHkoJ3RlYXMnKVxuICAgKiAgICAgICAudGhhdC5pcy5hbignYXJyYXknKVxuICAgKiAgICAgICAud2l0aC5kZWVwLnByb3BlcnR5KCdbMl0nKVxuICAgKiAgICAgICAgIC50aGF0LmRlZXAuZXF1YWxzKHsgdGVhOiAna29uYWNoYScgfSk7XG4gICAqXG4gICAqIE5vdGUgdGhhdCBkb3RzIGFuZCBicmFja2V0IGluIGBuYW1lYCBtdXN0IGJlIGJhY2tzbGFzaC1lc2NhcGVkIHdoZW5cbiAgICogdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgd2hpbGUgdGhleSBtdXN0IE5PVCBiZSBlc2NhcGVkIHdoZW4gdGhlIGBkZWVwYFxuICAgKiBmbGFnIGlzIG5vdCBzZXQuXG4gICAqXG4gICAqICAgICAvLyBzaW1wbGUgcmVmZXJlbmNpbmdcbiAgICogICAgIHZhciBjc3MgPSB7ICcubGlua1t0YXJnZXRdJzogNDIgfTtcbiAgICogICAgIGV4cGVjdChjc3MpLnRvLmhhdmUucHJvcGVydHkoJy5saW5rW3RhcmdldF0nLCA0Mik7XG4gICAqXG4gICAqICAgICAvLyBkZWVwIHJlZmVyZW5jaW5nXG4gICAqICAgICB2YXIgZGVlcENzcyA9IHsgJy5saW5rJzogeyAnW3RhcmdldF0nOiA0MiB9fTtcbiAgICogICAgIGV4cGVjdChkZWVwQ3NzKS50by5oYXZlLmRlZXAucHJvcGVydHkoJ1xcXFwubGluay5cXFxcW3RhcmdldFxcXFxdJywgNDIpO1xuICAgKlxuICAgKiBAbmFtZSBwcm9wZXJ0eVxuICAgKiBAYWxpYXMgZGVlcC5wcm9wZXJ0eVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSAob3B0aW9uYWwpXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQHJldHVybnMgdmFsdWUgb2YgcHJvcGVydHkgZm9yIGNoYWluaW5nXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Byb3BlcnR5JywgZnVuY3Rpb24gKG5hbWUsIHZhbCwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG5cbiAgICB2YXIgaXNEZWVwID0gISFmbGFnKHRoaXMsICdkZWVwJylcbiAgICAgICwgZGVzY3JpcHRvciA9IGlzRGVlcCA/ICdkZWVwIHByb3BlcnR5ICcgOiAncHJvcGVydHkgJ1xuICAgICAgLCBuZWdhdGUgPSBmbGFnKHRoaXMsICduZWdhdGUnKVxuICAgICAgLCBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuICAgICAgLCBwYXRoSW5mbyA9IGlzRGVlcCA/IF8uZ2V0UGF0aEluZm8obmFtZSwgb2JqKSA6IG51bGxcbiAgICAgICwgaGFzUHJvcGVydHkgPSBpc0RlZXBcbiAgICAgICAgPyBwYXRoSW5mby5leGlzdHNcbiAgICAgICAgOiBfLmhhc1Byb3BlcnR5KG5hbWUsIG9iailcbiAgICAgICwgdmFsdWUgPSBpc0RlZXBcbiAgICAgICAgPyBwYXRoSW5mby52YWx1ZVxuICAgICAgICA6IG9ialtuYW1lXTtcblxuICAgIGlmIChuZWdhdGUgJiYgYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IHZhbHVlKSB7XG4gICAgICAgIG1zZyA9IChtc2cgIT0gbnVsbCkgPyBtc2cgKyAnOiAnIDogJyc7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cgKyBfLmluc3BlY3Qob2JqKSArICcgaGFzIG5vICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgaGFzUHJvcGVydHlcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIGEgJyArIGRlc2NyaXB0b3IgKyBfLmluc3BlY3QobmFtZSlcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSAnICsgZGVzY3JpcHRvciArIF8uaW5zcGVjdChuYW1lKSk7XG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICB2YWwgPT09IHZhbHVlXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhICcgKyBkZXNjcmlwdG9yICsgXy5pbnNwZWN0KG5hbWUpICsgJyBvZiAje2V4cH0sIGJ1dCBnb3QgI3thY3R9J1xuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgJyArIGRlc2NyaXB0b3IgKyBfLmluc3BlY3QobmFtZSkgKyAnIG9mICN7YWN0fSdcbiAgICAgICAgLCB2YWxcbiAgICAgICAgLCB2YWx1ZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmbGFnKHRoaXMsICdvYmplY3QnLCB2YWx1ZSk7XG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqICMjIyAub3duUHJvcGVydHkobmFtZSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaGFzIGFuIG93biBwcm9wZXJ0eSBgbmFtZWAuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5oYXZlLm93blByb3BlcnR5KCdsZW5ndGgnKTtcbiAgICpcbiAgICogQG5hbWUgb3duUHJvcGVydHlcbiAgICogQGFsaWFzIGhhdmVPd25Qcm9wZXJ0eVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydE93blByb3BlcnR5IChuYW1lLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIG9iai5oYXNPd25Qcm9wZXJ0eShuYW1lKVxuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBoYXZlIG93biBwcm9wZXJ0eSAnICsgXy5pbnNwZWN0KG5hbWUpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIG93biBwcm9wZXJ0eSAnICsgXy5pbnNwZWN0KG5hbWUpXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ293blByb3BlcnR5JywgYXNzZXJ0T3duUHJvcGVydHkpO1xuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdoYXZlT3duUHJvcGVydHknLCBhc3NlcnRPd25Qcm9wZXJ0eSk7XG5cbiAgLyoqXG4gICAqICMjIyAub3duUHJvcGVydHlEZXNjcmlwdG9yKG5hbWVbLCBkZXNjcmlwdG9yWywgbWVzc2FnZV1dKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBoYXMgYW4gb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgYG5hbWVgLCB0aGF0IG9wdGlvbmFsbHkgbWF0Y2hlcyBgZGVzY3JpcHRvcmAuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5oYXZlLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJyk7XG4gICAqICAgICBleHBlY3QoJ3Rlc3QnKS50by5oYXZlLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJywgeyBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IGZhbHNlLCB2YWx1ZTogNCB9KTtcbiAgICogICAgIGV4cGVjdCgndGVzdCcpLm5vdC50by5oYXZlLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJywgeyBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IGZhbHNlLCB2YWx1ZTogMyB9KTtcbiAgICogICAgIGV4cGVjdCgndGVzdCcpLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJykudG8uaGF2ZS5wcm9wZXJ0eSgnZW51bWVyYWJsZScsIGZhbHNlKTtcbiAgICogICAgIGV4cGVjdCgndGVzdCcpLm93blByb3BlcnR5RGVzY3JpcHRvcignbGVuZ3RoJykudG8uaGF2ZS5rZXlzKCd2YWx1ZScpO1xuICAgKlxuICAgKiBAbmFtZSBvd25Qcm9wZXJ0eURlc2NyaXB0b3JcbiAgICogQGFsaWFzIGhhdmVPd25Qcm9wZXJ0eURlc2NyaXB0b3JcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgX29wdGlvbmFsX1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydE93blByb3BlcnR5RGVzY3JpcHRvciAobmFtZSwgZGVzY3JpcHRvciwgbXNnKSB7XG4gICAgaWYgKHR5cGVvZiBkZXNjcmlwdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgbXNnID0gZGVzY3JpcHRvcjtcbiAgICAgIGRlc2NyaXB0b3IgPSBudWxsO1xuICAgIH1cbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gICAgdmFyIGFjdHVhbERlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdChvYmopLCBuYW1lKTtcbiAgICBpZiAoYWN0dWFsRGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yKSB7XG4gICAgICB0aGlzLmFzc2VydChcbiAgICAgICAgICBfLmVxbChkZXNjcmlwdG9yLCBhY3R1YWxEZXNjcmlwdG9yKVxuICAgICAgICAsICdleHBlY3RlZCB0aGUgb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgZm9yICcgKyBfLmluc3BlY3QobmFtZSkgKyAnIG9uICN7dGhpc30gdG8gbWF0Y2ggJyArIF8uaW5zcGVjdChkZXNjcmlwdG9yKSArICcsIGdvdCAnICsgXy5pbnNwZWN0KGFjdHVhbERlc2NyaXB0b3IpXG4gICAgICAgICwgJ2V4cGVjdGVkIHRoZSBvd24gcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgJyArIF8uaW5zcGVjdChuYW1lKSArICcgb24gI3t0aGlzfSB0byBub3QgbWF0Y2ggJyArIF8uaW5zcGVjdChkZXNjcmlwdG9yKVxuICAgICAgICAsIGRlc2NyaXB0b3JcbiAgICAgICAgLCBhY3R1YWxEZXNjcmlwdG9yXG4gICAgICAgICwgdHJ1ZVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgYWN0dWFsRGVzY3JpcHRvclxuICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGhhdmUgYW4gb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgZm9yICcgKyBfLmluc3BlY3QobmFtZSlcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSBhbiBvd24gcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgJyArIF8uaW5zcGVjdChuYW1lKVxuICAgICAgKTtcbiAgICB9XG4gICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgYWN0dWFsRGVzY3JpcHRvcik7XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdvd25Qcm9wZXJ0eURlc2NyaXB0b3InLCBhc3NlcnRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpO1xuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdoYXZlT3duUHJvcGVydHlEZXNjcmlwdG9yJywgYXNzZXJ0T3duUHJvcGVydHlEZXNjcmlwdG9yKTtcblxuICAvKipcbiAgICogIyMjIC5sZW5ndGhcbiAgICpcbiAgICogU2V0cyB0aGUgYGRvTGVuZ3RoYCBmbGFnIGxhdGVyIHVzZWQgYXMgYSBjaGFpbiBwcmVjdXJzb3IgdG8gYSB2YWx1ZVxuICAgKiBjb21wYXJpc29uIGZvciB0aGUgYGxlbmd0aGAgcHJvcGVydHkuXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2ZvbycpLnRvLmhhdmUubGVuZ3RoLmFib3ZlKDIpO1xuICAgKiAgICAgZXhwZWN0KFsgMSwgMiwgMyBdKS50by5oYXZlLmxlbmd0aC5hYm92ZSgyKTtcbiAgICogICAgIGV4cGVjdCgnZm9vJykudG8uaGF2ZS5sZW5ndGguYmVsb3coNCk7XG4gICAqICAgICBleHBlY3QoWyAxLCAyLCAzIF0pLnRvLmhhdmUubGVuZ3RoLmJlbG93KDQpO1xuICAgKiAgICAgZXhwZWN0KCdmb28nKS50by5oYXZlLmxlbmd0aC53aXRoaW4oMiw0KTtcbiAgICogICAgIGV4cGVjdChbIDEsIDIsIDMgXSkudG8uaGF2ZS5sZW5ndGgud2l0aGluKDIsNCk7XG4gICAqXG4gICAqICpEZXByZWNhdGlvbiBub3RpY2U6KiBVc2luZyBgbGVuZ3RoYCBhcyBhbiBhc3NlcnRpb24gd2lsbCBiZSBkZXByZWNhdGVkXG4gICAqIGluIHZlcnNpb24gMi40LjAgYW5kIHJlbW92ZWQgaW4gMy4wLjAuIENvZGUgdXNpbmcgdGhlIG9sZCBzdHlsZSBvZlxuICAgKiBhc3NlcnRpbmcgZm9yIGBsZW5ndGhgIHByb3BlcnR5IHZhbHVlIHVzaW5nIGBsZW5ndGgodmFsdWUpYCBzaG91bGQgYmVcbiAgICogc3dpdGNoZWQgdG8gdXNlIGBsZW5ndGhPZih2YWx1ZSlgIGluc3RlYWQuXG4gICAqXG4gICAqIEBuYW1lIGxlbmd0aFxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICAvKipcbiAgICogIyMjIC5sZW5ndGhPZih2YWx1ZVssIG1lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCdzIGBsZW5ndGhgIHByb3BlcnR5IGhhc1xuICAgKiB0aGUgZXhwZWN0ZWQgdmFsdWUuXG4gICAqXG4gICAqICAgICBleHBlY3QoWyAxLCAyLCAzXSkudG8uaGF2ZS5sZW5ndGhPZigzKTtcbiAgICogICAgIGV4cGVjdCgnZm9vYmFyJykudG8uaGF2ZS5sZW5ndGhPZig2KTtcbiAgICpcbiAgICogQG5hbWUgbGVuZ3RoT2ZcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydExlbmd0aENoYWluICgpIHtcbiAgICBmbGFnKHRoaXMsICdkb0xlbmd0aCcsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gYXNzZXJ0TGVuZ3RoIChuLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gICAgdmFyIGxlbiA9IG9iai5sZW5ndGg7XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgbGVuID09IG5cbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSBhIGxlbmd0aCBvZiAje2V4cH0gYnV0IGdvdCAje2FjdH0nXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBoYXZlIGEgbGVuZ3RoIG9mICN7YWN0fSdcbiAgICAgICwgblxuICAgICAgLCBsZW5cbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnbGVuZ3RoJywgYXNzZXJ0TGVuZ3RoLCBhc3NlcnRMZW5ndGhDaGFpbik7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2xlbmd0aE9mJywgYXNzZXJ0TGVuZ3RoKTtcblxuICAvKipcbiAgICogIyMjIC5tYXRjaChyZWdleHApXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IG1hdGNoZXMgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAqXG4gICAqICAgICBleHBlY3QoJ2Zvb2JhcicpLnRvLm1hdGNoKC9eZm9vLyk7XG4gICAqXG4gICAqIEBuYW1lIG1hdGNoXG4gICAqIEBhbGlhcyBtYXRjaGVzXG4gICAqIEBwYXJhbSB7UmVnRXhwfSBSZWd1bGFyRXhwcmVzc2lvblxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuICBmdW5jdGlvbiBhc3NlcnRNYXRjaChyZSwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICByZS5leGVjKG9iailcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbWF0Y2ggJyArIHJlXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IG5vdCB0byBtYXRjaCAnICsgcmVcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnbWF0Y2gnLCBhc3NlcnRNYXRjaCk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ21hdGNoZXMnLCBhc3NlcnRNYXRjaCk7XG5cbiAgLyoqXG4gICAqICMjIyAuc3RyaW5nKHN0cmluZylcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSBzdHJpbmcgdGFyZ2V0IGNvbnRhaW5zIGFub3RoZXIgc3RyaW5nLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KCdmb29iYXInKS50by5oYXZlLnN0cmluZygnYmFyJyk7XG4gICAqXG4gICAqIEBuYW1lIHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnc3RyaW5nJywgZnVuY3Rpb24gKHN0ciwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIG9iaiA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLmlzLmEoJ3N0cmluZycpO1xuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIH5vYmouaW5kZXhPZihzdHIpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGNvbnRhaW4gJyArIF8uaW5zcGVjdChzdHIpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBjb250YWluICcgKyBfLmluc3BlY3Qoc3RyKVxuICAgICk7XG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqICMjIyAua2V5cyhrZXkxLCBba2V5Ml0sIFsuLi5dKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBjb250YWlucyBhbnkgb3IgYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cy5cbiAgICogVXNlIGluIGNvbWJpbmF0aW9uIHdpdGggYGFueWAsIGBhbGxgLCBgY29udGFpbnNgLCBvciBgaGF2ZWAgd2lsbCBhZmZlY3RcbiAgICogd2hhdCB3aWxsIHBhc3MuXG4gICAqXG4gICAqIFdoZW4gdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBhbnlgLCBhdCBsZWFzdCBvbmUga2V5IHRoYXQgaXMgcGFzc2VkXG4gICAqIGluIG11c3QgZXhpc3QgaW4gdGhlIHRhcmdldCBvYmplY3QuIFRoaXMgaXMgcmVnYXJkbGVzcyB3aGV0aGVyIG9yIG5vdFxuICAgKiB0aGUgYGhhdmVgIG9yIGBjb250YWluYCBxdWFsaWZpZXJzIGFyZSB1c2VkLiBOb3RlLCBlaXRoZXIgYGFueWAgb3IgYGFsbGBcbiAgICogc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGFzc2VydGlvbi4gSWYgbmVpdGhlciBhcmUgdXNlZCwgdGhlIGFzc2VydGlvbiBpc1xuICAgKiBkZWZhdWx0ZWQgdG8gYGFsbGAuXG4gICAqXG4gICAqIFdoZW4gYm90aCBgYWxsYCBhbmQgYGNvbnRhaW5gIGFyZSB1c2VkLCB0aGUgdGFyZ2V0IG9iamVjdCBtdXN0IGhhdmUgYXRcbiAgICogbGVhc3QgYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cyBidXQgbWF5IGhhdmUgbW9yZSBrZXlzIG5vdCBsaXN0ZWQuXG4gICAqXG4gICAqIFdoZW4gYm90aCBgYWxsYCBhbmQgYGhhdmVgIGFyZSB1c2VkLCB0aGUgdGFyZ2V0IG9iamVjdCBtdXN0IGJvdGggY29udGFpblxuICAgKiBhbGwgb2YgdGhlIHBhc3NlZC1pbiBrZXlzIEFORCB0aGUgbnVtYmVyIG9mIGtleXMgaW4gdGhlIHRhcmdldCBvYmplY3QgbXVzdFxuICAgKiBtYXRjaCB0aGUgbnVtYmVyIG9mIGtleXMgcGFzc2VkIGluIChpbiBvdGhlciB3b3JkcywgYSB0YXJnZXQgb2JqZWN0IG11c3RcbiAgICogaGF2ZSBhbGwgYW5kIG9ubHkgYWxsIG9mIHRoZSBwYXNzZWQtaW4ga2V5cykuXG4gICAqXG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFueS5rZXlzKCdmb28nLCAnYmF6Jyk7XG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFueS5rZXlzKCdmb28nKTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmNvbnRhaW4uYW55LmtleXMoJ2JhcicsICdiYXonKTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyIH0pLnRvLmNvbnRhaW4uYW55LmtleXMoWydmb28nXSk7XG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5jb250YWluLmFueS5rZXlzKHsnZm9vJzogNn0pO1xuICAgKiAgICAgZXhwZWN0KHsgZm9vOiAxLCBiYXI6IDIgfSkudG8uaGF2ZS5hbGwua2V5cyhbJ2JhcicsICdmb28nXSk7XG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiB9KS50by5oYXZlLmFsbC5rZXlzKHsnYmFyJzogNiwgJ2Zvbyc6IDd9KTtcbiAgICogICAgIGV4cGVjdCh7IGZvbzogMSwgYmFyOiAyLCBiYXo6IDMgfSkudG8uY29udGFpbi5hbGwua2V5cyhbJ2JhcicsICdmb28nXSk7XG4gICAqICAgICBleHBlY3QoeyBmb286IDEsIGJhcjogMiwgYmF6OiAzIH0pLnRvLmNvbnRhaW4uYWxsLmtleXMoeydiYXInOiA2fSk7XG4gICAqXG4gICAqXG4gICAqIEBuYW1lIGtleXNcbiAgICogQGFsaWFzIGtleVxuICAgKiBAcGFyYW0gey4uLlN0cmluZ3xBcnJheXxPYmplY3R9IGtleXNcbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0S2V5cyAoa2V5cykge1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuICAgICAgLCBzdHJcbiAgICAgICwgb2sgPSB0cnVlXG4gICAgICAsIG1peGVkQXJnc01zZyA9ICdrZXlzIG11c3QgYmUgZ2l2ZW4gc2luZ2xlIGFyZ3VtZW50IG9mIEFycmF5fE9iamVjdHxTdHJpbmcsIG9yIG11bHRpcGxlIFN0cmluZyBhcmd1bWVudHMnO1xuXG4gICAgc3dpdGNoIChfLnR5cGUoa2V5cykpIHtcbiAgICAgIGNhc2UgXCJhcnJheVwiOlxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHRocm93IChuZXcgRXJyb3IobWl4ZWRBcmdzTXNnKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHRocm93IChuZXcgRXJyb3IobWl4ZWRBcmdzTXNnKSk7XG4gICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhrZXlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBrZXlzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBpZiAoIWtleXMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ2tleXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBhY3R1YWwgPSBPYmplY3Qua2V5cyhvYmopXG4gICAgICAsIGV4cGVjdGVkID0ga2V5c1xuICAgICAgLCBsZW4gPSBrZXlzLmxlbmd0aFxuICAgICAgLCBhbnkgPSBmbGFnKHRoaXMsICdhbnknKVxuICAgICAgLCBhbGwgPSBmbGFnKHRoaXMsICdhbGwnKTtcblxuICAgIGlmICghYW55ICYmICFhbGwpIHtcbiAgICAgIGFsbCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gSGFzIGFueVxuICAgIGlmIChhbnkpIHtcbiAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSBleHBlY3RlZC5maWx0ZXIoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIHJldHVybiB+YWN0dWFsLmluZGV4T2Yoa2V5KTtcbiAgICAgIH0pO1xuICAgICAgb2sgPSBpbnRlcnNlY3Rpb24ubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICAvLyBIYXMgYWxsXG4gICAgaWYgKGFsbCkge1xuICAgICAgb2sgPSBrZXlzLmV2ZXJ5KGZ1bmN0aW9uKGtleSl7XG4gICAgICAgIHJldHVybiB+YWN0dWFsLmluZGV4T2Yoa2V5KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFmbGFnKHRoaXMsICduZWdhdGUnKSAmJiAhZmxhZyh0aGlzLCAnY29udGFpbnMnKSkge1xuICAgICAgICBvayA9IG9rICYmIGtleXMubGVuZ3RoID09IGFjdHVhbC5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gS2V5IHN0cmluZ1xuICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICBrZXlzID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgcmV0dXJuIF8uaW5zcGVjdChrZXkpO1xuICAgICAgfSk7XG4gICAgICB2YXIgbGFzdCA9IGtleXMucG9wKCk7XG4gICAgICBpZiAoYWxsKSB7XG4gICAgICAgIHN0ciA9IGtleXMuam9pbignLCAnKSArICcsIGFuZCAnICsgbGFzdDtcbiAgICAgIH1cbiAgICAgIGlmIChhbnkpIHtcbiAgICAgICAgc3RyID0ga2V5cy5qb2luKCcsICcpICsgJywgb3IgJyArIGxhc3Q7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IF8uaW5zcGVjdChrZXlzWzBdKTtcbiAgICB9XG5cbiAgICAvLyBGb3JtXG4gICAgc3RyID0gKGxlbiA+IDEgPyAna2V5cyAnIDogJ2tleSAnKSArIHN0cjtcblxuICAgIC8vIEhhdmUgLyBpbmNsdWRlXG4gICAgc3RyID0gKGZsYWcodGhpcywgJ2NvbnRhaW5zJykgPyAnY29udGFpbiAnIDogJ2hhdmUgJykgKyBzdHI7XG5cbiAgICAvLyBBc3NlcnRpb25cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgb2tcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gJyArIHN0clxuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgJyArIHN0clxuICAgICAgLCBleHBlY3RlZC5zbGljZSgwKS5zb3J0KClcbiAgICAgICwgYWN0dWFsLnNvcnQoKVxuICAgICAgLCB0cnVlXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2tleXMnLCBhc3NlcnRLZXlzKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgna2V5JywgYXNzZXJ0S2V5cyk7XG5cbiAgLyoqXG4gICAqICMjIyAudGhyb3coY29uc3RydWN0b3IpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgZnVuY3Rpb24gdGFyZ2V0IHdpbGwgdGhyb3cgYSBzcGVjaWZpYyBlcnJvciwgb3Igc3BlY2lmaWMgdHlwZSBvZiBlcnJvclxuICAgKiAoYXMgZGV0ZXJtaW5lZCB1c2luZyBgaW5zdGFuY2VvZmApLCBvcHRpb25hbGx5IHdpdGggYSBSZWdFeHAgb3Igc3RyaW5nIGluY2x1c2lvbiB0ZXN0XG4gICAqIGZvciB0aGUgZXJyb3IncyBtZXNzYWdlLlxuICAgKlxuICAgKiAgICAgdmFyIGVyciA9IG5ldyBSZWZlcmVuY2VFcnJvcignVGhpcyBpcyBhIGJhZCBmdW5jdGlvbi4nKTtcbiAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9XG4gICAqICAgICBleHBlY3QoZm4pLnRvLnRocm93KFJlZmVyZW5jZUVycm9yKTtcbiAgICogICAgIGV4cGVjdChmbikudG8udGhyb3coRXJyb3IpO1xuICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdygvYmFkIGZ1bmN0aW9uLyk7XG4gICAqICAgICBleHBlY3QoZm4pLnRvLm5vdC50aHJvdygnZ29vZCBmdW5jdGlvbicpO1xuICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdyhSZWZlcmVuY2VFcnJvciwgL2JhZCBmdW5jdGlvbi8pO1xuICAgKiAgICAgZXhwZWN0KGZuKS50by50aHJvdyhlcnIpO1xuICAgKlxuICAgKiBQbGVhc2Ugbm90ZSB0aGF0IHdoZW4gYSB0aHJvdyBleHBlY3RhdGlvbiBpcyBuZWdhdGVkLCBpdCB3aWxsIGNoZWNrIGVhY2hcbiAgICogcGFyYW1ldGVyIGluZGVwZW5kZW50bHksIHN0YXJ0aW5nIHdpdGggZXJyb3IgY29uc3RydWN0b3IgdHlwZS4gVGhlIGFwcHJvcHJpYXRlIHdheVxuICAgKiB0byBjaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZiBhIHR5cGUgb2YgZXJyb3IgYnV0IGZvciBhIG1lc3NhZ2UgdGhhdCBkb2VzIG5vdCBtYXRjaFxuICAgKiBpcyB0byB1c2UgYGFuZGAuXG4gICAqXG4gICAqICAgICBleHBlY3QoZm4pLnRvLnRocm93KFJlZmVyZW5jZUVycm9yKVxuICAgKiAgICAgICAgLmFuZC5ub3QudGhyb3coL2dvb2QgZnVuY3Rpb24vKTtcbiAgICpcbiAgICogQG5hbWUgdGhyb3dcbiAgICogQGFsaWFzIHRocm93c1xuICAgKiBAYWxpYXMgVGhyb3dcbiAgICogQHBhcmFtIHtFcnJvckNvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV4cGVjdGVkIGVycm9yIG1lc3NhZ2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0Vycm9yX3R5cGVzXG4gICAqIEByZXR1cm5zIGVycm9yIGZvciBjaGFpbmluZyAobnVsbCBpZiBubyBlcnJvcilcbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0VGhyb3dzIChjb25zdHJ1Y3RvciwgZXJyTXNnLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykuaXMuYSgnZnVuY3Rpb24nKTtcblxuICAgIHZhciB0aHJvd24gPSBmYWxzZVxuICAgICAgLCBkZXNpcmVkRXJyb3IgPSBudWxsXG4gICAgICAsIG5hbWUgPSBudWxsXG4gICAgICAsIHRocm93bkVycm9yID0gbnVsbDtcblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBlcnJNc2cgPSBudWxsO1xuICAgICAgY29uc3RydWN0b3IgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAoY29uc3RydWN0b3IgJiYgKGNvbnN0cnVjdG9yIGluc3RhbmNlb2YgUmVnRXhwIHx8ICdzdHJpbmcnID09PSB0eXBlb2YgY29uc3RydWN0b3IpKSB7XG4gICAgICBlcnJNc2cgPSBjb25zdHJ1Y3RvcjtcbiAgICAgIGNvbnN0cnVjdG9yID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGRlc2lyZWRFcnJvciA9IGNvbnN0cnVjdG9yO1xuICAgICAgY29uc3RydWN0b3IgPSBudWxsO1xuICAgICAgZXJyTXNnID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgbmFtZSA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZS5uYW1lO1xuICAgICAgaWYgKCFuYW1lIHx8IChuYW1lID09PSAnRXJyb3InICYmIGNvbnN0cnVjdG9yICE9PSBFcnJvcikpIHtcbiAgICAgICAgbmFtZSA9IGNvbnN0cnVjdG9yLm5hbWUgfHwgKG5ldyBjb25zdHJ1Y3RvcigpKS5uYW1lO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdHJ1Y3RvciA9IG51bGw7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIG9iaigpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gZmlyc3QsIGNoZWNrIGRlc2lyZWQgZXJyb3JcbiAgICAgIGlmIChkZXNpcmVkRXJyb3IpIHtcbiAgICAgICAgdGhpcy5hc3NlcnQoXG4gICAgICAgICAgICBlcnIgPT09IGRlc2lyZWRFcnJvclxuICAgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gdGhyb3cgI3tleHB9IGJ1dCAje2FjdH0gd2FzIHRocm93bidcbiAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCB0aHJvdyAje2V4cH0nXG4gICAgICAgICAgLCAoZGVzaXJlZEVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBkZXNpcmVkRXJyb3IudG9TdHJpbmcoKSA6IGRlc2lyZWRFcnJvcilcbiAgICAgICAgICAsIChlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci50b1N0cmluZygpIDogZXJyKVxuICAgICAgICApO1xuXG4gICAgICAgIGZsYWcodGhpcywgJ29iamVjdCcsIGVycik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBuZXh0LCBjaGVjayBjb25zdHJ1Y3RvclxuICAgICAgaWYgKGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgICAgZXJyIGluc3RhbmNlb2YgY29uc3RydWN0b3JcbiAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93ICN7ZXhwfSBidXQgI3thY3R9IHdhcyB0aHJvd24nXG4gICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgdGhyb3cgI3tleHB9IGJ1dCAje2FjdH0gd2FzIHRocm93bidcbiAgICAgICAgICAsIG5hbWVcbiAgICAgICAgICAsIChlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci50b1N0cmluZygpIDogZXJyKVxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghZXJyTXNnKSB7XG4gICAgICAgICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgZXJyKTtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBuZXh0LCBjaGVjayBtZXNzYWdlXG4gICAgICB2YXIgbWVzc2FnZSA9ICdlcnJvcicgPT09IF8udHlwZShlcnIpICYmIFwibWVzc2FnZVwiIGluIGVyclxuICAgICAgICA/IGVyci5tZXNzYWdlXG4gICAgICAgIDogJycgKyBlcnI7XG5cbiAgICAgIGlmICgobWVzc2FnZSAhPSBudWxsKSAmJiBlcnJNc2cgJiYgZXJyTXNnIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgICAgZXJyTXNnLmV4ZWMobWVzc2FnZSlcbiAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93IGVycm9yIG1hdGNoaW5nICN7ZXhwfSBidXQgZ290ICN7YWN0fSdcbiAgICAgICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIHRocm93IGVycm9yIG5vdCBtYXRjaGluZyAje2V4cH0nXG4gICAgICAgICAgLCBlcnJNc2dcbiAgICAgICAgICAsIG1lc3NhZ2VcbiAgICAgICAgKTtcblxuICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnLCBlcnIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSBpZiAoKG1lc3NhZ2UgIT0gbnVsbCkgJiYgZXJyTXNnICYmICdzdHJpbmcnID09PSB0eXBlb2YgZXJyTXNnKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICAgICAgfm1lc3NhZ2UuaW5kZXhPZihlcnJNc2cpXG4gICAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byB0aHJvdyBlcnJvciBpbmNsdWRpbmcgI3tleHB9IGJ1dCBnb3QgI3thY3R9J1xuICAgICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gdGhyb3cgZXJyb3Igbm90IGluY2x1ZGluZyAje2FjdH0nXG4gICAgICAgICAgLCBlcnJNc2dcbiAgICAgICAgICAsIG1lc3NhZ2VcbiAgICAgICAgKTtcblxuICAgICAgICBmbGFnKHRoaXMsICdvYmplY3QnLCBlcnIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93biA9IHRydWU7XG4gICAgICAgIHRocm93bkVycm9yID0gZXJyO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBhY3R1YWxseUdvdCA9ICcnXG4gICAgICAsIGV4cGVjdGVkVGhyb3duID0gbmFtZSAhPT0gbnVsbFxuICAgICAgICA/IG5hbWVcbiAgICAgICAgOiBkZXNpcmVkRXJyb3JcbiAgICAgICAgICA/ICcje2V4cH0nIC8vXy5pbnNwZWN0KGRlc2lyZWRFcnJvcilcbiAgICAgICAgICA6ICdhbiBlcnJvcic7XG5cbiAgICBpZiAodGhyb3duKSB7XG4gICAgICBhY3R1YWxseUdvdCA9ICcgYnV0ICN7YWN0fSB3YXMgdGhyb3duJ1xuICAgIH1cblxuICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICB0aHJvd24gPT09IHRydWVcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gdGhyb3cgJyArIGV4cGVjdGVkVGhyb3duICsgYWN0dWFsbHlHb3RcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IHRocm93ICcgKyBleHBlY3RlZFRocm93biArIGFjdHVhbGx5R290XG4gICAgICAsIChkZXNpcmVkRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGRlc2lyZWRFcnJvci50b1N0cmluZygpIDogZGVzaXJlZEVycm9yKVxuICAgICAgLCAodGhyb3duRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHRocm93bkVycm9yLnRvU3RyaW5nKCkgOiB0aHJvd25FcnJvcilcbiAgICApO1xuXG4gICAgZmxhZyh0aGlzLCAnb2JqZWN0JywgdGhyb3duRXJyb3IpO1xuICB9O1xuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Rocm93JywgYXNzZXJ0VGhyb3dzKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgndGhyb3dzJywgYXNzZXJ0VGhyb3dzKTtcbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnVGhyb3cnLCBhc3NlcnRUaHJvd3MpO1xuXG4gIC8qKlxuICAgKiAjIyMgLnJlc3BvbmRUbyhtZXRob2QpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgb2JqZWN0IG9yIGNsYXNzIHRhcmdldCB3aWxsIHJlc3BvbmQgdG8gYSBtZXRob2QuXG4gICAqXG4gICAqICAgICBLbGFzcy5wcm90b3R5cGUuYmFyID0gZnVuY3Rpb24oKXt9O1xuICAgKiAgICAgZXhwZWN0KEtsYXNzKS50by5yZXNwb25kVG8oJ2JhcicpO1xuICAgKiAgICAgZXhwZWN0KG9iaikudG8ucmVzcG9uZFRvKCdiYXInKTtcbiAgICpcbiAgICogVG8gY2hlY2sgaWYgYSBjb25zdHJ1Y3RvciB3aWxsIHJlc3BvbmQgdG8gYSBzdGF0aWMgZnVuY3Rpb24sXG4gICAqIHNldCB0aGUgYGl0c2VsZmAgZmxhZy5cbiAgICpcbiAgICogICAgIEtsYXNzLmJheiA9IGZ1bmN0aW9uKCl7fTtcbiAgICogICAgIGV4cGVjdChLbGFzcykuaXRzZWxmLnRvLnJlc3BvbmRUbygnYmF6Jyk7XG4gICAqXG4gICAqIEBuYW1lIHJlc3BvbmRUb1xuICAgKiBAYWxpYXMgcmVzcG9uZHNUb1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gcmVzcG9uZFRvIChtZXRob2QsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKVxuICAgICAgLCBpdHNlbGYgPSBmbGFnKHRoaXMsICdpdHNlbGYnKVxuICAgICAgLCBjb250ZXh0ID0gKCdmdW5jdGlvbicgPT09IF8udHlwZShvYmopICYmICFpdHNlbGYpXG4gICAgICAgID8gb2JqLnByb3RvdHlwZVttZXRob2RdXG4gICAgICAgIDogb2JqW21ldGhvZF07XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGNvbnRleHRcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gcmVzcG9uZCB0byAnICsgXy5pbnNwZWN0KG1ldGhvZClcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IHJlc3BvbmQgdG8gJyArIF8uaW5zcGVjdChtZXRob2QpXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Jlc3BvbmRUbycsIHJlc3BvbmRUbyk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ3Jlc3BvbmRzVG8nLCByZXNwb25kVG8pO1xuXG4gIC8qKlxuICAgKiAjIyMgLml0c2VsZlxuICAgKlxuICAgKiBTZXRzIHRoZSBgaXRzZWxmYCBmbGFnLCBsYXRlciB1c2VkIGJ5IHRoZSBgcmVzcG9uZFRvYCBhc3NlcnRpb24uXG4gICAqXG4gICAqICAgICBmdW5jdGlvbiBGb28oKSB7fVxuICAgKiAgICAgRm9vLmJhciA9IGZ1bmN0aW9uKCkge31cbiAgICogICAgIEZvby5wcm90b3R5cGUuYmF6ID0gZnVuY3Rpb24oKSB7fVxuICAgKlxuICAgKiAgICAgZXhwZWN0KEZvbykuaXRzZWxmLnRvLnJlc3BvbmRUbygnYmFyJyk7XG4gICAqICAgICBleHBlY3QoRm9vKS5pdHNlbGYubm90LnRvLnJlc3BvbmRUbygnYmF6Jyk7XG4gICAqXG4gICAqIEBuYW1lIGl0c2VsZlxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2l0c2VsZicsIGZ1bmN0aW9uICgpIHtcbiAgICBmbGFnKHRoaXMsICdpdHNlbGYnLCB0cnVlKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuc2F0aXNmeShtZXRob2QpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IHBhc3NlcyBhIGdpdmVuIHRydXRoIHRlc3QuXG4gICAqXG4gICAqICAgICBleHBlY3QoMSkudG8uc2F0aXNmeShmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSA+IDA7IH0pO1xuICAgKlxuICAgKiBAbmFtZSBzYXRpc2Z5XG4gICAqIEBhbGlhcyBzYXRpc2ZpZXNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbWF0Y2hlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNhdGlzZnkgKG1hdGNoZXIsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICB2YXIgcmVzdWx0ID0gbWF0Y2hlcihvYmopO1xuICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgICByZXN1bHRcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gc2F0aXNmeSAnICsgXy5vYmpEaXNwbGF5KG1hdGNoZXIpXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBzYXRpc2Z5JyArIF8ub2JqRGlzcGxheShtYXRjaGVyKVxuICAgICAgLCB0aGlzLm5lZ2F0ZSA/IGZhbHNlIDogdHJ1ZVxuICAgICAgLCByZXN1bHRcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZE1ldGhvZCgnc2F0aXNmeScsIHNhdGlzZnkpO1xuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdzYXRpc2ZpZXMnLCBzYXRpc2Z5KTtcblxuICAvKipcbiAgICogIyMjIC5jbG9zZVRvKGV4cGVjdGVkLCBkZWx0YSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZXF1YWwgYGV4cGVjdGVkYCwgdG8gd2l0aGluIGEgKy8tIGBkZWx0YWAgcmFuZ2UuXG4gICAqXG4gICAqICAgICBleHBlY3QoMS41KS50by5iZS5jbG9zZVRvKDEsIDAuNSk7XG4gICAqXG4gICAqIEBuYW1lIGNsb3NlVG9cbiAgICogQGFsaWFzIGFwcHJveGltYXRlbHlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGV4cGVjdGVkXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWx0YVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNsb3NlVG8oZXhwZWN0ZWQsIGRlbHRhLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cbiAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS5pcy5hKCdudW1iZXInKTtcbiAgICBpZiAoXy50eXBlKGV4cGVjdGVkKSAhPT0gJ251bWJlcicgfHwgXy50eXBlKGRlbHRhKSAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndGhlIGFyZ3VtZW50cyB0byBjbG9zZVRvIG9yIGFwcHJveGltYXRlbHkgbXVzdCBiZSBudW1iZXJzJyk7XG4gICAgfVxuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICAgIE1hdGguYWJzKG9iaiAtIGV4cGVjdGVkKSA8PSBkZWx0YVxuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBjbG9zZSB0byAnICsgZXhwZWN0ZWQgKyAnICsvLSAnICsgZGVsdGFcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gbm90IHRvIGJlIGNsb3NlIHRvICcgKyBleHBlY3RlZCArICcgKy8tICcgKyBkZWx0YVxuICAgICk7XG4gIH1cblxuICBBc3NlcnRpb24uYWRkTWV0aG9kKCdjbG9zZVRvJywgY2xvc2VUbyk7XG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ2FwcHJveGltYXRlbHknLCBjbG9zZVRvKTtcblxuICBmdW5jdGlvbiBpc1N1YnNldE9mKHN1YnNldCwgc3VwZXJzZXQsIGNtcCkge1xuICAgIHJldHVybiBzdWJzZXQuZXZlcnkoZnVuY3Rpb24oZWxlbSkge1xuICAgICAgaWYgKCFjbXApIHJldHVybiBzdXBlcnNldC5pbmRleE9mKGVsZW0pICE9PSAtMTtcblxuICAgICAgcmV0dXJuIHN1cGVyc2V0LnNvbWUoZnVuY3Rpb24oZWxlbTIpIHtcbiAgICAgICAgcmV0dXJuIGNtcChlbGVtLCBlbGVtMik7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqICMjIyAubWVtYmVycyhzZXQpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGEgc3VwZXJzZXQgb2YgYHNldGAsXG4gICAqIG9yIHRoYXQgdGhlIHRhcmdldCBhbmQgYHNldGAgaGF2ZSB0aGUgc2FtZSBzdHJpY3RseS1lcXVhbCAoPT09KSBtZW1iZXJzLlxuICAgKiBBbHRlcm5hdGVseSwgaWYgdGhlIGBkZWVwYCBmbGFnIGlzIHNldCwgc2V0IG1lbWJlcnMgYXJlIGNvbXBhcmVkIGZvciBkZWVwXG4gICAqIGVxdWFsaXR5LlxuICAgKlxuICAgKiAgICAgZXhwZWN0KFsxLCAyLCAzXSkudG8uaW5jbHVkZS5tZW1iZXJzKFszLCAyXSk7XG4gICAqICAgICBleHBlY3QoWzEsIDIsIDNdKS50by5ub3QuaW5jbHVkZS5tZW1iZXJzKFszLCAyLCA4XSk7XG4gICAqXG4gICAqICAgICBleHBlY3QoWzQsIDJdKS50by5oYXZlLm1lbWJlcnMoWzIsIDRdKTtcbiAgICogICAgIGV4cGVjdChbNSwgMl0pLnRvLm5vdC5oYXZlLm1lbWJlcnMoWzUsIDIsIDFdKTtcbiAgICpcbiAgICogICAgIGV4cGVjdChbeyBpZDogMSB9XSkudG8uZGVlcC5pbmNsdWRlLm1lbWJlcnMoW3sgaWQ6IDEgfV0pO1xuICAgKlxuICAgKiBAbmFtZSBtZW1iZXJzXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNldFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ21lbWJlcnMnLCBmdW5jdGlvbiAoc3Vic2V0LCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cbiAgICBuZXcgQXNzZXJ0aW9uKG9iaikudG8uYmUuYW4oJ2FycmF5Jyk7XG4gICAgbmV3IEFzc2VydGlvbihzdWJzZXQpLnRvLmJlLmFuKCdhcnJheScpO1xuXG4gICAgdmFyIGNtcCA9IGZsYWcodGhpcywgJ2RlZXAnKSA/IF8uZXFsIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGZsYWcodGhpcywgJ2NvbnRhaW5zJykpIHtcbiAgICAgIHJldHVybiB0aGlzLmFzc2VydChcbiAgICAgICAgICBpc1N1YnNldE9mKHN1YnNldCwgb2JqLCBjbXApXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgYSBzdXBlcnNldCBvZiAje2FjdH0nXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGEgc3VwZXJzZXQgb2YgI3thY3R9J1xuICAgICAgICAsIG9ialxuICAgICAgICAsIHN1YnNldFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgaXNTdWJzZXRPZihvYmosIHN1YnNldCwgY21wKSAmJiBpc1N1YnNldE9mKHN1YnNldCwgb2JqLCBjbXApXG4gICAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gaGF2ZSB0aGUgc2FtZSBtZW1iZXJzIGFzICN7YWN0fSdcbiAgICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgaGF2ZSB0aGUgc2FtZSBtZW1iZXJzIGFzICN7YWN0fSdcbiAgICAgICAgLCBvYmpcbiAgICAgICAgLCBzdWJzZXRcbiAgICApO1xuICB9KTtcblxuICAvKipcbiAgICogIyMjIC5vbmVPZihsaXN0KVxuICAgKlxuICAgKiBBc3NlcnQgdGhhdCBhIHZhbHVlIGFwcGVhcnMgc29tZXdoZXJlIGluIHRoZSB0b3AgbGV2ZWwgb2YgYXJyYXkgYGxpc3RgLlxuICAgKlxuICAgKiAgICAgZXhwZWN0KCdhJykudG8uYmUub25lT2YoWydhJywgJ2InLCAnYyddKTtcbiAgICogICAgIGV4cGVjdCg5KS50by5ub3QuYmUub25lT2YoWyd6J10pO1xuICAgKiAgICAgZXhwZWN0KFszXSkudG8ubm90LmJlLm9uZU9mKFsxLCAyLCBbM11dKTtcbiAgICpcbiAgICogICAgIHZhciB0aHJlZSA9IFszXTtcbiAgICogICAgIC8vIGZvciBvYmplY3QtdHlwZXMsIGNvbnRlbnRzIGFyZSBub3QgY29tcGFyZWRcbiAgICogICAgIGV4cGVjdCh0aHJlZSkudG8ubm90LmJlLm9uZU9mKFsxLCAyLCBbM11dKTtcbiAgICogICAgIC8vIGNvbXBhcmluZyByZWZlcmVuY2VzIHdvcmtzXG4gICAqICAgICBleHBlY3QodGhyZWUpLnRvLmJlLm9uZU9mKFsxLCAyLCB0aHJlZV0pO1xuICAgKlxuICAgKiBAbmFtZSBvbmVPZlxuICAgKiBAcGFyYW0ge0FycmF5PCo+fSBsaXN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBCRERcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgZnVuY3Rpb24gb25lT2YgKGxpc3QsIG1zZykge1xuICAgIGlmIChtc2cpIGZsYWcodGhpcywgJ21lc3NhZ2UnLCBtc2cpO1xuICAgIHZhciBleHBlY3RlZCA9IGZsYWcodGhpcywgJ29iamVjdCcpO1xuICAgIG5ldyBBc3NlcnRpb24obGlzdCkudG8uYmUuYW4oJ2FycmF5Jyk7XG5cbiAgICB0aGlzLmFzc2VydChcbiAgICAgICAgbGlzdC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIGJlIG9uZSBvZiAje2V4cH0nXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBiZSBvbmUgb2YgI3tleHB9J1xuICAgICAgLCBsaXN0XG4gICAgICAsIGV4cGVjdGVkXG4gICAgKTtcbiAgfVxuXG4gIEFzc2VydGlvbi5hZGRNZXRob2QoJ29uZU9mJywgb25lT2YpO1xuXG5cbiAgLyoqXG4gICAqICMjIyAuY2hhbmdlKGZ1bmN0aW9uKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYSBmdW5jdGlvbiBjaGFuZ2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuICAgKlxuICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgKz0gMyB9O1xuICAgKiAgICAgdmFyIG5vQ2hhbmdlRm4gPSBmdW5jdGlvbigpIHsgcmV0dXJuICdmb28nICsgJ2Jhcic7IH1cbiAgICogICAgIGV4cGVjdChmbikudG8uY2hhbmdlKG9iaiwgJ3ZhbCcpO1xuICAgKiAgICAgZXhwZWN0KG5vQ2hhbmdlRm4pLnRvLm5vdC5jaGFuZ2Uob2JqLCAndmFsJylcbiAgICpcbiAgICogQG5hbWUgY2hhbmdlXG4gICAqIEBhbGlhcyBjaGFuZ2VzXG4gICAqIEBhbGlhcyBDaGFuZ2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydENoYW5nZXMgKG9iamVjdCwgcHJvcCwgbXNnKSB7XG4gICAgaWYgKG1zZykgZmxhZyh0aGlzLCAnbWVzc2FnZScsIG1zZyk7XG4gICAgdmFyIGZuID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG4gICAgbmV3IEFzc2VydGlvbihvYmplY3QsIG1zZykudG8uaGF2ZS5wcm9wZXJ0eShwcm9wKTtcbiAgICBuZXcgQXNzZXJ0aW9uKGZuKS5pcy5hKCdmdW5jdGlvbicpO1xuXG4gICAgdmFyIGluaXRpYWwgPSBvYmplY3RbcHJvcF07XG4gICAgZm4oKTtcblxuICAgIHRoaXMuYXNzZXJ0KFxuICAgICAgaW5pdGlhbCAhPT0gb2JqZWN0W3Byb3BdXG4gICAgICAsICdleHBlY3RlZCAuJyArIHByb3AgKyAnIHRvIGNoYW5nZSdcbiAgICAgICwgJ2V4cGVjdGVkIC4nICsgcHJvcCArICcgdG8gbm90IGNoYW5nZSdcbiAgICApO1xuICB9XG5cbiAgQXNzZXJ0aW9uLmFkZENoYWluYWJsZU1ldGhvZCgnY2hhbmdlJywgYXNzZXJ0Q2hhbmdlcyk7XG4gIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2NoYW5nZXMnLCBhc3NlcnRDaGFuZ2VzKTtcblxuICAvKipcbiAgICogIyMjIC5pbmNyZWFzZShmdW5jdGlvbilcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gaW5jcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuICAgKlxuICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSAxNSB9O1xuICAgKiAgICAgZXhwZWN0KGZuKS50by5pbmNyZWFzZShvYmosICd2YWwnKTtcbiAgICpcbiAgICogQG5hbWUgaW5jcmVhc2VcbiAgICogQGFsaWFzIGluY3JlYXNlc1xuICAgKiBAYWxpYXMgSW5jcmVhc2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydEluY3JlYXNlcyAob2JqZWN0LCBwcm9wLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgZm4gPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICBuZXcgQXNzZXJ0aW9uKG9iamVjdCwgbXNnKS50by5oYXZlLnByb3BlcnR5KHByb3ApO1xuICAgIG5ldyBBc3NlcnRpb24oZm4pLmlzLmEoJ2Z1bmN0aW9uJyk7XG5cbiAgICB2YXIgaW5pdGlhbCA9IG9iamVjdFtwcm9wXTtcbiAgICBmbigpO1xuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICBvYmplY3RbcHJvcF0gLSBpbml0aWFsID4gMFxuICAgICAgLCAnZXhwZWN0ZWQgLicgKyBwcm9wICsgJyB0byBpbmNyZWFzZSdcbiAgICAgICwgJ2V4cGVjdGVkIC4nICsgcHJvcCArICcgdG8gbm90IGluY3JlYXNlJ1xuICAgICk7XG4gIH1cblxuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdpbmNyZWFzZScsIGFzc2VydEluY3JlYXNlcyk7XG4gIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2luY3JlYXNlcycsIGFzc2VydEluY3JlYXNlcyk7XG5cbiAgLyoqXG4gICAqICMjIyAuZGVjcmVhc2UoZnVuY3Rpb24pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGRlY3JlYXNlcyBhbiBvYmplY3QgcHJvcGVydHlcbiAgICpcbiAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcbiAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBvYmoudmFsID0gNSB9O1xuICAgKiAgICAgZXhwZWN0KGZuKS50by5kZWNyZWFzZShvYmosICd2YWwnKTtcbiAgICpcbiAgICogQG5hbWUgZGVjcmVhc2VcbiAgICogQGFsaWFzIGRlY3JlYXNlc1xuICAgKiBAYWxpYXMgRGVjcmVhc2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQkREXG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2VydERlY3JlYXNlcyAob2JqZWN0LCBwcm9wLCBtc2cpIHtcbiAgICBpZiAobXNnKSBmbGFnKHRoaXMsICdtZXNzYWdlJywgbXNnKTtcbiAgICB2YXIgZm4gPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcbiAgICBuZXcgQXNzZXJ0aW9uKG9iamVjdCwgbXNnKS50by5oYXZlLnByb3BlcnR5KHByb3ApO1xuICAgIG5ldyBBc3NlcnRpb24oZm4pLmlzLmEoJ2Z1bmN0aW9uJyk7XG5cbiAgICB2YXIgaW5pdGlhbCA9IG9iamVjdFtwcm9wXTtcbiAgICBmbigpO1xuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICBvYmplY3RbcHJvcF0gLSBpbml0aWFsIDwgMFxuICAgICAgLCAnZXhwZWN0ZWQgLicgKyBwcm9wICsgJyB0byBkZWNyZWFzZSdcbiAgICAgICwgJ2V4cGVjdGVkIC4nICsgcHJvcCArICcgdG8gbm90IGRlY3JlYXNlJ1xuICAgICk7XG4gIH1cblxuICBBc3NlcnRpb24uYWRkQ2hhaW5hYmxlTWV0aG9kKCdkZWNyZWFzZScsIGFzc2VydERlY3JlYXNlcyk7XG4gIEFzc2VydGlvbi5hZGRDaGFpbmFibGVNZXRob2QoJ2RlY3JlYXNlcycsIGFzc2VydERlY3JlYXNlcyk7XG5cbiAgLyoqXG4gICAqICMjIyAuZXh0ZW5zaWJsZVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBleHRlbnNpYmxlIChjYW4gaGF2ZSBuZXcgcHJvcGVydGllcyBhZGRlZCB0b1xuICAgKiBpdCkuXG4gICAqXG4gICAqICAgICB2YXIgbm9uRXh0ZW5zaWJsZU9iamVjdCA9IE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSk7XG4gICAqICAgICB2YXIgc2VhbGVkT2JqZWN0ID0gT2JqZWN0LnNlYWwoe30pO1xuICAgKiAgICAgdmFyIGZyb3plbk9iamVjdCA9IE9iamVjdC5mcmVlemUoe30pO1xuICAgKlxuICAgKiAgICAgZXhwZWN0KHt9KS50by5iZS5leHRlbnNpYmxlO1xuICAgKiAgICAgZXhwZWN0KG5vbkV4dGVuc2libGVPYmplY3QpLnRvLm5vdC5iZS5leHRlbnNpYmxlO1xuICAgKiAgICAgZXhwZWN0KHNlYWxlZE9iamVjdCkudG8ubm90LmJlLmV4dGVuc2libGU7XG4gICAqICAgICBleHBlY3QoZnJvemVuT2JqZWN0KS50by5ub3QuYmUuZXh0ZW5zaWJsZTtcbiAgICpcbiAgICogQG5hbWUgZXh0ZW5zaWJsZVxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2V4dGVuc2libGUnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgb2JqID0gZmxhZyh0aGlzLCAnb2JqZWN0Jyk7XG5cbiAgICAvLyBJbiBFUzUsIGlmIHRoZSBhcmd1bWVudCB0byB0aGlzIG1ldGhvZCBpcyBub3QgYW4gb2JqZWN0IChhIHByaW1pdGl2ZSksIHRoZW4gaXQgd2lsbCBjYXVzZSBhIFR5cGVFcnJvci5cbiAgICAvLyBJbiBFUzYsIGEgbm9uLW9iamVjdCBhcmd1bWVudCB3aWxsIGJlIHRyZWF0ZWQgYXMgaWYgaXQgd2FzIGEgbm9uLWV4dGVuc2libGUgb3JkaW5hcnkgb2JqZWN0LCBzaW1wbHkgcmV0dXJuIGZhbHNlLlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc0V4dGVuc2libGVcbiAgICAvLyBUaGUgZm9sbG93aW5nIHByb3ZpZGVzIEVTNiBiZWhhdmlvciB3aGVuIGEgVHlwZUVycm9yIGlzIHRocm93biB1bmRlciBFUzUuXG5cbiAgICB2YXIgaXNFeHRlbnNpYmxlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGUob2JqKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBUeXBlRXJyb3IpIGlzRXh0ZW5zaWJsZSA9IGZhbHNlO1xuICAgICAgZWxzZSB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICBpc0V4dGVuc2libGVcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gYmUgZXh0ZW5zaWJsZSdcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGJlIGV4dGVuc2libGUnXG4gICAgKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuc2VhbGVkXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIHNlYWxlZCAoY2Fubm90IGhhdmUgbmV3IHByb3BlcnRpZXMgYWRkZWQgdG8gaXRcbiAgICogYW5kIGl0cyBleGlzdGluZyBwcm9wZXJ0aWVzIGNhbm5vdCBiZSByZW1vdmVkKS5cbiAgICpcbiAgICogICAgIHZhciBzZWFsZWRPYmplY3QgPSBPYmplY3Quc2VhbCh7fSk7XG4gICAqICAgICB2YXIgZnJvemVuT2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG4gICAqXG4gICAqICAgICBleHBlY3Qoc2VhbGVkT2JqZWN0KS50by5iZS5zZWFsZWQ7XG4gICAqICAgICBleHBlY3QoZnJvemVuT2JqZWN0KS50by5iZS5zZWFsZWQ7XG4gICAqICAgICBleHBlY3Qoe30pLnRvLm5vdC5iZS5zZWFsZWQ7XG4gICAqXG4gICAqIEBuYW1lIHNlYWxlZFxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ3NlYWxlZCcsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblxuICAgIC8vIEluIEVTNSwgaWYgdGhlIGFyZ3VtZW50IHRvIHRoaXMgbWV0aG9kIGlzIG5vdCBhbiBvYmplY3QgKGEgcHJpbWl0aXZlKSwgdGhlbiBpdCB3aWxsIGNhdXNlIGEgVHlwZUVycm9yLlxuICAgIC8vIEluIEVTNiwgYSBub24tb2JqZWN0IGFyZ3VtZW50IHdpbGwgYmUgdHJlYXRlZCBhcyBpZiBpdCB3YXMgYSBzZWFsZWQgb3JkaW5hcnkgb2JqZWN0LCBzaW1wbHkgcmV0dXJuIHRydWUuXG4gICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1NlYWxlZFxuICAgIC8vIFRoZSBmb2xsb3dpbmcgcHJvdmlkZXMgRVM2IGJlaGF2aW9yIHdoZW4gYSBUeXBlRXJyb3IgaXMgdGhyb3duIHVuZGVyIEVTNS5cblxuICAgIHZhciBpc1NlYWxlZDtcblxuICAgIHRyeSB7XG4gICAgICBpc1NlYWxlZCA9IE9iamVjdC5pc1NlYWxlZChvYmopO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikgaXNTZWFsZWQgPSB0cnVlO1xuICAgICAgZWxzZSB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICBpc1NlYWxlZFxuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBzZWFsZWQnXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBiZSBzZWFsZWQnXG4gICAgKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqICMjIyAuZnJvemVuXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCB0aGUgdGFyZ2V0IGlzIGZyb3plbiAoY2Fubm90IGhhdmUgbmV3IHByb3BlcnRpZXMgYWRkZWQgdG8gaXRcbiAgICogYW5kIGl0cyBleGlzdGluZyBwcm9wZXJ0aWVzIGNhbm5vdCBiZSBtb2RpZmllZCkuXG4gICAqXG4gICAqICAgICB2YXIgZnJvemVuT2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG4gICAqXG4gICAqICAgICBleHBlY3QoZnJvemVuT2JqZWN0KS50by5iZS5mcm96ZW47XG4gICAqICAgICBleHBlY3Qoe30pLnRvLm5vdC5iZS5mcm96ZW47XG4gICAqXG4gICAqIEBuYW1lIGZyb3plblxuICAgKiBAbmFtZXNwYWNlIEJERFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBBc3NlcnRpb24uYWRkUHJvcGVydHkoJ2Zyb3plbicsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvYmogPSBmbGFnKHRoaXMsICdvYmplY3QnKTtcblxuICAgIC8vIEluIEVTNSwgaWYgdGhlIGFyZ3VtZW50IHRvIHRoaXMgbWV0aG9kIGlzIG5vdCBhbiBvYmplY3QgKGEgcHJpbWl0aXZlKSwgdGhlbiBpdCB3aWxsIGNhdXNlIGEgVHlwZUVycm9yLlxuICAgIC8vIEluIEVTNiwgYSBub24tb2JqZWN0IGFyZ3VtZW50IHdpbGwgYmUgdHJlYXRlZCBhcyBpZiBpdCB3YXMgYSBmcm96ZW4gb3JkaW5hcnkgb2JqZWN0LCBzaW1wbHkgcmV0dXJuIHRydWUuXG4gICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc0Zyb3plblxuICAgIC8vIFRoZSBmb2xsb3dpbmcgcHJvdmlkZXMgRVM2IGJlaGF2aW9yIHdoZW4gYSBUeXBlRXJyb3IgaXMgdGhyb3duIHVuZGVyIEVTNS5cblxuICAgIHZhciBpc0Zyb3plbjtcblxuICAgIHRyeSB7XG4gICAgICBpc0Zyb3plbiA9IE9iamVjdC5pc0Zyb3plbihvYmopO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikgaXNGcm96ZW4gPSB0cnVlO1xuICAgICAgZWxzZSB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgdGhpcy5hc3NlcnQoXG4gICAgICBpc0Zyb3plblxuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBiZSBmcm96ZW4nXG4gICAgICAsICdleHBlY3RlZCAje3RoaXN9IHRvIG5vdCBiZSBmcm96ZW4nXG4gICAgKTtcbiAgfSk7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS9jb3JlL2Fzc2VydGlvbnMuanNcbiAqKiBtb2R1bGUgaWQgPSA5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBjaGFpXG4gKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2hhaSwgdXRpbCkge1xuICBjaGFpLmV4cGVjdCA9IGZ1bmN0aW9uICh2YWwsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gbmV3IGNoYWkuQXNzZXJ0aW9uKHZhbCwgbWVzc2FnZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0sIFtvcGVyYXRvcl0pXG4gICAqXG4gICAqIFRocm93IGEgZmFpbHVyZS5cbiAgICpcbiAgICogQG5hbWUgZmFpbFxuICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9wZXJhdG9yXG4gICAqIEBuYW1lc3BhY2UgRXhwZWN0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGNoYWkuZXhwZWN0LmZhaWwgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgb3BlcmF0b3IpIHtcbiAgICBtZXNzYWdlID0gbWVzc2FnZSB8fCAnZXhwZWN0LmZhaWwoKSc7XG4gICAgdGhyb3cgbmV3IGNoYWkuQXNzZXJ0aW9uRXJyb3IobWVzc2FnZSwge1xuICAgICAgICBhY3R1YWw6IGFjdHVhbFxuICAgICAgLCBleHBlY3RlZDogZXhwZWN0ZWRcbiAgICAgICwgb3BlcmF0b3I6IG9wZXJhdG9yXG4gICAgfSwgY2hhaS5leHBlY3QuZmFpbCk7XG4gIH07XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS9pbnRlcmZhY2UvZXhwZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gOTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogY2hhaVxuICogQ29weXJpZ2h0KGMpIDIwMTEtMjAxNCBKYWtlIEx1ZXIgPGpha2VAYWxvZ2ljYWxwYXJhZG94LmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNoYWksIHV0aWwpIHtcbiAgdmFyIEFzc2VydGlvbiA9IGNoYWkuQXNzZXJ0aW9uO1xuXG4gIGZ1bmN0aW9uIGxvYWRTaG91bGQgKCkge1xuICAgIC8vIGV4cGxpY2l0bHkgZGVmaW5lIHRoaXMgbWV0aG9kIGFzIGZ1bmN0aW9uIGFzIHRvIGhhdmUgaXQncyBuYW1lIHRvIGluY2x1ZGUgYXMgYHNzZmlgXG4gICAgZnVuY3Rpb24gc2hvdWxkR2V0dGVyKCkge1xuICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBTdHJpbmcgfHwgdGhpcyBpbnN0YW5jZW9mIE51bWJlciB8fCB0aGlzIGluc3RhbmNlb2YgQm9vbGVhbiApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBc3NlcnRpb24odGhpcy52YWx1ZU9mKCksIG51bGwsIHNob3VsZEdldHRlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEFzc2VydGlvbih0aGlzLCBudWxsLCBzaG91bGRHZXR0ZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzaG91bGRTZXR0ZXIodmFsdWUpIHtcbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vY2hhaWpzL2NoYWkvaXNzdWVzLzg2OiB0aGlzIG1ha2VzXG4gICAgICAvLyBgd2hhdGV2ZXIuc2hvdWxkID0gc29tZVZhbHVlYCBhY3R1YWxseSBzZXQgYHNvbWVWYWx1ZWAsIHdoaWNoIGlzXG4gICAgICAvLyBlc3BlY2lhbGx5IHVzZWZ1bCBmb3IgYGdsb2JhbC5zaG91bGQgPSByZXF1aXJlKCdjaGFpJykuc2hvdWxkKClgLlxuICAgICAgLy9cbiAgICAgIC8vIE5vdGUgdGhhdCB3ZSBoYXZlIHRvIHVzZSBbW0RlZmluZVByb3BlcnR5XV0gaW5zdGVhZCBvZiBbW1B1dF1dXG4gICAgICAvLyBzaW5jZSBvdGhlcndpc2Ugd2Ugd291bGQgdHJpZ2dlciB0aGlzIHZlcnkgc2V0dGVyIVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdzaG91bGQnLCB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIG1vZGlmeSBPYmplY3QucHJvdG90eXBlIHRvIGhhdmUgYHNob3VsZGBcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LnByb3RvdHlwZSwgJ3Nob3VsZCcsIHtcbiAgICAgIHNldDogc2hvdWxkU2V0dGVyXG4gICAgICAsIGdldDogc2hvdWxkR2V0dGVyXG4gICAgICAsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdmFyIHNob3VsZCA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogIyMjIC5mYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSwgW29wZXJhdG9yXSlcbiAgICAgKlxuICAgICAqIFRocm93IGEgZmFpbHVyZS5cbiAgICAgKlxuICAgICAqIEBuYW1lIGZhaWxcbiAgICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAgICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wZXJhdG9yXG4gICAgICogQG5hbWVzcGFjZSBTaG91bGRcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG4gICAgc2hvdWxkLmZhaWwgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgb3BlcmF0b3IpIHtcbiAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdzaG91bGQuZmFpbCgpJztcbiAgICAgIHRocm93IG5ldyBjaGFpLkFzc2VydGlvbkVycm9yKG1lc3NhZ2UsIHtcbiAgICAgICAgICBhY3R1YWw6IGFjdHVhbFxuICAgICAgICAsIGV4cGVjdGVkOiBleHBlY3RlZFxuICAgICAgICAsIG9wZXJhdG9yOiBvcGVyYXRvclxuICAgICAgfSwgc2hvdWxkLmZhaWwpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiAjIyMgLmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcbiAgICAgKlxuICAgICAqIEFzc2VydHMgbm9uLXN0cmljdCBlcXVhbGl0eSAoYD09YCkgb2YgYGFjdHVhbGAgYW5kIGBleHBlY3RlZGAuXG4gICAgICpcbiAgICAgKiAgICAgc2hvdWxkLmVxdWFsKDMsICczJywgJz09IGNvZXJjZXMgdmFsdWVzIHRvIHN0cmluZ3MnKTtcbiAgICAgKlxuICAgICAqIEBuYW1lIGVxdWFsXG4gICAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG4gICAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgICAqIEBuYW1lc3BhY2UgU2hvdWxkXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuICAgIHNob3VsZC5lcXVhbCA9IGZ1bmN0aW9uICh2YWwxLCB2YWwyLCBtc2cpIHtcbiAgICAgIG5ldyBBc3NlcnRpb24odmFsMSwgbXNnKS50by5lcXVhbCh2YWwyKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIyMjIC50aHJvdyhmdW5jdGlvbiwgW2NvbnN0cnVjdG9yL3N0cmluZy9yZWdleHBdLCBbc3RyaW5nL3JlZ2V4cF0sIFttZXNzYWdlXSlcbiAgICAgKlxuICAgICAqIEFzc2VydHMgdGhhdCBgZnVuY3Rpb25gIHdpbGwgdGhyb3cgYW4gZXJyb3IgdGhhdCBpcyBhbiBpbnN0YW5jZSBvZlxuICAgICAqIGBjb25zdHJ1Y3RvcmAsIG9yIGFsdGVybmF0ZWx5IHRoYXQgaXQgd2lsbCB0aHJvdyBhbiBlcnJvciB3aXRoIG1lc3NhZ2VcbiAgICAgKiBtYXRjaGluZyBgcmVnZXhwYC5cbiAgICAgKlxuICAgICAqICAgICBzaG91bGQudGhyb3coZm4sICdmdW5jdGlvbiB0aHJvd3MgYSByZWZlcmVuY2UgZXJyb3InKTtcbiAgICAgKiAgICAgc2hvdWxkLnRocm93KGZuLCAvZnVuY3Rpb24gdGhyb3dzIGEgcmVmZXJlbmNlIGVycm9yLyk7XG4gICAgICogICAgIHNob3VsZC50aHJvdyhmbiwgUmVmZXJlbmNlRXJyb3IpO1xuICAgICAqICAgICBzaG91bGQudGhyb3coZm4sIFJlZmVyZW5jZUVycm9yLCAnZnVuY3Rpb24gdGhyb3dzIGEgcmVmZXJlbmNlIGVycm9yJyk7XG4gICAgICogICAgIHNob3VsZC50aHJvdyhmbiwgUmVmZXJlbmNlRXJyb3IsIC9mdW5jdGlvbiB0aHJvd3MgYSByZWZlcmVuY2UgZXJyb3IvKTtcbiAgICAgKlxuICAgICAqIEBuYW1lIHRocm93XG4gICAgICogQGFsaWFzIFRocm93XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Vycm9yQ29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ2V4cFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNFcnJvcl90eXBlc1xuICAgICAqIEBuYW1lc3BhY2UgU2hvdWxkXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuICAgIHNob3VsZC5UaHJvdyA9IGZ1bmN0aW9uIChmbiwgZXJydCwgZXJycywgbXNnKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKGZuLCBtc2cpLnRvLlRocm93KGVycnQsIGVycnMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiAjIyMgLmV4aXN0XG4gICAgICpcbiAgICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBuZWl0aGVyIGBudWxsYCBub3IgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiAgICAgdmFyIGZvbyA9ICdoaSc7XG4gICAgICpcbiAgICAgKiAgICAgc2hvdWxkLmV4aXN0KGZvbywgJ2ZvbyBleGlzdHMnKTtcbiAgICAgKlxuICAgICAqIEBuYW1lIGV4aXN0XG4gICAgICogQG5hbWVzcGFjZSBTaG91bGRcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG4gICAgc2hvdWxkLmV4aXN0ID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5leGlzdDtcbiAgICB9XG5cbiAgICAvLyBuZWdhdGlvblxuICAgIHNob3VsZC5ub3QgPSB7fVxuXG4gICAgLyoqXG4gICAgICogIyMjIC5ub3QuZXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuICAgICAqXG4gICAgICogQXNzZXJ0cyBub24tc3RyaWN0IGluZXF1YWxpdHkgKGAhPWApIG9mIGBhY3R1YWxgIGFuZCBgZXhwZWN0ZWRgLlxuICAgICAqXG4gICAgICogICAgIHNob3VsZC5ub3QuZXF1YWwoMywgNCwgJ3RoZXNlIG51bWJlcnMgYXJlIG5vdCBlcXVhbCcpO1xuICAgICAqXG4gICAgICogQG5hbWUgbm90LmVxdWFsXG4gICAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG4gICAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgICAqIEBuYW1lc3BhY2UgU2hvdWxkXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuICAgIHNob3VsZC5ub3QuZXF1YWwgPSBmdW5jdGlvbiAodmFsMSwgdmFsMiwgbXNnKSB7XG4gICAgICBuZXcgQXNzZXJ0aW9uKHZhbDEsIG1zZykudG8ubm90LmVxdWFsKHZhbDIpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiAjIyMgLnRocm93KGZ1bmN0aW9uLCBbY29uc3RydWN0b3IvcmVnZXhwXSwgW21lc3NhZ2VdKVxuICAgICAqXG4gICAgICogQXNzZXJ0cyB0aGF0IGBmdW5jdGlvbmAgd2lsbCBfbm90XyB0aHJvdyBhbiBlcnJvciB0aGF0IGlzIGFuIGluc3RhbmNlIG9mXG4gICAgICogYGNvbnN0cnVjdG9yYCwgb3IgYWx0ZXJuYXRlbHkgdGhhdCBpdCB3aWxsIG5vdCB0aHJvdyBhbiBlcnJvciB3aXRoIG1lc3NhZ2VcbiAgICAgKiBtYXRjaGluZyBgcmVnZXhwYC5cbiAgICAgKlxuICAgICAqICAgICBzaG91bGQubm90LnRocm93KGZuLCBFcnJvciwgJ2Z1bmN0aW9uIGRvZXMgbm90IHRocm93Jyk7XG4gICAgICpcbiAgICAgKiBAbmFtZSBub3QudGhyb3dcbiAgICAgKiBAYWxpYXMgbm90LlRocm93XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Vycm9yQ29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ2V4cFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNFcnJvcl90eXBlc1xuICAgICAqIEBuYW1lc3BhY2UgU2hvdWxkXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuICAgIHNob3VsZC5ub3QuVGhyb3cgPSBmdW5jdGlvbiAoZm4sIGVycnQsIGVycnMsIG1zZykge1xuICAgICAgbmV3IEFzc2VydGlvbihmbiwgbXNnKS50by5ub3QuVGhyb3coZXJydCwgZXJycyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqICMjIyAubm90LmV4aXN0XG4gICAgICpcbiAgICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBuZWl0aGVyIGBudWxsYCBub3IgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiAgICAgdmFyIGJhciA9IG51bGw7XG4gICAgICpcbiAgICAgKiAgICAgc2hvdWxkLm5vdC5leGlzdChiYXIsICdiYXIgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgKlxuICAgICAqIEBuYW1lIG5vdC5leGlzdFxuICAgICAqIEBuYW1lc3BhY2UgU2hvdWxkXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuICAgIHNob3VsZC5ub3QuZXhpc3QgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5leGlzdDtcbiAgICB9XG5cbiAgICBzaG91bGRbJ3Rocm93J10gPSBzaG91bGRbJ1Rocm93J107XG4gICAgc2hvdWxkLm5vdFsndGhyb3cnXSA9IHNob3VsZC5ub3RbJ1Rocm93J107XG5cbiAgICByZXR1cm4gc2hvdWxkO1xuICB9O1xuXG4gIGNoYWkuc2hvdWxkID0gbG9hZFNob3VsZDtcbiAgY2hhaS5TaG91bGQgPSBsb2FkU2hvdWxkO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NoYWkvbGliL2NoYWkvaW50ZXJmYWNlL3Nob3VsZC5qc1xuICoqIG1vZHVsZSBpZCA9IDEwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBjaGFpXG4gKiBDb3B5cmlnaHQoYykgMjAxMS0yMDE0IEpha2UgTHVlciA8amFrZUBhbG9naWNhbHBhcmFkb3guY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjaGFpLCB1dGlsKSB7XG5cbiAgLyohXG4gICAqIENoYWkgZGVwZW5kZW5jaWVzLlxuICAgKi9cblxuICB2YXIgQXNzZXJ0aW9uID0gY2hhaS5Bc3NlcnRpb25cbiAgICAsIGZsYWcgPSB1dGlsLmZsYWc7XG5cbiAgLyohXG4gICAqIE1vZHVsZSBleHBvcnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiAjIyMgYXNzZXJ0KGV4cHJlc3Npb24sIG1lc3NhZ2UpXG4gICAqXG4gICAqIFdyaXRlIHlvdXIgb3duIHRlc3QgZXhwcmVzc2lvbnMuXG4gICAqXG4gICAqICAgICBhc3NlcnQoJ2ZvbycgIT09ICdiYXInLCAnZm9vIGlzIG5vdCBiYXInKTtcbiAgICogICAgIGFzc2VydChBcnJheS5pc0FycmF5KFtdKSwgJ2VtcHR5IGFycmF5cyBhcmUgYXJyYXlzJyk7XG4gICAqXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGV4cHJlc3Npb24gdG8gdGVzdCBmb3IgdHJ1dGhpbmVzc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSB0byBkaXNwbGF5IG9uIGVycm9yXG4gICAqIEBuYW1lIGFzc2VydFxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICB2YXIgYXNzZXJ0ID0gY2hhaS5hc3NlcnQgPSBmdW5jdGlvbiAoZXhwcmVzcywgZXJybXNnKSB7XG4gICAgdmFyIHRlc3QgPSBuZXcgQXNzZXJ0aW9uKG51bGwsIG51bGwsIGNoYWkuYXNzZXJ0KTtcbiAgICB0ZXN0LmFzc2VydChcbiAgICAgICAgZXhwcmVzc1xuICAgICAgLCBlcnJtc2dcbiAgICAgICwgJ1sgbmVnYXRpb24gbWVzc2FnZSB1bmF2YWlsYWJsZSBdJ1xuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0sIFtvcGVyYXRvcl0pXG4gICAqXG4gICAqIFRocm93IGEgZmFpbHVyZS4gTm9kZS5qcyBgYXNzZXJ0YCBtb2R1bGUtY29tcGF0aWJsZS5cbiAgICpcbiAgICogQG5hbWUgZmFpbFxuICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9wZXJhdG9yXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5mYWlsID0gZnVuY3Rpb24gKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yKSB7XG4gICAgbWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ2Fzc2VydC5mYWlsKCknO1xuICAgIHRocm93IG5ldyBjaGFpLkFzc2VydGlvbkVycm9yKG1lc3NhZ2UsIHtcbiAgICAgICAgYWN0dWFsOiBhY3R1YWxcbiAgICAgICwgZXhwZWN0ZWQ6IGV4cGVjdGVkXG4gICAgICAsIG9wZXJhdG9yOiBvcGVyYXRvclxuICAgIH0sIGFzc2VydC5mYWlsKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc09rKG9iamVjdCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgdHJ1dGh5LlxuICAgKlxuICAgKiAgICAgYXNzZXJ0LmlzT2soJ2V2ZXJ5dGhpbmcnLCAnZXZlcnl0aGluZyBpcyBvaycpO1xuICAgKiAgICAgYXNzZXJ0LmlzT2soZmFsc2UsICd0aGlzIHdpbGwgZmFpbCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc09rXG4gICAqIEBhbGlhcyBva1xuICAgKiBAcGFyYW0ge01peGVkfSBvYmplY3QgdG8gdGVzdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNPayA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLmlzLm9rO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90T2sob2JqZWN0LCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBpcyBmYWxzeS5cbiAgICpcbiAgICogICAgIGFzc2VydC5pc05vdE9rKCdldmVyeXRoaW5nJywgJ3RoaXMgd2lsbCBmYWlsJyk7XG4gICAqICAgICBhc3NlcnQuaXNOb3RPayhmYWxzZSwgJ3RoaXMgd2lsbCBwYXNzJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90T2tcbiAgICogQGFsaWFzIG5vdE9rXG4gICAqIEBwYXJhbSB7TWl4ZWR9IG9iamVjdCB0byB0ZXN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdE9rID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykuaXMubm90Lm9rO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyBub24tc3RyaWN0IGVxdWFsaXR5IChgPT1gKSBvZiBgYWN0dWFsYCBhbmQgYGV4cGVjdGVkYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5lcXVhbCgzLCAnMycsICc9PSBjb2VyY2VzIHZhbHVlcyB0byBzdHJpbmdzJyk7XG4gICAqXG4gICAqIEBuYW1lIGVxdWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuZXF1YWwgPSBmdW5jdGlvbiAoYWN0LCBleHAsIG1zZykge1xuICAgIHZhciB0ZXN0ID0gbmV3IEFzc2VydGlvbihhY3QsIG1zZywgYXNzZXJ0LmVxdWFsKTtcblxuICAgIHRlc3QuYXNzZXJ0KFxuICAgICAgICBleHAgPT0gZmxhZyh0ZXN0LCAnb2JqZWN0JylcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gZXF1YWwgI3tleHB9J1xuICAgICAgLCAnZXhwZWN0ZWQgI3t0aGlzfSB0byBub3QgZXF1YWwgI3thY3R9J1xuICAgICAgLCBleHBcbiAgICAgICwgYWN0XG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5ub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgbm9uLXN0cmljdCBpbmVxdWFsaXR5IChgIT1gKSBvZiBgYWN0dWFsYCBhbmQgYGV4cGVjdGVkYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5ub3RFcXVhbCgzLCA0LCAndGhlc2UgbnVtYmVycyBhcmUgbm90IGVxdWFsJyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdEVxdWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiAoYWN0LCBleHAsIG1zZykge1xuICAgIHZhciB0ZXN0ID0gbmV3IEFzc2VydGlvbihhY3QsIG1zZywgYXNzZXJ0Lm5vdEVxdWFsKTtcblxuICAgIHRlc3QuYXNzZXJ0KFxuICAgICAgICBleHAgIT0gZmxhZyh0ZXN0LCAnb2JqZWN0JylcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gbm90IGVxdWFsICN7ZXhwfSdcbiAgICAgICwgJ2V4cGVjdGVkICN7dGhpc30gdG8gZXF1YWwgI3thY3R9J1xuICAgICAgLCBleHBcbiAgICAgICwgYWN0XG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgc3RyaWN0IGVxdWFsaXR5IChgPT09YCkgb2YgYGFjdHVhbGAgYW5kIGBleHBlY3RlZGAuXG4gICAqXG4gICAqICAgICBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgdHJ1ZSwgJ3RoZXNlIGJvb2xlYW5zIGFyZSBzdHJpY3RseSBlcXVhbCcpO1xuICAgKlxuICAgKiBAbmFtZSBzdHJpY3RFcXVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LnN0cmljdEVxdWFsID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnKS50by5lcXVhbChleHApO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyBzdHJpY3QgaW5lcXVhbGl0eSAoYCE9PWApIG9mIGBhY3R1YWxgIGFuZCBgZXhwZWN0ZWRgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKDMsICczJywgJ25vIGNvZXJjaW9uIGZvciBzdHJpY3QgZXF1YWxpdHknKTtcbiAgICpcbiAgICogQG5hbWUgbm90U3RyaWN0RXF1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gYWN0dWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGV4cGVjdGVkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5ub3RTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIChhY3QsIGV4cCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8ubm90LmVxdWFsKGV4cCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBhY3R1YWxgIGlzIGRlZXBseSBlcXVhbCB0byBgZXhwZWN0ZWRgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0LmRlZXBFcXVhbCh7IHRlYTogJ2dyZWVuJyB9LCB7IHRlYTogJ2dyZWVuJyB9KTtcbiAgICpcbiAgICogQG5hbWUgZGVlcEVxdWFsXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGFjdHVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBleHBlY3RlZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuZGVlcEVxdWFsID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnKS50by5lcWwoZXhwKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnQgdGhhdCBgYWN0dWFsYCBpcyBub3QgZGVlcGx5IGVxdWFsIHRvIGBleHBlY3RlZGAuXG4gICAqXG4gICAqICAgICBhc3NlcnQubm90RGVlcEVxdWFsKHsgdGVhOiAnZ3JlZW4nIH0sIHsgdGVhOiAnamFzbWluZScgfSk7XG4gICAqXG4gICAqIEBuYW1lIG5vdERlZXBFcXVhbFxuICAgKiBAcGFyYW0ge01peGVkfSBhY3R1YWxcbiAgICogQHBhcmFtIHtNaXhlZH0gZXhwZWN0ZWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0Lm5vdERlZXBFcXVhbCA9IGZ1bmN0aW9uIChhY3QsIGV4cCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8ubm90LmVxbChleHApO1xuICB9O1xuXG4gICAvKipcbiAgICogIyMjIC5pc0Fib3ZlKHZhbHVlVG9DaGVjaywgdmFsdWVUb0JlQWJvdmUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyBgdmFsdWVUb0NoZWNrYCBpcyBzdHJpY3RseSBncmVhdGVyIHRoYW4gKD4pIGB2YWx1ZVRvQmVBYm92ZWBcbiAgICpcbiAgICogICAgIGFzc2VydC5pc0Fib3ZlKDUsIDIsICc1IGlzIHN0cmljdGx5IGdyZWF0ZXIgdGhhbiAyJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzQWJvdmVcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVUb0NoZWNrXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9CZUFib3ZlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc0Fib3ZlID0gZnVuY3Rpb24gKHZhbCwgYWJ2LCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hYm92ZShhYnYpO1xuICB9O1xuXG4gICAvKipcbiAgICogIyMjIC5pc0F0TGVhc3QodmFsdWVUb0NoZWNrLCB2YWx1ZVRvQmVBdExlYXN0LCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgYHZhbHVlVG9DaGVja2AgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICg+PSkgYHZhbHVlVG9CZUF0TGVhc3RgXG4gICAqXG4gICAqICAgICBhc3NlcnQuaXNBdExlYXN0KDUsIDIsICc1IGlzIGdyZWF0ZXIgb3IgZXF1YWwgdG8gMicpO1xuICAgKiAgICAgYXNzZXJ0LmlzQXRMZWFzdCgzLCAzLCAnMyBpcyBncmVhdGVyIG9yIGVxdWFsIHRvIDMnKTtcbiAgICpcbiAgICogQG5hbWUgaXNBdExlYXN0XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9DaGVja1xuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQmVBdExlYXN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc0F0TGVhc3QgPSBmdW5jdGlvbiAodmFsLCBhdGxzdCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUubGVhc3QoYXRsc3QpO1xuICB9O1xuXG4gICAvKipcbiAgICogIyMjIC5pc0JlbG93KHZhbHVlVG9DaGVjaywgdmFsdWVUb0JlQmVsb3csIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyBgdmFsdWVUb0NoZWNrYCBpcyBzdHJpY3RseSBsZXNzIHRoYW4gKDwpIGB2YWx1ZVRvQmVCZWxvd2BcbiAgICpcbiAgICogICAgIGFzc2VydC5pc0JlbG93KDMsIDYsICczIGlzIHN0cmljdGx5IGxlc3MgdGhhbiA2Jyk7XG4gICAqXG4gICAqIEBuYW1lIGlzQmVsb3dcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVUb0NoZWNrXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlVG9CZUJlbG93XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc0JlbG93ID0gZnVuY3Rpb24gKHZhbCwgYmx3LCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5iZWxvdyhibHcpO1xuICB9O1xuXG4gICAvKipcbiAgICogIyMjIC5pc0F0TW9zdCh2YWx1ZVRvQ2hlY2ssIHZhbHVlVG9CZUF0TW9zdCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIGB2YWx1ZVRvQ2hlY2tgIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byAoPD0pIGB2YWx1ZVRvQmVBdE1vc3RgXG4gICAqXG4gICAqICAgICBhc3NlcnQuaXNBdE1vc3QoMywgNiwgJzMgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDYnKTtcbiAgICogICAgIGFzc2VydC5pc0F0TW9zdCg0LCA0LCAnNCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gNCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc0F0TW9zdFxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVRvQ2hlY2tcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVUb0JlQXRNb3N0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc0F0TW9zdCA9IGZ1bmN0aW9uICh2YWwsIGF0bXN0LCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5tb3N0KGF0bXN0KTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc1RydWUodmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgdHJ1ZS5cbiAgICpcbiAgICogICAgIHZhciB0ZWFTZXJ2ZWQgPSB0cnVlO1xuICAgKiAgICAgYXNzZXJ0LmlzVHJ1ZSh0ZWFTZXJ2ZWQsICd0aGUgdGVhIGhhcyBiZWVuIHNlcnZlZCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc1RydWVcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzVHJ1ZSA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLmlzWyd0cnVlJ107XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNOb3RUcnVlKHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIG5vdCB0cnVlLlxuICAgKlxuICAgKiAgICAgdmFyIHRlYSA9ICd0YXN0eSBjaGFpJztcbiAgICogICAgIGFzc2VydC5pc05vdFRydWUodGVhLCAnZ3JlYXQsIHRpbWUgZm9yIHRlYSEnKTtcbiAgICpcbiAgICogQG5hbWUgaXNOb3RUcnVlXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdFRydWUgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuZXF1YWwodHJ1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNGYWxzZSh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBmYWxzZS5cbiAgICpcbiAgICogICAgIHZhciB0ZWFTZXJ2ZWQgPSBmYWxzZTtcbiAgICogICAgIGFzc2VydC5pc0ZhbHNlKHRlYVNlcnZlZCwgJ25vIHRlYSB5ZXQ/IGhtbS4uLicpO1xuICAgKlxuICAgKiBAbmFtZSBpc0ZhbHNlXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc0ZhbHNlID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykuaXNbJ2ZhbHNlJ107XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNOb3RGYWxzZSh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBub3QgZmFsc2UuXG4gICAqXG4gICAqICAgICB2YXIgdGVhID0gJ3Rhc3R5IGNoYWknO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90RmFsc2UodGVhLCAnZ3JlYXQsIHRpbWUgZm9yIHRlYSEnKTtcbiAgICpcbiAgICogQG5hbWUgaXNOb3RGYWxzZVxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOb3RGYWxzZSA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5lcXVhbChmYWxzZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNOdWxsKHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIG51bGwuXG4gICAqXG4gICAqICAgICBhc3NlcnQuaXNOdWxsKGVyciwgJ3RoZXJlIHdhcyBubyBlcnJvcicpO1xuICAgKlxuICAgKiBAbmFtZSBpc051bGxcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzTnVsbCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmVxdWFsKG51bGwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90TnVsbCh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBub3QgbnVsbC5cbiAgICpcbiAgICogICAgIHZhciB0ZWEgPSAndGFzdHkgY2hhaSc7XG4gICAqICAgICBhc3NlcnQuaXNOb3ROdWxsKHRlYSwgJ2dyZWF0LCB0aW1lIGZvciB0ZWEhJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90TnVsbFxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOb3ROdWxsID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmVxdWFsKG51bGwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTmFOXG4gICAqIEFzc2VydHMgdGhhdCB2YWx1ZSBpcyBOYU5cbiAgICpcbiAgICogICAgYXNzZXJ0LmlzTmFOKCdmb28nLCAnZm9vIGlzIE5hTicpO1xuICAgKlxuICAgKiBAbmFtZSBpc05hTlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOYU4gPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5OYU47XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNOb3ROYU5cbiAgICogQXNzZXJ0cyB0aGF0IHZhbHVlIGlzIG5vdCBOYU5cbiAgICpcbiAgICogICAgYXNzZXJ0LmlzTm90TmFOKDQsICc0IGlzIG5vdCBOYU4nKTtcbiAgICpcbiAgICogQG5hbWUgaXNOb3ROYU5cbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIGFzc2VydC5pc05vdE5hTiA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLm5vdC50by5iZS5OYU47XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNVbmRlZmluZWQodmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYHVuZGVmaW5lZGAuXG4gICAqXG4gICAqICAgICB2YXIgdGVhO1xuICAgKiAgICAgYXNzZXJ0LmlzVW5kZWZpbmVkKHRlYSwgJ25vIHRlYSBkZWZpbmVkJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzVW5kZWZpbmVkXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc1VuZGVmaW5lZCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmVxdWFsKHVuZGVmaW5lZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNEZWZpbmVkKHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIG5vdCBgdW5kZWZpbmVkYC5cbiAgICpcbiAgICogICAgIHZhciB0ZWEgPSAnY3VwIG9mIGNoYWknO1xuICAgKiAgICAgYXNzZXJ0LmlzRGVmaW5lZCh0ZWEsICd0ZWEgaGFzIGJlZW4gZGVmaW5lZCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc0RlZmluZWRcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzRGVmaW5lZCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5lcXVhbCh1bmRlZmluZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzRnVuY3Rpb24odmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYSBmdW5jdGlvbi5cbiAgICpcbiAgICogICAgIGZ1bmN0aW9uIHNlcnZlVGVhKCkgeyByZXR1cm4gJ2N1cCBvZiB0ZWEnOyB9O1xuICAgKiAgICAgYXNzZXJ0LmlzRnVuY3Rpb24oc2VydmVUZWEsICdncmVhdCwgd2UgY2FuIGhhdmUgdGVhIG5vdycpO1xuICAgKlxuICAgKiBAbmFtZSBpc0Z1bmN0aW9uXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc0Z1bmN0aW9uID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYSgnZnVuY3Rpb24nKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdEZ1bmN0aW9uKHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIF9ub3RfIGEgZnVuY3Rpb24uXG4gICAqXG4gICAqICAgICB2YXIgc2VydmVUZWEgPSBbICdoZWF0JywgJ3BvdXInLCAnc2lwJyBdO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90RnVuY3Rpb24oc2VydmVUZWEsICdncmVhdCwgd2UgaGF2ZSBsaXN0ZWQgdGhlIHN0ZXBzJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90RnVuY3Rpb25cbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzTm90RnVuY3Rpb24gPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5ub3QuYmUuYSgnZnVuY3Rpb24nKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc09iamVjdCh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBhbiBvYmplY3Qgb2YgdHlwZSAnT2JqZWN0JyAoYXMgcmV2ZWFsZWQgYnkgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgKS5cbiAgICogX1RoZSBhc3NlcnRpb24gZG9lcyBub3QgbWF0Y2ggc3ViY2xhc3NlZCBvYmplY3RzLl9cbiAgICpcbiAgICogICAgIHZhciBzZWxlY3Rpb24gPSB7IG5hbWU6ICdDaGFpJywgc2VydmU6ICd3aXRoIHNwaWNlcycgfTtcbiAgICogICAgIGFzc2VydC5pc09iamVjdChzZWxlY3Rpb24sICd0ZWEgc2VsZWN0aW9uIGlzIGFuIG9iamVjdCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc09iamVjdFxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNPYmplY3QgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hKCdvYmplY3QnKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdE9iamVjdCh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhbiBvYmplY3Qgb2YgdHlwZSAnT2JqZWN0JyAoYXMgcmV2ZWFsZWQgYnkgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgKS5cbiAgICpcbiAgICogICAgIHZhciBzZWxlY3Rpb24gPSAnY2hhaSdcbiAgICogICAgIGFzc2VydC5pc05vdE9iamVjdChzZWxlY3Rpb24sICd0ZWEgc2VsZWN0aW9uIGlzIG5vdCBhbiBvYmplY3QnKTtcbiAgICogICAgIGFzc2VydC5pc05vdE9iamVjdChudWxsLCAnbnVsbCBpcyBub3QgYW4gb2JqZWN0Jyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90T2JqZWN0XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdE9iamVjdCA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKCdvYmplY3QnKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc0FycmF5KHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGFuIGFycmF5LlxuICAgKlxuICAgKiAgICAgdmFyIG1lbnUgPSBbICdncmVlbicsICdjaGFpJywgJ29vbG9uZycgXTtcbiAgICogICAgIGFzc2VydC5pc0FycmF5KG1lbnUsICd3aGF0IGtpbmQgb2YgdGVhIGRvIHdlIHdhbnQ/Jyk7XG4gICAqXG4gICAqIEBuYW1lIGlzQXJyYXlcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzQXJyYXkgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hbignYXJyYXknKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdEFycmF5KHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIF9ub3RfIGFuIGFycmF5LlxuICAgKlxuICAgKiAgICAgdmFyIG1lbnUgPSAnZ3JlZW58Y2hhaXxvb2xvbmcnO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90QXJyYXkobWVudSwgJ3doYXQga2luZCBvZiB0ZWEgZG8gd2Ugd2FudD8nKTtcbiAgICpcbiAgICogQG5hbWUgaXNOb3RBcnJheVxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOb3RBcnJheSA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hbignYXJyYXknKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc1N0cmluZyh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBhIHN0cmluZy5cbiAgICpcbiAgICogICAgIHZhciB0ZWFPcmRlciA9ICdjaGFpJztcbiAgICogICAgIGFzc2VydC5pc1N0cmluZyh0ZWFPcmRlciwgJ29yZGVyIHBsYWNlZCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc1N0cmluZ1xuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNTdHJpbmcgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hKCdzdHJpbmcnKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdFN0cmluZyh2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhIHN0cmluZy5cbiAgICpcbiAgICogICAgIHZhciB0ZWFPcmRlciA9IDQ7XG4gICAqICAgICBhc3NlcnQuaXNOb3RTdHJpbmcodGVhT3JkZXIsICdvcmRlciBwbGFjZWQnKTtcbiAgICpcbiAgICogQG5hbWUgaXNOb3RTdHJpbmdcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzTm90U3RyaW5nID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmJlLmEoJ3N0cmluZycpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTnVtYmVyKHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIGlzIGEgbnVtYmVyLlxuICAgKlxuICAgKiAgICAgdmFyIGN1cHMgPSAyO1xuICAgKiAgICAgYXNzZXJ0LmlzTnVtYmVyKGN1cHMsICdob3cgbWFueSBjdXBzJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTnVtYmVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOdW1iZXIgPSBmdW5jdGlvbiAodmFsLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHZhbCwgbXNnKS50by5iZS5hKCdudW1iZXInKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdE51bWJlcih2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBfbm90XyBhIG51bWJlci5cbiAgICpcbiAgICogICAgIHZhciBjdXBzID0gJzIgY3VwcyBwbGVhc2UnO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90TnVtYmVyKGN1cHMsICdob3cgbWFueSBjdXBzJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90TnVtYmVyXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdE51bWJlciA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKCdudW1iZXInKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc0Jvb2xlYW4odmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgYSBib29sZWFuLlxuICAgKlxuICAgKiAgICAgdmFyIHRlYVJlYWR5ID0gdHJ1ZVxuICAgKiAgICAgICAsIHRlYVNlcnZlZCA9IGZhbHNlO1xuICAgKlxuICAgKiAgICAgYXNzZXJ0LmlzQm9vbGVhbih0ZWFSZWFkeSwgJ2lzIHRoZSB0ZWEgcmVhZHknKTtcbiAgICogICAgIGFzc2VydC5pc0Jvb2xlYW4odGVhU2VydmVkLCAnaGFzIHRlYSBiZWVuIHNlcnZlZCcpO1xuICAgKlxuICAgKiBAbmFtZSBpc0Jvb2xlYW5cbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzQm9vbGVhbiA9IGZ1bmN0aW9uICh2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLmJlLmEoJ2Jvb2xlYW4nKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5pc05vdEJvb2xlYW4odmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgaXMgX25vdF8gYSBib29sZWFuLlxuICAgKlxuICAgKiAgICAgdmFyIHRlYVJlYWR5ID0gJ3llcCdcbiAgICogICAgICAgLCB0ZWFTZXJ2ZWQgPSAnbm9wZSc7XG4gICAqXG4gICAqICAgICBhc3NlcnQuaXNOb3RCb29sZWFuKHRlYVJlYWR5LCAnaXMgdGhlIHRlYSByZWFkeScpO1xuICAgKiAgICAgYXNzZXJ0LmlzTm90Qm9vbGVhbih0ZWFTZXJ2ZWQsICdoYXMgdGVhIGJlZW4gc2VydmVkJyk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90Qm9vbGVhblxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaXNOb3RCb29sZWFuID0gZnVuY3Rpb24gKHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8ubm90LmJlLmEoJ2Jvb2xlYW4nKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC50eXBlT2YodmFsdWUsIG5hbWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAncyB0eXBlIGlzIGBuYW1lYCwgYXMgZGV0ZXJtaW5lZCBieVxuICAgKiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG4gICAqXG4gICAqICAgICBhc3NlcnQudHlwZU9mKHsgdGVhOiAnY2hhaScgfSwgJ29iamVjdCcsICd3ZSBoYXZlIGFuIG9iamVjdCcpO1xuICAgKiAgICAgYXNzZXJ0LnR5cGVPZihbJ2NoYWknLCAnamFzbWluZSddLCAnYXJyYXknLCAnd2UgaGF2ZSBhbiBhcnJheScpO1xuICAgKiAgICAgYXNzZXJ0LnR5cGVPZigndGVhJywgJ3N0cmluZycsICd3ZSBoYXZlIGEgc3RyaW5nJyk7XG4gICAqICAgICBhc3NlcnQudHlwZU9mKC90ZWEvLCAncmVnZXhwJywgJ3dlIGhhdmUgYSByZWd1bGFyIGV4cHJlc3Npb24nKTtcbiAgICogICAgIGFzc2VydC50eXBlT2YobnVsbCwgJ251bGwnLCAnd2UgaGF2ZSBhIG51bGwnKTtcbiAgICogICAgIGFzc2VydC50eXBlT2YodW5kZWZpbmVkLCAndW5kZWZpbmVkJywgJ3dlIGhhdmUgYW4gdW5kZWZpbmVkJyk7XG4gICAqXG4gICAqIEBuYW1lIHR5cGVPZlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQudHlwZU9mID0gZnVuY3Rpb24gKHZhbCwgdHlwZSwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuYSh0eXBlKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5ub3RUeXBlT2YodmFsdWUsIG5hbWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAncyB0eXBlIGlzIF9ub3RfIGBuYW1lYCwgYXMgZGV0ZXJtaW5lZCBieVxuICAgKiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG4gICAqXG4gICAqICAgICBhc3NlcnQubm90VHlwZU9mKCd0ZWEnLCAnbnVtYmVyJywgJ3N0cmluZ3MgYXJlIG5vdCBudW1iZXJzJyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdFR5cGVPZlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZW9mIG5hbWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0Lm5vdFR5cGVPZiA9IGZ1bmN0aW9uICh2YWwsIHR5cGUsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5hKHR5cGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmluc3RhbmNlT2Yob2JqZWN0LCBjb25zdHJ1Y3RvciwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHZhbHVlYCBpcyBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuICAgKlxuICAgKiAgICAgdmFyIFRlYSA9IGZ1bmN0aW9uIChuYW1lKSB7IHRoaXMubmFtZSA9IG5hbWU7IH1cbiAgICogICAgICAgLCBjaGFpID0gbmV3IFRlYSgnY2hhaScpO1xuICAgKlxuICAgKiAgICAgYXNzZXJ0Lmluc3RhbmNlT2YoY2hhaSwgVGVhLCAnY2hhaSBpcyBhbiBpbnN0YW5jZSBvZiB0ZWEnKTtcbiAgICpcbiAgICogQG5hbWUgaW5zdGFuY2VPZlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7Q29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pbnN0YW5jZU9mID0gZnVuY3Rpb24gKHZhbCwgdHlwZSwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbih2YWwsIG1zZykudG8uYmUuaW5zdGFuY2VPZih0eXBlKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5ub3RJbnN0YW5jZU9mKG9iamVjdCwgY29uc3RydWN0b3IsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyBgdmFsdWVgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgY29uc3RydWN0b3JgLlxuICAgKlxuICAgKiAgICAgdmFyIFRlYSA9IGZ1bmN0aW9uIChuYW1lKSB7IHRoaXMubmFtZSA9IG5hbWU7IH1cbiAgICogICAgICAgLCBjaGFpID0gbmV3IFN0cmluZygnY2hhaScpO1xuICAgKlxuICAgKiAgICAgYXNzZXJ0Lm5vdEluc3RhbmNlT2YoY2hhaSwgVGVhLCAnY2hhaSBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgdGVhJyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdEluc3RhbmNlT2ZcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge0NvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubm90SW5zdGFuY2VPZiA9IGZ1bmN0aW9uICh2YWwsIHR5cGUsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24odmFsLCBtc2cpLnRvLm5vdC5iZS5pbnN0YW5jZU9mKHR5cGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmluY2x1ZGUoaGF5c3RhY2ssIG5lZWRsZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYGhheXN0YWNrYCBpbmNsdWRlcyBgbmVlZGxlYC4gV29ya3NcbiAgICogZm9yIHN0cmluZ3MgYW5kIGFycmF5cy5cbiAgICpcbiAgICogICAgIGFzc2VydC5pbmNsdWRlKCdmb29iYXInLCAnYmFyJywgJ2Zvb2JhciBjb250YWlucyBzdHJpbmcgXCJiYXJcIicpO1xuICAgKiAgICAgYXNzZXJ0LmluY2x1ZGUoWyAxLCAyLCAzIF0sIDMsICdhcnJheSBjb250YWlucyB2YWx1ZScpO1xuICAgKlxuICAgKiBAbmFtZSBpbmNsdWRlXG4gICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBoYXlzdGFja1xuICAgKiBAcGFyYW0ge01peGVkfSBuZWVkbGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmluY2x1ZGUgPSBmdW5jdGlvbiAoZXhwLCBpbmMsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2csIGFzc2VydC5pbmNsdWRlKS5pbmNsdWRlKGluYyk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAubm90SW5jbHVkZShoYXlzdGFjaywgbmVlZGxlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgaGF5c3RhY2tgIGRvZXMgbm90IGluY2x1ZGUgYG5lZWRsZWAuIFdvcmtzXG4gICAqIGZvciBzdHJpbmdzIGFuZCBhcnJheXMuXG4gICAqXG4gICAqICAgICBhc3NlcnQubm90SW5jbHVkZSgnZm9vYmFyJywgJ2JheicsICdzdHJpbmcgbm90IGluY2x1ZGUgc3Vic3RyaW5nJyk7XG4gICAqICAgICBhc3NlcnQubm90SW5jbHVkZShbIDEsIDIsIDMgXSwgNCwgJ2FycmF5IG5vdCBpbmNsdWRlIGNvbnRhaW4gdmFsdWUnKTtcbiAgICpcbiAgICogQG5hbWUgbm90SW5jbHVkZVxuICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gaGF5c3RhY2tcbiAgICogQHBhcmFtIHtNaXhlZH0gbmVlZGxlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5ub3RJbmNsdWRlID0gZnVuY3Rpb24gKGV4cCwgaW5jLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGV4cCwgbXNnLCBhc3NlcnQubm90SW5jbHVkZSkubm90LmluY2x1ZGUoaW5jKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5tYXRjaCh2YWx1ZSwgcmVnZXhwLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgdmFsdWVgIG1hdGNoZXMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBgcmVnZXhwYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5tYXRjaCgnZm9vYmFyJywgL15mb28vLCAncmVnZXhwIG1hdGNoZXMnKTtcbiAgICpcbiAgICogQG5hbWUgbWF0Y2hcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ2V4cFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubWF0Y2ggPSBmdW5jdGlvbiAoZXhwLCByZSwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihleHAsIG1zZykudG8ubWF0Y2gocmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLm5vdE1hdGNoKHZhbHVlLCByZWdleHAsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGB2YWx1ZWAgZG9lcyBub3QgbWF0Y2ggdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBgcmVnZXhwYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5ub3RNYXRjaCgnZm9vYmFyJywgL15mb28vLCAncmVnZXhwIGRvZXMgbm90IG1hdGNoJyk7XG4gICAqXG4gICAqIEBuYW1lIG5vdE1hdGNoXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0Lm5vdE1hdGNoID0gZnVuY3Rpb24gKGV4cCwgcmUsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2cpLnRvLm5vdC5tYXRjaChyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAucHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YC5cbiAgICpcbiAgICogICAgIGFzc2VydC5wcm9wZXJ0eSh7IHRlYTogeyBncmVlbjogJ21hdGNoYScgfX0sICd0ZWEnKTtcbiAgICpcbiAgICogQG5hbWUgcHJvcGVydHlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LnByb3BlcnR5ID0gZnVuY3Rpb24gKG9iaiwgcHJvcCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eShwcm9wKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5ub3RQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5LCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBkb2VzIF9ub3RfIGhhdmUgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0Lm5vdFByb3BlcnR5KHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ2NvZmZlZScpO1xuICAgKlxuICAgKiBAbmFtZSBub3RQcm9wZXJ0eVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubm90UHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5ub3QuaGF2ZS5wcm9wZXJ0eShwcm9wKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5kZWVwUHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YCwgd2hpY2ggY2FuIGJlIGFcbiAgICogc3RyaW5nIHVzaW5nIGRvdC0gYW5kIGJyYWNrZXQtbm90YXRpb24gZm9yIGRlZXAgcmVmZXJlbmNlLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0LmRlZXBQcm9wZXJ0eSh7IHRlYTogeyBncmVlbjogJ21hdGNoYScgfX0sICd0ZWEuZ3JlZW4nKTtcbiAgICpcbiAgICogQG5hbWUgZGVlcFByb3BlcnR5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kZWVwUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5oYXZlLmRlZXAucHJvcGVydHkocHJvcCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAubm90RGVlcFByb3BlcnR5KG9iamVjdCwgcHJvcGVydHksIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGRvZXMgX25vdF8gaGF2ZSBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAsIHdoaWNoXG4gICAqIGNhbiBiZSBhIHN0cmluZyB1c2luZyBkb3QtIGFuZCBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwIHJlZmVyZW5jZS5cbiAgICpcbiAgICogICAgIGFzc2VydC5ub3REZWVwUHJvcGVydHkoeyB0ZWE6IHsgZ3JlZW46ICdtYXRjaGEnIH19LCAndGVhLm9vbG9uZycpO1xuICAgKlxuICAgKiBAbmFtZSBub3REZWVwUHJvcGVydHlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0Lm5vdERlZXBQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvYmosIHByb3AsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5oYXZlLmRlZXAucHJvcGVydHkocHJvcCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAucHJvcGVydHlWYWwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGhhcyBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAgd2l0aCB2YWx1ZSBnaXZlblxuICAgKiBieSBgdmFsdWVgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0LnByb3BlcnR5VmFsKHsgdGVhOiAnaXMgZ29vZCcgfSwgJ3RlYScsICdpcyBnb29kJyk7XG4gICAqXG4gICAqIEBuYW1lIHByb3BlcnR5VmFsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5wcm9wZXJ0eVZhbCA9IGZ1bmN0aW9uIChvYmosIHByb3AsIHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uaGF2ZS5wcm9wZXJ0eShwcm9wLCB2YWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLnByb3BlcnR5Tm90VmFsKG9iamVjdCwgcHJvcGVydHksIHZhbHVlLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBoYXMgYSBwcm9wZXJ0eSBuYW1lZCBieSBgcHJvcGVydHlgLCBidXQgd2l0aCBhIHZhbHVlXG4gICAqIGRpZmZlcmVudCBmcm9tIHRoYXQgZ2l2ZW4gYnkgYHZhbHVlYC5cbiAgICpcbiAgICogICAgIGFzc2VydC5wcm9wZXJ0eU5vdFZhbCh7IHRlYTogJ2lzIGdvb2QnIH0sICd0ZWEnLCAnaXMgYmFkJyk7XG4gICAqXG4gICAqIEBuYW1lIHByb3BlcnR5Tm90VmFsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5wcm9wZXJ0eU5vdFZhbCA9IGZ1bmN0aW9uIChvYmosIHByb3AsIHZhbCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8ubm90LmhhdmUucHJvcGVydHkocHJvcCwgdmFsKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5kZWVwUHJvcGVydHlWYWwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGhhcyBhIHByb3BlcnR5IG5hbWVkIGJ5IGBwcm9wZXJ0eWAgd2l0aCB2YWx1ZSBnaXZlblxuICAgKiBieSBgdmFsdWVgLiBgcHJvcGVydHlgIGNhbiB1c2UgZG90LSBhbmQgYnJhY2tldC1ub3RhdGlvbiBmb3IgZGVlcFxuICAgKiByZWZlcmVuY2UuXG4gICAqXG4gICAqICAgICBhc3NlcnQuZGVlcFByb3BlcnR5VmFsKHsgdGVhOiB7IGdyZWVuOiAnbWF0Y2hhJyB9fSwgJ3RlYS5ncmVlbicsICdtYXRjaGEnKTtcbiAgICpcbiAgICogQG5hbWUgZGVlcFByb3BlcnR5VmFsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kZWVwUHJvcGVydHlWYWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eShwcm9wLCB2YWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmRlZXBQcm9wZXJ0eU5vdFZhbChvYmplY3QsIHByb3BlcnR5LCB2YWx1ZSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgcHJvcGVydHkgbmFtZWQgYnkgYHByb3BlcnR5YCwgYnV0IHdpdGggYSB2YWx1ZVxuICAgKiBkaWZmZXJlbnQgZnJvbSB0aGF0IGdpdmVuIGJ5IGB2YWx1ZWAuIGBwcm9wZXJ0eWAgY2FuIHVzZSBkb3QtIGFuZFxuICAgKiBicmFja2V0LW5vdGF0aW9uIGZvciBkZWVwIHJlZmVyZW5jZS5cbiAgICpcbiAgICogICAgIGFzc2VydC5kZWVwUHJvcGVydHlOb3RWYWwoeyB0ZWE6IHsgZ3JlZW46ICdtYXRjaGEnIH19LCAndGVhLmdyZWVuJywgJ2tvbmFjaGEnKTtcbiAgICpcbiAgICogQG5hbWUgZGVlcFByb3BlcnR5Tm90VmFsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kZWVwUHJvcGVydHlOb3RWYWwgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCB2YWwsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5oYXZlLmRlZXAucHJvcGVydHkocHJvcCwgdmFsKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5sZW5ndGhPZihvYmplY3QsIGxlbmd0aCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaGFzIGEgYGxlbmd0aGAgcHJvcGVydHkgd2l0aCB0aGUgZXhwZWN0ZWQgdmFsdWUuXG4gICAqXG4gICAqICAgICBhc3NlcnQubGVuZ3RoT2YoWzEsMiwzXSwgMywgJ2FycmF5IGhhcyBsZW5ndGggb2YgMycpO1xuICAgKiAgICAgYXNzZXJ0Lmxlbmd0aE9mKCdmb29iYXInLCA2LCAnc3RyaW5nIGhhcyBsZW5ndGggb2YgNicpO1xuICAgKlxuICAgKiBAbmFtZSBsZW5ndGhPZlxuICAgKiBAcGFyYW0ge01peGVkfSBvYmplY3RcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQubGVuZ3RoT2YgPSBmdW5jdGlvbiAoZXhwLCBsZW4sIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oZXhwLCBtc2cpLnRvLmhhdmUubGVuZ3RoKGxlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAudGhyb3dzKGZ1bmN0aW9uLCBbY29uc3RydWN0b3Ivc3RyaW5nL3JlZ2V4cF0sIFtzdHJpbmcvcmVnZXhwXSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYGZ1bmN0aW9uYCB3aWxsIHRocm93IGFuIGVycm9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ugb2ZcbiAgICogYGNvbnN0cnVjdG9yYCwgb3IgYWx0ZXJuYXRlbHkgdGhhdCBpdCB3aWxsIHRocm93IGFuIGVycm9yIHdpdGggbWVzc2FnZVxuICAgKiBtYXRjaGluZyBgcmVnZXhwYC5cbiAgICpcbiAgICogICAgIGFzc2VydC50aHJvd3MoZm4sICdmdW5jdGlvbiB0aHJvd3MgYSByZWZlcmVuY2UgZXJyb3InKTtcbiAgICogICAgIGFzc2VydC50aHJvd3MoZm4sIC9mdW5jdGlvbiB0aHJvd3MgYSByZWZlcmVuY2UgZXJyb3IvKTtcbiAgICogICAgIGFzc2VydC50aHJvd3MoZm4sIFJlZmVyZW5jZUVycm9yKTtcbiAgICogICAgIGFzc2VydC50aHJvd3MoZm4sIFJlZmVyZW5jZUVycm9yLCAnZnVuY3Rpb24gdGhyb3dzIGEgcmVmZXJlbmNlIGVycm9yJyk7XG4gICAqICAgICBhc3NlcnQudGhyb3dzKGZuLCBSZWZlcmVuY2VFcnJvciwgL2Z1bmN0aW9uIHRocm93cyBhIHJlZmVyZW5jZSBlcnJvci8pO1xuICAgKlxuICAgKiBAbmFtZSB0aHJvd3NcbiAgICogQGFsaWFzIHRocm93XG4gICAqIEBhbGlhcyBUaHJvd1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvblxuICAgKiBAcGFyYW0ge0Vycm9yQ29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNFcnJvcl90eXBlc1xuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQudGhyb3dzID0gZnVuY3Rpb24gKGZuLCBlcnJ0LCBlcnJzLCBtc2cpIHtcbiAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBlcnJ0IHx8IGVycnQgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgIGVycnMgPSBlcnJ0O1xuICAgICAgZXJydCA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGFzc2VydEVyciA9IG5ldyBBc3NlcnRpb24oZm4sIG1zZykudG8udGhyb3coZXJydCwgZXJycyk7XG4gICAgcmV0dXJuIGZsYWcoYXNzZXJ0RXJyLCAnb2JqZWN0Jyk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuZG9lc05vdFRocm93KGZ1bmN0aW9uLCBbY29uc3RydWN0b3IvcmVnZXhwXSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYGZ1bmN0aW9uYCB3aWxsIF9ub3RfIHRocm93IGFuIGVycm9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ugb2ZcbiAgICogYGNvbnN0cnVjdG9yYCwgb3IgYWx0ZXJuYXRlbHkgdGhhdCBpdCB3aWxsIG5vdCB0aHJvdyBhbiBlcnJvciB3aXRoIG1lc3NhZ2VcbiAgICogbWF0Y2hpbmcgYHJlZ2V4cGAuXG4gICAqXG4gICAqICAgICBhc3NlcnQuZG9lc05vdFRocm93KGZuLCBFcnJvciwgJ2Z1bmN0aW9uIGRvZXMgbm90IHRocm93Jyk7XG4gICAqXG4gICAqIEBuYW1lIGRvZXNOb3RUaHJvd1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvblxuICAgKiBAcGFyYW0ge0Vycm9yQ29uc3RydWN0b3J9IGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNFcnJvcl90eXBlc1xuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24gKGZuLCB0eXBlLCBtc2cpIHtcbiAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiB0eXBlKSB7XG4gICAgICBtc2cgPSB0eXBlO1xuICAgICAgdHlwZSA9IG51bGw7XG4gICAgfVxuXG4gICAgbmV3IEFzc2VydGlvbihmbiwgbXNnKS50by5ub3QuVGhyb3codHlwZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAub3BlcmF0b3IodmFsMSwgb3BlcmF0b3IsIHZhbDIsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQ29tcGFyZXMgdHdvIHZhbHVlcyB1c2luZyBgb3BlcmF0b3JgLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0Lm9wZXJhdG9yKDEsICc8JywgMiwgJ2V2ZXJ5dGhpbmcgaXMgb2snKTtcbiAgICogICAgIGFzc2VydC5vcGVyYXRvcigxLCAnPicsIDIsICd0aGlzIHdpbGwgZmFpbCcpO1xuICAgKlxuICAgKiBAbmFtZSBvcGVyYXRvclxuICAgKiBAcGFyYW0ge01peGVkfSB2YWwxXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcGVyYXRvclxuICAgKiBAcGFyYW0ge01peGVkfSB2YWwyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5vcGVyYXRvciA9IGZ1bmN0aW9uICh2YWwsIG9wZXJhdG9yLCB2YWwyLCBtc2cpIHtcbiAgICB2YXIgb2s7XG4gICAgc3dpdGNoKG9wZXJhdG9yKSB7XG4gICAgICBjYXNlICc9PSc6XG4gICAgICAgIG9rID0gdmFsID09IHZhbDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnPT09JzpcbiAgICAgICAgb2sgPSB2YWwgPT09IHZhbDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnPic6XG4gICAgICAgIG9rID0gdmFsID4gdmFsMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICc+PSc6XG4gICAgICAgIG9rID0gdmFsID49IHZhbDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnPCc6XG4gICAgICAgIG9rID0gdmFsIDwgdmFsMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICc8PSc6XG4gICAgICAgIG9rID0gdmFsIDw9IHZhbDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnIT0nOlxuICAgICAgICBvayA9IHZhbCAhPSB2YWwyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJyE9PSc6XG4gICAgICAgIG9rID0gdmFsICE9PSB2YWwyO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBvcGVyYXRvciBcIicgKyBvcGVyYXRvciArICdcIicpO1xuICAgIH1cbiAgICB2YXIgdGVzdCA9IG5ldyBBc3NlcnRpb24ob2ssIG1zZyk7XG4gICAgdGVzdC5hc3NlcnQoXG4gICAgICAgIHRydWUgPT09IGZsYWcodGVzdCwgJ29iamVjdCcpXG4gICAgICAsICdleHBlY3RlZCAnICsgdXRpbC5pbnNwZWN0KHZhbCkgKyAnIHRvIGJlICcgKyBvcGVyYXRvciArICcgJyArIHV0aWwuaW5zcGVjdCh2YWwyKVxuICAgICAgLCAnZXhwZWN0ZWQgJyArIHV0aWwuaW5zcGVjdCh2YWwpICsgJyB0byBub3QgYmUgJyArIG9wZXJhdG9yICsgJyAnICsgdXRpbC5pbnNwZWN0KHZhbDIpICk7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuY2xvc2VUbyhhY3R1YWwsIGV4cGVjdGVkLCBkZWx0YSwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHRhcmdldCBpcyBlcXVhbCBgZXhwZWN0ZWRgLCB0byB3aXRoaW4gYSArLy0gYGRlbHRhYCByYW5nZS5cbiAgICpcbiAgICogICAgIGFzc2VydC5jbG9zZVRvKDEuNSwgMSwgMC41LCAnbnVtYmVycyBhcmUgY2xvc2UnKTtcbiAgICpcbiAgICogQG5hbWUgY2xvc2VUb1xuICAgKiBAcGFyYW0ge051bWJlcn0gYWN0dWFsXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBleHBlY3RlZFxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVsdGFcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmNsb3NlVG8gPSBmdW5jdGlvbiAoYWN0LCBleHAsIGRlbHRhLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGFjdCwgbXNnKS50by5iZS5jbG9zZVRvKGV4cCwgZGVsdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmFwcHJveGltYXRlbHkoYWN0dWFsLCBleHBlY3RlZCwgZGVsdGEsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IHRoZSB0YXJnZXQgaXMgZXF1YWwgYGV4cGVjdGVkYCwgdG8gd2l0aGluIGEgKy8tIGBkZWx0YWAgcmFuZ2UuXG4gICAqXG4gICAqICAgICBhc3NlcnQuYXBwcm94aW1hdGVseSgxLjUsIDEsIDAuNSwgJ251bWJlcnMgYXJlIGNsb3NlJyk7XG4gICAqXG4gICAqIEBuYW1lIGFwcHJveGltYXRlbHlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFjdHVhbFxuICAgKiBAcGFyYW0ge051bWJlcn0gZXhwZWN0ZWRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbHRhXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5hcHByb3hpbWF0ZWx5ID0gZnVuY3Rpb24gKGFjdCwgZXhwLCBkZWx0YSwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihhY3QsIG1zZykudG8uYmUuYXBwcm94aW1hdGVseShleHAsIGRlbHRhKTtcbiAgfTtcblxuICAvKipcbiAgICogIyMjIC5zYW1lTWVtYmVycyhzZXQxLCBzZXQyLCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgc2V0MWAgYW5kIGBzZXQyYCBoYXZlIHRoZSBzYW1lIG1lbWJlcnMuXG4gICAqIE9yZGVyIGlzIG5vdCB0YWtlbiBpbnRvIGFjY291bnQuXG4gICAqXG4gICAqICAgICBhc3NlcnQuc2FtZU1lbWJlcnMoWyAxLCAyLCAzIF0sIFsgMiwgMSwgMyBdLCAnc2FtZSBtZW1iZXJzJyk7XG4gICAqXG4gICAqIEBuYW1lIHNhbWVNZW1iZXJzXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNldDFcbiAgICogQHBhcmFtIHtBcnJheX0gc2V0MlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuc2FtZU1lbWJlcnMgPSBmdW5jdGlvbiAoc2V0MSwgc2V0MiwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihzZXQxLCBtc2cpLnRvLmhhdmUuc2FtZS5tZW1iZXJzKHNldDIpO1xuICB9XG5cbiAgLyoqXG4gICAqICMjIyAuc2FtZURlZXBNZW1iZXJzKHNldDEsIHNldDIsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBzZXQxYCBhbmQgYHNldDJgIGhhdmUgdGhlIHNhbWUgbWVtYmVycyAtIHVzaW5nIGEgZGVlcCBlcXVhbGl0eSBjaGVja2luZy5cbiAgICogT3JkZXIgaXMgbm90IHRha2VuIGludG8gYWNjb3VudC5cbiAgICpcbiAgICogICAgIGFzc2VydC5zYW1lRGVlcE1lbWJlcnMoWyB7YjogM30sIHthOiAyfSwge2M6IDV9IF0sIFsge2M6IDV9LCB7YjogM30sIHthOiAyfSBdLCAnc2FtZSBkZWVwIG1lbWJlcnMnKTtcbiAgICpcbiAgICogQG5hbWUgc2FtZURlZXBNZW1iZXJzXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNldDFcbiAgICogQHBhcmFtIHtBcnJheX0gc2V0MlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuc2FtZURlZXBNZW1iZXJzID0gZnVuY3Rpb24gKHNldDEsIHNldDIsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oc2V0MSwgbXNnKS50by5oYXZlLnNhbWUuZGVlcC5tZW1iZXJzKHNldDIpO1xuICB9XG5cbiAgLyoqXG4gICAqICMjIyAuaW5jbHVkZU1lbWJlcnMoc3VwZXJzZXQsIHN1YnNldCwgW21lc3NhZ2VdKVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYHN1YnNldGAgaXMgaW5jbHVkZWQgaW4gYHN1cGVyc2V0YC5cbiAgICogT3JkZXIgaXMgbm90IHRha2VuIGludG8gYWNjb3VudC5cbiAgICpcbiAgICogICAgIGFzc2VydC5pbmNsdWRlTWVtYmVycyhbIDEsIDIsIDMgXSwgWyAyLCAxIF0sICdpbmNsdWRlIG1lbWJlcnMnKTtcbiAgICpcbiAgICogQG5hbWUgaW5jbHVkZU1lbWJlcnNcbiAgICogQHBhcmFtIHtBcnJheX0gc3VwZXJzZXRcbiAgICogQHBhcmFtIHtBcnJheX0gc3Vic2V0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pbmNsdWRlTWVtYmVycyA9IGZ1bmN0aW9uIChzdXBlcnNldCwgc3Vic2V0LCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKHN1cGVyc2V0LCBtc2cpLnRvLmluY2x1ZGUubWVtYmVycyhzdWJzZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqICMjIyAuaW5jbHVkZURlZXBNZW1iZXJzKHN1cGVyc2V0LCBzdWJzZXQsIFttZXNzYWdlXSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBzdWJzZXRgIGlzIGluY2x1ZGVkIGluIGBzdXBlcnNldGAgLSB1c2luZyBkZWVwIGVxdWFsaXR5IGNoZWNraW5nLlxuICAgKiBPcmRlciBpcyBub3QgdGFrZW4gaW50byBhY2NvdW50LlxuICAgKiBEdXBsaWNhdGVzIGFyZSBpZ25vcmVkLlxuICAgKlxuICAgKiAgICAgYXNzZXJ0LmluY2x1ZGVEZWVwTWVtYmVycyhbIHthOiAxfSwge2I6IDJ9LCB7YzogM30gXSwgWyB7YjogMn0sIHthOiAxfSwge2I6IDJ9IF0sICdpbmNsdWRlIGRlZXAgbWVtYmVycycpO1xuICAgKlxuICAgKiBAbmFtZSBpbmNsdWRlRGVlcE1lbWJlcnNcbiAgICogQHBhcmFtIHtBcnJheX0gc3VwZXJzZXRcbiAgICogQHBhcmFtIHtBcnJheX0gc3Vic2V0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pbmNsdWRlRGVlcE1lbWJlcnMgPSBmdW5jdGlvbiAoc3VwZXJzZXQsIHN1YnNldCwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihzdXBlcnNldCwgbXNnKS50by5pbmNsdWRlLmRlZXAubWVtYmVycyhzdWJzZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqICMjIyAub25lT2YoaW5MaXN0LCBsaXN0LCBbbWVzc2FnZV0pXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBub24tb2JqZWN0LCBub24tYXJyYXkgdmFsdWUgYGluTGlzdGAgYXBwZWFycyBpbiB0aGUgZmxhdCBhcnJheSBgbGlzdGAuXG4gICAqXG4gICAqICAgICBhc3NlcnQub25lT2YoMSwgWyAyLCAxIF0sICdOb3QgZm91bmQgaW4gbGlzdCcpO1xuICAgKlxuICAgKiBAbmFtZSBvbmVPZlxuICAgKiBAcGFyYW0geyp9IGluTGlzdFxuICAgKiBAcGFyYW0ge0FycmF5PCo+fSBsaXN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5vbmVPZiA9IGZ1bmN0aW9uIChpbkxpc3QsIGxpc3QsIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24oaW5MaXN0LCBtc2cpLnRvLmJlLm9uZU9mKGxpc3QpO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmNoYW5nZXMoZnVuY3Rpb24sIG9iamVjdCwgcHJvcGVydHkpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGNoYW5nZXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHlcbiAgICpcbiAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcbiAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBvYmoudmFsID0gMjIgfTtcbiAgICogICAgIGFzc2VydC5jaGFuZ2VzKGZuLCBvYmosICd2YWwnKTtcbiAgICpcbiAgICogQG5hbWUgY2hhbmdlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllciBmdW5jdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmNoYW5nZXMgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuICAgIG5ldyBBc3NlcnRpb24oZm4pLnRvLmNoYW5nZShvYmosIHByb3ApO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmRvZXNOb3RDaGFuZ2UoZnVuY3Rpb24sIG9iamVjdCwgcHJvcGVydHkpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBhIGZ1bmN0aW9uIGRvZXMgbm90IGNoYW5nZXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHlcbiAgICpcbiAgICogICAgIHZhciBvYmogPSB7IHZhbDogMTAgfTtcbiAgICogICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnZm9vJyk7IH07XG4gICAqICAgICBhc3NlcnQuZG9lc05vdENoYW5nZShmbiwgb2JqLCAndmFsJyk7XG4gICAqXG4gICAqIEBuYW1lIGRvZXNOb3RDaGFuZ2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbW9kaWZpZXIgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kb2VzTm90Q2hhbmdlID0gZnVuY3Rpb24gKGZuLCBvYmosIHByb3ApIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGZuKS50by5ub3QuY2hhbmdlKG9iaiwgcHJvcCk7XG4gIH1cblxuICAgLyoqXG4gICAqICMjIyAuaW5jcmVhc2VzKGZ1bmN0aW9uLCBvYmplY3QsIHByb3BlcnR5KVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYSBmdW5jdGlvbiBpbmNyZWFzZXMgYW4gb2JqZWN0IHByb3BlcnR5XG4gICAqXG4gICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG4gICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCA9IDEzIH07XG4gICAqICAgICBhc3NlcnQuaW5jcmVhc2VzKGZuLCBvYmosICd2YWwnKTtcbiAgICpcbiAgICogQG5hbWUgaW5jcmVhc2VzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG1vZGlmaWVyIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5hbWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuaW5jcmVhc2VzID0gZnVuY3Rpb24gKGZuLCBvYmosIHByb3ApIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGZuKS50by5pbmNyZWFzZShvYmosIHByb3ApO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmRvZXNOb3RJbmNyZWFzZShmdW5jdGlvbiwgb2JqZWN0LCBwcm9wZXJ0eSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZG9lcyBub3QgaW5jcmVhc2Ugb2JqZWN0IHByb3BlcnR5XG4gICAqXG4gICAqICAgICB2YXIgb2JqID0geyB2YWw6IDEwIH07XG4gICAqICAgICB2YXIgZm4gPSBmdW5jdGlvbigpIHsgb2JqLnZhbCA9IDggfTtcbiAgICogICAgIGFzc2VydC5kb2VzTm90SW5jcmVhc2UoZm4sIG9iaiwgJ3ZhbCcpO1xuICAgKlxuICAgKiBAbmFtZSBkb2VzTm90SW5jcmVhc2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbW9kaWZpZXIgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5kb2VzTm90SW5jcmVhc2UgPSBmdW5jdGlvbiAoZm4sIG9iaiwgcHJvcCkge1xuICAgIG5ldyBBc3NlcnRpb24oZm4pLnRvLm5vdC5pbmNyZWFzZShvYmosIHByb3ApO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmRlY3JlYXNlcyhmdW5jdGlvbiwgb2JqZWN0LCBwcm9wZXJ0eSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZGVjcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuICAgKlxuICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSA1IH07XG4gICAqICAgICBhc3NlcnQuZGVjcmVhc2VzKGZuLCBvYmosICd2YWwnKTtcbiAgICpcbiAgICogQG5hbWUgZGVjcmVhc2VzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG1vZGlmaWVyIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5hbWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgX29wdGlvbmFsX1xuICAgKiBAbmFtZXNwYWNlIEFzc2VydFxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cblxuICBhc3NlcnQuZGVjcmVhc2VzID0gZnVuY3Rpb24gKGZuLCBvYmosIHByb3ApIHtcbiAgICBuZXcgQXNzZXJ0aW9uKGZuKS50by5kZWNyZWFzZShvYmosIHByb3ApO1xuICB9XG5cbiAgIC8qKlxuICAgKiAjIyMgLmRvZXNOb3REZWNyZWFzZShmdW5jdGlvbiwgb2JqZWN0LCBwcm9wZXJ0eSlcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGEgZnVuY3Rpb24gZG9lcyBub3QgZGVjcmVhc2VzIGFuIG9iamVjdCBwcm9wZXJ0eVxuICAgKlxuICAgKiAgICAgdmFyIG9iaiA9IHsgdmFsOiAxMCB9O1xuICAgKiAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7IG9iai52YWwgPSAxNSB9O1xuICAgKiAgICAgYXNzZXJ0LmRvZXNOb3REZWNyZWFzZShmbiwgb2JqLCAndmFsJyk7XG4gICAqXG4gICAqIEBuYW1lIGRvZXNOb3REZWNyZWFzZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtb2RpZmllciBmdW5jdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmRvZXNOb3REZWNyZWFzZSA9IGZ1bmN0aW9uIChmbiwgb2JqLCBwcm9wKSB7XG4gICAgbmV3IEFzc2VydGlvbihmbikudG8ubm90LmRlY3JlYXNlKG9iaiwgcHJvcCk7XG4gIH1cblxuICAvKiFcbiAgICogIyMjIC5pZkVycm9yKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyBpZiB2YWx1ZSBpcyBub3QgYSBmYWxzZSB2YWx1ZSwgYW5kIHRocm93cyBpZiBpdCBpcyBhIHRydWUgdmFsdWUuXG4gICAqIFRoaXMgaXMgYWRkZWQgdG8gYWxsb3cgZm9yIGNoYWkgdG8gYmUgYSBkcm9wLWluIHJlcGxhY2VtZW50IGZvciBOb2RlJ3NcbiAgICogYXNzZXJ0IGNsYXNzLlxuICAgKlxuICAgKiAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignSSBhbSBhIGN1c3RvbSBlcnJvcicpO1xuICAgKiAgICAgYXNzZXJ0LmlmRXJyb3IoZXJyKTsgLy8gUmV0aHJvd3MgZXJyIVxuICAgKlxuICAgKiBAbmFtZSBpZkVycm9yXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlmRXJyb3IgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgaWYgKHZhbCkge1xuICAgICAgdGhyb3codmFsKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNFeHRlbnNpYmxlKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIGV4dGVuc2libGUgKGNhbiBoYXZlIG5ldyBwcm9wZXJ0aWVzIGFkZGVkIHRvIGl0KS5cbiAgICpcbiAgICogICAgIGFzc2VydC5pc0V4dGVuc2libGUoe30pO1xuICAgKlxuICAgKiBAbmFtZSBpc0V4dGVuc2libGVcbiAgICogQGFsaWFzIGV4dGVuc2libGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc0V4dGVuc2libGUgPSBmdW5jdGlvbiAob2JqLCBtc2cpIHtcbiAgICBuZXcgQXNzZXJ0aW9uKG9iaiwgbXNnKS50by5iZS5leHRlbnNpYmxlO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90RXh0ZW5zaWJsZShvYmplY3QpXG4gICAqXG4gICAqIEFzc2VydHMgdGhhdCBgb2JqZWN0YCBpcyBfbm90XyBleHRlbnNpYmxlLlxuICAgKlxuICAgKiAgICAgdmFyIG5vbkV4dGVuc2libGVPYmplY3QgPSBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pO1xuICAgKiAgICAgdmFyIHNlYWxlZE9iamVjdCA9IE9iamVjdC5zZWFsKHt9KTtcbiAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXNlKHt9KTtcbiAgICpcbiAgICogICAgIGFzc2VydC5pc05vdEV4dGVuc2libGUobm9uRXh0ZW5zaWJsZU9iamVjdCk7XG4gICAqICAgICBhc3NlcnQuaXNOb3RFeHRlbnNpYmxlKHNlYWxlZE9iamVjdCk7XG4gICAqICAgICBhc3NlcnQuaXNOb3RFeHRlbnNpYmxlKGZyb3plbk9iamVjdCk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90RXh0ZW5zaWJsZVxuICAgKiBAYWxpYXMgbm90RXh0ZW5zaWJsZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzTm90RXh0ZW5zaWJsZSA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5iZS5leHRlbnNpYmxlO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzU2VhbGVkKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIHNlYWxlZCAoY2Fubm90IGhhdmUgbmV3IHByb3BlcnRpZXMgYWRkZWQgdG8gaXRcbiAgICogYW5kIGl0cyBleGlzdGluZyBwcm9wZXJ0aWVzIGNhbm5vdCBiZSByZW1vdmVkKS5cbiAgICpcbiAgICogICAgIHZhciBzZWFsZWRPYmplY3QgPSBPYmplY3Quc2VhbCh7fSk7XG4gICAqICAgICB2YXIgZnJvemVuT2JqZWN0ID0gT2JqZWN0LnNlYWwoe30pO1xuICAgKlxuICAgKiAgICAgYXNzZXJ0LmlzU2VhbGVkKHNlYWxlZE9iamVjdCk7XG4gICAqICAgICBhc3NlcnQuaXNTZWFsZWQoZnJvemVuT2JqZWN0KTtcbiAgICpcbiAgICogQG5hbWUgaXNTZWFsZWRcbiAgICogQGFsaWFzIHNlYWxlZFxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzU2VhbGVkID0gZnVuY3Rpb24gKG9iaiwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uYmUuc2VhbGVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90U2VhbGVkKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIF9ub3RfIHNlYWxlZC5cbiAgICpcbiAgICogICAgIGFzc2VydC5pc05vdFNlYWxlZCh7fSk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90U2VhbGVkXG4gICAqIEBhbGlhcyBub3RTZWFsZWRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdFNlYWxlZCA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5iZS5zZWFsZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqICMjIyAuaXNGcm96ZW4ob2JqZWN0KVxuICAgKlxuICAgKiBBc3NlcnRzIHRoYXQgYG9iamVjdGAgaXMgZnJvemVuIChjYW5ub3QgaGF2ZSBuZXcgcHJvcGVydGllcyBhZGRlZCB0byBpdFxuICAgKiBhbmQgaXRzIGV4aXN0aW5nIHByb3BlcnRpZXMgY2Fubm90IGJlIG1vZGlmaWVkKS5cbiAgICpcbiAgICogICAgIHZhciBmcm96ZW5PYmplY3QgPSBPYmplY3QuZnJlZXplKHt9KTtcbiAgICogICAgIGFzc2VydC5mcm96ZW4oZnJvemVuT2JqZWN0KTtcbiAgICpcbiAgICogQG5hbWUgaXNGcm96ZW5cbiAgICogQGFsaWFzIGZyb3plblxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIF9vcHRpb25hbF9cbiAgICogQG5hbWVzcGFjZSBBc3NlcnRcbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG5cbiAgYXNzZXJ0LmlzRnJvemVuID0gZnVuY3Rpb24gKG9iaiwgbXNnKSB7XG4gICAgbmV3IEFzc2VydGlvbihvYmosIG1zZykudG8uYmUuZnJvemVuO1xuICB9O1xuXG4gIC8qKlxuICAgKiAjIyMgLmlzTm90RnJvemVuKG9iamVjdClcbiAgICpcbiAgICogQXNzZXJ0cyB0aGF0IGBvYmplY3RgIGlzIF9ub3RfIGZyb3plbi5cbiAgICpcbiAgICogICAgIGFzc2VydC5pc05vdEZyb3plbih7fSk7XG4gICAqXG4gICAqIEBuYW1lIGlzTm90RnJvemVuXG4gICAqIEBhbGlhcyBub3RGcm96ZW5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBfb3B0aW9uYWxfXG4gICAqIEBuYW1lc3BhY2UgQXNzZXJ0XG4gICAqIEBhcGkgcHVibGljXG4gICAqL1xuXG4gIGFzc2VydC5pc05vdEZyb3plbiA9IGZ1bmN0aW9uIChvYmosIG1zZykge1xuICAgIG5ldyBBc3NlcnRpb24ob2JqLCBtc2cpLnRvLm5vdC5iZS5mcm96ZW47XG4gIH07XG5cbiAgLyohXG4gICAqIEFsaWFzZXMuXG4gICAqL1xuXG4gIChmdW5jdGlvbiBhbGlhcyhuYW1lLCBhcyl7XG4gICAgYXNzZXJ0W2FzXSA9IGFzc2VydFtuYW1lXTtcbiAgICByZXR1cm4gYWxpYXM7XG4gIH0pXG4gICgnaXNPaycsICdvaycpXG4gICgnaXNOb3RPaycsICdub3RPaycpXG4gICgndGhyb3dzJywgJ3Rocm93JylcbiAgKCd0aHJvd3MnLCAnVGhyb3cnKVxuICAoJ2lzRXh0ZW5zaWJsZScsICdleHRlbnNpYmxlJylcbiAgKCdpc05vdEV4dGVuc2libGUnLCAnbm90RXh0ZW5zaWJsZScpXG4gICgnaXNTZWFsZWQnLCAnc2VhbGVkJylcbiAgKCdpc05vdFNlYWxlZCcsICdub3RTZWFsZWQnKVxuICAoJ2lzRnJvemVuJywgJ2Zyb3plbicpXG4gICgnaXNOb3RGcm96ZW4nLCAnbm90RnJvemVuJyk7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY2hhaS9saWIvY2hhaS9pbnRlcmZhY2UvYXNzZXJ0LmpzXG4gKiogbW9kdWxlIGlkID0gMTAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9